"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="46d96a73-f751-5dab-9314-6d55b8be1ebf")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[1085],{733559:(e,t,n)=>{let a;n.r(t),n.d(t,{DesignView:()=>i0});var o=n(411855),i=n(188507),r=n(786013),l=n(587670),c=n(966712),s=n(192437),d=n(392592),p=n(214453),m=n(818194),u=n(964881),_=n(632430),E=n(285381),g=n(843495),y=n(441088),v=n(29680),h=n(737499),N=n(830646);function I(e){let t=e.search(/</),n=e.search(/>/);return e.substring(t,n+1)}var f=n(698993),T=n(170960),A=n(100197),b=n(338400),O=n(680760),P=n(402609),S=n(720750),C=n(374626),w=n(939863),D=n(293017),k=n(931828),x=n(101505),M=n(226055),R=n(456104),L=n(696673),K=n(335682),U=n(309798),V=n(833629),B=n(397065),F=n(740280),z=n(864114),G=n(756159),W=n(463546),Y=n(455263);function H(){let e=(0,M.GS)(),{isShowing:t,complete:n,show:a}=(0,R.e)({overlay:W.N5c,priority:B.N.SECONDARY_MODAL}),r=(0,i.wA)(),c=(0,v.aV)(),s=!!(0,U.f)("ui_kits_intro_tooltip"),d=!!(0,U.f)("seen_explore_ui_kits_blue_tooltip"),{hasAnyUiKit:p}=(0,L.I7)(),m=(0,C.md)(G.Cl),u=(0,V.jO)(),_=(0,Y.t)(),E=K.q5()?.canEdit,g=(0,i.d4)(e=>e.leftPanel.activeTab===l.xae.LAYERS);return(o.useEffect(()=>{!E||!p||m||s||d||!u||c||_||!g||t||a()},[a,E,p,s,d,u,c,_,t,m,g]),o.useEffect(()=>{!g&&t&&n()},[g,t,n]),t)?o.createElement(F.X,{isShowing:t,title:(0,w.tx)("rcs.ui_kits.jump_start_your_designs_with_ui_kits"),description:(0,w.tx)("rcs.ui_kits.grab_pre_built_ui",{strongAssets:o.createElement("strong",{style:{display:"contents"}},(0,w.tx)("design_systems.assets_panel.assets"))}),primaryCta:{label:(0,w.tx)("rcs.presets_baseline.try_it"),type:"button",onClick:()=>{r(D.FP({tab:l.xae.ASSETS})),n()},ctaTrackingDescriptor:x.c.PRESETS_TRY_IT},position:e?z.Q.UI3_EDITOR_TOP_LEFT:z.Q.EDITOR_TOP_LEFT,trackingContextName:"UI Kits Intro Tooltip",userFlagOnShow:"ui_kits_intro_tooltip",onClose:()=>{r(k.b({seen_explore_ui_kits_blue_tooltip:!0})),n()}}):null}var X=n(129318);let J=(0,n(38580).eU)(!1);var q=n(601538),$=n(646240),Q=n(752553),Z=n(864089),j=n(799569),ee=n(135876),et=n(47506),en=n(340159),ea=n(349410),eo=n(672517),ei=n(777078),er=n(373119),el=n(106112),ec=n(788256),es=n(239177),ed=n(666456);let ep="starting_points_templates_modal--templateOption--qYXkm",em="starting_points_templates_modal--templateOptionTitle--DmVPR",eu="starting_points_templates_modal--verticalTemplateImage--kAzQz";var e_=n(630834),eE=(e=>(e.DESKTOP="desktop",e.MOBILE="mobile",e.WEBSITE="website",e))(eE||{});function eg({onClose:e}){let t=(0,i.wA)(),[n,a]=o.useState(!1),[r,s]=o.useState(!1),d=(0,er.q)(),p=(0,K.tS)(),m=(0,i.d4)(e=>e.mirror.sceneGraph),u=d&&(0,ec.Qf)(m),_=!!u&&0===u.childrenGuids.length,[E]=(0,Q.IT)((0,en.tH)({})),g=!!(0,c.kc)().starting_points_ghost_previews,y=(0,ea.z9)(),{insertTemplate:v}=(0,ei.Fz)(),h=(0,es.g)(),N=(0,$.Xr)(ed.Yq),I=(0,c.Ay)().starting_points;if(o.useEffect(()=>{d&&u&&!_&&!r&&e()},[d,u,_,r,e]),!(0,c.kc)().starting_points_modal)return null;let f=e=>{switch(e){case"basics":return I?.figma_basics_hub_file_id;case"desktop":return I?.desktop_templates_hub_file_id;case"mobile":return I?.mobile_templates_hub_file_id;case"website":return I?.website_templates_hub_file_id}},T=async t=>{if("loaded"!==E.status)return;a(!0);let n=f(t);if(!n)return;let o=E.data[n];o&&(await v({template:{template:o,type:el.n.HubFile},userTriggered:!1,editScopeType:l.zkO.ONBOARDING,triggeredFrom:"starting-points",templateInsertionDirection:l.hKj.RIGHT}),(0,et.YQ)({id:"starting_points_template_inserted"}),e(),a(!1))},A=o.createElement(eo.$z,{onClick:()=>T("basics"),trackingProperties:{trackingDescriptor:x.c.LEARN_THE_BASICS}},(0,w.tx)("starting_points.learn_the_basics")),b=e=>{if(!g||!y())return;let n=f(e);if(!n||!E.data)return;let a=E.data[n];if(!a)return;let o={type:el.n.HubFile,template:a};(0,ei.Zg)({insert:()=>h(o,{moveViewportAfterPreview:!1,priority:"user-visible",previewManager:{nodeType:l.Z6A.CANVAS}}),template:o,fileKey:p,dispatch:t,triggeredFrom:"starting-points",userTriggered:!1,isPreview:!0})},O=()=>{g&&y()&&N()};return o.createElement(eo.fu,{name:"Starting Points Modal"},o.createElement("div",{className:"starting_points_templates_modal--startingPointsTemplatesModalPositioner--R8g3u"},o.createElement(ee.x,{isLoading:n,className:"starting_points_templates_modal--loadingSpinner--UOrjg"},()=>o.createElement("div",{className:"starting_points_templates_modal--startingPointsTemplatesModal--dUQte",onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1)},o.createElement("div",{className:"starting_points_templates_modal--modalInstructions--ZtdTL"},o.createElement("div",{className:"starting_points_templates_modal--modalTitle--HT3eZ"},(0,w.t)("starting_points.what_do_you_want_to_make_today")),o.createElement("div",{className:"starting_points_templates_modal--modalLearnMore--g-GWo"},(0,w.tx)("starting_points.or_learn_the_basics",{learnTheBasicsLink:A}))),o.createElement("div",{className:"starting_points_templates_modal--optionContainer--mYEsG"},o.createElement(eo.$z,{className:ep,onClick:()=>T("website"),onMouseEnter:()=>b("website"),onMouseLeave:O,trackingProperties:{trackingDescriptor:x.c.WEBSITE_TEMPLATES}},o.createElement("div",{className:em},(0,w.t)("starting_points.website")),o.createElement(Z.oW,{className:eu,src:"https://static.figma.com/uploads/9b8475fdab7c1ed3cd1c0d16b957d65a80840b74",alt:"Website template"})),o.createElement(eo.$z,{className:ep,onClick:()=>T("mobile"),onMouseEnter:()=>b("mobile"),onMouseLeave:O,trackingProperties:{trackingDescriptor:x.c.MOBILE_APP_TEMPLATES}},o.createElement("div",{className:em},(0,w.t)("starting_points.mobile_app")),o.createElement(Z.oW,{className:eu,src:"https://static.figma.com/uploads/b262e57bed515b9f0da45ae54fa43824d9704c14",alt:"Mobile app template"})),o.createElement(eo.$z,{className:ep,onClick:()=>T("desktop"),onMouseEnter:()=>b("desktop"),onMouseLeave:O,trackingProperties:{trackingDescriptor:x.c.DESKTOP_APP_TEMPLATES}},o.createElement("div",{className:em},(0,w.t)("starting_points.desktop_app")),o.createElement(Z.oW,{className:"starting_points_templates_modal--desktopTemplateImage--3kplg",src:"https://static.figma.com/uploads/cb2f715253dacb4e7d3fb211ff2792fc28a38832",alt:"Desktop app template"}))),o.createElement("div",{className:"starting_points_templates_modal--modalLearnMoreFooter--pSvfX"},(0,w.tx)("starting_points.or_learn_the_basics",{learnTheBasicsLink:A})),o.createElement(j.Jn,{className:"starting_points_templates_modal--closeButton--io-14",onClick:e,innerText:"close",svg:e_.default})))))}function ey(){let e=(0,i.wA)(),t=!(0,U.f)("not_gen_0"),n=(0,M.GS)(),a=(0,U.f)("dismissed_starting_points_templates_modal"),r=(0,C.md)(J),l=(0,c.Ay)().starting_points,{show:s,isShowing:d,complete:p}=(0,R.e)({overlay:W.EYw,priority:B.N.OVERRIDING_MODAL+1});return(o.useEffect(()=>{let e=!!(0,c.kc)().starting_points_modal,o=(0,X.QL)(q.E_.key)===q.E_.value;d||s({canShow:()=>e&&!!t&&!!n&&!a&&(r||o)&&!!l})},[d,s,t,n,r,a,l]),d)?o.createElement(eg,{onClose:()=>{a||e(k.b({dismissed_starting_points_templates_modal:!0})),p()}}):null}var ev=n(707458),eh=n(256975),eN=n(251960),eI=n(683694),ef=n(723239),eT=n(582947),eA=n(394828),eb=n(340514),eO=n(734938),eP=n(699857),eS=n(433195);let eC=(0,eT.r1)(eS.WX),ew=(0,eT.r1)(eS.b6),eD=!1;function ek(){let e=(0,i.wA)(),t=(0,C.md)(eI.wg),n=(0,v.aV)(),a=(0,C.md)(ef.mp),r=(0,eh._I)(),l=(0,M.GS)(),c=(0,C.md)(ew),s=(0,C.md)(eC),{uniqueId:d,show:p,complete:m,isShowing:u}=(0,R.e)({overlay:W.kc4,priority:B.N.SECONDARY_MODAL},[s,c,a]),_=(0,eP.U)("modal"),E=o.useCallback(()=>{!n&&!eD&&t&&r&&(0!==(ev.q.instance.getCurrentPage()?.childrenGuids.length||0)&&p({canShow:(e,t,n)=>!e&&!t&&function(e){let t=Date.now();return e.getTime()<=t-12096e5}(n)}),eD=!0)},[p,r,t,n]);function g(){e(k.b({[eS.WX]:!0})),m()}o.useEffect(()=>{l||E()},[E,l]),(0,eN.E)(d,(0,eO.w)("design"),()=>{E()}),o.useEffect(()=>{"loaded"===s.status&&s.data&&m()},[s,m]),(0,eN.E)(d,"Enter Inspect Mode",()=>{u&&g()});let y=(0,M.GS)()?q.ON:q.JN;return o.createElement(eb.rq,{isShowing:u,trackingContextName:eS.WX,onClose:g,targetKey:y,title:(0,w.tx)("dev_handoff.annotations_introduction_overlay.title"),media:o.createElement(eA.y,{src:"https://static.figma.com/uploads/5b9addc96424c11577a1ec91e1bbadcd786fe343",alt:(0,w.t)("dev_handoff.annotations_introduction_overlay.image_alt"),aspectRatio:1280/720}),description:(0,w.tx)("dev_handoff.annotations_introduction_overlay.description"),primaryCta:{label:(0,w.tx)("dev_handoff.annotations_introduction_overlay.primary_cta"),type:"button",onClick:function(){_("handoff")},ctaTrackingDescriptor:x.c.SHOW_ME}})}var ex=n(502665);let eM=(0,eT.r1)(eS.b6),eR=(0,eT.r1)(eS.WX),eL=!1,eK=!1;function eU(){let e=(0,i.wA)(),t=(0,v.aV)(),n=(0,C.md)(ef.mp),a=(0,C.md)(ex.N),r=(0,A.J2)(l.Ez5.annotationObserver().annotationInfoByTlf),c=C.md(K.yV)?.creatorId,s=(0,C.md)(eM),d=(0,C.md)(eR),{uniqueId:p,show:m,complete:u,isShowing:_}=(0,R.e)({overlay:W.kc4,priority:B.N.SECONDARY_MODAL},[s,d,n,a]),E=(0,eP.U)("modal"),g=r.size>0;function y(){e(k.b({[eS.b6]:!0})),u()}o.useEffect(()=>{t&&(eK=!0),!t&&!eL&&eK&&g&&(m({canShow:(e,t,n,a)=>!e&&!t&&c!==a&&function(e){let t=Date.now();return e.getTime()<=t-12096e5}(n)}),eL=!0)},[g,t,c,m]),o.useEffect(()=>{"loaded"===s.status&&s.data&&u()},[s,u]),(0,eN.E)(p,"Enter Inspect Mode",()=>{_&&y()});let h=(0,M.GS)()?q.ON:q.JN;return o.createElement(eb.rq,{isShowing:_,trackingContextName:eS.b6,onClose:y,targetKey:h,title:(0,w.tx)("dev_handoff.annotations_upsell_overlay.title"),media:o.createElement(eA.y,{src:"https://static.figma.com/uploads/e84a2faeb510847abd7bfb9c15a74ef974bb4c13",alt:(0,w.t)("dev_handoff.annotations_introduction_overlay.image_alt"),aspectRatio:1280/720}),description:(0,w.tx)("dev_handoff.annotations_upsell_overlay.description"),primaryCta:{label:(0,w.tx)("dev_handoff.annotations_upsell_overlay.primary_cta"),type:"button",onClick:function(){E("handoff")},ctaTrackingDescriptor:x.c.OPEN_DEV_MODE},secondaryCta:{label:(0,w.tx)("dev_handoff.annotations_upsell_overlay.secondary_cta"),type:"button",onClick:u,ctaTrackingDescriptor:x.c.NOT_NOW}})}var eV=n(152811),eB=n(363668),eF=n(511232),ez=n(344076),eG=n(54900),eW=n(582828),eY=n(199465);function eH({children:e}){return o.createElement(eY.G.Provider,{value:{loggerEventName:"design_navigate"}},e)}var eX=n(57512),eJ=n(911179),eq=n(889085),e$=n(648836),eQ=n(481483),eZ=n(544750),ej=n(75888),e0=n(677859),e1=n(86625),e8=n(629019),e2=n.n(e8),e3=n(498750),e7=n(541524),e5=n(7959),e4=n(630978),e6=n(695342),e9=n(221537),te=n(12519);let tt="stack_controls--input--gK1jo text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",tn="stack_controls--scrubbableControl--b1ChI",ta="stack_controls--inputSvg--wFizL",to="stack_controls--stackSpacingRow--Uus3H";function ti(){let e=(0,A.J2)(l.Ez5.canvasViewState().focusedStackRegion);if(!e)return null;let{region:t,focus:n}=e;return t===l.RN9.SPACING?o.createElement(tl,{focusOnMount:n}):t===l.RN9.COUNTER_SPACING?o.createElement(tc,{focusOnMount:n}):o.createElement(ts,{stackRegion:t,focusOnMount:n})}let tr=e=>{if(e.keyCode===e3.Uz.TAB){e.preventDefault(),e.currentTarget.blur();let t=e.shiftKey;l.Qa7.tabActiveStackRegion(t)}};function tl({focusOnMount:e}){return o.createElement(e5.fI,{className:to},o.createElement(te.KI,{focusOnMount:e,outerClassName:tn,inputClassName:tt,svgClassName:ta,onBlur:l.Qa7.clearActiveStackRegion,onKeyDown:tr,onPaste:td,noBorderOnFocus:!0,recordingKey:"stackSpacingControl",inputTestId:"stackSpacingControl",source:"canvas",onCanvasUI:!0}))}function tc({focusOnMount:e}){return o.createElement(e5.fI,{className:to},o.createElement(e4.q,{focusOnMount:e,outerClassName:tn,inputClassName:tt,svgClassName:ta,onBlur:l.Qa7.clearActiveStackRegion,onKeyDown:tr,onPaste:td,noBorderOnFocus:!0,recordingKey:"stackCounterSpacingControl",inputTestId:"stackCounterSpacingControl",source:"canvas",onCanvasUI:!0}))}function ts({stackRegion:e,focusOnMount:t}){let[n]=(0,e9.HF)(e),a=Array.isArray(n)?n.length:0;return e===l.RN9.SPACING?null:o.createElement(e5.fI,{className:e2()("stack_controls--stackPaddingRow--40WUa",{"stack_controls--large--bJFUN":a>3})},o.createElement(e6.s,{paddingSelection:e,focusOnMount:t,outerClassName:tn,inputClassName:tt,onBlur:l.Qa7.clearActiveStackRegion,onKeyDown:tr,onPaste:td,noBorderOnFocus:!0,svgClassName:ta,recordingKey:"stackPaddingControl",inputTestId:"stackPaddingControl",source:"canvas",disableVariablesEntryPoint:!0}))}function td(e){(0,e7.gk)(e)&&(e.preventDefault(),e.currentTarget.blur(),e1.l7.user("paste-in-stack",()=>{l.glU.triggerAction("paste",{})}))}let tp=o.memo(function(){return(0,i.d4)(e=>e.mirror.appModel.isReadOnly)?null:o.createElement(tm,null)});function tm(){return o.createElement(e$.k,{isShown:!0},o.createElement(ej.IA,null,o.createElement(tu,{testID:"DesignInlineMenu"})))}function tu({testID:e}){let t=(0,i.d4)(e=>{let t=e.mirror.selectionProperties.stackMode;return 1===e.mirror.selectionProperties.numSelected&&("HORIZONTAL"===t||"VERTICAL"===t)});return(0,i.d4)(e=>{let t=e.mirror.selectionProperties.selectedWidgetInfo;return!!(1===e.mirror.selectionProperties.numSelected&&t?.propertyMenu.length)})?o.createElement(e0.W1,{size:"small",testID:e},o.createElement(eQ.jk,null),o.createElement(eZ.x,null)):t?o.createElement(e0.W1,{testID:e,darkModePreferred:!0},o.createElement(ti,{key:"stackControls"})):null}var t_=n(284321),tE=n(57392),tg=n(100303),ty=n(137345),tv=n(286723),th=n(876743),tN=n(453856),tI=n(412371),tf=n(361607),tT=n(424982),tA=n(936486),tb=n(237701),tO=n(187882);let tP=new Map,tS=o.memo(function(){let e=(0,tO.GQ)(),t=(0,C.md)(tE.Lc),n=(0,C.md)((0,t_.Xh)(void 0)),a=(0,K.q5)(),r=(0,i.d4)(e=>e.leftPanel),s=(0,tO.cT)(),{pagesList:d,pageToNumChangesMap:p,isComparingChanges:m}=function(){let e=(0,tO.n0)(),t=(0,i.d4)(e=>!!(0,c.kc)().version_diffing&&e.mirror.appModel.activeCanvasEditModeType===l.m1T.COMPARE_CHANGES),n=(0,i.d4)(e=>e.versionHistory.compareId);return o.useMemo(()=>{if(!t||!n)return{pagesList:e,pageToNumChangesMap:tP,isComparingChanges:t};let a=(0,tv.ee)(e);return{pagesList:e,pageToNumChangesMap:a,isComparingChanges:t}},[t,n,e])}(),_=(0,A.J2)(l.Ez5.uiState().showCanvasSearch),E=(0,M.GS)(),g=(0,tI.g)({pagesList:d}),y=(0,v.aV)();(0,tO.bi)();let h=(0,u.X0)(),N=!!a&&n;return o.useEffect(()=>{N&&(0,et.YQ)({id:"Found Updates To Publish"})},[N]),o.createElement(th.Q,{ignoreRulers:y},o.createElement(tT.s,null),o.createElement(tf.$,null,E&&o.createElement(tb.n,null),E&&o.createElement(tA.d,{shouldUseBottomBorder:!h}),_?o.createElement(tg.EA.Provider,{value:!0},o.createElement(ty.f,{showFilter:!0})):d.length>0&&o.createElement(tN.yD,{recordingKey:"pagesPanel",isReadOnly:s,width:e,pagesList:d,hasTeamLibraryUpdates:t||N,activeTab:r.activeTab,showTabs:!s,isDevHandoff:!1,isDevHandoffOverview:!1,isComparingChanges:m,pageToNumChanges:p,onPageContextMenu:g})))});var tC=n(319008),tw=n(988889),tD=n(959369),tk=n(359919),tx=n(504440);function tM(e){return o.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},o.createElement("mask",{id:"fpl-icon-24-mail-a",fill:"#fff"},o.createElement("path",{fillRule:"evenodd",d:"M5.88 7h12.24a.88.88 0 0 1 .88.88v.82l-7 3.733L5 8.7v-.82A.88.88 0 0 1 5.88 7M4 8.99v7.13A1.88 1.88 0 0 0 5.88 18h12.24A1.88 1.88 0 0 0 20 16.12V7.88A1.88 1.88 0 0 0 18.12 6H5.88A1.88 1.88 0 0 0 4 7.88zm15 .843v6.287a.88.88 0 0 1-.88.88H5.88a.88.88 0 0 1-.88-.88V9.833l6.765 3.608.235.126.235-.126z",clipRule:"evenodd"})),o.createElement("path",{fill:"var(--color-icon)",d:"m19 8.7.47.882L20 9.3v-.6zm-7 3.733-.47.883.47.25.47-.25zM5 8.7H4v.6l.53.282zm-1 .31h1v-.02zm0-.02 1 .02v-.02zm16 .02-1-.02v.02zm0-.02h-1v.02zm-1 .843h1V8.167l-1.47.784zm-14 0 .47-.882L4 8.167v1.666zm6.765 3.608-.47.882zm.235.126-.47.882.47.251.47-.251zm.235-.126.471.882zM18.12 6H5.88v2h12.24zM20 7.88A1.88 1.88 0 0 0 18.12 6v2a.12.12 0 0 1-.12-.12zm0 .82v-.82h-2v.82zm-7.53 4.616 7-3.734-.94-1.764-7 3.733zM4.53 9.582l7 3.734.94-1.765-7-3.733zM4 7.88v.82h2v-.82zM5.88 6A1.88 1.88 0 0 0 4 7.88h2a.12.12 0 0 1-.12.12zM5 8.99v.02l-2-.04v.06zm-2 .02v7.11h2V9.01zm0 7.11A2.88 2.88 0 0 0 5.88 19v-2a.88.88 0 0 1-.88-.88zM5.88 19h12.24v-2H5.88zm12.24 0A2.88 2.88 0 0 0 21 16.12h-2a.88.88 0 0 1-.88.88zM21 16.12V9.01h-2v7.11zm-2-7.11v-.02l2 .04v-.06zm2-.02V7.88h-2v1.11zm0-1.11A2.88 2.88 0 0 0 18.12 5v2a.88.88 0 0 1 .88.88zM18.12 5H5.88v2h12.24zM5.88 5A2.88 2.88 0 0 0 3 7.88h2A.88.88 0 0 1 5.88 7zM3 7.88v1.11h2V7.88zm17 8.24V9.833h-2v6.287zM18.12 18A1.88 1.88 0 0 0 20 16.12h-2a.12.12 0 0 1 .12-.12zM5.88 18h12.24v-2H5.88zM4 16.12A1.88 1.88 0 0 0 5.88 18v-2a.12.12 0 0 1 .12.12zm0-6.287v6.287h2V9.833zm8.235 2.726L5.471 8.95l-.941 1.765 6.764 3.608zm.236.125-.236-.125-.94 1.765.235.125zm-.706-.125-.236.125.942 1.765.235-.126zm6.764-3.608-6.764 3.608.941 1.765 6.765-3.608z",mask:"url(#fpl-icon-24-mail-a)"}))}var tR=n(137035),tL=n(776250),tK=n(737947),tU=n(27087),tV=n(809840),tB=n(218997),tF=n(15839),tz=n(233286);function tG(){let e=(0,R.e)({overlay:W.Dqt,priority:B.N.DEFAULT_MODAL});(0,eN.E)(e.uniqueId,"commentThreadMobileAnnouncementClicked",()=>{(0,tL.sx)("sidebar_announcement_mobile_app_download_prompt_modal_shown"),e.show({})});let t=(0,o.useCallback)(async()=>{(0,tL.sx)("sidebar_announcement_mobile_app_download_prompt_email_me_cta_clicked"),await tU.Ay.post("/api/send_mobile_download_email"),e.complete()},[e]);return o.createElement(tB.h,{isShowing:e.isShowing,modalType:tF.q3.FEATURE_UPDATE,closeButtonStyle:tF.M_.ON_DARK,element:()=>o.createElement(tW,{onEmailClick:t}),trackingContextName:"mobile_comment_announcement",onClickPrimaryCta:e.complete,onClose:e.complete,onManualDismiss:e.complete})}function tW(e){return o.createElement("div",{className:"modal_comment_sidebar_announcement--container--5oh-p"},o.createElement("div",{className:"modal_comment_sidebar_announcement--imageContainer--Vuo-V"},o.createElement("img",{alt:"Background",src:"https://static.figma.com/uploads/e19f2f58bc09414847ad59ff9228e07032e8842c",className:"modal_comment_sidebar_announcement--image--lyA61"}),o.createElement("div",{className:"modal_comment_sidebar_announcement--spacer--m02YT"}),o.createElement(tz.T,null)),o.createElement("div",{className:"modal_comment_sidebar_announcement--textContainer--btaTy"},o.createElement("div",{className:"modal_comment_sidebar_announcement--title--eiyLq"},o.createElement(tV.E,{fontSize:24,fontWeight:"semi-bold"},(0,w.t)("rcs.mobile_comment_announcement.title"))),o.createElement("div",{className:"modal_comment_sidebar_announcement--description--Y8AJE"},o.createElement(tV.E,{fontSize:14},(0,w.t)("rcs.mobile_comment_announcement.description")))),o.createElement("div",{className:"modal_comment_sidebar_announcement--buttonsContainer--UTcgc"},o.createElement(tx.$n,{variant:"secondary",onClick:e.onEmailClick,iconPrefix:o.createElement(tM,null)},(0,w.t)("rcs.mobile_comment_announcement.email_download_link")),o.createElement(tx.$n,{variant:"primary",onClick:()=>{(0,tL.sx)("sidebar_announcement_mobile_app_download_prompt_learn_more_cta_clicked"),tK.Ay.unsafeRedirect("https://help.figma.com/hc/articles/1500007537281-Guide-to-the-Figma-mobile-app#download","_blank")},iconPrefix:o.createElement(tR.b,null)},(0,w.t)("rcs.rcs_shared.learn_more"))))}var tY=n(343887),tH=n(723215),tX=n(536825),tJ=n(631437),tq=n(534611),t$=n(866206),tQ=n(91408),tZ=n(529004),tj=n(860601),t0=n(153234),t1=n(572206),t8=n(355819),t2=n(46481),t3=n(259927),t7=n(356390),t5=n(848661),t4=n(457630),t6=n(94500),t9=n(945020),ne=n(498606),nt=n(233890),nn=n(83695),na=n(344780),no=n(320063),ni=n(325682),nr=n(820286),nl=n(175290),nc=n(163023),ns=n(901536),nd=n(422237),np=n(503965);let nm=(0,nd.ex)("prototype_action_info",function(){return o.createElement("div",{className:ns.cx.flex.itemsCenter.justifyCenter.$},o.createElement(nc.B,{className:"prototype_action_info_tooltip--prototypeDestinationInfoIcon--GeQWS",svg:np.A}),o.createElement("span",{className:ns.cx.flexGrow1.m6.$,style:{maxWidth:144}},(0,w.tx)("proto.prototype_panel.use_the_circular_node_to_connect_the_selected_object_to_another_frame_tooltip")))},()=>({unconstrainWidth:!0}));function nu(e){return o.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},o.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.5 6a.5.5 0 0 1 .5.5V11a1 1 0 0 0 1 1h4.5a.5.5 0 0 1 0 1H13a2 2 0 0 1-2-2V6.5a.5.5 0 0 1 .5-.5",clipRule:"evenodd"}))}var n_=n(522739),nE=n(723081),ng=n(318812),ny=n(30637),nv=n(46878),nh=n(107244),nN=n(538697),nI=n(234587),nf=n(306535);class nT extends nN.c${}class nA extends nN.l6{}function nb({action:e}){return o.createElement("div",{className:"prototype_action_dropdown--prototypeActionIcon--qChhY"},o.createElement(t2.U,{svg:(0,nv.Yb)(e)},(0,nv.av)(e)))}function nO(e){let t=`prototype-action-select-${e.recordingKey}`,n=e.dropdownShown&&e.dropdownShown.type===t,a=(0,t5.E7)(e.action),r=(0,nv.Yb)(a),l=(0,nv.av)(a),c=(0,M.GS)(),s=(0,i.d4)(nh.ZM),d=new nE.js(c,s),p=new nE.Z6(c,s),m=n?d:p,u=!(0,i.d4)(e=>e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0),_=o.useCallback(e=>e-24,[]),E=o.useCallback(e=>e+24,[]),[g,y]=o.useState(void 0),v=o.createElement(nf.Q,{setMaxWidth:y,options:nP(e),formatOption:e=>e&&e.props.value?m.format(e.props.value):"",getIcon:()=>o.createElement(nb,{action:"NAVIGATE_TO"})}),h=e2()({[e.className??""]:!0,"prototype_action_dropdown--select--b3Ssx":!c}),N=o.createElement(t2.U,{svg:r},l);return o.createElement(o.Fragment,null,o.createElement(nA,{disabled:u,id:t,dataTestId:"action-select",className:h,chevronClassName:"prototype_action_dropdown--prototypeActionChevron--ZL1Q4",inputClassName:"prototype_action_dropdown--prototypeActionInputWithSvg--Atfua",property:e.action,formatter:m,onChange:e.onChange,dispatch:e.dispatch,dropdownShown:e.dropdownShown,icon:N,iconClassName:"prototype_action_dropdown--selectActionSvg--XfhUx",recordingKey:t0.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,ny.nl)(),dropdownAlignment:_,dropdownWidth:c?g:E},nP(e)),c&&v)}function nP(e){let t=(0,nI.cJ)(),n=(0,c.kc)().sts_interaction_interop&&t,a=!n&&o.createElement(nT,{key:"NONE",value:"NONE",icon:o.createElement(nb,{action:"NONE"}),recordingKey:t0.Pt(e,"clear-option"),disabled:!1}),i=!n&&o.createElement(nT,{key:"NAVIGATE_TO",value:"NAVIGATE_TO",icon:o.createElement(nb,{action:"NAVIGATE_TO"}),recordingKey:t0.Pt(e,"navigate-to-option"),disabled:!1}),r=o.createElement(nT,{key:"SWAP_STATE_TO",value:"SWAP_STATE_TO",icon:o.createElement(nb,{action:"SWAP_STATE_TO"}),recordingKey:t0.Pt(e,"swap-state-to-option"),disabled:!l.glU.isSelectionContainedInStateOrStateInstance()}),s=o.createElement(nT,{key:"GO_BACK",value:"GO_BACK",icon:o.createElement(nb,{action:"GO_BACK"}),recordingKey:t0.Pt(e,"back-option"),disabled:!1}),d=o.createElement(nT,{key:"SCROLL_TO",value:"SCROLL_TO",icon:o.createElement(nb,{action:"SCROLL_TO"}),recordingKey:t0.Pt(e,"scroll-to-option"),disabled:!1}),p=!n&&o.createElement(nT,{key:"OPEN_URL",value:"OPEN_URL",icon:o.createElement(nb,{action:"OPEN_URL"}),recordingKey:t0.Pt(e,"url-option"),disabled:!1}),m=o.createElement(nT,{key:"OPEN_OVERLAY",value:"OPEN_OVERLAY",icon:o.createElement(nb,{action:"OPEN_OVERLAY"}),recordingKey:t0.Pt(e,"open-overlay-option"),disabled:!1}),u=o.createElement(nT,{key:"SWAP_WITH",value:"SWAP_WITH",icon:o.createElement(nb,{action:"SWAP_WITH"}),recordingKey:t0.Pt(e,"swap-with-option"),disabled:!1}),_=o.createElement(nT,{key:"CLOSE_OVERLAY",value:"CLOSE_OVERLAY",icon:o.createElement(nb,{action:"CLOSE_OVERLAY"}),recordingKey:t0.Pt(e,"close-option"),disabled:!1}),E=o.createElement(nT,{key:"SET_VARIABLE",value:"SET_VARIABLE",icon:o.createElement(nb,{action:"SET_VARIABLE"}),recordingKey:t0.Pt(e,"set-variable"),disabled:!1}),g=(0,c.kc)().prototype_set_mode_action&&o.createElement(nT,{key:"SET_VARIABLE_MODE",value:"SET_VARIABLE_MODE",icon:o.createElement(nb,{action:"SET_VARIABLE_MODE"}),recordingKey:t0.Pt(e,"set-variable-mode"),disabled:!1}),y=!e.isNestedInConditional&&o.createElement(nT,{key:"CONDITIONAL",value:"CONDITIONAL",icon:o.createElement(nb,{action:"CONDITIONAL"}),recordingKey:t0.Pt(e,"conditional"),disabled:!1}),v=!n&&o.createElement(nN.sK,{key:"first-divider"}),h=o.createElement(nN.sK,{key:"second-divider"}),N=o.createElement(nN.sK,{key:"third-divider"}),I=(0,M.GS)()?[a,v,i,r,s,d,p,h,m,u,_,N,E,g,y]:[a,v,i,r,s,h,E,g,y,d,p,N,m,u,_];if(e.showVideoActions){let t=[o.createElement(nN.sK,{key:"fourth-divider"}),o.createElement(nT,{key:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",value:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS",icon:o.createElement(nb,{action:"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS"}),recordingKey:t0.Pt(e,"update-media-play-pause-options"),disabled:!1}),o.createElement(nT,{key:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",value:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS",icon:o.createElement(nb,{action:"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS"}),recordingKey:t0.Pt(e,"update-media-mute-unmute-options"),disabled:!1}),o.createElement(nT,{key:"UPDATE_MEDIA_SKIP_TO",value:"UPDATE_MEDIA_SKIP_TO",icon:o.createElement(nb,{action:"UPDATE_MEDIA_SKIP_TO"}),recordingKey:t0.Pt(e,"update-media-skip_to"),disabled:!1}),o.createElement(nT,{key:"UPDATE_MEDIA_SKIP_BY_OPTIONS",value:"UPDATE_MEDIA_SKIP_BY_OPTIONS",icon:o.createElement(nb,{action:"UPDATE_MEDIA_SKIP_BY_OPTIONS"}),recordingKey:t0.Pt(e,"update-media-skip-by-options"),disabled:!1})];I=I.concat(t)}return I.filter(Boolean)}var nS=n(634832),nC=n(983405),nw=n(869156),nD=n(773833),nk=n(736656),nx=n(533573),nM=n(712685),nR=n(843709);let nL="prototype_action_verbose_title--actionNameInsertion--aF4kI",nK="prototype_action_verbose_title--actionName--qWJL3",nU="prototype_action_verbose_title--actionNameUI3--JAYsG",nV=()=>{let e=(0,i.d4)(e=>e.mirror.sceneGraph);return o.useMemo(()=>new nE.cP(e),[e])};function nB({action:e,isNestedInConditional:t,isNarrowPanel:n,onClick:a}){let i=(0,ni.YT)()===ni.Oz.TWO_COL,r=o.useContext(nk.c),c=i&&r===nk.P.LEFT,s=t||n,d=(0,nw.u)((0,t5.hS)(e.targetVariable)&&e.targetVariable&&"id"in e.targetVariable?e.targetVariable?.id:void 0),p=(0,t5.hS)(e.targetVariable)&&e.targetVariable&&"nodeFieldAlias"in e.targetVariable?(0,nD.aA)(e.targetVariable.nodeFieldAlias.stablePathToNode,e.targetVariable.nodeFieldAlias.indexOrKey):void 0,m=d?.name??p?.name,u=nV(),_=new nE.Z6((0,M.GS)()),E=(0,nE._X)(e),g=(0,t5.E7)(E),y=o.createElement(t2.U,{svg:(0,nv.Yb)(g)},(0,nv.av)(g)),v=e=>{if(!e.connectionType||(0,t5.gl)(e.connectionType))return null;let t=e2()({[nK]:!0,[nU]:i}),n=e2()({"prototype_action_verbose_title--actionDestination--JZ-gU":!0,"prototype_action_verbose_title--actionDestinationUI3--ZGxbq":i});switch(e.connectionType){case"NONE":case"SET_VARIABLE_MODE":return null;case"INTERNAL_NODE":case"BACK":case"CLOSE":case"UPDATE_MEDIA_RUNTIME":{let a=e.transitionNodeID;if((0,t5.gl)(a))return o.createElement("div",{className:t},(0,w.t)("proto.variant_actions.mixed"));if(void 0===a)return null;let i=tq.dI(a),r=u.format(i);return o.createElement("div",{className:n},r)}case"URL":{let a=e.connectionURL;if(!a)return null;if((0,t5.gl)(a))return o.createElement("div",{className:t},(0,w.t)("proto.variant_actions.mixed"));return o.createElement("div",{className:n},a)}case"SET_VARIABLE":if(!e.targetVariableData||(0,t5.gl)(e.targetVariableData))return null;return o.createElement("div",{className:"prototype_action_verbose_title--setVariablePreviewContainer--6omxy"},o.createElement(nn.y3,{targetVariableData:e.targetVariableData,onClick:tj.lQ,showVariableThumbnails:!1,isNarrowPanel:s,isInConditional:!0}));case"CONDITIONAL":{if((0,t5.gl)(e)||(0,t5.gl)(e.conditionalActions)||!e.conditionalActions)return null;let t=e.conditionalActions.length>0?e.conditionalActions[0].condition:void 0;return o.createElement(nn.y3,{targetVariableData:t,onClick:tj.lQ,isInConditional:!0,showVariableThumbnails:!1})}default:(0,nS.assertNever)(e.connectionType)}},h=e2()({[nR.Li]:s&&!i,[nR.O8]:!s&&!i,[nR.kE]:i}),N=e2()({"prototype_action_verbose_title--iconContainer--jqarD":!0,"prototype_action_verbose_title--iconContainerUI3--yBP0-":i});return o.createElement("div",{className:h,onClick:a,role:"button",tabIndex:0},o.createElement(nC.Y1,{horizontalAlignItems:"space-between",width:"fill-parent"},o.createElement("div",{className:N},y),(e=>{let t=g?_.format(g):"Undefined",n=e2()({[nK]:!0,[nU]:i});if((0,t5.gl)(e.connectionType)&&(t=(0,w.t)("fullscreen.mixed")),!e.connectionType||(0,t5.gl)(e.connectionType)||"NONE"===e.connectionType||"BACK"===e.connectionType||"CLOSE"===e.connectionType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t));var a=v(e);switch(e.connectionType){case"INTERNAL_NODE":if("SWAP_STATE"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,w.t)("proto.action_change_to")),a);if(a){if("OVERLAY"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:nL},(0,w.tx)("proto.action_overlay_title",{overlayFrameName:o.createElement("span",null,a)})));if("SWAP"===e.navigationType)return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,w.t)("proto.action_swap_overlay_title")),a)}return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t),a);case"UPDATE_MEDIA_RUNTIME":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t),a);case"URL":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},a?(0,w.t)("proto.action_url_title"):(0,w.t)("proto.action_open_link")),a);case"SET_VARIABLE":{let r=e.targetVariableData&&(0,t5.hS)(e.targetVariableData)&&e.targetVariableData.resolvedType===l.rXF.COLOR,s=e2()({"prototype_action_verbose_title--actionNameInsertionColor--isir- prototype_action_verbose_title--actionNameInsertion--aF4kI":!0,"prototype_action_verbose_title--actionNameInsertionColorUI3--Apj0i":i});if(m&&a)return o.createElement(o.Fragment,null,o.createElement("div",{className:r?s:nL},(0,w.tx)("proto.action_set_variable_title",{variableName:o.createElement("span",{className:"prototype_action_verbose_title--variableNameContainer--XeJX2"},o.createElement(nM.w,{text:m,isDeleted:!!d&&(0,nx.eF)(d),disableHover:c})),variableValue:o.createElement("span",{className:"prototype_action_verbose_title--variableDestinationContainer--RXbKo prototype_action_verbose_title--variableNameContainer--XeJX2"},a)})));return o.createElement(o.Fragment,null,o.createElement("div",{className:n},t))}case"SET_VARIABLE_MODE":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},(0,w.t)("proto.action_set_variable_mode")));case"CONDITIONAL":return o.createElement(o.Fragment,null,o.createElement("div",{className:n},i?(0,w.t)("proto.if"):(0,w.t)("proto.action_conditional_title")),a);default:(0,nS.assertNever)(e.connectionType)}})(e)))}var nF=n(566418),nz=n(215122),nG=n(789529),nW=n.n(nG),nY=n(636149),nH=n.n(nY),nX=n(675551),nJ=n.n(nX),nq=n(184058),n$=n.n(nq),nQ=n(776621),nZ=n(154483),nj=n(994481),n0=n(564092),n1=n(896850);let n8="prototype_set_variable_mode_controls--dropdownRow--vl5z4",n2="missing";class n3 extends nN.l6{}class n7 extends nN.c${}class n5 extends nN.l6{}class n4 extends nN.c${}let n6={},n9=(0,nZ.fv)();function ae(){let e=(0,nw.h6)()||n6,t=(0,n0.iR)(),n=o.useMemo(()=>{let n=nJ()(t,(e,t)=>({collectionID:e.node_id,collectionName:e.name,key:e.key,modeOptions:e.modes?.map(t=>({modeId:{guid:t.id,collectionKey:e.key},name:t.name,isCompatible:!0}))||[],explicitMode:null,inheritMode:null,fileKey:n9(e)}));return nW()({},e,n)},[t,e]),a=o.useMemo(()=>Object.entries(n).map(([e,t])=>({setKey:e,modeData:t,isLocal:void 0===t.fileKey})),[n]),r=o.useMemo(()=>Object.values(a).filter(e=>e.modeData?.modeOptions&&e.modeData?.modeOptions.length>1),[a]),c=o.useMemo(()=>n$()(r.map(e=>e.modeData.fileKey??n1.BH)),[r]),s=(0,nw.el)(c),[d,p]=o.useMemo(()=>{let{_local:e,_unknownFile:t,...n}=nH()(r,e=>e.isLocal?"_local":e.modeData.fileKey&&void 0===s[e.modeData.fileKey]?"_unknownFile":e.modeData.fileKey),a=Object.entries(n).sort(([e],[t])=>e.localeCompare(t)).map(([e,t])=>[{fileKey:e,fileName:s[e]},...t]).flat(1);return t&&(a.push({fileKey:n1.BH,fileName:(0,w.t)("variables.mode_properties_panel.used_variables.subheading")}),a.push(...t)),[e??[],a]},[s,r]),m=(0,n0.d2)(),u=o.useCallback(e=>{let t=m[(0,nz.yG)(e)],n=r.find(t=>t.setKey===e);if(n)return(e=>{if(e)return void 0===t&&(t=e.modeData.modeOptions[0].modeId.guid),e.modeData.modeOptions.find(e=>e.modeId.guid!==t&&(t=e.modeId.guid,!0))?.modeId.guid})(n)},[m,r]),_=r.length>0?r[0]:void 0,E=_?.setKey,g=_?.modeData.collectionID,y=o.useMemo(()=>E&&u(E),[E,u]),v=(0,i.wA)();return{localVariableSets:d,allVariableSets:r,firstVariableSet:_,firstVariableSetID:g,firstVariableSetMode:y,getDefaultNewModeForVariableCollectionKey:u,reportAnalyticsEventWhenSelected:e=>{let t=l.mSn.getVariableSetInfoForSetModeAnalytics(e);v((0,t6.Zh)({name:"prototype.set_mode_select_variable_set",params:{...t}}))},subscribedVariableSetsWithSections:p}}function at({targetVariableSetID:e,targetVariableModeID:t,deprecatedTargetVariableSetKey:n,updateSelectionProperties:a,recordingKey:i,actionIndexPath:r}){let{getDefaultNewModeForVariableCollectionKey:l,allVariableSets:c,reportAnalyticsEventWhenSelected:s}=ae(),{shouldShowAdvancedPrototypingPaywall:d,showAdvancedPrototypingVariablesModal:p}=(0,ni.zt)(),m=(0,M.GS)();o.useEffect(()=>{if(!n||(0,t5.gl)(n))return;let e=c.find(e=>e.setKey===n);e?((0,nQ.Lo)("SetVariableModeControls","updating variable set key to non-deprecated id value"),a({targetVariableSetKey:void 0,targetVariableSetID:e?.modeData.collectionID})):((0,nQ.Lo)("SetVariableModeControls","attempted to update variable set key to non-deprecated id value, but could not find it in the list of variable sets, will just clear out the bad data."),a({targetVariableSetKey:void 0}))},[n,c,a]);let[u,_]=o.useMemo(()=>{let t=(0,t5.gl)(e)||void 0===e?e:function(e,t){let n=e.find(e=>e.modeData.collectionID===t);if(n)return n;let a=nF.gr.toRefIfSubscribed(t);if(a)return e.find(e=>e.setKey===a.key)}(c,e)||n2,n=(()=>{if(!(0,t5.gl)(t)&&void 0!==t&&t!==n2)return t})();return[t,n]},[e,c]),E=o.createElement(ao,{selectedVariableSet:u,onChange:e=>{d?p():(s(e.modeData.collectionID),a({targetVariableSetID:e.modeData.collectionID,targetVariableModeID:l(e.setKey)}))},actionIndexPath:r}),g=m?o.createElement(nj.cS,{input:E,label:(0,w.tx)("proto.set_variable_mode.collection_label")}):o.createElement(e5.fI,{recordingKey:t0.Pt(i,"selectTargetVariableSet")},E),y=o.createElement(al,{selectedVariableSetKey:_&&_.setKey,selectedVariableModeID:t,onChange:e=>{d?p():a({targetVariableModeID:e})},actionIndexPath:r}),v=m?o.createElement(nj.cS,{input:y,label:(0,w.tx)("proto.set_variable_mode.mode_label")}):o.createElement(e5.fI,{recordingKey:t0.Pt(i,"selectTargetVariableMode")},y);return o.createElement("div",{className:m?void 0:ns.cx.relative.$},g,_&&v)}let an={format:e=>void 0===e?(0,w.t)("proto.prototype_panel.edit_set_mode.none"):e===n2?(0,w.t)("proto.prototype_panel.edit_set_mode.missing_collection"):e.modeData.collectionName,isEqual:(e,t)=>void 0!==e&&void 0!==t&&e!==n2&&t!==n2&&(e.setKey===t.setKey||e.modeData.collectionID===t.modeData.collectionID)};function aa(e,t){return"fileKey"in e?[t&&o.createElement(nN.sK,{key:e.fileKey+"divider"}),o.createElement(n7,{isHeader:!0,key:e.fileKey+"header",formattedValue:e.fileName})]:o.createElement(n7,{key:e.setKey,value:e})}function ao({selectedVariableSet:e,onChange:t,actionIndexPath:n}){let a=(0,i.wA)(),r=(0,ng.Um)(),l="set-variable-mode--select-variable-set-"+n,{localVariableSets:s,allVariableSets:d,subscribedVariableSetsWithSections:p}=ae();return o.createElement(n3,{id:l,className:n8,property:e,formatter:an,dispatch:a,dropdownShown:r?.type===l?r:null,onChange:e=>{(0,t5.gl)(e)||void 0===e||e===n2||t(e)}},d.length>0?[s.length>0&&o.createElement(n7,{key:t0.Pt(l,"local_variables"),isHeader:!0,formattedValue:(0,c.kc)().ds_variable_props_unified_ui?(0,w.t)("variables.mode_properties_panel.assets_created_in_file.subheading"):(0,w.t)("variables.mode_properties_panel.local_variables.subheading")}),...s.map(e=>aa(e,!1)),...p.map((e,t)=>aa(e,s.length>0||t>0))]:[])}let ai={format:e=>void 0===e?(0,w.t)("proto.prototype_panel.edit_set_mode.none"):e===n2?(0,w.t)("proto.prototype_panel.edit_set_mode.missing_mode"):e?.name??""};function ar(e){return o.createElement(n4,{key:e.modeId.guid,value:e})}function al({selectedVariableSetKey:e,selectedVariableModeID:t,onChange:n,actionIndexPath:a}){let r=(0,i.wA)(),l=(0,ng.Um)(),c="set-variable-mode--select-variable-mode-"+a,{allVariableSets:s}=ae(),d=o.useMemo(()=>s.find(t=>t.setKey===e)?.modeData.modeOptions,[e,s]),p=o.useMemo(()=>(0,t5.gl)(t)||void 0===t?t:d?.find(e=>e.modeId.guid===t)||n2,[t,d]);return o.createElement(n5,{id:c,className:n8,property:p,formatter:ai,dispatch:r,dropdownShown:l?.type===c?l:null,onChange:e=>{!e||(0,t5.gl)(e)||e===n2||n(e.modeId.guid)}},d&&d?.map(ar))}var ac=n(939791),as=n(794272),ad=n(113468),ap=n(32067),am=n(109388),au=n(140686),a_=n(256296),aE=n(775664),ag=n(279702),ay=n(420186),av=n(218973),ah=n(750029),aN=n(270668),aI=n(205135),af=n(276660),aT=n(837746),aA=n(910392),ab=n(909666),aO=n(442458);let aP=aE.TI;function aS({children:e}){return(0,M.GS)()?o.createElement(nj.TN,null,e):o.createElement(e5.fI,{className:"overlay_panel--fplCheckboxRow--EYTAZ checkbox--_checkboxRow--oEhow"},e)}function aC({interactionType:e,recordingKey:t,actionIndexPath:n,nodeId:a}){let[r,c]=o.useState(!1),[s,d]=o.useState(new t1.Mi),p=(0,i.wA)(),m=(0,M.GS)(),u="{ "+n.join(", ")+" }",{destinationOverlayBackgroundColor:_,destinationOverlayBackgroundType:E,destinationOverlayPositionType:g,destinationOverlayBackgroundInteraction:y}=(0,as.R)(e=>({destinationOverlayBackgroundColor:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[u]?.destinationOverlayBackgroundColor,destinationOverlayBackgroundType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[u]?.destinationOverlayBackgroundType,destinationOverlayPositionType:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[u]?.destinationOverlayPositionType,destinationOverlayBackgroundInteraction:e.mirror.selectionProperties.actionIndexPathToOverlaySettings?.[u]?.destinationOverlayBackgroundInteraction})),v=o.useRef(),h=o.useRef(),N=o.useCallback(()=>{c(!1)},[c]),I=o.useCallback(()=>{if(r)N();else{c(!0);let e=m?am.findDOMNode(h.current):am.findDOMNode(v.current);d((0,ay.cn)(e))}},[r,N,m]),f=o.useCallback(e=>{let t=e?"SOLID_COLOR":"NONE";e1.l7.user("overlay-background-type-edit-scope",()=>{l.X3B.setOverlayBackgroundType(tq.dI(a),t)}),p((0,t6._P)({name:"Overlay background visible changed",params:{backgroundType:t}}))},[p,a]),T=o.useCallback(e=>{let t=e?"CLOSE_ON_CLICK_OUTSIDE":"NONE";e1.l7.user("overlay-background-interaction-edit-scope",()=>{l.X3B.setOverlayBackgroundInteraction(tq.dI(a),t)}),p((0,t6._P)({name:"Overlay background interaction changed",params:{backgroundInteraction:t}}))},[p,a]),A=o.useCallback(()=>(0,t5._W)(_,{r:0,g:0,b:0,a:.25}),[_]),b=o.useCallback((e,t)=>{t!==ag.zk.NO&&e1.l7.user("overlay-background-color-edit-scope",()=>{l.X3B.setOverlayBackgroundColor(tq.dI(a),e)})},[a]),O=o.useCallback((e,t)=>{b(e,ag.zk.YES)},[b]),P=o.useCallback((e,t)=>{let n=A();b({r:n.r,g:n.g,b:n.b,a:e},t)},[A,b]),S=o.useCallback(e=>{e1.l7.user("overlay-position-type-edit-scope",()=>{l.X3B.setOverlayPositionType(tq.dI(a),e)}),p((0,t6._P)({name:"Overlay position changed",params:{position:e}}))},[p,a]),C=A(),D=A().a,k=(0,t5.E7)(g),x="CLOSE_ON_CLICK_OUTSIDE"===(0,t5.E7)(y),R="SOLID_COLOR"===(0,t5.E7)(E),L=o.createElement("div",{className:"overlay_panel--colorValueContainer--gJtb9 paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},o.createElement(ah.J,{onClick:R?I:()=>{},color:C,opacity:D,recordingKey:t0.Pt(t,"chit"),className:"overlay_panel--chit--Zn66r paint_panels--chit--twQEy"}),o.createElement(aI.AN,{className:m?"overlay_panel--colorInputUI3--ozOrK paint_panels--colorInput--nSz13":"overlay_panel--colorInput--6yyym paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:aP,property:C,disabled:!R,onChange:O,recordingKey:t0.Pt(t,"colorInput"),noBorderOnFocus:!0}),o.createElement(av.Pd,{className:"overlay_panel--opacity--vrrjV paint_panels--opacityInputContainer--oqlsk",value:D,onValueChange:P,dispatch:p,disabled:!R,noBorderOnFocus:!0,recordingKey:t0.Pt(t,"opacity")}));return o.createElement(e5.Zk,{className:m?"overlay_panel--overlayPanelUI3--GLqgD":"overlay_panel--overlayPanel--l-Hts"},!m&&o.createElement(e5.fI,null,o.createElement(e5.xw,{faded:!0,className:"overlay_panel--overlayPanelTitle--e9pjs"},(0,w.tx)("proto.overlay_settings"))),o.createElement(aL,{overlayPositionType:k,onOverlayPositionTypeChange:S,recordingKey:t}),!("ON_HOVER"===e||"ON_PRESS"===e)&&o.createElement(aS,null,o.createElement(au.S,{label:o.createElement(a_.J,null,(0,w.tx)("proto.close_when_clicking_outside")),recordingKey:t0.Pt(t,"closeOnClickOutside"),onChange:T,checked:x})),o.createElement(aS,null,o.createElement(au.S,{label:o.createElement(a_.J,null,m?(0,w.tx)("proto.overlay_panel.background"):(0,w.tx)("proto.add_background")),recordingKey:t0.Pt(t,"addBackgroundBehindOverlay"),onChange:f,checked:R})),R&&(m?o.createElement(nj.cS,{ref:h,label:(0,w.tx)("proto.overlay_panel.background"),input:L}):o.createElement(e5.fI,{ref:v}," ",L," ")),r&&o.createElement(aN.h3,{disabledVariableIds:new Set,initialPosition:s,color:C,boundVariable:null,onChange:b,onClose:N,recordingKey:t0.Pt(t,"colorPicker")}))}class aw extends nN.l6{}class aD extends nN.c${}class ak extends o.PureComponent{constructor(){super(...arguments),this.titleFormatter=new nE.Cr,this.renderOverlayPositionOption=(e,t)=>o.createElement(aD,{key:t,value:e,recordingKey:t0.Pt(this.props,e)})}render(){let e=["CENTER","TOP_LEFT","TOP_CENTER","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_CENTER","BOTTOM_RIGHT"].map(this.renderOverlayPositionOption);return o.createElement(aw,{id:this.props.recordingKey??"overlay-position_select",className:this.props.className,chevronClassName:"overlay_panel--chevron--7RTA-",inputClassName:"overlay_panel--input--tGHHB",dropdownWidth:aT.DxS,property:this.props.property,formatter:this.titleFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:t0.Pt(this.props,"select")},e,o.createElement(nN.sK,null),this.renderOverlayPositionOption("MANUAL",10))}}ak.displayName="OverlayPositionDropdown";class ax extends af.I{}class aM extends af.Y{}class aR extends o.PureComponent{render(){return o.createElement(ax,{className:this.props.className,property:this.props.property,onChange:this.props.onChange,recordingKey:this.props.recordingKey},o.createElement(aM,{value:"CENTER",tooltip:(0,w.t)("proto.tooltip_overlay_position_center"),svg:ab.A,recordingKey:t0.Pt(this.props,"center")}),o.createElement(aM,{value:"TOP_LEFT",tooltip:(0,w.t)("proto.tooltip_overlay_position_top_left"),svg:aO.A,recordingKey:t0.Pt(this.props,"top-left")}),o.createElement(aM,{value:"BOTTOM_CENTER",tooltip:(0,w.t)("proto.tooltip_overlay_position_bottom_center"),svg:aA.A,recordingKey:t0.Pt(this.props,"bottom-center")}))}}function aL({overlayPositionType:e,onOverlayPositionTypeChange:t,recordingKey:n}){let a=(0,M.GS)(),r=(0,i.wA)(),l=(0,ng.Um)(),c=o.createElement(ak,{className:"overlay_panel--overlayPositionDropdown--ZxxSI",property:e,dispatch:r,dropdownShown:l,onChange:t,recordingKey:t0.Pt(n,"overlayPositionDropdown")}),s=o.createElement(aR,{property:e,onChange:t,recordingKey:t0.Pt(n,"overlayPositionControl"),className:"overlay_panel--overlayPositionControl--SWngJ"});return a?o.createElement(nj.cS,{label:(0,w.tx)("proto.overlay_panel.position"),input:c}):o.createElement(e5.fI,null,c,s)}var aK=n(171447),aU=n(75395),aV=n(301036),aB=n(927457),aF=n(615777),az=n(636540),aG=n(757696),aW=n(112976),aY=n(728587),aH=n(501191);let aX=e=>`interaction-panel-create-action-${e}`;function aJ(e){let t=aX(e.recordingKey);var{showing:n,toggle:a,hide:r}=(0,ng.BK)(t);let l=(0,o.useRef)(null),{recordingKey:c,addButtonPressed:s,presetInteractions:d}=e,{shouldShowAdvancedPrototypingPaywall:p,showAdvancedPrototypinglMultipleActionsModal:m}=(0,ni.zt)(),u=(0,o.useCallback)(()=>{!e.skipPaywall&&p?m():a()},[e.skipPaywall,p,m,a]),_=t0.rf(t0.Pt(c,"createActionDropdown"),"click",u),E=(0,ni.YT)()===ni.Oz.TWO_COL,g=(0,ni.SJ)(),y=(0,M.GS)(),v=(0,nI.cJ)(),h=(0,ni.He)({showVideoActions:g,isNestedInConditional:e.isNestedInConditional,isSites:v,isUI3:y,showPresetActions:!!e.presetInteractions}),N=(0,i.wA)(),I=(0,o.useCallback)(e=>{s((0,ni.Bs)(e)),r()},[s,r]),f=e2()({[nR.x1]:e.renderButton,[nR.xm]:!e.renderButton&&!E,[nR.U3]:!e.renderButton&&E}),T=[];return h.forEach(t=>{if((0,ni.vc)(t))T.push(aW.w);else if(t===ni.Xk&&d?.length)T.push(...d,aW.w);else if((0,ni.Rn)(t)){let n=(0,ni.lA)(t),a=(0,ni.He)({showVideoActions:g,isNestedInConditional:e.isNestedInConditional,defaultActionTypes:n,isSites:v,isUI3:y}).map(e=>aq({clickCb:I,recordingKey:c,actionType:e,isUI3:y}));T.push({displayText:(0,ni.wt)(t),icon:function(e){switch(e){case ni.Jx.OVERLAY:return o.createElement(aF.x,null);case ni.Jx.LOGIC:return o.createElement(az.$,null);case ni.Jx.VIDEO:return o.createElement(aG.k,null);default:(0,nS.assertNever)(e)}}(t),children:a,className:nR.BP})}else T.push(aq({clickCb:I,recordingKey:c,actionType:t,isUI3:y}))}),o.createElement(o.Fragment,null,o.createElement("button",{ref:l,className:f,onClick:_,"aria-label":(0,w.t)("proto.prototype_panel.create_action_button"),"data-tooltip-type":ne.Ib.TEXT,"data-tooltip":e.isNestedInConditional?(0,w.t)("proto.prototype_panel.add_nested_action"):(0,w.t)("proto.prototype_panel.add")},e.renderButton?o.createElement(t2.U,{svg:aH.A},o.createElement(aB.e,null)):(0,w.tx)("fullscreen.properties_panel.click_plus_to_add_new_action")),n&&l.current&&o.createElement(aY.j,{minWidth:130,lean:"center",parentRect:l.current.getBoundingClientRect(),hidePointWhenContentOffScreen:!0,showPoint:!0,items:T,dispatch:N,onSelectItem:e=>e.callback?.(),recordingKey:"actionDropdown"}))}function aq({actionType:e,clickCb:t,recordingKey:n,isUI3:a}){let i=(0,nv.Yb)(e),r=(0,nv.av)(e),l=new nE.Z6(a),c=e?l.format(e):"Undefined";return{className:nR.BP,callback:()=>t(e),icon:o.createElement(t2.U,{className:nR.QE,svg:i},r),displayText:c,recordingKey:t0.Pt(n,"createActionOption",e)}}let a$="prototype_conditional_controls--conditionalRowUI3--rQlu6",aQ="prototype_conditional_controls--conditionIcon--Npk57";var aZ=n(381809),aj=n(527967),a0=n(5068);function a1({onDeleteAction:e,updateMultipleDestinationNodes:t,updateSelectionProperties:n,updateCondition:a,updateActions:i,onAddAction:r,autoOpenVariablePicker:c,isSelected:s,handleMouseDownUI3:d,...p}){let m=p.conditionalActions,u=m?.actions?m?.actions:[],_=m?.condition?m?.condition:void 0,E=(0,ni.YT)()===ni.Oz.TWO_COL,g=E?a$:"prototype_conditional_controls--conditionalRowIf--25FqB prototype_conditional_controls--conditionalRow--u0PaS",y=o.createElement(nn.KN,{resolvedType:l.rXF.BOOLEAN,targetVariableData:_,updateSelectionProperties:n,recordingKey:p.recordingKey,updateConditionInConditionalAction:a,showVariableThumbnails:!0,isNarrowPanel:!0}),v=o.createElement("div",{className:"prototype_conditional_controls--addButton--vlYLn"},o.createElement(aJ,{addButtonPressed:r,recordingKey:t0.Pt(p.recordingKey,"addActionToIfButton"),renderButton:!0,isNestedInConditional:!0})),h=o.createElement(o.Fragment,null,E?o.createElement("span",{className:"prototype_conditional_controls--conditionIconUI3--zcwx0"},(0,w.tx)("proto.else")):o.createElement(nc.B,{className:aQ,svg:aZ.A}),!E&&u.length>0&&o.createElement("div",{className:"prototype_conditional_controls--addButtonForElse--ogBWu prototype_conditional_controls--addButton--vlYLn"},o.createElement(aJ,{addButtonPressed:r,recordingKey:t0.Pt(p.recordingKey,"addActionToElseButton"),renderButton:!E,isNestedInConditional:!0}))),N=E?o.createElement(aU.E,{className:"prototype_conditional_controls--elseBlockRowUI3--VXjmO",onClick:d},h):o.createElement(e5.fI,{className:E?a$:"prototype_conditional_controls--conditionalRow--u0PaS"},h);return o.createElement(o.Fragment,null,p.ifStatement&&o.createElement("div",{className:g},!E&&o.createElement(nl.Y,{direction:"horizontal",spacing:4},o.createElement("span",{className:E?"prototype_conditional_controls--conditionalRowConditionUI3--M2mOx":"prototype_conditional_controls--conditionalRowCondition--kn-f7"},o.createElement(nl.Y,{direction:"horizontal",spacing:0},o.createElement(nc.B,{className:aQ,svg:aj.A}),o.createElement(nl.Y,{direction:"horizontal",spacing:0},(0,t5.hS)(_)&&y),o.createElement(nc.B,{className:"prototype_conditional_controls--icon--JV1i0",svg:a0.default}))),!E&&u.length>0&&v)),!p.ifStatement&&N,u&&u.map((a,i)=>o.createElement(oJ,{key:i,updateMultipleDestinationNodes:t.appendActionIndex(i),action:a,recordingKey:t0.Pt(p.recordingKey,"conditional-action-row",i),updateSelectionProperties:n.appendActionIndex(i),onDeleteAction:()=>e(i),interactionType:p.interactionType,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],i],numActions:u.length,isNestedInConditional:!0,stateManagementVersion:p.stateManagementVersion,selectedInteractions:p.selectedInteractions,onDrop:p.onDrop,onSelect:p.onSelect,onExpand:p.onExpand,onAddAction:r,selectedActionIndex:p.selectedActionIndex,expandedRows:p.expandedRows,autoOpenVariablePicker:c})),0===u.length&&o.createElement(oJ,{key:0,updateMultipleDestinationNodes:t.appendActionIndex(0),action:p.emptyAction,recordingKey:t0.Pt(p.recordingKey,"conditional-action-row",0),updateSelectionProperties:n.appendActionIndex(0),onDeleteAction:()=>e(0),interactionType:p.interactionType,actionIndexPath:[p.actionIndexPath[0],p.actionIndexPath[1],0],numActions:u.length,isNestedInConditional:!0,stateManagementVersion:p.stateManagementVersion,selectedInteractions:p.selectedInteractions,onDrop:p.onDrop,onSelect:p.onSelect,onExpand:p.onExpand,onAddAction:r,selectedActionIndex:p.selectedActionIndex,expandedRows:p.expandedRows,autoOpenVariablePicker:c}))}function a8(e,t,n){return function(a){var o=[...t];o.length>e?o[e].condition=a:o.push({condition:0===e?a:void 0,actions:[]},{condition:1===e?a:void 0,actions:[]}),n({conditionalActions:o})}}function a2({onDrop:e,onSelect:t,onExpand:n,action:a,updateMultipleDestinationNodes:r,updateSelectionProperties:l,interactionType:c,recordingKey:s,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:m,selectedActionIndex:u,expandedRows:_,autoOpenVariablePicker:E,onNewActionAdded:g,handleMouseDownUI3:y}){let h=(0,i.wA)(),N=(0,v.p8)("currentPage"),I=(0,ni.YT)()===ni.Oz.TWO_COL,f=I?u.equals(m):void 0,{shouldShowAdvancedPrototypingPaywall:T,showAdvancedPrototypingConditionalActionsModal:A}=(0,ni.zt)(),b=(0,t5.hS)(a.conditionalActions)&&a.conditionalActions?a.conditionalActions:[],O=e=>function(t){var n=[...b];n.length>e?n[e].actions=[...t]:n.push({actions:t}),l({conditionalActions:n})},P=e=>function(t){var n=[...b],a=0;if(n.length>e){var o=n[e].actions;o?o.push(t):o=[t],a=o.length}else n.push({actions:0===e?[t]:[]},{actions:1===e?[t]:[]}),a=1;"SET_VARIABLE"===t.connectionType&&(E.current=!0),l({conditionalActions:n}),g&&g(new aV.Op([m[0],e,a-1])),h((0,t6._P)({name:"Prototype add action",params:{action:t.connectionType?t.connectionType:"NONE",source:"panel",page_id:N,actionInConditionalAction:!0}}))},S=e=>function(t){if(T)A();else{var n=[...b];let a=b[e],o=[];if(a&&a.actions)for(let e=0;e<a.actions.length;e++){let n=a.actions[e];e!==t?o.push(n):h((0,t6._P)({name:"Prototype delete action",params:{action:n.connectionType?n.connectionType:"NONE",source:"panel",page_id:N,actionInConditionalAction:!0}}))}n[e].actions=o,l({conditionalActions:n})}},C=b.length>0?b[0]:void 0,D=b.length>1?b[1]:void 0;return o.createElement("div",{style:I?{position:"relative"}:void 0},(0,t5.gl)(a.conditionalActions)&&o.createElement(nC.Y1,null,o.createElement(aU.E,{className:"prototype_conditional_controls--mixedConditionalText--6O32b",onClick:()=>{var e=[];e.push({},{}),l({conditionalActions:e})}},(0,w.t)("fullscreen.properties_panel.click_to_replace_mixed_content"))),(0,t5.hS)(a.conditionalActions)&&o.createElement(o.Fragment,null,o.createElement(a1,{key:0,conditionalActions:C,recordingKey:t0.Pt(s,"conditional-block",0),updateCondition:a8(0,b,l),updateActions:O(0),onAddAction:P(0),updateMultipleDestinationNodes:r.appendActionIndex(0),onDeleteAction:S(0),interactionType:c,updateSelectionProperties:l.appendActionIndex(0),ifStatement:!0,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:[m[0],0],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:u,autoOpenVariablePicker:E,expandedRows:_,emptyAction:{ifStatement:!0,action:a},isSelected:f,handleMouseDownUI3:y}),o.createElement(a1,{key:1,conditionalActions:D,recordingKey:t0.Pt(s,"conditional-block",1),updateCondition:a8(1,b,l),updateActions:O(1),onAddAction:P(1),updateMultipleDestinationNodes:r.appendActionIndex(1),onDeleteAction:S(1),interactionType:c,updateSelectionProperties:l.appendActionIndex(1),ifStatement:!1,stateManagementVersion:d,selectedInteractions:p,actionIndexPath:[m[0],1],onDrop:e,onSelect:t,onExpand:n,selectedActionIndex:u,autoOpenVariablePicker:E,expandedRows:_,emptyAction:{ifStatement:!1,action:a},isSelected:f,handleMouseDownUI3:y})))}function a3({updateSelectionProperties:e,conditionalActions:t,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:a,...i}){let r=t.length>0?t[0]:void 0,c=r?.condition?r?.condition:void 0,s=e2()({"prototype_conditional_controls--standaloneIfConditional--GLFDU":!0,"prototype_conditional_controls--placeholderText--esG0u":!c});return o.createElement(o.Fragment,null,o.createElement(nj.cS,{input:null,label:(0,w.tx)("proto.condition")}),o.createElement(ac.Ad,{appendedClassName:"prototype_conditional_controls--conditionalActionRightPadding--xpK6Z",label:null,input:(0,t5.hS)(c)?o.createElement("div",{className:s},o.createElement(nn.KN,{resolvedType:l.rXF.BOOLEAN,targetVariableData:c,updateSelectionProperties:e.appendActionIndex(0),recordingKey:i.recordingKey,updateConditionInConditionalAction:a8(0,t,e),autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:a,showVariableThumbnails:!0,isNarrowPanel:!0})):null}))}var a7=n(612028),a5=n(234945),a4=n(510879),a6=n(830002),a9=n(731262);class oe extends nN.c${}class ot extends nN.l6{}class on extends o.PureComponent{constructor(e){super(e),this.loadDestinationsFromFullscreen=()=>{let e=l.baT.ALL;"SCROLL_TO"===this.props.action?e=l.baT.SCROLL_TO:"SWAP_STATE_TO"===this.props.action&&(e=l.baT.STATES);let{viableIds:t,disabledIds:n}=l.X3B.getTransitionDestinationsOnActiveCanvas(e);return new Promise((e,a)=>{this.setState({viableIds:t,disabledIds:n},e)})},this.onOptionFocus=e=>{g.Uc(e??"")},this.renderGroupedScrollableNodes=(e,t)=>{let n=nH()(e.filter(e=>this.nodeNameFormatter.hasNameForNode(e)),e=>e===t&&(0,t5.hS)(t)?a7.Ql(this.props.scene,e)?.guid:this.props.scene.get(e)?.parentGuid),a=Object.keys(n);(0,a7.X4)(a,this.nodeNameFormatter.format.bind(this.nodeNameFormatter));let{tlfId:i,index:r}=(0,a7.H_)(this.props.scene,a);return i&&r&&(a.splice(r,1),a=[i,...a]),a.reduce((e,t,a)=>(0!==a&&e.push(o.createElement(nN.sK,{key:a})),e.push(o.createElement(oe,{key:`disabled-${t}`,value:t+" ",recordingKey:t0.Pt(this.props,`disabled-option-${t}`),disabled:!0})),n[t].forEach((t,n)=>{e.push(o.createElement(oe,{key:`enabled-${t+n}`,value:t,recordingKey:t0.Pt(this.props,`viable-option-${n}`),disabled:!1}))}),e),[])},this.state={viableIds:[],disabledIds:[]},this.nodeNameFormatter=new nE.cP(e.scene)}render(){let e=this.props.nodeId===t5.oV?t5.oV:tq.dI(this.props.nodeId),t=this.state.viableIds;(0,t5.hS)(e)&&e!==tq.AD&&-1===t.indexOf(e)&&(t=t.concat([e]));let n=this.state.disabledIds,a=`prototype-destination-select-${this.props.recordingKey}`,i="SCROLL_TO"!==this.props.action?t.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>o.createElement(oe,{key:`enabled-${e}`,value:e,recordingKey:t0.Pt(this.props,`viable-option-${t}`),disabled:!1})):this.renderGroupedScrollableNodes(t,e),r=n.filter(e=>this.nodeNameFormatter.hasNameForNode(e)).map((e,t)=>o.createElement(oe,{key:`disabled-${e}`,value:e,recordingKey:t0.Pt(this.props,`disabled-option-${t}`),disabled:!0})),l=this.props.isUI3?o.Fragment:e5.fI;return o.createElement(l,null,o.createElement(ot,{id:a,dataTestId:"destination-select",className:this.props.className,chevronClassName:"prototype_destination_dropdown--chevron--pmWtI",inputClassName:"prototype_destination_dropdown--input--rzglN",dropdownWidth:aT.DxS,property:e,formatter:this.nodeNameFormatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,recordingKey:t0.Pt(this.props,"select"),willShowDropdown:this.loadDestinationsFromFullscreen,onOptionFocus:this.onOptionFocus,hideDropdownWhenContainerMoves:!(0,ny.nl)()},i,0!==n.length&&0!==t.length&&o.createElement(nN.sK,null),r))}}let oa=o.memo(function(e){let t=(0,K.tS)(),n=(0,K._G)(),a=(0,i.d4)(oo),r=(0,i.d4)(a5.qd),c=(0,i.d4)(a5.dK),s=(0,a4.D)(r,c),d=(0,i.d4)(oi),p=o.useMemo(()=>(0,a9.cP)(d,t,n,e.actionIndexPath),[d,t,n,e.actionIndexPath]),m=o.useMemo(()=>(0,a9.cP)(a,t,n),[a,t,n]),u=p||m;if(!u||u.mode!==l.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)return null;let{allStates:_,stateGroupModel:E,selectedStates:g,selectedStatesPropertyValues:y}=u,v=E.propertySortOrder||[],h=E.propertyValues;return h?o.createElement(a6.lS,{sortedProperties:v,stateGroupPropertyValues:h,selectedStatesPropertyValues:y,selectedStates:g,allStates:_,onSelectProperty:t=>{let n={};for(let e of Object.keys(t)){let a=t[e].symbol.node_id;for(let t of(n[e]=a,s[e]||[]))n[t]=a;for(let e of r)n[e]||(n[e]=a)}e.onChange(n)},recordingKey:e.recordingKey,hideErrorsPanel:!0,shouldIndent:!0,extended:!0}):null});function oo(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function oi(e){return e.mirror.selectionProperties.prototypeDestinationStateGroupSelectionInfo}var or=n(169231),ol=n(511787),oc=n(939143),os=n(720531),od=n(746806);let op="prototype_set_variable_controls--dropdownAndIconContainer--6m3Tw",om="prototype_set_variable_controls--icon---HzDt",ou="prototype_set_variable_controls--placeholderText--PBIqf";function o_({targetVariableData:e,targetVariable:t,updateSelectionProperties:n,autoOpenVariablePicker:a,...r}){let s=o.useRef(null),d=(0,i.wA)(),p=(0,M.GS)(),m=(0,i.d4)(e=>e.variablePickerShown),u=(0,nw.tZ)((0,t5.hS)(t)&&"id"in t?t.id:void 0),_=(0,nw.u)((0,t5.hS)(t)&&"id"in t?t.id:void 0),[E,g]=o.useState("");(0,no.h)(()=>{a&&!0===a.current&&(v(),a.current=!1)});let y=(0,nw.BQ)((0,t5.hS)(t)&&"id"in t?t.id:void 0)??(0,nD.m9)((0,t5.hS)(t)&&"nodeFieldAlias"in t?t.nodeFieldAlias:void 0);o.useEffect(()=>{void 0!==e&&y&&"MIXED"!==y&&(0,t5.hS)(e)&&e.resolvedType!==y.resolvedType&&!((0,nD.tz)(e.resolvedType)&&(0,nD.tz)(y.resolvedType))&&n({targetVariableData:void 0})},[y,n,e]);let v=()=>{let e=s.current.getBoundingClientRect();d((0,or.C)({type:"variable-picker-set-variable-action",isShown:!0,resolvedType:l.rXF.STRING,initialPosition:new t1.Mi(e.left-20,e.top),key:r.recordingKey,onVariableSelected:f}))},h=o.useCallback(()=>{d((0,or.B)())},[d]),[N,I]=o.useState(!1),f=o.useCallback(t=>{if(void 0!==t&&t.node_id){let a={targetVariable:{id:t.node_id}},o=l.CWU.getVariableResolvedValue(t.node_id,new Map);!e&&t.resolvedType===l.rXF.COLOR&&o&&(a.targetVariableData=o??void 0),n(a),d((0,t6.Zh)({name:"prototype.variable_selected",params:{collectionId:t.variableSetId,variableId:t.node_id,variableType:t.resolvedType}})),I(!0)}},[d,e,n]),T=o.useCallback(e=>{e.value.stablePath.map(e=>tq.sH(e))&&(n({targetVariable:{nodeFieldAlias:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}),I(!0))},[n]),b=o.useMemo(()=>(0,c.kc)().ds_variable_props_proto?{type:"COMPONENT_PROPS",layout:"list"}:{type:"LOCAL_VARIABLES",layout:"list"},[]);o.useEffect(()=>{let e=l.Ez5.prototypingEditorState().colorPickerEyedropperVarData;return(0,A.lu)(e,{onChangeImmediate(){let t=e.getCopy();t&&n({targetVariableData:t})}})},[n]);let O="nodeFieldAlias"in t?(0,nD.aA)(t.nodeFieldAlias.stablePathToNode,t.nodeFieldAlias.indexOrKey):void 0,P=O?(0,nD.Xx)(O.varValue.resolvedType):null,S=null;if((0,t5.gl)(t))S=null;else if(y?.resolvedType===l.rXF.COLOR)S=(0,t5.gl)(e)?o.createElement("div",{className:"prototype_set_variable_controls--targetVariableDataMixedContainer--H6uGu"},(0,w.t)("fullscreen.mixed")):o.createElement(o.Fragment,null,o.createElement(os.gJ,{variableValue:e??y,onChange:e=>{n({targetVariableData:e})},recordingKey:t0.Pt(r.recordingKey,"variableValueInput"),setVariableAction:!0,innerContainerClassName:"prototype_set_variable_controls--variableColorInputContainer--NaOmp"}));else{let t=r.isNestedInConditional?"prototype_set_variable_controls--absoluteIconInConditional--BbEmW":"prototype_set_variable_controls--absoluteIcon--1XpBF",a=l.rXF.BOOLEAN;_?a=_.resolvedType:O&&(a=O.varValue.resolvedType===l.rXF.TEXT_DATA?l.rXF.STRING:O.varValue.resolvedType),S=o.createElement("div",{className:p?void 0:ns.cx.ml12.$},o.createElement("div",{className:op},o.createElement(nn.KN,{resolvedType:a,targetVariableData:e,autoOpenExpressionBuilder:N,setAutoOpenExpressionBuilder:I,updateSelectionProperties:n,recordingKey:r.recordingKey,isNarrowPanel:r.isNarrowPanel,showVariableThumbnails:!0}),!p&&o.createElement(nc.B,{className:e2()(om,t),svg:a0.default})))}let C=e2()({"prototype_set_variable_controls--targetVariableDropdown--IZwoF":!p&&!r.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownNarrow--WWi-t prototype_set_variable_controls--targetVariableDropdown--IZwoF":!p&&r.isNarrowPanel,"prototype_set_variable_controls--targetVariableDropdownUI3--Pz71q":p,[ou]:p&&!(u||O)}),D=(0,i.d4)(nh.ZM),k=(0,c.kc)().ds_variable_props_unified_ui&&D?p?(0,w.t)("proto.select_variable_unified.short"):(0,w.t)("proto.select_variable_unified"):p?(0,w.t)("proto.select_variable.short"):(0,w.t)("proto.select_variable"),x=o.createElement(n_.D8,{recordingKey:t0.Pt(r.recordingKey,"selectTargetVariable"),onClick:v},o.createElement("div",{className:p?void 0:(0,t5.hS)(t)?"prototype_set_variable_controls--targetVariableLabel--AFCqK":"prototype_set_variable_controls--targetVariableLabelInactive--zHWCC prototype_set_variable_controls--targetVariableLabel--AFCqK",ref:s},o.createElement(nl.Y,null,o.createElement("div",{className:C},o.createElement("div",{className:op},(0,t5.gl)(t)?o.createElement("div",{className:e2()(ns.cx.pt2.$,ns.cx.pb2.$)},(0,w.t)("fullscreen.mixed")):u?o.createElement(nM.w,{text:u,thumbnailValue:y,isDeleted:!!_&&(0,nx.eF)(_)}):O?o.createElement(nM.w,{text:O.name,thumbnailValue:P,isDeleted:!1,colorTheme:nM.J.COMPONENT}):o.createElement("div",{className:e2()(ns.cx.pt2.$,ns.cx.pb2.$,p?"prototype_set_variable_controls--placeholderTextColorUI3--Pc-4N":void 0)},k),!p&&o.createElement(nc.B,{className:om,svg:a0.default})))))),R=p?o.createElement(nj.cS,{input:x,label:(0,c.kc)().ds_variable_props_unified_ui?(0,w.tx)("proto.target"):(0,w.tx)("proto.variable")}):x,L=e2()({"prototype_set_variable_controls--setVariableToContainerNarrow--HHbHQ prototype_set_variable_controls--setVariableToContainer--kxsCZ":!p&&r.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainer--kxsCZ":!p&&!r.isNarrowPanel,"prototype_set_variable_controls--setVariableToContainerUI3--pGbDe":p,[ou]:p&&!e&&y?.resolvedType!==l.rXF.COLOR}),K=o.createElement("div",{className:L,"data-testid":"set-variable-container"},S),U=p?null!==S?o.createElement(nj.cS,{label:(0,w.tx)("proto.variable.value"),input:K}):null:K;return o.createElement("div",{className:p?void 0:ns.cx.relative.$},R,m.isShown&&"variable-picker-set-variable-action"===m.type&&m.key===r.recordingKey?o.createElement(o.Fragment,null,o.createElement(od.vx,{title:"",headerSize:"hidden",initialPosition:m.initialPosition,onClose:h,dragHeaderOnly:!1,initialWidth:216,canRenderBelowViewport:!0},(0,c.kc)().ds_variable_props_proto?o.createElement(oc.jc,{selectedItem:_,disabledVariableIds:new Set,currentView:b,toggleLayout:tj.lQ,pickerType:"set-variable",setControlRightButtons:o.createElement(ol.f,{resolvedTypes:[l.rXF.BOOLEAN,l.rXF.STRING,l.rXF.FLOAT,l.rXF.COLOR]}),onVariableSelected:f,onClose:h,recordingKey:t0.Pt(r.recordingKey,"variablePickerForSelection"),searchQuery:E,onSearchInputChange:g,onComponentPropSelected:T}):o.createElement(oc.YK,{selectedItem:_,disabledVariableIds:new Set,currentView:b,toggleLayout:tj.lQ,pickerType:"fields",setControlRightButtons:o.createElement(ol.f,{resolvedTypes:[l.rXF.BOOLEAN,l.rXF.STRING,l.rXF.FLOAT,l.rXF.COLOR]}),onVariableSelected:f,onClose:h,recordingKey:t0.Pt(r.recordingKey,"variablePickerForSelection"),searchQuery:E,onSearchInputChange:g})),o.createElement(oc.$3,{onClose:h})):null,U)}var oE=n(96796),og=n(463420),oy=n(763658),ov=n(896474),oh=n(394781);let oN=(0,nd.ex)("prototype_state_management_info",function(){let e=o.createElement("a",{className:ns.cx.cursorPointer.colorTextTooltipSecondary.$,href:"https://help.figma.com/hc/articles/14397859494295",rel:"noopener noreferrer",target:"_blank",onMouseDown:e=>{e.stopPropagation(),e.preventDefault()}},(0,w.tx)("proto.state_management.info_tooltip_learn_more")),t=o.createElement("span",null,o.createElement("strong",null,(0,w.tx)("proto.animation_panel.preserve_scroll_position")));return o.createElement("div",{className:"prototype_state_management_info_tooltip--stateManagementMoreInfo---gER1 tooltip--text--Ll1mS"},(0,w.tx)("proto.state_management.info_tooltip",{PreserveScrollPositionBold:t,LearnMoreLink:e}))}),oI="prototype_state_management_panel--checkboxRow--2u02e checkbox--_checkboxRow--oEhow",of="prototype_state_management_panel--expandCaret--uuDge";var oT=n(949207),oA=n(432023);function ob({transition:e,navigationType:t,recordingKey:n,showPreserveScrollPosition:a,showResetVideoState:r,showResetInteractiveComponentState:l,updateSelectionProperties:c,stateManagementVersion:s,selectedInteractions:d}){let p=(0,i.wA)(),m=(0,M.GS)(),[u,_]=o.useState(!m),E=o.useContext(nk.c);if((0,ni.YT)()===ni.Oz.TWO_COL&&E===nk.P.LEFT)return null;let g=(0,ni.LH)(s),y=o.createElement(au.S,{onChange:t=>{p((0,t6._P)({name:"Preserve Scroll Changed",params:{newValue:t}})),c({...function(e){if((0,t5.hS)(e.preserveScroll))return{transitionPreserveScroll:e.preserveScroll}}({...e,preserveScroll:t})})},checked:!0===e.preserveScroll,mixed:(0,t5.gl)(e.preserveScroll),recordingKey:t0.Pt(n,"preserve-scroll-check"),label:o.createElement(a_.J,null,(0,w.tx)("proto.animation_panel.preserve_scroll_position"))}),v=m?o.createElement(nj.TN,null,y):o.createElement(e5.fI,{className:oI},y),h=o.createElement(au.S,{onChange:t=>{p((0,t6._P)({name:"Reset Scroll Position Changed",params:{newValue:t,noodleUpgradedThisSession:oh.zZ.haveAnyInteractionsBeenUpgraded(d)}})),c({...function(e){if((0,t5.hS)(e.resetScrollPosition))return{transitionResetScrollPosition:e.resetScrollPosition}}({...e,resetScrollPosition:t})})},checked:!0===e.resetScrollPosition,mixed:(0,t5.gl)(e.resetScrollPosition),recordingKey:t0.Pt(n,"reset-scroll-position-check"),label:o.createElement(a_.J,null,(0,w.tx)("proto.animation_panel.reset_scroll_position"))}),N=o.createElement("div",{"data-tooltip-type":ne.Ib.SPECIAL,"data-tooltip":oN,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":240,className:m?"prototype_state_management_panel--stateManagementPanelTooltipUI3--x5MQ3":void 0},o.createElement(ov.In,{icon:"info-16"})),I=m?o.createElement(nj.TN,null,h," ",N):o.createElement(e5.fI,{className:oI},h),f=o.createElement(au.S,{onChange:t=>{p((0,t6._P)({name:"Reset Component State Changed",params:{newValue:t,noodleUpgradedThisSession:oh.zZ.haveAnyInteractionsBeenUpgraded(d)}})),c({...function(e){if((0,t5.hS)(e.resetInteractiveComponents))return{transitionResetInteractiveComponents:e.resetInteractiveComponents}}({...e,resetInteractiveComponents:t})})},checked:!0===e.resetInteractiveComponents,mixed:(0,t5.gl)(e.resetInteractiveComponents),recordingKey:t0.Pt(n,"reset-component-state-check"),label:o.createElement(a_.J,null,(0,w.tx)("proto.animation_panel.reset_component_state"))}),T=m?o.createElement(nj.TN,null,f):o.createElement(e5.fI,{className:oI},f),A=o.createElement(au.S,{onChange:t=>{p((0,t6._P)({name:"Reset Video Position Changed",params:{newValue:t}})),c({...function(e){if((0,t5.hS)(e.resetVideoPosition))return{transitionResetVideoPosition:e.resetVideoPosition}}({...e,resetVideoPosition:t})})},checked:!0===e.resetVideoPosition,mixed:(0,t5.gl)(e.resetVideoPosition),recordingKey:t0.Pt(n,"reset-video-position-check"),label:o.createElement(a_.J,null,(0,ni.LH)(s)?(0,w.tx)("proto.state_management.reset_video_state"):(0,w.tx)("proto.animation_panel.reset_video_state"))}),b=m?o.createElement(nj.TN,null,A):o.createElement(e5.fI,{className:oI},A),O=o.createElement(e5.Zk,{className:`prototype_state_management_panel--stateManagementPanel--sYaaj ${(0,ni.kM)(s)&&"prototype_state_management_panel--stateManagementPanelWithVersion--AovOP"}`},!m&&o.createElement(e5.fI,null,o.createElement(e5.xw,{className:"prototype_state_management_panel--panelTitle--Nr4Eh",faded:!0},(0,w.tx)("proto.state_management")),!(0,ni.kM)(s)&&N),(0,ni.uU)(s)&&a&&v,r&&(0,ni.uU)(s)&&b,g&&I,g&&l&&T,g&&r&&b,(0,t5.gl)(s)&&o.createElement(nl.Y,{direction:"horizontal",padding:{horizontal:12,vertical:12}},o.createElement(e5.UZ,null,(0,w.tx)("proto.state_management.mixed_state_update")))),P=()=>{_(!u)},S=o.createElement(n_.D8,{key:"expand-caret",recordingKey:t0.Pt(n,"expand-caret"),onMouseDown:P,role:"presentation"},o.createElement(t2.U,{svg:u?oT.A:oA.A},u?o.createElement(oE.O,{className:of}):o.createElement(og.k,{className:of}))),C=o.createElement("div",{className:"prototype_state_management_panel--expandRow--RVDCp",onMouseDown:P,role:"presentation"},S,o.createElement(n_.oj,null,(0,w.tx)("proto.state")));return o.createElement(oy.k,{name:"prototype_state_management_panel"},m&&C,(u||!m)&&O)}class oO extends nN.c${}class oP extends nN.l6{}let oS=tq.AD;class oC extends nE.cP{format(e){return e===oS||null===e?(0,w.t)("proto.target_video_node_name_formatter.this_video"):super.format(e)}}function ow(e){let{viableSameFrameVideoIds:t,disabledSameFrameVideoIds:n,scene:a,dropdownShown:r,targetVideoNodeID:l,isVideoSelected:c,onChange:s}=e,d=(0,i.wA)(),[p,m]=o.useState(()=>c?new oC(a):new nE.cP(a));t.sort((e,t)=>{let n=p.format(e),a=p.format(t);return n.localeCompare(a)}),c&&t.unshift(oS);let u=t.length>0&&n.length>0,_=`prototype-target-video-select-${e.recordingKey}`,E=(0,M.GS)(),y=o.createElement(oP,{id:_,dataTestId:"target-video-select",className:"prototype_target_video_dropdown--targetVideoDropdown--6hKF-",chevronClassName:"prototype_target_video_dropdown--chevron--jgz53",inputClassName:"prototype_target_video_dropdown--input--infAK",property:(0,t5.gl)(l)?l:tq.dI(l),formatter:p,onChange:s,dispatch:d,dropdownShown:r,recordingKey:t0.Pt(e,"select"),onOptionFocus:e=>{g.Uc(e??"")},dropdownAlignment:"left"},t.filter(e=>p.hasNameForNode(e)).map((t,n)=>o.createElement(oO,{key:`enabled-${n}`,value:t,recordingKey:t0.Pt(e,`viable-option-${n}`),disabled:!1})),u&&o.createElement(nN.sK,null),n.filter(e=>p.hasNameForNode(e)).map((t,n)=>o.createElement(oO,{key:`disabled-${n}`,value:t,recordingKey:t0.Pt(e,`viable-option-${n}`),disabled:!0})));return E?o.createElement(nj.cS,{input:y,label:(0,w.tx)("proto.video_dropdown.label")}):y}var oD=n(946689);function ok({action:e,recordingKey:t,onURLChange:n,onOpenInNewTabChange:a}){let i=(0,M.GS)(),r=o.createElement(oD.ks,{className:i?"prototype_open_url_action_options--urlInputUI3--H-JfT":"prototype_open_url_action_options--urlInput--T-tGT",dataTestId:"url-input",placeholder:(0,w.t)("proto.interaction.example_com"),value:(0,t5.gl)(e.connectionURL)?(0,w.t)("fullscreen.mixed"):(0,t5._W)(e.connectionURL,""),onChange:n,recordingKey:t0.Pt(t,"urlTextInput"),autoFocus:!1}),l=o.createElement(au.S,{label:o.createElement(a_.J,null,(0,w.tx)("proto.action_open_url_in_new_tab")),onChange:a,recordingKey:t0.Pt(t,"open-url-in-new-tab-check"),checked:void 0===e.openUrlInNewTab||!0===e.openUrlInNewTab});return o.createElement(o.Fragment,null,i?o.createElement(nj.cS,{label:(0,w.tx)("proto.open_url.text_input_label"),input:r}):r,i?o.createElement(nj.TN,null,l):o.createElement(e5.fI,{className:"prototype_open_url_action_options--checkboxRow--mu17T checkbox--_checkboxRow--oEhow"},l))}var ox=n(617453),oM=n(588599);function oR({updateSelectionProperties:e,action:t,extraScrollOffset:n,showScrollToOptions:a,recordingKey:r}){let{smallNudgeAmount:l,bigNudgeAmount:c}=(0,ox.sT)(),s=(0,i.wA)(),d=(0,M.GS)(),p=(t,n)=>(a,o)=>{t&&e({extraScrollOffset:{...t,[n]:a}},{shouldCommit:o})},m=(0,t5._W)(n,{x:0,y:0});if(!a||"SCROLL_TO"!==t)return null;let u=o.createElement(av.gq,{className:d?void 0:nR.U,inputClassName:d?nR.oM:nR.hF,value:m.y,wheelMultiplier:l,scrubMultiplier:l,smallNudgeAmount:l,bigNudgeAmount:c,onValueChange:p(m,"y"),dispatch:s,"data-tooltip-type":ne.Ib.TEXT,"data-tooltip":(0,w.t)("proto.trigger.y_offset"),tooltipForScreenReadersOnly:!1,recordingKey:t0.Pt(r,"extraScrollOffsetY")},d?o.createElement("span",{className:nR.QK},(0,w.tx)("proto.scroll_options.scroll_offset.y")):o.createElement(nc.B,{className:nR.QK,svg:oM.A})),_=o.createElement(av.gq,{className:d?void 0:nR.sC,inputClassName:d?nR.oM:nR.hF,value:m.x,wheelMultiplier:l,scrubMultiplier:l,smallNudgeAmount:l,bigNudgeAmount:c,onValueChange:p(m,"x"),dispatch:s,"data-tooltip-type":ne.Ib.TEXT,"data-tooltip":(0,w.t)("proto.trigger.x_offset"),tooltipForScreenReadersOnly:!1,recordingKey:t0.Pt(r,"extraScrollOffsetX")},d?o.createElement("span",{className:nR.QK},(0,w.tx)("proto.scroll_options.scroll_offset.x")):o.createElement(nc.B,{className:nR.Kh,svg:oM.A}));return d?o.createElement(nj.Cm,{label:(0,w.tx)("proto.scroll_options.offset"),leftInput:_,rightInput:u}):o.createElement(e5.fI,null,u,_)}function oL(e){return o.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},o.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 12a6 6 0 1 1-12 0 6 6 0 0 1 12 0m1 0a7 7 0 1 1-14 0 7 7 0 0 1 14 0m-6.5-3.5a.5.5 0 0 0-1 0V12a.5.5 0 0 0 .146.354l2 2a.5.5 0 0 0 .708-.708L12.5 11.793z",clipRule:"evenodd"}))}let oK="prototype_video_action_options--chevron--mkNyv",oU="prototype_video_action_options--input--3-cEi",oV=new nE.js,oB=new nE.Z6;function oF({action:e,onChange:t,updateSelectionProperties:n,dropdownShown:a,recordingKey:r}){let l=(0,M.GS)(),c=(0,nE.Od)(e),s=(0,t5.E7)(e.mediaAction),d="UPDATE_MEDIA_RUNTIME"===(0,t5.E7)(e.connectionType),p="SKIP_TO"===s,m="SKIP_FORWARD"===s||"SKIP_BACKWARD"===s,u="PLAY"===s||"PAUSE"===s||"TOGGLE_PLAY_PAUSE"===s,_="MUTE"===s||"UNMUTE"===s||"TOGGLE_MUTE_UNMUTE"===s,E=(0,i.wA)(),g=(0,ox.RU)(),y=o.useCallback(e=>{n({mediaSkipToTime:e}),E((0,t6._P)({name:"Media skip to time changed",params:{value:e}}))},[E,n]),v=`prototype-media-action-select-${r}`,h="prototype_video_action_options--shortDropdown--NOXXv",N=a&&a.type===v?oV:oB,I=o.createElement(nA,{id:v,dataTestId:"media-play-pause-select",className:h,chevronClassName:oK,inputClassName:oU,property:c,formatter:N,onChange:t,dispatch:E,dropdownShown:a,recordingKey:t0.Pt(r,"select")},o.createElement(nT,{key:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",value:"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE",recordingKey:t0.Pt(r,"toggle-play-pause-option"),disabled:!1}),o.createElement(nT,{key:"UPDATE_MEDIA_PLAY",value:"UPDATE_MEDIA_PLAY",recordingKey:t0.Pt(r,"play-option"),disabled:!1}),o.createElement(nT,{key:"UPDATE_MEDIA_PAUSE",value:"UPDATE_MEDIA_PAUSE",recordingKey:t0.Pt(r,"pause-option"),disabled:!1})),f=o.createElement(nA,{id:v,dataTestId:"media-mute-unmute-select",className:h,chevronClassName:oK,inputClassName:oU,property:c,formatter:N,onChange:t,dispatch:E,dropdownShown:a,recordingKey:t0.Pt(r,"select")},o.createElement(nT,{key:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",value:"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE",recordingKey:t0.Pt(r,"toggle-mute-unmute-option"),disabled:!1}),o.createElement(nT,{key:"UPDATE_MEDIA_MUTE",value:"UPDATE_MEDIA_MUTE",recordingKey:t0.Pt(r,"mute-option"),disabled:!1}),o.createElement(nT,{key:"UPDATE_MEDIA_UNMUTE",value:"UPDATE_MEDIA_UNMUTE",recordingKey:t0.Pt(r,"unmute-option"),disabled:!1})),T=o.createElement(nA,{id:v,dataTestId:"media-skip-by-select",className:h,chevronClassName:oK,inputClassName:oU,property:c,formatter:N,onChange:t,dispatch:E,dropdownShown:a,recordingKey:t0.Pt(r,"select"),dropdownWidth:160},o.createElement(nT,{key:"UPDATE_MEDIA_SKIP_FORWARD",value:"UPDATE_MEDIA_SKIP_FORWARD",recordingKey:t0.Pt(r,"skip-forward-option"),disabled:!1}),o.createElement(nT,{key:"UPDATE_MEDIA_SKIP_BACKWARD",value:"UPDATE_MEDIA_SKIP_BACKWARD",recordingKey:t0.Pt(r,"skip-backward-option"),disabled:!1})),A=o.createElement(av.qd,{className:"prototype_video_action_options--timestampContainer---DdaI",inputClassName:"prototype_video_action_options--timestamp--luOrs",dataTestId:"mediaSkipToTime-input",dispatch:E,value:e.mediaSkipToTime||0,onValueChange:y,wheelMultiplier:g/1e3,scrubMultiplier:g/1e3,max:3600,displayFractions:!0,"data-tooltip-type":ne.Ib.TEXT,"data-tooltip":(0,w.t)("proto.trigger.timestamp_to_set_to"),tooltipForScreenReadersOnly:!0,recordingKey:t0.Pt(r,"mediaSkipToTimeInput")},l?o.createElement(oL,null):void 0),b="SKIP_BACKWARD"===s?(0,w.t)("proto.trigger.duration_to_jump_backward"):(0,w.t)("proto.trigger.duration_to_jump_forward"),O=o.createElement(av.dE,{className:"prototype_video_action_options--timeAmountContainer--5kpHn",dataTestId:"mediaSkipByAmount-input",dispatch:E,value:e.mediaSkipByAmount||5,onValueChange:e=>{n({mediaSkipByAmount:e}),E((0,t6._P)({name:"Media skip by amount changed",params:{value:e}}))},wheelMultiplier:g/1e3,scrubMultiplier:g/1e3,max:3600,"data-tooltip-type":ne.Ib.TEXT,"data-tooltip":b,tooltipForScreenReadersOnly:!0,recordingKey:t0.Pt(r,"mediaSkipByAmountInput")});if(!d)return null;if(l){if(u)return o.createElement(nj.cS,{input:I,label:(0,w.tx)("proto.video_options.behavior")});if(_)return o.createElement(nj.cS,{input:f,label:(0,w.tx)("proto.video_options.behavior")});if(m)return o.createElement(o.Fragment,null,o.createElement(nj.cS,{input:T,label:(0,w.tx)("proto.video_options.direction")}),o.createElement(nj.cS,{input:O,label:(0,w.tx)("proto.video_options.offset")}));if(p)return o.createElement(nj.cS,{input:A,label:(0,w.tx)("proto.video_options.timestamp")})}return o.createElement(e5.fI,null,u&&I,_&&f,m&&T,m&&O,p&&A)}var oz=n(38340);function oG({action:e,recordingKey:t,interactionType:n,onActionChange:a,updateMultipleDestinationNodes:r,updateSelectionProperties:c,stateManagementVersion:s,autoOpenVariablePicker:d,autoOpenExpressionBuilder:p,setAutoOpenExpressionBuilder:m,...u}){let _=(0,i.wA)(),E=(0,ng.Um)(),{scene:g,selectionProperties:y}=(0,as.R)(e=>({scene:e.mirror.sceneGraph,selectionProperties:e.mirror.selectionProperties})),v=(0,M.GS)(),h=(0,ni.YT)(),N=h===ni.Oz.SINGLE_COL,I=h===ni.Oz.TWO_COL,f=o.useContext(nk.c),T=I&&f===nk.P.RIGHT,A="SET_VARIABLE"===(0,t5.E7)(e.connectionType),b="SET_VARIABLE_MODE"===(0,t5.E7)(e.connectionType),O="CONDITIONAL"===(0,t5.E7)(e.connectionType),P="INTERNAL_NODE"===(0,t5.E7)(e.connectionType),S="INTERNAL_NODE"===(0,t5.E7)(e.connectionType)&&"SWAP_STATE"===(0,t5.E7)(e.navigationType),C="URL"===(0,t5.E7)(e.connectionType),D=P||"BACK"===(0,t5.E7)(e.connectionType)||"CLOSE"===(0,t5.E7)(e.connectionType),k="UPDATE_MEDIA_RUNTIME"===(0,t5.E7)(e.connectionType),x=(0,nv.dq)(y),R=(0,ap.uQ)(),L=[],K=[];if(R){let{viableIds:e,disabledIds:t}=l.X3B.getVideoNodesOnSameTlfAsNode(R);L=e,K=t}let U=tq.dI((0,t5.E7)(e.transitionNodeID)),V=null!=U&&U!==tq.AD,B=P&&(!(0,t5.hS)(e.transitionNodeID)||V),F=(0,t5.E7)(e.navigationType),z=P&&"OVERLAY"===(0,t5.E7)(F),G=(0,ni.hU)(e.transitionType,e.easingType,e.easingFunction,e.transitionDuration,e.transitionShouldSmartAnimate,e.transitionPreserveScroll,e.transitionResetVideoPosition,e.openUrlInNewTab,e.transitionResetScrollPosition,e.transitionResetInteractiveComponents),W=D&&!z&&("INSTANT"===G.behavior||"DISSOLVE"===G.behavior),Y=P&&"OVERLAY"===(0,t5.E7)(e.navigationType)&&V,H=P&&(z||"SWAP"===(0,t5.E7)(F)),X=!k&&(0,ni.oc)(e),J=(0,ni.GB)(e),q=(0,ni.uU)(s)?W||X:(0,ni.Fp)(s,e.connectionType,e.navigationType),{selectedInteractions:$}=(0,oz.Ay)(ad.J.NORMAL),Q=$.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>tZ.d({nodeID:e.sourceNodeID,interactionID:e.id})),Z=o.useCallback(e=>{let t=tq.sH(e);t&&c({transitionNodeID:t}),_((0,t6._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(Q),destinationTlfId:e}}))},[_,c,Q]),j=o.useCallback(e=>{r(e),_((0,t6._P)({name:"Variant based prototyping UI changed",params:{source:"panel"}})),_((0,t6._P)({name:"Prototype navigation destination changed",params:{source:"panel",connectorIds:JSON.stringify(Q)}}))},[r,_,Q]),ee=o.useCallback(e=>{c({connectionURL:e.target.value})},[c]),et=(0,nE.Od)(e),en=e2()({[nR.Ph]:!v,[nR.Ti]:u.isNestedInConditional&&!N&&!T}),ea=P&&!S,eo=o.createElement(on,{className:nR.iR,dispatch:_,dropdownShown:E,onChange:Z,nodeId:e.transitionNodeID||tq.Hr,scene:g,recordingKey:t0.Pt(t,"destinationDropdown"),action:et,isUI3:v}),ei=o.createElement(oR,{action:et,showScrollToOptions:"SCROLL_TO"===et,extraScrollOffset:e.extraScrollOffset,updateSelectionProperties:c,recordingKey:t0.Pt(t,"scrollOptionsPanel")}),er=o.createElement(aC,{interactionType:n,updateSelectionProperties:c,recordingKey:t0.Pt(t,"overlaySettings"),actionIndexPath:u.actionIndexPath,nodeId:e.transitionNodeID||tq.Hr});return o.createElement("div",{className:en},ea&&(v?o.createElement(o.Fragment,null,o.createElement(nj.cS,{label:H?(0,w.tx)("proto.overlay"):(0,w.tx)("proto.destination"),input:eo}),ei,Y&&er):eo),C&&o.createElement(ok,{action:e,recordingKey:t,onOpenInNewTabChange:e=>{c({openUrlInNewTab:e}),_((0,t6._P)({name:"Open Url In New Tab Changed",params:{value:e}}))},onURLChange:ee}),k&&o.createElement(ow,{dropdownShown:E,scene:g,targetVideoNodeID:e.transitionNodeID||tq.Hr,recordingKey:t0.Pt(t,"targetVideoDropdown"),viableSameFrameVideoIds:L,disabledSameFrameVideoIds:K,isVideoSelected:x,onChange:Z}),o.createElement(oF,{dropdownShown:E,action:e,onChange:a,updateSelectionProperties:c,recordingKey:t}),!v&&ei,A&&o.createElement("div",{className:v?void 0:ns.cx.ml4.$},o.createElement(o_,{className:nR.PB,dispatch:_,onChange:Z,nodeId:e.transitionNodeID||tq.Hr,targetVariable:e.targetVariable||{id:""},targetVariableData:e.targetVariableData,updateSelectionProperties:c,recordingKey:t0.Pt(t,"setVariableControls"),action:et,isNestedInConditional:u.isNestedInConditional,isNarrowPanel:u.isNestedInConditional||u.isNarrowPanel,autoOpenVariablePicker:d})),b&&o.createElement("div",{className:v?void 0:ns.cx.ml4.$},o.createElement(at,{dispatch:_,targetVariableSetID:e.targetVariableSetID,targetVariableModeID:e.targetVariableModeID,deprecatedTargetVariableSetKey:e.targetVariableSetKey,updateSelectionProperties:c,recordingKey:t0.Pt(t,"setVariableControls"),actionIndexPath:u.actionIndexPath.join(",")})),O&&(T?o.createElement(a3,{recordingKey:t0.Pt(t,"conditionalActionSection","conditional-block",0),autoOpenExpressionBuilder:p,setAutoOpenExpressionBuilder:m,updateSelectionProperties:c,conditionalActions:(0,t5.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]}):o.createElement(a2,{updateSelectionProperties:c,recordingKey:t0.Pt(t,"conditionalActionSection"),action:e,updateMultipleDestinationNodes:r,interactionType:n,stateManagementVersion:s,selectedInteractions:u.selectedInteractions,actionIndexPath:u.actionIndexPath,onDrop:u.onDrop,onSelect:u.onSelect,onExpand:u.onExpand,onNewActionAdded:u.onNewActionAdded,selectedActionIndex:u.selectedActionIndex,expandedRows:u.expandedRows,autoOpenVariablePicker:d,handleMouseDownUI3:u.handleMouseDownUI3})),S&&o.createElement("div",{className:ns.cx.ml0.$},o.createElement(oa,{onChange:j,nodeId:e.transitionNodeID||tq.Hr,recordingKey:t0.Pt(t,"consumption"),actionIndexPath:u.actionIndexPath})),B&&o.createElement(o.Fragment,null,v&&o.createElement("div",{className:nR.x}),o.createElement(aK.X7,{transition:G,interactionType:n,navigationType:e.navigationType,recordingKey:t0.Pt(t,"animationPanel"),updateSelectionProperties:c,isNarrowPanel:u.isNestedInConditional||u.isNarrowPanel,stateManagementVersion:s})),Y&&!v&&er,q&&o.createElement(o.Fragment,null,v&&o.createElement("div",{className:nR.x}),o.createElement(ob,{connectionType:e.connectionType,transition:G,navigationType:e.navigationType,recordingKey:t0.Pt(t,"stateManagementPanel"),updateSelectionProperties:c,showPreserveScrollPosition:W,showResetVideoState:!!X,showResetInteractiveComponentState:!!J,stateManagementVersion:s,selectedInteractions:u.selectedInteractions})))}var oW=n(584999),oY=n(323110),oH=n(482725);let oX=Symbol("ACTION_ROW");function oJ({updateMultipleDestinationNodes:e,updateSelectionProperties:t,onDeleteAction:n,stateManagementVersion:a,selectedInteractions:r,autoOpenVariablePicker:l,autoOpenExpressionBuilder:c,setAutoOpenExpressionBuilder:s,...d}){let p=(0,i.wA)(),{shouldShowAdvancedPrototypingPaywall:m,showAdvancedPrototypingVariablesModal:u,showAdvancedPrototypingConditionalActionsModal:_}=(0,ni.zt)(),E=(0,ng.Um)(),g=(0,ni.SJ)(),{firstVariableSetMode:y,firstVariableSetID:v}=ae(),h=d.action,N=d.isNestedInConditional&&(0,aV.qQ)(d.action),I=!!h.connectionType&&"CONDITIONAL"===h.connectionType,f=(0,M.GS)(),T=(0,ni.YT)(),A=T===ni.Oz.SINGLE_COL,b=T===ni.Oz.TWO_COL,O=o.useContext(nk.c),P=b&&O===nk.P.RIGHT,S=b&&O===nk.P.LEFT,D=!((0,t5.gl)(d.action)||["CLOSE","NONE"].includes(h.connectionType))&&!f;var k=d.selectedActionIndex.equals(d.actionIndexPath);let x=1===d.selectedActionIndex.path.length&&d.isNestedInConditional&&d.actionIndexPath[0]===d.selectedActionIndex.path[0];var R=void 0===d.expandedRows||void 0!==d.expandedRows.find(e=>e.equals(d.actionIndexPath));f&&(R=!!A||!S||I);let L=o.useCallback(()=>{(D||A)&&d.onExpand(d.actionIndexPath)},[D,A,d]),[K,U]=o.useState(!1);o.useEffect(()=>{if(I){let e=setTimeout(()=>{U(!0)},0);return()=>clearTimeout(e)}U(!0)},[I]);let V=I&&!R,B=I&&R,F=o.useRef(null),[z,G]=(0,C.fp)(ni.hV),{position:W,dragItem:Y}=(0,nr.h4)(()=>({type:oX,element:F,item:d.action,dropPositionThreshold:B?.2:V?1/3:.5,getDeepestTargetOnly:!0,canDrag:!!S||!R,onDrop(e){d.onDrop(e),G(!0)}})),H=o.useMemo(()=>{let e=F.current;if(!e||!W||P)return;if(Y&&"CONDITIONAL"===Y.connectionType&&d.isNestedInConditional||(0,aV.qQ)(Y)){G(!1);return}let t=N?nr.Nz.BEFORE:W;var n=void 0;let a=e.offsetParent?.firstElementChild?.scrollTop??0;return t===nr.Nz.BEFORE?n=e.offsetTop-a:t===nr.Nz.AFTER&&(n=e.offsetTop+e.offsetHeight-a),G(!0),n},[W,P,Y,d.isNestedInConditional,N,G]),X=W&&I&&!R&&W===nr.Nz.INSIDE&&"CONDITIONAL"!==Y.connectionType,J=t0.rf(d.recordingKey,"mousedown",e=>{R||(k=!0,d.onSelect(d.actionIndexPath,!0))}),q=t0.rf(d.recordingKey,"mousedown",e=>{k=!1,d.onSelect(d.actionIndexPath,!1)}),$=t0.rf(d.recordingKey,"click",e=>{d.onSelect(d.actionIndexPath,!0)}),Q=t0.rf(d.recordingKey,"mousedown",e=>{(0,aV.qQ)(d.action)||d.onSelect(d.actionIndexPath,!0)}),Z=e=>{var n=!0,a=!1;switch(e){case"NONE":t({connectionType:"NONE"});break;case"NAVIGATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"NAVIGATE"});break;case"OPEN_OVERLAY":t({connectionType:"INTERNAL_NODE",navigationType:"OVERLAY"});break;case"SCROLL_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SCROLL_TO"});break;case"SWAP_WITH":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP"});break;case"SWAP_STATE_TO":t({connectionType:"INTERNAL_NODE",navigationType:"SWAP_STATE"});break;case"GO_BACK":t({connectionType:"BACK"});break;case"CLOSE_OVERLAY":t({connectionType:"CLOSE"});break;case"OPEN_URL":t({connectionType:"URL"});break;case"SET_VARIABLE":m?(n=!1,u()):(t({connectionType:"SET_VARIABLE"}),l.current=!0);break;case"SET_VARIABLE_MODE":m?(n=!1,u()):t({connectionType:"SET_VARIABLE_MODE",targetVariableSetID:v,targetVariableModeID:y});break;case"UPDATE_MEDIA_PLAY":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PLAY"});break;case"UPDATE_MEDIA_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"PAUSE"});break;case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_PLAY_PAUSE"});break;case"UPDATE_MEDIA_MUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"MUTE"});break;case"UPDATE_MEDIA_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"UNMUTE"});break;case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"TOGGLE_MUTE_UNMUTE"});break;case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_FORWARD"});break;case"UPDATE_MEDIA_SKIP_BACKWARD":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_BACKWARD"});break;case"UPDATE_MEDIA_SKIP_TO":t({connectionType:"UPDATE_MEDIA_RUNTIME",mediaAction:"SKIP_TO"});break;case"CONDITIONAL":a=!0,m?(n=!1,_()):(t({connectionType:"CONDITIONAL"}),f&&s&&s(!0))}if(f||R||L(),b&&d.onExpand(d.actionIndexPath,a),n){let t=r.filter(e=>!!e.sourceNodeID&&!!e.id).map(e=>tZ.d({nodeID:e.sourceNodeID,interactionID:e.id}));p((0,t6._P)({name:"Prototype action changed",params:{action:e,source:"panel",connectorIds:JSON.stringify(t)}}))}},j=d.isNestedInConditional?nR.It:nR.ft,ee=e2()({[nR.wu]:!S,[nR.zX]:S&&z}),et=o.createElement(t2.U,{svg:oY.A},o.createElement(nu,{className:nR._2}));if(N&&d.onAddAction)return o.createElement("div",{className:S?nR.LW:void 0},H&&o.createElement("hr",{className:j,style:{transform:`translateY(${H}px)`}}),S&&d.isNestedInConditional&&et,o.createElement("div",{className:ee,ref:F},o.createElement(aJ,{addButtonPressed:d.onAddAction,recordingKey:t0.Pt(d.recordingKey,"addAction"),isNestedInConditional:!0})));let en=(0,nE._X)(h),ea="NONE"!==en,eo=(R||!ea)&&!S,ei=d.numActions>1,er=(d.numActions>1||d.isNestedInConditional)&&!S,el=e2()({[nR.$l]:!0,[nR.KY]:S&&!d.isNestedInConditional,[nR.Iw]:S&&!d.isNestedInConditional&&z,[nR.DM]:S&&d.isNestedInConditional,[nR.vs]:S&&d.isNestedInConditional&&z,[nR.M9]:S&&d.isNestedInConditional&&x&&z,[nR.I_]:S&&I&&!k&&z,[nR.Cu]:k&&!f,[nR.PE]:k&&S&&!d.isNestedInConditional,[nR.Ze]:X,[nR.Op]:d.isNestedInConditional&&!f}),ec=e2()({[nR.rn]:!0,[nR.Gu]:S,[nR.Ti]:d.isNestedInConditional&&!f&&!P,[nR.Yo]:d.isNestedInConditional&&f&&!P}),es=o.createElement(nc.B,{key:"expand-caret",className:nR.GE,svg:R?oT.A:oA.A,recordingKey:t0.Pt(d.recordingKey,"expandCaret"),onClick:L}),ed=o.createElement(nB,{action:h,isNestedInConditional:d.isNestedInConditional,isNarrowPanel:d.isNarrowPanel&&ei,onClick:f?$:void 0}),ep=o.createElement(nO,{className:"NONE"===en||f?void 0:oW.fH,dispatch:p,dropdownShown:E,onChange:Z,action:en,recordingKey:t0.Pt(d.recordingKey,"actionDropdown"),showVideoActions:g,isNestedInConditional:d.isNestedInConditional}),em=o.createElement(e5.K0,{className:f?nR.gG:nR.hH,onClick:n,"data-tooltip-type":ne.Ib.TEXT,"data-tooltip":(0,w.t)("proto.prototype_panel.delete"),"aria-label":(0,w.t)("proto.prototype_panel.delete"),recordingKey:t0.Pt(d.recordingKey,"actionDeleteButton")},o.createElement(t2.U,{svg:oH.A},o.createElement(tX.O,null))),eu=o.createElement(e5.fI,{className:ec,onDoubleClick:L},D&&es,eo?o.createElement("span",{className:nR.P2},ep):ed,er&&em),e_=eo?ep:ed,eE=o.createElement(n_.D8,{className:ec,onDoubleClick:L},D&&es,er?o.createElement(ac.DE,{appendedClassName:nR.Jw,label:null,input:e_,icon:em}):o.createElement(ac.Ad,{appendedClassName:nR.Jw,label:null,input:e_})),eg=(0,w.tx)("proto.action"),ey=o.createElement(n_.D8,{className:ec},A||P?o.createElement(nj.cS,{label:eg,input:e_}):e_),ev=f?ey:eE,eh=e2()({[nR.Oe]:!0,[nR.h2]:k,[nR.Ob]:I});return o.createElement("div",{className:el,ref:F,role:"button",tabIndex:0,onMouseDown:f?void 0:J,onMouseUp:f?void 0:q},void 0!==H&&o.createElement("hr",{className:j,style:{transform:`translateY(${H}px)`}}),S?o.createElement("div",{className:eh,role:"button",tabIndex:0,onMouseDown:f?Q:void 0},d.isNestedInConditional&&et,ev):f?ev:eu,R&&K&&o.createElement(oG,{updateMultipleDestinationNodes:e,action:h,onActionChange:Z,recordingKey:d.recordingKey,updateSelectionProperties:t,interactionType:d.interactionType,stateManagementVersion:a,selectedInteractions:r,isNestedInConditional:d.isNestedInConditional,isNarrowPanel:d.isNarrowPanel,actionIndexPath:d.actionIndexPath,onDrop:d.onDrop,onSelect:d.onSelect,onExpand:d.onExpand,onNewActionAdded:d.onNewActionAdded,selectedActionIndex:d.selectedActionIndex,expandedRows:d.expandedRows,autoOpenVariablePicker:l,autoOpenExpressionBuilder:c,setAutoOpenExpressionBuilder:s,handleMouseDownUI3:Q}))}var oq=n(427113),o$=n(682331),oQ=n(73349);function oZ({onChange:e,value:t,shouldFocusKeyCaptureField:n,setShouldFocusKeyCaptureField:a}){let i;let r=(0,oQ._i)(t?.keyCodes),l=t=>e({keyCodes:t,triggerDevice:"KEYBOARD"}),[c,s]=o.useState(!1),d=o.useRef(null);o.useEffect(()=>{(!t||!t.keyCodes||0===t.keyCodes.length)&&n&&d.current&&(a(!1),d.current.focus(),s(!0))},[a,n,t]),o.useEffect(()=>{if(!c)return()=>{};let t=new o$.L,n=t.onPress(t=>{e({keyCodes:[t.buttons[0]],triggerDevice:t.controllerType}),requestAnimationFrame(()=>{document.activeElement instanceof HTMLElement&&document.activeElement.blur()})});return t.start(),()=>{n.release(),t.end()}},[e,c]);let p=null,m=(0,oQ.E8)(t),u=(0,M.GS)();return c?i=o.createElement(oj,null,u?(0,w.tx)("proto.keyCapture.press_key_lowercase"):(0,w.tx)("proto.keyCapture.press_key")):t?.triggerDevice==="KEYBOARD"&&r?p=(0,oQ.U8)(r):m?p=m:i=o.createElement(oj,null,u?(0,w.tx)("proto.keyCapture.click_to_set_key"):(0,w.tx)("proto.keyCapture.click_to_select")),o.createElement(e5.rp,{ref:d,className:"prototype_key_capture_field--root--bD21s","data-tooltip-type":ne.Ib.TEXT,"data-tooltip":p&&p.length>10?p:null,onFocus:()=>s(!0),onBlur:()=>s(!1),onKeyDown:e=>{e.preventDefault(),e.stopPropagation();let t=e.which||e.keyCode;!oQ.RI.has(t)&&oQ.pu[t]&&(t===r?.keyCode&&e.repeat?l((0,oQ.wb)({keyCode:t,metaKey:e.metaKey||r.metaKey,shiftKey:e.shiftKey||r.shiftKey,ctrlKey:e.ctrlKey||r.ctrlKey,altKey:e.altKey||r.altKey})):l((0,oQ.wb)({...e,keyCode:t})),document.activeElement instanceof HTMLElement&&document.activeElement.blur())},recordingKey:"keycapture"},p??i)}function oj({children:e}){return o.createElement("span",{className:"prototype_key_capture_field--placeholder--gWUKF"},e)}var o0=n(634238);class o1 extends nN.l6{}class o8 extends nN.c${}let o2=new nE.VG,o3=new nE.EX,o7=new nE.JV,o5=new nE.Eq;function o4(e){let t=(0,i.wA)(),n=(0,ng.Um)(),a=(0,M.GS)(),r=(0,nI.cJ)(),{showVideoV2Triggers:c}=(0,as.R)(e=>({allStatesInSelection:e.mirror.selectionProperties.stateGroupSelectionInfo?.mode===l.iCO.STATE,allTopLevelFramesInSelection:!!e.mirror.selectionProperties.allTopLevelFramesInSelection,showVideoV2Triggers:(0,nv.dq)(e.mirror.selectionProperties)})),s=(0,C.md)(o0.NE),d=(t,n)=>{let i=o.createElement("div",{className:"transition_interaction_dropdown--prototypeInteractionIcon---njby"},(0,nv.e7)(t));return o.createElement(o8,{key:n,value:t,icon:a?i:void 0,recordingKey:t0.Pt(e,t),disabled:!function(t){if("NONE"===t)return!0;let n=!!e.interactionsOnSelectedNodes&&e.interactionsOnSelectedNodes.every(t=>e.interactionsOnSelectedNodes&&tq.aI(t.sourceNodeID,e.interactionsOnSelectedNodes[0].sourceNodeID))&&!(0,t5.hS)(e.property),a=(function(){if(e.interactionsOnSelectedNodes)return new Set(e.interactionsOnSelectedNodes.map(e=>e?.event?.interactionType).filter(e=>void 0!==e))})()?.has(t)&&(0,t5.hS)(e.property)&&e.property!==t;return(!n&&!a||!!["ON_KEY_DOWN","DRAG","ON_VOICE","ON_MEDIA_HIT"].includes(t))&&("AFTER_TIMEOUT"===t?!e.interactionContainsOpenLinkAction:"ON_MEDIA_HIT"===t||"ON_MEDIA_END"===t?c:(!e.interactionContainsOpenLinkAction||"ON_CLICK"===t||"MOUSE_UP"===t)&&(!e.interactionContainsUpdateMediaRuntime||"ON_HOVER"!==t&&"ON_PRESS"!==t&&"DRAG"!==t)&&(!e.interactionOnlyContainsBack||"ON_HOVER"!==t&&"ON_PRESS"!==t))}(t)})},p=(r?[]:["NONE"]).map(d),m=["ON_CLICK",...r?[]:["DRAG"],"ON_HOVER","ON_PRESS","ON_KEY_DOWN"].map(d),u=["MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].map(d),_=(r?[]:["ON_MEDIA_HIT","ON_MEDIA_END"]).map(d),E=["AFTER_TIMEOUT"].map(d),g=s?"ON_MEDIA_HIT"!==e.property?o3:o5:"ON_MEDIA_HIT"!==e.property?o2:o7,y=o.useCallback(e=>e-24,[]),v=(0,t5.E7)(e.property);return o.createElement(o1,{id:"interaction-type-select",className:e.className,chevronClassName:"transition_interaction_dropdown--chevron--pyzhq",dataTestId:"interaction-select",property:e.property,formatter:g,icon:a&&v?(0,nv.e7)(v):void 0,onChange:e.onChange,dispatch:t,dropdownShown:n,recordingKey:t0.Pt(e,"select"),hideDropdownWhenContainerMoves:!(0,ny.nl)(),dropdownAlignment:y,dropdownWidth:160},p,!r&&o.createElement(nN.sK,null),m,o.createElement(nN.sK,null),u,!r&&o.createElement(nN.sK,null),E,c&&[o.createElement(nN.sK,{key:""}),..._])}let o6={keyCodes:[],triggerDevice:"KEYBOARD"};function o9(e,t,n,a){return n?o.createElement(nj.cS,{label:e,input:t,appendedClassName:a?void 0:nR.dU}):o.createElement(e5.fI,null,t)}function ie(e){let{detailPropsMultipleActions:t,interactionsOnSelectedNodesAndComponents:n,updateSelectionProperties:a}=(0,oz.Ay)(e.category),{interactionType:r="NONE",transitionTimeout:l=.8,mediaHitTime:c=0,interactionMaintained:s=!1,interactionDuration:d=.3,keyTrigger:p=o6}=t.interactionEvent,m=(e,t)=>{if(e.connectionType===t)return e;if("CONDITIONAL"===e.connectionType)for(let n of(0,t5.hS)(e.conditionalActions)&&e.conditionalActions?e.conditionalActions:[]){let e=n.actions?n.actions.find(e=>e.connectionType===t):void 0;if(void 0!==e)return e}return null},u=void 0!==t.interactionActions.find(e=>m(e,"URL")),_=void 0!==t.interactionActions.find(e=>m(e,"UPDATE_MEDIA_RUNTIME")),E=1===t.interactionActions.length&&"BACK"===t.interactionActions[0].connectionType,g=void 0!==t.interactionActions.find(e=>m(e,"CONDITIONAL"));return function(e){let t=(0,i.wA)(),n=e.updateSelectionProperties,a=(0,ox.RU)(),[r,l]=o.useState(!1),c=(0,M.GS)(),s=(0,ni.YT)(),d=s===ni.Oz.SINGLE_COL,p=s===ni.Oz.TWO_COL,m=!0===(0,t5.E7)(e.maintained),u=(0,t5.E7)(e.keyTrigger),_="ON_KEY_DOWN"===(0,t5.E7)(e.interactionType),E="AFTER_TIMEOUT"===(0,t5.E7)(e.interactionType),g="ON_MEDIA_HIT"===(0,t5.E7)(e.interactionType),y=["MOUSE_IN","MOUSE_OUT","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"].indexOf((0,t5.E7)(e.interactionType)||"")>-1,v=o.createElement(o4,{className:nR.sQ,property:e.interactionType,onChange:a=>{na.sn.start("interaction_details_changed"),n({interactionType:a}),t((0,t6._P)({name:"Prototype Interaction Type Changed",params:{newType:a,oldType:(0,t5._W)(e.interactionType,"MIXED")}})),"ON_KEY_DOWN"===a&&l(!0)},interactionContainsOpenLinkAction:e.interactionContainsOpenLinkAction,interactionContainsUpdateMediaRuntime:e.interactionContainsUpdateMediaRuntime,interactionOnlyContainsBack:e.interactionOnlyContainsBack,recordingKey:t0.Pt(e,"interactionDropdown"),interactionsOnSelectedNodes:e.interactionsOnSelectedNodes}),h=c?d?o.createElement(nj.cS,{label:(0,w.tx)("proto.trigger"),input:v}):o.createElement("div",{className:nR.BX},v):o.createElement(e5.fI,{className:e2()(nR.SG,nR.QT)},v,o.createElement("div",{className:nR.LY},e.headerButtons)),N=o.createElement(o.Fragment,null,E&&o9((0,w.tx)("proto.delay"),o.createElement(av.W4,{className:c?nR.Lp:nR.Zp,inputClassName:c?nR.Gl:void 0,dataTestId:"timeout-input",dispatch:t,value:e.timeout,onValueChange:e=>{n({transitionTimeout:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:20,"data-tooltip-type":ne.Ib.TEXT,"data-tooltip":(0,w.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:t0.Pt(e,"timeoutInput")},c?o.createElement(oq.A,null):void 0),c,d),_&&o9((0,w.tx)("proto.key"),o.createElement(oZ,{onChange:e=>{n({keyTrigger:e})},value:u,shouldFocusKeyCaptureField:r,setShouldFocusKeyCaptureField:l}),c,d),g&&o9((0,w.tx)("proto.time"),o.createElement(av.qd,{displayFractions:!0,className:nR.Ym,inputClassName:nR.vE,dataTestId:"mediaHitTime-input",dispatch:t,value:e.mediaHitTime,onValueChange:e=>{n({mediaHitTime:e})},wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,max:3600,"data-tooltip-type":ne.Ib.TEXT,"data-tooltip":(0,w.t)("proto.trigger.video_hit_time"),tooltipForScreenReadersOnly:!0,recordingKey:t0.Pt(e,"mediaHitTimeInput")},c?o.createElement(oL,null):void 0),c,d),y&&o9((0,w.tx)("proto.delay"),o.createElement(av.W4,{className:c?nR.Lp:nR.aq,inputClassName:c?nR.Gl:nR.p0,dataTestId:"duration-input",dispatch:t,value:m?e.interactionDuration:void 0,onValueChange:e=>{n(e&&e>0?{interactionMaintained:!0,interactionDuration:e}:{interactionMaintained:!1})},min:0,allowEmpty:!0,placeholder:(0,w.t)("proto.trigger.add_delay_placeholder"),wheelMultiplier:a/1e3,scrubMultiplier:a/1e3,"data-tooltip-type":ne.Ib.TEXT,"data-tooltip":(0,w.t)("proto.trigger.after_delay_timeout"),tooltipForScreenReadersOnly:!0,recordingKey:t0.Pt(e,"delayInput")},c?o.createElement(oq.A,null):void 0),c,d));return c?o.createElement("div",{className:p?nR.eU:void 0},h,N):o.createElement("div",{className:nR.cF},h,N)}({...e,updateSelectionProperties:a,interactionType:r,interactionContainsOpenLinkAction:u,interactionContainsUpdateMediaRuntime:_,interactionOnlyContainsBack:E,interactionContainsConditionalAction:g,timeout:l,maintained:s,interactionDuration:d,mediaHitTime:c,keyTrigger:p,interactionsOnSelectedNodes:n,recordingKey:t0.Pt(e.recordingKey,ni.Qe)})}let it="prototype_interaction_edit_modal--contentContainer--bo2b4",ia="prototype_interaction_edit_modal--ui3TwoColContentContainer--x9vrG",io="prototype_interaction_edit_modal--ui3SingleColContentContainer--uF-ir",ii="prototype_interaction_edit_modal--dividerHorizontal--3wvnB",ir="prototype_interaction_edit_modal--ui3InteractionsPanelContentRight--bVfG8";function il(e){let{selectedInteractions:t,makeUpdateSelectionPropertiesForActionIndex:n,makeUpdateMultipleDestinationNodesForActionIndex:a,differentLengthActions:i,mergedActions:r}=(0,oz.Ay)(e.category),l="NONE"!==(0,t5.E7)(e.interactionType),c=void 0!==r.find(e=>"CONDITIONAL"===e.connectionType),{selectedActionIndex:s,onSelect:d}=e,p=(0,M.GS)(),m=(0,ni.YT)(),u=m===ni.Oz.SINGLE_COL,_=m===ni.Oz.TWO_COL,{expandedRows:E,setExpandedRows:g,deleteButtonPressed:y,newActionIndexPath:v,resetNewActionIndexPath:h}=e;o.useEffect(()=>{v&&!v?.equals([])&&(p?d(v.path,!0):(g([...E,v]),d([],!1)),h())},[E,g,v,h,d,p]);let N=o.useCallback(e=>{E.find(t=>t.equals(e))?g(E.filter(t=>!t.equals(e))):g([...E,new aV.Op(e)])},[E,g]),I=o.useCallback(n=>{var a=n.dropItem;if((0,t5.gl)(a)||(0,aV.qQ)(n.dragItem))return;let o=e.interactionsOnSelectedNodes;if(!o||!t)return;for(var i=0;i<t?.length;i++){let e=t[i];if(e&&e.actions){let o=e.actions,r=(0,aV.Vp)(o,s,E,a,n.position);if(r.newSelectedActionIndex&&_&&d(r.newSelectedActionIndex.path,!0),r.newActions&&(t[i].actions=r.newActions,p||d([],!1)),r.newExpandedRows){if(_){let e=[];r.newActions?.forEach((t,n)=>{"CONDITIONAL"===t.connectionType&&e.push(new aV.Op([n]))}),g(e)}else g(r.newExpandedRows)}}}let r=o.map(e=>t.find(t=>t.id===e.id)??e);t7.Y5.updateSelectionProperties({prototypeInteractions:r})},[E,g,e.interactionsOnSelectedNodes,s,t,d,p,_]),f=e2()({"prototype_interaction_edit_modal--panelUI3--WK3CN":p,"prototype_interaction_edit_modal--panelUI3TwoColumn--V5gi4":_});return o.createElement(nr.hh,null,o.createElement(e5.Zk,{className:f},e.shouldHideTitle?null:o.createElement(e5.fI,null,o.createElement(e5.U8,{title:(0,w.t)("proto.interaction.interaction"),dataTooltipContentKey:nm,dataTooltipTimeoutDelay:50})),o.createElement("div",null,(l||p)&&o.createElement(o.Fragment,null,u&&o.createElement(o.Fragment,null,o.createElement(ie,{category:e.category,recordingKey:ni.dJ,headerButtons:o.createElement(o.Fragment,null)}),o.createElement("div",{className:"prototype_interaction_edit_modal--dividerHorizontalUI3--HMCeE"})),i&&o.createElement(nl.Y,{direction:"horizontal",padding:{horizontal:16,vertical:12}},o.createElement(e5.UZ,null,(0,w.tx)("fullscreen.properties_panel.click_plus_to_replace_mixed_content"))),!i&&o.createElement(o.Fragment,null,r?.map((i,l)=>o.createElement(oJ,{key:l,updateMultipleDestinationNodes:a(l),action:i,recordingKey:t0.Pt(e.recordingKey,ni.eG,l),updateSelectionProperties:n(l),onDeleteAction:()=>y(l),interactionType:e.interactionType,actionIndexPath:[l],numActions:r.length,isNestedInConditional:!1,isNarrowPanel:!c,stateManagementVersion:e.stateManagementVersion,selectedInteractions:t,onDrop:I,onSelect:e.onSelect,onExpand:N,selectedActionIndex:s,autoOpenVariablePicker:e.autoOpenVariablePicker,expandedRows:E,onNewActionAdded:e.onNewActionAdded,autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder})))))))}function ic({transition:e,recordingKey:t,updateSelectionProperties:n,stateManagementVersion:a,selectedInteractions:r}){let l=(0,i.wA)(),c=(0,M.GS)(),s=(0,ni.YT)()===ni.Oz.SINGLE_COL,p=()=>{for(let t of(tL.az.trackDefinedEvent("prototype.state_management_noodle_upgraded",{num_interactions:r.length,preserve_scroll_position_value:!!e.preserveScroll}),r))(0,ni.uU)(t.stateManagementVersion)&&t.id&&t.sourceNodeID&&oh.zZ.recordInteractionUpgraded(t.id,t.sourceNodeID);n({...(0,t5.hS)(e.preserveScroll)&&(0,t5.hS)(a)?{transitionResetScrollPosition:!e.preserveScroll}:{},stateManagementVersion:1}),l(d.F.enqueue({type:"state-management-updated",message:(0,w.t)("proto.state_management.visual_bell_updated_message"),button:{text:(0,w.t)("proto.state_management.visual_bell_update_all"),action:()=>{t7.Y5.triggerActionInUserEditScope("update-interactions-state-management-on-page"),l(d.F.enqueue({type:"state-management-updated-all",message:(0,w.t)("proto.state_management.visual_bell_update_all_message")}))}}}))},m=()=>{tL.az.trackDefinedEvent("prototype.state_management_noodle_reverted",{num_interactions:r.length}),n({stateManagementVersion:0})},u=1===a?o.createElement(oD.jG,{className:"prototype_state_management_version_panel--revertButton--Svmg9",recordingKey:t0.Pt(t,"revert-state-management-version"),onClick:m,"data-testid":"revert-state-management-button"},(0,w.tx)("proto.state_management.revert_controls")):o.createElement(oD.nR,{recordingKey:t0.Pt(t,"update-state-management-version"),onClick:p},(0,w.tx)("proto.state_management.update_controls")),_=s?tx.IK:tx.$n,E=1===a?o.createElement(_,{variant:"secondary",onClick:m,recordingKey:t0.Pt(t,"revert-state-management-version"),htmlAttributes:{"data-testid":"revert-state-management-button"}},(0,w.tx)("proto.state_management.revert_controls")):o.createElement(_,{variant:"primary",onClick:p,recordingKey:t0.Pt(t,"update-state-management-version")},(0,w.tx)("proto.state_management.update_controls")),g=1===a?(0,w.tx)("proto.state_management.new_controls"):(0,w.tx)("proto.state_management.old_controls"),y=o.createElement("a",{target:"_blank",rel:"noopener",href:"https://help.figma.com/hc/articles/14397859494295",className:c?void 0:"prototype_state_management_version_panel--link--i5iDD blue_link--blueLink--9rlnd"},c?(0,w.tx)("proto.state_management.controls_help_link_new"):(0,w.tx)("proto.state_management.controls_help_link")),v=o.createElement("div",{className:"prototype_state_management_version_panel--versionControls--siAOf"},o.createElement(e5.JU,{className:"prototype_state_management_version_panel--label--vvYMX"},g,y),o.createElement("div",{className:"prototype_state_management_version_panel--buttonContainer--rJZ-y"},u)),h=o.createElement("div",{className:"prototype_state_management_version_panel--containerUI3--V5tpG"},o.createElement(a_.J,null,g),y,E),N=o.createElement("div",{className:"prototype_state_management_version_panel--containerUI3TwoCol--AAp8u"},o.createElement("span",{className:"prototype_state_management_version_panel--labelWrapperUI3--37g5A"},o.createElement(a_.J,null,g)),o.createElement("span",{className:"prototype_state_management_version_panel--helpLinkWrapperUI3--BttuC"},y),E);return o.createElement(oy.k,{name:"prototype_state_management_version_panel"},o.createElement(e5.Zk,{className:c?"prototype_state_management_version_panel--panelUI3--8-Db5":void 0},c?s?h:N:v))}let is="created_noodle";function id(e){let{shouldHideTitle:t=!1,category:n,newActionIndexPath:a}=e,i=(0,ni.YT)()===ni.Oz.TWO_COL,{detailProps:r,detailPropsMultipleActions:l,interactionsOnSelectedNodesAndComponents:c,updateSelectionProperties:s,selectedInteractions:d}=(0,oz.Ay)(e.category);(0,no.h)(()=>{if(void 0!==na.sn.get(is)){let e=na.sn.stop(is);(0,tL.sx)(is,{elapsedMs:e,numConnectors:d.length},{forwardToDatadog:!0})}});let{showPanel:p,transition:m}=(0,ni.n6)(r,l,d),{interactionType:u="NONE",interactionMaintained:_=!1,interactionDuration:E=.3,keyTrigger:g=o6,transitionTimeout:y=.8,mediaHitTime:v=0}=l.interactionEvent,h=(0,ni.iC)(d),N=o.createElement(il,{interactionType:u,timeout:y,mediaHitTime:v,maintained:_,interactionDuration:E,keyTrigger:g,recordingKey:t0.Pt(e,ni.Qe),shouldHideTitle:t,interactionsOnSelectedNodes:c,category:n,stateManagementVersion:h,autoOpenVariablePicker:e.autoOpenVariablePicker,newActionIndexPath:a,resetNewActionIndexPath:e.resetNewActionIndexPath,onNewActionAdded:e.onNewActionAdded,onSelect:e.onSelect,selectedActionIndex:e.selectedActionIndex,expandedRows:e.expandedRows,setExpandedRows:e.setExpandedRows,deleteButtonPressed:e.deleteButtonPressed,autoOpenExpressionBuilder:e.autoOpenExpressionBuilder,setAutoOpenExpressionBuilder:e.setAutoOpenExpressionBuilder});return o.createElement("div",null,N,!i&&p&&o.createElement(ic,{transition:m,recordingKey:t0.Pt(e,"stateManagementVersionPanel"),updateSelectionProperties:s,stateManagementVersion:h,selectedInteractions:d}))}var ip=n(360803),im=n(102165);function iu(e,t,n){let[a,o,i]=e.path,r=t[a].conditionalActions;if((0,t5.hS)(r)){let e=r?.[o].actions?.length??0;if(i>=e){if(0===e){n([a],!0);return}n([a,o,i-1],!0);return}}}function i_(e,t,n){let a=e.path[0]>=t.length,o=0===e.path.length;if(a){n([t.length-1],!0);return}if(o){n([0],!0);return}}var iE=n(930269),ig=n(277687);let iy=()=>{l.glU.setSelectedInteractions([]),(0,c.kc)().prototype_ai_magic_link_show_suggestion_toast&&t7.Y5.showMagicLinkSuggestedVisualBell("create_node_transition"),t7.Y5.deselectProperty()},iv=(0,tQ.jz)("197px"),ih=(0,tQ.c8)("50%");function iN(e){var t;return e&&a?.height<369?a=t={...a,height:369}:a??={width:440,height:e?369:320,leftWidthPct:45}}let iI=o.memo(function(){let e=(0,i.d4)(iO),t=(0,oz.HS)(),{selectedInteractions:n}=(0,oz.Ay)(t),a=n.length>0,[r,l]=o.useState(!1),c=t0.v_(ni.dJ,"keydown",t=>"Shift"!==t.key?t0.aH:(l(!0),e&&a)?void 0:t0.aH),s=t0.v_(ni.dJ,"keyup",t=>"Shift"!==t.key?t0.aH:(l(!1),e&&a)?void 0:t0.aH);if(o.useEffect(()=>(document.addEventListener("keydown",c),document.addEventListener("keyup",s),()=>{document.removeEventListener("keydown",c),document.removeEventListener("keyup",s)}),[c,s]),!e||!a)return null;let d=n.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType));return o.createElement(iT,{category:t,containsConditional:d,pressingShiftKey:r,initialX:e.initialX,initialY:e.initialY,shouldPin:e.shouldPin,setPressingShiftKey:l})}),iT=o.memo(function({category:e,containsConditional:t,pressingShiftKey:n,initialX:r,initialY:c,shouldPin:s,setPressingShiftKey:d}){let p=(0,i.wA)(),[m,u]=o.useState(!1),[,_]=(0,C.fp)(im.x),E=(0,o.useRef)(null),[g,y]=o.useState(!1),h=s||m,N=(0,M.GS)(),I=(0,ni.YT)(),f=I===ni.Oz.SINGLE_COL,T=I===ni.Oz.TWO_COL,[A,b]=o.useState(new aV.Op(N?[0]:[])),{selectedInteractions:O,differentLengthActions:P,interactionsOnSelectedNodesAndComponents:S,mergedActions:D,detailProps:k,detailPropsMultipleActions:x,updateSelectionProperties:R}=(0,oz.Ay)(e);var L=A.path.length>0?A:new aV.Op([0]);let U=L.isConditional(),V=(e,t)=>L=new aV.Op(e);N&&L.path[0]>=D.length&&!U?i_(A,D,V):N&&U&&iu(A,D,V);let B=o.useCallback((e,t)=>{t?b(new aV.Op(e)):b(new aV.Op([]))},[]);o.useEffect(()=>{if((0,t$.vA)(D.length>0,"the interactions panel should always have actions if rendered"),!N)return;let e=A.isConditional();if(e){if(e){iu(A,D,B);return}}else{i_(A,D,B);return}},[D,A,N,B]);let{shouldShowAdvancedPrototypingPaywall:F,showAdvancedPrototypinglMultipleActionsModal:z}=(0,ni.zt)(),{showPanel:G,transition:W}=(0,ni.n6)(k,x,O),Y=(0,ni.iC)(O);var H=[];T?D.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&H.push(new aV.Op([t]))}):D.length<4&&D.forEach((e,t)=>{H.push(new aV.Op([t]))});let[X,J]=o.useState(H),q=o.useRef(null),$=n&&!h&&!g,Q=(0,tQ.jz)(iE.prototypeInteractionModalWidth),Z=(0,tQ.jz)(iE.prototypeInteractionModalExpandedWidth),j=iN(G).width,ee=t?Z:Q;T&&(ee=j);let[et,en]=o.useState(s),ea=(0,t4._X)({subscribeToUpdates_expensive:!s}),eo=o.useCallback(()=>{m||(p((0,t6._P)({name:"prototype_interaction_details_modal_dragged"})),u(!0))},[p,m,u]),ei=o.useMemo(()=>{let e=new t1.Mi(r,c);if(s)return T?new t1.Mi(e.x-(j-Q),e.y):t?new t1.Mi(e.x-(Z-Q),e.y):e;{let t=(0,t4.$g)(ea,e);return new t1.Mi(t.x-ee/2,t.y+30)}},[ee,r,c,t,s,ea,T,Z,Q,j]);o.useEffect(()=>{if(!n)return;let e=e=>{!e.shiftKey&&n&&d(!1)};return document.addEventListener("mousemove",e),()=>{document.removeEventListener("mousemove",e)}},[n,d]),o.useEffect(()=>{_($)},[_,$]),o.useEffect(()=>{en(s)},[s]),o.useEffect(()=>()=>{p((0,t6._P)({name:"prototype_interaction_details_modal_closed"}))},[p]);let er=o.useRef(null),[el,ec]=o.useState(!1);o.useEffect(()=>{el&&(ec(!1),er.current?.scrollToBottom())},[el,ec,er]);let[es,ed]=o.useState(new aV.Op([])),ep=(0,K.q5)(),em=o.useCallback((e,t)=>{let n=e.event.clipboardData||window.clipboardData;switch(t){case t9.zy.COPY:case t9.zy.CUT:{let a=JSON.parse(JSON.stringify(O)),o=(0,ip.l)(a),i=e7.fG(ep?.key||null,{prototypeInteractions:o});if(e7.C4(n,i,""),t===t9.zy.CUT){let e=[];for(let t of O){let{sourceNodeID:n,id:a}=t;n&&a&&e.push(tZ.d({nodeID:n,interactionID:a}))}e1.l7.user("delete-prototype-interactions",()=>l.glU.deleteInteractions(e)),t7.Y5.deselectProperty()}e.accept()}}},[ep?.key,O]),eu=o.useRef(!1),[e_,eE]=o.useState(!1),{firstVariableSetMode:eg,firstVariableSetID:ey}=ae(),ev=(0,v.p8)("currentPage"),eh=o.useCallback((e,t,n,a)=>{p((0,t6._P)({name:"Prototype delete action",params:{action:e,source:"panel",connector_id:t,page_id:n,actionInConditionalAction:a}}))},[p]),eN=o.useCallback(e=>{if(S&&O){var t=!1,n=!1;if(F)z();else{for(let i=0;i<O?.length;i++){let r=O[i],l=[];if(r&&r.actions){var a=0,o=[];for(let i=0;i<r.actions.length;i++){let c=r.actions[i];if(i!==e)void 0!==X.find(e=>e.equals([i]))&&o.push(new aV.Op([a])),l.push(c),a++;else{let e=r.id?r.id:tq.Hr;eh(c.connectionType?c.connectionType:"NONE",(0,tq.dI)(e),ev),i===r.actions.length-1&&(t=!0),2===r.actions.length&&(n=!0)}J(o)}O[i].actions=l}}let i=S.map(e=>O.find(t=>t.id===e.id)??e);t7.Y5.updateSelectionProperties({prototypeInteractions:i}),n&&N&&J([new aV.Op([0])]),t&&T&&b(new aV.Op([e-1]))}}},[S,O,F,z,X,ev,eh,T,N]),eI=o.useCallback(e=>{if(!S||!O||!e.path.length||void 0===e.path[0])return;let[t,n,a]=e.path,o=e.isConditional();if(F)z();else if(o){let e=!1,o=!1,i=O.map(i=>{let r=i.actions;if(!r)return i;let l=r.map((r,l)=>{if(l!==t||"CONDITIONAL"!==r.connectionType)return r;let c=r.conditionalActions;if(!c)return r;let s=c.map((t,r)=>{if(r!==n)return t;let l=t.actions;if(!l)return t;let c=l[a];c&&eh(c.connectionType?c.connectionType:"NONE",(0,tq.dI)(i.id??tq.Hr),ev,!0);let s=l.filter((e,t)=>t!==a);return e=a===l.length-1,o=0===s.length,{...t,actions:s}});return{...r,conditionalActions:s}});return{...i,actions:l}}),r=S.map(e=>i.find(t=>t.id===e.id)??e);t7.Y5.updateSelectionProperties({prototypeInteractions:r}),o?b(new aV.Op([t])):!o&&e&&b(new aV.Op([t,n,a-1]))}else eN(t);document.activeElement?.blur()},[S,O,F,z,eN,ev,eh]),ef=o.createElement(t8.P,{className:T?"prototype_interaction_edit_modal--ui3TwoColScrollContainer--IWuQ4":it,useBottomPinning:!T,ref:er,allowScrollAndZoomOver:!0,"data-not-draggable":!0},o.createElement(id,{shouldHideTitle:!0,recordingKey:T?t0.Pt("leftCol",ni.dJ):ni.dJ,category:e,autoOpenVariablePicker:eu,newActionIndexPath:es,resetNewActionIndexPath:()=>{ed(new aV.Op([]))},onNewActionAdded:e=>{ed(e)},selectedActionIndex:A,onSelect:B,expandedRows:X,setExpandedRows:J,deleteButtonPressed:eN,autoOpenExpressionBuilder:e_,setAutoOpenExpressionBuilder:eE})),eT=1===O.length,eA=O[0],eb=eA.actions&&eA.actions.length<2,eO=eA.actions&&1===eA.actions.length&&eA.actions[0],eP=!eO||"NONE"===eO.connectionType,eS=eT&&eb&&eP;var eC=tq.Hr;let ew=o.createElement(aJ,{skipPaywall:eS,addButtonPressed:e=>{if(!O)return;if(("CONDITIONAL"===e.connectionType||"SET_VARIABLE"===e.connectionType||"SET_VARIABLE_MODE"===e.connectionType)&&F){z();return}"SET_VARIABLE_MODE"===e.connectionType&&(e.targetVariableSetID=ey,e.targetVariableModeID=eg),"SET_VARIABLE"===e.connectionType&&eu&&(eu.current=!0),N&&"CONDITIONAL"===e.connectionType&&eE(!0);let t=!1;var n=null,a=N&&!P&&!eS&&O[0].actions&&1===O[0].actions.length;if(P||eS)for(var o=0;o<O.length;o++){let t=O[o];t.actions=[e];let n=t.id,a=t.sourceNodeID;(0,ni.uU)(t.stateManagementVersion)&&n&&a&&oh.zZ.recordInteractionUpgraded(n,a),t.stateManagementVersion=1}else for(var o=0;o<O.length;o++){let a=O[o];if(a.actions){if((0,ni.uU)(a.stateManagementVersion)&&(a.id&&a.sourceNodeID&&oh.zZ.recordInteractionUpgraded(a.id,a.sourceNodeID),a.actions?.forEach(e=>{e.transitionResetScrollPosition=!e.transitionPreserveScroll})),T){if(A.isConditional()){let n=A.path[0],o=A.path[1],i=A.path[2],r=a.actions?.[n],l=r.conditionalActions?.[o].actions?.length??0;n===a.actions.length-1&&i===l-1&&(t=!0),r.conditionalActions?.[o].actions?.splice(i+1,0,e)}else{let n=A.path[0]+1;n===a.actions.length&&(t=!0),a.actions?.splice(n,0,e)}}else a.actions?.push(e);eC=a.id?a.id:tq.Hr}else a.actions=[e],eC=a.id?a.id:tq.Hr;if(a.stateManagementVersion=1,T){let e=[...A.path];e[e.length-1]+=1,n=new aV.Op([...e])}else n=new aV.Op([a.actions.length-1])}let i=S.map(e=>O.find(t=>t.id===e.id)??e);if(t7.Y5.updateSelectionProperties({prototypeInteractions:i}),a||T){var r=[];i[0].actions?.forEach((e,t)=>{"CONDITIONAL"===e.connectionType&&r.push(new aV.Op([t]))}),J(r)}ec&&(!T||t)&&ec(!0),ed&&ed(n),p((0,t6._P)({name:"Prototype add action",params:{action:e.connectionType?e.connectionType:"NONE",source:"panel",connector_id:(0,tq.dI)(eC),page_id:ev}}))},renderButton:!0,recordingKey:ni.dJ,isNestedInConditional:T&&A.isConditional()}),eD=O.some(e=>void 0!==e.actions&&e.actions?.length>1),ek=!A.isConditional()&&!eD,ex=o.createElement(tY.K,{onClick:()=>eI(A),"aria-label":(0,w.t)("proto.prototype_panel.delete"),disabled:ek,recordingKey:t0.Pt(ni.dJ,"actionDeleteButton"),htmlAttributes:{"data-tooltip":(0,w.t)("proto.prototype_panel.delete"),"data-tooltip-type":ne.Ib.TEXT}},o.createElement(t2.U,{svg:oH.A},o.createElement(tX.O,null))),eM=o.createElement("div",{className:"prototype_interaction_edit_modal--ui3FooterContainer--oYsXM"},ew," ",ex),eR=o.createElement(nk.c.Provider,{value:nk.P.LEFT},o.createElement("div",{className:T?"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeftResizable--16pLu":"prototype_interaction_edit_modal--ui3InteractionsPanelContentLeft--UYWSG",ref:q,style:T?{width:`${iN(G).leftWidthPct}%`}:void 0},o.createElement(ie,{category:e,recordingKey:ni.dJ,headerButtons:o.createElement(o.Fragment,null)}),o.createElement("div",{className:ii}),ef,o.createElement("div",{className:ii}),o.createElement(o.Fragment,null,eM))),eL=D.length>0?o.createElement(nk.c.Provider,{value:nk.P.RIGHT},o.createElement(t8.P,{allowScrollAndZoomOver:!0,"data-not-draggable":!0,className:T?"prototype_interaction_edit_modal--ui3ScrollContainerRight--LJr-n":void 0},o.createElement(iA,{selectedActionIndex:L,handleExpandUI3:(e,t)=>{!t&&D.length>1?J(X.filter(t=>!t.equals(e))):X.find(t=>t.equals(e))||J([...X,new aV.Op(e)])},autoOpenVariablePicker:eu,autoOpenExpressionBuilder:e_,setAutoOpenExpressionBuilder:eE}))):null,eK=o.useRef(iv),[,eU]=(0,tH.i)({disabled:!T,onDragStart(){q.current&&(eK.current=q.current.getBoundingClientRect().width)},onDrag(e){if(q.current&&eK.current){let t=iN(G),n=eK.current+e.delta.x,o=n/t.width*100;n<iv?o=iv/t.width*100:o>ih&&(o=ih),q.current.style.width=`${o}%`,a={...t,leftWidthPct:o}}}}),eV=T?o.createElement("div",{className:"prototype_interaction_edit_modal--ui3TwoColPanelContainer--e8MK8"},o.createElement("div",{className:"prototype_interaction_edit_modal--ui3TwoColInnerContainer--ZvJj2"},eR,o.createElement("div",{className:"prototype_interaction_edit_modal--dividerVertical--Noi1C"},o.createElement("div",{...eU({className:"prototype_interaction_edit_modal--verticalResizeHandle--xkc8V"})})),eL),G&&o.createElement(ic,{transition:W,recordingKey:t0.Pt(ni.dJ,"stateManagementVersionPanel"),updateSelectionProperties:R,stateManagementVersion:Y,selectedInteractions:O})):ef;return o.createElement(nn.ht.Provider,{value:o.useMemo(()=>({autoCloseOnScroll:!h}),[h])},o.createElement(nt.vL,{name:"Prototype Draggable modal",className:"prototype_interaction_edit_modal--prototypeDraggableModal--njJ6A",handleClipboard:em},o.createElement(od.vx,{ref:E,dataTestId:"in-context-prototype-interaction-edit-modal",title:t=>o.createElement("div",{className:"prototype_interaction_edit_modal--onboardingRow--UlvE0"},o.createElement(ib,{category:e,recordingKey:ni.dJ,createActionTrigger:ew,closeButton:t})),containerClassName:e2()({[it]:!T,[ia]:T,[io]:f,"prototype_interaction_edit_modal--abovePropertiesPanel--hFejC":et,"prototype_interaction_edit_modal--belowPropertiesPanel--f1Jfl":!et,"prototype_interaction_edit_modal--modalExpandedWidth--IDl6k":t&&!N,"prototype_interaction_edit_modal--modalWidth--cCH7B":!t&&!N,"prototype_interaction_edit_modal--hideModal--RSp-R":$}),contentContainerClassName:e2()({[it]:!T,[ia]:T,[io]:f}),headerClassName:"prototype_interaction_edit_modal--multilineInteractionDetailsHeader--OE8Wr",allowWheelPassthrough:!0,initialPosition:ei,headerSize:"small",onClose:iy,recordingKey:"interactionDetailsModal",arrowPosition:s?void 0:od.F_.TOP,arrowRelativeX:s?void 0:ee/2,onDragStart:()=>{en(!0),eo()},canRenderBelowViewport:!0,allowAutoExpanding:!0,dragHeaderOnly:!0,onFocus:()=>y(!0),allowResizeHeight:T,allowResizeWidth:T,fullFrame:T,minWidth:T?440:void 0,minHeight:T?G?369:320:void 0,maxWidth:T?800:void 0,maxHeight:T?800:void 0,initialHeight:T?iN(G).height-od.uF:void 0,initialWidth:T?iN(G).width:void 0,onResize:T?e=>{a={...iN(G),height:e.height,width:e.width}}:void 0},N?eV:ef)))});function iA({selectedActionIndex:e,autoOpenVariablePicker:t,handleExpandUI3:n,autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:i}){let r=(0,oz.HS)(),{selectedInteractions:l,mergedActions:c,makeUpdateSelectionPropertiesForActionIndex:s,makeUpdateMultipleDestinationNodesForActionIndex:d,detailPropsMultipleActions:p}=(0,oz.Ay)(r),m=e.path[0],u=d(m),_=s(m),E=(0,ni.iC)(l),g=p.interactionEvent.interactionType??"NONE";if(e.isConditional()){let n=e.path[1],r=e.path[2],s=c[m],d=((0,t5.hS)(s.conditionalActions)&&s.conditionalActions?s.conditionalActions:[])[n],p=d?.actions?.[r];return p?o.createElement("div",{className:ir},o.createElement(oJ,{key:r,updateMultipleDestinationNodes:u.appendActionIndex(n).appendActionIndex(r),action:p,recordingKey:t0.Pt(ni.dJ,ni.Qe,ni.eG,m),updateSelectionProperties:_.appendActionIndex(n).appendActionIndex(r),onDeleteAction:tj.lQ,interactionType:g,actionIndexPath:e.path,numActions:c.length,isNestedInConditional:!0,stateManagementVersion:E,selectedInteractions:l,onDrop:tj.lQ,onSelect:tj.lQ,onExpand:tj.lQ,selectedActionIndex:e,expandedRows:[e],autoOpenVariablePicker:t,autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:i,isNarrowPanel:!0})):null}return o.createElement("div",{className:ir},o.createElement(oJ,{key:m,updateMultipleDestinationNodes:u,action:c[m],recordingKey:t0.Pt(ni.dJ,ni.Qe,ni.eG,m),updateSelectionProperties:_,onDeleteAction:tj.lQ,interactionType:g,actionIndexPath:[m],numActions:c.length,isNestedInConditional:!1,stateManagementVersion:E,selectedInteractions:l,onDrop:tj.lQ,onSelect:tj.lQ,onExpand:n,selectedActionIndex:e,autoOpenVariablePicker:t,expandedRows:[e],autoOpenExpressionBuilder:a,setAutoOpenExpressionBuilder:i,isNarrowPanel:!0}))}function ib({category:e,recordingKey:t,closeButton:n,createActionTrigger:a}){let r=(0,i.wA)(),{selectedInteractions:s}=(0,oz.Ay)(e),d=(0,ni.YT)(),p=d===ni.Oz.TWO_COL,m=d===ni.Oz.SINGLE_COL,u=(()=>{if(1!==s.length)return 0;let e=s[0],t={nodeID:e.sourceNodeID,interactionID:e.id};return l.X3B.getMatchingInteractions(tZ.d(t)).length})(),_=(0,c.kc)().prototype_hide_matching_noodles&&1===s.length&&u>1&&o.createElement(tY.K,{actionOnPointerDown:!0,onClick:()=>{if(1!==s.length)return;let e=s[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=l.X3B.getMatchingInteractions(tZ.d(t));l.glU.selectInteractionsAndSourceNodes(n);let a=(0,w.t)("proto.interaction_details.visual_bell.selected_n_matching_interactions",{total_num_interactions:n.length});t7.Y5.showVisualBellWithUndo("selected-matching-noodles",a,!1),r((0,t6._P)({name:"prototype_select_matching_interactions",params:{num_connectors:n.length}}))},"aria-label":(0,w.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:u}),htmlAttributes:{tabIndex:-1,onMouseEnter:()=>{if(1!==s.length)return;let e=s[0],t={nodeID:e.sourceNodeID,interactionID:e.id},n=l.X3B.getMatchingInteractions(tZ.d(t));l.glU.hoverInteractions(n)},onMouseLeave:()=>l.glU.hoverInteractions([]),"data-tooltip":(0,w.t)("proto.interaction_details.select_n_matching_interactions",{total_num_interactions:u}),"data-tooltip-type":ne.Ib.TEXT}},o.createElement(t2.U,{svg:ig.A},o.createElement(tJ.A,null))),E=o.createElement(ie,{category:e,recordingKey:t,headerButtons:o.createElement(o.Fragment,null,_,a,n)}),g=o.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeader--Ka7aM"},(0,w.tx)("proto.interaction_details.header"),o.createElement("div",{className:"prototype_interaction_edit_modal--ui3ExpandedModalHeaderButtons--UqykU"},_,n)),y=o.createElement(o.Fragment,null,(0,w.tx)("proto.interaction_details.header"),o.createElement("div",{className:"prototype_interaction_edit_modal--ui3CollapsedModalHeaderButtons--7yPuD"},_,a,n));return p?g:m?y:E}let iO=e=>e.pickerShown?.id===t3.o$?e.pickerShown:null;var iP=n(79284),iS=n(229831),iC=n(52354),iw=n(304657),iD=n(625693),ik=n(347240),ix=n(509734),iM=n(82963),iR=n(606319),iL=n(818),iK=n(506599),iU=n(555074),iV=n(433861),iB=n(593392);let iF="offscreen_indicators--indicatorGraphicBlue---nYr-",iz="offscreen_indicators--indicatorGraphicPurple--FAz-M",iG=(0,tQ.jz)(aT.J4v),iW=(0,tQ.jz)(aT.v5y),iY=(0,tQ.jz)(aT.M$q),iH=(0,tQ.jz)(aT.y9S);function iX(){let e=[],t=(0,iU.kl)("selectionRegions"),n=(0,t5.E7)(t);n&&(e=n);let a=(0,i.d4)(e=>e.mirror.appModel.hoveredNode);if(a&&(0,c.kc)().ce_offscreen_indicators_for_hovered_nodes){let t=ev.q.instance.get(a);if(t){let n=t.absoluteBoundingBox;e=[...e,{bounds:{height:n.h,width:n.w,x:n.x,y:n.y},regionType:t.isPrimaryInstance||t.isInstanceSublayer||t.isSymbolSublayer||t.isSymbolPublishable?ag.fV.SYMBOLS_ONLY:ag.fV.MIXED_OR_NO_SYMBOLS}]}}let r=!!e&&e.length>=1,l=(0,t4._X)({subscribeToUpdates_expensive:r});return l&&e?o.createElement(iJ,{viewportInfo:l,regions:e}):null}function iJ({viewportInfo:e,regions:t}){let n=(0,o.useContext)(iV.kw),a=(0,o.useMemo)(()=>n.getCommentsWrapperOffset(e),[n,e]),r=a.x,l=a.y,c={transform:`translate(${r}px, ${l}px)`},s=(0,M.GS)(),d=(0,iL.b)(),p=s&&!d,m=(0,i.d4)(e=>e.mirror?.appModel.showUi),u=(0,ox.dP)()+(p?iY:iG),_=(0,ox.qw)()+u+(p?iY:iW),E=(0,tO.Ye)(),{isPropertiesPanelCollapsed:g}=(0,iK.iT)(),y=(p&&m&&!E?u:0)-3.5,v=(p&&m&&!g?_:0)-7,h=(0,A.J2)((0,ox.UK)().renderRulers)&&m?iH:0,N={x:y+h,y:-3.5+h,width:e.width-v-h,height:e.height- -7-h},I={x:y+h,y:-3.5+h,width:e.width-v-h,height:e.height- -7-h};return o.createElement(o.Fragment,null,o.createElement(iB.p,null,o.createElement("div",{"aria-hidden":!0,"data-forward-events-to-fullscreen":!0,className:"offscreen_indicators--overlay--pNOlw",style:c},!!t?.length&&o.createElement("div",null,t.map((t,n)=>{let a=(0,t4.Z0)(e,{x:t.bounds.x,y:t.bounds.y}),i=(0,t4.Z0)(e,{x:t.bounds.x+t.bounds.width,y:t.bounds.y+t.bounds.height}),r={x:a.x,y:a.y,width:i.x-a.x,height:i.y-a.y};return r.x<N.x+N.width&&r.x+r.width>N.x&&r.y+r.height>N.y&&r.y<N.y+N.height?null:o.createElement(iq,{key:n,viewportBounds:I,viewportInfo:e,indicatorViewportBounds:r,selectionBoundsScaledWidth:function(e,t){let n=Math.max(e.x,t.x);return Math.max(Math.min(e.x+e.width,t.x+t.width)-n,10)}(r,I),selectionBoundsScaledHeight:function(e,t){let n=Math.max(e.y,t.y);return Math.max(Math.min(e.y+e.height,t.y+t.height)-n,10)}(r,I),selectionRegionType:t.regionType})})))))}function iq({viewportBounds:e,viewportInfo:t,indicatorViewportBounds:n,selectionBoundsScaledWidth:a,selectionBoundsScaledHeight:r,selectionRegionType:l}){let c=function(e,t){let n=0-t.x,a=0+e.width-t.x,o=0-t.y,i=0+e.height-t.y,r=Math.abs(n)<a?n:a,l=Math.abs(o)<i?o:i,c=n<0!=a<0,s=o<0!=i<0;return c&&s?Math.abs(r)<Math.abs(l)?{x:t.x+r,y:t.y}:{x:t.x,y:t.y+l}:!c&&s?{x:t.x+r,y:t.y}:c&&!s?{x:t.x,y:t.y+l}:{x:t.x+r,y:t.y+l}}(t,{x:n.x+n.width/2,y:n.y+n.height/2});c.x-=a/2,c.y-=r/2;let s=(0,i.d4)(e=>e.mirror?.appModel.showUi),d=(0,A.J2)((0,ox.UK)().renderRulers)&&s?iH:0,p=(0,M.GS)(),m=(0,iL.b)(),u=p&&!m,_=u?iY:iG,E=u?iY:iW,g=(0,ox.dP)()+_,y=(0,ox.qw)()+E,v=(0,tO.Ye)(),{isPropertiesPanelCollapsed:h}=(0,iK.iT)(),N=1+(s&&u&&!v?g+1:0)+d,I=Math.max(N,t.width-1-a-(s&&u&&!h?y+1:0)),f=1+d,T=Math.max(f,t.height-1-r-1),b=t1.Mi.bound(c,{min:{x:N,y:f},max:{x:I,y:T}}),O=n.y+n.height<e.y,P=n.y>e.y+e.height,S=n.x+n.width<e.x,C=n.x>e.x+e.width;b.x+=t.x,b.y+=t.y;let w=Math.min(t.width-2-(s&&u?y+g:0),a),D=Math.min(t.height-2,r);return o.createElement("div",{className:"offscreen_indicators--indicator---T9xk",style:{transform:`translate3D(${b.x}px, ${b.y}px, 0)`}},(O||P)&&o.createElement("div",{style:{position:"absolute",height:1.5,width:w,marginTop:P?D-1.5:0},className:e2()({[iF]:l===ag.fV.MIXED_OR_NO_SYMBOLS,[iz]:l===ag.fV.SYMBOLS_ONLY})}),(S||C)&&o.createElement("div",{style:{position:"absolute",left:0,height:D,width:1.5,marginLeft:C?w-1.5:0},className:e2()({[iF]:l===ag.fV.MIXED_OR_NO_SYMBOLS,[iz]:l===ag.fV.SYMBOLS_ONLY})}))}var i$=n(109176);let iQ=o.memo(({shouldShowDragAndDropBorder:e})=>{let t=(0,v.p8)("isReadOnly"),n=(0,i.d4)(e=>e.progressBarState),a=(0,v.p8)("loadingEmbeds"),m=(0,A.ut)(l.Ez5?.uiState().showCanvasSearch,!1),g=(0,b.Lk)(),f=(0,o.useRef)(null),P=(0,i.d4)(e=>e.userFlags),S=!!(0,c.kc)().internal_only_debug_tools||!!P.has_cursor_bot_onboarding_v2,C=(0,i.d4)(e=>e.openFile),w=C?C.key:"",D=(0,i.d4)(e=>e.universalInsertModal),k=(0,i.wA)();(0,_.Gb)(w),(0,T.W)(),function(){let e=o.useRef(document.activeElement),t=(0,N.j)("Focus changed"),n=o.useCallback(()=>{let n=document.activeElement;n!==e.current&&(t({previousActiveElement:I(e.current?.outerHTML||""),newActiveElement:I(n?.outerHTML||"")}),e.current=n)},[t]);o.useEffect(()=>{if((0,c.kc)().eu_focus_logging)return document.addEventListener("focusin",n),()=>{document.removeEventListener("focusin",n)}},[n])}();let x=(0,h.BI)(),M=(0,u.l7)(),R=M?o.createElement(s.tH,{boundaryKey:"DevModeLeftPanel",fallback:s.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:r.eBU.DEVELOPER_TOOLS}},o.createElement(p.O,null)):o.createElement(tS,null);return o.createElement(eH,null,o.createElement(E.ED,null),o.createElement(eJ.sk,null,n.mode!==l.Oin.OFF&&o.createElement("div",{className:i$._q}),o.createElement(eV.pO,{initialFilterState:{currentPage:!1}},a.map(e=>o.createElement(eG._,{key:`loading-embed-${e}`,nodeId:e})),o.createElement(eq.qn,null),o.createElement(iM.u,null),m&&o.createElement(tk.n,null),(0,c.kc)().ce_al_experiments_on&&o.createElement(tk.n,null),o.createElement(ez.GR,null),o.createElement(ez.bu,null),o.createElement(iS.J,null),o.createElement(eq.XI,{commentsDetailContainerRef:f}),o.createElement(iX,null),(0,c.kc)().cursor_bot&&S&&o.createElement(tw.S,null),o.createElement(tp,null),o.createElement(eB.J,null),o.createElement(tC.Nz,null),o.createElement("div",{ref:f}),!(0,y.T)()&&R,!t&&o.createElement(iI,null),o.createElement(eF.G,null,M?null:o.createElement(o.Fragment,null,o.createElement(iZ,null),!!x?.shouldOptimizeForIpadApp&&o.createElement(ik.K,null),!!x?.shouldOptimizeForIpadApp&&o.createElement(ix.t,null))),e&&o.createElement(tC.X5,null)),o.createElement(O.A,{isFigjamEditor:!1,isDesignEditor:!0,isSlidesEditor:!1,openFile:C}),o.createElement(iP.l,{defaultViewTabsAvailable:!0,defaultViewAssetsTabVisible:!0}),D.showing&&o.createElement(s.tH,{boundaryKey:"FdBrowseResourceModal",onError:()=>{k(d.F.enqueue({message:"Unable to open inserts menu",type:"react-error"}))},fallback:s.H4.NONE_I_KNOW_WHAT_IM_DOING},o.createElement(iw.k,null))),g&&o.createElement(tD.K,{className:i$.PA},o.createElement(iD.s,null)))}),iZ=o.memo(function(){let e=(0,i.d4)(e=>e.mirror.appModel),t=(0,v.ax)(),{topLevelMode:n}=e,a=(0,v.dH)();return(0,f.z)({topLevelMode:l.lyf.PREVIEW,eventName:"Preview Mode Selection Changed",teamFilesOnly:!0}),o.useEffect(()=>{t&&n===l.lyf.PREVIEW&&a!==l.NLJ.COMMENTS&&(0,g.NT)(l.FAf.INSPECT)},[t,n,a]),o.createElement(o.Fragment,null,o.createElement(eX.E,null),o.createElement(ij,null))}),ij=o.memo(function(){return o.createElement(o.Fragment,null,o.createElement(P.p,null,o.createElement(S.L,null)),o.createElement(P.p,{featureFlag:"starting_points_modal"},o.createElement(ey,null)),o.createElement(P.p,null,o.createElement(iC.e,null)),o.createElement(P.p,null,o.createElement(ek,null)),o.createElement(P.p,null,o.createElement(eU,null)),o.createElement(P.p,{featureFlag:"mobile_prompt_sidebar_modal"},o.createElement(tG,null)),o.createElement(P.p,null,o.createElement(H,null)),o.createElement(P.p,null,o.createElement(m.S,null)))});function i0(){let[e,t]=(0,o.useState)(!1);return o.createElement(eW.c,{loadedCommentsProvider:!1},o.createElement(iR.v,{setShouldShowDragAndDropBorder:t,isDragTarget:!1},o.createElement(iQ,{shouldShowDragAndDropBorder:e})))}},511787:(e,t,n)=>{n.d(t,{f:()=>E});var a=n(411855),o=n(153234),i=n(572206),r=n(268537),l=n(163023),c=n(318812),s=n(298543),d=n(983092),p=n(820396),m=n(1715),u=n(590685),_=n(501191);function E({resolvedTypes:e,recordingKey:t}){let{showing:n,toggle:r,hide:p}=(0,c.BK)("expression-builder-create-variable"),m=a.useRef(null),E=o.rf(o.Pt(t,"createVariableDropdown"),"click",a.useCallback(()=>{1===e.length?N(e[0]):r()},[e,r])),[y,v]=a.useState(!1),h=a.useRef(null),N=e=>{let t=m.current?.getBoundingClientRect();t&&(h.current={initialPosition:new i.Mi(t.left,t.top),resolvedType:e},v(!0))},I=()=>{v(!1)};return a.createElement(a.Fragment,null,a.createElement("button",{ref:m,className:u.ZS,onClick:E},a.createElement(l.B,{svg:_.A})),y&&(y&&h.current?a.createElement(d.IU,{initialPosition:h.current.initialPosition,resolvedType:h.current.resolvedType,onCreateVariable:I,onClose:I}):null),n&&m.current&&a.createElement(s.Cf,{arrowOffsetFromRectLeft:14,leanPadding:0,lean:"right",targetRect:m.current.getBoundingClientRect()},e.map(e=>a.createElement(g,{key:e,resolvedType:e,onClose:p,showCreationModal:N,recordingKey:t}))))}function g({resolvedType:e,onClose:t,showCreationModal:n,recordingKey:i}){let l=(0,m.F)(e),c=o.rf(o.Pt(i,"createVariableOption",l.name),"click",a.useCallback(()=>{n(e),t()},[t,e,n]));return a.createElement(r.c$,{className:u.Fs,onClick:c},a.createElement(p.i,{type:e,showTooltip:!1}),l.name)}}}]);

//# debugId=46d96a73-f751-5dab-9314-6d55b8be1ebf

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/bebf83b8dff4b268528c9d3953b1e2c48a387b65/fullscreen_design-fe8ee3465756d69a.min.js.map