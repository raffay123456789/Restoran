"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="2982bae2-3385-51bd-8192-9d3863762680")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[3143],{592917:(e,t)=>{function n(e){return"object"==typeof e&&null!==e&&void 0!==e.type&&void 0!==e.props&&void 0!==e.children}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"isJSXElement",{enumerable:!0,get:function(){return n}})},47706:(e,t)=>{async function n(e,t){if(void 0===t)return e;if(t.aborted)throw Error("Aborted");let n=new Promise((e,n)=>{let a=()=>{n(Error("Aborted"))};t.addEventListener("abort",a),t.addEventListener("abort",()=>{t.removeEventListener("abort",a)})});return await Promise.race([e,n])}Object.defineProperty(t,"Z",{enumerable:!0,get:function(){return n}})},367762:(e,t,n)=>{n.d(t,{A0:()=>m,Av:()=>i,C:()=>d,EY:()=>u,Me:()=>h,NK:()=>s,RF:()=>r,Vc:()=>_,XB:()=>g,Xi:()=>l,_t:()=>o,a:()=>f,bd:()=>c,lF:()=>p,un:()=>a});let a="figmadocs--figmadocWrapper--4SMJB",r="figmadocs--fileLink--gVeAA utilities--bodySmall--JyKR1",i="figmadocs--linkFilePath--DBTZW",l="figmadocs--connectedBadge--5NAUO",o="figmadocs--errorBannerWrapper--eemEO utilities--bodySmall--JyKR1",s="figmadocs--labelSelect--C-SIX",c="figmadocs--emptyCodeConnectCard--UrWur",d="figmadocs--emptyCodeConnectCardHeader--S8h2p",u="figmadocs--emptyCodeConnectCardHeaderRight--vUyRn",m="figmadocs--hintPanel--9oFTP",p="figmadocs--codeConnectIcon--Lm4ab",_="figmadocs--goToParentSection--9vLVC",g="figmadocs--goToParentWrapper--3Y4OE",f="figmadocs--goToParentTitle--O4mL0",h="figmadocs--goToParentInstanceName--uIRSW"},406534:(e,t,n)=>{n.d(t,{$s:()=>s,IP:()=>i,R9:()=>o,RL:()=>l,SZ:()=>d,UD:()=>c,ZS:()=>r,hQ:()=>a,x1:()=>u,xn:()=>m});let a="figjam_onboarding_make_something--contentContainer--gVph-",r="figjam_onboarding_make_something--imageContainer--RoSk9",i="figjam_onboarding_make_something--bodyContainer--GVc2Q text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",l="figjam_onboarding_make_something--tooltipBodyXSmall--sONX7",o="figjam_onboarding_make_something--tooltipBodySmall--7yA9-",s="figjam_onboarding_make_something--tooltipBodyLarge--jkc-5",c="figjam_onboarding_make_something--buttonContainer--78iSl",d="figjam_onboarding_make_something--skipButton--pKB7N connector_modal_cta_button--button--mhvSu text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",u="figjam_onboarding_make_something--shiftSkipButtonAboveDlt---sQ7k",m="figjam_onboarding_make_something--standaloneModal--Ksh8z"},960896:(e,t,n)=>{n.d(t,{AX:()=>S,D6:()=>R,Dw:()=>x,G$:()=>i,Gu:()=>N,HR:()=>E,JA:()=>c,Jo:()=>b,N6:()=>K,NB:()=>U,Nf:()=>D,PP:()=>o,QF:()=>I,Rt:()=>a,S:()=>$,T:()=>O,V3:()=>_,VM:()=>G,VQ:()=>A,Vz:()=>B,Wv:()=>s,Xt:()=>h,Z9:()=>d,_E:()=>V,_M:()=>v,_P:()=>y,bB:()=>p,c1:()=>M,du:()=>w,dz:()=>q,eO:()=>j,ei:()=>u,fp:()=>F,fz:()=>L,gV:()=>Y,hY:()=>T,hs:()=>W,i$:()=>X,kQ:()=>H,of:()=>P,qp:()=>C,r9:()=>f,rB:()=>z,rX:()=>k,sb:()=>m,tI:()=>r,v9:()=>l,wH:()=>g});let a="canvas_search--searchInput--aCP6B canvas_search--input--aPqLZ",r="canvas_search--searchInputSingleLine--DUHFr",i="canvas_search--searchSidebarContainer--1tcxd",l="canvas_search--icon32--bmz-L",o="canvas_search--searchBarContainer--rxvLi",s="canvas_search--searchBarRow--9aFwa",c="canvas_search--searchBarRowMinimal--dEN6B canvas_search--searchBarRow--9aFwa",d="canvas_search--searchIconAndInput--3tdWb",u="canvas_search--searchIconPlaceholderFill--MohCt",m="canvas_search--resultsContainer--b0olz",p="canvas_search--resultsList--Hciv7",_="canvas_search--layerIcon--RpNZF",g="canvas_search--selected--Ng41y",f="canvas_search--disabled--dMwG7",h="canvas_search--indirectlySelected--2E-TI",E="canvas_search--symbol--614fP",y="canvas_search--layerIconContainer--IuQxq",b="canvas_search--resultInfoHeader--GM1gm",v="canvas_search--resultInfo--PKQiZ",C="canvas_search--resultsText--ubMAu",w="canvas_search--resultsFooterText--rPxEh",T="canvas_search--dotDivider--zvIFp",S="canvas_search--resultRow--xX8wI",x="canvas_search--isHoverSelecting--LlQSE",k="canvas_search--singletonHoverSelected--pCLSM",N="canvas_search--resultSubheading--XCt-Z",I="canvas_search--offlineIconContainer--qVbhY",A="canvas_search--offlineIcon--F0sbc",O="canvas_search--hoverSelectedTop--mA-fk canvas_search--_hoverSelectedBase--JOTSs",L="canvas_search--hoverSelectedMiddle--OBw7k canvas_search--_hoverSelectedBase--JOTSs",D="canvas_search--hoverSelectedBottom--zH7Va canvas_search--_hoverSelectedBase--JOTSs",R="canvas_search--resultText--RXqeC",M="canvas_search--multiline--1gb-l",P="canvas_search--strikethrough--0xsma",F="canvas_search--otherResults--G94fM",B="canvas_search--searchScopeButton--Grrvz",U="canvas_search--pageScopeDropdown--K5y-7",G="canvas_search--dropdownOption--dQRr3",K="canvas_search--replaceInput--TmEDS canvas_search--searchBarRow--9aFwa canvas_search--input--aPqLZ",V="canvas_search--replaceButtons--1sbwP",H="canvas_search--collapsableHeaderToggle--kHXh8",z="canvas_search--collapsableHeaderName---qij5",W="canvas_search--collapsableHeaderCount---NL3l",j="canvas_search--expandIcon--6eieV",$="canvas_search--loadingSpinner--Y5hDC",q="canvas_search--loadingSpinnerDelay--Rk3MX",Y="canvas_search--searchIconButton--lg-V8",X="canvas_search--searchSidebarMinimal--I1hwg canvas_search--searchSidebarContainer--1tcxd"},450503:(e,t,n)=>{n.d(t,{CL:()=>i,CR:()=>s,KB:()=>l,eb:()=>a,gd:()=>o,lN:()=>c,pJ:()=>r});let a="cursor_bot--smoothScroll--8NqWp",r="cursor_bot--cursorBotContainer--u2vDL",i="cursor_bot--progressIslandContainer--tuyOW",l="cursor_bot--progressIslandWrapper--Y6p21 cursor_bot--progressIslandBase--R1s-s",o="cursor_bot--playbackButton--fHpmO",s="cursor_bot--fullscreenEventBlocker--jPF73",c="cursor_bot--highFiveCursor--MWm2R"},170460:(e,t,n)=>{n.d(t,{Bj:()=>y,DE:()=>b,Dy:()=>o,Lo:()=>_,Lw:()=>r,PT:()=>i,S8:()=>u,VW:()=>d,W7:()=>l,bu:()=>h,hD:()=>v,iU:()=>p,iY:()=>f,or:()=>s,p:()=>E,u0:()=>c,vD:()=>g,z8:()=>m,zr:()=>a});let a="multiplayer_cursors--root---KzSU",r="multiplayer_cursors--overlay--cltnZ",i="multiplayer_cursors--multiplayerCursorsContainer--blD-f",l="multiplayer_cursors--multiplayerCursorsHiddenForVoting--54--r multiplayer_cursors--multiplayerCursorsContainer--blD-f",o="multiplayer_cursors--cursor--n8aPY",s="multiplayer_cursors--cursorPointer--ya3cR",c="multiplayer_cursors--cursorImage--hYFE4",d="multiplayer_cursors--nameContainer--O1WsV",u="multiplayer_cursors--nameContainerCloserToCursor--8L8SW",m="multiplayer_cursors--isPointingRight--eOPEm",p="multiplayer_cursors--message--1NMSI multiplayer_cursors--nameContainer--O1WsV",_="multiplayer_cursors--messageText--jI1cQ",g="multiplayer_cursors--topMessageLine--uwXou",f="multiplayer_cursors--cursorName--i776D",h="multiplayer_cursors--cursorNameSmall--Cy-9n",E="multiplayer_cursors--multiplayerHighFiveCenteringContainer--knxoP",y="multiplayer_cursors--multiplayerPointerForHighFive--hpa2g",b="multiplayer_cursors--multiplayerPointerForHighFiveHidden--V-bo-",v="multiplayer_cursors--chatBackground--hGJJf"},982386:(e,t,n)=>{n.d(t,{F:()=>r,HR:()=>s,Io:()=>i,Pn:()=>d,V_:()=>a,dK:()=>u,nM:()=>c,rH:()=>o,sQ:()=>l,ue:()=>m});let a="on_canvas_pill--pillContainer--jvRgr",r="on_canvas_pill--centered--iOUXI",i="on_canvas_pill--pill--fSukI",l="on_canvas_pill--bottom--gwvqA",o="on_canvas_pill--node--xgavI",s="on_canvas_pill--symbol--3Kz9f",c="on_canvas_pill--row--I6QoB",d="on_canvas_pill--pillLargeBorderRadius--9uWP9",u="on_canvas_pill--pillText--ts0Xi ellipsis--ellipsis--Tjyfa",m="on_canvas_pill--iconNodeType--0xm99"},376600:(e,t,n)=>{n.d(t,{$U:()=>l,Dq:()=>y,Ed:()=>c,Gr:()=>P,KE:()=>N,LZ:()=>o,Mf:()=>D,Mp:()=>S,N1:()=>a,NM:()=>i,Nr:()=>K,Nz:()=>k,O0:()=>U,P5:()=>d,Pl:()=>C,Pz:()=>m,RE:()=>u,Sp:()=>r,VC:()=>A,VQ:()=>V,Vt:()=>T,YW:()=>I,_J:()=>x,_s:()=>s,aY:()=>_,dB:()=>M,hi:()=>O,iB:()=>b,jE:()=>B,jG:()=>L,l$:()=>p,mB:()=>F,n6:()=>g,oG:()=>h,q8:()=>H,sR:()=>w,sl:()=>v,vu:()=>f,vy:()=>G,wH:()=>E,yR:()=>R});let a="pages_panel--pagesPanel--YVSDg sf_pro--uiFontWithSFProFallback--m-p9V",r="pages_panel--pageChangesCount--ZXLpV",i="pages_panel--verticalFlexBase--7-e0s",l="pages_panel--verticalFlexContainer--9uwfT pages_panel--verticalFlexBase--7-e0s",o="pages_panel--objectPanelContent--Zy2S3",s="pages_panel--dakotaPanelContent--2Ib38",c="pages_panel--pagesPanelContent--ZGkcM pages_panel--pagesPanelContentWhiteboard--gUJEi",d="pages_panel--pagesPanelContentBottomBorder--dozDy",u="pages_panel--pagesHeaderContainer--i92Ni",m="pages_panel--pagesHeaderText--4UIwl",p="pages_panel--pagesList--GVSQw",_="pages_panel--pendingPagesList--rKp9D pages_panel--pagesList--GVSQw",g="pages_panel--pageIcon--q75aB",f="pages_panel--active--iZgxd",h="pages_panel--pageRow--7h-Lv pages_panel--pageRowBase--d4OsN",E="pages_panel--selected--bUeWb",y="pages_panel--hoverByMouse---pkjS",b="pages_panel--hoverState--FXSo2",v="pages_panel--pageRowActive--OASeZ",C="pages_panel--activePageBrand--p3348",w="pages_panel--pageRowActiveUI2--oRnDS",T="pages_panel--flipVertically--O5Tht",S="pages_panel--pageRowSvgV2--y3cIV pages_panel--pageRowSvg--lKPoU",x="pages_panel--pageRowSvgV2Unselected--zlmq5 pages_panel--pageRowSvgV2--y3cIV pages_panel--pageRowSvg--lKPoU",k="pages_panel--renameableNode--Rl1H1",N="pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa",I="pages_panel--disabledNodeText--Gar5X pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa",A="pages_panel--renameableNodeTextEnd--pdvNO pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa",O="pages_panel--renameableNodeTextEndDisabled--TLJxp pages_panel--renameableNodeTextEnd--pdvNO pages_panel--renameableNodeText--AaSCq ellipsis--ellipsis--Tjyfa",L="pages_panel--scrollContainer--aXdXr",D="pages_panel--tab--Uge5B",R="pages_panel--tabActive--BitzC pages_panel--tab--Uge5B",M="pages_panel--assetsTab--OKgP1",P="pages_panel--showAllButtonContainer--I73hV",F="pages_panel--pageRowDividerContainer--NyNS9 pages_panel--pageRowBase--d4OsN",B="pages_panel--pageRowDivider--NO0-i",U="pages_panel--pageRowDividerTitleText--uDabO",G="pages_panel--hasDividerWithTitleAbove--gd4dk",K="pages_panel--offlineContainer--M4S1E",V="pages_panel--offlineIcon--pf66o",H="pages_panel--pageRowRight--RYgWA"},501891:(e,t,n)=>{n.d(t,{$C:()=>o,$s:()=>S,AQ:()=>x,Bt:()=>h,EA:()=>m,I0:()=>c,Kg:()=>T,Ki:()=>w,LO:()=>a,MC:()=>v,Mx:()=>L,N1:()=>f,Og:()=>A,Qp:()=>i,VM:()=>C,We:()=>s,Wf:()=>O,YF:()=>l,Z0:()=>r,cZ:()=>N,iB:()=>y,l_:()=>I,me:()=>p,ns:()=>k,qw:()=>g,sK:()=>u,t4:()=>_,u$:()=>b,vF:()=>E,vS:()=>d});let a="instance_panel--panelTitleRow--TN-S6",r="instance_panel--collapsibleTitleRow--YQUPk",i="instance_panel--instanceNameContainer--DjJ1a",l="instance_panel--isInComponentPlayground--jSk5E",o="instance_panel--instanceIcon--9Rb3Q",s="instance_panel--pickerButtonText--37jAr ellipsis--ellipsis--Tjyfa",c="instance_panel--propPillContainer--uUMdd",d="instance_panel--pickerButton--aETR-",u="instance_panel--selectedPickerButton--PqYr4",m="instance_panel--sublayerPanelWithHover--jgbud",p="instance_panel--sublayerPanelMixedState--h9Vb4",_="instance_panel--chevronIcon--0j2aS",g="instance_panel--viewOnlyPickerButton--70Wl5 instance_panel--pickerButton--aETR-",f="instance_panel--selectInstanceIcon--9lKUr",h="instance_panel--ui3InstanceNameContainer--2BVOa instance_panel--instanceNameContainer--DjJ1a",E="instance_panel--instanceNameTitle--khSFz ellipsis--ellipsis--Tjyfa",y="instance_panel--ui3InstanceNameTitle--RLDS5 ellipsis--ellipsis--Tjyfa",b="instance_panel--instanceNameTitleWide--InQRA instance_panel--instanceNameTitle--khSFz ellipsis--ellipsis--Tjyfa",v="instance_panel--titleButtons--8ha4T",C="instance_panel--dropdownOption--g0g2W",w="instance_panel--restoreComponentButtonRow--zPAzH",T="instance_panel--restoreComponentButton--kkxan",S="instance_panel--missingVariantErrorBox--Dvch2",x="instance_panel--missingVariantDescription--1OogA",k="instance_panel--missingVariantButtonContainer--T5wE1",N="instance_panel--missingVariantButton--WgVP5",I="instance_panel--updateIcon--4lm0w",A="instance_panel--propsContainer--CPc3n",O="instance_panel--bubbledInstancePropSection--9PzLJ",L="instance_panel--instancePanel--QoDrU"},918061:(e,t,n)=>{n.d(t,{Df:()=>c,I0:()=>i,RK:()=>l,TQ:()=>u,UZ:()=>d,ai:()=>s,dY:()=>o,jK:()=>a,ke:()=>r});let a="layer_panel--blendMode--ze-EB",r="layer_panel--opacity--8b7LU",i="layer_panel--propPillContainer--HA1XZ",l="layer_panel--visible--O8HLY",o="layer_panel--visibleHintIcon--40eBB",s="layer_panel--chevron--UUQ0D",c="layer_panel--blendModeInput--46kUO",d="layer_panel--variableSetModeInput--SQzwi",u="layer_panel--opacityVar--wSBBb"},261579:(e,t,n)=>{n.d(t,{$6:()=>r,G:()=>d,Ig:()=>o,Z7:()=>c,cF:()=>u,l_:()=>l,mq:()=>i,nM:()=>s,o3:()=>a});let a="variable_mode_entries--variableSetName--hmoV4",r="variable_mode_entries--ui3VariableSetName--eqW9C variable_mode_entries--variableSetName--hmoV4",i="variable_mode_entries--variableSetModeSelect--P6crF",l="variable_mode_entries--updateIcon--BNz-S",o="variable_mode_entries--dropdownDescription--OQef0",s="variable_mode_entries--row--8OoWO",c="variable_mode_entries--infoIconContainer--DmUPj",d="variable_mode_entries--infoIcon--JylKl",u="variable_mode_entries--infoOption--fKiWW"},42296:(e,t,n)=>{n.d(t,{BK:()=>x,C7:()=>s,EI:()=>o,Ge:()=>_,K$:()=>u,MT:()=>R,O5:()=>E,QD:()=>N,Rt:()=>G,VV:()=>l,Vr:()=>S,Vw:()=>F,WY:()=>P,Wh:()=>a,XE:()=>p,_L:()=>c,a1:()=>v,aK:()=>A,ai:()=>O,az:()=>T,cu:()=>I,dn:()=>L,hC:()=>B,hg:()=>w,i3:()=>U,me:()=>b,qN:()=>k,qb:()=>m,qc:()=>M,r9:()=>i,rR:()=>r,ro:()=>K,wH:()=>f,ws:()=>d,yo:()=>h,yx:()=>g,zK:()=>D,zb:()=>y,zk:()=>C});let a="multiplayer_view--multiplayerView---Lf04",r="multiplayer_view--onboardingTarget--Ja9Ak",i="multiplayer_view--disabled--K9QcN",l="multiplayer_view--users--DcWtM",o="multiplayer_view--usersContainer--bzaNI",s="multiplayer_view--userIconView--XlLWC",c="multiplayer_view--userIconViewHorizontal--CRVT- multiplayer_view--userIconView--XlLWC",d="multiplayer_view--userIconAvatar--qt4Vz",u="multiplayer_view--userIconAvatarLoading--s5PPI",m="multiplayer_view--normal--xHQOT",p="multiplayer_view--avatarWithCollaborationToolsContainer--7lq5U",_="multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--Z5S16",g="multiplayer_view--fullHeightSidebarAvatarWithToolsOverridesWithOverflow--hExNS multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--Z5S16",f="multiplayer_view--selected--PrEy3",h="multiplayer_view--hovered--X1V8M",E="multiplayer_view--textAvatarContainer--SwGAW",y="multiplayer_view--overflowTextAvatar--ouAgh multiplayer_view--textAvatar--P-4wz",b="multiplayer_view--separator--d7XC2",v="multiplayer_view--overflowDropdown--5PCUX",C="multiplayer_view--multiplayerUserCount--VN79F",w="multiplayer_view--fileSeenStateSubtitle--xTYdr",T="multiplayer_view--avatarWithGroupActions--hdn0o",S="multiplayer_view--groupActions--C2jLX",x="multiplayer_view--presenterButtonAction--7CCnt",k="multiplayer_view--pointingDropdown--4CD2d",N="multiplayer_view--pointingDropdownAdditionalPaddingUI2--zc-aF",I="multiplayer_view--listBox--9RJ5F",A="multiplayer_view--listBoxNew--z88cs",O="multiplayer_view--chevron--Vn-C1",L="multiplayer_view--ui3SearchContainer--KQpDt",D="multiplayer_view--ui3SearchContainerNew--brZ7S",R="multiplayer_view--searchContainer--q6zE8",M="multiplayer_view--searchIcon--C9Aoz",P="multiplayer_view--xIconButtonContainerWrapper--wSUus",F="multiplayer_view--xIconButtonContainerNew--3CYqO",B="multiplayer_view--xIconButtonContainer--vYjh1",U="multiplayer_view--xIcon--Oq2hB",G="multiplayer_view--searchInput--f43Gp text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",K="multiplayer_view--withOverflow---4XmW"},187409:(e,t,n)=>{n.r(t),n.d(t,{activeButton:()=>o,chevron:()=>y,delightfulMenu:()=>c,disabledButton:()=>l,disabledFullHeightSidebarFlyout:()=>p,enabledButton:()=>i,flyout:()=>d,flyoutButton:()=>_,flyoutDropdownShown:()=>u,fullHeightSidebarFlyout:()=>m,fullHeightSidebarFlyoutButton:()=>f,fullHeightSidebarFlyoutChevron:()=>g,fullHeightSidebarFlyoutDropdownShown:()=>h,grid:()=>E,largeDisplayDropdown:()=>b,pointingDropdown:()=>s,selected:()=>r,updatesBadge:()=>a});let a="toolbar_styles--updatesBadge--NbkFp",r="toolbar_styles--selected--zUa6K",i="toolbar_styles--enabledButton--fEwmC",l="toolbar_styles--disabledButton--wv8Iu",o="toolbar_styles--activeButton--YHzcB",s="toolbar_styles--pointingDropdown--6rrL3",c="toolbar_styles--delightfulMenu--A6bY7",d="toolbar_styles--flyout--S3qfl",u="toolbar_styles--flyoutDropdownShown--WU8JV",m="toolbar_styles--fullHeightSidebarFlyout--d9LJ3 toolbar_styles--flyout--S3qfl",p="toolbar_styles--disabledFullHeightSidebarFlyout--hBPDA",_="toolbar_styles--flyoutButton--lyOUg",g="toolbar_styles--fullHeightSidebarFlyoutChevron--aENEg",f="toolbar_styles--fullHeightSidebarFlyoutButton--dU4LR toolbar_styles--flyout--S3qfl",h="toolbar_styles--fullHeightSidebarFlyoutDropdownShown--rT9w3 toolbar_styles--flyoutDropdownShown--WU8JV",E="toolbar_styles--grid--M8sVG",y="toolbar_styles--chevron--3YF14",b="toolbar_styles--largeDisplayDropdown--yFQ1V"},16112:(e,t,n)=>{n.d(t,{AQ:()=>_,Er:()=>I,Ex:()=>g,GC:()=>o,Jg:()=>r,KE:()=>a,Lq:()=>i,Pf:()=>b,R:()=>l,TE:()=>T,U:()=>h,V3:()=>m,WT:()=>E,XA:()=>d,Xs:()=>p,YT:()=>A,Zm:()=>S,by:()=>N,dM:()=>v,e1:()=>k,eh:()=>x,gb:()=>f,gt:()=>c,l3:()=>s,q3:()=>y,uX:()=>C,yM:()=>u,yT:()=>w});let a="toolbar_view--toolbar--RuPI6",r="toolbar_view--figjamBorder--KF3VY",i="toolbar_view--loading--fU68L",l="toolbar_view--hidden--eM-fR",o="toolbar_view--buttonGroup--UA9-B",s="toolbar_view--leftButtonGroup--qkjBh",c="toolbar_view--rightButtonGroup--weV86",d="toolbar_view--overviewRightButtonGroup--nPoWM",u="toolbar_view--hideTools--No4T8",m="toolbar_view--centerButtonGroup--kxpQA",p="toolbar_view--cachedFilenameViewSubtree--JoP3h",_="toolbar_view--menuButton--nAIP3",g="toolbar_view--unclickableMenuButtonUI3--Zzd1A",f="toolbar_view--iconButton--1MUm6",h="toolbar_view--wide--Mpb1c",E="toolbar_view--actionButtonContainer--7fDmd",y="toolbar_view--actionButtonBadge--2cmhk",b="toolbar_view--label--O5fOT ellipsis--ellipsis--Tjyfa",v="toolbar_view--textButtonContainer--17OKy",C="toolbar_view--textButton--THnFZ basic_form--primaryBtn--AU7Gy basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",w="toolbar_view--toolButtonContainer--IRGt-",T="toolbar_view--unreadDotActive--KHyuc",S="toolbar_view--unreadDot--zuWYA",x="toolbar_view--loginButton--kH7Jx",k="toolbar_view--unsavedChangesIconContainer--zEmEv",N="toolbar_view--unsavedChangesIcon--rYfws",I="toolbar_view--missingFontSvg--hHv5S",A="toolbar_view--focusModeVariantsToggleActiveButton--VqPiO"},476066:(e,t,n)=>{n.d(t,{NI:()=>o,_Z:()=>r,h$:()=>a,hF:()=>i,mL:()=>l});let a="variable_create_modal--staticTitle--HS1IC",r="variable_create_modal--textInput--234SQ raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",i="variable_create_modal--input--d-tVA",l="variable_create_modal--variableSetSelectChevron--larcU",o="variable_create_modal--variableSetSelectInput--YUE3H"},908198:(e,t,n)=>{n.d(t,{BF:()=>i,_V:()=>a,kV:()=>r});let a="dock--dock--A6jIs",r="dock--dockDesign--kbym5 dock--dock--A6jIs",i="dock--dockLeft--fAueV dock--dock--A6jIs"},242979:(e,t,n)=>{n.d(t,{Cb:()=>r,M4:()=>l,Q$:()=>i,Q0:()=>c,_d:()=>u,iZ:()=>s,k9:()=>o,mT:()=>d,qW:()=>a});let a="inline_preview_device_frames--previewDeviceContainer--fNvYG",r="inline_preview_device_frames--fillGapsBetweenDeviceAndIframe--DuNNK",i="inline_preview_device_frames--hideCornersForOverlyRoundedDevice--Rn1BM",l="inline_preview_device_frames--previewDeviceImage--pSzed",o="inline_preview_device_frames--previewDeviceHeader--KHpCv",s="inline_preview_device_frames--deviceFrameHitTargetSvg--w7930",c="inline_preview_device_frames--rotatedHorizontal--5yjwl",d="inline_preview_device_frames--positionRotatedHorizontalDeviceFrame--mPJzu",u="inline_preview_device_frames--positionRotatedHorizontalDeviceFrameHitTarget--zmylC"},802161:(e,t,n)=>{n.d(t,{CN:()=>s,FO:()=>c,KW:()=>a,VR:()=>i,Wc:()=>r,Xt:()=>u,aq:()=>o,cD:()=>d,dS:()=>l});let a="inline_preview_modal--prototypeModalTitle--Y5Zqk",r="inline_preview_modal--iframeContainer--ylTh5",i="inline_preview_modal--previewIframe--RpUIN",l="inline_preview_modal--disablePointerEvents--sc1Yf",o="inline_preview_modal--previewModal--FO-5S",s="inline_preview_modal--previewModalSlides--0PFWB",c="inline_preview_modal--previewModalHeader--parjV",d="inline_preview_modal--previewFocused--DQTOg",u="inline_preview_modal--previewNotFocused--cr3Ii"},847768:(e,t,n)=>{n.d(t,{AL:()=>x,BI:()=>_,Cu:()=>E,DL:()=>c,FH:()=>S,Fp:()=>a,G7:()=>f,Hl:()=>r,LH:()=>v,MO:()=>p,Nn:()=>k,UD:()=>h,VQ:()=>b,Vs:()=>m,YM:()=>w,cJ:()=>u,e6:()=>d,ev:()=>C,hv:()=>y,j7:()=>i,ko:()=>o,nP:()=>l,vO:()=>s,xn:()=>T,yH:()=>g});let a="voice_users--voiceParticipantAvatar--7mhMG",r="voice_users--overflowRow--dyDR2",i="voice_users--nameAndSuffixContainer--GGoKj",l="voice_users--flexContainer--bWLmT",o="voice_users--flexLeftContainer--EVDRS",s="voice_users--flexRightContainer--Su6EL",c="voice_users--voiceParticipantName--MPxav text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",d="voice_users--participantStatus--cnVtZ",u="voice_users--participantRowOldPadding--96Ig5",m="voice_users--participantRowNewPadding--b0v2c",p="voice_users--participantRow--D4Yar",_="voice_users--hoverable--tq5aE",g="voice_users--containsCursor--Wx6C4",f="voice_users--secondaryMenuIconButtonContainer--aAh8o",h="voice_users--showSecondaryDropdownOnHover--AWGE6",E="voice_users--currentUserHeaderRow--Jiv6z",y="voice_users--secondaryActionsMenuButton--2emFq",b="voice_users--secondaryActionsMenuButtonActive--QoLJK",v="voice_users--multiplayerUserView--7nAcD",C="voice_users--voiceUsersWrapper--83FhS",w="voice_users--voiceUsersOverflowScrollingContainer--KXSUW",T="voice_users--userSuffix--2OgbZ text--fontPos11--2LvXf text--_fontBase--QdLsd",S="voice_users--userSuffixNew--husrg text--fontPos11--2LvXf text--_fontBase--QdLsd",x="voice_users--voiceUserHeadphonesIcon--wLuPW",k="voice_users--mutedContainer--JL7uZ"},683568:(e,t,n)=>{n.d(t,{H:()=>a});let a="0.5s"},236817:(e,t,n)=>{function a({apiSource:e,template:t,nodeTreeToInject:n,instanceTemplates:a,inlineInstancesEnabled:r,breakInTemplateExecution:i}){return`try {

  ${function(e,t,n,a){let r=JSON.stringify(t),i=e.replace("const __FIGMA_CODE_CONNECT_INLINE_INSTANCES_ENABLED = false",`const __FIGMA_CODE_CONNECT_INLINE_INSTANCES_ENABLED = ${a}`);return i=t?i.replace("const __FIGMA_CODE_CONNECT_SCENE_GRAPH = null",`const __FIGMA_CODE_CONNECT_SCENE_GRAPH = ${r}`):i.replace("const sceneGraph = __FIGMA_CODE_CONNECT_SCENE_GRAPH;",""),i=n?i.replace("const __FIGMA_CODE_CONNECT_INSTANCE_TEMPLATES = {}",`const __FIGMA_CODE_CONNECT_INSTANCE_TEMPLATES = {
        ${Object.entries(n).map(([e,t])=>`"${e}": ${t},`).join("\n")}
      }`):i.replace("const instanceTemplates = __FIGMA_CODE_CONNECT_INSTANCE_TEMPLATES;","")}(e,n,a,r)}

  const require = __FIGMA_CODE_CONNECT_REQUIRE
  const data = function() {
    ${i?"debugger;\n":""}${t.replace("export default","return")}
  }();

  return {
    result: 'SUCCESS',
    data
  }
} catch (e) {
  return {
    result: 'ERROR',
    data: {
      message: e.message,
      error: e.errorObject,
    },
  }
}`}function r({apiSource:e,template:t,nodeTreeToInject:n,instanceFigmadocs:r,inlineInstancesEnabled:i,breakInTemplateExecution:l,getInstanceFigmadocFromJSON:o}){let s={};if(i){let t=[...n.children];for(;t.length>0;){let n=t.pop();if(n&&"INSTANCE"===n.type){let{guid:c,key:d}=n,u=o(r?.[`key-${d}`],c);if(u&&u.templateData.nestable){let t="function(sceneGraph, instanceTemplates) {"+a({apiSource:e,template:u.template,inlineInstancesEnabled:i,breakInTemplateExecution:l})+"}";s[c]=t}for(let e of n.children)t.push(e)}}}return a({apiSource:e,template:t,nodeTreeToInject:n,instanceTemplates:s,inlineInstancesEnabled:i,breakInTemplateExecution:l})}n.d(t,{w:()=>r})},306842:(e,t,n)=>{n.d(t,{D:()=>a});function a(e,t){return`<!DOCTYPE html>
<html>
  <head>
    <!-- CSP that prevents any HTTP requests or form actions -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'none'; form-action 'none'; script-src 'unsafe-inline' 'unsafe-eval';">
    <script nonce="${e}">
      // Function to send a message to the parent window
      sendPostMessage = function(message) {
        parent.postMessage(message, '*');
      }

      window.addEventListener('message', function(event) {
        // Ignore the message if it's not from the expected origin
        if (event.origin !== '${t}') {
            console.error(\`ERROR: Received message from unexpected origin \${event.origin}\`);
            return;
        }

        if (event.data.type !== 'EVAL') {
          console.error(\`ERROR: Received message with unexpected type \${event.data.type}\`);
          return;
        }

        try {
          const result = new Function(event.data.data)();

          // Send a message back to the parent window
          sendPostMessage({ type: 'EVAL_RESPONSE', data: result });
        } catch (e) {
          sendPostMessage({ 
            type: 'EVAL_RESPONSE', data: {
              result: 'ERROR',
              error: e.toString(),
              data: {
                message: e.toString(),
                error: {
                  type: 'TEMPLATE_EXECUTION_ERROR'
                }
              }
            } 
          });
        }
      }, false);

      // Let the parent know that the iframe is ready to receive messages
      sendPostMessage({ type: 'IFRAME_READY' });
    </script>
  </head>
</html>`}},114950:(e,t,n)=>{n.d(t,{N:()=>y,c:()=>h});var a=n(411855),r=n(236817),i=n(675678),l=n(587670),o=n(966712),s=n(38580),c=n(374626),d=n(776621),u=n(239349),m=n(29680),p=n(335682),_=n(37112),g=n(371399);let f=n(798305),h=(0,s.eU)(!1);function E(e,t,n){let a;let r=n.get(t.symbolId);if(!r){(0,d.$D)(i.FigmaTeam.DEVELOPER_TOOLS,Error("Cant find backing component of parent node "+t.symbolId));return}let l=n.developerFriendlyIdFromGuid(e.guid);return(0,_.ph)(r,n,t=>{if(t.type===e.type&&l.endsWith(`;${t.guid}`))return a=t.name,_.Bn.Stop},!0),a}function y(e,t,n){let i=(0,u.VW)(),s=(0,m.eY)(),d=(0,m.T3)(),y=l.glU.getPlaygroundNodeData();n&&(i=(s=d).get(y?.playgroundGUID??""));let b=!!(0,o.kc)().dt_code_connect_inline_instances,v=(0,c.md)(h),C=(0,p.tS)(),w=(0,p._G)(),T=(0,a.useMemo)(()=>{if(!i||!C)return null;let e="SYMBOL"===i.type?i.guid:i.symbolId,t={key:(0,_.Gl)(i,s,C,w)??void 0,type:"INSTANCE",name:i.name,guid:i.guid,symbolId:e,properties:(0,_.Ji)(i),children:[]};for(let e of i.visibleChildren){let n=s.get(e);n&&function e(t,n,a,r,i){let l=n;if("INSTANCE"===t.type){let e=E(t,n,a),o=(0,_.Gl)(t,a,r,i),s=(0,_.Ji)(t),c=n.children.push({key:o??void 0,type:"INSTANCE",name:e??t.name,guid:t.guid,symbolId:t.symbolId,properties:s,children:[]});l=n.children[c-1]}else if("TEXT"===t.type){let e=E(t,n,a);n.children.push({type:"TEXT",guid:t.guid,name:e??t.name,textContent:t.characters})}for(let n of t.visibleChildren){let t=a.get(n);t&&e(t,l,a,r,i)}}(n,t,s,C,w)}return t},[C,w,s,i]),S=(0,a.useCallback)((e,t)=>{let n=s.get(t);return n&&e?(0,_.kN)(e,n):null},[]),x=(0,a.useMemo)(()=>{if(e&&i&&T)return(0,r.w)({apiSource:f,template:e,nodeTreeToInject:T,instanceFigmadocs:t,inlineInstancesEnabled:b,breakInTemplateExecution:v,getInstanceFigmadocFromJSON:S})},[e,i,T,t,b,v,S]);return(0,g.y)(x)}},371399:(e,t,n)=>{n.d(t,{O:()=>s,y:()=>c});var a=n(411855),r=n(966712),i=n(38580),l=n(374626),o=n(306842);let s=(0,i.eU)(!1);function c(e){let[t,n]=(0,a.useState)(),i=(0,l.md)(s);return(0,a.useEffect)(()=>{if(!(0,r.kc)().dt_code_connect_js_iframe||!e){n(void 0);return}i&&console.log("Code Connect Debug: iframe JS to be evaluated:",{js:e});let t=document.createElement("iframe");function a(r){"null"===r.origin&&r.source===t.contentWindow&&("IFRAME_READY"===r.data.type?t.contentWindow?.postMessage({type:"EVAL",data:e},"*"):"EVAL_RESPONSE"===r.data.type&&(n(r.data.data),document.body.removeChild(t),window.removeEventListener("message",a)))}return t.setAttribute("style","display: none"),t.setAttribute("sandbox","allow-scripts"),t.srcdoc=(0,o.D)((0,r.Ay)().csp_nonce,window.location.origin),document.body.appendChild(t),window.addEventListener("message",a,!1),()=>{try{document.body.removeChild(t),window.removeEventListener("message",a)}catch(e){}}},[e,i]),t}},644106:(e,t,n)=>{function a(){return null}n.d(t,{M9:()=>u,Ug:()=>s,Wr:()=>r,Zx:()=>d,a8:()=>l,e4:()=>i,e_:()=>c,fy:()=>o});let r=a,i=a,l=a,o=a,s=a,c=a,d=a,u=a},763499:(e,t,n)=>{n.d(t,{E4:()=>y,J_:()=>E,FH:()=>h});var a=n(411855),r=n(587670),i=n(629019),l=n.n(i),o=n(966712),s=n(38580),c=n(374626),d=n(29680),u=n(335682),m=n(100197),p=n(601607),_=n(980150),g=n(656839),f=n(37112);let h=(0,s.eU)(new Map),E=(0,s.eU)(null);function y(){let e=(0,c.md)(g.z),t=r.Ez5.devHandoffState(),n=(0,d.eY)(),i=(0,u.tS)(),l=(0,c.md)(u._S),s=(0,m.J2)(t.codeConnectHoveredPillTlfGuid),[,p]=(0,c.fp)(E),[,_]=(0,c.fp)(h),[y,v]=a.useState([]),[C,w]=a.useState(new Map);return a.useEffect(()=>{if(e&&n){let a=function e(t,n,a,r,i){if(!t)return{instancesByGuid:new Map,instancesByTlf:new Map,instancesByTlfGroupedSiblings:new Map};let l=new Map,s=new Map,c=new Map,d=new Map,u=!0;for(let m of t.childrenNodes){let t=!1;if("INSTANCE"===m.type&&m.visible){let{backingFileKey:e,backingNodeId:c,backingLibraryKey:u}=(0,f.HX)(m.guid,n,a,i),p=m.findContainingTopLevelFrameOrSelf(),_=`${(0,o.kc)().dt_code_connect_lk_migration?u:e},${c}`;if(((0,o.kc)().dt_code_connect_lk_migration?u:e)&&c&&r.nodesWithCodeConnect.has(_)){let e;t=!0;let n=r.docsById?.[`key-${_}`];if(n)try{e=JSON.parse(JSON.parse(n)?.[0]?.figmadoc)?.[0]?.component}catch(e){}l.set(m.guid,{componentName:e,layerName:m.name,tlfGuid:p,nodeId:m.guid,node:m}),s.has(p)||s.set(p,[]),s.get(p).push({componentName:e,layerName:m.name,tlfGuid:p,nodeId:m.guid,node:m}),d.has(_)||d.set(_,[]),d.get(_).push({componentName:e,layerName:m.name,tlfGuid:p,nodeId:m.guid,node:m})}}else u=!1;if(!t&&m.childrenNodes.length>0){let t=e(m,n,a,r,i);t.instancesByGuid.forEach((e,t)=>l.set(t,e)),t.instancesByTlf.forEach((e,t)=>{s.has(t)||s.set(t,[]),s.get(t).push(...e)}),t.instancesByTlfGroupedSiblings.forEach((e,t)=>{c.has(t)||c.set(t,[]),c.get(t).push(...e)})}}let m=t.findContainingTopLevelFrameOrSelf(),p=[...d.values()][0];if(u&&1==[...d.keys()].length&&p&&p[0]&&p.length>1){let e=p[0];c.has(m)||c.set(m,[]),c.set(m,[...c.get(m)||[],{componentName:e.componentName,layerName:e.node.name,count:p.length,tlfGuid:e.tlfGuid,nodeId:e.node.parentGuid||e.node.guid,node:e.node.parentNode||e.node}])}else d.size>0&&[...d.values()].forEach(e=>{c.has(m)||c.set(m,[]),c.set(m,[...c.get(m)||[],...e])});return{instancesByGuid:l,instancesByTlf:s,instancesByTlfGroupedSiblings:c}}(n.getCurrentPage(),n,i,e,l);p(a.instancesByGuid),_(a.instancesByTlfGroupedSiblings),w(a.instancesByTlf);let r=new Map(Array.from(a.instancesByTlf.entries()).map(([e,t])=>[e,t.length]));t.codeConnectedNodeCountByTlf.set(r)}},[e,n,i,l,p,w,_,t.codeConnectedNodeCountByTlf]),a.useEffect(()=>{s?v(C.get(s)??[]):v([])},[s,C]),a.createElement(a.Fragment,null,y.map(e=>a.createElement(b,{key:e.nodeId,nodeId:e.nodeId})))}function b({nodeId:e}){let t=(0,d.eY)(),n=t?.get(e),r=(0,p.Fk)(t=>t.get(e).absoluteBoundingBox),i=(0,_.q5)(r),o=n.absoluteBoundingBox.w*i.zoomScale,s=n.absoluteBoundingBox.h*i.zoomScale;return a.createElement("div",{className:l()("code_connect_overlay--tlfOverlay--br6XY"),style:{...i?.containerStyle,width:o,height:s}})}},424044:(e,t,n)=>{n.d(t,{B:()=>u});var a=n(411855),r=n(587670),i=n(256975),l=n(617453),o=n(187882),s=n(453856),c=n(412371),d=n(964881);function u(){let e=(0,l.dP)(),t=(0,i._I)(),n=(0,d.l7)(),u=(0,o.n0)(),m=(0,c.K)();return a.createElement(s.yD,{recordingKey:"pagesPanel",isReadOnly:!0,width:e,pagesList:u,hasTeamLibraryUpdates:!1,activeTab:r.xae.LAYERS,showTabs:t,disableCollapsing:!t,isDevHandoff:!0,isDevHandoffOverview:n,isComparingChanges:!1,onPageContextMenu:m,ignoreVerticalFlex:!0})}},626217:(e,t,n)=>{n.d(t,{i:()=>s,s:()=>o});var a=n(587670),r=n(794272),i=n(964881),l=n(227944);function o(e=!0){let t=(0,l.Ku)(["add-selection-ready-status","remove-selection-status"]);return t["add-selection-ready-status"]||t["remove-selection-status"]&&!e}function s(e){let t=(0,r.R)(e=>e.mirror.appModel.activeCanvasEditModeType),n=(0,i.l7)();return!!e&&(t===a.m1T.DEV_HANDOFF||t===a.m1T.DEV_HANDOFF_HISTORY||n)&&(e.isFrame||e.isSymbol||e.isSection)}},143922:(e,t,n)=>{n.d(t,{Xn:()=>b,dU:()=>C,xY:()=>v});var a=n(411855),r=n(188507),i=n(203264),l=n(776250),o=n(344780),s=n(939683),c=n(374626),d=n(666930),u=n(239349),m=n(381618),p=n(662275),_=n(29680),g=n(335682),f=n(860178),h=n(118335),E=n(32067),y=n(754369);function b(e){let t=(0,E.VW)(),n=(0,u.mJ)(e),{singleBackingSymbol:i}=(0,y.$)([e??""]),s=(0,r.wA)();return a.useCallback(()=>{n&&i&&(o.sn.reset("dev_handoff.view_history",n.guid),o.sn.start("dev_handoff.view_history",{key:n.guid}),(0,l.sx)("Diff Modal Compare Changes Clicked",{nodeId:n.guid,mainComponentNodeId:i.guid,origin:"cc_overrides"}),s(p.to({type:h.ku,data:{changeNodeId:n.guid,basisNodeId:i.guid,initialSelectedNodeId:t?.guid&&t?.guid!==n.guid?t.guid:void 0,isComparingOverrides:!0}})))},[s,t,n,i])}function v(e){let t=(0,d.wS)(),n=(0,u.uQ)(),i=(0,r.wA)(),l=(0,s.U)();return a.useCallback(()=>{n&&"loaded"===t.status&&(l("Diff Modal Compare Changes Clicked",{nodeId:n,origin:"cc_detached_component"}),o.sn.reset("dev_handoff.view_history",n),o.sn.start("dev_handoff.view_history",{key:n}),i(p.to({type:h.jo,data:{nodeId:n,detachedInfoStatus:t,origin:e}})))},[n,t,l,i,e])}function C(e,t){let n=f.iZ()?.id,s=E.VW()?.name.trim(),d=(0,g.tS)(),u=(0,r.wA)(),y=(0,c.md)(m.d),b=(0,_.eY)();return a.useCallback(()=>{if(o.sn.reset("dev_handoff.view_history",e||void 0),o.sn.start("dev_handoff.view_history",{key:e||void 0}),(0,l.sx)("Diff Modal Compare Changes Clicked",{userId:n,fileKey:d,frameId:e,entrypoint:"lego_layer",analyticsEventOrigin:t}),e){let t=(0,i.BJ)(b,e,!0);if(t){let n=t.lastEditedAt;y[e]=new Date(n),c.zl.set(m.d,{...y})}}u(p.to({type:h.EH,data:{nodeId:e,layerName:s}}))},[t,u,d,e,s,b,y,n])}},838519:(e,t,n)=>{n.d(t,{b:()=>I});var a=n(411855),r=n(188507),i=n(75395),l=n(504440),o=n(615925),s=n(629019),c=n.n(s),d=n(799569),u=n(46481),m=n(299986),p=n(939863),_=n(409272),g=n(970516),f=n(677664),h=n(662275),E=n(259927),y=n(498606),b=n(237870),v=n(488578),C=n(128909),w=n(522157),T=(e=>(e[e.REACT=0]="REACT",e[e.SWIFTUI=1]="SWIFTUI",e[e.COMPOSE=2]="COMPOSE",e))(T||{});function S({language:e}){switch(e){case 0:return a.createElement(x,null);case 1:return a.createElement(k,null);case 2:return a.createElement(N,null);default:return null}}function x(){let e=(0,r.wA)();return a.createElement(a.Fragment,null,a.createElement("div",{className:C.DD},(0,p.t)("dev_handoff.code.lang_react")),a.createElement("div",{className:C.gY}," ",a.createElement("div",{className:C.YN},a.createElement("div",{className:C.v_},"1")),a.createElement("div",{className:C.M7},a.createElement("div",{className:C.uw},(0,p.tx)("dev_handoff.code_connect.modal_install_package")),a.createElement("div",{className:C.G5},a.createElement("div",{className:C.jt},"npm install @figma/code-connect"),a.createElement("div",{className:C.cL},a.createElement(_.rZ,{"aria-label":(0,p.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"npm install @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,p.t)("inspect_panel.copy"),"data-tooltip-type":y.Ib.TEXT},source:"code connect",title:"react-step1"},a.createElement(u.U,{svg:w.A},a.createElement(o.X,null))))))),a.createElement("div",{className:C.gY}," ",a.createElement("div",{className:C.YN},a.createElement("div",{className:C.v_},"2")),a.createElement("div",{className:C.M7},a.createElement("div",{className:C.uw},(0,p.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:C.G5},a.createElement("div",{className:C.jt},"npx figma connect"),a.createElement("div",{className:C.cL},a.createElement(_.rZ,{"aria-label":(0,p.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"npx figma connect"})),htmlAttributes:{"data-tooltip":(0,p.t)("inspect_panel.copy"),"data-tooltip-type":y.Ib.TEXT},source:"code connect",title:"react-step2"},a.createElement(u.U,{svg:w.A},a.createElement(o.X,null))))))),a.createElement("div",{className:C.gY}," ",a.createElement("div",{className:C.YN},a.createElement("div",{className:C.v_},"3")),a.createElement("div",{className:C.M7},a.createElement("div",{className:C.uw},(0,p.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:C.G5},a.createElement("div",{className:C.jt},"npx figma connect publish "),a.createElement("div",{className:C.cL},a.createElement(_.rZ,{"aria-label":(0,p.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"npx figma connect publish"})),htmlAttributes:{"data-tooltip":(0,p.t)("inspect_panel.copy"),"data-tooltip-type":y.Ib.TEXT},source:"code connect",title:"react-step3"},a.createElement(u.U,{svg:w.A},a.createElement(o.X,null))))))))}function k(){let e=(0,r.wA)();return a.createElement(a.Fragment,null,a.createElement("div",{className:C.DD},(0,p.t)("dev_handoff.code.lang_swiftui")),a.createElement("div",{className:C.gY}," ",a.createElement("div",{className:C.YN},a.createElement("div",{className:C.v_},"1")),a.createElement("div",{className:C.M7},a.createElement("div",{className:C.uw},(0,p.tx)("dev_handoff.code_connect.modal_install")),a.createElement("div",{className:C.G5},a.createElement("div",{className:C.jt},"npm install -g @figma/code-connect"),a.createElement("div",{className:C.fq},a.createElement(_.rZ,{"aria-label":(0,p.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"npm install -g @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,p.t)("inspect_panel.copy"),"data-tooltip-type":y.Ib.TEXT},source:"code connect",title:"swift-step1"},a.createElement(u.U,{svg:w.A},a.createElement(o.X,null))))))),a.createElement("div",{className:C.gY}," ",a.createElement("div",{className:C.YN},a.createElement("div",{className:C.v_},"2")),a.createElement("div",{className:C.M7},a.createElement("div",{className:C.uw},(0,p.tx)("dev_handoff.code_connect.swift.add_snippet")),a.createElement("div",{className:C.G5},a.createElement("div",{className:C.as},'dependencies: [\n\u2003\u2003...,\n\u2003\u2003.package(url: "https://github.com/figma/code-connect", from: "1.0.0"),\n]'),a.createElement("div",{className:C.fq},a.createElement(_.rZ,{"aria-label":(0,p.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:`dependencies: [
		...,
		.package(url:"https://github.com/figma/code-connect", from: "1.0.0"),
]`,ignoreLineBreaks:!1})),htmlAttributes:{"data-tooltip":(0,p.t)("inspect_panel.copy"),"data-tooltip-type":y.Ib.TEXT},source:"code connect",title:"swift-step2"},a.createElement(u.U,{svg:w.A},a.createElement(o.X,null))))))),a.createElement("div",{className:C.gY}," ",a.createElement("div",{className:C.YN},a.createElement("div",{className:C.v_},"3")),a.createElement("div",{className:C.M7},a.createElement("div",{className:C.uw},(0,p.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:C.G5},a.createElement("div",{className:C.jt},'figma connect create "<url_to_node>"'),a.createElement("div",{className:C.cL},a.createElement(_.rZ,{"aria-label":(0,p.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"figma connect create"})),htmlAttributes:{"data-tooltip":(0,p.t)("inspect_panel.copy"),"data-tooltip-type":y.Ib.TEXT},source:"code connect",title:"swift-step3"},a.createElement(u.U,{svg:w.A},a.createElement(o.X,null))))))),a.createElement("div",{className:C.gY}," ",a.createElement("div",{className:C.YN},a.createElement("div",{className:C.v_},"4")),a.createElement("div",{className:C.M7},a.createElement("div",{className:C.uw},(0,p.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:C.G5},a.createElement("div",null,"figma connect publish "),a.createElement("div",{className:C.cL},a.createElement(_.rZ,{"aria-label":(0,p.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"figma connect publish"})),htmlAttributes:{"data-tooltip":(0,p.t)("inspect_panel.copy"),"data-tooltip-type":y.Ib.TEXT},source:"code connect",title:"swift-step4"},a.createElement(u.U,{svg:w.A},a.createElement(o.X,null))))))))}function N(){let e=(0,r.wA)();return a.createElement(a.Fragment,null,a.createElement("div",{className:C.DD},(0,p.t)("dev_handoff.code.lang_compose")),a.createElement("div",{className:C.gY}," ",a.createElement("div",{className:C.YN},a.createElement("div",{className:C.v_},"1")),a.createElement("div",{className:C.M7},a.createElement("div",{className:C.uw},(0,p.tx)("dev_handoff.code_connect.modal_install")),a.createElement("div",{className:C.G5},a.createElement("div",{className:C.jt},"npm install -g @figma/code-connect"),a.createElement("div",{className:C.fq},a.createElement(_.rZ,{"aria-label":(0,p.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"npm install -g @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,p.t)("inspect_panel.copy"),"data-tooltip-type":y.Ib.TEXT},source:"code connect",title:"compose-step1"},a.createElement(u.U,{svg:w.A},a.createElement(o.X,null))))))),a.createElement("div",{className:C.gY}," ",a.createElement("div",{className:C.YN},a.createElement("div",{className:C.v_},"2")),a.createElement("div",{className:C.M7},a.createElement("div",{className:C.uw},(0,p.tx)("dev_handoff.code_connect.compose.add_plugin_snippet")),a.createElement("div",{className:C.G5},a.createElement("div",{className:C.as},'plugins { \n\u2003\u2003...\n\u2003\u2003id("com.figma.code.connect") version "1.+"\n} \n\ndependencies { \n\u2003\u2003...\n\u2003\u2003implementation("com.figma.code.connect:plugin:1.+")\n}'),a.createElement("div",{className:C.fq},a.createElement(_.rZ,{"aria-label":(0,p.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:`plugins {
		...
		id("com.figma.code.connect") version "1.+"
}

dependencies {
		...
		implementation("com.figma.code.connect:plugin:1.+")
}`,ignoreLineBreaks:!1})),htmlAttributes:{"data-tooltip":(0,p.t)("inspect_panel.copy"),"data-tooltip-type":y.Ib.TEXT},source:"code connect",title:"compose-step2"},a.createElement(u.U,{svg:w.A},a.createElement(o.X,null))))))),a.createElement("div",{className:C.gY}," ",a.createElement("div",{className:C.YN},a.createElement("div",{className:C.v_},"3")),a.createElement("div",{className:C.M7},a.createElement("div",{className:C.uw},(0,p.tx)("dev_handoff.code_connect.modal_run_command")),a.createElement("div",{className:C.G5},a.createElement("div",{className:C.jt},'figma connect create "<url_to_node>"'),a.createElement("div",{className:C.cL},a.createElement(_.rZ,{"aria-label":(0,p.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"figma connect create"})),htmlAttributes:{"data-tooltip":(0,p.t)("inspect_panel.copy"),"data-tooltip-type":y.Ib.TEXT},source:"code connect",title:"compose-step3"},a.createElement(u.U,{svg:w.A},a.createElement(o.X,null))))))),a.createElement("div",{className:C.gY}," ",a.createElement("div",{className:C.YN},a.createElement("div",{className:C.v_},"4")),a.createElement("div",{className:C.M7},a.createElement("div",{className:C.uw},(0,p.tx)("dev_handoff.code_connect.modal_publish")),a.createElement("div",{className:C.G5},a.createElement("div",null,"figma connect publish "),a.createElement("div",{className:C.cL},a.createElement(_.rZ,{"aria-label":(0,p.t)("inspect_panel.copy"),onClick:()=>e(g.lW({stringToCopy:"figma connect publish"})),htmlAttributes:{"data-tooltip":(0,p.t)("inspect_panel.copy"),"data-tooltip-type":y.Ib.TEXT},source:"code connect",title:"compose-step4"},a.createElement(u.U,{svg:w.A},a.createElement(o.X,null))))))))}let I=(0,b.Ju)(function(){let[e,t]=(0,a.useState)(0),n=(0,r.wA)(),o=()=>{n(h.Lo())};return a.createElement(v.Nb,{className:C.yl,hide:o,size:800,"data-testid":"upgrade_choose_plan_modal"},a.createElement("div",{className:c()(C.kL,E.Dm),tabIndex:-1},a.createElement(d.Jn,{className:C.b,onClick:o}),a.createElement("div",{className:C.pz},a.createElement("h1",{className:C.tb},(0,p.tx)("dev_handoff.code_connect.title")),a.createElement("h2",{className:C.J$},(0,p.tx)("dev_handoff.code_connect.modal_text")),a.createElement(i.E,{className:0===e?C.xR:C.s6,onClick:()=>t(0)},(0,p.t)("dev_handoff.code.lang_react")),a.createElement(i.E,{className:1===e?C.xR:C.s6,onClick:()=>t(1)},(0,p.t)("dev_handoff.code.lang_swiftui")),a.createElement(i.E,{className:2===e?C.xR:C.s6,onClick:()=>t(2)},(0,p.t)("dev_handoff.code.lang_compose")),a.createElement("div",{className:C.jH}),a.createElement("span",{className:C.Iw},a.createElement(l.IK,{variant:"primary",onClick:()=>n((0,f.RK)({rawInput:"https://github.com/figma/code-connect"})),iconPrefix:a.createElement("div",{className:C.F9},a.createElement(m.f,null))},(0,p.tx)("dev_handoff.code_connect.modal_github_button")))),a.createElement("div",{className:C.Qs},a.createElement(S,{language:e}))))},"CodeConnectModal",b.ZU.YES)},760834:(e,t,n)=>{n.d(t,{Qd:()=>ed,f_:()=>er,b0:()=>eo,vi:()=>es,hK:()=>ee,yT:()=>el,MW:()=>ec});var a=n(411855),r=n(188507),i=n(675678),l=n(132361),o=n(971612),s=n(243742),c=n(587670),d=n(776250),u=n(181912),m=n(966712),p=n(374626),_=n(38580),g=n(860601),f=n(776621),h=n(286640),E=n(281381),y=n(449124),b=n(163023),v=n(299986),C=n(939863),w=n(175290),T=n(87816),S=n(114950),x=n(409272),k=n(308977),N=n(239349),I=n(320063),A=n(358145),O=n(151283),L=n(807197),D=n(662275),R=n(843495),M=n(441088),P=n(318812),F=n(29680),B=n(335682),U=n(860178),G=n(234945),K=n(498606),V=n(788612),H=n(832637);n(7959);var z=n(538697),W=n(503457);let j=n(277e3).A.createLazyComponent(()=>Promise.all([n.e(3181),n.e(7199)]).then(n.bind(n,668126)).then(e=>e.CodeConnectSection),{loading:()=>null,error:W.H4.NONE,componentName:"CodeConnectSection"});var $=n(37112),q=n(593400),Y=n(838519),X=n(367762),J=n(752442),Z=n(126815);let Q={Swift:"swift",TypeScript:"jsx"};function ee({height:e}){return a.createElement("div",{style:{height:e}})}function et({updatedAt:e}){let t=a.useMemo(()=>e?(0,u.A)(e).fromNow():"",[e]);return a.createElement(E.Ex,{color:E.zE.DEFAULT,text:(0,C.t)("dev_handoff.figmadocs.connected"),icon:a.createElement(l.x,null),className:X.Xi,dataTooltipType:K.Ib.TEXT,dataTooltip:(0,C.t)("dev_handoff.figmadocs.connected_last_published_at",{lastPublishedAt:t}),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50})}function en(e){try{let{url:t}=e,n=new URL(t).pathname.split("/"),r=n.indexOf("blob");-1===r&&(r=n.indexOf("tree"));let i=n.slice(r+2).join("/"),l=i.length>0?i:n[n.length-1];return a.createElement("span",{className:X.Av},l)}catch(e){return null}}function ea(){let e=(0,r.wA)();return a.createElement("div",{className:X.bd},a.createElement("div",{className:X.C},(0,C.t)("dev_handoff.code_connect.title")),a.createElement("div",{className:X.EY,onClick:()=>{e(D.to({type:Y.b}))},role:"none"},(0,C.t)("dev_handoff.code_connect.entrypoint_text")))}function er({doc:e,updatedAt:t,additionalHeaderActions:n,instanceFigmadocs:r,isPlayground:l,onInstancePillClick:o}){let s=(0,U.iZ)(),u=(0,B.q5)(),p=(0,N.VW)(),_=(0,F.eY)(),{backingFileKey:g,backingNodeId:h,backingComponentKey:E,backingStateGroupKey:b,backingLibraryKey:k}=(0,$.HX)(p?.guid??"",_,u?.key??null,null),L=(0,F.T3)();l&&(_=L);let D=(0,S.N)((0,m.kc)().dt_code_connect_js_templates?e.template:void 0,r,l);!function({backingFileKey:e,result:t,backingComponentKey:n,backingStateGroupKey:r}){let i=(0,O.X)(e);(0,I.h)(()=>{d.az.trackDefinedEvent("code_connect.code_connect_rendered",{partnerType:i,componentKey:n,stateGroupKey:r})});let l=t?.result==="ERROR"&&t?.data?.error?t.data.error.type:null,o=(0,A.ZC)(l);a.useEffect(()=>{l!==o&&l&&d.az.trackDefinedEvent("code_connect.code_connect_error",{partnerType:i,errorType:l,componentKey:n,stateGroupKey:r})},[l,o,i,n,r])}({backingFileKey:g,result:D,backingComponentKey:E,backingStateGroupKey:b});let R=a.useCallback(e=>{o?o(e):c.w3z.selectAndPanToNode(e)},[o]),M=a.useCallback(()=>{(0,d.sx)("code_connect_clicked",{user_id:s?.id,is_playground:l,node_id:h,file_key:g,...u?.key===g?{file_team_id:u?.teamId,file_org_id:u?.parentOrgId}:{},label:e.label,component_key:E,state_group_key:b,library_key:k})},[s?.id,l,h,g,u?.key,u?.teamId,u?.parentOrgId,e.label,E,b,k]);if((0,m.kc)().dt_code_connect_js_templates){if(!D)return null;if(D?.result==="SUCCESS"){let{code:i,language:o,pills:s}=(0,T.A)(D,_),c=e.source,d=new Set([...e.templateData?.imports??[],...Object.entries(r).map(([e,t])=>t.map(e=>i.includes(`<${e.component}`)?e?.templateData?.imports??[]:[]).flat()).flat()]),u=i;if(d.size>0){if("html"===o){let e=[],t=[];d.forEach(n=>{n.startsWith("<script")?e.push(n):t.push(n)}),e.length>0&&(u=e.join("\n")+"\n\n"+u),t.length>0&&(u=`<script>${t.join("\n")}</script>

`+u)}else u=Array.from(d).join("\n")+"\n\n"+i}return a.createElement(j,{code:u,language:o,pills:s,fallback:null,errorFallback:null,reformatOnInstanceChange:l},([e,r])=>e&&a.createElement(V.VZ,{hideHeader:!0,noBorder:!0,recordingKey:"figmadoc",noPadding:!0,onClick:M},a.createElement("div",{className:X.un},a.createElement(x.yT,{collapseLongSections:!1,code:[e],section:e,sectionToCopy:r,key:e.name,copyAllActionEnabled:!1,onInstancePillClick:R,additionalHeaderActions:n,footerActions:a.createElement(a.Fragment,null,c?a.createElement("a",{href:c,target:"_blank",className:X.RF},a.createElement(v.v,{url:c}),a.createElement(en,{url:c})):null,a.createElement(w.M,null),a.createElement(et,{updatedAt:t})),type:"connected"}))))}{(0,m.b5)()&&console.error("Error evaluating Code Connect template",D);let e=D?.data.error,t=(0,C.t)("dev_handoff.figmadocs.error_unknown");e?.type==="PROPERTY_NOT_FOUND"?t=(0,C.t)("dev_handoff.figmadocs.error_property_not_found",{propertyName:e.propertyName}):e?.type==="PROPERTY_TYPE_MISMATCH"?t=(0,C.t)("dev_handoff.figmadocs.error_property_type_mismatch",{propertyName:e.propertyName,propertyType:e.expectedType??"unknown"}):e?.type==="CHILD_LAYER_NOT_FOUND"?t=(0,C.t)("dev_handoff.figmadocs.error_child_layer_not_found",{layerName:e.layerName}):(0,f.$D)(i.FigmaTeam.DEVELOPER_TOOLS,Error("Error evaluating Code Connect template"),{extra:{error:D?.data.error}});let n=(0,m.kc)().dt_code_connect_updated_error_banner?(0,C.t)("dev_handoff.figmadocs.error_title"):(0,C.t)("dev_handoff.code_connect.title");return a.createElement("div",{className:X._t},a.createElement(y.z,{variant:"danger",title:n,orientation:"vertical",iconSrc:Z.A},t))}}return a.createElement(ei,{doc:e,updatedAt:t})}function ei({doc:e,updatedAt:t}){let n=e?(0,$.bE)(e):void 0,r=Q[e.language||"default"]||"jsx",i=e.template;return e.templateData?.imports&&e.templateData.imports.length>0&&(i=[...e.templateData?.imports??[]].join("\n")+"\n\n"+i),a.createElement(j,{code:i,language:r,fallback:null,errorFallback:null},e=>e&&a.createElement(V.VZ,{hideHeader:!0,noBorder:!0,recordingKey:"figmadoc",noPadding:!0},a.createElement("div",{className:X.un},e.map(e=>a.createElement(x.yT,{code:[e],section:e,key:e.name,copyAllActionEnabled:!1,footerActions:a.createElement(a.Fragment,null,n?a.createElement("a",{href:n,target:"_blank",className:X.RF},a.createElement(v.v,{url:n}),a.createElement(en,{url:n})):null,a.createElement(w.M,null),a.createElement(et,{updatedAt:t})),type:"connected"})))))}function el(e){switch(e){case k.uz:case k.A0:return"React";case k.p:case k.Ap:return"SwiftUI";default:return}}function eo(){let e=(0,p.md)(B._S),t=(0,F.eY)(),n=(0,B.tS)(),r=(0,N.VW)(),i=[],l=r;for(;l;)(l?.type==="INSTANCE"||l?.type==="SYMBOL")&&i.push(l),l=l.parentNode;let s=i.map(a=>{let{backingFileKey:r,backingNodeId:i,backingLibraryKey:l}=(0,$.HX)(a.guid,t,n,e);return{backingFileKey:r,backingNodeId:i,nodeGuid:a.guid,nodeName:a.isState?a.parentNode?.name:a.name,backingLibraryKey:l}}),{status:c,nodesWithCodeConnect:d}=(0,q.QU)(s.map(e=>`${(0,m.kc)().dt_code_connect_lk_migration?e.backingLibraryKey:e.backingFileKey},${e.backingNodeId}`)),u="loaded"===c?d:(0,q.bf)()??new Set,{backingFileKey:_,backingNodeId:g,backingLibraryKey:f}=(0,$.HX)(r?.guid??"",t,n,e);if(u.has(`${(0,m.kc)().dt_code_connect_lk_migration?f:_},${g}`))return null;for(let{nodeName:e,nodeGuid:t,backingFileKey:n,backingNodeId:r,backingLibraryKey:i}of s)if(u.has(`${(0,m.kc)().dt_code_connect_lk_migration?i:n},${r}`))return a.createElement("div",{className:X.Vc},a.createElement("div",{role:"button",tabIndex:0,className:X.XB,onClick:()=>R.tJ([t??""])},a.createElement("div",{className:X.a},a.createElement(o.M,null),(0,C.t)("dev_handoff.code_connect.title")),a.createElement("div",{className:X.Me},e)));return null}let es="code-connect-selected-language-storage-key",ec=(0,_.eU)(!1);function ed({isPlayground:e,onInstancePillClick:t}){let n=(0,F.eY)(),i=(0,F.T3)(),l=c.glU.getPlaygroundNodeData(),o=(0,r.d4)(G.qd)[0],d=el((0,k.v4)().id),[u,_]=(0,h.Vc)(es,d);e&&(o=(0,L.n)(l.playgroundGUID,i,n)??o);let{updatedAt:f,doc:E,instanceFigmadocs:y,availableLabels:v,loaded:T,disabled:S,willHaveCodeConnect:x,isCommunityKey:N}=(0,$._3)(o,n,u,i.get(l.playgroundGUID)),I=n.get(o),A=(0,r.d4)(e=>e.userFlags.dev_mode_has_dismissed_code_connect_instance_entrypoint),O=(0,r.wA)(),R=(0,P.Um)(),B="ui3"===(0,s.DP)().version,U=(0,p.md)(ec);if(a.useEffect(()=>{U&&console.log("Code Connect Debug: Document",{doc:E})},[U,E]),e){if(!E)return null}else if(E&&"type"in E&&"snippet"===E.type)return null;else if(!E){if(x||!T||(0,M.T)())return null;if((0,m.kc)().dt_code_connect_entrypoints&&!N&&!S){if(!A&&(I?.type==="INSTANCE"||I?.type==="SYMBOL"))return a.createElement(a.Fragment,null,a.createElement(H.u,{className:X.A0,idForTests:"hintCodeConnectInstanceForFigma",userFlag:"dev_mode_has_dismissed_code_connect_instance_entrypoint",title:(0,C.t)("dev_handoff.code_connect.entrypoint_title"),iconComponent:a.createElement(b.B,{svg:J.A,className:X.lF}),hintText:(0,C.t)("dev_handoff.code_connect.entrypoint_body_text"),hintLinkText:(0,C.t)("dev_handoff.code_connect.entrypoint_text"),hintLinkOnClick:()=>{O(D.to({type:Y.b}))},hintLinkOnNewLine:!0,codeConnectTweaks:!0}),a.createElement(ee,{height:16}));if(I?.type==="SYMBOL")return a.createElement(a.Fragment,null,a.createElement(ea,null),a.createElement(ee,{height:16}))}return null}let K="figmadoc-label-select";return e&&(K+="-playground"),a.createElement(a.Fragment,null,a.createElement(er,{doc:E,updatedAt:f,instanceFigmadocs:y,onInstancePillClick:t,additionalHeaderActions:a.createElement(a.Fragment,null,a.createElement(w.M,null),a.createElement(z.l6,{className:X.NK,id:K,onChange:e=>_(e),dropdownShown:R,dispatch:O,property:E.label,formatter:{format:e=>e},dropdownWidth:B?"140px":"auto",dropdownAlignment:"right",onDropdownHidden:g.lQ},v.map(e=>a.createElement(z.c$,{key:e,value:e})))),isPlayground:e}),a.createElement(ee,{height:16}))}},693394:(e,t,n)=>{n.d(t,{kI:()=>M,kB:()=>F,JU:()=>R});var a=n(411855),r=n(188507),i=n(75395),l=n(196367),o=n(841368),s=n(587670),c=n(179220),d=n(629019),u=n.n(d),m=n(91408),p=n(38580),_=n(374626),g=n(163023),f=n(939863),h=n(239349),E=n(738269),y=n(259927),b=n(226055),v=n(29680),C=n(498606),w=n(60088),T=n(652649),S=n(786110),x=n(837746);let k="dev_handoff_layers_panel--hideCaret--JgPdQ";var N=n(949207),I=n(432023);let A=(0,m.jz)(x.KAq),O=(0,m.jz)(x.tUy);function L(e,t,n){let a=[],r=[t];for(;r.length>0;){let i=r.pop(),l=e.get(i);if(l&&(i===t||n(l)))for(let e of(a.push(i),l?.childrenGuids??[]))r.push(e)}return a}function D(e){return!!e&&e.isAlive()&&"INSTANCE"!==e.type&&!(0,S.vY)(s.w3z.getAssetInfo(e.guid),!0)}let R=(0,p.eU)([]);function M({inspectableRootNodeId:e,page:t,didSelectRow:n,hideHeader:i=!1}){let l=(0,r.wA)(),o=(0,v.eY)(),d=(0,h.uQ)(),u=(0,h.NM)(),m=e||t,[p,g]=a.useState(()=>0===s.glU.nodeStatusesOnPage(t).length||i),[f,b]=(0,_.fp)(R);a.useEffect(()=>{g(0===s.glU.nodeStatusesOnPage(t).length)},[t]);let C=a.useCallback(()=>{b(()=>[m])},[b,m]),w=a.useCallback(e=>{b(t=>[...t,...L(o,e,D)])},[o,b]),T=a.useCallback((e,t)=>b(n=>n.includes(t)?n.filter(e=>e!==t):e.altKey?[...n,t,...L(o,t,D)]:[...n,t]),[o,b]),x=a.useCallback(e=>f.includes(e),[f]),k=function(e,t){let n=(0,v.eY)();return a.useMemo(()=>{let a=[];if(t){let r=n.get(t)?.parentGuid;for(;r&&r!==e;)a.push(r),r=n.get(r)?.parentGuid}return a.push(e),a},[n,e,t])}(m,d??"");a.useEffect(()=>{b(e=>[...e,...k])},[k,b]);let N=a.useCallback((e,t)=>{e.stopPropagation(),e.preventDefault();let{clientX:n,clientY:a}=e;l(E.j7({type:y.i,data:{clientX:n,clientY:a,guid:t,expandElement:()=>w(t)}}))},[l,w]),I=(0,v.KH)(),M=a.useMemo(()=>{let t=i?[]:["header"];return p||e||u?[...t,...function e(t,n,a,r,i,l,o){let s=n.get(t);if(!s)return[];let c=t in a,d={nodeId:t,indentation:i,isSelected:c,isAncestorSelected:l,isRoot:o};if(!r(t))return[d];let u="CANVAS"===s.type,m=s.childrenGuids.flatMap(t=>e(t,n,a,r,i+(u?0:1),l||c,!1));return u?m:[d,...m]}(m,o,I,x,0,!1,!0)]:t},[e,x,p,m,o,I,u,i]),F=a.useRef(null),B=(0,c.Te)({count:M.length,getScrollElement:()=>F.current,estimateSize:e=>0!==e||i?A:O,overscan:10});return a.createElement("div",{ref:F,style:{height:"100%",overflowY:"auto",overflowX:"hidden"},"data-testid":"devHandoffLayersPanel"},a.createElement("div",{style:{height:`${B.getTotalSize()}px`,width:"100%",position:"relative"}},B.getVirtualItems().map(t=>{let r=M[t.index];return a.createElement("div",{key:t.key,style:{position:"absolute",top:0,left:0,width:"100%",height:`${t.size}px`,transform:`translateY(${t.start}px)`}},"header"===r?a.createElement(P,{forceExpanded:!!e||!!u,isExpanded:p,setIsExpanded:g,collapseAllLayers:C}):a.createElement(S.O5,{key:r.nodeId,guid:r.nodeId,toggleExpanded:T,isExpanded:x,openContextMenu:N,didSelectRow:n,indentation:r.indentation,isSelected:r.isSelected,isAncestorSelected:r.isAncestorSelected,isRoot:r.isRoot}))})))}function P({isExpanded:e,forceExpanded:t,setIsExpanded:n,collapseAllLayers:r}){let l=[{displayText:(0,f.t)("dev_handoff.layers.collapse_all_layers"),callback:()=>r()}],o=(0,b.GS)(),s=`devHandoffNodesPanel.caret.${t?"forcedExpanded":e?"expanded":"collapsed"}`;return a.createElement("div",{className:u()("dev_handoff_layers_panel--layersListHeader--gQFn- text--fontPos11--2LvXf text--_fontBase--QdLsd",{"dev_handoff_layers_panel--bottomLine--v9zno":!(e||t)&&!o})},a.createElement(i.E,{className:"dev_handoff_layers_panel--layersListHeaderButton--MlUHF",onClick:()=>!t&&n(!e),actionOnPointerDown:!0},a.createElement("div",{className:"dev_handoff_layers_panel--layersListHeaderButtonContent--qRCB5"},o&&a.createElement("span",{className:t?k:void 0,"data-testid":s},a.createElement(T.g,{isExpanded:e})),!o&&a.createElement(g.B,{className:u()("dev_handoff_layers_panel--expandCaret--2ZbrU",{[k]:t}),svg:e?N.A:I.A,dataTestId:s}),a.createElement("div",{className:"dev_handoff_layers_panel--layersTitle--sU99L text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},(0,f.tx)("dev_handoff.tag.layers")))),(e||t)&&a.createElement(F,{dropdownItems:l}))}function F({dropdownItems:e}){let{Dropdown:t,toggleDropdown:n,dropdownTargetRef:r,isDropdownShown:i}=(0,w.B)("LAYERS_PANEL_DROPDOWN");return a.createElement(a.Fragment,null,a.createElement("div",{ref:r},a.createElement(l.d,{"aria-label":(0,f.t)("dev_handoff.code.options"),toggled:i,onClick:function(e){e.stopPropagation(),n()},htmlAttributes:{"data-tooltip":(0,f.t)("dev_handoff.code.options"),"data-tooltip-type":C.Ib.TEXT}},a.createElement(o.J,null))),a.createElement(t,{items:e,showPoint:!0}))}},103339:(e,t,n)=>{n.d(t,{DK:()=>x,MO:()=>O,d8:()=>N,oD:()=>L,q9:()=>k});var a=n(411855),r=n(188507),i=n(675678),l=n(587670),o=n(776250),s=n(38580),c=n(374626),d=n(776621),u=n(572206),m=n(877432),p=n(939863),_=n(154483),g=n(666930),f=n(696673),h=n(44892),E=n(15859),y=n(927657),b=n(931770),v=n(335682),C=n(933342),w=n(234945),T=n(173454),S=(e=>(e.GENERIC="GENERIC",e.OFFLINE="OFFLINE",e.THUMBNAIL_TIMEOUT="THUMBNAIL_TIMEOUT",e))(S||{});function x(e){switch(e){case"GENERIC":return(0,p.t)("design_systems.playground.unable_to_load");case"OFFLINE":return(0,p.t)("design_systems.playground.unable_to_load_while_offline");case"THUMBNAIL_TIMEOUT":return(0,p.t)("design_systems.playground.unable_to_load_thumbnail")}}function k(e){switch(e){case"GENERIC":return(0,p.t)("design_systems.playground.unable_to_load_help_text");case"OFFLINE":return(0,p.t)("design_systems.playground.unable_to_load_while_offline_help_text");case"THUMBNAIL_TIMEOUT":return(0,p.t)("design_systems.playground.unable_to_load_thumbnail_help_hext")}}let N=(0,s.eU)(!1);function I(e){let[t,n]=a.useState(),[r,i]=a.useState(),[o,s]=a.useState(!1),[d,m]=a.useState(!1),[p,_]=a.useState(!1),[g,f]=(0,c.fp)(N),h=a.useCallback(()=>{let t=l.glU.generatePlaygroundThumbnail(e??null),a=l.glU.getPlaygroundNodeData();t.pixels?.length>0?(n({src:(0,b.Pv)(t.pixels,new u.Mi(t.width,t.height)),width:t.width/t.scale,height:t.height/t.scale}),i(a),m(!1),f(!0)):m(!0)},[f,e]),E=a.useCallback(e=>{s(e),_(!0)},[_]),{onSetPercentImagesLoaded:v,onResetTracker:C}=function(e){let[t,n]=a.useState(0),[r,i]=a.useState(0),[l,o]=a.useState(null),s=a.useCallback(()=>{n(0),i(0),o(null)},[]);return a.useEffect(()=>{function n(n,a){if(t>n&&t<a&&r<=n){let n=Date.now();(null===l||n-l>1e3)&&(o(n),i(t),e())}}n(.25,.5),n(.5,.75),n(.75,1)},[r,l,e,t]),a.useEffect(()=>{1===t&&(e(),i(1))},[e,t]),a.useMemo(()=>({onSetPercentImagesLoaded:n,onResetTracker:s}),[n,s])}(h);return a.useEffect(()=>(0,y.k)(E),[E]),a.useEffect(()=>()=>l.glU.clearPlaygroundScene(),[]),a.useEffect(()=>{p&&setTimeout(()=>{h(),_(!1)},0)},[p,_,h]),a.useMemo(()=>({setPlaygroundNodeData:i,onSetPercentImagesLoaded:v,onResetTracker:C,thumbnailData:t,playgroundNodeData:r,hasChangesToReset:o,hasThumbnailErrors:d,setHasChangesToReset:s}),[i,v,C,t,r,o,d,s])}let A=(0,_.fv)();function O({canViewPlaygroundQueryResult:e,canvasAsset:t,onLoaded:n,onError:r,thumbnailOptions:s}){let[c,u]=a.useState(t),{setPlaygroundNodeData:p,onSetPercentImagesLoaded:_,onResetTracker:g,thumbnailData:y,playgroundNodeData:b,hasChangesToReset:w,hasThumbnailErrors:S,setHasChangesToReset:x}=I(s),k=(0,v.tS)(),N=c!==t||!b||"loading"===e.status,[O,L]=a.useState(null),D=a.useCallback(()=>{l.glU.clearPlaygroundScene(),p(void 0)},[p]),R=a.useCallback(async(e=!0)=>{let n;if(t.type!==T.PW.COMPONENT&&t.type!==T.PW.STATE_GROUP&&t.type!==T.PW.MODULE){D();return}let a=Date.now();if(L(null),t.isLocal)n=null;else try{let e=h.Eo.getCanvas({canvas_url:t.canvas_url});await Promise.race([e,(0,m.fm)(100)])||(u(t),p(void 0),x(!1)),n=await e}catch(e){0===e.status?L("OFFLINE"):L("GENERIC"),D(),u(t),(0,d.$D)(i.FigmaTeam.DESIGN_SYSTEMS_ECOSYSTEM,e,{tags:{openFileKey:k,fileKey:A(t),libraryKey:t.library_key,isCommunityLibrary:(0,f.wJ)(A(t)),type:t.type}});return}let r=t.type!==T.PW.STATE_GROUP||t.isLocal?null:t.default_state_key;if(n?l.glU.setPlaygroundSceneFromBuffer(t.node_id,n,e,r,A(t)):l.glU.setPlaygroundSceneFromLocalAsset(t.node_id)){x(!1),p(l.glU.getPlaygroundNodeData()),u(t),o.az.trackDefinedEvent("playground.set_scene",{duration:Date.now()-a,assetType:t.type,isLocal:t.isLocal??!1,assetKey:(0,C.u2)(t)}),g(),(0,E.Jr)().loadAllImagesUnder(["0:0"],l.MoD.NON_ANIMATED_ONLY,"playground.initialLoad",(e,t)=>{_((t-e)/t)},l.glU.getPlaygroundScene());return}if(e){u(t),p(void 0),x(!1),setTimeout(()=>{R(!1)},50);return}L("GENERIC"),D()},[k,D,g,_,t,p,x]);return a.useEffect(()=>{"loaded"===e.status&&(e.data?R():u(t))},[e,p,t,D,R]),a.useMemo(()=>{let e=S?"THUMBNAIL_TIMEOUT":O;return!e&&N?{state:"LOADING",previousAssetData:{thumbnailData:y,hasChangesToReset:w,refetchAndResetScene:R,nodeData:b,asset:c}}:(n(),e)?(r(),{state:"ERROR",errorType:e,previousAssetData:{thumbnailData:y,hasChangesToReset:w,refetchAndResetScene:R,nodeData:b,asset:c}}):{state:"LOADED",currentAssetData:{hasChangesToReset:w,refetchAndResetScene:R,nodeData:b,thumbnailData:y,asset:c}}},[N,n,S,O,b,y,r,w,R,c])}function L(){let e=(0,r.d4)(w.AF),t=e?.guid,n=(0,g.wS)(),i="loaded"===n.status?n.result:void 0,{setPlaygroundNodeData:o,thumbnailData:s,playgroundNodeData:c,hasChangesToReset:d}=I(),u=a.useCallback(()=>{let e=!1;i?e=l.glU.setPlaygroundSceneFromDetachedInfo(i.dataComponentId,"temp-scene"===i.dataLocation):t&&(e=l.glU.setPlaygroundSceneFromSelection()),e||(l.glU.clearPlaygroundScene(),o(void 0))},[t,i,o]);return a.useEffect(()=>{u()},[u]),a.useMemo(()=>c&&s?{hasChangesToReset:d,refetchAndResetScene:u,nodeData:c,thumbnailData:s}:null,[c,s,d,u])}},722261:(e,t,n)=>{n.d(t,{b:()=>m});var a=n(411855),r=n(730371),i=n(587670),l=n(153234),o=n(939863),s=n(617453),c=n(100197),d=n(962264),u=n(564092);function m({fill:e,modes:t,recordingKey:n}){let m=(0,c.J2)((0,s.UK)().showGuids),p=Object.entries(t).map(([e,t])=>({...t,setKey:e})).filter(e=>e.modeOptions.length>1).sort((e,t)=>e.collectionName.toLocaleLowerCase().localeCompare(t.collectionName.toLocaleLowerCase()));return 0===p.length?null:a.createElement(a.Fragment,null,a.createElement("div",{className:"playground_modes_section--title--wPRzF text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,o.tx)("design_systems.playground.variable_modes_title")),p.map(t=>a.createElement(d.yj,{fill:e,key:t.setKey,onChange:e=>{e!==u.Mo&&e!==u.Yn&&((0,r.deepEquals)(t.explicitMode||t.inheritMode,e)||(e===u.Ws||e===u.UE?i.glU.setVariableModeForPlayground(t.setKey,e):i.glU.setVariableModeForPlayground(t.setKey,e.guid)))},showExplicitOnly:!1,variableSetName:t.collectionName,variableSetKey:t.setKey,modeOptions:t.modeOptions,explicitModeID:t.explicitMode,inheritedModeID:t.inheritMode,isShowingGuids:m,showInheritedModeOption:!1,recordingKey:l.Pt(n,`mode-${t.setKey}`)})))}},220747:(e,t,n)=>{n.d(t,{x:()=>f});var a=n(411855),r=n(255376),i=n(449124),l=n(29680),o=n(273226),s=n(467302),c=n(286285),d=n(721478),u=n(371623),m=n(103339);let p="playground_props_section--divider--I23uK";var _=n(132208);function g({componentProps:e,bubbledComponentId:t,productComponentGUID:n,sceneGraph:i,instanceSwapPickerInitialHeight:m,instanceSwapPickerInitialPosition:p,recordingKey:_,containerWidth:g}){let f=(0,l.T3)(),{typedPropDefsExcludingHidden:h,variantPropDefs:E,assignmentValuesByDefId:y,allStateVariantProps:b,backingStateVariantProps:v,statePropertyValues:C}=(0,s.nj)(t,e,n,f);return h.length||E.length?a.createElement(r.S,{titleClassName:"playground_props_section--bubbledPropsTitle--8SBPC",isInitiallyOpen:h.length<c.qC,title:a.createElement(d.iN,{canCollapse:!0,shouldHideButtons:!0,isInComponentPlayground:!0,instanceAndSublayerGUIDs:[t],containerWide:g===o.O2.WIDE,recordingKey:_})},a.createElement(c.tO,{typedPropDefs:h,variantPropDefs:E,assignmentValues:y,allStateVariantProps:b,backingStateVariantProps:v,statePropertyValues:C,productComponentGUID:n,propDimension:o.OE.ASSIGNMENT,guids:[t],forBubbledProps:!0,splitVariantAndTypedProps:!1,instanceSwapPickerInitialHeight:m,instanceSwapPickerInitialPosition:p,sceneGraph:i,inPlayground:!0,recordingKey:_,containerWidth:g,hideIcon:!0,entrypointForInstanceSwapPicker:u.S.InstancePickerEntrypoint.INSTANCE_SWAP_PROP_PLAYGROUND_BUBBLED})):null}function f({componentProps:e,moduleProps:t,moduleFrameData:n,label:r,playgroundGUID:d,productComponentGUID:f,sceneGraph:h,viewOnlyMode:E,instanceSwapPickerInitialHeight:y,instanceSwapPickerInitialPosition:b,recordingKey:v,containerWidth:C,errorData:w,shouldShowDividerAboveProps:T}){let S=(0,l.T3)(),x=d&&e,{typedPropDefsExcludingHidden:k,variantPropDefs:N,assignmentValuesByDefId:I,allStateVariantProps:A,backingStateVariantProps:O,statePropertyValues:L}=(0,s.nj)(d??"",e??{},f,S),D=a.useMemo(()=>{if(!x)return[];let a=e[d]?.bubbledNestedInstanceGUIDs;if(a)return a;let r=t?.[d]?.bubbledNestedInstanceGUIDs;if(r)return r;if(n?.selectedFrameGUID){let e=t?.[n.selectedFrameGUID]?.bubbledNestedInstanceGUIDs;if(e)return e}return[]},[e,x,n,t,d]);return w?w.shouldHideError?null:a.createElement(a.Fragment,null,a.createElement("div",{className:p}),a.createElement("div",{className:"playground_props_section--errorBannerContainer--d3nQO"},a.createElement(i.z,{orientation:"vertical",iconSrc:_.A,onClose:()=>w.setShouldHideError(!0),variant:"warning",title:(0,m.DK)(w.errorType)},(0,m.q9)(w.errorType)))):x&&(k.length||N.length||D.length)?a.createElement(a.Fragment,null,T&&a.createElement("div",{className:p}),r,a.createElement(c.tO,{typedPropDefs:k,variantPropDefs:N,assignmentValues:I,allStateVariantProps:A,backingStateVariantProps:O,statePropertyValues:L,productComponentGUID:f,propDimension:o.OE.ASSIGNMENT,guids:[d],viewOnlyMode:E,forBubbledProps:!1,splitVariantAndTypedProps:!!E,instanceSwapPickerInitialHeight:y,instanceSwapPickerInitialPosition:b,sceneGraph:h,inPlayground:!0,recordingKey:v,containerWidth:C,hideIcon:!0,entrypointForInstanceSwapPicker:u.S.InstancePickerEntrypoint.INSTANCE_SWAP_PROP_PLAYGROUND}),D.map(t=>{let n=e[t]?.backingSymbol||"",r=e[n]?.containingStateGroupGUID||n;return r?a.createElement(g,{key:t,componentProps:e,bubbledComponentId:t,productComponentGUID:r,sceneGraph:h,instanceSwapPickerInitialHeight:y,instanceSwapPickerInitialPosition:b,recordingKey:v,containerWidth:C}):null})):null}},807197:(e,t,n)=>{n.d(t,{J:()=>a,n:()=>r});let a=(0,n(38580).eU)([]);function r(e,t,n){let a=t.get(e),r=t.get(a?.symbolId??"");if(r?.componentKey){let e=n.getInternalCanvas();for(let t of e?.childrenNodes??[]){if(t.componentKey===r?.componentKey)return t.guid;if(t.isStateGroup){for(let e of t.childrenNodes)if(e.componentKey===r?.componentKey)return e.guid}}}return r?.publishID}},381618:(e,t,n)=>{n.d(t,{d:()=>a});let a=(0,n(38580).eU)({})},578505:(e,t,n)=>{n.d(t,{s:()=>X,Y:()=>Y});var a=n(411855),r=n(188507),i=n(459401),l=n(675678),o=n(343887),s=n(538649),c=n(755020),d=n(629019),u=n.n(d),m=n(966712),p=n(374626),_=n(860601),g=n(153234),f=n(192437),h=n(355819),E=n(554918),y=n(901536),b=n(939863),v=n(634832),C=n(587670),w=n(501114),T=n(617453),S=n(869156),x=n(750029),k=n(393062),N=n(428877),I=n(533573),A=n(712685);function O({variable:e,modeId:t}){let n=e.modeValues[t],r=(0,S.BQ)(e.node_id),i=n??r;if(!i||!r||"MIXED"===r||"MIXED"===i)return null;switch(i.type){case C.Z_n.STRING:case C.Z_n.FLOAT:return a.createElement(L,{value:i.value});case C.Z_n.BOOLEAN:return a.createElement(L,{value:(0,I.Oi)(i),isBoolean:!0});case C.Z_n.COLOR:return a.createElement(D,{value:i});case C.Z_n.ALIAS:return a.createElement(R,{value:i,resolvedValue:r});case C.Z_n.SYMBOL_ID:case C.Z_n.NODE_FIELD_ALIAS:case C.Z_n.EXPRESSION:case C.Z_n.FONT_STYLE:case C.Z_n.TEXT_DATA:case C.Z_n.MAP:return null;default:(0,v.assertNever)(i)}}function L({value:e,isBoolean:t}){return a.createElement("div",{className:y.cx.flex.alignCenter.$},a.createElement("div",{className:y.cx.textBodyMedium.truncate.$,style:t?w.sx.add({fontFamily:"monospace"}).$:void 0},e))}function D({value:e}){let t=(0,T.Ku)(),n=(0,N.Ig)();return a.createElement("div",{className:y.cx.flex.alignCenter.gap8.h16.minW0.$},a.createElement(x.J,{color:e.value}),a.createElement("div",{className:y.cx.textBodyMedium.truncate.$},(0,k.q)(e.value,t,n,{alphaInPercent:!0}).value))}function R({value:e,resolvedValue:t}){let n=(0,S.u)(e.value);return a.createElement("div",{className:y.cx.flex.alignCenter.$},a.createElement(A.w,{thumbnailValue:t,text:n?.name??(0,b.t)("variables.missing_name"),variableValue:e.value}))}var M=n(939900),P=n(738269),F=n(318812),B=n(754209),U=n(611978),G=n(239671),K=n(498606),V=n(788612),H=n(549166),z=n(820396),W=n(837746);let j="variables_table--cell--3uNjl",$="variables_table--itemPlainText--5KrPr",q="variables_table--ellipsis--PKOvw ellipsis--ellipsis--Tjyfa";function Y(){let e=(0,U._6)(),t=(0,r.wA)(),n=a.useCallback(()=>{t(P.$T({...e,view:"fullscreen",editorType:G.nT.DevHandoff,showDevModeVariablesTable:!0}))},[t,e]),i=(0,S.Rb)().length;return(0,m.kc)().dt_dev_variables_table&&i?a.createElement(f.tH,{boundaryKey:"varsTable_inspectEntry",fallback:f.H4.NONE_I_KNOW_WHAT_IM_DOING,team:l.FigmaTeam.DEVELOPER_TOOLS,sentryTags:{area:l.FigmaTeam.DEVELOPER_TOOLS}},a.createElement(V.VZ,{title:(0,b.t)("variables.authoring_modal.title"),recordingKey:"fullVarsTable",headerChildren:a.createElement(o.K,{onClick:n,recordingKey:(0,g.Pt)("fullVarsTable","panelEntry"),"aria-label":(0,b.t)("variables.local_variables_panel.open_variables_button_tooltip"),htmlAttributes:{"data-tooltip":(0,b.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":K.Ib.TEXT}},a.createElement(s.O,null)),noPadding:!0})):null}function X(){let e=(0,T.dP)(),{currentVariableSet:t,variablesTableColumns:n,variablesTableData:r}=function(){let e=(0,S.yp)(),[t,n]=(0,M.R6)(e),r=function(e,t){let n=(0,M.vo)(e);return a.useMemo(()=>{if(!e)return[];let a=n.filter(e=>!t||t===M.eb||e.name===t||e.name.startsWith(`${t}/`));return(0,i.flatten)(a.map((t,n)=>{let a=[],r=t.variables.map(n=>{let a=e.modes.map(e=>({variable:n,modeId:e.id})),r=n.name.split("/"),i=n.name.includes("/")?r[r.length-1]:n.name;return{id:n.node_id,type:n.resolvedType,name:i,group:t.name,content:a}});return""!==t.name&&t.variables.length>0&&a.push({id:`group${n}`,isDividerRow:!0,content:t.name}),a.push(...r),a}))},[t,e,n])}(t,(0,p.md)(M.bE));return a.useMemo(()=>{let e=t?t.modes.map((e,t)=>({id:`mode${t}`,label:e.name})):[];return{currentVariableSet:t,variablesTableColumns:[{id:"name",label:(0,b.t)("dev_handoff.variables.table_column_name")},...e],variablesTableData:r}},[t,r])}();if(!t)return null;let l=`${W.Wsk} repeat(${t.modes.length}, ${W.Gyo}) minmax(${W.Gyo}, auto)`;return a.createElement("div",{className:"variables_table--background--bcZc8"},a.createElement("div",{className:"variables_table--fullTableView--CVdEq",style:{left:e}},a.createElement(J,{title:t.name}),a.createElement(h.P,{className:y.cx.wFull.$},a.createElement(E.Zu,{gridColumnSizes:l},a.createElement(E.$y,{className:"variables_table--stickyHeaderRow--pn5z5 variables_table--row--dhAQa"},n.map(e=>a.createElement(E.Jy,{className:j,key:e.id},a.createElement("div",{className:u()(q,"variables_table--headerText--uHXN6")},e.label))),a.createElement(E.Jy,null)),r.map(e=>a.createElement(E.$y,{className:u()("variables_table--row--dhAQa",{"variables_table--selected--rNRXH":!1}),key:e.id},!0===e.isDividerRow&&"string"==typeof e.content?a.createElement(E.Jy,{className:u()(j,"variables_table--groupDividerCell--DWXGW")},a.createElement("div",{className:u()($,"variables_table--groupDivider--4bKFP",q)},e.content.split("/").join(" / "))):a.createElement(a.Fragment,null,!!e.name&&void 0!==e.type&&a.createElement(E.Jy,{className:u()(j,"variables_table--nameCell--tM7zv")},a.createElement(z.i,{type:e.type}),a.createElement("div",{className:u()($,q)},e.name)),Array.isArray(e.content)&&e.content.map(e=>a.createElement(E.Jy,{className:j,key:`${e.variable.node_id}-${e.modeId}`},a.createElement("div",{className:u()($,q)},a.createElement(O,{variable:e.variable,modeId:e.modeId})))))))))))}function J({title:e}){let t=(0,B.Ww)(),n=(0,F.Um)(),i=(0,r.d4)(e=>e.multiplayer),l=(0,U._6)(),s=(0,r.wA)(),d=a.useCallback(()=>{s(P.$T({...l,view:"fullscreen",editorType:G.nT.DevHandoff,showDevModeVariablesTable:!1}))},[s,l]);return a.createElement("div",{className:"variables_table--header--412jw"},a.createElement("div",{className:y.cx.flex.alignCenter.$},a.createElement(o.K,{"aria-label":(0,b.t)("general.back"),onClick:d},a.createElement(c.C,null)),a.createElement("div",{className:"variables_table--title--16SxT","data-testid":"dev_handoff.variables_table.title"},e)),a.createElement("div",{className:y.cx.flex.alignCenter.$},t&&a.createElement(H.v7,{dropdownShown:n,multiplayer:i,currentUser:t,onUserClick:_.lQ})))}},488090:(e,t,n)=>{n.d(t,{f:()=>C});var a=n(411855),r=n(75395),i=n(163023),l=n(939863),o=n(335682),s=n(132135),c=n(349719),d=n(188507),u=n(901765),m=n(424044),p=n(498606),_=n(445448);let g="vscode_extension_page_picker--pagePickerButtonContent--JXaX-";var f=n(873619),h=n(232117),E=n(289298);function y(){return a.createElement("div",{className:"vscode_extension_page_picker--floatingContainer--HgY6-"},a.createElement(m.B,null))}function b({additionalPages:e,onClickAdditionalPage:t,selectedAdditionalPageId:n,isOnReadyForDevPage:r}){let[o,s]=a.useState(!1),c=a.useRef(null),m=(0,d.d4)(e=>e.mirror.appModel.pagesList),b=(0,d.d4)(e=>e.mirror.appModel.currentPage),v=m.find(e=>e.nodeId===b);return((0,u.L)(c,()=>{o&&s(!1)}),m)?a.createElement("div",{className:"vscode_extension_page_picker--pagePicker--AFcyx",ref:c},a.createElement("button",{className:"vscode_extension_page_picker--pagePickerButton--xunuS",onClick:()=>s(!o),"data-tooltip":(0,l.t)("dev_handoff.pages_list"),"data-tooltip-type":p.Ib.TEXT},r?a.createElement(a.Fragment,null,a.createElement(i.B,{className:"vscode_extension_page_picker--readyIcon--MjlB1",svg:f.A}),a.createElement("span",{className:g},(0,l.t)("dev_handoff.workflows.overview.title"))):a.createElement(a.Fragment,null,a.createElement(_.v,{pageGuid:b,margin:"marginRight",fallback:a.createElement(i.B,{svg:h.A,className:"vscode_extension_page_picker--pagePickerIcon--miPBV"})}),a.createElement("span",{className:g},v?.name||"")),a.createElement(i.B,{svg:E.A,className:"vscode_extension_page_picker--pagePickerButtonChevron--MpjMi"})),o&&a.createElement(y,null)):null}var v=n(280021);function C({children:e,isOnReadyForDevPage:t}){let n=(0,o.tS)(),d=a.useCallback(()=>{let e=(0,s.jN)({file:{key:n},isDevHandoff:!0});(0,c.Qn)(e)},[n]);return a.createElement("div",{className:"vscode_extension_header--vscodeExtensionHeader--1-R98"},a.createElement(b,{isOnReadyForDevPage:t}),a.createElement("div",{className:"vscode_extension_header--children--sHtI3"},a.createElement(r.E,{onClick:d,"aria-label":(0,l.t)("dev_handoff.overview_mode.open_in_figma"),className:"vscode_extension_header--focusVisible--NjfH0"},a.createElement("div",{className:"vscode_extension_header--openFigmaText--e2tMf"},(0,l.t)("dev_handoff.overview_mode.open_in_figma"),a.createElement(i.B,{svg:v.A,className:"vscode_extension_header--openFigmaSVG--02Jd3"}))),e))}},493471:(e,t,n)=>{n.d(t,{c:()=>S,v:()=>T});var a=n(411855),r=n(343887),i=n(460869),l=n(118786),o=n(629019),s=n.n(o),c=n(966712),d=n(46481),u=n(939863),m=n(256975),p=n(17604),_=n(350428),g=n(779709),f=n(601607),h=n(498606);let E="complete_button--completeButton--OC0XP",y="complete_button--disabled--jWBRb",b="complete_button--completedIcon--Op6qF",v="complete_button--disabledIcon--n9m3s";var C=n(411929),w=n(164828);function T({nodeId:e,sourceForLogging:t,isMinimal:n}){let r=(0,f.Jk)(e);return a.createElement(S,{node:r,sourceForLogging:t,isMinimal:n})}function S({node:e,sourceForLogging:t,onboardingKey:n,isMinimal:o}){let f=(0,p.D)(),T=(0,m._I)(),S=f&&T;if(!e)return null;let x=()=>{S&&g.z4.setNodesCompleted([e.guid],`${t}-complete-button`)},k=()=>{S&&(g.z4.setNodesReady(!0,[e.guid],`${t}-complete-button`,null),(0,c.kc)().ai_prod_rename_layers_dev_export&&(0,_.R4)([e.guid]))};return e.hasReadyStatus?o?a.createElement(r.K,{onClick:x,disabled:!S,"aria-label":(0,u.t)("dev_handoff.status.mark_as_completed"),htmlAttributes:{"data-tooltip":S?(0,u.t)("dev_handoff.status.mark_as_completed"):(0,u.t)("dev_handoff.overview_mode.tooltip.upgrade_mark_completed"),"data-tooltip-type":h.Ib.TEXT}},a.createElement(i.W,null)):a.createElement("button",{className:s()(E,{[y]:!S}),onClick:x,disabled:!S,"data-tooltip-type":h.Ib.TEXT,"data-tooltip":S?void 0:(0,u.t)("dev_handoff.overview_mode.tooltip.upgrade_mark_completed"),"data-tooltip-text-left":!0,"data-onboarding-key":n},a.createElement(d.U,{svg:C.A,className:s()(b,{[v]:!S})},a.createElement(i.W,{className:s()({[v]:!S})})),(0,u.tx)("dev_handoff.status.mark_completed")):e.hasCompletedStatus?o?a.createElement(r.K,{onClick:k,disabled:!S,"aria-label":(0,u.t)("dev_handoff.status.mark_as_ready"),htmlAttributes:{"data-tooltip":S?(0,u.t)("dev_handoff.status.mark_as_ready"):(0,u.t)("dev_handoff.overview_mode.tooltip.upgrade_mark_completed"),"data-tooltip-type":h.Ib.TEXT}},a.createElement(l.g,null)):a.createElement("button",{className:s()(E,{[y]:!S}),onClick:k,disabled:!S,"data-tooltip-type":h.Ib.TEXT,"data-tooltip":S?void 0:(0,u.t)("dev_handoff.overview_mode.tooltip.upgrade_mark_completed"),"data-tooltip-text-left":!0,"data-onboarding-key":n},a.createElement(d.U,{svg:w.A,className:s()(b,{[v]:!S})},a.createElement(l.g,{className:s()({[v]:!S})})),(0,u.tx)("dev_handoff.status.completed")):a.createElement("button",{className:s()(E,y),disabled:!0,"data-tooltip-type":h.Ib.TEXT,"data-tooltip":(0,u.t)("dev_handoff.workflows.focus_view.complete_button.status_removed"),"data-tooltip-text-left":!0,"data-onboarding-key":n},a.createElement(d.U,{svg:C.A,className:s()(b,v)},a.createElement(i.W,{className:v})),(0,u.tx)("dev_handoff.status.mark_completed"))}},540828:(e,t,n)=>{n.d(t,{TP:()=>p,TQ:()=>f,VW:()=>_,ZJ:()=>g});var a=n(411855),r=n(188507),i=n(587670),l=n(939683),o=n(738269),s=n(611978),c=n(239671),d=n(187882),u=n(875331),m=n(331972);function p(e,t){let n=(0,s._6)();return"fullscreen"===n.view?{...n,editorType:e??n.editorType,focusViewBackNavigation:void 0,devModeFocusId:void 0,showOverview:!1,overviewBackButtonTargetNodeId:void 0,...t?{nodeId:t}:{}}:n}function _(e,t){let n=(0,s._6)();return"fullscreen"===n.view?{...n,editorType:c.nT.DevHandoff,focusViewBackNavigation:{toEditorType:n.editorType,toOverview:!0},showOverview:!1,devModeFocusId:e,...t?{nodeId:t}:{}}:n}function g(){let e=(0,r.wA)(),t=(0,s._6)();return(0,a.useCallback)(n=>{(0,m._$)(e,t,n)},[e,t])}function f(e){let t=p(e),n=(0,r.wA)(),a=(0,l.U)(),s=(0,d.n0)(),m=(0,u.VS)({pagesList:s,isComparingChanges:!1});return async(e,r,l)=>{l&&await m(l),n(o.$T(t));let s="unknown";"fullscreen"===t.view&&(i.w3z.addToSelectionNoAnimation([r]),i.glU.panToNode(r,!1),s=t.editorType===c.nT.Design?"design_canvas":"dev_mode_canvas"),a(e,{target:s,nodeId:r})}}},265911:(e,t,n)=>{n.d(t,{s:()=>P,$:()=>F});var a=n(411855),r=n(188507),i=n(629019),l=n.n(i),o=n(374626),s=n(522739),c=n(281381),d=n(163023),u=n(901536),m=n(939863),p=n(256975),_=n(40987),g=n(320063),f=n(964881),h=n(101505),E=n(456104),y=n(397065),b=n(147723),v=n(507956),C=n(340514),w=n(493364),T=n(463546);function S(){let e=(0,v.ks)(),t=(0,f.l7)(),n=(0,r.wA)(),i=(0,o.md)(_.d),l=(0,o.md)(_.cR),s=o.md(_.hv)?.data,{show:c,isShowing:d,complete:u}=(0,E.e)({overlay:T.xjb,priority:y.N.DEFAULT_MODAL});(0,g.h)(()=>{t&&!s&&(0,b.nT)(n),!t&&!s&&(i||l)&&c()});let p={label:(0,m.tx)("dev_handoff.workflows.overview.onboarding.primary_cta"),type:"button",onClick:u,ctaTrackingDescriptor:h.c.GOT_IT},S={label:(0,m.tx)("dev_handoff.workflows.overview.onboarding.secondary_cta"),type:"link",href:"https://help.figma.com/hc/en-us/articles/23918228264855",ctaTrackingDescriptor:h.c.LEARN_MORE};return a.createElement(C.rq,{title:i?(0,m.tx)("dev_handoff.workflows.overview.onboarding.first_rfd.title"):(0,m.tx)("dev_handoff.workflows.overview.onboarding.has_rfd.title"),description:i?(0,m.tx)("dev_handoff.workflows.overview.onboarding.first_rfd.description"):e?(0,m.tx)("dev_handoff.workflows.overview.onboarding.has_rfd.dev_mode.description"):(0,m.tx)("dev_handoff.workflows.overview.onboarding.has_rfd.design.description"),trackingContextName:"Dev Mode Overview Onboarding",targetKey:b.o5,isShowing:d,onClose:u,arrowPosition:w.F_.LEFT_TITLE,primaryCta:p,secondaryCta:S,disableHighlight:!0})}var x=n(738269),k=n(259927),N=n(809831),I=n(707465),A=n(498606),O=n(402609),L=n(735056),D=n(893606);let R="overview_entry--isSelected--E6mSl";var M=n(873619);function P({count:e,isInTab:t,isActive:n}){return a.createElement(c.Ex,{className:l()("overview_entry--countBadge---5UQw",t&&"overview_entry--isInTab--J7wAV",n&&u.cx.colorText.$),text:`${e}`,size:c.vj.SMALL,color:c.zE.DEFAULT,subtle:!0})}function F(){let e=(0,f.X0)(),t=!(0,p.U4)(),n=(0,r.wA)(),i=(0,f.U0)(),c=(0,r.d4)(e=>t?void 0:(0,I.Np)(e,i)),u=(0,f.l7)(),g=(0,f.ZI)(),h=o.md(_.hv)?.data,[E,y]=(0,o.fp)(_.cR),v=(0,o.md)(_.d),C=(0,N.ow)(),w=(0,D.R)(),T=(0,f.Xd)(),F=(0,a.useCallback)(e=>{if(e.stopPropagation(),e.preventDefault(),t)return;let{clientX:a,clientY:r}=e;n((0,x.j7)({type:k.bx,data:{clientX:a,clientY:r}}))},[t,n]);return!e||C?null:0===g?null:(u||h||E||v||y(!0),a.createElement(L.y,{autoHeight:w,withBorder:!0},a.createElement(s.lt,{className:l()("overview_entry--entryRow--l-Ofr",u&&R,t&&"overview_entry--isDisabled--OAHeM"),onClick:function(e){e.preventDefault(),T()},onContextMenu:F,href:c,"data-tooltip-type":A.Ib.TEXT,"data-tooltip":t?(0,m.t)("dev_handoff.paywall.org_not_member_hint"):void 0,"data-tooltip-text-left":!0,recordingKey:"dev_handoff.workflows.overview_entry"},a.createElement("div",{className:l()("overview_entry--entryRowInner--fPECV",u&&R)},a.createElement("div",{className:"overview_entry--leftSide--0zNy- text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement(d.B,{className:"overview_entry--readyIcon--QwDeG",svg:M.A}),(0,m.tx)("dev_handoff.workflows.overview.title")),a.createElement("div",{"data-onboarding-key":b.o5},a.createElement(P,{count:g})))),a.createElement(O.p,null,a.createElement(S,null))))}},465904:(e,t,n)=>{n.d(t,{QV:()=>s,YA:()=>o,n9:()=>l});var a=n(374626),r=n(330654);let i=(0,a.E2)("workflows_recently_viewed",{},r.record(r.string(),r.record(r.string(),r.number())));function l(e){let[t]=(0,a.fp)(i);return e?t[e]:null}function o(e,t){return(t.lastViewedTimestamp??0)-(e.lastViewedTimestamp??0)}function s(){let[e,t]=(0,a.fp)(i);return(n,a)=>{let r=Date.now();t({...e,[n]:{...e[n],[a]:r}})}}},236478:(e,t,n)=>{n.d(t,{r:()=>c});var a=n(980820),r=n(293017),i=n(286954),l=n(411294),o=n(906899),s=n(169231);let c=(0,a.nF)(e=>{let t=e.getState();t.pickerShown&&e.dispatch(r.XE()),t.instanceSwapPickerShown&&e.dispatch((0,i.vq)()),t.stylePickerShown&&e.dispatch(r.Uv()),t.stylePreviewShown&&e.dispatch(o.sw()),t.variablePickerShown?.isShown&&e.dispatch((0,s.B)()),t.pickerInStyleCreationShown&&e.dispatch((0,l.w)())})},838e3:(e,t,n)=>{n.d(t,{Q:()=>f,S:()=>h});var a=n(130097),r=n(711525),i=n(776621),l=n(27087),o=n(881388),s=n(939863),c=n(392592),d=n(279453),u=n(320741),m=n(877627),p=n(280945),_=n(980820),g=n(507877);let f=(0,_.nF)(async(e,t,{loadingKey:n})=>{let l=!1;try{l=!!(0,r.oA)((await (0,a.Ek)(d.jmg,{fileKey:t.file_key})).deviceTryFile)}catch(e){(0,i.x1)("claimFigJamTryFile","Request failed for fetching LG DeviceTryFileView",e,{reportAsSentryError:!0})}try{let a;a=l?p.L.claimDeviceFile({fileKey:t.file_key}):m.Uy.claimTryFile({fileKey:t.file_key}),(0,u.N)(a,e,n);let{data:r}=await a,{save_location:i,folder_name:o,org_id:d}=r.meta,{user:_,currentUserOrgId:f,selectedView:h}=e.getState(),E=(0,s.t)("figjam_try.this_file_has_been_saved_to_drafts");if("team"===i&&o&&(E=(0,s.t)("figjam_try.this_file_has_been_saved_to_folder_name",{folder_name:o})),d&&d!==f&&_){let t={userId:_.id,orgId:d};e.dispatch(g._l({workspace:t,view:h}))}e.dispatch(c.F.enqueue({message:E}))}catch(t){e.dispatch(o.s.error("Unable to save file. Please try again later."))}}),h=(0,_.nF)(async(e,{userName:t,file_key:n},{loadingKey:a})=>{try{await l.Ay.put(`/api/try/file/${n}`,{name:(0,s.t)("figjam_try.default_filename",{userName:t})})}catch(e){console.error(e)}})},439384:(e,t,n)=>{n.d(t,{Te:()=>s,_O:()=>c,ew:()=>o});var a=n(966712),r=n(29680),i=n(335682),l=n(99506);function o(){let e=(0,r.p8)("pagesList");return e.some(t=>t.pageType!==e[0].pageType)}function s(){let e=(0,i.q5)();return e?.editorType===l._Y.DESIGN}function c(){let e=s(),t=o();return e&&(t||(0,a.kc)().interop_pages)}},582626:(e,t,n)=>{n.d(t,{iK:()=>h,wP:()=>E});var a=n(411855),r=n(47706),i=n(86625),l=n(707458),o=n(302442),s=n.n(o),c=n(574724),d=n(202655),u=n(894443),m=n(747202),p=n(356390);function _(e){return"SYMBOL"===e.type||!!e.isStateGroup}async function g({components:e,clientLifecycleId:t}){let n=await Promise.all(e.map(async e=>{let t=await (0,u.gC)(e);return{imageB64:t.base64,jsx:t.jsx,isStateGroup:e.isStateGroup}}));return(await c.Ay.design.firstDraftSuggestProps({requests:n},(0,m.Lp)({clientLifecycleId:t}))).responses.map((t,n)=>{let a=e[n];return t&&a?{component:a,componentName:t.componentName,componentDescription:t.componentDescription,nodeIdsToPropertyNames:t.nodeIdsToPropertyNames.reduce((e,t)=>(e[t.id]=t.propertyName,e),{})}:null})}function f(e){let t=e.component;if(_(t))for(let n of(t.name=e.componentName,t.description||(t.description=e.componentDescription),Object.keys(e.nodeIdsToPropertyNames))){let a=l.q.instance.get(n);if(!a||"TEXT"!==a.type||a.isInstanceSublayer)continue;let r=t.componentPropertyDefinitions(),i=a.componentPropertyReferences();if(i?.characters)continue;let o=e.nodeIdsToPropertyNames[n],s=function(e,t){for(let n in e)if("VARIANT"!==e[n].type){let e=n.split("#");if(e.slice(0,e.length-1).join("#")===t)return n}else if(n===t)return n;return null}(r,o);s&&r[s]?.type==="TEXT"||(s=t.addComponentPropertyDefinition(o,"TEXT",a.characters,void 0)),a.setComponentPropertyReferences({...a.componentPropertyReferences(),characters:s})}}function h(){let[e,t]=a.useState({loaded:0,total:0});return{submit:a.useCallback(async(e,n,a)=>{let o=l.q.instance.getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&e.name===d.vh),c=l.q.instance.getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&"Atoms"===e.name);if(0===(a=a??[...o?.childrenNodes??[],...c?.childrenNodes??[]]).length)return;let u=a.filter(_);for(let a of(t({loaded:1,total:u.length}),s()(u,30))){let l=await (0,r.Z)(g({components:a,clientLifecycleId:e}),n);if(n.aborted)return;i.l7.user("apply-suggested-props",()=>{for(let e of l)e&&f(e)}),t(e=>({loaded:Math.min(e.loaded+a.length,e.total),total:e.total}))}p.Y5.commit()},[]),progress:e}}function E(){return{submit:a.useCallback(g,[]),apply:a.useCallback(e=>{f(e),p.Y5.commit()},[])}}},894443:(e,t,n)=>{n.d(t,{Mb:()=>u,Q$:()=>p,SV:()=>c,Z$:()=>d,_J:()=>m,gC:()=>_});var a=n(851061),r=n(574724),i=n(286374),l=n(747202),o=n(640209),s=n(479296);let c="plugin_playground";function d(e){let t=e.match(/```jsx([\s\S]*?)(```|$)/);return t?t[1].trim():""}async function u(e){await new Promise(t=>{setTimeout(()=>{t()},e)})}let m=(0,s.n)(async function(e,t,n=()=>!0,a){let i=(await r.Ay.design.firstDraftGenerateV2Stream(e,(0,l.Lp)({clientLifecycleId:a}))).getReader(),o={};try{for(;;){let e=i.read(),{done:a,value:r}=await e;if(a||(r.theme&&(o.theme=r.theme??{}),r.dsKit&&(o.dsKit=r.dsKit),r.jsx&&(o.jsx+=r.jsx),r.trace&&(o.trace=r.trace),r.presets&&(o.presets=r.presets),!n()))break;t(o)}}finally{i.releaseLock()}});function p(e){return Object.keys(e).reduce((t,n)=>(t[n.toLowerCase()]=e[n],t),{})}async function _(e){let t=await e.loadImagesAndExport([{imageType:"PNG",constraint:{type:"CONTENT_WIDTH",value:Math.min(e.size.x,function(e,t=1024){return e.size.y>e.size.x?Math.floor(t*e.size.x/e.size.y):t}(e))},contentsOnly:!0,useAbsoluteBounds:!1,colorProfile:"DOCUMENT"}]),n=`data:image/png;base64,${(0,a.encode)(t)}`,r=(0,i.YJ)({nodeIds:[e.guid],options:{skipNodeIds:!1,includeName:!0,detachInstances:!0,componentUsageOrDefinition:"DEFINITION",autoLayoutTagName:"div",frameTagName:"div"}});if(!r.jsxStr)throw Error(`Could not get node JSX for node ID: ${e.guid}`);return{base64:n,jsx:r.jsxStr}}(0,s.n)(async function(e){return(await o.Gh.postFirstDraftMatchPresetModes({kit_key:e.kitKey,is_local:e.isLocal,user_prompt:e.userPrompt})).data.meta})},736916:(e,t,n)=>{n.d(t,{EH:()=>d,MC:()=>s,ji:()=>c,l0:()=>l,xo:()=>o,zp:()=>i});var a=n(374626),r=n(582947);let i="user_has_generated_ai_summary",l="has_dismissed_summarization_nudge",o=(0,r.r1)(i),s=(0,r.r1)(l),c=(0,a.E3)("last_saw_summarization_nudge","0"),d=(0,a.E3)("seen_summarization_nudge_count",0)},543841:(e,t,n)=>{n.d(t,{ai:()=>u,yh:()=>p});var a=n(411855),r=n(587670),i=n(88823),l=n.n(i),o=n(572206),s=n(356390),c=n(15859),d=n(931770);function u({nodeId:e,width:t,height:n,shouldSkip:r,updateOnSceneGraphChange:i=!1}){let[c,u]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(r){u(null);return}let a=null,c=()=>{a&&(a.abort(),a=null)},m=()=>{let a=(0,d._G)(new o.Mi(t,n),e,!0);a&&a.pixels&&a.pixelSize&&a.displaySize&&u({src:(0,d.Pv)(a.pixels,a.pixelSize),displaySize:a.displaySize})};u(null);let p=()=>{c(),a=new TaskController({priority:"user-visible"}),scheduler.postTask(m,{signal:a.signal})},_=l()(p,200,{trailing:!0,leading:!1});return p(),i&&s.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",_),()=>{c(),_.cancel(),i&&s.Y5.fromFullscreen.removeListener("sceneGraphMirrorUpdate",_)}},[e,t,n,r,i]),c}let m={};function p({nodeId:e,width:t,height:n,version:i,reason:l,shouldSkip:s,regenerateAfterImagesLoaded:u,isDevModeBlendedSection:p=!1}){let[_,g]=(0,a.useState)(!1),f=function({nodeId:e,width:t,height:n}){return`${e}-${t}x${n}`}({nodeId:e,width:t,height:n}),[h,E]=(0,a.useState)(m[f]),y=h?.hasUnresolvedImages||!1;return(0,a.useEffect)(()=>{if(s)return;let t=!0;return u&&!_&&y&&(0,c.Jr)().waitForImagesUnder([e],r.MoD.LOW_RES_ONLY,l).then(()=>{t&&g(!0)}),()=>{t=!1}},[_,f,e,l,y,u,s]),(0,a.useEffect)(()=>{if(s)return;let a=null;(!h||h.version!==i||!h.imagesLoaded&&_&&h.hasUnresolvedImages)&&(a&&(a.abort(),a=null),a=new TaskController({priority:"user-visible"}),scheduler.postTask(()=>{let a=!!u&&(0,c.Jr)().unresolvedImagesUnder([e],r.MoD.LOW_RES_ONLY).length>0,l=(0,d._G)(new o.Mi(t,n),e,!0,r.tvY.TRANSPARENT,p);if(l&&l.pixels&&l.pixelSize&&l.displaySize){let e={thumbnail:{src:(0,d.Pv)(l.pixels,l.pixelSize),displaySize:l.displaySize},imagesLoaded:_,hasUnresolvedImages:a,version:i};m[f]=e,E(e)}},{signal:a.signal}))},[e,t,n,f,h,i,s,_,u,p]),h?h.thumbnail:null}},85098:(e,t,n)=>{n.d(t,{A8:()=>g,AD:()=>y,D4:()=>E,Py:()=>S,Q2:()=>_,Wq:()=>h,Yp:()=>C,_i:()=>v,pl:()=>f,uC:()=>w,wF:()=>T});var a=n(411855),r=n(188507),i=n(752795),l=n(358145),o=n(966712),s=n(915440),c=n(711525),d=n(506599),u=n(226055),m=n(279453),p=n(335682);let _=4,g=8,f=22;function h(e){let t=(0,u.GS)(),n=E(),a=function(e){let{isPropertiesPanelCollapsed:t}=(0,d.iT)(),n=(0,o.kc)().async_spotlight?2:3;return!e||t?n:Math.max(n,Math.min(Math.floor(e/f),g))}(e);return t?a:n}function E(){let[e,t]=a.useState(_);return a.useEffect(()=>{let e=()=>{window.innerWidth<786?t(2):t(_)};return window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}},[]),e}function y(e){return"sessionID"in e}let b=e=>{let{user:t,sessionID:n,presenterSessionID:a,lastObservedSessionID:r,fileCreatorID:i,mostActiveSpeakerID:l,observingSessionID:s}=e;return y(t)&&t.sessionID===n?0:y(t)&&a&&t.sessionID===a?1:y(t)&&s&&t.sessionID===s?2:(0,o.kc)().live_feedback_large_meetings&&y(t)&&r&&t.sessionID===r?3:y(t)&&t.userID===i?4:t.userID===l?5:t.name.toLocaleLowerCase().startsWith("anonymous")?Number.MAX_SAFE_INTEGER:6};function v(e,t){let n=e;return t&&(n=n.filter(e=>y(e)&&e.deviceName===t)),n=n.filter(e=>!y(e)||"editor"!==e.deviceName||void 0===e.sawMouse||!0===e.sawMouse)}function C(e,t,n,a,r){let{deviceNameFilter:i}=r,l=[],o=[...e];return o&&0!==o.length?(o.sort((e,t)=>{let n=b({...r,user:e})-b({...r,user:t});if(0!==n)return n;let a=e.name.toLocaleLowerCase(),i=t.name.toLocaleLowerCase();return y(e)&&y(t)&&a===i?e.sessionID-t.sessionID:a>i?1:-1}),(o=v(o,i)).length>=a&&(l=o.slice(a-1),o=o.slice(0,a-1)),{users:o,overflowUsers:l}):t&&!n?{users:[t],overflowUsers:[]}:{users:[],overflowUsers:[]}}function w(e,t,n,o,s){let c=(0,r.d4)(e=>e.multiplayer.sessionID),d=(0,r.d4)(e=>e.multiplayer.observingSessionID),u=(0,r.d4)(e=>e.multiplayer.presenterSessionID),m=(0,r.d4)(e=>e.multiplayer.deviceNameFilter),_=(0,p.q5)(),[g,f]=a.useState(null),h=(0,l.ZC)(d);h!==d&&(0,i.isNotNullish)(h)&&-1!==h&&h!==g&&f(h);let E=a.useMemo(()=>({sessionID:c,observingSessionID:d,presenterSessionID:u,lastObservedSessionID:g,mostActiveSpeakerID:s,fileCreatorID:_?.creatorId,deviceNameFilter:m}),[c,d,u,g,s,_?.creatorId,m]),{users:y,overflowUsers:b}=a.useMemo(()=>C(e,t,n,o,E),[e,t,n,o,E]);return{users:y,overflowUsers:b}}function T(){let e=(0,p.q5)(),t=e?.key,n=(0,s.Rs)(m.JvY,{fileKey:t??""},{enabled:!!t&&(0,o.kc)().file_view_history});return a.useMemo(()=>{if("loaded"!==n.status)return;let e=(0,c.oA)(n.data?.file?.fileViewHistory),t=e?.map(e=>({userID:e.user.id,name:e.user.name,imageUrl:e.user.imgUrl,viewedAt:e.viewedAt}))||[];return t.sort((e,t)=>t.viewedAt.getTime()-e.viewedAt.getTime()),t.slice(0,50)},[n])}function S(e){return"viewedAt"in e}},596256:(e,t,n)=>{n.d(t,{I:()=>c});var a=n(411855),r=n(109388),i=n(629019),l=n.n(i),o=n(831236),s=n(28752);function c(e){if(!e.dragState?.dragPosition||!e.dragState?.dragOffset)return null;let t=e.dragState.dragPosition.subtract(e.dragState.dragOffset),n=(0,o.AE)(e.dragState.draggingResource);return(0,r.createPortal)(void 0!==e.icon?a.createElement("div",{className:l()(s.Az,{[s.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:t.x,top:t.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y}},e.icon):a.createElement("img",{src:n,alt:e.dragState.draggingResource,className:l()(s._D,{[s.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:t.x,top:t.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y},draggable:!1}),document.getElementById("fullscreen-root"))}},831236:(e,t,n)=>{n.d(t,{AE:()=>u,fo:()=>p,mG:()=>m});var a=n(964937),r=n(153234),i=n(939863),l=n(809831),o=n(867795),s=n(161405),c=n(894571),d=n(57150);function u(e){switch(e){case"Table":return"https://static.figma.com/uploads/ac41ded88c50f0359c02ec3927394b7b33e210b6";case"CodeBlock":return"https://static.figma.com/uploads/8a035152916712353b045f442c2c6c5879ef3e17";case"MindMap":return"https://static.figma.com/uploads/1dd4c6f9e1fbf269895ee58e7be79d9f9ee79b9e";default:return""}}function m(e){switch(e){case"Table":return"Table";case"CodeBlock":return(0,i.t)("whiteboard.inserts.code_block_title");case"MindMap":return(0,i.t)("whiteboard.inserts.mind_map_title");default:return""}}function p(e){let t="whiteboard"===(0,l.lg)(),n=(0,s.F5)(),i=async a=>(e.insertAction(a),t&&(0,s.oM)({type:o.p.MORE,id:e.resource,source:e.triggeredFrom,options:{...n,query:e.searchQuery}}),await Promise.resolve());return(0,c.t)(e,{insertAction:i,dragPreviewPointerPosition:d.N.CENTERED,getDragPreviewSrc:e.icon?()=>"data:image/svg+xml;utf8,"+(0,a.F)(e.icon):()=>u(e.resource),recordingKey:r.Pt(e.triggeredFrom,"tool",e.resource)})}},792675:(e,t,n)=>{n.d(t,{x:()=>r});var a=n(411855);function r(e,t="0px"){let n="IntersectionObserver"in window,[i,l]=(0,a.useState)(!n);return(0,a.useEffect)(()=>{if(!n||!e.current)return;let a=e.current,r=new IntersectionObserver(([e])=>{l(e.isIntersecting)},{rootMargin:t});return r.observe(a),()=>{r.unobserve(a)}},[e,t,n]),i}},528859:(e,t,n)=>{n.d(t,{HY:()=>C,Jp:()=>T,L4:()=>y,OZ:()=>h,T9:()=>function e(t){a.l7.ai("living-design",()=>{for(let n of(t.setPluginData(u,m,""),t.childrenNodes))e(n)})},Vq:()=>w,W2:()=>v,Wq:()=>E,Ww:()=>g,hl:()=>b,u6:()=>_,vd:()=>p});var a=n(86625),r=n(296210),i=n(96328),l=n(239349),o=n(356390),s=n(15859),c=n(601607),d=n(814059);let u="livefish",m="data";async function p(e){let t=await e.loadImagesAndExport([{imageType:"JPEG",suffix:"jpeg"}]);return(0,i.H9)(t)}function _(e){let t=e.getPluginData(u,m);if(t)try{let e=JSON.parse(t);return d.HD.parse(e)}catch(e){console.error("Error parsing living design data:",e,"pluginData:",t)}return{}}function g(e,t){a.l7.ai("living-design",()=>{let n=_(e),a="function"==typeof t?t(n):t;e.setPluginData(u,m,JSON.stringify(a))})}function f(e){return`<image href="./${e}.svg"></image>`}function h(e){let t=document.implementation.createHTMLDocument().body;t.innerHTML=r.sanitize(e);let n=`
  /* Reset styles for all structural tags */
a, abbr, area, article, aside, audio, b, bdo, blockquote, body, button,
canvas, caption, cite, code, col, colgroup, command, datalist, dd, del,
details, dialog, dfn, div, dl, dt, em, embed, fieldset, figure, form,
h1, h2, h3, h4, h5, h6, head, header, hgroup, hr, html, i, iframe, img,
input, ins, keygen, kbd, label, legend, li, map, mark, menu, meter, nav,
noscript, object, ol, optgroup, option, output, p, param, pre, progress,
q, rp, rt, ruby, samp, section, select, small, span, strong, sub, sup,
table, tbody, td, textarea, tfoot, th, thead, time, tr, ul, var, video {
	background: transparent;
	border: 0;
	font-size: 100%;
	font: inherit;
	margin: 0;
	outline: none;
	padding: 0;
	text-align: left;
	text-decoration: none;
	vertical-align: baseline;
	z-index: 1;

    /* Divs used for styling nodes positioned next to the clipper div */
  .presentationalDiv {
    position: absolute;
    inset: 0;
    border-radius: inherit;
    pointer-events: none;
  }
}
  `;for(let e of t.querySelectorAll("style"))e.remove();for(let e of t.querySelectorAll("*")){let t=e.getAttribute("id"),a=e.getAttribute("style");if(t&&a){let r=t.replace(/[;]/g,"");n+=`#${r} { ${a} }
`,e.removeAttribute("style"),e.id=r}}let a=[];for(let e of t.querySelectorAll("svg")){let t="";for(let n of e.children)t+=function e(t){let n=`<${t.tagName.toLowerCase()}`;for(let{name:e,value:a}of t.attributes){if("style"===e)continue;let t=e.replace(/-([a-z])/g,(e,t)=>t.toUpperCase());"class"===e&&(t="className"),n+=` ${t}="${a}"`}let a=Object.entries(t).filter(([e])=>!/^[0-9]+$/.test(e)).filter(([,e])=>!!e).reduce((e,[t,n])=>({...e,[t]:n}),{});for(let r of(Object.keys(a).length>0&&(n+=` style={${JSON.stringify(a)}}`),n+=">",t.children))r instanceof HTMLElement?n+=e(r):n+=r.textContent;return n+`</${t.tagName.toLowerCase()}>`}(n);if(!t)continue;let n=a.findIndex(e=>e===t);-1===n&&(n=a.length,a.push(t)),e.innerHTML=f(n)}return{html:t.innerHTML,styles:n,svgs:a}}function E(e){let t=e;for(;t.parentNode&&"CANVAS"!==t.parentNode.type;)t=t.parentNode;return t}function y(){let e=(0,l.VW)();return e?E(e):null}function b(e,t){let n=e;for(let e=0;e<t.length;e++){let a=t[e],r=f(e);for(;n.includes(r)&&a;)n=n.replace(r,a)}return n}function v(){return/\.\/hash:(.+?)\.png/g}async function C(e){let t=v(),n=[...e.matchAll(t)].flatMap(e=>e[1]?[e[1]]:[]);if(0===n.length)return e;let a=await (0,s.Mj)(n,await o.Y5.openFilePromise());return e.replace(t,(e,t)=>a.s3_urls[t]||e)}function w(){return(0,c.Fk)(e=>{let t=e.getCurrentPage();if(!t)return null;let n=t.directlySelectedNodes;if(1!==n.length)return null;let a=n[0];return a?_(a):null})}function T(){return(0,c.Fk)(e=>{let t=e.getCurrentPage();if(!t)return null;let n=t.directlySelectedNodes;if(1!==n.length)return null;let a=n[0];if(!a)return null;let r=E(a);return r?_(r):null})}},977467:(e,t,n)=>{n.d(t,{NG:()=>w,R:()=>y,Zl:()=>b,kX:()=>C});var a=n(707458),r=n(841563),i=n.n(r),l=n(693601),o=n(966712),s=n(38580),c=n(374626),d=n(743282),u=n(356390),m=n(404621),p=n(574724),_=n(392670),g=n(528859),f=n(814059);async function h(e,t){return(await p.Ay.anthropic.streamClaudeCompletions({model:"claude-3-5-sonnet-20240620",messages:e,temperature:0,max_tokens:4096,system:[{type:"text",text:`## You are an expert developer who is helping designers make their designs interactive. Your boss will reward you with a $1000 tip if you follow these instructions and the output is correct:

## Your task
* The designer will provide a screenshot of their design, their design as ${"jsx"===t?"JSX":"HTML/CSS"}, and annotations describing the interactions they want.
* Every annotation is a set of messages describing the interactivity for a particular node tree.
* Implement the interactivity specified in annotations.
* Don't implement any interactivity not specified in the annotations, or for nodes outside the specified node tree.

## Fidgetable interactivity
* Expose props for each annotation that allows the designer to fiddle with the interactivity where appropriate.
* Use props for interactive properties, such as hover colors and animation properties.
* Don't turn already present values like colors and fonts into props unless the designer specifies otherwise.
* Never add function callback props: the interactivity should be self-contained.
* Use state for stateful elements of the design, like form inputs. Use props for all constants, like transitions, hover colors, etc.

## Incremental changes
* Every annotation is represented as a chat thread to the designer.
* The designer expects you to make incremental changes based on changes to its annotations.
* For example, keep a previously added prop when a designer requests other interactivity.

${function(e){let t=`* Recreate the original HTML structure as closely as possible but leave out any data- attributes.
* You don't need to include the stylesheet because we'll apply it for you.
* Ensure that all elements have the same IDs and classnames as in the original HTML, so the provided styles are applied correctly.
* Include the HTML's presentationalDiv elements; they are crucial for the visual appearance.
* You're free to change an element's type (e.g., div -> button) if needed for the interactivity.
* Use inline styles only when you need to override styles to make the interactivity work.
  * For example, override a div's width property if a designer asked you to make it a functional slider.
* Avoid adding inline styles for properties already defined in the stylesheet.
* Don't  modify contents of <svg> elements.`,n=`
* Recreate the provided layout with HTML/CSS \u2014 none of the primitives like "Frame" exist!
* No styles or resets are included, so you'll have to define everything from scratch.
* The provided nodes are absolutely positioned unless they're in a flex container.
* Try as hard as possible to render the design perfectly because designers are perfectionists.
* Pay attention to every detail: fonts, shapes, colors, spacing, alignment, etc.
* Look at the implementation of the used components (if any) to replicate the design exactly.
* Only use native controls like <input> or <select> if you can style them exactly like the design using inline styles; if not, just implement them from scratch.
* Include all the images (image fills) in the output by converting them to <img> tags or background images.
* Use the following image URL format, which only requires the image hash: ${(0,g.W2)().toString()}.
* Always construct image URLs as static strings, without variables, arrays, functions, or any dynamic expressions.
* The image fills are the only images you can use.
* Keep image fills as bitmaps and don't replace them with emojis, unicode, or anything else they resemble.
* Vectors should remain vectors instead of becoming images.`;return`## Valid output
* The output should be a JSON object matching the provided Zod schema.
* Only return the JSON \u2014 do not include any explanations or other text.
* The code should be the new JSX code as a string.
* Use React and any libraries you need.
* Start with: \`import React from 'react'\` and end by exporting your component as the default export.
* The returned React component should accept the props so they can be adjusted dynamically.
${"jsx"===e?n:t}`}(t)}

Here is the Zod schema for the response. You've got this!
\`\`\`typescript
${JSON.stringify((0,_.Ay)(f.az))}
\`\`\``,cache_control:{type:"ephemeral"}}],stream:!0})).getReader()}let E=(0,s.eU)({}),y=(0,c.Iz)(e=>(0,s.eU)(t=>t(E)[e]??{status:"idle"},(t,n,a)=>{n(E,t=>({...t,[e]:a}))})),b=(0,c.E3)("living_designs_settings",{serializer:"jsx"});function v(e){return`
// Component ${e.guid}: ${e.name}
${e.jsxStr}`}async function C(e,t){let n=(0,g.Wq)(e);if("loading"===c.zl.get(y(n.guid)).status||!n)return;t&&t();let r=(0,g.u6)(n),s=function e(t){let n=[],{messages:a}=(0,g.u6)(t);for(let r of(a?.forEach(e=>{n.push({...e,nodeId:t.guid})}),t.childrenNodes))n=[...n,...e(r)];return n}(n);c.zl.set(y(n.guid),{status:"loading"});try{let e,t,p,_,E;let C=c.zl.get(b).serializer;if("jsx"===C){let a=await (0,l.o)(n);e=`<design>${a.jsxStr}</design>`,_=Object.values(a.componentInfoById??{}),t=[],p=""}else{if(!(0,o.kc)().sites)throw Error("HTML Serializer not available; please enable Sites");let a=await (0,m.M)(n.guid),r=(0,g.OZ)(a);e=`<html>${r.html}</html>`,p=r.styles,t=r.svgs,_=[]}let w=await (0,g.vd)(n),T=function(e,t,n,a,r,i){let l={type:"text",text:`
${e}
${t&&`<style>${t}</style>`}
${i?.length?`
${i.map(v).join("\n\n")}`:""}`,cache_control:{type:"ephemeral"}},o={type:"text",text:`Annotations:
${a.map(e=>{var t;return t=e.nodeId,`<annotation nodeId="${t}">${e.content}</annotation>`}).join("\n")}
`};return[...r?.map(e=>({...e,content:Array.isArray(e.content)?e.content.map(e=>({...e,cache_control:void 0})):e.content}))??[],{role:"user",content:[l,{type:"image",source:{data:n,type:"base64",media_type:"image/jpeg"},cache_control:{type:"ephemeral"}},o].filter(e=>void 0!==e)}]}(e,p,w,s,r?.generation?.chatHistory,_),S={role:"assistant",content:'{"code":"'},x=await h([...T,S],C);for(;;){let{done:e,value:t}=await x.read();if(e)break;"content_block_delta"===t.type&&"text_delta"===t.delta.type&&(S.content+=t.delta.text)}try{E=f.az.parse(JSON.parse(S.content))}catch(e){console.error("Error parsing or validating JSON response from LLM:",S.content),c.zl.set(y(n.guid),{status:"idle",errorMessage:"Invalid JSON response from LLM"});return}let{code:k,props:N}=E,I="jsx"===C?await (0,g.HY)(k):(0,g.hl)(k,t);Object.entries(N).forEach(([e,t])=>{let n=a.q.instance.get(e);n&&(0,g.Ww)(n,e=>{let n=t.map(t=>{let n=e.props?.find(e=>e.name===t.name);if(n){let e={...n,value:void 0},a={...t,value:void 0};return i()(e,a)?n:t}return t});return{...e,props:n}})}),(0,g.Ww)(n,t=>({...t,generation:{id:(0,d.g)(),html:e,code:I,styles:p,nodesWithProps:Object.keys(N),chatHistory:[...T,S]}})),u.Y5.triggerAction("commit"),c.zl.set(y(n.guid),{status:"idle"})}catch(e){console.error(e),c.zl.set(y(n.guid),{status:"idle",errorMessage:e.message})}}function w(e){(0,g.Ww)(e,{...(0,g.u6)(e),messages:[]}),C(e)}},814059:(e,t,n)=>{n.d(t,{HD:()=>s,Ts:()=>i,az:()=>c});var a=n(185035),r=n(330654);let i=r.discriminatedUnion("type",[r.object({name:r.string(),type:r.literal("number"),defaultValue:r.number().optional(),value:r.number().optional()}),r.object({name:r.string(),type:r.literal("color"),defaultValue:r.string().optional(),value:r.string().optional()}),r.object({name:r.string(),type:r.literal("string"),defaultValue:r.string().optional(),value:r.string().optional()}),r.object({name:r.string(),type:r.literal("enum"),options:r.array(r.string()),defaultValue:r.string().optional(),value:r.string().optional()}),r.object({name:r.string(),type:r.literal("boolean"),defaultValue:r.boolean().optional(),value:r.boolean().optional()})]),l=r.object({id:r.string(),createdAt:r.number(),content:r.string()});l.extend({nodeId:r.string()});let o=r.object({id:r.string(),html:r.string(),code:r.string(),styles:r.string(),nodesWithProps:r.array(r.string()),chatHistory:r.array(a.zo)}),s=r.object({messages:r.array(l).optional(),props:r.array(i).optional(),generation:o.optional()}),c=r.object({code:r.string(),props:r.record(r.array(i)).describe("Mapping from node id to props array")})},170960:(e,t,n)=>{n.d(t,{W:()=>m,g:()=>u});var a=n(411855),r=n(188507),i=n(915440),l=n(711525),o=n(743282),s=n(725561),c=n(279453);function d(){let e=a.useMemo(()=>(0,o.g)(),[]),t=(0,i.Rs)(c.gvX,{cacheNonce:e}),n=(0,r.wA)();if("loaded"===t.status&&t.data.currentUser.notificationExperimentInfo.status===l.tT.Loaded){let e=(0,l.oA)(t.data.currentUser.notificationExperimentInfo);if(!e)return!1;if("exp_notification_catfile"===e.experimentName||"exp_notification_catfic"===e.experimentName){if("prompt_to_opt_in"===e.type)return!0;n(s.EJ({userId:e.userId,fileKey:e.fileKey,preference:e.preference}))}}return!1}function u(){let e=(0,r.wA)(),t=a.useMemo(()=>(0,o.g)(),[]),n=(0,i.Rs)(c.gvX,{cacheNonce:t}),u=d();a.useEffect(()=>{if(n.data){let t=(0,l.oA)(n.data.currentUser.notificationExperimentInfo);t&&!0===u&&e(s.hU({userId:t.userId,fileKey:t.fileKey,experimentName:t.experimentName}))}},[e,n,u])}function m(){let e=(0,r.wA)(),t=a.useMemo(()=>(0,o.g)(),[]),n=(0,i.Rs)(c.gvX,{cacheNonce:t}),u=d();a.useEffect(()=>{if(n.data){let t=(0,l.oA)(n.data.currentUser.notificationExperimentInfo);t&&!0===u&&e(s.ZI({userId:t.userId,fileKey:t.fileKey,experimentName:t.experimentName}))}},[e,n,u])}},866564:(e,t,n)=>{n.d(t,{OS:()=>u,_2:()=>c,w$:()=>d});var a=n(411855),r=n(776250),i=n(439729),l=n(939863),o=n(335682),s=n(571232);let c="audio-paywall-key",d=(()=>{let e=!0,t=!1;return n=>{t||setTimeout(()=>{n>0&&e?(e=!1,(0,r.sx)("Context Viewed",{name:"join-call-with-others"})):e||0!==n||(t=!0,(0,r.sx)("Context Viewed",{name:"should-close-open-audio-nux"}))},200)}})();function u(){let e;let t=(0,o.q5)(),{userIdsInCall:n}=(0,s.W5)(t?.key||null),r=(0,s.bF)(n,t?.key||null).map(e=>e.name);e=r.length>3?[...r.slice(0,2),(0,l.t)("collaboration.voice.n_others",{numUsers:r.length-2})]:r;let c=a.createElement(i.T,null,e);return(0,l.tx)("collaboration.voice.are_talking_in_this_file",{numVoiceUsers:e.length,voiceUserNames:c,joinText:a.createElement("b",null,(0,l.tx)("collaboration.voice.join_lower"))})}},571232:(e,t,n)=>{n.d(t,{Eo:()=>_,W5:()=>p,bF:()=>g});var a=n(411855),r=n(188507),i=n(730371),l=n(44948),o=n(358145),s=n(891093),c=n(805286),d=n(85098),u=n(860178);function m(){let e=(0,r.d4)(e=>e.multiplayer).allUsers,t=c.R9.useVoiceMetadataBySessionId();function n(e,t){return e.sessionID===t.sessionID&&e.sawMouse===t.sawMouse&&e.deviceName===t.deviceName&&e.name===t.name&&e.imageURL===t.imageURL}return{multiplayerUsersInVoiceCall:(0,l.Op)(()=>e.filter(e=>t[e.sessionID]?.connectedCallId),[e,t],n),multiplayerUsersNotInVoiceCall:(0,l.Op)(()=>e.filter(e=>!t[e.sessionID]?.connectedCallId),[e,t],n)}}function p(e,t){let n=(0,u.iZ)(),i=(0,r.d4)(e=>e.multiplayer.deviceNameFilter),l=(0,r.d4)(t=>e&&t.voice.activeCall[e]),{multiplayerUsersInVoiceCall:s,multiplayerUsersNotInVoiceCall:c}=m(),p=(0,r.d4)(e=>e.voice.userIdsInCallFromProvider),[_,g]=(0,a.useState)(new Set),[f,h]=(0,a.useState)([]),[E,y]=a.useState(),b=(0,o.ZC)(l);return a.useEffect(()=>{l&&!b&&!E&&t&&(y(!0),setTimeout(()=>{y(!1)},2e3))},[l,b,t,E]),a.useEffect(()=>{!function(){if(l&&p.length>1&&!E){let e=new Set(p);g(e);let t=[];for(let n of[...c,...s])e.has(n.userID)||t.push(n);h((0,d._i)(t,i))}else g(new Set(s.map(e=>e.userID))),h((0,d._i)(c,i))}()},[l,s,c,n,i,p,E]),{userIdsInCall:_,usersNotInCall:f}}function _(e,t){let n=(0,r.wA)(),{multiplayerUsersInVoiceCall:l,multiplayerUsersNotInVoiceCall:o}=m(),c=a.useMemo(()=>l.reduce((e,t)=>({...e,[t.userID]:t.userID in e?e[t.userID].add(t):new Set([t])}),{}),[l]),d=a.useMemo(()=>o.reduce((e,t)=>({...e,[t.userID]:t.userID in e?e[t.userID].add(t):new Set([t])}),{}),[o]),u=(0,r.d4)(e=>t&&t in e.activeFileUsers?e.activeFileUsers[t]:void 0,r.bN),p=(0,r.d4)(e=>e.voice.voiceUsersById),[_,g]=(0,a.useState)([]),[f,h]=(0,a.useState)([]),[E,y]=(0,a.useState)([]);return a.useEffect(()=>{let t=[],n=[],a=[];for(let r of e)if(r in c)n.push(...c[r]);else if(r in d)n.push(...d[r]);else if(u&&r in u){let e=u[r];t.push({imageURL:e.imageUrl,name:e.handle,userID:e.id})}else r in p?t.push(p[r]):a.push(r);(0,i.deepEquals)(E,n)||y(n),(0,i.deepEquals)(f,t)||h(t),(0,r.bN)(_,a)||g(a)},[u,e,c,d,p,_,E,f]),a.useEffect(()=>{t&&_.length>0&&n(s.NS({fileKey:t,userIds:_}))},[_,n,t]),{voiceUsersInMultiplayer:E,voiceUsersNotInMultiplayer:f}}function g(e,t){let{voiceUsersInMultiplayer:n,voiceUsersNotInMultiplayer:r}=_(e,t);return a.useMemo(()=>[...n,...r],[n,r])}},590695:(e,t,n)=>{n.d(t,{N:()=>c,S:()=>d});var a=n(411855),r=n(38580),i=n(646240),l=n(374626);let o=(0,r.eU)(0),s=(0,r.eU)(e=>e(o)>0);function c({isVisible:e}){let t=(0,i.Xr)(o);(0,a.useLayoutEffect)(()=>{if(e)return t(e=>e+1),()=>t(e=>Math.max(0,e-1))},[e,t])}function d(){return(0,l.md)(s)}},325538:(e,t,n)=>{n.d(t,{Em:()=>i,TI:()=>l,Wl:()=>r,mt:()=>o});var a=n(411855);function r(e,t){let[n,r]=(0,a.useState)(null),[i,l]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{if(t&&!i){let n=function(t){r(t[e]||null)};return t.volumeLevelsStore.subscribe(n),l(!0),()=>{t.volumeLevelsStore.unsubscribe(n),l(!1)}}},[t]),t)?n:null}function i(e,t,n){let a=t=>{n(t[e]||null)};return t&&t.volumeLevelsStore.subscribe(a),{unsubscribe:()=>t?.volumeLevelsStore.unsubscribe(a)}}function l(e,t){let[n,r]=(0,a.useState)(),[i,l]=(0,a.useState)(!1);if((0,a.useEffect)(()=>{if(t&&!i){let n=function(t){r(t[e]?.isMuted)};return t.volumeLevelsStore.subscribe(n),l(!0),()=>{t.volumeLevelsStore.unsubscribe(n),l(!1)}}},[t]),t)return n}function o(e){let[t,n]=(0,a.useState)(null),[r,i]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{if(e&&!r){let t=function(e){n(e)};return e.recentlySpokeIdStore.subscribe(t),i(!0),()=>{e.recentlySpokeIdStore.unsubscribe(t),i(!1)}}},[e]),t}},493536:(e,t,n)=>{n.d(t,{c6:()=>a,rv:()=>i,s0:()=>r,xP:()=>l});let a=Math.round(33.333333333333336);function r(e,t,n){return Math.abs(e.offsetX-t.offsetX)<=n&&Math.abs(e.offsetY-t.offsetY)<=n&&e.zoomScale===t.zoomScale}let i={viewportPath:{offsetX:0,offsetY:0,zoomScale:1},mousePositionPath:{x:0,y:0},msSinceRecordingStart:0},l="new-recording"},467302:(e,t,n)=>{n.d(t,{an:()=>p,nj:()=>_});var a=n(411855),r=n(188507),i=n(534611),l=n(44948),o=n(848661),s=n(234945),c=n(273226),d=n(510879),u=n(107244),m=n(958317);function p(e,t){let n=a.useMemo(m.vf,[]),d=(0,r.d4)(s.dK),p=(0,r.d4)(u.C1),_=(0,r.d4)(t=>n(t,e)),y=function(e,t){let n=(0,r.d4)(s.dK);if(t!==c.OE.DEFINITION)return(0,c.Yi)(e,n)||(0,c.k4)(e,n)||"";{let t=(0,c.wd)(e,n);return t&&!(0,o.gl)(t)?t.guid:""}}(e,t),b=(0,l.k9)(()=>p&&y?g(y,e,p):[],[p,e,y]),v=(0,l.k9)(()=>p?f(b,e.filter(e=>{let t=d.get(e);return t?.type==="INSTANCE"}),d,p):{},[e,d,p,b]),C=(0,l.k9)(()=>y&&p?h(y,p,d):[],[y,p,d]),w=(0,l.k9)(()=>{let t=e.reduce((e,t)=>{let n=d.get(t),a=n?.symbolId;return a&&a!==i.AD&&e.add(a),e},new Set);return C.filter(e=>t.has(e.guid))},[C,e,d]),T=(0,l.k9)(()=>y&&p?E(y,e,p):{},[y,e,p]);return a.useMemo(()=>({typedPropDefsExcludingHidden:b,variantPropDefs:_,assignmentValuesByDefId:v,allStateVariantProps:C,backingStateVariantProps:w,statePropertyValues:T,productComponentGUID:y}),[b,_,v,C,w,T,y])}function _(e,t,n,r){let i;let o=(0,l.k9)(()=>n?g(n,[e],t):[],[e,n,t]),s=(0,l.k9)(()=>n?(0,m.Jm)(n,t):[],[n,t]),c=(0,l.k9)(()=>f(o,[e],r,t),[e,t,r,o]),d=(0,l.k9)(()=>n&&r.get(n)?.isStateGroup?h(n,t,r):[],[n,t,r]),u=(0,l.k9)(()=>n?E(n,[e],t):{},[e,n,t]),p=r.get(e)?.symbolId;return p&&r.get(p)?.isState||(i=[]),i=d.filter(e=>p===e.guid),a.useMemo(()=>({typedPropDefsExcludingHidden:o,variantPropDefs:s,assignmentValuesByDefId:c,allStateVariantProps:d,backingStateVariantProps:i,statePropertyValues:u}),[o,s,c,d,i,u])}function g(e,t,n){let a=(0,c.ZH)(t,n);return(0,c.aO)(e,n).filter(e=>!a.has(e.explicitDefID))}function f(e,t,n,a){let r={};return e.forEach(e=>{let i=new Set,l=new Set;for(let n of t){let t=a[n]?.assignments?.[e.explicitDefID];if(t){if(t.isMixed){i.add(o.oV);continue}if(null!=t.value){let e=JSON.stringify(t.value);l.has(e)||i.add(t.value),l.add(e)}}}r[e.explicitDefID]=(0,c.m5)(e.type,i,n)}),r}function h(e,t,n){let a=n.get(e);return a?.isStateGroup?a.childrenNodes.reduce((e,n)=>{let a=t[n.guid]?.stateVariantProps;return a?e.push({...a,guid:n.guid}):e.push({propertyValues:n.statePropertyValues,guid:n.guid}),e},[]):[]}function E(e,t,n){let a=n[e]?.stateGroupVariantProps?.propertySortOrder??[];return(0,d.s)(n,t,a)}},286285:(e,t,n)=>{n.d(t,{qC:()=>tB,e6:()=>tK,tO:()=>tV,ME:()=>tU,R$:()=>tW,t8:()=>tz,BK:()=>tG});var a=n(411855),r=n(188507),i=n(463420),l=n(96796),o=n(201706),s=n(587670),c=n(629019),d=n.n(c),u=n(153234),m=n(522739),p=n(255376),_=n(939863),g=n(29680),f=n(721478),h=n(45148),E=n(690710),y=n(893606),b=n(939791),v=n(273226);let C=(0,a.createContext)({isDraggingSomePropDef:!1,setIsDraggingSomePropDef:e=>{}});function w({children:e}){let[t,n]=(0,a.useState)(!1);return a.createElement(C.Provider,{value:{isDraggingSomePropDef:t,setIsDraggingSomePropDef:n}},e)}let T=()=>a.useContext(C);var S=n(467302),x=n(602029),k=n(459401),N=n(634832),I=n(752795),A=n(974563),O=n(256296),L=n(215122),D=n(86625),R=n(707458),M=n(335601),P=n(966712),F=n(498750),B=n(667167),U=n(901536),G=n(244673),K=n(286954),V=n(632430),H=n(843495),z=n(848661),W=n(869156),j=n(335682),$=n(100197),q=n(173454),Y=n(498606),X=n(219101),J=n(158950),Z=n(412297),Q=n(911820),ee=n(773833),et=n(7959),en=n(347495),ea=n(56315),er=n(282263),ei=n(564092),el=n(533573),eo=n(712685),es=n(10921),ec=n(15270),ed=n(343887),eu=n(416580),em=n(794272),ep=n(555074),e_=n(494057),eg=n(107244),ef=n(345572),eh=n(520636);function eE({value:e,hasBinding:t,variableType:n,requestedTypes:r,onVariableSelected:i,onComponentPropSelected:l,onClearBinding:o,recordingKey:c}){let d=(0,ep.kl)("isInstanceSublayerSelected"),m=(0,em.R)(eg.UR),p=e.type===s.Z_n.ALIAS?e.value:void 0,g=e.type===s.Z_n.NODE_FIELD_ALIAS?(0,ee.aA)(e.value.stablePathToNode,e.value.indexOrKey):void 0,f=(0,W.u)(p),h=(0,ei.Px)(),E=a.useMemo(()=>s.CWU.getVariableSetKeyForPublish(f?.variableSetId??"")??"",[f?.variableSetId]),y=E in h?h[(0,L.yG)(E)]:void 0,b=a.useMemo(()=>y?{[(0,L.yG)(E)]:y}:void 0,[y,E]),v=(0,W.BQ)(p??void 0,b)??g?.varValue;return t?a.createElement("span",{className:eh.c6},g&&d&&!f?a.createElement(e_.f,{containingInstanceGUID:m,propDefId:g?.explicitDefId}):a.createElement(ed.K,{onClick:()=>o(v),recordingKey:u.Pt(c,"detachButton"),"aria-label":(0,_.t)("design_systems.component_properties.detach_property")},a.createElement(eu.U,null))):((0,N.assertNotNullish)(n),a.createElement(er.hu,{boundVariableId:void 0,resolvedType:n,requestedTypes:r,onComponentPropSelected:l,onVariableSelected:i},a.createElement(er.V5,null),a.createElement(ef.K,{recordingKey:u.Pt(c,"assignAssignmentProp"),tooltip:(0,_.t)("proto.apply_assignment_property")})))}var ey=n(386976),eb=n(371686);function ev(e){let{index:t,guids:n,typedPropDef:i,value:l,containerWidth:o,forBubbledProps:c,hideIcon:u}=e,m=(0,$.J2)(s.Ez5.propertiesPanelState().shownPropertiesPanels)[s.ibQ.INSTANCE_ITEM],p=(0,r.wA)(),_=(0,r.d4)(e=>e.selectedComponentPropDefId),[g,f]=a.useState(!1),h=a.useRef(null),E=a.useRef(null),C=(0,y.R)();a.useEffect(()=>{_===i.explicitDefID&&m&&(p(G.n0({propDefId:null})),f(!0),h.current&&clearTimeout(h.current),h.current=setTimeout(()=>{f(!1)},1e3))},[p,_,i,m]);let[w,T]=a.useMemo(()=>i.type===s.J0O.BOOL?[s.rXF.BOOLEAN,[s.rXF.BOOLEAN]]:i.type===s.J0O.TEXT?[s.rXF.TEXT_DATA,[s.rXF.STRING]]:i.type===s.J0O.NUMBER?[s.rXF.FLOAT,[s.rXF.FLOAT]]:[void 0,void 0],[i.type]),S=!!((0,P.kc)().ds_variable_props_binding&&i.type!==s.J0O.INSTANCE_SWAP&&void 0!==w&&void 0!==T),x=l&&"object"==typeof l&&"type"in l&&l.type===s.Z_n.ALIAS,k=l&&"object"==typeof l&&"type"in l&&l.type===s.Z_n.NODE_FIELD_ALIAS,I=a.useMemo(()=>k?(0,ee.aA)(l.value.stablePathToNode,l.value.indexOrKey):null,[k,l]),A=k&&I;if(void 0===l)return null;let O=E.current,L=!!O&&O.offsetWidth<O.scrollWidth,R=a.createElement("div",{className:d()(eh.zJ,{[eh.qU]:o===v.O2.RESIZABLE_SIDEBAR,[eh.AN]:i.type===s.J0O.TEXT})},a.createElement("div",{ref:E,className:eh.BY,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":L?i.name:null},i.name)),M=a.createElement(X.e,{condition:S,wrapper:e=>((0,N.assertNotNullish)(w),a.createElement(er.hu,{boundVariableId:void 0,resolvedType:w,requestedTypes:T,onComponentPropSelected:e=>{let t=(0,v.FF)(e);D.l7.user("component-prop-assignment",()=>s.glU.setComponentPropAssignmentVariableData(n,i.explicitDefID,t,c))},onVariableSelected:e=>{void 0!==e&&D.l7.user("component-prop-assignment",()=>s.glU.setComponentPropAssignmentVariableData(n,i.explicitDefID,(0,ei.y$)(w,e.node_id),c))}},a.createElement(er.V5,null),e))},(()=>{if(x&&S)return a.createElement(eS,{...e});if(A&&S)return a.createElement(ex,{...e});let t=k&&!A?i.defaultValue:e.value;return i.type===s.J0O.BOOL?a.createElement(eT,{...e,value:t}):i.type===s.J0O.TEXT?a.createElement(eN,{...e,value:t}):i.type===s.J0O.NUMBER?a.createElement(ek,{...e,value:t}):i.type===s.J0O.INSTANCE_SWAP?a.createElement(eI,{...e,value:t}):a.createElement(a.Fragment,null)})());return i.type!==s.J0O.NUMBER||(0,P.kc)().ds_variable_props_number_type?C?u?a.createElement(ea.g,{appendedClassName:eh.Mj,onMouseEnter:()=>H.dH({nodeIDs:n,defID:i.explicitDefID}),onMouseLeave:()=>H.dH({nodeIDs:[],defID:""}),leftLabel:null,leftInput:R,rightLabel:null,rightInput:M}):a.createElement(b.fn,{recordingKey:`componentPropertyRow.${t}`,appendedClassName:d()(eh.Mj,{[eh.FG]:S}),onMouseEnter:()=>H.dH({nodeIDs:n,defID:i.explicitDefID}),onMouseLeave:()=>H.dH({nodeIDs:[],defID:""}),leftLabel:null,leftInput:R,rightLabel:null,rightInput:M,icon:S?a.createElement(eE,{value:l,hasBinding:x||A,variableType:w,requestedTypes:T,onComponentPropSelected:e=>{let t=(0,v.FF)(e);D.l7.user("component-prop-assignment",()=>s.glU.setComponentPropAssignmentVariableData(n,i.explicitDefID,t,c))},onVariableSelected:async e=>{if((0,N.assertNotNullish)(w),void 0===e)return;let t=await p((0,V.Oe)(e));t&&D.l7.user("component-prop-assignment",()=>s.glU.setComponentPropAssignmentVariableData(n,i.explicitDefID,(0,ei.y$)(w,t),c))},onClearBinding:e=>{D.l7.user("component-prop-assignment",()=>{s.glU.unbindComponentPropAssignment(n,i.explicitDefID,e,c)})},recordingKey:"typedComponentPropAssignmentRow"}):void 0}):a.createElement(et.fI,{className:d()(function(e){switch(e){case v.O2.REGULAR:case void 0:return eh.RZ;case v.O2.WIDE:return eh.oB;case v.O2.UNBOUNDED:return eh.PB;case v.O2.RESIZABLE_SIDEBAR:return eh.i1}}(o),{[eh.P]:g}),recordingKey:`componentPropertyRow.${t}`,onMouseEnter:()=>H.dH({nodeIDs:n,defID:i.explicitDefID}),onMouseLeave:()=>H.dH({nodeIDs:[],defID:""})},R,M):null}function eC(e){switch(e){case v.O2.REGULAR:case void 0:return eh.u8;case v.O2.WIDE:return eh.bq;case v.O2.UNBOUNDED:return eh.CS;case v.O2.RESIZABLE_SIDEBAR:return eh.PQ}}function ew(e){switch(e){case v.O2.REGULAR:case void 0:return eh.ty;case v.O2.WIDE:return eh.aF;case v.O2.UNBOUNDED:return eh.n4}}function eT({value:e,viewOnly:t,guids:n,typedPropDef:i,containerWidth:l,forBubbledProps:o}){let c=(0,r.wA)(),m=(0,y.R)(),p=(0,r.d4)(e=>e.instanceSwapPickerShown),_=a.useCallback(e=>{D.l7.user("toggle-bool-prop-assignment",()=>{(0,P.kc)().ds_variable_props_binding?s.glU.setComponentPropAssignmentVariableData(n,i.explicitDefID,(0,ec.WI)(s.rXF.BOOLEAN,e),o):s.glU.setBoolComponentPropAssignment(n,i.explicitDefID,e,o)}),p?.isShown&&c((0,K.vq)())},[p,n,i.explicitDefID,o,c]);return a.createElement("div",{className:eC(l)},a.createElement("div",{className:ew(l)},m?a.createElement(A.d,{checked:e,label:a.createElement(O.h,null,i.name),onChange:_,recordingKey:u.Pt("componentPropAssignmentToggle",n.join("-"),i.explicitDefID),disabled:t}):a.createElement(en.l,{toggleClassName:function(e){switch(e){case v.O2.RESIZABLE_SIDEBAR:return d()(eh.PQ,eh.E3);case v.O2.REGULAR:case v.O2.UNBOUNDED:case v.O2.WIDE:case void 0:return eh.E3;default:(0,N.assertNever)(e)}}(l),on:e,disabled:t,onChange:_,recordingKey:u.Pt("componentPropAssignmentToggle",n.join("-"),i.explicitDefID),forwardEventsToFullscreen:!0})))}function eS({value:e}){let t=(0,y.R)(),n=(0,z.gl)(e),r=e.value,i=(0,W.u)(r),l=(0,ei.Px)(),o=a.useMemo(()=>s.CWU.getVariableSetKeyForPublish(i?.variableSetId??"")??"",[i?.variableSetId]),c=o in l?l[(0,L.yG)(o)]:void 0,d=a.useMemo(()=>c?{[(0,L.yG)(o)]:c}:void 0,[c,o]),u=(0,W.BQ)(r??void 0,d);return i?a.createElement("div",{className:eh.K8},a.createElement(es.P,{value:n?(0,_.t)("design_systems.component_properties.mixed"):i?.name,variableId:r&&!n?r:void 0,isStandalone:!0,thumbnailValue:"MIXED"!==u?u:void 0,isDeleted:(0,el.eF)(i),classNameOverride:t?U.cx.wFull.$:void 0,varaiablePillContainerClassName:t?eh.Ro:void 0,fullWidth:t})):a.createElement(a.Fragment,null)}function ex({value:e}){let t=(0,z.gl)(e),n=(0,y.R)(),r=(0,ee.aA)(e.value.stablePathToNode,e.value.indexOrKey);if(!r)return a.createElement(a.Fragment,null);let i=r?(0,ee.Xx)(r.varValue.resolvedType):void 0;return a.createElement("div",{className:eh.K8},a.createElement(es.P,{value:t?(0,_.t)("design_systems.component_properties.mixed"):r.name,isStandalone:!0,thumbnailValue:i??void 0,classNameOverride:n?U.cx.wFull.$:void 0,varaiablePillContainerClassName:n?eh.Ro:void 0,fullWidth:n,colorTheme:eo.J.COMPONENT}))}function ek({value:e,typedPropDef:t,guids:n,forBubbledProps:r,containerWidth:i,viewOnly:l,index:o}){let{inputRef:c,inputProps:{onChange:m,onFocus:p,onMouseLeave:g,onMouseUp:f,onKeyUp:h}}=(0,M.X)({onFocus:()=>{(0,z.gl)(e)?y(""):y(w)},onChange:e=>y(e.currentTarget.value)}),[E,y]=a.useState(null),b=(0,z.gl)(e)?0:Number(e),C=a.useMemo(()=>{let t=!E||!(0,v.Rq)(E);return(0,z.gl)(e)||t?b:(0,v.T1)(E)},[E,e,b]),w=(0,z.gl)(e)?(0,_.t)("design_systems.component_properties.mixed"):(0,v.lg)(b),T=()=>{(0,I.isNotNullish)(E)&&D.l7.user("set-number-prop-assignment",()=>{(0,P.kc)().ds_variable_props_binding?s.glU.setComponentPropAssignmentVariableData(n,t.explicitDefID,(0,ec.WI)(s.rXF.FLOAT,C),r):s.glU.setNumberComponentPropAssignment(n,t.explicitDefID,C,r)}),c.current&&(c.current.scrollTop=0,c.current.blur()),y(null)};return a.createElement("div",{className:eC(i)},a.createElement("div",{className:ew(i)},a.createElement(J.v,{ref:e=>{e?.textarea&&(c.current=e.textarea)},className:d()({[eh.mD]:l,[eh.x1]:""===w&&!l,[eh.hF]:!l&&""!==w}),value:null===E?w:E,placeholder:(0,z.gl)(e)?w:void 0,onChange:m,onFocus:p,onMouseLeave:g,onMouseUp:f,onKeyDown:e=>{e.keyCode!==F.Uz.ENTER||e.shiftKey||(e.preventDefault(),T())},onKeyUp:h,onBlur:T,disableInput:l,recordingKey:u.Pt("componentPropAssignmentNumberInput",n.join("-"),o)})))}function eN({value:e,typedPropDef:t,guids:n,forBubbledProps:r,containerWidth:i,viewOnly:l,index:o}){let{inputRef:c,inputProps:{onChange:m,onFocus:p,onMouseLeave:g,onMouseUp:f,onKeyUp:h}}=(0,M.X)({onFocus:()=>{(0,z.gl)(e)?y(""):y(b)},onChange:e=>y(e.currentTarget.value)}),[E,y]=a.useState(null),b=t.type===s.J0O.TEXT?(0,z.gl)(e)?(0,_.t)("design_systems.component_properties.mixed"):e:null,v=()=>{(0,I.isNotNullish)(E)&&D.l7.user("set-text-prop-assignment",()=>{(0,P.kc)().ds_variable_props_binding?s.glU.setComponentPropAssignmentVariableData(n,t.explicitDefID,(0,ec.WI)(s.rXF.TEXT_DATA,{characters:E}),r):s.glU.setTextComponentPropAssignment(n,t.explicitDefID,E,r)}),c.current&&(c.current.scrollTop=0,c.current.blur()),y(null)};return a.createElement("div",{className:eC(i)},a.createElement("div",{className:ew(i)},a.createElement(J.v,{ref:e=>{e?.textarea&&(c.current=e.textarea)},className:d()({[eh.mD]:l,[eh.x1]:""===b&&!l,[eh.hF]:!l&&""!==b}),value:null===E?b:E,placeholder:(0,z.gl)(e)?b:null,onChange:m,onFocus:p,onMouseLeave:g,onMouseUp:f,onKeyDown:e=>{e.keyCode!==F.Uz.ENTER||e.shiftKey||(e.preventDefault(),v())},onKeyUp:h,onBlur:v,disableInput:l,recordingKey:u.Pt("componentPropAssignmentTextInput",n.join("-"),o)})))}function eI({value:e,viewOnly:t,guids:n,typedPropDef:i,containerWidth:l,forBubbledProps:o,inPlayground:c,sceneGraph:d,instanceSwapPickerInitialHeight:u,instanceSwapPickerInitialPosition:m,entrypointForInstanceSwapPicker:p}){let g=(0,r.wA)(),f=(0,r.d4)(j.sS),{preferredValues:h,preferredValuesFetchError:E,retryPreferredValuesFetch:y}=(0,ey.xP)(i),b=a.useMemo(()=>E?a.createElement(eb.u,{onRetry:y,recordingKey:"componentPropAssignment"}):void 0,[E,y]),C=a.useCallback(e=>{g((0,V.uP)({item:e,alwaysFetch:c,targetUpsertScene:c?s.ZiZ.PLAYGROUND_SCENE:s.ZiZ.ACTIVE_SCENE,callback:t=>{D.l7.user("set-instance-prop-assignment",()=>s.glU.setInstanceComponentPropAssignment(n,i.explicitDefID,t,e.type===q.PW.STATE_GROUP?(0,v.ui)(e,t,f):"",o,0===h.length?s.VQu.NOT_APPLICABLE:h.includes(e)?s.VQu.YES:s.VQu.NO))}})),H.dH({nodeIDs:[],defID:""})},[g,o,n,f,c,h,i]),w=(0,k.flatten)(n.map(e=>s.glU.getInstanceSublayersControlledByDirectPropAssignment(e,i.explicitDefID).map(e=>R.q.instance.guidFromDeveloperFriendlyId(e)))),{modalWidth:T}=(0,B.TQ)(B.Zl.INSTANCE_SWAP_PICKER);return a.createElement("div",{className:eC(l)},a.createElement("div",{className:ew(l)},a.createElement(Q.x,{fill:l===v.O2.UNBOUNDED,pickerID:`instance-swap-prop-assignment-picker-${n.join("-")}.${i.explicitDefID}`,pickerWidth:T,shouldPerformSwapOnClick:!1,instanceSwapNode:e,title:(0,_.t)("design_systems.component_properties.choose_instance"),disableToggle:t,preferredItems:h,preferredValuesErrorComponent:b,onSwapCallback:C,sceneGraph:d,instanceSwapPickerInitialHeight:u,initialPosition:m,entrypointForLogging:p})),a.createElement(Z.h_,{instanceAndSublayerGUIDs:w,showAllInstanceOptions:!1}))}function eA({typedPropDefs:e,guids:t,assignmentValues:n,forBubbledProps:r,sceneGraph:i,inPlayground:l,containerWidth:o,viewOnly:s,hideIcon:c,instanceSwapPickerInitialHeight:d,instanceSwapPickerInitialPosition:u,recordingKey:m,entrypointForInstanceSwapPicker:p}){return a.createElement(x.q,{listItems:e,updateSelection:void 0,isDragDisabled:!0,renderListItem:(e,m)=>a.createElement(ev,{key:m,typedPropDef:e,guids:t,index:m,value:n[e.explicitDefID],containerWidth:o,viewOnly:s,hideIcon:c,forBubbledProps:r,sceneGraph:i,inPlayground:l,instanceSwapPickerInitialHeight:d,instanceSwapPickerInitialPosition:u,entrypointForInstanceSwapPicker:p}),recordingKey:m})}var eO=n(268537),eL=n(356390),eD=n(233890),eR=n(109388),eM=n(75395),eP=n(221768),eF=n(536825),eB=n(498481),eU=n(31524),eG=n(91408),eK=n(163023),eV=n(738269),eH=n(293017),ez=n(226055),eW=n(237929),ej=n(234945),e$=n(420186),eq=n(224690);function eY({children:e,inputRef:t,canEdit:n}){return n?a.createElement("div",{className:"false_input_containing_svg--falseInput--cKug0 raw_components--borderFocusWithin--BaipZ",onClick:()=>t.current?.focus(),role:"textbox",tabIndex:0},e):a.createElement("div",{className:U.cx.hFull.wFull.relative.$},e)}var eX=n(731262),eJ=n(189685),eZ=n(837746);let eQ="component_prop_def_row--input--Heq8r props_panel--input--pkL0- raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u sf_pro--uiFontWithSFProFallback--m-p9V",e0="component_prop_def_row--componentPropDefName--bUVTI ellipsis--ellipsis--Tjyfa sf_pro--uiFontWithSFProFallback--m-p9V",e1="component_prop_def_row--componentPropVariantValues--mTqSx",e2="component_prop_def_row--selectedRowIcon--3uhSg",e5="component_prop_def_row--rowAction--rAfBQ",e3="component_prop_def_row--selectedRowAction--P8TAv component_prop_def_row--rowAction--rAfBQ";var e4=n(531800),e6=n(999918),e8=n(87171),e7=n(349307);let e9="typed-prop-def-del-dropdown",te="variant-prop-def-del-dropdown",tt=e=>{e.stopPropagation()},tn=e=>{e.stopPropagation(),e.preventDefault()};function ta(e){let{index:t,guids:n,componentPropDef:i,isSelected:l,isDragging:c,singletonRow:d,onPropertyMouseDown:m,onPropertyMouseMove:p,onPropertyMouseUp:_,selectRow:g,onKeyDown:f,recordingKey:h}=e,y=(0,ez.GS)(),b=a.useMemo(eq.Pe,[]),{pickerShown:C,selectedComponentPropDefId:w,componentWithPropDefSelected:T,allStates:S,propertySortOrder:x}=(0,em.R)(e=>{let t=(0,ej.qd)(e),n=1===t.length?b(e,t[0]):[];return{pickerShown:e.pickerShown,selectedComponentPropDefId:e.selectedComponentPropDefId,componentWithPropDefSelected:i.kind===o.u.TYPED&&n.some(e=>e.explicitDefID===i.explicitDefID),allStates:(0,E.ow)(e)??[],propertySortOrder:(0,E.OC)(e)??[]}}),k=(0,r.d4)(eg.Nw),N=(0,r.wA)(),I=a.useCallback(e=>W(e.currentTarget.value),[]),{inputRef:A,inputProps:{onChange:O,onFocus:L,onMouseLeave:R,onMouseUp:B}}=(0,M.X)({onChange:I}),[U,V]=a.useState(!1),[z,W]=a.useState(null),j=a.useRef(null),$=a.useRef(null),q=a.useRef(null),Y=i.kind===o.u.TYPED?i.explicitDefID:void 0,X=i.kind===o.u.TYPED?i.type:void 0,J=i.kind===o.u.VARIANT?i.values:void 0,Z=w&&w===Y,Q=null!==z,ee=a.useMemo(()=>C?.id===eJ.aR&&(i.kind===o.u.TYPED?C.data.defID===Y:C.data.name===i.name),[i,C,Y]);a.useEffect(()=>{Q&&A.current?.select()},[Q,A]);let et=()=>{z?(W(null),i.kind===o.u.TYPED?D.l7.user("edit-prop-def-name",()=>s.glU.editComponentPropDefName(i.explicitDefID,z)):i.kind===o.u.VARIANT&&D.l7.user("edit-variant-prop-name",()=>(0,eX.q1)(i.name,z,S,x))):y&&W(i.name)},en=a.useCallback(()=>{N(G.n0({propDefId:null})),N((0,K.vq)());let e=eR.findDOMNode(y?$.current:j.current),t=e?(0,e$.cn)(e,v.wh):{};N(eH.u1({id:eJ.aR,initialX:t?.x,initialY:t?.y,data:i.kind===o.u.TYPED?{defID:Y}:{name:i.name}}))},[N,y,i,Y]);a.useEffect(()=>{Z&&T&&!ee&&en()},[Z,T,ee,en]);let ea=a.useCallback(e=>{C?.id!==eJ.aR||ee||N(eH.XE()),_&&_(e)},[N,ee,C,_]),er=a.useCallback(()=>{ee?N(eH.XE()):(en(),g())},[N,ee,g,en]),ei=a.useCallback(()=>{V(!0),Y&&H.dH({nodeIDs:n,defID:Y})},[n,Y]),el=a.useCallback(()=>{V(!1),H.dH({nodeIDs:[],defID:""})},[]),eo=a.useCallback(e=>{if(i.kind===o.u.VARIANT&&d){N(eV.oB());return}C?.id===eJ.aR&&N(eH.XE()),N(eV.j7({type:i.kind===o.u.TYPED?e9:te,data:{position:{top:e.clientY,left:Math.min(e.clientX,window.innerWidth-(0,eG.hG)(eZ.uj0)/2)}}}))},[N,i.kind,d,C]),es=(0,u.rf)(h,"contextmenu",e=>{eo(e)}),ec=(0,u.rf)(h,"mouseenter",e=>{ei()}),ed=(0,u.rf)(h,"mouseleave",e=>{el()}),eu=(0,u.rf)(h,"mouseup",e=>{ea(e)}),ep=(0,u.rf)(h,"mousedown",e=>{Q&&W(null),ee&&N(eH.XE()),m&&m(e)}),e_=(0,u.rf)(h,"mousemove",e=>{p&&p(e)},{recordMetadata:e=>({bounds:e.currentTarget.getBoundingClientRect(),pageX:e.pageX,pageY:e.pageY}),playbackMetadata:e=>({currentTarget:{getBoundingClientRect:()=>e.bounds},pageX:e.pageX,pageY:e.pageY})}),ef=u.rf(h,"dblclick",()=>{g(),W(i.name)}),eh=u.rf(h,"click",()=>{g(),W(i.name)}),eE=q.current,eb=!!eE&&eE.offsetWidth<eE.scrollWidth,{preferredValues:ev}=(0,ey.xP)(i),eC=(0,ey.wS)(ev).size>0,ew=!Q&&(i.error!==s.uXg.NONE||eC),eT=!Q&&(U||ee),eS=y?ti:tr;return(0,P.kc)().ds_variable_props_number_type||X!==s.J0O.NUMBER?a.createElement(eS,{isSelected:l,singletonRow:d,isDragging:c,handlePropertyMouseDown:ep,handlePropertyMouseMove:e_,handlePropertyMouseUp:eu,handlePropertyMouseEnter:ec,handlePropertyMouseLeave:ed,handleContextMenu:es,onDoubleClick:y?void 0:ef,onClick:y?eh:void 0,onKeyDown:f,rowRef:j,ui3RowRef:$,typedPropType:X,isEditingDefName:Q,defNameInputRef:A,componentPropDef:i,defNameInputOnMouseUp:B,defNameInputOnMouseLeave:R,defNameInputOnFocus:L,onInputKeyDown:e=>{e.stopPropagation(),(e.keyCode===F.Uz.ESCAPE||e.keyCode===F.Uz.ENTER)&&et()},defNameInputOnChange:O,submitDefName:et,defNameRef:q,index:t,isDefNameTruncated:eb,variantPropValues:J,shouldShowEditIcons:eT,editComponentPropPickerShown:ee,toggleEditPropPicker:er,onDeleteProp:()=>{i.kind===o.u.TYPED?D.l7.user("delete-prop-def",()=>s.glU.deleteComponentPropDefs([i.explicitDefID])):k&&D.l7.user("delete-variant-prop",()=>(0,eX.bk)([i.name],S,x,k))},shouldShowErrorIcon:ew,preferredValuesUnpublishedError:eC}):a.createElement(a.Fragment,null)}function tr({isSelected:e,singletonRow:t,isDragging:n,handlePropertyMouseDown:r,handlePropertyMouseMove:i,handlePropertyMouseUp:l,handlePropertyMouseEnter:o,handlePropertyMouseLeave:c,handleContextMenu:d,onDoubleClick:p,onKeyDown:g,rowRef:f,typedPropType:h,isEditingDefName:E,defNameInputRef:y,componentPropDef:b,defNameInputOnMouseUp:C,defNameInputOnMouseLeave:w,defNameInputOnFocus:T,onInputKeyDown:S,defNameInputOnChange:k,submitDefName:N,defNameRef:I,index:A,isDefNameTruncated:O,variantPropValues:L,shouldShowEditIcons:D,editComponentPropPickerShown:R,toggleEditPropPicker:M,onDeleteProp:P,shouldShowErrorIcon:F,preferredValuesUnpublishedError:B}){return a.createElement(a.Fragment,null,a.createElement(x.e,{selected:e,singletonRow:t,dragging:n,hideGrabber:!1,onMouseDown:r,onMouseMove:i,onMouseUp:l,onMouseEnter:o,onMouseLeave:c,onContextMenu:d,onDoubleClick:p,onKeyDown:g,tabIndex:0,ref:f},a.createElement("div",{className:"component_prop_def_row--componentPropRow--qb8-e"},a.createElement(eK.B,{svg:h?(0,v.qe)(h):e4.A,className:e?"component_prop_def_row--componentPropIconSelected--uZsSM component_prop_def_row--componentPropIcon--OrfM-":"component_prop_def_row--componentPropIcon--OrfM-","data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.component_properties.property_icon_tooltip",{propertyType:(0,v.xb)(h??s.J0O.VARIANT)})}),E?a.createElement(m.u2,{forwardedRef:y,className:eQ,defaultValue:b.name,onMouseUp:C,onMouseLeave:w,onFocus:T,onMouseDown:e=>tt(e),onKeyDown:S,onChange:k,onBlur:N,onContextMenu:tn,recordingKey:"componentPropRowDefNameInput"}):a.createElement(a.Fragment,null,a.createElement(m.D8,{forwardedRef:I,className:h?e0:"component_prop_def_row--componentPropDefVariantName--vZEqv component_prop_def_row--componentPropDefName--bUVTI ellipsis--ellipsis--Tjyfa sf_pro--uiFontWithSFProFallback--m-p9V",recordingKey:u.Pt("componentPropDefName",A),"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":O?b.name:null},b.name),L&&a.createElement("div",{className:e1},"\u30FB",L.join((0,_.t)("design_systems.component_properties.variant_property_values_delimiter")))),D&&a.createElement(a.Fragment,null,a.createElement(et.YW,{svg:e6.A,recordingKey:"componentPropEditButton",className:e&&!R?e2:void 0,onClick:M,onDoubleClick:tt,onMouseDown:tt,onContextMenu:tn,selected:R,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.component_properties.edit_property")}),a.createElement(et.K0,{svg:e7.A,recordingKey:"componentPropDeleteButton",className:e?e2:void 0,onClick:P,onDoubleClick:tt,onMouseDown:tt,onContextMenu:tn,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.component_properties.delete_property",{numSelected:1})})),F&&a.createElement(eK.B,{svg:e8.A,className:"component_prop_def_row--componentPropIconError--BikGf","data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,v.iz)(b.error,B),"data-tooltip-offset-y":1,"data-tooltip-timeout-delay":50}))),R&&a.createElement(eJ.pf,{componentPropDef:b}))}function ti({isSelected:e,singletonRow:t,isDragging:n,handlePropertyMouseDown:r,handlePropertyMouseMove:i,handlePropertyMouseUp:l,handlePropertyMouseEnter:c,handlePropertyMouseLeave:p,handleContextMenu:f,onClick:h,onKeyDown:E,ui3RowRef:y,typedPropType:C,isEditingDefName:w,defNameInputRef:S,componentPropDef:x,defNameInputOnMouseUp:k,defNameInputOnMouseLeave:N,defNameInputOnFocus:I,onInputKeyDown:A,defNameInputOnChange:O,submitDefName:L,defNameRef:D,index:R,isDefNameTruncated:M,variantPropValues:P,shouldShowEditIcons:F,editComponentPropPickerShown:B,toggleEditPropPicker:G,onDeleteProp:K,shouldShowErrorIcon:V,preferredValuesUnpublishedError:H}){let W=(0,g.eY)(),j=[],$=w||B,q=e&&!$&&n,{isDraggingSomePropDef:X}=T(),J=!q&&X;(F&&!J||q)&&j.push(a.createElement(et.YW,{recordingKey:"componentPropEditButton",className:e&&!$?e3:e5,onClick:G,onDoubleClick:tt,onMouseDown:tt,onContextMenu:tn,selected:B,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.component_properties.edit_property")},a.createElement(eP.A,null)),a.createElement(et.K0,{recordingKey:"componentPropDeleteButton",className:e&&!$?e3:e5,onClick:K,onDoubleClick:tt,onMouseDown:tt,onContextMenu:tn,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.component_properties.delete_property",{numSelected:1})},a.createElement(eF.O,null))),V&&j.push(a.createElement("span",{"data-testid":`component-prop-error-icon-${R}`,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,v.iz)(x.error,H),"data-tooltip-offset-y":1,"data-tooltip-timeout-delay":50},a.createElement(eB.r,null))),j.length||j.push(a.createElement("div",{className:U.cx.w24.$}));let Z=(0,a.useMemo)(()=>{if(x.kind===o.u.VARIANT){if(P)return P.join((0,_.t)("design_systems.component_properties.variant_property_values_delimiter"))}else{if(x.varValue.type===s.Z_n.BOOLEAN)return x.varValue.value?(0,_.t)("design_systems.component_properties.boolean_true"):(0,_.t)("design_systems.component_properties.boolean_false");if(x.varValue.type!==s.Z_n.SYMBOL_ID)return x.defaultValue;let e=(0,v.wd)([x.defaultValue],W);if(e)return(0,z.gl)(e)?(0,_.t)("design_systems.instance_swap_picker.mixed"):(0,eW.kH)(e.name)}},[x,W,P]),Q=Z||C===s.J0O.NUMBER&&0===Z;return a.createElement(a.Fragment,null,a.createElement(b.Y9,{selected:q,singletonRow:t,dragging:n,hideGrabber:!1,onMouseDown:r,onMouseMove:i,onMouseUp:l,onMouseEnter:c,onMouseLeave:p,onContextMenu:f,onKeyDown:E,tabIndex:0,ref:y,containerClassName:d()("component_prop_def_row--ui3ComponentPropRow--Sld-J",{"component_prop_def_row--isDraggingRow--p9Tzv":q,"component_prop_def_row--isDraggingOtherRow--WdU8i":J})},a.createElement(b.oO,{onMouseDown:tt,input:w?a.createElement(eY,{inputRef:S,canEdit:!0},C?(0,v.zn)(C):a.createElement(eU.y,null),a.createElement(m.u2,{forwardedRef:S,className:eQ,defaultValue:x.name,onMouseUp:k,onMouseLeave:N,onFocus:I,onMouseDown:e=>tt(e),onKeyDown:A,onChange:O,onBlur:L,onContextMenu:tn,recordingKey:"componentPropRowDefNameInput"})):a.createElement(eM.E,{onClick:h,className:d()("component_prop_def_row--ui3ComponentPropDefNameContainer--fBQXq component_prop_def_row--ui3ComponentPanelNameAndIcon--01Z6g",{"component_prop_def_row--ui3ComponentPropDefNameContainerDragging--VELue":q})},a.createElement("span",{"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.component_properties.property_icon_tooltip",{propertyType:(0,v.xb)(C??s.J0O.VARIANT)})},C?(0,v.zn)(C):a.createElement(eU.y,null)),a.createElement("div",{className:"component_prop_def_row--ui3ComponentPropDefNameAndValue--2w-8p"},a.createElement(m.D8,{forwardedRef:D,className:e0,recordingKey:u.Pt("componentPropDefName",R),"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":M?x.name:null},x.name),Q&&a.createElement("div",{className:e1},"\u30FB",Z)))},...j)),B&&a.createElement(eJ.pf,{componentPropDef:x}))}let tl=eO.ms,to=eO.c$;function ts({defs:e,guids:t,selectedIndices:n,onSelectIndices:i,recordingKey:l}){let o=(0,r.d4)(e=>e.dropdownShown),c=o?.type===e9,d=e=>(e?.key==="Backspace"||e?.key==="Delete")&&(g(),!0),m=u.v_(l,"keydown",e=>{d(e)}),p=u.fo(`${l}.fullscreen`,"keydown",e=>{d(e.event)&&e.accept()}),g=a.useCallback(()=>{if(!n.length)return;let t=n.map(t=>e[t].explicitDefID);D.l7.user("delete-prop-defs",()=>s.glU.deleteComponentPropDefs(t))},[e,n]),f=a.useCallback((e,t,n)=>{let a=t?t.explicitDefID:"",r=n?n.explicitDefID:"";D.l7.user("reorder-prop-defs",()=>e.forEach(e=>{s.glU.insertPropDefBetween(e.explicitDefID,a,r),a=e.explicitDefID})),eL.Y5.commit()},[]),h=(0,y.R)(),E=a.useRef(null);a.useEffect(()=>{n.length?E.current?.focus():E.current?.blur()},[n]);let{setIsDraggingSomePropDef:b}=T();return a.createElement(eD.vL,{handleKeyDown:p,ref:E,name:"typed-props-list",focusOnMount:!0},a.createElement(x.q,{listItems:e,selectedIndices:n,updateSelection:i,onInsertItemsBetweenValues:f,onDragStart:()=>b(!0),onDragEnd:()=>b(!1),renderListItem:(n,r,o,s,c,d,p)=>a.createElement(ta,{key:r,index:r,guids:t,componentPropDef:n,isSelected:o,isDragging:s,selectRow:()=>i([r]),singletonRow:1===e.length,onPropertyMouseDown:c,onPropertyMouseMove:d,onPropertyMouseUp:p,onKeyDown:m,recordingKey:u.Pt(l,"row",r)}),recordingKey:l}),c&&(!!n.length||h)&&a.createElement(tl,{style:o.data.position,positionFixed:!0},a.createElement(to,{onClick:g,recordingKey:"deleteProp"},(0,_.tx)("design_systems.component_properties.delete_property",{numSelected:n.length}))))}var tc=n(44948),td=n(236478),tu=n(496470),tm=n(83695),tp=n(538697),t_=n(830002),tg=n(776621),tf=n(761334),th=n(510879),tE=n(759209),ty=n(424148);let tb={format:e=>e||eX.xJ};function tv(e){let{guids:t,index:n,variantPropDef:i,stateGroupGUID:l,allStateVariantProps:o,backingStateVariantProps:c,statePropertyValues:d,forBubbledProps:m,containerWidth:p,viewOnly:g,hideIcon:f,selectedPropertyValueHistory:h,sceneGraph:E,updateHistory:C}=e,w=(0,r.wA)(),T=(0,r.d4)(e=>e.instanceSwapPickerShown),S=(0,$.J2)(s.Ez5.editorState().inPlaygroundMode),x=(0,t_.D5)(i.name,i.values),k=(0,tc.k9)(()=>(0,th.D)(t,E),[t,E]),N=a.useRef(null),A=a.useRef(null),O=(0,y.R)(),{isBound:R,setBinding:M,boundVariableId:F,onExpressionSubmitted:B,variableConsumptionMapValue:G}=function(e){let t=(0,r.wA)(),{variableConsumptionMap:n,setVariableConsumptionMap:i}=(0,ei.R1)(),{consumedVariable:l,updateVariableConsumption:o,clearVariableConsumption:c}=(0,ei.u3)(["VARIANT_PROPERTIES"]),d=(0,a.useCallback)(n=>{let a={},r=l&&(0,z.hS)(l)&&l.type===s.Z_n.EXPRESSION?l.value.expressionArguments[0]:{type:s.Z_n.MAP,resolvedType:s.rXF.MAP,value:{}};n?t((0,V.Yi)({item:n,callback:t=>{n.resolvedType===s.rXF.STRING?r.value[e]={type:s.Z_n.ALIAS,resolvedType:s.rXF.STRING,value:t}:(n.resolvedType===s.rXF.BOOLEAN||n.resolvedType===s.rXF.FLOAT)&&(r.value[e]={type:s.Z_n.EXPRESSION,resolvedType:s.rXF.STRING,value:{expressionFunction:s.JTp.STRINGIFY,expressionArguments:[(0,ei.y$)(n.resolvedType,t)]}}),a.VARIANT_PROPERTIES={type:s.Z_n.EXPRESSION,resolvedType:s.rXF.SYMBOL_ID,value:{expressionArguments:[r],expressionFunction:s.JTp.RESOLVE_VARIANT}},i(a),(0,tf.ty)(t,n.resolvedType)}})):(delete r.value[e],0===Object.keys(r.value).length?a.VARIANT_PROPERTIES=null:a.VARIANT_PROPERTIES={type:s.Z_n.EXPRESSION,resolvedType:s.rXF.SYMBOL_ID,value:{expressionArguments:[r],expressionFunction:s.JTp.RESOLVE_VARIANT}},i(a))},[l,i,t,e]),u=(0,a.useCallback)(t=>{let a=n.VARIANT_PROPERTIES&&!n.VARIANT_PROPERTIES.isMixed&&n.VARIANT_PROPERTIES.type===s.Z_n.EXPRESSION&&n.VARIANT_PROPERTIES.value.expressionArguments[0].type===s.Z_n.MAP?n.VARIANT_PROPERTIES.value.expressionArguments[0]:{type:s.Z_n.MAP,resolvedType:s.rXF.MAP,value:{}};return t&&(0,z.hS)(t)?((t.resolvedType===s.rXF.STRING||t.resolvedType===s.rXF.BOOLEAN||t.resolvedType===s.rXF.FLOAT)&&(a.value[e]={type:s.Z_n.EXPRESSION,resolvedType:s.rXF.STRING,value:{expressionFunction:s.JTp.STRINGIFY,expressionArguments:[t.type===s.Z_n.ALIAS?(0,ei.y$)(t.resolvedType,t.value):t]}}),n.VARIANT_PROPERTIES={type:s.Z_n.EXPRESSION,resolvedType:s.rXF.SYMBOL_ID,value:{expressionArguments:[a],expressionFunction:s.JTp.RESOLVE_VARIANT}},i(n),!0):(delete a.value[e],0===Object.keys(a.value).length?n.VARIANT_PROPERTIES=null:n.VARIANT_PROPERTIES={type:s.Z_n.EXPRESSION,resolvedType:s.rXF.SYMBOL_ID,value:{expressionArguments:[a],expressionFunction:s.JTp.RESOLVE_VARIANT}},i(n),!1)},[e,i,n]),m=(0,a.useMemo)(()=>{if(l&&(0,z.hS)(l))try{let t=l.value.expressionArguments[0].value[e];if(!t)return null;if(t.type===s.Z_n.EXPRESSION&&t.value.expressionFunction===s.JTp.STRINGIFY&&(t=t.value.expressionArguments[0]),t.type===s.Z_n.ALIAS)return t.value}catch(e){(0,tg.x1)("variables","error checking variant binding map",{message:e.message},{reportAsSentryError:!0})}return null},[l,e]);return{isBound:!!m,setBinding:d,clearBinding:c,boundVariableId:m,onExpressionSubmitted:(0,P.kc)().prototype_expressions_nodefields?u:void 0,variableConsumptionMapValue:n.VARIANT_PROPERTIES}}(e.variantPropDef.name),[H,j]=(0,er.JV)(["VARIANT_PROPERTIES"],B&&"TOGGLE"===x.type?s.rXF.BOOLEAN:s.rXF.STRING,M,{requestedTypes:"TOGGLE"===x.type?[s.rXF.BOOLEAN]:[s.rXF.STRING,s.rXF.FLOAT],metadata:e.variantPropDef.name},B);function q(e,t){let n=(0,t_.Tj)(h,e,t);if(t===(0,_.t)("proto.assign_variant")){j(A.current);return}let a={};for(let r of c){let{propertyValues:i}=r,l={...i,[e]:t},s=(0,eX.Jj)(l,n,o);null!==s&&(a[r.guid]=s)}let r={};for(let e of Object.keys(a)){let t=a[e].guid;r[t]=(r[t]||[]).concat(k[e])}if(S){s.glU.replaceSymbolBackingInstancesInPlayground(r),C(n),T?.isShown&&w((0,K.vq)());return}0!==Object.keys(r).length&&((0,eX.zb)("Swapping A Variant",l??"",{source:m?"bubbled_sidebar":"sidebar"}),D.l7.user("change-variant-prop",()=>(0,tu.Aw)(r))),C(n)}let X=d.hasOwnProperty(x.property)?d[x.property]:void 0,J=i.values;function Z(){M(void 0)}let Q=(0,W.u)(F??void 0),ee=(0,ei.Px)(),en=a.useMemo(()=>s.CWU.getVariableSetKeyForPublish(Q?.variableSetId??"")??"",[Q?.variableSetId]),eo=en in ee?ee[(0,L.yG)(en)]:void 0,ec=a.useMemo(()=>eo?{[(0,L.yG)(en)]:eo}:void 0,[eo,en]),em=(0,W.BQ)(F??void 0,ec),{assignmentValue:ep,iconButton:e_}=(()=>{if(R&&Q&&(0,I.isNotNullish)(em)||(0,P.kc)().prototype_expressions_nodefields&&B&&G){let t;return(0,I.isNotNullish)(em)&&"MIXED"!==em&&(J.some(e=>e.toLowerCase()===em.value.toString().toLowerCase())?X?.toString().toLowerCase()!==em.value.toString().toLowerCase()&&(t=(0,_.t)("design_systems.component_properties.invalid_variant_binding_state")):t=(0,_.t)("design_systems.component_properties.invalid_variant_binding")),{assignmentValue:B&&G?a.createElement(tm.y3,{targetVariableData:G.isMixed?void 0:G,onClick:()=>{j(A.current)},isNarrowPanel:!0,isInCell:!1,showVariableThumbnails:!0,isInConditional:!1,isMixed:G.isMixed,variantProperty:e.variantPropDef.name}):Q&&a.createElement("div",{className:eh.K8},a.createElement(es.P,{value:(0,z.gl)(X)?(0,_.t)("design_systems.component_properties.mixed"):Q.name,variableId:(0,z.gl)(X)?void 0:F??void 0,isStandalone:!0,invalid:void 0!==t,thumbnailValue:"MIXED"===em||t?void 0:em,tooltipOverride:t,isDeleted:(0,el.eF)(Q),classNameOverride:O?U.cx.wFull.$:void 0,varaiablePillContainerClassName:O?eh.Ro:void 0,fullWidth:O})),iconButton:O?a.createElement("span",{className:eh.c6},a.createElement(ed.K,{onClick:Z,"aria-label":(0,_.t)("design_systems.component_properties.detach_property"),recordingKey:u.Pt(e.recordingKey,"detachVariantProp"),htmlAttributes:{"data-tooltip":(0,_.t)("design_systems.component_properties.detach_property"),"data-tooltip-type":Y.Ib.TEXT}},a.createElement(eu.U,null))):a.createElement(et.K0,{className:eh.__,svg:ty.A,onClick:Z,"data-tooltip":(0,_.t)("design_systems.component_properties.detach_property"),"data-tooltip-type":Y.Ib.TEXT,recordingKey:u.Pt(e.recordingKey,"detachVariantProp")})}}{let n=X?"TOGGLE"===x.type?a.createElement(tC,{entry:x,selectedOption:X,viewOnly:g,recordingKey:e.recordingKey,onSelectProperty:q}):a.createElement(tw,{containerWidth:p,allPropertyOptions:J,entry:x,guids:t,onSelectProperty:q,recordingKey:e.recordingKey,selectedOption:X,viewOnly:g}):null,r=a.createElement(ef.K,{isPickerShowing:H,onClick:()=>q(x.property,(0,_.t)("proto.assign_variant")),recordingKey:u.Pt(e.recordingKey,"assignVariantProp"),tooltip:(0,P.kc)().ds_variable_props_unified_ui?(0,_.t)("proto.apply_variant_unified"):(0,_.t)("proto.assign_variant")});return{assignmentValue:n,iconButton:S?void 0:r}}})(),eg=a.createElement("div",{className:eh.zJ},a.createElement("p",{ref:N,className:eh.BY,"data-tooltip-type":Y.Ib.TEXT,"data-tooltip":N.current&&N.current.offsetWidth<N.current.scrollWidth?x.property:null},x.label));return O?f?a.createElement(ea.g,{key:`componentPropertyRow.${n}`,ref:A,leftLabel:null,leftInput:eg,rightLabel:null,rightInput:ep}):a.createElement(b.fn,{appendedClassName:eh.FG,recordingKey:`componentPropertyRow.${n}`,key:`componentPropertyRow.${n}`,ref:A,leftLabel:null,leftInput:eg,rightLabel:null,rightInput:ep,icon:e_}):a.createElement(et.fI,{className:p===v.O2.WIDE?eh.oB:p===v.O2.UNBOUNDED?eh.PB:eh.RZ,recordingKey:`componentPropertyRow.${n}`,key:`componentPropertyRow.${n}`,forwardedRef:A},eg,a.createElement("div",{className:eh.Zm},ep,e_))}function tC({entry:e,selectedOption:t,onSelectProperty:n,viewOnly:r,recordingKey:i}){let l=(0,y.R)(),o=t=>{n(e.property,e.toggleTokenPair[t?0:1])};return l?a.createElement(A.d,{mixed:(0,z.gl)(t),checked:t===e.toggleTokenPair[0],label:a.createElement(O.h,null,e.label),onChange:o,disabled:r,recordingKey:u.Pt(i,`toggle-${e.property}`)}):a.createElement(en.l,{toggleClassName:eh.E3,on:(0,z.hS)(t)?t===e.toggleTokenPair[0]:z.oV,onChange:o,disabled:r,recordingKey:u.Pt(i,`toggle-${e.property}`),forwardEventsToFullscreen:!0})}function tw({entry:e,selectedOption:t,onSelectProperty:n,viewOnly:i,recordingKey:l,containerWidth:o,allPropertyOptions:s,guids:c}){let m=(0,r.wA)(),p=(0,r.d4)(e=>e.dropdownShown),g=(0,y.R)();return a.createElement("div",{className:d()(eh.tP,{[eh.g1]:o===v.O2.WIDE,[eh.aO]:i})},i?a.createElement("p",{className:eh.Me},(0,z.gl)(t)?(0,_.t)("design_systems.component_properties.mixed"):t):a.createElement(tp.l6,{className:tE.ZE,fill:o===v.O2.UNBOUNDED,id:`states-property-select-${c.join("-")}-${e.property}`,inputClassName:g?eh.p3:void 0,property:t,formatter:tb,onChange:t=>{n(e.property,t)},dispatch:m,dropdownShown:p,dropdownWidth:200,dropdownAlignment:"right",onMouseDown:()=>m(td.r),recordingKey:u.Pt(l,`select-${e.property}`)},[...s].map(t=>a.createElement(tp.c$,{key:t,value:t,recordingKey:u.Pt(l,`select-${e.property}-option-${t}`)}))))}function tT({variantPropDefs:e,guids:t,allStateVariantProps:n,backingStateVariantProps:r,statePropertyValues:i,stateGroupGUID:l,forBubbledProps:o,containerWidth:s,viewOnly:c,hideIcon:d,sceneGraph:m,recordingKey:p}){let[_,g]=a.useState([]);return a.useEffect(()=>{g([])},[t]),a.createElement(x.q,{listItems:e,updateSelection:void 0,isDragDisabled:!0,renderListItem:(e,f)=>a.createElement(tv,{variantPropDef:e,guids:t,index:f,stateGroupGUID:l,allStateVariantProps:n,backingStateVariantProps:r,statePropertyValues:i,selectedPropertyValueHistory:_,updateHistory:g,containerWidth:s,viewOnly:c,hideIcon:d,forBubbledProps:o,sceneGraph:m,recordingKey:u.Pt(p,"row",t.join("-"),f)}),recordingKey:p})}var tS=n(326331),tx=n(46481),tk=n(952675);let tN={__addNewValue__:!0};class tI extends tk.a3{}class tA extends tp.c${}let tO=e=>{let t={};for(let n of e)if(n.stateInfo.propertyValues)for(let[e,a]of Object.entries(n.stateInfo.propertyValues))t[e]=t[e]||{},t[e][a]=(t[e][a]||0)+1;return t};function tL({OriginalComponent:e,...t}){return a.createElement(e,{...t,className:"variant_prop_authoring_row--ui3ComboBoxInput--WyPgd ellipsis--ellipsis--Tjyfa"})}function tD({variantPropDef:e,recordingKey:t}){var n;let{dropdownShown:i,allStates:l,propertySortOrder:o,propertyToFocusFullscreen:s,selectedStates:c,selectedStatesPropertyValues:d}=(0,em.R)(e=>({dropdownShown:e.dropdownShown,allStates:(0,E.ow)(e),propertySortOrder:(0,E.OC)(e),propertyToFocusFullscreen:e.mirror.appModel.statePropertyToFocus,selectedStates:(0,E._f)(e),selectedStatesPropertyValues:(0,E.D1)(e)})),p=(0,r.wA)(),g=(0,y.R)(),f=a.useRef(null),v=a.useRef(null),[C,w]=a.useState(null),T=null!=C,S=()=>{C&&(w(null),D.l7.user("rename-variant-property",()=>(0,eX.q1)(M,C,l??[],o??[])))},x=a.useRef({});Object.keys(d??{}).forEach(e=>{x.current[e]=x.current[e]||a.createRef()});let[k,N]=a.useState(""),I=s||k;function A(e,t){""!==(t=t.trim())&&c&&(D.l7.user("rename-variant-prop",()=>{for(let n of c){let a=n.stateInfo.propertyValues||{};H.i(n.symbol.node_id,(0,eX.zh)({...a,[e]:t},o||[]))}}),eL.Y5.commit())}a.useEffect(()=>{!i&&I&&(x.current?.[I]?.current&&(x.current[I].current.select(),eL.Y5.updateAppModel({statePropertyToFocus:""})),N(""))},[I,i]),a.useEffect(()=>{T&&f.current&&(f.current.focus(),f.current.select())},[T,f]);let O=a.useMemo(()=>tO(l??[]),[l]),L=a.useMemo(()=>tO(c??[]),[c]),R=e.values;if(!d)return null;let M=e.name,P=!d[M],B=!!v.current&&v.current.offsetWidth<v.current.scrollWidth,U=()=>w(M),G=T?a.createElement(m.u2,{forwardedRef:f,className:"variant_prop_authoring_row--selectPropertyNameInput--T02iO variant_prop_authoring_row--selectPropertyName--g8Tfp raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u",defaultValue:M,onKeyDown:e=>{e.stopPropagation(),(e.keyCode===F.Uz.ESCAPE||e.keyCode===F.Uz.ENTER)&&(S(),e.currentTarget.blur())},onChange:e=>w(e.currentTarget.value),onFocus:()=>{f.current&&(w(M),f.current.select())},onBlur:S,onContextMenu:e=>{e.stopPropagation(),e.preventDefault()},recordingKey:u.Pt(t,`componentPropRowDefNameInput-${M}`)}):a.createElement(m.D8,{forwardedRef:v,onDoubleClick:g?void 0:U,onClick:g?U:void 0,className:"variant_prop_authoring_row--selectPropertyName--g8Tfp","data-tooltip-type":Y.Ib.TEXT,"data-tooltip":B?M:null,recordingKey:u.Pt(t,`componentPropRowDefName-${M}`)},g?a.createElement("div",{className:"variant_prop_authoring_row--ui3SelectPropertyNameInner--eJnxr ellipsis--ellipsis--Tjyfa"},M):M),K=a.createElement(tk.ow,{value:{inputComponent:g?tL:void 0}},a.createElement(tI,{id:`states-property-select-${M}`,className:P?"variant_prop_authoring_row--missingPropertyComboBox--9wy-0":"variant_prop_authoring_row--propertyComboBox--7f6TZ",dropdownClassName:g?void 0:"variant_prop_authoring_row--propertyComboBoxDropdown--WH-pM",formatter:(n=Object.keys(L[M]||{}).some(e=>L[M][e]===O[M][e]),{format:e=>e!==tN?e||eX.xJ:n?(0,_.t)("design_systems.component_properties.rename_prompt"):(0,_.t)("design_systems.component_properties.add_new_prompt"),parse:e=>e,autocomplete:e=>{for(let t of R.sort((e,t)=>e.length-t.length))if(t&&t.startsWith(e))return t;return null}}),property:d[M]||"",icon:g?a.createElement(tS.r,null):void 0,onChange:e=>{D.l7.user("add-variant-property",()=>{e!==tN?A(M,e):(A(M,(0,_.t)("design_systems.component_properties.new_value")),N(M))})},dispatch:p,dropdownShown:i,recordingKey:u.Pt(t,`propertyComboBox-${M}`),forwardedRef:x.current[M]},R.map(e=>a.createElement(tA,{key:e,value:e,recordingKey:u.Pt(t,`value-${e}`)})),a.createElement(tp.sK,null),a.createElement(tA,{key:"add-new-value",value:tN,recordingKey:u.Pt(t,"value-AddNewValue")}))),V=P?a.createElement("span",{className:"variant_prop_authoring_row--missingPropertyNoticeIcon--t7xa0","data-tooltip":(0,_.t)("design_systems.component_properties.missing_property"),"data-tooltip-type":Y.Ib.TEXT,"data-tooltip-show-left":!0},a.createElement(tx.U,{svg:h.EP},a.createElement(eB.r,null))):null;return g?a.createElement(b.fn,{key:M,appendedClassName:"variant_prop_authoring_row--ui3PropertyRow--Ouo2e",leftLabel:null,leftInput:G,rightLabel:null,rightInput:K,icon:V}):a.createElement(et.fI,{key:M},a.createElement("div",{className:"variant_prop_authoring_row--selectPropertyRow--t4JAp raw_components--_row--rHucX"},G,K,V))}let tR=eO.ms,tM=eO.c$;function tP({defs:e,guids:t,selectedIndices:n,onSelectIndices:i,isInStateAuthoringView:l,recordingKey:o}){let s=(0,r.d4)(e=>(0,E.ow)(e)??[]),c=(0,r.d4)(eg.Nw),d=(0,r.d4)(e=>(0,E.OC)(e)??[]),m=(0,r.d4)(e=>e.dropdownShown),p=m?.type===te,g=n.length===e.length,f=e=>!g&&(e?.key==="Backspace"||e?.key==="Delete")&&(b(),!0),h=u.v_(o,"keydown",e=>{f(e)}),y=u.fo(`${o}.fullscreen`,"keydown",e=>{f(e.event)&&e.accept()}),b=a.useCallback(()=>{if(!n.length||!c)return;let t=n.map(t=>e[t].name);D.l7.user("delete-variant-props",()=>(0,eX.bk)(t,s,d,c))},[s,c,e,d,n]),v=a.useCallback(e=>{let t=e.map(e=>e.name);D.l7.user("reorder-variant-props",()=>{s.forEach(e=>{let n=e.stateInfo.propertyValues;n&&H.i(e.symbol.node_id,(0,eX.zh)(n,t))})}),eL.Y5.commit()},[s]),C=a.useRef(null);a.useEffect(()=>{n.length?C.current?.focus():C.current?.blur()},[n]);let{setIsDraggingSomePropDef:w}=T();return a.createElement(eD.vL,{handleKeyDown:y,ref:C,name:"variant-props-list",focusOnMount:!0},a.createElement(x.q,{listItems:e,selectedIndices:n,updateSelection:i,onChange:v,onDragStart:()=>w(!0),onDragEnd:()=>w(!1),renderListItem:(n,r,s,c,d,m,p)=>l?a.createElement(tD,{key:r,variantPropDef:n,recordingKey:u.Pt(o,"row",r)}):a.createElement(ta,{key:r,index:r,guids:t,componentPropDef:n,isSelected:s,isDragging:c,selectRow:()=>i([r]),singletonRow:1===e.length,onPropertyMouseDown:d,onPropertyMouseMove:m,onPropertyMouseUp:p,onKeyDown:h,recordingKey:u.Pt(o,"row",r)}),recordingKey:o}),p&&!!n.length&&!g&&a.createElement(tR,{style:m.data.position,positionFixed:!0},a.createElement(tM,{onClick:b,recordingKey:"deleteProp"},(0,_.tx)("design_systems.component_properties.delete_property",{numSelected:n.length}))))}var tF=n(501891);let tB=20;function tU({guids:e,propDimension:t,containerWidth:n,shouldHideInstanceTitleButtons:r,viewOnlyMode:i,hideIcon:l,highlightNodesOnHover:o,hideErrors:s,resettableInstanceOverrides:c,instanceNameDisplayOverride:d,forBubbledProps:m,recordingKey:_,errorBoxFlushWithContainer:h,entrypointForInstanceSwapPicker:E}){let{typedPropDefsExcludingHidden:b,variantPropDefs:C,assignmentValuesByDefId:w,allStateVariantProps:T,backingStateVariantProps:x,statePropertyValues:k,productComponentGUID:N}=(0,S.an)(e,t),I=(0,g.eY)(),A=(0,y.R)();if(!b.length&&!C.length)return null;let O=a.createElement(f.iN,{containerWide:n===v.O2.WIDE,canCollapse:m,resettableInstanceOverrides:c,instanceAndSublayerGUIDs:e,instanceNameDisplayOverride:d,shouldHideButtons:r,highlightNodesOnHover:o,recordingKey:_}),L=a.createElement(tV,{typedPropDefs:b,variantPropDefs:C,guids:e,assignmentValues:w,allStateVariantProps:T,backingStateVariantProps:x,statePropertyValues:k,productComponentGUID:N,propDimension:t,hideErrors:s,containerWidth:n,viewOnlyMode:i,hideIcon:l,forBubbledProps:!!m,recordingKey:_,errorBoxFlushWithContainer:h,sceneGraph:I,entrypointForInstanceSwapPicker:E});return m?A?a.createElement(tW,{row:O,isChevronAlwaysVisible:!0,recordingKey:u.Pt(_,"instancePanelTitleCollapsibleRow",e.join("-"))},a.createElement("div",{className:tF.Og},L)):a.createElement(p.S,{isInitiallyOpen:b.length<tB,title:O},a.createElement("div",{className:tF.Og},L)):a.createElement("div",null,O,a.createElement("div",{className:tF.Og},L))}var tG=(e=>(e[e.ALL_PROPS=0]="ALL_PROPS",e[e.VARIANT_PROPS=1]="VARIANT_PROPS",e[e.TYPED_PROPS=2]="TYPED_PROPS",e))(tG||{});function tK({propDimension:e,guids:t,containerWidth:n,viewOnlyMode:r,hideIcon:i,hideErrors:l,forBubbledProps:o,recordingKey:s,errorBoxFlushWithContainer:c,splitVariantAndTypedProps:d,enableHidingOverflowRowsInUI3:u,entrypointForInstanceSwapPicker:m}){let{typedPropDefsExcludingHidden:p,variantPropDefs:_,assignmentValuesByDefId:f,allStateVariantProps:h,backingStateVariantProps:E,statePropertyValues:y,productComponentGUID:b}=(0,S.an)(t,e),v=(0,g.eY)();return a.createElement(tV,{typedPropDefs:p,variantPropDefs:_,guids:t,propDimension:e,assignmentValues:f,allStateVariantProps:h,backingStateVariantProps:E,statePropertyValues:y,productComponentGUID:b,hideErrors:l,containerWidth:n,viewOnlyMode:r,hideIcon:i,forBubbledProps:!!o,recordingKey:s,errorBoxFlushWithContainer:c,splitVariantAndTypedProps:d,sceneGraph:v,enableHidingOverflowRowsInUI3:u,entrypointForInstanceSwapPicker:m})}function tV({typedPropDefs:e,variantPropDefs:t,propDimension:n,enableHidingOverflowRowsInUI3:i,...l}){let[o,c]=a.useState(void 0),[d,u]=a.useState([]),[m,p]=a.useState(!1),g=(0,y.R)(),f=(0,r.d4)(E.i$)===s.iCO.STATE&&n===v.OE.DEFINITION;a.useEffect(()=>{c(void 0),u([])},[t,e]);let h=!!t.length,b=!!e.length&&!f,C={shouldShowVariantProps:h,shouldShowTypedProps:b,selectedSection:o,selectedPropIndices:d,onSelectProps:(e,t)=>{c(e),u(t)},isInStateAuthoringView:f};if(g&&i){let{numHiddenRows:r,variantPropDefsToShow:i,typedPropDefsToShow:o}=function(e,t,n,a,r){let i=(t?a.length:0)+(n?r.length:0);if(e||i<=5)return{numHiddenRows:0,variantPropDefsToShow:t?a:[],typedPropDefsToShow:n?r:[]};let l=4,o=a;return t?l-=(o=a.slice(0,4)).length:o=[],{numHiddenRows:i-4,variantPropDefsToShow:o,typedPropDefsToShow:n?r.slice(0,l):[]}}(m,h,b,t,e);return a.createElement(a.Fragment,null,a.createElement(tH,{variantPropDefs:i,typedPropDefs:o,propDimension:n,...C,...l}),r>0&&!m&&a.createElement(tz,{label:(0,_.t)("design_systems.component_properties.show_more_property_rows",{count:r}),onClick:()=>p(!0)}))}return a.createElement(tH,{variantPropDefs:t,typedPropDefs:e,propDimension:n,...C,...l})}function tH({shouldShowVariantProps:e,shouldShowTypedProps:t,selectedSection:n,selectedPropIndices:r,onSelectProps:i,isInStateAuthoringView:l,propDimension:s,variantPropDefs:c,typedPropDefs:d,guids:m,assignmentValues:p,allStateVariantProps:_,backingStateVariantProps:g,statePropertyValues:f,productComponentGUID:E,forBubbledProps:y,hideErrors:b,containerWidth:C,viewOnlyMode:T,hideIcon:S,recordingKey:x,errorBoxFlushWithContainer:k,splitVariantAndTypedProps:N,sceneGraph:I,inPlayground:A,instanceSwapPickerInitialHeight:O,instanceSwapPickerInitialPosition:L,entrypointForInstanceSwapPicker:D}){return a.createElement(w,null,a.createElement(a.Fragment,null,e&&s===v.OE.DEFINITION&&a.createElement(tP,{defs:c,guids:m,selectedIndices:n===o.u.VARIANT?r:[],onSelectIndices:e=>i(o.u.VARIANT,e),isInStateAuthoringView:l,recordingKey:u.Pt(x,"propDefs",o.u.VARIANT)}),e&&E&&s===v.OE.ASSIGNMENT&&a.createElement(tT,{variantPropDefs:c,guids:m,allStateVariantProps:_,backingStateVariantProps:g,stateGroupGUID:E,statePropertyValues:f,forBubbledProps:y,containerWidth:C,sceneGraph:I,viewOnly:0===T||1===T,hideIcon:S,recordingKey:u.Pt(x,"propDefs",o.u.VARIANT)}),e&&t&&N&&a.createElement("div",{className:"props_section--divider--5xEyL"}),t&&s===v.OE.DEFINITION&&a.createElement(ts,{defs:d,guids:m,selectedIndices:n===o.u.TYPED?r:[],onSelectIndices:e=>i(o.u.TYPED,e),recordingKey:u.Pt(x,"propDefs",o.u.TYPED)}),t&&s===v.OE.ASSIGNMENT&&a.createElement(eA,{typedPropDefs:d,guids:m,assignmentValues:p,forBubbledProps:y,containerWidth:C,viewOnly:0===T||2===T,hideIcon:S,sceneGraph:I,inPlayground:A,instanceSwapPickerInitialHeight:O,instanceSwapPickerInitialPosition:L,recordingKey:u.Pt(x,"propDefs",o.u.TYPED),entrypointForInstanceSwapPicker:D}),!b&&a.createElement(h.aq,{flushWithContainer:k})))}function tz({label:e,onClick:t}){return a.createElement("button",{onClick:t,"aria-label":e},a.createElement(b.Ad,{label:null,input:a.createElement("div",{className:"props_section--ui3ShowMoreText--9ZaYD"},e)}))}function tW({row:e,isCollapsedByDefault:t,isChevronAlwaysVisible:n,children:r,recordingKey:o}){let[s,c]=a.useState(t??!1),u=a.createElement(m.GG,{className:"props_section--ui3CollapsibleRowWrapper--0eG4n",onMouseDown:()=>c(!s),recordingKey:o},a.createElement("div",{className:d()("props_section--ui3CollapsibleRowIcon--AMo-v",{"props_section--ui3CollapsibleRowIconAlwaysVisible--BPU5Y":n})},s?a.createElement(i.k,null):a.createElement(l.O,null)),e);return s?u:a.createElement(a.Fragment,null,u,r)}},680760:(e,t,n)=>{n.d(t,{A:()=>cV});var a=n(411855),r=n(966712),i=n(563706),l=n(30637),o=n(782112),s=n(188507),c=n(931828),d=n(672517),u=n(456104),m=n(397065),p=n(143678),_=n(147829),g=n(463546),f=n(343887),h=n(504440),E=n(139689);function y(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6.015 3.44 5.7 4.7l-1.26.315c-.505.126-.505.844 0 .97L5.7 6.3l.315 1.26c.126.505.844.505.97 0L7.3 6.3l1.26-.315c.505-.126.505-.844 0-.97L7.3 4.7l-.315-1.26c-.126-.505-.844-.505-.97 0m0 12L5.7 16.7l-1.26.315c-.505.126-.505.844 0 .97l1.26.315.315 1.26c.126.505.844.505.97 0L7.3 18.3l1.26-.315c.505-.126.505-.844 0-.97L7.3 16.7l-.315-1.26c-.126-.505-.844-.505-.97 0M5.7 10.7l.315-1.26c.126-.505.844-.505.97 0L7.3 10.7l1.26.315c.505.126.505.844 0 .97L7.3 12.3l-.315 1.26c-.126.505-.844.505-.97 0L5.7 12.3l-1.26-.315c-.505-.126-.505-.844 0-.97zM10.5 5a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 6a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1zm0 6a.5.5 0 0 0 0 1h9a.5.5 0 0 0 0-1z",clipRule:"evenodd"}))}var b=n(587670),v=n(374626),C=n(646240),w=n(210954),T=n(163023),S=n(901536),x=n(939863),k=n(809840),N=n(592096),I=n(226055),A=n(395701),O=n(843495),L=n(457630),D=n(498606),R=n(67048),M=n(477173),P=n(577023),F=n(904443),B=n(161735),U=n(707458),G=n(230646);let K=(e,t)=>e.filter(e=>t.get(e));var V=(e=>(e.DismissImmediately="dismiss-immediately",e.NoAutoDismiss="no-auto-dismiss",e.StartAutoDismissTimer="start-auto-dismiss-timer",e.noop="no-op",e))(V||{}),H=n(632084);function z(e){return a.useMemo(()=>{if(!e)return!0;let{data:t}=(0,H.b7)(new U.q);return JSON.stringify(t.map(e=>({t:e.t,id:e.id,type:e.type,stamps:e.stamps}))).length>12e3},[e])}var W=n(126049);function j(e=2e3){let t=(0,s.d4)(e=>e.mirror.selectionProperties.whiteboardNumSelected),[n,r]=a.useState({hasDebounceSettled:!1,numNodesSelected:void 0}),i=(0,W.A)(e=>{r({hasDebounceSettled:!0,numNodesSelected:e})},e);a.useEffect(()=>{r({hasDebounceSettled:!1,numNodesSelected:t}),i(t??0)},[i,t]);let l=n.numNodesSelected!==t;return n.hasDebounceSettled&&!l}var $=n(736916);let q="ai_summary_nudge--buttonContents--oUSGP",Y="ai_summary_nudge--badgeWrapper--QRaRq";var X=n(62573);function J({onClose:e,onSummarize:t,onAutoDismiss:n}){let i;let l=j(500),o=z(l),{lastSummarizableSelection:c}=function({onAutoDismiss:e,selectionIsStable:t}){let n=(0,G.cF)(),[r,i]=(0,a.useState)(0),l=(0,s.d4)(e=>e.mirror.sceneGraphSelection),o=a.useMemo(()=>Object.entries(l).filter(([e,t])=>t).map(([e,t])=>e),[l]),[c,d]=(0,a.useState)([]),u=new U.q,m=0===o.length&&c.length>0&&!K(c,u).length;return(0,a.useEffect)(()=>{switch(function({currentAutoDismissTimeoutId:e,stickySummarizationEnabledForSelection:t,lastSummarizableSelectionHasBeenDeleted:n,selectionSize:a,canRecomputeAutoDismissAction:r}){if(0===a&&n)return"dismiss-immediately";if(r){if(t)return"no-auto-dismiss";if(!e)return"start-auto-dismiss-timer"}return"no-op"}({currentAutoDismissTimeoutId:r,stickySummarizationEnabledForSelection:n,lastSummarizableSelectionHasBeenDeleted:m,selectionSize:o.length,canRecomputeAutoDismissAction:t})){case V.DismissImmediately:window.clearTimeout(r),i(0),e();break;case V.NoAutoDismiss:d(o),window.clearTimeout(r),i(0);break;case V.StartAutoDismissTimer:i(window.setTimeout(()=>{e()},1e4))}},[o.length,o,n,m,r,t,e]),{lastSummarizableSelection:c}}({onAutoDismiss:n,selectionIsStable:l});(0,a.useEffect)(()=>{v.zl.set($.EH,e=>e+1),v.zl.set($.ji,()=>new Date().toISOString())},[]);let{summarizeCanvasSelection:d}=(0,M.ss)(b.cfv.ABOVE,!1,"DISCOVERY_NUDGE"),u=(0,B.Cb)(),m=(0,C.Xr)(P.v),p=!!(0,r.kc)().figjam_summary_nudge_too_many_tokens&&l&&o;p&&(i=(0,x.t)("whiteboard.ai_summary.nudge.too_many_tokens"));let _=(0,a.useRef)(null),g=(0,I.GS)(),h=(0,L.ni)(),y=(0,N.FQ)(g?8:void 0);return(0,a.useLayoutEffect)(()=>{let e=_.current;if(!e)return;let t=g?h.y-8:h.y-N.zU,n=A.r.fromOriginAndSize(h.x,t,h.width,h.height),a=e.getBoundingClientRect(),r=y(A.r.fromOriginAndSize(n.right()-a.width-(g?12:24),n.top()+(g?20:0),a.width,a.height),n);if(a.x<0||a.y<0){let t=new Animation(new KeyframeEffect(e,[{transform:`translateX(${r.left()}px) translateY(-250px)`},{transform:`translateX(${r.left()}px) translateY(${r.top()}px)`}],{duration:600}));t.onfinish=()=>{e.style.transform=`translateX(${r.left()}px) translateY(${r.top()}px)`},t.play()}else e.style.transform=`translateX(${r.left()}px) translateY(${r.top()}px)`},[_,g,-250,h,y]),a.createElement("div",{ref:_,className:"ai_summary_nudge--container--Xt3Ld"},a.createElement("div",{className:"ai_summary_nudge--topContent--EYXY0"},a.createElement("div",{className:"ai_summary_nudge--topBar--3FRaK"},a.createElement("span",{className:S.cx.textHeadingMedium.$},(0,x.tx)("whiteboard.ai_summary.nudge.title")),a.createElement("div",{className:"ai_summary_nudge--closeButton--2Lr8q"},a.createElement(f.K,{onClick:e,"aria-label":(0,x.t)("general.close"),htmlAttributes:{"data-testid":"close-button"}},a.createElement(E.A,null)))),a.createElement("div",{className:S.cx.textBodyLarge.colorTextSecondary.$},(0,x.tx)("whiteboard.ai_summary.nudge.subtitle")),a.createElement("div",{className:"ai_summary_nudge--numberContainer--JqUxZ"},a.createElement(Q,{num:1}),a.createElement(Q,{num:2})),a.createElement(Z,{disabled:p,disabledTooltip:i,"data-testid":"summarize-button",onClick:()=>{O.wr(),O.Dh(c),d(),t(),u&&m(!0)},trackingProperties:{text:"summarize"}})),a.createElement("div",{className:"ai_summary_nudge--middlePerforation--z5eDN"}),a.createElement("div",{className:"ai_summary_nudge--bottomContent--EiPHE"},a.createElement("div",null,a.createElement("span",{className:S.cx.textBodyMedium.colorTextSecondary.$},(0,x.tx)("whiteboard.ai_summary.nudge.disclaimer")),"\xa0",a.createElement(w.N,{className:S.cx.textBodyMedium.inline.$,href:F.nG,target:"_blank",trusted:!0},(0,x.tx)("whiteboard.inline_menu.ai_quick_actions_dropdown_disclaimer_cta")))),a.createElement("div",{className:"ai_summary_nudge--bottomPerforation---VeRC"}))}let Z=(0,d.tf)(function({onClick:e,disabled:t,disabledTooltip:n}){let r=(0,I.GS)();return a.createElement(d.fu,{name:"AI Summary Nudge CTA",properties:{disabled:t}},r?a.createElement(h.Pw,{onClick:e,variant:"primary",htmlAttributes:{"data-testid":"summarize-button","data-tooltip":t?n:"","data-tooltip-type":D.Ib.TEXT},disabled:t},a.createElement("div",{className:q},a.createElement("span",{className:"ai_summary_nudge--buttonIcon--X-QPt"},a.createElement(y,null)),(0,x.tx)("whiteboard.ai_summary.nudge.cta"),a.createElement("div",{className:Y},a.createElement(R.G,{location:t?"SUMMARIZE_NUDGE_DISABLED":"SUMMARIZE_NUDGE",overrideText:(0,x.t)("whiteboard.inline_menu.ai_quick_actions_beta_badge_text")})))):a.createElement("div",{className:"ai_summary_nudge--button--DlY6r",style:{width:"242px"}},a.createElement(h.IK,{variant:"primary",onClick:e,disabled:t,htmlAttributes:{"data-tooltip":t?n:"","data-tooltip-type":D.Ib.TEXT,"data-testid":"summarize-button"}},a.createElement("div",{className:q},a.createElement(T.B,{svg:X.A,className:"ai_summary_nudge--svgIcon---Lky-"}),(0,x.tx)("whiteboard.ai_summary.nudge.cta"),a.createElement("div",{className:Y},a.createElement(R.G,{location:t?"SUMMARIZE_NUDGE_DISABLED":"SUMMARIZE_NUDGE",overrideText:(0,x.t)("whiteboard.inline_menu.ai_quick_actions_beta_badge_text")}))))))});function Q({num:e}){let t=184/e;return a.createElement("div",{className:"ai_summary_nudge--numberGraphic--CnM2r","aria-hidden":"true"},a.createElement(k.E,{fontSize:14,color:"secondary"},e),a.createElement("div",{className:"ai_summary_nudge--textPlaceholder--tx2Yp",style:{width:`${t}px`}}))}function ee(){let e=(0,s.d4)(e=>e.mirror.selectionProperties.whiteboardSelectionCanShowAiSummaryNudge),t=j(),n=z(t);return t&&e&&!n}var et=n(711525),en=n(772275);function ea(){let e=(0,s.wA)(),{isShowing:t,complete:n}=function(){let e=function(){let e=function(){let e=(0,v.md)(en.Bl),t=(0,v.md)($.xo),n=(0,v.md)($.MC),r=(0,v.md)($.ji),i=(0,v.md)($.EH);return a.useMemo(()=>{if("loaded"!==t.status||"loaded"!==n.status||"loaded"!==e.status||e.data)return(0,et.gB)({isEligibleToShowUser:!1});let a=new Date(r).getTime()>Date.now()-864e5;return i>=3||t.data||n.data||a?(0,et.gB)({isEligibleToShowUser:!1}):(0,et.gB)({isEligibleToShowUser:!0})},[e,t,n,i,r])}(),t=ee();return(0,et.gB)({shouldShowNudge:!!(e.data.isEligibleToShowUser&&t)})}(),{show:t,isShowing:n,complete:r}=(0,u.e)({overlay:g.RSb,priority:m.N.SECONDARY_MODAL},[e]),i=ee(),l=(0,s.d4)(e=>e.mirror.selectionProperties.numSelectedByType);return a.useEffect(()=>{t({canShow:e=>e.shouldShowNudge})},[t,e,l,i]),{isShowing:n,complete:r}}();return a.createElement(_.M,{isShowing:t},t&&a.createElement(d.fu,{name:p.e0.AI_SUMMARY_TOPBAR_NUDGE},a.createElement(J,{onClose:()=>{e(c.b({[$.l0]:!0})),n()},onSummarize:()=>{e(c.b({[$.zp]:!0})),e(c.b({[$.l0]:!0})),n()},onAutoDismiss:()=>{n()}})))}var er=n(369870),ei=n(779709),el=n(335682),eo=n(181912),es=n(38580),ec=n(106757),ed=n(309798);let eu=(0,es.eU)(!1);var em=n(392592),ep=n(934533),e_=n(988022),eg=n(636227),ef=n(430196);let eh="slides_visual_bell_entrypoint_dismissed_user_flag";function eE(){return!function(){let e=(0,s.wA)(),t=(0,eg.Yc)(),n=(0,eg.d_)(),r=(0,ed.f)(eh),i=(0,ef.$)(),l=(0,ef.N)(),[o,d]=a.useState(!1),[u,m]=a.useState(!1),p=a.useCallback(()=>{e(em.F.enqueue({messageComponentKey:ep.Rw.SLIDE_CONVERSION_VISUAL_BELL,type:ep.Rw.SLIDE_CONVERSION_VISUAL_BELL,timeoutOverride:1e4,onDismiss:()=>{d(!0),e(c.b({[eh]:!0})),(0,e_.Cu)({trackingContext:"Slides conversion visual bell entrypoint",name:"slides_conversion_visual_bell_entrypoint_dismissed"}),e(em.F.enqueue({message:(0,x.t)("slides.visual_bell.we_wont_ask_you_again")}))}}))},[e]);a.useEffect(()=>{l.size||e(em.F.dequeue({matchType:ep.Rw.SLIDE_CONVERSION_VISUAL_BELL}))},[e,l]),a.useEffect(()=>{!r?.createdAt&&!o&&n&&!u&&i>=3&&t().get("enabled",!1)&&(p(),m(!0))},[p,r,o,u,i,n,t])}(),null}var ey=n(656107),eb=n(662275),ev=n(349410),eC=n(101505),ew=n(251960),eT=n(723239),eS=n(582947),ex=n(206193),ek=n(374300),eN=n(59530),eI=n(394828),eA=n(740280),eO=n(864114);let eL=(0,eS.r1)(eN.IR);function eD(){let e=(0,C.md)(eT.mp),t=(0,C.md)(eT.t),n=(0,C.md)(eL),r=(0,C.md)(el.yV),i=(0,s.wA)(),{uniqueId:l,isShowing:o,show:c,complete:d}=(0,u.e)({overlay:g.B14,priority:m.N.SECONDARY_MODAL},[e,t,n]),p=(0,ev.hn)();return(0,ew.E)(l,"properties-panel-select-tab",e=>{e.properties?.tab==="prototype"&&c({canShow:(e,t,n)=>(function(e){let t=Date.now();return e.getTime()<=t-2592e6})(e)&&t&&p()&&!n})}),a.createElement(eA.X,{isShowing:o,title:(0,x.tx)("upsell.advanced_prototyping.title"),description:(0,x.tx)("upsell.advanced_prototyping.description"),media:a.createElement(eI.w,{src:"https://static.figma.com/uploads/30507591ad5cd385aaf75d4a16ef140b74ec821b",aspectRatio:1.75}),primaryCta:{label:(0,x.tx)("upsell.advanced_prototyping.see_plans"),type:"button",onClick:()=>{i(eb.to({type:ey.V,data:{upsellSource:ex.b.ADVANCED_PROTOTYPING_UPSELL,teamId:r?.team?.id,openCheckoutInNewTab:!0,featureList:(0,ek.xp)(ek.Q1.filter(e=>e!==ek.Xj.AUDIO_CONVERSATIONS),ek.Xj.ADVANCED_PROTOTYPING)}})),d()},ctaTrackingDescriptor:eC.c.SEE_PLANS},secondaryCta:{label:(0,x.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/en-us/articles/14506587589399-Use-variables-in-prototypes",ctaTrackingDescriptor:eC.c.LEARN_MORE},trackingContextName:"Advanced Prototype Upsell Popup",userFlagOnShow:eN.IR,position:eO.Q.BOTTOM_RIGHT,onClose:d})}var eR=n(866564),eM=n(340514);let eP="seen_audio_nux",eF=(0,eS.r1)(eP);function eB(){let e=(0,v.md)(eF),t=(0,I.GS)(),n=(0,u.e)({overlay:g.y4J,priority:m.N.SECONDARY_MODAL},[e]);return(0,ew.E)(n.uniqueId,"Context Viewed",e=>{let t=e.properties?.name;"join-call-with-others"===t?n.show({canShow:e=>!e}):"should-close-open-audio-nux"===t&&n.isShowing&&n.complete()}),(0,ew.E)(n.uniqueId,"Lost DOM Target",()=>{n.isShowing&&n.complete()}),a.createElement(eM.rq,{isShowing:n.isShowing,userFlagOnShow:eP,emphasized:!0,title:(0,x.tx)("collaboration.voice.join_the_conversation"),description:a.createElement("div",{style:t?{display:"inline"}:void 0},a.createElement(eR.OS,null)),targetKey:"audio-nux-key",onClose:n.complete,trackingContextName:"audio_nux_pointer"})}var eU=n(29680),eG=n(594524),eK=n(665723),eV=n(585575),eH=n(916108),ez=n(218997),eW=n(377020),ej=n(334290),e$=n(443958),eq=n(601538),eY=n(15839),eX=n(433546),eJ=n(526360),eZ=n(756085),eQ=n(460187),e0=(e=>(e[e.DONT_SHOW=0]="DONT_SHOW",e[e.DEFAULT_TO_SRGB=1]="DEFAULT_TO_SRGB",e[e.DEFAULT_TO_DISPLAY_P3=2]="DEFAULT_TO_DISPLAY_P3",e))(e0||{});let e1={"Export PNG with Color Profile":"867977941678289774"};function e2(){let{plugins:e}=(0,eZ.wH)(),t=Object.fromEntries(Object.entries(e1).filter(([t,n])=>Object.values(e).some(e=>e.manifest.id===n)));return Object.keys(t).length>0?t:null}function e5(){let e=(0,eQ.Av)();return(0,eQ.tK)(e)}let e3=(0,es.eU)(null),e4="color_management_default_to_p3_modal--onboardingFooter--VSeAU",e6="color_management_default_to_p3_modal--content--FzYUr",e8="seen_color_management_default_to_p3_modal",e7=eq.tO,e9=eW.O0,te="color_management_default_to_p3_modal";function tt(){let e=(0,u.e)({overlay:g.t_E,priority:m.N.SURVEY}),{currentStep:t,next:n,back:r}=(0,eG.A)({numSteps:2,onComplete:e.complete}),i=(0,ed.f)(e8),[l]=(0,eX.jJ)(),o=e5(),s=e2(),[c,d]=(0,v.fp)(e3),p=(0,eK.jK)(),[_,f]=(0,a.useState)(!1),[h]=(0,v.fp)(e$.n$),E=(0,eK.C$)();return a.useEffect(()=>{i||null!=c||p.colorProfilePreference!==eV.M.DEFAULT||(d(eV.M.DISPLAY_P3),E(eV.M.DISPLAY_P3,{canSeeP3:o,desktopSetting:l,p3Plugins:s}),e.show())},[o,c,l,i,e,s,d,E,p.colorProfilePreference]),(0,ew.E)(e.uniqueId,ej.kF,()=>{e.isShowing&&0===t&&e.complete()}),(0,ew.E)(e.uniqueId,eW.nu,()=>{e.isShowing&&1===t&&e.complete()}),(0,ew.E)(e.uniqueId,ej.kL,()=>{_||e.isShowing||0!==t||h||(n(),e.show())}),(0,ew.E)(e.uniqueId,e$.E1,()=>{_||e.isShowing||0!==t||(n(),e.show())}),a.createElement(eH.U,{currentStep:t,isShowing:e.isShowing},a.createElement(ez.h,{modalType:eY.q3.ANNOUNCEMENT_POINTER,title:a.createElement(a.Fragment,null,(0,x.tx)("fullscreen.color_management.curator.default_to_p3.user_color_profile.title")),ctaText:(0,x.tx)("general.next"),onClickPrimaryCta:n,stepCounter:a.createElement("span",{className:e4},(0,x.tx)("fullscreen.color_management.curator.step_1of2")),element:tn,onboardingKey:e7,trackingContextName:te,userFlagOnShow:e8,isShowing:e.isShowing,onClose:e.complete,onManualDismiss:()=>{e.complete(),f(!0)},width:300}),a.createElement(ez.h,{modalType:eY.q3.ANNOUNCEMENT_POINTER,title:a.createElement(a.Fragment,null,(0,x.tx)("fullscreen.color_management.curator.change_document_color_profile.title")),ctaText:(0,x.tx)("general.got_it"),onClickPrimaryCta:()=>{e.complete(),f(!0)},secondaryCtaText:a.createElement("div",{onClick:r},(0,x.tx)("general.previous")),preventDismissOnClickSecondaryCta:!0,stepCounter:a.createElement("span",{className:e4},(0,x.tx)("fullscreen.color_management.curator.step_2of2")),element:ta,onboardingKey:e9,userFlagOnShow:e8,trackingContextName:te,isShowing:e.isShowing,onClose:e.complete,onManualDismiss:()=>{e.complete(),f(!0)},width:300}))}function tn(){return a.createElement("p",{className:e6},(0,x.tx)("fullscreen.color_management.curator.default_to_p3.user_color_profile.content",{colorProfileSetting:a.createElement("strong",null,(0,x.tx)("fullscreen.color_management.curator.color_profile_setting"))})," ",a.createElement("a",{href:eJ.s,target:"_blank"},(0,x.tx)("rcs.rcs_shared.learn_more")))}function ta(){return a.createElement("p",{className:e6},(0,x.tx)("fullscreen.color_management.curator.change_document_color_profile.content",{fileColorProfile:a.createElement("strong",null,(0,x.tx)("fullscreen.color_management.curator.file_color_profile"))})," ",a.createElement("a",{href:eJ.s,target:"_blank"},(0,x.tx)("rcs.rcs_shared.learn_more")))}function tr(){let[e]=(0,eX.jJ)(),t=e5(),n=e2(),[r,i]=(0,v.fp)(e3),l=(0,eK.jK)(),o=(0,eK.C$)();return a.useEffect(()=>{null==r&&l.colorProfilePreference===eV.M.DEFAULT&&(i(eV.M.SRGB),o(eV.M.SRGB,{canSeeP3:t,desktopSetting:e,p3Plugins:n}))},[t,r,e,n,i,o,l.colorProfilePreference]),null}function ti(){let e=function(){let e=(0,eK.jK)().colorProfilePreference!==eV.M.DEFAULT,t=function(){let[e]=(0,eX.jJ)(),t=e5(),n=e2();return t&&n&&["unmanaged","default",null].includes(e)?eV.M.DISPLAY_P3:eV.M.SRGB}(),[n]=(0,v.fp)(e3);return e&&null===n?0:t===eV.M.SRGB?1:t===eV.M.DISPLAY_P3?2:0}();if(!function(e){let t=(0,eU.aV)(),[n,r]=function(e){let[t,n]=a.useState(!1),[r,i]=a.useState(!1);return a.useEffect(()=>{let e;return r&&(e=setTimeout(()=>{n(!t),i(!1)},2e3)),()=>clearTimeout(e)},[r,t,2e3]),[t,a.useCallback(()=>i(!0),[])]}(2e3);return a.useEffect(()=>{t||r()},[t,r]),n}(0))return null;switch(e){case e0.DONT_SHOW:return null;case e0.DEFAULT_TO_SRGB:return a.createElement(tr,null);case e0.DEFAULT_TO_DISPLAY_P3:return a.createElement(tt,null)}}var tl=n(965480),to=n(177505),ts=n(601607),tc=n(653734),td=n(91564);function tu(){let e=(0,u.e)({overlay:g.qnr,priority:m.N.DEFAULT_MODAL}),t=(0,s.wA)(),n=(0,s.Pj)(),r=(0,ts.Fk)((e,t)=>(0,to.zC)(e,t),n.getState().mirror.appModel.currentPage),i=(0,tl.JU)((0,tl.J3)()),l=!!el.q5()?.template,o=(0,eU.aV)(),d=!!(0,ed.f)("seen_custom_template_publish_nudge"),p=ed.f("figjam_editor_onboarded")?.updatedAt?.getTime(),_=!!p&&p<Date.now()-12096e5,f=!o&&!d&&i&&!r&&!l&&_;return((0,a.useEffect)(()=>{f&&setTimeout(()=>{e.show(),t(c.b({seen_custom_template_publish_nudge:!0}))},1e3)},[t,e,f]),e.isShowing)?a.createElement(tc.i,{step:{modalType:eY.q3.DRAGGABLE,element:td.ZH,trackingContextName:"custom_template_publish_nudge",onboardingKey:eq.v4,title:a.createElement("div",{className:S.cx.font13.fontMedium.pl8.pt16.pb16.$},(0,x.tx)("whiteboard.inserts.custom_templates_header")),width:300,disableFooter:!0,hideStepCounter:!0,disableHighlight:!0},onClickPrimaryCta:e.complete,onClose:e.complete,dismissModal:e.complete,dispatch:t}):null}var tm=n(776250),tp=n(517333),t_=n(737947),tg=n(320063);let tf=(0,eS.r1)("seen_desktop_download_modal_prompt"),th=(0,eS.r1)("seen_desktop_download_modal_prompt_v2"),tE=(0,eT.tH)("used_desktop_app");function ty(){let e=(0,v.md)(tf),t=(0,v.md)(th),n=(0,v.md)(eT.mp),l=(0,v.md)(tE),o=(0,r.kc)().desktop_show_download_prompt,{isShowing:s,show:c,complete:d}=(0,u.e)({overlay:g.kmj,priority:m.N.DEFAULT_MODAL},[t,e,n]);if((0,tg.h)(()=>{tp.eD||l||!o||c({canShow:(e,t,n)=>(function(e){let t=Date.now();return e.getTime()<=t-12096e5})(n)&&!t})}),!s)return null;let p=()=>{d()};return a.createElement(eA.X,{isShowing:s,title:(0,x.tx)("desktop_download_modal_prompt.download_the_figma_desktop_app"),description:(0,x.tx)("desktop_download_modal_prompt.level_up_your_workflow_with_tabs"),media:a.createElement(eI.y,{aspectRatio:1.75,alt:"A graphic showing the desktop app with tabs",src:"https://static.figma.com/uploads/cedfb41ea4da3cb80d5d062e5b648aa1d6a5cf1b"}),primaryCta:{label:(0,x.tx)("desktop_download_modal_prompt.get_the_desktop_app"),type:"button",onClick:()=>{(0,tm.sx)("desktop_modal_download_prompt_cta_clicked_v2"),p(),t_.Ay.redirect(`/download/desktop/${i.Ay.mac?"mac":"win"}`,"_blank")},ctaTrackingDescriptor:eC.c.DESKTOP_APP_DOWNLOAD},trackingContextName:"Desktop Download Modal Prompt",onClose:p,userFlagOnShow:"seen_desktop_download_modal_prompt_v2",position:eO.Q.BOTTOM_RIGHT,secondaryCta:{label:(0,x.tx)("desktop_download_modal_prompt.learn_more"),type:"link",href:"https://help.figma.com/hc/articles/5601429983767-Guide-to-the-Figma-desktop-app",ctaTrackingDescriptor:eC.c.LEARN_MORE}})}var tb=n(56207),tv=n(957379),tC=n(902139),tw=n(683694),tT=n(813648),tS=n(860178),tx=n(231472),tk=n(776008),tN=n(83012),tI=n(161074);function tA(e){let{jobTitle:t,viewedSidebar:n,setViewedSidebar:r}=e,i=(0,s.wA)(),l=(0,tN.j)(t);return a.useMemo(()=>{n||(r(!0),i(tC.En({initialX:0,initialY:0,pinned:tx.t.PINNED_AND_DOCKED_LEFT,initialSelectedCategory:l})))},[i,l,n,r]),a.createElement(a.Fragment,null)}function tO(){let e=(0,tS.TA)(),t=(0,el.q5)(),n=(0,s.d4)(e=>e.mirror.appModel.currentPage),r=(0,ts.Fk)((e,t)=>(0,to.zC)(e,t),n),i=(0,s.d4)(e=>!(0,tI.zP)(e.mirror.appModel.currentTool)),l=(0,tI.Uj)(t,e||""),o=(0,eS.Fu)("interacted_figjam_whats_new_v2_cta"),c=(0,v.md)(o),d=(0,v.md)(eT.NT),p=(0,tk.E)(d,["education"]),_=(0,v.md)(tw.wg),[f,h]=a.useState(!1),E=(0,u.e)({overlay:g.hsL,priority:m.N.HIGH_PRIORITY_MODAL},[c,d]);(0,tg.h)(()=>{E.show({canShow:e=>(0,tI.SS)(e)&&_&&(0,tI.ZQ)(t)&&r&&!i&&l})});let y=(0,tT.LR)(),b=()=>{y(),E.complete()};return a.createElement(ez.h,{isShowing:E.isShowing,modalType:eY.q3.SELF_CONTAINED,trackingContextName:"FigJam Templates",element:()=>a.createElement(tA,{jobTitle:p,viewedSidebar:f,setViewedSidebar:h}),testId:"figjam_templates_whats_new_overlay",onClickPrimaryCta:E.complete,onClose:b,onManualDismiss:b})}var tL=n(892677),tD=n(129318),tR=n(586459),tM=n(946689),tP=n(950964),tF=n(135876),tB=n(838e3),tU=n(950949);let tG="figjam_try_confirm_save_steps--descriptionBold--ou7xj";function tK({dismissModal:e}){let t=(0,s.wA)(),n=(0,el.tS)(),r=(0,s.d4)(e=>e.user?.email_validated_at),i=(0,s.d4)(e=>n?e.loadingState[tB.Q.loadingKeyForPayload({file_key:n})]:null),l=(0,s.d4)(e=>n?e.loadingState[tU.D.loadingKeyForPayload({fileKey:n})]:null),o=(0,tL.s)(),c=i===tR.r.LOADING||"loading"===o.status||l===tR.r.LOADING,d=i===tR.r.SUCCESS||l===tR.r.SUCCESS;if((0,a.useEffect)(()=>{d&&e()},[d,e]),!n||!r)return null;let u=(0,eo.A)(r).isAfter((0,eo.A)().subtract(5,"minutes"));return a.createElement("div",{className:"figjam_try_confirm_save_steps--modalContent--DezcS"},a.createElement("div",{className:"figjam_try_confirm_save_steps--textContent--9da6-"},a.createElement("h1",{className:"figjam_try_confirm_save_steps--headline--RRPzl text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,x.tx)("figjam_try.save_modal.headline")),a.createElement(tP.k0,{multiple:1}),a.createElement("p",{className:"figjam_try_confirm_save_steps--description--bpGw9 text--fontPos13--xW8hS text--_fontBase--QdLsd"},u?(0,x.tx)("figjam_try.save_modal.new_team"):(0,x.tx)("figjam_try.save_modal.save_one_team",{share:a.createElement("p",{className:tG},(0,x.tx)("figjam_try.save_modal.share")),file_duplicate:a.createElement("p",{className:tG},(0,x.tx)("figjam_try.save_modal.file_duplicates"))})),a.createElement(tP.k0,{multiple:3}),a.createElement(tM.nD,{onClick:()=>{"loaded"===o.status&&(0,et.oA)(o.data?.deviceTryFile)?t(tU.D({fileKey:n})):t(tB.Q({file_key:n}))},disabled:c,fullWidth:!0,trackingProperties:{buttonContext:"Let\u2019s jam"}},a.createElement(tF.x,{isLoading:c},()=>(0,x.tx)("figjam_try.save_modal.cta")))))}function tV(){let e=(0,u.e)({overlay:g.JGK,priority:m.N.HIGH_PRIORITY_MODAL}),t=(0,v.md)(el.yV),n=t?.isTryFile,r=(0,tL.s)(),[i,l]=a.useState(!1);return(0,a.useEffect)(()=>{e.isShowing&&!n&&e.complete()},[n,e]),(0,a.useEffect)(()=>{let t=(0,tD.QL)(eq.ao.key)===eq.ao.value,a="loaded"===r.status&&!!(0,et.oA)(r.data?.deviceTryFile);t&&a&&!i?(e.show(),l(!0)):t&&n&&!a&&e.show()},[e,n,r,i]),a.createElement(ez.h,{isShowing:e.isShowing,trackingContextName:"Figjam Try Confirm Save Modal",modalType:eY.q3.WELCOME,element:({dismissModal:e})=>a.createElement(tK,{dismissModal:e}),onClickPrimaryCta:e.complete,onClose:e.complete,onManualDismiss:e.complete})}eY.q3.WELCOME,({dismissModal:e})=>a.createElement(tK,{dismissModal:e});var tH=n(502665),tz=n(488578);let tW="figjam_try_confirm_save--textContainer--9YaF4";function tj(){let[e,t]=a.useState(!1),{show:n,isShowing:r,complete:i}=(0,u.e)({overlay:g.XAb,priority:m.N.HIGH_PRIORITY_MODAL}),l=(0,v.md)(el.yV),o=l?.isTryFile,s=(0,tL.s)(),c=(0,tD.QL)(eq.ao.key)===eq.ao.value,d=(0,v.md)(tH.N);return(0,a.useEffect)(()=>{!e&&c&&!o&&"loaded"===s.status&&et.oA(s.data?.deviceTryFile)?.claimedAt&&et.oA(s.data?.deviceTryFile)?.claimedByUserId!==d.data&&n()},[e,o,c,s,n,d]),a.createElement(_.M,{isShowing:r},a.createElement(t$,{onClose:()=>{i(),t(!0)}}))}function t$(e){return a.createElement(d.fu,{name:"figjam_try_device_already_claimed_overlay"},a.createElement(tz.aF,{onHide:e.onClose,disableKeyboardEventPropagation:!0,className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedModal--T7bRi"},a.createElement("div",{className:tW},a.createElement("h1",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedHeader--vNLRA text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,x.tx)("figjam_try.already_claimed_modal.header"))),a.createElement(tP.k0,{multiple:1}),a.createElement("div",{className:tW},a.createElement("div",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedDescription--WXdx- text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,x.tx)("figjam_try.already_claimed_modal.description",{file_duplicate:a.createElement("p",{className:"figjam_try_confirm_save--googleTryDeviceAlreadyClaimedDescriptionBold--CZgl4"},(0,x.tx)("figjam_try.already_claimed_modal.file_duplicate"))}))),a.createElement(tP.k0,{multiple:3}),a.createElement(tM.nD,{type:"close",fullWidth:!0,onClick:e.onClose},(0,x.tx)("figjam_try.already_claimed_modal.continue"))))}var tq=n(339690),tY=n(647400),tX=n(833629),tJ=n(907159);let tZ=(0,eS.r1)(tY.USER_FLAG_V2),tQ=(0,eT.tH)("last_figjam_at"),t0=(0,eS.r1)("dont_show_figjam_updates_in_figma_design");function t1(){let e=(0,v.md)(t0),t=(0,v.md)(tw.wg),n=(0,v.md)(eT.mp),r=(0,v.md)(tQ),i=(0,v.md)(tZ),l=(0,v.md)(eT.NT),o=(0,v.md)(eT.Ot),s=(0,tX.jO)(),c=(0,u.e)({overlay:g.Ttn,priority:m.N.DEFAULT_MODAL},[e,n,i,o,l]);return(0,tg.h)(()=>{c.show({canShow:(e,n,a,i)=>{if(e||i)return!1;let l=(0,tk.f)({userCreatedAt:n,lastUsedFigjamDate:r,hasSeenOverlayV2:a});return(!t||s)&&l}})}),a.createElement(tJ.xZ,{context:"editor",jobTitle:(0,tk.E)(l,["education"]),isShowing:c.isShowing,onClose:c.complete})}var t2=n(218881),t5=n(629019),t3=n.n(t5),t4=n(860601),t6=n(799569),t8=n(356390),t7=n(99506),t9=n(556261),ne=n(56099),nt=n(239671),nn=n(407844),na=n(164795);function nr(){return a.createElement("svg",{width:"23",height:"24",viewBox:"0 0 23 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:S.cx.colorIconBrand.$},a.createElement("g",{id:"Editor / Core / icon-32-visible"},a.createElement("path",{id:"Union",fillRule:"evenodd",clipRule:"evenodd",d:"M11.5002 15C9.20033 15 7.17803 13.8058 6.02182 12C7.17803 10.1942 9.20033 9 11.5002 9C13.8 9 15.8223 10.1942 16.9785 12C15.8223 13.8058 13.8 15 11.5002 15ZM11.5002 8C14.3782 8 16.8776 9.6211 18.1351 12C16.8776 14.3789 14.3782 16 11.5002 16C8.62214 16 6.12273 14.3789 4.86523 12C6.12273 9.6211 8.62214 8 11.5002 8ZM11.5 14C12.6046 14 13.5 13.1046 13.5 12C13.5 10.8954 12.6046 10 11.5 10C10.3954 10 9.5 10.8954 9.5 12C9.5 13.1046 10.3954 14 11.5 14Z"})))}function ni({onClose:e}){let t=(0,s.wA)(),n=!!(0,ed.f)("dismissed_gen1_design_viewer_banner"),r=(0,t9.wy)({component:"Gen1DesignViewerBanner",attribute:"isViewerRestricted",migrationGroup:ne.L.GROUP_5,legacy:(e,t)=>t?.design_paid_status===t7.El.RESTRICTED||e?.design_paid_status===t7.Zf.RESTRICTED,migrated:e=>e?.designPaidStatus===t7.dQ.RESTRICTED});if(n)return null;let i=a.createElement(t6.Jn,{onClick:()=>{t(c.b({dismissed_gen1_design_viewer_banner:!0})),e()},"aria-label":(0,x.t)("banner.shared.close_banner"),className:"gen1_design_viewer_banner--closeButton--AKZWc"});return a.createElement(d.fu,{name:"Design Viewer Onboarding Banner",properties:{isViewerRestricted:r}},a.createElement(nn.C,{content:{id:na.om.Gen1DesignViewerBanner,bannerType:na.x1.INFO,mainText:a.createElement(nl,{isViewerRestricted:r}),button:{type:na.MA.CUSTOM,element:i},hideIcon:!0},editorType:nt.nT.Design,onDismiss:t4.lQ}))}function nl({isViewerRestricted:e}){let t=a.createElement("div",{className:"gen1_design_viewer_banner--keyboardShortcutContainer--Xk1DL",onClick:()=>{t8.Y5.triggerAction("set-tool-comments")},role:"button",tabIndex:0},a.createElement("span",{className:"gen1_design_viewer_banner--keyboardShortcut--83jB0"},"C"));return a.createElement("div",{className:S.cx.colorTextBrand.fontMedium.flex.flexRow.columnGap8.$},a.createElement("div",{className:S.cx.flex.flexRow.itemsCenter.pl4.pr4.fontSemiBold.colorBgSelectedHover.bRadius4.ml8.noWrap.overflowHidden.$},a.createElement(nr,null),(0,x.tx)("file_browser.folder_settings.team_access_view_only")),a.createElement("span",{className:t3()(S.cx.flex.flexRow.itemsCenter.$,"gen1_design_viewer_banner--mainText--M1KK2")},e?(0,x.tx)("gen1_design_viewer_onboarding.feel_free_to_look_around_and_press_c_to_leave_comments_to_make_changes_request_a_full_design_seat_from_your_admin",{keyboardShortcut:t}):(0,x.tx)("gen1_design_viewer_onboarding.feel_free_to_look_around_and_press_c_to_leave_comments_to_make_changes_ask_to_edit_the_file",{keyboardShortcut:t})))}function no({onClose:e,onClickPrimaryCta:t}){let n=a.createElement("div",{className:"gen1_design_viewer_walkthrough--viewOnlyBadge--e8riE"},a.createElement(nr,null),(0,x.tx)("gen1_design_viewer_onboarding.view_only"));return a.createElement(a.Fragment,null,a.createElement("div",{className:S.cx.fixed.top0.right0.bottom0.left0.zIndexSecondaryModal.eventsNone.$,style:{backgroundColor:"rgba(0, 0, 0, 0.27)"}}),a.createElement(eA.X,{title:(0,x.tx)("gen1_design_viewer_onboarding.take_a_quick_tour"),description:a.createElement("div",{className:"gen1_design_viewer_walkthrough--beginTourDescription--CGAEy"},a.createElement("span",null,"\u{1F44B} "),(0,x.tx)("gen1_design_viewer_onboarding.hey_there_welcome_to_your_first_figma_file_learn_how_to_explore_and_add_comments_in_this_file",{viewOnly:n})),onClose:e,trackingContextName:"Design Viewer Onboarding \u2014 Take Tour Step",position:eO.Q.BOTTOM_RIGHT,isShowing:!0,primaryCta:{label:(0,x.tx)("rcs.take_tour.let_s_go"),type:"button",onClick:t,ctaTrackingDescriptor:eC.c.LETS_GO},secondaryCta:{label:(0,x.tx)("rcs.take_tour.no_thanks"),type:"button",onClick:e,ctaTrackingDescriptor:eC.c.NO_THANKS}}))}var ns=n(617453),nc=n(126911),nd=n(100197),nu=(e=>(e[e.TRACKPAD_PAN=0]="TRACKPAD_PAN",e[e.TRACKPAD_ZOOM=1]="TRACKPAD_ZOOM",e[e.MOUSE_PAN_RIGHT_CLICK_DRAG=2]="MOUSE_PAN_RIGHT_CLICK_DRAG",e[e.MOUSE_PAN_SPACE_LEFT_CLICK_DRAG=3]="MOUSE_PAN_SPACE_LEFT_CLICK_DRAG",e[e.MOUSE_ZOOM_SCROLL_WHEEL=4]="MOUSE_ZOOM_SCROLL_WHEEL",e[e.MOUSE_ZOOM_CMD_SCROLL_WHEEL=5]="MOUSE_ZOOM_CMD_SCROLL_WHEEL",e))(nu||{});function nm({step:e}){let t=(0,nd.J2)((0,ns.UK)().rightClickPan),n=(0,nd.J2)((0,ns.UK)().scrollWheelZoom);return a.createElement("div",{className:S.cx.flex.flexRow.columnGap16.$},a.createElement(np,{type:"pan"===e?0:1}),a.createElement(np,{type:"pan"===e?t?2:3:n?4:5}))}function np({type:e}){let t,n,r;switch(e){case 0:n="https://static.figma.com/uploads/863006f3b3055a16cb6674b2b38e180bbf2a3c3f",r=(0,x.tx)("gen1_design_viewer_onboarding.slide_with_two_fingers_to_move_on_a_trackpad");break;case 1:n="https://static.figma.com/uploads/69708e22f9ed801bf3d746142a3a90d8befb5d60",r=(0,x.tx)("gen1_design_viewer_onboarding.pinch_to_zoom_on_a_trackpad");break;case 3:t=a.createElement(ng,null),r=(0,x.tx)("gen1_design_viewer_onboarding.hold_keyboard_shortcut_click_and_drag_with_your_mouse",{keyboardShortcut:a.createElement("span",{className:S.cx.colorTextBrand.colorBgBrandTertiary.pl4.pr4.pt2.pb2.fontMedium.bRadius2.$},(0,x.tx)("whiteboard.keyboard_shortcuts.key_label.space"))});break;case 2:t=a.createElement(n_,null),r=(0,x.tx)("gen1_design_viewer_onboarding.right_click_and_drag_to_pan_with_your_mouse");break;case 5:n="https://static.figma.com/uploads/b99f52810b351c4f827711787d5c46a01e829835",r=(0,x.tx)("gen1_design_viewer_onboarding.hold_and_scroll_your_mouse",{keyboardShortcut:a.createElement("span",{className:S.cx.colorTextBrand.colorBgBrandTertiary.pl4.pr4.pt2.pb2.fontMedium.bRadius2.$},(0,x.tx)(nc.y.isMac()?"tooltips_plus_onboarding.command_key":"tooltips_plus_onboarding.control_key"))});break;case 4:n="https://static.figma.com/uploads/b99f52810b351c4f827711787d5c46a01e829835",r=(0,x.tx)("gen1_design_viewer_onboarding.use_the_scroll_wheel_to_zoom_with_a_mouse")}return a.createElement("div",{className:"navigation_instructions--instructionPanel--LSUWY"},a.createElement("div",{className:"navigation_instructions--instructionAsset--92t2D"},t||a.createElement("video",{src:n,autoPlay:!0,loop:!0,muted:!0,style:{width:"100%"}})),a.createElement("div",null,r))}function n_(){return a.createElement("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{id:"Rectangle 1"},a.createElement("rect",{width:"33.6014",height:"48",rx:"16.8007",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 41.9996 4.46875)",fill:"white"}),a.createElement("rect",{x:"-0.707083",y:"1.22474",width:"31.6014",height:"46",rx:"15.8007",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 40.2925 4.6935)",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"})),a.createElement("path",{id:"Vector 582",d:"M31.8131 31.5482L46.793 27.5343L45.9447 19.3759L40.1031 12.5554L31.9836 9.14054L26.2221 10.6843L31.8131 31.5482Z",fill:"#0D99FF"}),a.createElement("rect",{id:"Rectangle 3",x:"-0.707083",y:"1.22474",width:"31.6014",height:"46",rx:"15.8007",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 40.2925 4.6935)",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}),a.createElement("g",{id:"Rectangle 2"},a.createElement("rect",{width:"9.60041",height:"16.8",rx:"4.8002",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 32.8944 16.8467)",fill:"white"}),a.createElement("rect",{x:"-0.707083",y:"1.22474",width:"7.60041",height:"14.8",rx:"3.8002",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 31.1873 17.0714)",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"})))}function ng(){return a.createElement("svg",{width:"64",height:"64",viewBox:"0 0 64 64",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"33.6014",height:"48",rx:"16.8007",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 42.5767 4.30371)",fill:"white"}),a.createElement("rect",{x:"-0.707083",y:"1.22474",width:"31.6014",height:"46",rx:"15.8007",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 40.8696 4.52846)",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}),a.createElement("path",{d:"M32.3639 31.0389L17.384 35.0528L14.0394 27.5632L15.6882 18.7357L21.0125 11.7186L26.774 10.1748L32.3639 31.0389Z",fill:"#0D99FF"}),a.createElement("rect",{width:"9.60041",height:"16.8",rx:"4.8002",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 33.4716 16.6816)",fill:"white"}),a.createElement("rect",{x:"-0.707083",y:"1.22474",width:"7.60041",height:"14.8",rx:"3.8002",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 31.7645 16.9064)",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}),a.createElement("rect",{x:"-0.707083",y:"1.22474",width:"31.6014",height:"46",rx:"15.8007",transform:"matrix(-0.965926 0.258819 0.258843 0.965919 40.8696 4.52846)",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2"}))}let nf=[function({onClickPrimaryCta:e,onClose:t,currStepNum:n,totalNumSteps:r}){let i=eA.X;return a.createElement(i,{title:(0,x.tx)("gen1_design_viewer_onboarding.getting_around"),description:a.createElement(a.Fragment,null,a.createElement(tM.Kz,{multiple:1}),a.createElement(nm,{step:"pan"})),onClose:t,trackingContextName:"Design Viewer Onboarding \u2014 Pan Instructions Step",primaryCta:{label:(0,x.tx)("general.next"),type:"button",onClick:e,ctaTrackingDescriptor:eC.c.NEXT},stepCounter:{stepNum:n,totalNumSteps:r},width:360,position:eO.Q.BOTTOM_RIGHT,isShowing:!0})},function({onClickPrimaryCta:e,onClickSecondaryCta:t,onClose:n,currStepNum:r,totalNumSteps:i}){let l=eA.X;return a.createElement(l,{title:(0,x.tx)("gen1_design_viewer_onboarding.look_closer_or_step_back"),description:a.createElement(a.Fragment,null,a.createElement(tM.Kz,{multiple:1}),a.createElement(nm,{step:"zoom"})),onClose:n,trackingContextName:"Design Viewer Onboarding \u2014 Zoom Instructions Step",primaryCta:{label:(0,x.tx)("general.next"),type:"button",onClick:e,ctaTrackingDescriptor:eC.c.NEXT},secondaryCta:{label:(0,x.tx)("general.back"),type:"button",onClick:t,ctaTrackingDescriptor:eC.c.BACK},stepCounter:{stepNum:r,totalNumSteps:i},width:360,position:eO.Q.BOTTOM_RIGHT,isShowing:!0})},function({onClickPrimaryCta:e,onClickSecondaryCta:t,onClose:n,currStepNum:r,totalNumSteps:i}){let l=(0,eU.dH)();(0,tg.h)(()=>{l!==b.NLJ.COMMENTS&&t8.Y5.triggerAction("set-tool-comments")});let o=a.createElement("div",{className:S.cx.lh20.pt4.$},(0,x.tx)("gen1_design_onboarding.leave_a_comment_anywhere_in_the_canvas_to_give_feedback_ask_questions_or_mention_someone"));return a.createElement(eM.rq,{targetKey:"comment",title:(0,x.tx)("gen1_design_viewer_onboarding.share_your_thoughts"),description:o,onClose:n,trackingContextName:"Design Viewer Onboarding \u2014 Comments Step",primaryCta:{label:(0,x.tx)("general.next"),type:"button",onClick:e,ctaTrackingDescriptor:eC.c.NEXT},secondaryCta:{label:(0,x.tx)("general.back"),type:"button",onClick:t,ctaTrackingDescriptor:eC.c.BACK},stepCounter:{stepNum:r,totalNumSteps:i},isShowing:!0,disableHighlight:!0})},function({onClickPrimaryCta:e,onClickSecondaryCta:t,onClose:n,currStepNum:r,totalNumSteps:i}){let l=(0,eU.dH)();(0,tg.h)(()=>{l!==b.NLJ.NONE&&t8.Y5.triggerAction("set-tool-default")});let o=(0,s.d4)(e=>e.multiplayer.allUsers.length),c=a.createElement("div",{className:S.cx.lh20.pt4.$},(0,x.tx)("gen1_design_viewer_onboarding.yep_other_people_can_be_in_the_same_file_and_they_ll_appear_up_here_click_on_their_profile_picture_to_follow_and_see_where_they_are_in_real_time"));return a.createElement(eM.rq,{targetKey:o>1?"multiplayer-avatars":"multiplayer-users-container",title:(0,x.tx)("gen1_design_viewer_onboarding.follow_your_teammates"),description:c,onClose:n,trackingContextName:"Design Viewer Onboarding \u2014 Spotlight Step",primaryCta:{label:(0,x.tx)("general.done"),type:"button",onClick:e,ctaTrackingDescriptor:eC.c.DONE},secondaryCta:{label:(0,x.tx)("general.back"),type:"button",onClick:t,ctaTrackingDescriptor:eC.c.BACK},stepCounter:{stepNum:r,totalNumSteps:i},isShowing:!0,disableHighlight:!0,zIndex:eO.R.TERTIARY_MODAL})}];function nh({onCloseOrComplete:e}){let[t,n]=a.useState(!1),r=(0,eG.A)({numSteps:nf.length,onComplete:e}),i=a.useMemo(()=>nf.map((t,n)=>a.createElement(t,{onClickPrimaryCta:r.next,onClickSecondaryCta:r.back,onClose:e,currStepNum:n+1,totalNumSteps:nf.length})),[e,r.back,r.next]),l=(0,s.wA)();return((0,tg.h)(()=>{l(c.b({seen_gen1_design_viewer_onboarding:!0}))}),t)?a.createElement(eH.U,{currentStep:r.currentStep,children:i,isShowing:!0}):a.createElement(no,{onClose:e,onClickPrimaryCta:()=>n(!0)})}function nE(){let{getConfig:e}=(0,t2.I7)("exp_gen1_viewer_onboarding"),t=(0,v.md)(tw.wg),n=(0,v.md)(eu),i=!!(0,ed.f)("dismissed_gen1_design_viewer_banner"),l=!!(0,ed.f)("seen_gen1_design_viewer_onboarding"),[o,d]=a.useState(()=>!!l),p=!!(0,ed.f)("dismissed_gen1_design_viewer_onboarding"),_=l&&!i,f=(0,r.kc)().exp_gen1_viewer_onboarding_ff,{show:h,isShowing:E,complete:y}=(0,u.e)({overlay:g.Xh8,priority:m.N.OVERRIDING_MODAL,experiment:{check:()=>!!_||e().get("should_see_gen1_viewer_onboarding",!1),predicate:e=>e,postCheck:()=>!i||!l}}),b=(0,s.wA)();return(a.useEffect(()=>{f&&!E&&(n||_)&&!t&&h()},[t,f,n,E,_,h]),E)?a.createElement(a.Fragment,null,a.createElement(ni,{onClose:()=>{(p||o)&&y()}}),n&&!o&&!p&&a.createElement(nh,{onCloseOrComplete:()=>{b(c.b({dismissed_gen1_design_viewer_onboarding:!0})),i&&y()}})):null}var ny=n(634732),nb=n(293017),nv=n(493364);function nC(){let e=(0,s.wA)(),t=(0,s.d4)(e=>e.currentTeamId),n=(0,s.Pj)(),r=(0,v.md)(eT.t),i=(0,v.md)(tw.NZ),l=(0,tX.jO)(),o=(0,v.md)(tw.wg),{getConfig:c}=(0,t2.I7)("exp_library_upsells_v2"),{isShowing:d,show:p,complete:_,uniqueId:f}=(0,u.e)({overlay:g.BrS,priority:m.N.DEFAULT_MODAL,experiment:{check:()=>c().get("show_library_upsell",!1),predicate:e=>e,postCheck:e=>!0}},[r]);(0,a.useEffect)(()=>{if(!d)return;let t=n.getState().leftPanel.activeTab;return e(nb.FP({tab:b.xae.ASSETS})),()=>{e(nb.FP({tab:t}))}},[e,n,d]);let h=(0,a.useCallback)(e=>{e.properties?.action==="copy_paste_from_different_file"&&o&&p({canShow:e=>e&&i&&l})},[o,p,i,l]),E=(0,a.useCallback)(()=>{d&&_()},[d,_]);return(0,ew.E)(f,"component_instance_inserted",h),a.createElement(eM.rq,{isShowing:d,targetKey:m.D,title:(0,x.tx)("rcs.upsell_libraries.reuse_components_across_all_files"),description:(0,x.tx)("rcs.upsell_libraries.quickly_access_components"),primaryCta:{label:(0,x.tx)("rcs.upsell_libraries.see_plans"),type:"button",onClick:()=>{e(eb.to({type:ey.V,data:{teamId:t??void 0,upsellSource:ex.b.UPSELL_LIBRARIES_REUSE_COMPONENTS_OVERLAY,openCheckoutInNewTab:!0}})),E()},ctaTrackingDescriptor:eC.c.GOT_IT},secondaryCta:{label:(0,x.tx)("rcs.upsell_libraries.not_now"),type:"button",onClick:E,ctaTrackingDescriptor:eC.c.GOT_IT},onClose:E,trackingContextName:"Upsell Libraries Reuse Components Overlay",arrowPosition:nv.F_.LEFT_TITLE,emphasized:!0,onTargetLost:E})}var nw=n(638889),nT=n(501114),nS=n(132572);let nx="seen_link_shortcut_overlay",nk=(0,eS.r1)(nx);function nN(){let e=(0,s.wA)(),t=(0,C.md)(nk),{show:n,isShowing:r,complete:i,uniqueId:l}=(0,u.e)({overlay:g.v75,priority:m.N.DEFAULT_MODAL},[t]),o=nc.y.isApple(),d=a.useMemo(()=>a.createElement(nw.S,{shortcut:o?"\u2318K":"Ctrl+K"}),[o]),p=a.useMemo(()=>a.createElement(nw.S,{shortcut:o?"\u21E7\u2318U":"Shift+Ctrl+U"}),[o]);return(0,ew.E)(l,["show_link_shortcuts_overlay"],()=>{n({canShow:t=>(e(c.b({seen_link_shortcut_overlay:!0})),!!(0,nS.AL)()&&!t)})}),a.createElement(eA.X,{width:350,isShowing:r,title:(0,x.tx)("fullscreen.link_shortcuts_onboarding.title"),description:a.createElement("div",null,(0,x.tx)("fullscreen.link_shortcuts_onboarding.description"),a.createElement("ul",{className:S.cx.py8.$,style:nT.sx.add({listStyle:"disc inside"}).$},a.createElement("li",null,(0,x.tx)("fullscreen.link_shortcuts_onboarding.show_actions_updated",{actionsKeyCommand:a.createElement("strong",null,d)})),a.createElement("li",null,(0,x.tx)("fullscreen.link_shortcuts_onboarding.show_links_updated",{link:a.createElement("strong",null,(0,x.tx)("fullscreen.link_shortcuts_onboarding.create_link")),linkKeyCommand:p})))),primaryCta:{label:(0,x.tx)("fullscreen.link_shortcuts_onboarding.got_it"),type:"button",onClick:i,ctaTrackingDescriptor:eC.c.GOT_IT},trackingContextName:"Link Shortcuts Preference Onboarding Modal",userFlagOnShow:nx,position:eO.Q.BOTTOM_RIGHT,onClose:i,testId:"linkShortcutOverlay"})}var nI=n(140908),nA=n(928002),nO=n(630834);let nL="dismissed_local_component_asset_panel_pointer",nD=(0,eS.r1)(nL);function nR(){let e=(0,s.wA)(),t=(0,tS.TA)(),n=(0,v.md)(tw.wg),r=(0,v.md)(nD),i=(0,v.md)(tw.NZ),l=(0,v.md)(tw.pQ),o=(0,v.md)(eT.t),d=(0,tX.jO)(),p=el.q5()?.teamId==null,_=(0,I.GS)(),{isShowing:f,show:h,complete:E,uniqueId:y}=(0,u.e)({overlay:g.Smd,priority:m.N.SECONDARY_MODAL,experiment:{check:()=>(0,nI.Hz)(t??void 0),predicate:e=>e,postCheck:e=>!e}},[r,o,l]),b=(0,a.useCallback)(()=>{n&&h({canShow:(e,t,n)=>d&&t&&(n||i)})},[d,n,i,h]),C=(0,a.useCallback)(()=>{f&&(E(),e(c.b({[nL]:!0})))},[e,E,f]);return(0,ew.E)(y,"action_create_symbol",b),(0,ew.E)(y,"component_instance_inserted",C),a.createElement(eM.rq,{isShowing:f,targetKey:eq.Qr,description:a.createElement(a.Fragment,null,a.createElement("div",{className:S.cx.if(_,S.cx.pt6.mr36).$},p?(0,x.tx)("design_systems.assets_panel.drag_drop_component_draft"):(0,x.tx)("design_systems.assets_panel.drag_drop_component")),_&&a.createElement(t6.Jn,{onClick:C,innerText:(0,x.t)("general.close"),"aria-label":(0,x.t)("general.close"),className:t3()(nA.Rf,S.cx.absolute.top0.right0.mr8.mt10.$),svg:nO.default})),primaryCta:{label:(0,x.tx)("design_systems.assets_panel.got_it"),type:"button",onClick:C,ctaTrackingDescriptor:eC.c.GOT_IT},onClose:C,trackingContextName:"Local Component Asset Panel Pointer",arrowPosition:nv.F_.LEFT_TITLE,emphasized:!0,hideCloseButton:_})}var nM=n(27087),nP=n(206121);let nF=(0,eS.r1)("seen_mobile_comment_download_modal_prompt");function nB(){let e=(0,s.wA)(),t=(0,v.md)(nF),n=(0,s.d4)(e=>e.userAnalyticsData?.is_active_mobile_user),i=(0,s.d4)(e=>e.user?.created_at),l=(0,eo.A)(i).add(14,"day").isSameOrAfter((0,eo.A)()),{isShowing:o,show:c,complete:d,uniqueId:p}=(0,u.e)({overlay:g.H2x,priority:m.N.DEFAULT_MODAL},[t]);if((0,ew.E)(p,nP.w,(0,a.useCallback)(()=>{c({canShow:e=>!!(0,r.kc)().mobile_download_modal_prompts&&!e&&!l&&!n})},[c,n,l])),!o)return null;let _=()=>{nM.Ay.post("/api/send_mobile_download_email",{type:"comment"}),(0,tm.sx)("post_comment_mobile_app_download_prompt_email_me_cta_clicked"),d(),e(em.F.enqueue({message:(0,x.t)("rcs.mobile_comment_reply_upsell.email_sent")}))};return a.createElement(eA.X,{isShowing:o,title:(0,x.tx)("mobile_download_prompts.never_miss_a_comment"),description:(0,x.tx)("mobile_download_prompts.scan_the_qr_code"),media:a.createElement(eI.y,{aspectRatio:1.75,alt:"A graphic show mobile comments with a qr code",src:"https://static.figma.com/uploads/6c270bb31fb5af03393425b7f0a6462ec59d04ab"}),primaryCta:{label:(0,x.tx)("mobile_download_prompts.email_me"),type:"button",onClick:()=>_(),ctaTrackingDescriptor:eC.c.MOBILE_APP_DOWNLOAD_COMMENT_PROMPT_CLICKED},trackingContextName:"Mobile Comment Download Modal Prompt",onClose:()=>{d()},userFlagOnShow:"seen_mobile_comment_download_modal_prompt",position:eO.Q.BOTTOM_RIGHT,secondaryCta:{label:(0,x.tx)("mobile_download_prompts.learn_more"),type:"link",href:"https://help.figma.com/hc/en-us/articles/1500007537281-Guide-to-the-Figma-mobile-app",ctaTrackingDescriptor:eC.c.LEARN_MORE}})}var nU=n(844647),nG=n(288527),nK=n(141810),nV=n(754407),nH=n(720750),nz=n(882980),nW=n(47506);function nj(e){return a.createElement("div",{className:"connector_modal_wrapper--connectorModalWrapper--uCUjA"},e.children)}var n$=n(63666),nq=n(421769),nY=n(698380);let nX="onboard_figjam_viewer--contentContainer--t9zim",nJ="onboard_figjam_viewer--imageContainer--rvqD8",nZ="onboard_figjam_viewer--image--ZdwAA",nQ="onboard_figjam_viewer--mainContent--8TgvP text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",n0="onboard_figjam_viewer--normal--HjE2J",n1="onboard_figjam_viewer--bold--kC3mV";class n2 extends a.PureComponent{render(){return a.createElement("div",{className:nX},a.createElement("div",{style:nT.sx.add({width:`${this.props.imgContainerWidth}px`}).$,className:nJ},a.createElement("span",{className:"onboard_figjam_viewer--imgHelper--SJXYZ","aria-hidden":"true"}),a.createElement("img",{className:nZ,src:this.props.imgSrc,alt:""})),a.createElement("div",{className:t3()({[nQ]:!0,[n0]:!this.props.isBold,[n1]:!!this.props.isBold})},this.props.titleText&&a.createElement("div",{className:"onboard_figjam_viewer--title--k1Gpk"},this.props.titleText),a.createElement("div",{className:"onboard_figjam_viewer--text--xkcTB"},this.props.bodyText),a.createElement("div",{className:"onboard_figjam_viewer--bottomContentRow--PgTeU"},a.createElement("div",{className:t3()({"onboard_figjam_viewer--secondaryText--THVcI":!0,[n0]:!this.props.isBold,[n1]:!!this.props.isBold})},this.props.steps?(0,x.tx)("rcs.rcs_shared.step_counter",{currentStepNum:this.props.steps.current,totalNumSteps:this.props.steps.total}):a.createElement(a.Fragment,null)),a.createElement(tM.vd,{className:t3()({"onboard_figjam_viewer--ctaButton--aFKKt text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI":!0,[n1]:!!this.props.isBold}),onClick:this.props.onNext,autoFocus:!0},this.props.buttonText,!this.props.buttonText&&this.props.steps&&this.props.steps.current===this.props.steps.total&&(0,x.tx)("rcs.rcs_shared.done"),!this.props.buttonText&&this.props.steps&&this.props.steps.current<this.props.steps.total&&(0,x.tx)("rcs.figjam_onboarding.next")))),a.createElement(t6.Jn,{className:t3()({"onboard_figjam_viewer--closeButton--hm43f close_button--closeX--Bc-63":!0,[n0]:!this.props.isBold,[n1]:!!this.props.isBold}),onClick:this.props.onDismiss,innerText:"close",svg:nO.default}))}}n2.displayName="FigJamOnboardingModal";var n5=n(259494);function n3(e){let t=(0,nY.O)();(0,a.useEffect)(()=>(t8.Y5.triggerAction("set-tool-hand",null),()=>t8.Y5.triggerAction("set-tool-default",null)),[]),(0,a.useEffect)(()=>(t({eventName:"hand_tooltip_shown"}),()=>t({eventName:"pan_zoom_completed"})),[t]);let n=(0,nI.Un)();return a.createElement(nj,null,a.createElement(n$.Dv,{targetType:"dom",targetKey:n5.N,topPadding:-6,hasShadow:e.hasShadow},a.createElement(n2,{bodyText:a.createElement("span",null,(0,x.tx)("rcs.figjam_onboarding.use_the_hand_tool_and_drag_to_move_around_hold_space_to_activate_it_anytime",{spaceKey:a.createElement("b",null,(0,x.tx)("rcs.figjam_onboarding.space"))})),onNext:e.onClickPrimaryCta,steps:{current:2,total:n?2:3},onDismiss:()=>{e.dismissModal(),t({eventName:"hand_tooltip_dismissed"})},imgSrc:"https://static.figma.com/uploads/07ff49c75c8933ea70ff2e4776503291c31a35ef"})))}var n4=n(162057);function n6(e){let t=i.Ay.mac?(0,x.t)("rcs.figjam_onboarding.cmd"):(0,x.t)("rcs.figjam_onboarding.ctrl"),n=(0,n4.O)()?-10:-3,r=(0,nI.Un)(),l=(0,nY.O)();return(0,a.useEffect)(()=>{l({eventName:"zoom_tooltip_shown"})},[l]),a.createElement(nj,null,a.createElement(n$.Dv,{targetType:"dom",topPadding:n,targetKey:n5.q,hasShadow:e.hasShadow},a.createElement(n2,{bodyText:a.createElement("span",null,(0,x.tx)("rcs.figjam_onboarding.pinch_to_zoom_on_a_trackpad_hold_command_while_scrolling_or_use",{commandKey:a.createElement("b",null,t),plusOrMinusKeys:a.createElement("b",null,(0,x.tx)("rcs.figjam_onboarding.plus_or_minus"))})),onNext:e.onClickPrimaryCta,steps:{current:1,total:r?2:3},onDismiss:()=>{e.dismissModal(),l({eventName:"zoom_tooltip_dismissed"})},imgSrc:"https://static.figma.com/uploads/4e36d3bbbf8633fef1b86238f66bb1bf54f54d2a"})))}function n8(e){return a.createElement(ez.h,{testId:e.testId?e.testId:"ZoomConnectorOverlay",modalType:eY.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Zoom",element:n6,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function n7(e){let t=(0,nI.Un)();return a.createElement(ez.h,{testId:e.testId?e.testId:"HandToolConnectorOverlay",modalType:eY.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Hand Tool",userFlagOnShow:t?"figjam_editor_onboarded":void 0,element:n3,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}let n9=[n8,n7,function(e){return a.createElement(ez.h,{testId:e.testId?e.testId:"ShareConnectorOverlay",modalType:eY.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Share",userFlagOnShow:"figjam_editor_onboarded",element:e=>a.createElement(nj,null,a.createElement(n$.Dv,{targetType:"dom",targetKey:eq.v4,topPadding:-6},a.createElement(n2,{bodyText:a.createElement("span",null,(0,x.tx)("rcs.figjam_onboarding.invite_others_or_share_this_file_with_a_link_to_jam_with_your_team")),onNext:e.onClickPrimaryCta,steps:{current:3,total:3},onDismiss:e.dismissModal,imgSrc:"https://static.figma.com/uploads/8f3066fc3906f11f2601a390725f2b7af58e01a1"}))),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}];var ae=n(67085),at=n(520479),an=n(578427),aa=n(915440),ar=n(391388),ai=n(809831),al=n(279453);function ao({skipAccountCreationDateCheck:e=!1}){let t=(0,eU.aV)(),n=(0,ai.lg)(),r=(0,el.q5)(),i=(0,v.md)(eT.mp),l=(0,aa.Rs)(al.KMT,{currentOrgId:r?.parentOrgId||null});return a.useMemo(()=>ar.Qw.all([i,l]).transform(a=>{let[r,i]=a,l=function(e){let t=Date.now();return e.getTime()<=t-12096e5}(r),o=!!i.org?.k12GoogleOrg||(0,an.aA)(i.currentUser.profile?.jobTitle||"");return!t&&n===t7._Y.WHITEBOARD&&(e||l)&&o}),[i,l,n,t,e])}function as({isShowing:e,onPrimaryCtaClick:t,onClose:n}){return a.createElement(_.M,{isShowing:e},a.createElement(d.fu,{name:"Share to Google Classroom New User Onboarding"},a.createElement(n$.Dv,{targetType:"dom",targetKey:"share",isBold:!0,topPadding:-6,autoWidth:!0},a.createElement(n2,{isBold:!0,titleText:(0,x.tx)("whiteboard.google_classroom.onboarding.new_user.header"),bodyText:(0,x.tx)("whiteboard.google_classroom.onboarding.new_user.body"),buttonText:(0,x.tx)("whiteboard.google_classroom.onboarding.show_me"),onNext:t,onDismiss:n,imgSrc:"https://static.figma.com/uploads/db6976747d085e1350d443cd04b08e7ba979b86b",imgContainerWidth:105}))))}function ac({isShowing:e,onClose:t}){return a.createElement(eM.rq,{isShowing:e,zIndex:eO.R.MODAL,trackingContextName:"Share to Google Classroom Share Option Pointer",targetKey:an.pb,arrowPosition:nv.F_.LEFT_TITLE,description:a.createElement("div",null,(0,x.tx)("whiteboard.google_classroom.pointer.body")),onClose:t,onTargetLost:t,emphasized:!0,disableHighlight:!0,clickOutsideToHide:!0})}let ad="seen_figjam_share_to_google_classroom_existing_user_onboarding",au=(0,eS.r1)(ad),am="seen_figjam_share_to_google_classroom_new_user_onboarding",ap=(0,eS.r1)(am),a_=(0,eS.r1)("has_shared_to_google_classroom"),ag=(0,eS.r1)("figjam_editor_onboarded"),af="start_share_to_classroom_new_user_onboarding";function ah(){let e=(0,s.wA)(),t=ao({skipAccountCreationDateCheck:!0}),n=(0,v.md)(au),r=(0,v.md)(ap),i=(0,v.md)(a_),l=(0,v.md)(an.Ij),{show:o,isShowing:d,complete:p,uniqueId:_}=(0,u.e)({overlay:g.DKg,priority:m.N.OVERRIDING_MODAL},[r,n,i,t]);(0,ew.E)(_,af,()=>{o({onShow:()=>{e(c.b({[am]:!0}))},canShow:(e,t,n,a)=>!e&&!t&&!n&&a})}),a.useEffect(()=>{n.data&&p()},[n,p]);let{currentStep:f,next:h}=(0,eG.A)({numSteps:2,onComplete:p}),E=function({isShowing:e,next:t,complete:n}){let r=(0,s.wA)(),i=(0,el.q5)();return[a.createElement(as,{key:"share-to-google-classroom-new-user-callout",isShowing:e,onPrimaryCtaClick:()=>{if(!i){n();return}r((0,eb.to)({type:at.g_,data:{fileKey:i.key,source:ae.nk.shareToGoogleClassroomOnboarding}})),t()},onClose:n}),a.createElement(ac,{key:"share-to-google-classroom-share-option-pointer",isShowing:e,onClose:n})]}({isShowing:d,next:h,complete:p});return a.useEffect(()=>{l&&d&&0===f&&h()},[f,d,l,h]),a.createElement(eH.U,{currentStep:f,isShowing:d,children:E})}function aE(e){let t=(0,s.wA)();return()=>{t(c.b({figjam_editor_onboarded:!0})),e()}}function ay({overlayUniqueId:e,afterReset:t}){let n=(0,s.wA)();(0,ew.E)(e,"Reset Onboarding",()=>{n(c.b({figjam_editor_onboarded:!1,figjam_browse_templates_modal_onboarded:!1,figjam_browse_templates_modal_onboarding_item_selected:!1})),t&&t()})}function ab({steps:e,onComplete:t,isShowing:n,overlayUniqueId:r}){let{currentStep:i,next:l,reset:o}=(0,eG.A)({numSteps:e.length,onComplete:t});return ay({overlayUniqueId:r,afterReset:o}),a.createElement(eH.U,{currentStep:i,isShowing:n,children:a.useMemo(()=>e.map(e=>a.createElement(e,{onClickPrimaryCta:l,onClose:t4.lQ,onManualDismiss:t,isShowing:n})),[l,t,n,e])})}var av=n(888699),aC=n(358145),aw=n(271779),aT=n(738274),aS=n(119198),ax=n(777078),ak=n(114716),aN=n(102310),aI=n(820642),aA=n(106112),aO=n(555328),aL=n(945020),aD=n(615297),aR=n(27928),aM=n(766926),aP=n(79132),aF=n(746806),aB=n(479296),aU=n(900073),aG=n(297666),aK=n(819338);function aV({onClickPrimaryCta:e,useCase:t}){let n=(0,el.q5)(),r=(0,s.wA)(),i=(0,nY.O)();return{onNext:(0,a.useCallback)(()=>{n&&(r((0,eb.to)({type:at.g_,data:{fileKey:n.key,source:ae.nk.expFigJamOnboardingShareVariant}})),(0,nW.YQ)({id:"open share modal"}),i({eventName:"share_board_clicked",useCase:t})),e()},[n,r,e,i,t])}}let aH="make_something_assets--svg--hgXqn",az="make_something_assets--svgHovered--3XZdi",aW="make_something_assets--transformable--Ku46s",aj="make_something_assets--transformLeftBrainstorm--To6dH",a$="make_something_assets--transformRightBrainstorm--DH4Yj",aq="make_something_assets--transformLeftUpdates--HVSJ5",aY="make_something_assets--transformRightUpdates--jOJJ-",aX="make_something_assets--transformLeftPlanning--6tBWf",aJ="make_something_assets--transformRightPlanning--H2U0C",aZ="make_something_assets--transformRightDiagramming--2ff-F";function aQ(e){return a.createElement("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t3()(aH,{[az]:e.hovered})},a.createElement("rect",{x:"27.1868",y:"27.8497",width:"141.626",height:"142.374",fill:"#E5F4FF",stroke:"black",strokeWidth:"0.373684"}),a.createElement("rect",{x:"27.1868",y:"3.18684",width:"141.626",height:"19.8053",fill:"#0D99FF",stroke:"black",strokeWidth:"0.373684"}),a.createElement("g",{filter:"url(#filter0_d_351_43460)"},a.createElement("rect",{x:"37.4653",y:"38.1284",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),a.createElement("rect",{x:"37.6522",y:"38.3153",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),a.createElement("g",{filter:"url(#filter1_d_351_43460)"},a.createElement("rect",{x:"124.157",y:"81",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),a.createElement("rect",{x:"124.344",y:"81.1868",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),a.createElement("g",{filter:"url(#filter2_d_351_43460)"},a.createElement("rect",{x:"81",y:"38",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),a.createElement("rect",{x:"81.1868",y:"38.1868",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),a.createElement("g",{filter:"url(#filter3_d_351_43460)"},a.createElement("rect",{x:"80.8096",y:"123.326",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),a.createElement("rect",{x:"80.9964",y:"123.513",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),a.createElement("rect",{x:"84.9214",y:"128.181",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"40.8262",y:"42.2361",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"129.021",y:"85.1079",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"129.021",y:"100.057",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"40.8262",y:"49.7126",width:"18.3105",height:"4.48421",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"129.021",y:"92.584",width:"20.9263",height:"4.48421",fill:"black",fillOpacity:"0.2"}),a.createElement("path",{d:"M87.4033 45.8193C88.2079 46.4289 88.9008 47.0959 89.6122 47.8073",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),a.createElement("path",{d:"M97.5591 43.8335V48.0303",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),a.createElement("path",{d:"M103.975 49.5765C106.065 48.776 108.231 47.9817 110.38 47.3677",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),a.createElement("path",{d:"M103.748 57.5273H109.491",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),a.createElement("path",{d:"M98.8926 62.6094V67.4688",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),a.createElement("path",{d:"M90.1268 58.5264C89.2081 59.2528 88.1169 59.8811 87.2876 60.7104",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round"}),a.createElement("g",{filter:"url(#filter4_d_351_43460)"},a.createElement("rect",{x:"81",y:"80.7251",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),a.createElement("rect",{x:"81.1868",y:"80.9119",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),a.createElement("path",{d:"M108.795 102.748L108.954 102.837L109.047 102.681L109.454 101.997C109.755 101.492 110.248 101.121 110.825 100.966C111.402 100.812 112.014 100.886 112.527 101.173C113.039 101.459 113.41 101.933 113.559 102.489C113.708 103.046 113.625 103.642 113.324 104.146L113.324 104.146L112.957 104.763L112.957 104.763L110.552 108.797L105.825 106.155C105.313 105.869 104.942 105.395 104.793 104.839C104.644 104.282 104.728 103.687 105.028 103.183C105.329 102.678 105.821 102.308 106.398 102.153C106.975 101.998 107.587 102.073 108.1 102.36L108.795 102.748Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.373684"}),a.createElement("path",{d:"M116.865 94.0866L116.958 94.2427L117.116 94.154L117.811 93.7653C118.324 93.4788 118.936 93.4037 119.513 93.5582C120.09 93.7127 120.583 94.0836 120.884 94.5878C121.185 95.0918 121.269 95.6876 121.12 96.2442C120.971 96.8009 120.6 97.2749 120.088 97.5613L120.088 97.5614L119.461 97.9124L119.461 97.9125L115.362 100.203L112.589 95.5518C112.288 95.0478 112.204 94.4522 112.353 93.8958C112.502 93.3393 112.873 92.8655 113.385 92.5793C113.897 92.293 114.51 92.2181 115.087 92.3727C115.664 92.5273 116.156 92.8982 116.457 93.4024L116.865 94.0866Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.373684"}),a.createElement("g",{filter:"url(#filter5_d_351_43460)",className:t3()(aW,a$)},a.createElement("rect",{x:"124",y:"37.761",width:"34.3789",height:"34.3789",fill:"#FFD45B"}),a.createElement("rect",{x:"124.187",y:"37.9478",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),a.createElement("path",{d:"M131.262 57.6483C132.364 58.2951 133.535 59.063 134.814 59.2976C138.578 59.9876 139.728 56.6784 139.99 53.525C140.181 51.2338 140.49 47.2706 137.707 46.3822C135.469 45.668 135.63 48.5222 135.525 50.0614C135.198 54.8126 139.249 59.0839 144.177 57.7244C145.893 57.251 147.804 55.2775 148.694 53.7787C149.217 52.8971 149.432 51.8588 149.988 51.0257",stroke:"black",strokeWidth:"1.49474",strokeLinecap:"round",className:t3()(aW,a$)}),a.createElement("circle",{cx:"150.532",cy:"37.7597",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684",className:t3()(aW,a$)}),a.createElement("g",{filter:"url(#filter6_d_351_43460)",className:t3()(aW,aj)},a.createElement("rect",{x:"37",y:"81.208",width:"34.3789",height:"34.3789",fill:"#80CAFF"}),a.createElement("rect",{x:"37.1868",y:"81.3948",width:"34.0053",height:"34.0053",stroke:"black",strokeWidth:"0.373684"})),a.createElement("rect",{className:t3()(aW,aj),x:"41.8633",y:"87.5618",width:"24.2895",height:"4.48421",fill:"black",fillOpacity:"0.2"}),a.createElement("circle",{className:t3()(aW,aj),cx:"70.6325",cy:"98.0258",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684"}),a.createElement("circle",{className:t3()(aW,aj),cx:"61.2902",cy:"106.617",r:"3.92368",fill:"#A259FF",stroke:"black",strokeWidth:"0.373684"}),a.createElement("defs",null,a.createElement("filter",{id:"filter0_d_351_43460",x:"37.4653",y:"38.1284",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),a.createElement("filter",{id:"filter1_d_351_43460",x:"124.157",y:"81",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),a.createElement("filter",{id:"filter2_d_351_43460",x:"81",y:"38",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),a.createElement("filter",{id:"filter3_d_351_43460",x:"80.8096",y:"123.326",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),a.createElement("filter",{id:"filter4_d_351_43460",x:"81",y:"80.7251",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),a.createElement("filter",{id:"filter5_d_351_43460",x:"124",y:"37.761",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"})),a.createElement("filter",{id:"filter6_d_351_43460",x:"37",y:"81.208",width:"35.1263",height:"35.1263",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.747368",dy:"0.747368"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_43460"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_43460",result:"shape"}))))}function a0(e){return a.createElement("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t3()(aH,{[az]:e.hovered})},a.createElement("rect",{width:"196",height:"121.761",fill:"white"}),a.createElement("rect",{x:"27.183",y:"49.6627",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),a.createElement("rect",{x:"31.7598",y:"59.3601",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),a.createElement("circle",{cx:"58.6556",cy:"61.7423",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),a.createElement("rect",{x:"76.5885",y:"49.6627",width:"42.82",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),a.createElement("rect",{x:"80.7957",y:"59.3601",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),a.createElement("circle",{cx:"109.161",cy:"61.7423",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),a.createElement("rect",{x:"76.5888",y:"3.18299",width:"42.82",height:"23.7889",rx:"2.01291",fill:"#FFCD29",stroke:"black",strokeWidth:"0.365983"}),a.createElement("rect",{x:"80.7959",y:"12.8804",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),a.createElement("circle",{cx:"110.261",cy:"15.2623",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),a.createElement("rect",{x:"125.631",y:"130.178",width:"43.0186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),a.createElement("rect",{x:"27.183",y:"89.9188",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),a.createElement("rect",{x:"33.5896",y:"99.6157",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),a.createElement("circle",{cx:"60.4899",cy:"101.998",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),a.createElement("g",{clipPath:"url(#clip0_351_43276)"},a.createElement("path",{d:"M61.0894 105.123C60.3396 105.1 59.722 104.946 59.1311 104.674C58.9431 104.588 58.7461 104.522 58.5542 104.448C58.3001 104.35 58.0777 104.2 57.9633 103.952C57.7015 103.384 57.427 102.818 57.2237 102.227C57.0344 101.676 57.1513 101.125 57.4918 100.655C57.7562 100.29 57.9163 99.8986 58.0319 99.4665C58.1742 98.9366 58.5669 98.643 59.1006 98.5287C59.3459 98.4766 59.5785 98.4931 59.8123 98.5833C60.0296 98.6672 60.2545 98.6812 60.482 98.6189C60.9039 98.5032 61.2889 98.6227 61.6663 98.8044C61.843 98.8883 62.0234 98.9772 62.2128 99.0192C62.8367 99.1564 63.157 99.5669 63.2421 100.164C63.284 100.46 63.2599 100.769 63.2383 101.07C63.2192 101.333 63.2472 101.582 63.331 101.83C63.5483 102.473 63.5153 103.102 63.2179 103.716C63.0362 104.092 62.7389 104.346 62.378 104.541C62.1251 104.677 61.8735 104.816 61.6282 104.966C61.43 105.087 61.2177 105.129 61.0894 105.123ZM61.083 104.886C61.2787 104.889 61.4274 104.827 61.6269 104.673C61.7616 104.57 61.9218 104.499 62.0704 104.415C62.2458 104.317 62.4517 104.251 62.594 104.118C63.1989 103.548 63.3361 102.819 63.1328 102.055C63.0019 101.562 62.9625 101.089 63.0197 100.591C63.0934 99.9405 62.7376 99.4512 62.1136 99.2784C61.8976 99.2187 61.6905 99.117 61.4872 99.0192C61.2266 98.8946 60.9585 98.7866 60.6713 98.8553C60.2977 98.9442 59.9419 98.9163 59.5835 98.7955C59.4666 98.7561 59.3345 98.7206 59.215 98.7345C58.7347 98.7904 58.3979 99.0738 58.2772 99.5237C58.1463 100.013 57.9264 100.439 57.6545 100.859C57.3724 101.296 57.2974 101.795 57.4982 102.297C57.6964 102.793 57.9125 103.284 58.126 103.774C58.2314 104.018 58.417 104.181 58.6673 104.274C58.9037 104.362 59.1426 104.444 59.3726 104.547C59.8796 104.772 60.4172 104.848 61.083 104.886Z",fill:"black"}),a.createElement("path",{d:"M60.5404 103.175C60.0016 103.198 59.5072 103.112 59.1222 102.711C59.0561 102.642 58.9938 102.566 58.9544 102.481C58.9354 102.441 58.9189 102.367 58.9926 102.326C59.0383 102.3 59.0968 102.327 59.1336 102.355C59.2264 102.424 59.3039 102.514 59.3979 102.583C59.8402 102.909 60.3294 103.011 60.8593 102.856C61.1275 102.778 61.3143 102.581 61.4795 102.365C61.5405 102.286 61.6078 102.167 61.7184 102.25C61.8289 102.333 61.7298 102.435 61.6726 102.511C61.3842 102.895 61.036 103.177 60.5404 103.175Z",fill:"black"}),a.createElement("path",{d:"M62.2294 101.088C62.2281 101.243 62.1099 101.367 61.9701 101.365C61.8253 101.362 61.7045 101.234 61.7083 101.088C61.7122 100.928 61.824 100.801 61.96 100.803C62.1124 100.805 62.2319 100.93 62.2294 101.088Z",fill:"black"}),a.createElement("path",{d:"M58.9061 101.294C58.9048 101.449 58.7867 101.573 58.6469 101.571C58.502 101.568 58.3813 101.44 58.3851 101.294C58.3889 101.134 58.5007 101.007 58.6367 101.009C58.7879 101.01 58.9074 101.136 58.9061 101.294Z",fill:"black"})),a.createElement("path",{d:"M96.5399 30.8149C96.5399 30.6128 96.7037 30.449 96.9058 30.449C97.108 30.449 97.2718 30.6128 97.2718 30.8149H96.5399ZM147.121 45.7131C146.978 45.856 146.747 45.856 146.604 45.7131L144.275 43.384C144.132 43.241 144.132 43.0093 144.275 42.8664C144.418 42.7234 144.649 42.7234 144.792 42.8664L146.863 44.9367L148.933 42.8664C149.076 42.7234 149.308 42.7234 149.45 42.8664C149.593 43.0093 149.593 43.241 149.45 43.384L147.121 45.7131ZM97.2718 30.8149V33.1938H96.5399V30.8149H97.2718ZM101.298 37.2196H142.471V37.9516H101.298V37.2196ZM147.229 41.9774V45.4543H146.497V41.9774H147.229ZM142.471 37.2196C145.098 37.2196 147.229 39.3498 147.229 41.9774H146.497C146.497 39.754 144.694 37.9516 142.471 37.9516V37.2196ZM97.2718 33.1938C97.2718 35.4172 99.0742 37.2196 101.298 37.2196V37.9516C98.67 37.9516 96.5399 35.8215 96.5399 33.1938H97.2718Z",fill:"black"}),a.createElement("path",{d:"M97.2684 30.8149C97.2684 30.6128 97.1045 30.449 96.9024 30.449C96.7002 30.449 96.5364 30.6128 96.5364 30.8149H97.2684ZM46.5039 45.7131C46.6468 45.856 46.8786 45.856 47.0215 45.7131L49.3506 43.384C49.4935 43.241 49.4935 43.0093 49.3506 42.8664C49.2077 42.7234 48.9759 42.7234 48.833 42.8664L46.7627 44.9367L44.6924 42.8664C44.5495 42.7234 44.3177 42.7234 44.1748 42.8664C44.0319 43.0093 44.0319 43.241 44.1748 43.384L46.5039 45.7131ZM96.5364 30.8149V33.1938H97.2684V30.8149H96.5364ZM92.5106 37.2196H51.1545V37.9516H92.5106V37.2196ZM46.3967 41.9774V45.4543H47.1287V41.9774H46.3967ZM51.1545 37.2196C48.5268 37.2196 46.3967 39.3498 46.3967 41.9774H47.1287C47.1287 39.754 48.9311 37.9516 51.1545 37.9516V37.2196ZM96.5364 33.1938C96.5364 35.4172 94.734 37.2196 92.5106 37.2196V37.9516C95.1382 37.9516 97.2684 35.8215 97.2684 33.1938H96.5364Z",fill:"black"}),a.createElement("path",{d:"M97.2686 30.6304C97.2686 30.4282 97.1047 30.2644 96.9026 30.2644C96.7005 30.2644 96.5366 30.4282 96.5366 30.6304H97.2686ZM96.6438 46.0775C96.7867 46.2204 97.0185 46.2204 97.1614 46.0775L99.4905 43.7484C99.6334 43.6054 99.6334 43.3737 99.4905 43.2308C99.3476 43.0879 99.1158 43.0879 98.9729 43.2308L96.9026 45.3011L94.8323 43.2308C94.6894 43.0879 94.4576 43.0879 94.3147 43.2308C94.1718 43.3737 94.1718 43.6054 94.3147 43.7484L96.6438 46.0775ZM96.5366 30.6304V45.8187H97.2686V30.6304H96.5366Z",fill:"black"}),a.createElement("g",{clipPath:"url(#clip1_351_43276)"},a.createElement("path",{d:"M58.8788 58.1369C59.7645 58.1496 60.4813 58.5105 61.1522 59.0925C62.5348 60.2921 62.6352 63.1971 60.4584 64.5085C58.9563 65.4133 56.9612 64.9838 55.998 63.3356C54.9331 61.5146 55.7781 59.0887 57.7364 58.3465C58.1036 58.2068 58.4836 58.133 58.8788 58.1369ZM61.8321 61.2731C61.8524 60.625 61.5258 59.874 60.9565 59.2831C60.2271 58.527 59.2867 58.2677 58.2511 58.5079C56.3449 58.9476 55.3105 61.1016 56.1263 62.9023C56.7032 64.1756 58.0592 64.8885 59.3554 64.6C60.8155 64.2747 61.8384 62.9874 61.8321 61.2731Z",fill:"black"}),a.createElement("path",{d:"M61.0418 62.2874C60.6491 63.2747 59.9489 63.8517 58.8903 63.8644C57.983 63.8746 57.3159 63.426 56.9105 62.5885C56.8851 62.6 56.8546 62.6152 56.8253 62.6254C56.7834 62.6406 56.7593 62.6508 56.7211 62.6025C56.7033 62.5796 56.6754 62.539 56.7275 62.497C56.8558 62.3916 56.9943 62.3001 57.1341 62.2124C57.1557 62.1984 57.2066 62.1971 57.2358 62.2416C57.2676 62.2912 57.2472 62.3229 57.2282 62.3484C57.1926 62.3954 57.1418 62.431 57.0909 62.4754C57.5764 63.2188 58.2232 63.6661 59.1483 63.5734C59.9641 63.492 60.5716 62.8872 60.794 62.1743C60.8041 62.1425 60.7685 62.1196 60.7342 62.0777C60.6771 62.0103 60.6377 61.9989 60.7025 61.8909C60.7495 61.8235 60.8219 61.8629 60.8639 61.8845C60.9973 61.9544 61.1294 62.0319 61.2464 62.126C61.2921 62.1628 61.376 62.2175 61.3213 62.3153C61.2705 62.4144 61.2006 62.3496 61.118 62.3255C61.0951 62.3153 61.0723 62.3013 61.0418 62.2874Z",fill:"black"}),a.createElement("path",{d:"M57.3933 60.2757C57.4657 60.1588 57.5445 60.066 57.6881 60.0953C57.8254 60.1232 57.8813 60.2427 57.8825 60.3532C57.8864 60.5718 57.8825 60.7967 57.8343 61.009C57.7847 61.2275 57.683 61.4359 57.5928 61.6431C57.5293 61.7892 57.4289 61.8184 57.3196 61.7117C56.9689 61.3661 56.7566 60.9518 56.7795 60.446C56.7859 60.3024 56.8634 60.1842 57.007 60.1359C57.162 60.0838 57.2815 60.155 57.3933 60.2757ZM57.6754 60.2999C57.6754 60.2999 57.6475 60.2592 57.6004 60.2732C57.5649 60.2706 57.5255 60.4219 57.5026 60.5019C57.481 60.5769 57.4848 60.6315 57.4314 60.6404C57.3463 60.6481 57.3526 60.5756 57.3171 60.54C57.3005 60.5223 57.2205 60.2961 57.1061 60.338C57.0324 60.3647 57.0286 60.4727 57.0324 60.5375C57.0502 60.8666 57.2001 61.1487 57.378 61.4512C57.5407 61.0611 57.7834 60.5375 57.6754 60.2999Z",fill:"black"}),a.createElement("path",{d:"M60.2957 60.1701C60.3885 60.118 60.4761 60.0736 60.5626 60.0914C60.6909 60.118 60.7163 60.2527 60.7278 60.3697C60.7646 60.742 60.6032 61.0571 60.4291 61.3672C60.3897 61.4371 60.3338 61.4981 60.297 61.5705C60.1915 61.7764 60.0098 61.7383 59.9094 61.5616C59.6997 61.1893 59.5802 60.7801 59.6184 60.3442C59.6323 60.1778 59.6946 60.0189 59.8789 59.9757C60.0644 59.93 60.2258 60.0469 60.2957 60.1701ZM60.067 61.3837C60.086 61.474 60.1051 61.4041 60.1229 61.3863C60.2499 61.1957 60.3783 61.005 60.4533 60.7954C60.5117 60.6314 60.6655 60.2159 60.5041 60.2578C60.4647 60.2604 60.424 60.3811 60.3897 60.4421C60.3618 60.4904 60.3046 60.5679 60.2804 60.5717C60.1877 60.5742 60.1991 60.4904 60.1813 60.4421C60.1394 60.3328 60.1432 60.1612 59.9869 60.1816C59.8319 60.2019 59.8497 60.3735 59.87 60.4853C59.9234 60.7865 59.9996 61.0851 60.067 61.3837Z",fill:"black"})),a.createElement("g",{clipPath:"url(#clip2_351_43276)"},a.createElement("path",{d:"M106.15 61.4002C106.19 60.3696 106.623 59.3517 107.641 58.6439C107.894 58.4685 108.194 58.3541 108.485 58.2436C110.078 57.6387 112.02 58.7328 112.438 60.7102C112.736 62.1156 112.387 63.3546 111.281 64.3014C109.773 65.5912 107.534 65.1172 106.591 63.3432C106.3 62.7917 106.153 62.2046 106.15 61.4002ZM109.218 64.6076C109.862 64.6089 110.388 64.4424 110.809 64.1489C112.465 62.9912 112.596 60.3836 111.064 59.062C110.367 58.4596 109.556 58.302 108.681 58.4965C108.409 58.5575 108.146 58.715 107.913 58.879C106.537 59.8511 106.176 61.8602 107.116 63.3127C107.638 64.1209 108.377 64.5784 109.218 64.6076Z",fill:"black"}),a.createElement("path",{d:"M108.781 63.6393C108.761 63.6736 108.735 63.708 108.716 63.7384C108.668 63.816 108.644 63.8439 108.552 63.8122C108.484 63.7728 108.498 63.6863 108.515 63.6393C108.564 63.5072 108.627 63.3801 108.701 63.2594C108.73 63.2111 108.787 63.1247 108.847 63.1526C108.893 63.1806 108.927 63.1971 108.888 63.3305C108.88 63.3559 108.871 63.3864 108.858 63.4271C109.174 63.586 109.496 63.6037 109.829 63.5237C110.313 63.4068 110.757 63.0421 111.012 62.5935C111.119 62.4054 111.164 62.225 111.222 61.9975C111.235 61.9505 111.269 61.8717 111.247 61.8577C111.218 61.8399 111.183 61.817 111.141 61.7992C111.059 61.7662 111.067 61.7052 111.084 61.6658C111.111 61.5972 111.165 61.5896 111.198 61.5985C111.387 61.6468 111.574 61.7078 111.758 61.7713C111.784 61.7802 111.818 61.8081 111.805 61.8691C111.791 61.9327 111.749 61.9441 111.713 61.9505C111.655 61.9606 111.593 61.9454 111.517 61.939C111.493 62.042 111.471 62.15 111.441 62.2542C111.208 63.0649 110.709 63.6139 109.876 63.8274C109.542 63.9125 109.203 63.8477 108.781 63.6393Z",fill:"black"}),a.createElement("path",{d:"M110.475 60.4918C110.475 60.3914 110.46 60.2859 110.481 60.1906C110.495 60.1296 110.527 60.0368 110.611 60.0381C110.692 60.0394 110.753 60.0991 110.772 60.1525C110.894 60.4994 110.944 60.859 110.894 61.2237C110.89 61.3216 110.795 61.38 110.752 61.38C110.674 61.38 110.597 61.3279 110.575 61.2377C110.517 60.9937 110.464 60.493 110.475 60.4918Z",fill:"black"}),a.createElement("path",{d:"M107.785 60.4853C107.791 60.4243 107.829 60.3175 107.921 60.2997C108.017 60.2743 108.052 60.39 108.063 60.4408C108.118 60.6848 108.104 60.639 108.132 60.9809C108.134 61.005 108.143 61.4129 108.133 61.5235C108.123 61.6404 108.059 61.6989 108.002 61.7014C107.894 61.7078 107.86 61.6353 107.836 61.5502C107.761 61.2909 107.725 61.0279 107.785 60.4853Z",fill:"black"})),a.createElement("g",{clipPath:"url(#clip3_351_43276)"},a.createElement("path",{d:"M111.595 18.3869C110.845 18.364 110.227 18.2102 109.637 17.9383C109.448 17.8519 109.251 17.7858 109.06 17.7121C108.805 17.6142 108.583 17.4643 108.469 17.2165C108.207 16.6485 107.932 16.0817 107.729 15.4908C107.54 14.9405 107.657 14.389 107.997 13.9188C108.262 13.5541 108.422 13.1627 108.537 12.7307C108.68 12.2007 109.072 11.9072 109.606 11.7928C109.851 11.7407 110.084 11.7572 110.318 11.8475C110.535 11.9313 110.76 11.9453 110.987 11.883C111.409 11.7674 111.794 11.8869 112.172 12.0686C112.348 12.1525 112.529 12.2414 112.718 12.2833C113.342 12.4206 113.662 12.831 113.747 13.4283C113.789 13.7244 113.765 14.0332 113.744 14.3344C113.725 14.5974 113.753 14.8465 113.836 15.0943C114.054 15.7373 114.021 16.3663 113.723 16.9801C113.542 17.3563 113.244 17.6104 112.883 17.8049C112.63 17.9408 112.379 18.0806 112.134 18.2306C111.935 18.3513 111.723 18.3932 111.595 18.3869ZM111.588 18.1505C111.784 18.1531 111.933 18.0908 112.132 17.937C112.267 17.8341 112.427 17.7629 112.576 17.6791C112.751 17.5812 112.957 17.5151 113.099 17.3817C113.704 16.8124 113.842 16.083 113.638 15.3192C113.507 14.8262 113.468 14.3534 113.525 13.8553C113.599 13.2047 113.243 12.7154 112.619 12.5426C112.403 12.4829 112.196 12.3812 111.993 12.2833C111.732 12.1588 111.464 12.0508 111.177 12.1194C110.803 12.2084 110.447 12.1804 110.089 12.0597C109.972 12.0203 109.84 11.9847 109.72 11.9987C109.24 12.0546 108.903 12.338 108.783 12.7878C108.652 13.2771 108.432 13.7028 108.16 14.1234C107.878 14.5606 107.803 15.0587 108.004 15.5607C108.202 16.0575 108.418 16.5481 108.631 17.0386C108.737 17.2826 108.922 17.4452 109.173 17.538C109.409 17.6257 109.648 17.7083 109.878 17.8112C110.385 18.0361 110.923 18.1124 111.588 18.1505Z",fill:"black"}),a.createElement("path",{d:"M111.046 16.4389C110.507 16.4618 110.013 16.3766 109.628 15.975C109.561 15.9064 109.499 15.8302 109.46 15.745C109.441 15.7056 109.424 15.6307 109.498 15.59C109.544 15.5646 109.602 15.5913 109.639 15.6192C109.732 15.6878 109.809 15.7781 109.903 15.8467C110.346 16.1733 110.835 16.2749 111.365 16.1199C111.633 16.0424 111.82 15.8454 111.985 15.6294C112.046 15.5506 112.113 15.4312 112.224 15.5138C112.334 15.5976 112.235 15.6993 112.178 15.7755C111.89 16.1593 111.541 16.4414 111.046 16.4389Z",fill:"black"}),a.createElement("path",{d:"M112.735 14.3521C112.733 14.5071 112.615 14.6316 112.475 14.6291C112.331 14.6266 112.21 14.4982 112.214 14.3521C112.218 14.192 112.329 14.0649 112.465 14.0674C112.618 14.0687 112.737 14.1945 112.735 14.3521Z",fill:"black"}),a.createElement("path",{d:"M109.411 14.5579C109.41 14.7129 109.292 14.8375 109.152 14.8349C109.007 14.8324 108.887 14.704 108.89 14.5579C108.894 14.3978 109.006 14.2707 109.142 14.2732C109.293 14.2745 109.413 14.4003 109.411 14.5579Z",fill:"black"})),a.createElement("path",{d:"M48.5913 77.6602C48.5913 77.458 48.4275 77.2942 48.2253 77.2942C48.0232 77.2942 47.8594 77.458 47.8594 77.6602H48.5913ZM47.9666 85.6046C48.1095 85.7475 48.3412 85.7475 48.4841 85.6046L50.8132 83.2755C50.9562 83.1326 50.9562 82.9008 50.8132 82.7579C50.6703 82.615 50.4386 82.615 50.2957 82.7579L48.2253 84.8282L46.155 82.7579C46.0121 82.615 45.7804 82.615 45.6375 82.7579C45.4945 82.9008 45.4945 83.1326 45.6375 83.2755L47.9666 85.6046ZM47.8594 77.6602V85.3458H48.5913V77.6602H47.8594Z",fill:"black"}),a.createElement("rect",{x:"125.264",y:"50.1747",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983",className:t3()(aW,aZ)}),a.createElement("rect",{x:"131.664",y:"59.8726",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2",className:t3()(aW,aZ)}),a.createElement("circle",{cx:"158.567",cy:"62.2545",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983",className:t3()(aW,aZ)}),a.createElement("g",{clipPath:"url(#clip4_351_43276)",className:t3()(aW,aZ)},a.createElement("path",{d:"M156.152 60.7639C156.525 60.325 156.935 59.9056 157.388 59.5486C157.703 59.3 157.811 59.2875 157.985 59.2403C158.032 59.2278 158.074 59.1986 158.114 59.1695C159.805 57.9764 161.959 58.8222 162.375 60.9278C162.652 62.325 161.939 63.7125 160.714 64.2792C160.695 64.2889 160.666 64.2917 160.656 64.307C160.413 64.6875 159.918 64.8347 159.617 64.9097C159.556 64.932 159.509 64.9958 159.453 65.0375C159.41 65.0695 159.367 65.1042 159.318 65.1264C157.725 65.8653 156.013 64.8764 155.638 63.2403C155.585 63.0097 155.353 61.6181 156.152 60.7639ZM159.47 64.1903C160.038 64.1875 160.409 64.0945 160.741 63.9125C162.338 63.0361 162.577 60.6556 161.171 59.4931C160.366 58.8278 159.335 58.7153 158.43 59.3528C157.353 60.1097 156.963 61.6611 157.566 62.8333C157.999 63.6764 158.686 64.1417 159.47 64.1903ZM160.013 64.55C160.082 64.525 160.092 64.507 160.081 64.4986C160.081 64.4986 160.052 64.4986 160.003 64.5C158.753 64.5945 157.813 64.0972 157.256 62.9764C156.711 61.882 156.843 60.807 157.486 59.7778C157.435 59.8028 157.393 59.8333 157.356 59.8681C156.489 60.6528 156.234 61.982 156.734 63.1181C157.195 64.1667 158.163 64.7889 159.252 64.7111C159.507 64.6931 159.759 64.6056 160.013 64.55ZM156.342 60.9472C156.343 60.907 156.306 60.957 156.3 60.9639C156.281 60.9903 156.261 61.0181 156.245 61.0458C156.016 61.432 155.873 61.85 155.853 62.2986C155.807 63.3208 156.166 64.1681 157.031 64.7458C157.606 65.1306 158.245 65.2097 158.913 65.0014C157.936 64.9028 157.175 64.45 156.661 63.6139C156.148 62.7806 156.066 61.8861 156.342 60.9472Z",fill:"black"}),a.createElement("path",{d:"M160.525 61.8376C160.717 61.8445 160.78 61.9445 160.717 62.1251C160.561 62.5695 160.124 62.7862 159.678 62.6307C159.414 62.5376 159.207 62.3682 159.064 62.1265C158.955 61.9404 159.003 61.8334 159.218 61.8195C159.443 61.8043 160.316 61.8293 160.525 61.8376ZM160.482 62.0543C160.099 62.0543 159.725 62.0543 159.348 62.0543C159.731 62.5001 160.298 62.5084 160.482 62.0543Z",fill:"black"}),a.createElement("path",{d:"M158.963 61.0499C158.964 61.2666 158.756 61.4638 158.528 61.4624C158.33 61.461 158.191 61.2819 158.189 61.0916C158.186 60.9013 158.381 60.7138 158.595 60.7082C158.8 60.7013 158.963 60.8513 158.963 61.0499ZM158.546 60.9124C158.443 60.9291 158.411 61.0263 158.42 61.0999C158.431 61.2069 158.511 61.2332 158.561 61.2346C158.609 61.236 158.702 61.1888 158.721 61.0971C158.746 61.0041 158.693 60.8777 158.546 60.9124Z",fill:"black"}),a.createElement("path",{d:"M161.617 61.1082C161.614 61.318 161.466 61.4721 161.267 61.4707C161.053 61.4694 160.899 61.2957 160.906 61.0638C160.912 60.8624 161.062 60.7069 161.248 60.711C161.441 60.7166 161.62 60.9082 161.617 61.1082ZM161.425 61.1027C161.425 60.9957 161.368 60.9235 161.28 60.9235C161.225 60.9235 161.134 60.9652 161.134 61.0791C161.134 61.2777 161.28 61.2666 161.28 61.2666C161.357 61.2638 161.425 61.2319 161.425 61.1027Z",fill:"black"})),a.createElement("rect",{x:"125.259",y:"90.4347",width:"43.186",height:"23.7889",rx:"2.01291",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.365983"}),a.createElement("rect",{x:"131.662",y:"100.132",width:"17.9332",height:"4.3918",fill:"black",fillOpacity:"0.2"}),a.createElement("circle",{cx:"158.562",cy:"102.514",r:"5.48975",fill:"white",stroke:"black",strokeWidth:"0.365983"}),a.createElement("g",{clipPath:"url(#clip5_351_43276)"},a.createElement("path",{d:"M155.773 101.196C156.115 100.794 156.49 100.41 156.904 100.084C157.192 99.8563 157.291 99.8449 157.45 99.8017C157.493 99.7903 157.532 99.7636 157.568 99.7369C159.115 98.6453 161.086 99.4192 161.467 101.346C161.72 102.624 161.068 103.894 159.947 104.412C159.93 104.421 159.903 104.424 159.894 104.437C159.672 104.786 159.219 104.92 158.943 104.989C158.887 105.009 158.844 105.068 158.793 105.106C158.754 105.135 158.715 105.167 158.67 105.187C157.213 105.863 155.646 104.958 155.303 103.462C155.254 103.251 155.042 101.977 155.773 101.196ZM158.809 104.331C159.328 104.328 159.668 104.243 159.971 104.077C161.433 103.275 161.651 101.097 160.365 100.033C159.628 99.4243 158.685 99.3213 157.857 99.9046C156.872 100.597 156.515 102.017 157.066 103.089C157.463 103.861 158.092 104.286 158.809 104.331ZM159.306 104.66C159.369 104.637 159.378 104.62 159.368 104.613C159.368 104.613 159.341 104.613 159.297 104.614C158.153 104.701 157.293 104.246 156.783 103.22C156.285 102.219 156.406 101.235 156.994 100.293C156.947 100.316 156.909 100.344 156.875 100.376C156.082 101.094 155.848 102.31 156.305 103.35C156.727 104.309 157.613 104.878 158.609 104.807C158.843 104.791 159.073 104.711 159.306 104.66ZM155.947 101.363C155.948 101.327 155.914 101.372 155.909 101.379C155.891 101.403 155.873 101.428 155.858 101.454C155.648 101.807 155.517 102.189 155.5 102.6C155.458 103.535 155.786 104.31 156.577 104.839C157.103 105.191 157.688 105.263 158.299 105.073C157.406 104.983 156.709 104.568 156.239 103.803C155.769 103.041 155.694 102.223 155.947 101.363Z",fill:"black"}),a.createElement("path",{d:"M159.774 102.178C159.95 102.185 160.007 102.276 159.95 102.441C159.808 102.848 159.407 103.046 158.999 102.904C158.758 102.819 158.568 102.664 158.438 102.442C158.337 102.272 158.382 102.174 158.579 102.162C158.785 102.148 159.583 102.171 159.774 102.178ZM159.735 102.376C159.384 102.376 159.042 102.376 158.697 102.376C159.048 102.784 159.566 102.792 159.735 102.376Z",fill:"black"}),a.createElement("path",{d:"M158.345 101.458C158.346 101.656 158.155 101.836 157.947 101.835C157.765 101.834 157.638 101.67 157.637 101.496C157.634 101.322 157.812 101.15 158.008 101.145C158.196 101.139 158.345 101.276 158.345 101.458ZM157.964 101.332C157.87 101.347 157.84 101.436 157.848 101.503C157.858 101.601 157.932 101.625 157.978 101.627C158.021 101.628 158.106 101.585 158.124 101.501C158.147 101.416 158.098 101.3 157.964 101.332Z",fill:"black"}),a.createElement("path",{d:"M160.773 101.511C160.771 101.703 160.635 101.844 160.453 101.843C160.257 101.841 160.116 101.683 160.123 101.47C160.128 101.286 160.265 101.144 160.435 101.148C160.612 101.153 160.776 101.328 160.773 101.511ZM160.598 101.506C160.598 101.408 160.546 101.342 160.465 101.342C160.415 101.342 160.331 101.38 160.331 101.484C160.331 101.666 160.465 101.656 160.465 101.656C160.536 101.653 160.598 101.624 160.598 101.506Z",fill:"black"})),a.createElement("path",{className:t3()(aW,aZ),d:"M147.77 78.1765C147.77 77.9744 147.606 77.8105 147.404 77.8105C147.202 77.8105 147.038 77.9744 147.038 78.1765H147.77ZM147.145 86.1209C147.288 86.2639 147.52 86.2639 147.663 86.1209L149.992 83.7918C150.135 83.6489 150.135 83.4172 149.992 83.2743C149.849 83.1313 149.617 83.1313 149.474 83.2743L147.404 85.3446L145.333 83.2743C145.191 83.1313 144.959 83.1313 144.816 83.2743C144.673 83.4172 144.673 83.6489 144.816 83.7918L147.145 86.1209ZM147.038 78.1765V85.8622H147.77V78.1765H147.038Z",fill:"black"}),a.createElement("path",{d:"M147.77 118.432C147.77 118.23 147.606 118.066 147.404 118.066C147.202 118.066 147.038 118.23 147.038 118.432H147.77ZM147.145 126.376C147.288 126.519 147.52 126.519 147.663 126.376L149.992 124.047C150.135 123.904 150.135 123.673 149.992 123.53C149.849 123.387 149.617 123.387 149.474 123.53L147.404 125.6L145.333 123.53C145.191 123.387 144.959 123.387 144.816 123.53C144.673 123.673 144.673 123.904 144.816 124.047L147.145 126.376ZM147.038 118.432V126.118H147.77V118.432H147.038Z",fill:"black"}),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_351_43276"},a.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(56.6428 98.1511)"})),a.createElement("clipPath",{id:"clip1_351_43276"},a.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(55.1821 57.8955)"})),a.createElement("clipPath",{id:"clip2_351_43276"},a.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(105.685 57.8955)"})),a.createElement("clipPath",{id:"clip3_351_43276"},a.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(107.148 11.4153)"})),a.createElement("clipPath",{id:"clip4_351_43276"},a.createElement("rect",{width:"8",height:"8",fill:"white",transform:"translate(155 58)"})),a.createElement("clipPath",{id:"clip5_351_43276"},a.createElement("rect",{width:"7.31966",height:"7.31966",fill:"white",transform:"translate(154.719 98.6667)"}))))}function a1(e){return a.createElement("svg",{width:"136",viewBox:"0 0 196 122",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t3()(aH,{[az]:e.hovered})},a.createElement("rect",{x:"27.1929",y:"3.19293",width:"69.0706",height:"15.0489",fill:"black",stroke:"black",strokeWidth:"0.38587"}),a.createElement("rect",{x:"99.7337",y:"3.19293",width:"69.0706",height:"15.0489",fill:"black",stroke:"black",strokeWidth:"0.38587"}),a.createElement("rect",{x:"99.7337",y:"23.2581",width:"69.0706",height:"15.0489",rx:"2.12228",fill:"#BDE3FF",stroke:"black",strokeWidth:"0.38587"}),a.createElement("rect",{x:"27.1929",y:"43.3228",width:"99.1685",height:"15.0489",rx:"2.12228",fill:"#E4CCFF",stroke:"black",strokeWidth:"0.38587"}),a.createElement("rect",{x:"27.1929",y:"103.518",width:"99.1685",height:"15.0489",rx:"2.12228",fill:"#FFE8A3",stroke:"black",strokeWidth:"0.38587"}),a.createElement("rect",{x:"76.5833",y:"63.3882",width:"92.2228",height:"15.0489",rx:"2.12228",fill:"#BDE3FF",stroke:"black",strokeWidth:"0.38587"}),a.createElement("rect",{x:"83.3374",y:"68.5977",width:"25.8533",height:"4.63043",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"32.7886",y:"108.728",width:"32.0272",height:"4.63043",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"33.561",y:"48.5325",width:"31.2554",height:"4.63043",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"104.947",y:"28.4675",width:"21.6087",height:"4.63043",fill:"black",fillOpacity:"0.2"}),a.createElement("path",{d:"M161.035 74.752C160.165 74.7255 159.449 74.5471 158.764 74.2317C158.546 74.1315 158.317 74.0549 158.095 73.9694C157.8 73.8559 157.542 73.682 157.409 73.3946C157.106 72.7358 156.787 72.0785 156.552 71.3932C156.332 70.755 156.468 70.1154 156.863 69.5701C157.169 69.1471 157.355 68.6932 157.489 68.1921C157.654 67.5775 158.109 67.237 158.728 67.1044C159.013 67.044 159.283 67.0631 159.554 67.1678C159.806 67.2651 160.067 67.2813 160.33 67.209C160.82 67.0749 161.266 67.2135 161.704 67.4242C161.909 67.5215 162.118 67.6247 162.338 67.6733C163.061 67.8325 163.433 68.3085 163.532 69.0012C163.58 69.3446 163.552 69.7027 163.527 70.052C163.505 70.3571 163.537 70.646 163.635 70.9334C163.887 71.6791 163.848 72.4086 163.504 73.1205C163.293 73.5567 162.948 73.8515 162.529 74.077C162.236 74.2347 161.944 74.3968 161.66 74.5707C161.43 74.7107 161.184 74.7594 161.035 74.752ZM161.028 74.4779C161.255 74.4808 161.427 74.4086 161.658 74.2303C161.815 74.1109 162 74.0284 162.173 73.9311C162.376 73.8176 162.615 73.741 162.78 73.5862C163.481 72.9259 163.641 72.08 163.405 71.1942C163.253 70.6224 163.207 70.0741 163.274 69.4964C163.359 68.7418 162.946 68.1744 162.223 67.974C161.972 67.9047 161.732 67.7868 161.496 67.6733C161.194 67.5289 160.883 67.4036 160.55 67.4832C160.117 67.5863 159.704 67.5539 159.288 67.4139C159.153 67.3682 159 67.327 158.861 67.3432C158.304 67.408 157.913 67.7367 157.773 68.2584C157.622 68.8258 157.367 69.3195 157.051 69.8074C156.724 70.3144 156.637 70.8921 156.87 71.4742C157.1 72.0505 157.35 72.6194 157.598 73.1883C157.72 73.4713 157.936 73.6599 158.226 73.7675C158.5 73.8692 158.777 73.965 159.044 74.0844C159.632 74.3452 160.255 74.4337 161.028 74.4779Z",fill:"black"}),a.createElement("path",{d:"M160.398 72.4923C159.773 72.5188 159.2 72.4201 158.753 71.9543C158.677 71.8747 158.605 71.7863 158.559 71.6876C158.537 71.6419 158.518 71.5549 158.603 71.5078C158.656 71.4783 158.724 71.5092 158.767 71.5417C158.874 71.6212 158.964 71.7259 159.073 71.8055C159.586 72.1842 160.154 72.3021 160.768 72.1223C161.079 72.0324 161.296 71.804 161.487 71.5535C161.558 71.4621 161.636 71.3235 161.764 71.4193C161.893 71.5166 161.778 71.6345 161.711 71.7229C161.377 72.168 160.973 72.4952 160.398 72.4923Z",fill:"black"}),a.createElement("path",{d:"M162.357 70.0724C162.355 70.2522 162.218 70.3966 162.056 70.3937C161.888 70.3907 161.748 70.2419 161.753 70.0724C161.757 69.8867 161.887 69.7393 162.044 69.7422C162.221 69.7437 162.36 69.8896 162.357 70.0724Z",fill:"black"}),a.createElement("path",{d:"M158.503 70.3111C158.501 70.4909 158.364 70.6354 158.202 70.6324C158.034 70.6295 157.894 70.4806 157.899 70.3111C157.903 70.1254 158.033 69.9781 158.19 69.981C158.366 69.9825 158.504 70.1284 158.503 70.3111Z",fill:"black"}),a.createElement("g",{clipPath:"url(#clip0_351_42930)"},a.createElement("path",{d:"M160.653 34.6219C159.783 34.5953 159.067 34.417 158.381 34.1016C158.163 34.0014 157.935 33.9248 157.712 33.8393C157.418 33.7258 157.16 33.5519 157.027 33.2645C156.723 32.6057 156.405 31.9484 156.169 31.2631C155.95 30.6249 156.085 29.9853 156.48 29.44C156.787 29.017 156.973 28.563 157.107 28.0619C157.272 27.4474 157.727 27.1069 158.346 26.9743C158.631 26.9139 158.9 26.933 159.171 27.0377C159.423 27.1349 159.684 27.1511 159.948 27.0789C160.437 26.9448 160.884 27.0833 161.322 27.2941C161.527 27.3914 161.736 27.4945 161.955 27.5432C162.679 27.7023 163.051 28.1784 163.149 28.8711C163.198 29.2145 163.17 29.5726 163.145 29.9219C163.123 30.227 163.155 30.5158 163.252 30.8032C163.504 31.549 163.466 32.2785 163.121 32.9904C162.91 33.4266 162.566 33.7214 162.147 33.9469C161.854 34.1046 161.562 34.2667 161.278 34.4406C161.048 34.5806 160.801 34.6292 160.653 34.6219ZM160.645 34.3477C160.872 34.3507 161.045 34.2785 161.276 34.1001C161.432 33.9808 161.618 33.8982 161.79 33.801C161.994 33.6875 162.233 33.6108 162.398 33.4561C163.099 32.7958 163.258 31.9499 163.023 31.0641C162.871 30.4923 162.825 29.944 162.891 29.3663C162.977 28.6117 162.564 28.0443 161.841 27.8438C161.59 27.7746 161.35 27.6567 161.114 27.5432C160.812 27.3987 160.501 27.2735 160.168 27.353C159.734 27.4562 159.322 27.4238 158.906 27.2838C158.771 27.2381 158.617 27.1968 158.479 27.213C157.922 27.2779 157.531 27.6065 157.391 28.1283C157.239 28.6957 156.984 29.1894 156.669 29.6772C156.342 30.1842 156.255 30.762 156.488 31.3441C156.718 31.9204 156.968 32.4893 157.216 33.0582C157.338 33.3411 157.553 33.5298 157.844 33.6374C158.118 33.7391 158.395 33.8349 158.662 33.9542C159.25 34.2151 159.873 34.3035 160.645 34.3477Z",fill:"black"}),a.createElement("path",{d:"M160.016 32.3624C159.391 32.3889 158.818 32.2902 158.371 31.8244C158.294 31.7449 158.222 31.6564 158.177 31.5577C158.154 31.512 158.135 31.425 158.221 31.3779C158.274 31.3484 158.342 31.3794 158.384 31.4118C158.492 31.4914 158.582 31.596 158.691 31.6756C159.204 32.0544 159.771 32.1723 160.386 31.9925C160.697 31.9026 160.913 31.6741 161.105 31.4236C161.176 31.3322 161.254 31.1937 161.382 31.2895C161.51 31.3867 161.395 31.5046 161.329 31.5931C160.994 32.0381 160.591 32.3653 160.016 32.3624Z",fill:"black"}),a.createElement("path",{d:"M161.974 29.9422C161.973 30.122 161.836 30.2665 161.674 30.2635C161.506 30.2606 161.366 30.1117 161.37 29.9422C161.375 29.7565 161.504 29.6092 161.662 29.6121C161.839 29.6136 161.977 29.7595 161.974 29.9422Z",fill:"black"}),a.createElement("path",{d:"M158.12 30.181C158.119 30.3608 157.982 30.5052 157.82 30.5023C157.652 30.4993 157.512 30.3505 157.516 30.181C157.521 29.9953 157.65 29.8479 157.808 29.8509C157.983 29.8523 158.122 29.9983 158.12 30.181Z",fill:"black"})),a.createElement("g",{clipPath:"url(#clip1_351_42930)"},a.createElement("path",{d:"M114.675 114.329C114.278 114.328 114.256 114.309 114.215 113.917C114.185 113.631 114.162 113.343 114.154 113.056C114.112 111.501 114.087 109.946 114.039 108.393C114.025 107.893 114.025 107.893 114.462 107.849C114.934 107.802 115.45 107.815 115.924 107.803C117.613 107.764 119.304 107.73 120.993 107.694C121.058 107.693 121.127 107.697 121.183 107.703C121.305 107.716 121.319 107.809 121.321 107.868C121.332 108.088 121.311 108.309 121.311 108.53C121.308 110.144 121.308 111.758 121.307 113.371C121.307 113.565 121.302 113.759 121.301 113.952C121.298 114.281 121.192 114.39 120.854 114.388C120.221 114.387 119.587 114.381 118.953 114.378C118.542 114.377 115.69 114.332 114.675 114.329ZM120.946 108.032L114.356 108.123C114.336 108.123 114.319 108.141 114.321 108.16C114.384 110.116 114.446 112.049 114.51 114.007C114.51 114.026 114.526 114.042 114.545 114.042H120.952C120.977 114.042 120.996 114.021 120.996 113.998V108.082C120.996 108.054 120.974 108.032 120.946 108.032Z",fill:"black"}),a.createElement("path",{d:"M117.683 112.39C117.071 112.373 116.501 112.219 116.016 111.83C115.935 111.765 115.826 111.613 115.852 111.563C115.929 111.42 116.057 111.56 116.151 111.608C117.205 112.155 118.252 112.161 119.295 111.585C119.361 111.548 119.432 111.519 119.504 111.499C119.535 111.492 119.577 111.488 119.607 111.536C119.628 111.567 119.616 111.617 119.599 111.645C119.568 111.692 119.522 111.734 119.476 111.769C118.953 112.188 118.358 112.403 117.683 112.39Z",fill:"black"}),a.createElement("path",{d:"M117.349 109.66C117.133 110.082 116.915 110.502 116.696 110.922C116.68 110.953 116.576 111.096 116.462 111.038C116.421 111.018 116.384 110.978 116.384 110.884C116.384 110.836 116.405 110.78 116.427 110.735C116.627 110.338 116.829 109.942 117.034 109.548C117.063 109.492 117.102 109.433 117.152 109.398C117.193 109.369 117.267 109.354 117.311 109.37C117.469 109.426 117.373 109.615 117.349 109.66Z",fill:"black"}),a.createElement("path",{d:"M119.47 109.498C119.606 109.477 119.652 109.594 119.618 109.695C119.59 109.784 119.551 109.871 119.507 109.952C119.342 110.248 119.174 110.543 119.003 110.835C118.953 110.922 118.885 111.016 118.766 110.959C118.632 110.894 118.682 110.776 118.73 110.686C118.915 110.341 119.103 109.998 119.299 109.659C119.339 109.589 119.401 109.498 119.47 109.498Z",fill:"black"})),a.createElement("path",{d:"M66.4764 69.1441C66.5074 69.1087 66.5118 69.0557 66.4853 69.0159C66.2111 68.6622 65.9414 68.3306 65.6894 67.9857C65.4064 67.5966 65.4816 67.2959 65.9459 67.2031C67.2679 66.9334 68.5899 66.646 69.9296 66.4912C70.8138 66.394 70.9819 66.4205 70.8802 67.464C70.7608 68.6975 70.6105 69.6924 70.4336 70.9171C70.1727 72.7033 70.1064 72.92 69.7704 72.7431C69.6908 72.6989 69.4653 72.5795 69.3017 72.4381C69.1072 72.27 68.8728 72.1064 68.7623 71.9871C68.0902 72.973 67.5597 73.5478 66.7771 74.2729C65.4241 75.8028 62.873 76.0327 60.9187 74.3393C60.2953 73.7999 59.694 73.2383 59.0838 72.6857C58.1067 71.8014 56.9704 71.6289 55.7987 72.1418C54.9675 72.5044 54.2026 73.0261 53.4332 73.5125C52.0626 74.3791 50.6168 74.8787 48.9809 74.5161C48.6271 74.4365 48.2823 74.2818 47.9507 74.1226C47.4466 73.8794 47.2123 73.4727 47.2079 72.8935C47.2034 71.6289 47.1239 70.36 47.146 69.0955C47.1636 68.1449 47.3847 67.9945 48.3265 68.1625C50.1967 68.4897 51.9565 68.136 53.6631 67.3623C54.8039 66.845 55.9844 66.478 57.2445 66.3365C59.0175 66.2039 61.1486 66.8715 62.5856 68.4499C63.178 69.0999 63.9651 69.5553 64.8361 69.6879C65.4595 69.7719 65.8972 69.7321 66.4764 69.1441ZM66.4013 67.8265C66.64 68.1714 66.9009 68.4853 67.0777 68.839C67.1706 69.0291 67.3209 69.206 67.1131 69.5155C66.5737 70.3114 65.3888 70.8552 64.4381 70.5545C63.912 70.3909 63.4035 70.1124 62.9525 69.794C62.1876 69.2635 61.5112 68.6003 60.7286 68.1095C60.1626 67.7513 59.5038 67.4816 58.8495 67.3446C57.4832 67.0572 56.148 67.3578 54.879 67.8751C52.6993 68.7683 50.5283 69.6437 47.986 68.9142C47.986 70.1124 47.9949 71.2399 47.9816 72.3629C47.9728 73.3666 47.8357 73.2472 48.8349 73.5611C48.9853 73.6097 49.14 73.6495 49.2948 73.6716C50.6831 73.8794 51.8813 73.4019 53.022 72.6635C53.756 72.186 54.4899 71.682 55.2814 71.315C56.9969 70.5192 58.5134 70.8685 59.8443 72.2037C60.4146 72.7741 61.0292 73.3091 61.6836 73.7822C62.8022 74.5913 64.0225 75.1617 65.5037 74.3304C66.7284 73.5169 67.6304 72.6812 68.2317 71.3504C68.4837 70.7933 68.5368 70.8198 68.9613 71.2708C69.0983 71.4167 69.0983 71.4167 69.3592 71.6643C69.5537 71.9031 69.5626 71.6687 69.5758 71.483C69.7925 70.0151 69.9517 68.6489 70.1772 67.1235C68.8773 67.3623 67.6702 67.5878 66.4013 67.8265Z",fill:"black"}),a.createElement("rect",{x:"27.1929",y:"23.2581",width:"69.0706",height:"15.0489",rx:"2.12228",fill:"#E4CCFF",stroke:"black",strokeWidth:"0.38587",className:t3()(aW,aX)}),a.createElement("rect",{x:"33.561",y:"29.2361",width:"21.6087",height:"4.63043",fill:"black",fillOpacity:"0.2",className:t3()(aW,aX)}),a.createElement("g",{clipPath:"url(#clip2_351_42930)",className:t3()(aW,aX)},a.createElement("path",{d:"M83.8767 30.6015C83.9224 29.4063 84.425 28.2258 85.6055 27.4048C85.8988 27.2015 86.2466 27.0688 86.5841 26.9406C88.4322 26.2391 90.6842 27.508 91.1691 29.8013C91.514 31.4313 91.1102 32.8682 89.8265 33.9662C88.0785 35.4621 85.4817 34.9124 84.3881 32.855C84.0506 32.2153 83.8797 31.5344 83.8767 30.6015ZM87.4345 34.3214C88.1817 34.3229 88.7919 34.1298 89.2797 33.7894C91.2001 32.4467 91.3519 29.4225 89.5759 27.8897C88.7668 27.1911 87.8265 27.0084 86.8111 27.2339C86.4957 27.3046 86.1906 27.4874 85.9209 27.6775C84.3247 28.805 83.9062 31.135 84.9968 32.8196C85.6025 33.7569 86.4588 34.2875 87.4345 34.3214Z",fill:"black"}),a.createElement("path",{d:"M86.9275 33.1983C86.9039 33.2381 86.8744 33.2779 86.8523 33.3133C86.7963 33.4032 86.7683 33.4356 86.6622 33.3987C86.5826 33.3531 86.5988 33.2528 86.6194 33.1983C86.6754 33.045 86.7491 32.8976 86.8346 32.7576C86.8685 32.7016 86.9348 32.6014 87.0041 32.6338C87.0572 32.6663 87.097 32.6854 87.0513 32.8402C87.0424 32.8696 87.0321 32.905 87.0174 32.9522C87.3829 33.1364 87.7572 33.157 88.1434 33.0642C88.7049 32.9286 89.2192 32.5056 89.5155 31.9854C89.6393 31.7672 89.6909 31.558 89.7586 31.2941C89.7734 31.2396 89.8132 31.1482 89.7881 31.132C89.7542 31.1114 89.713 31.0849 89.6643 31.0642C89.57 31.0259 89.5788 30.9552 89.598 30.9095C89.6304 30.8299 89.6923 30.8211 89.7306 30.8314C89.9502 30.8874 90.1669 30.9581 90.3806 31.0318C90.4101 31.0421 90.4499 31.0745 90.4351 31.1453C90.4189 31.219 90.3703 31.2322 90.3275 31.2396C90.2612 31.2514 90.189 31.2337 90.1006 31.2263C90.0726 31.3457 90.0475 31.471 90.0121 31.5919C89.7424 32.5321 89.1632 33.1688 88.1979 33.4164C87.8103 33.5152 87.4168 33.44 86.9275 33.1983Z",fill:"black"}),a.createElement("path",{d:"M88.892 29.5476C88.892 29.4312 88.8744 29.3089 88.8994 29.1984C88.9156 29.1276 88.9525 29.02 89.0497 29.0215C89.1441 29.023 89.2148 29.0922 89.2369 29.1541C89.3784 29.5565 89.4359 29.9736 89.3784 30.3966C89.374 30.51 89.2634 30.5778 89.2133 30.5778C89.1234 30.5778 89.0335 30.5174 89.0085 30.4128C88.9407 30.1298 88.8788 29.5491 88.892 29.5476Z",fill:"black"}),a.createElement("path",{d:"M85.772 29.5404C85.7793 29.4697 85.8235 29.3459 85.9296 29.3252C86.0417 29.2957 86.0815 29.4299 86.0947 29.4888C86.1581 29.7718 86.1419 29.7187 86.1743 30.1152C86.1772 30.1432 86.1876 30.6163 86.1758 30.7445C86.164 30.8801 86.0903 30.9479 86.024 30.9508C85.8987 30.9582 85.8589 30.8742 85.8309 30.7754C85.7439 30.4748 85.7027 30.1697 85.772 29.5404Z",fill:"black"})),a.createElement("rect",{x:"106.08",y:"83.0787",width:"62.5109",height:"15.0489",rx:"2.12228",fill:"#AFF4C6",stroke:"black",strokeWidth:"0.38587",className:t3()(aW,aJ)}),a.createElement("rect",{x:"112.062",y:"88.2883",width:"22.7663",height:"4.63043",fill:"black",fillOpacity:"0.2",className:t3()(aW,aJ)}),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_351_42930"},a.createElement("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(155.496 26.5366)"})),a.createElement("clipPath",{id:"clip1_351_42930"},a.createElement("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(113.435 106.797)"})),a.createElement("clipPath",{id:"clip2_351_42930"},a.createElement("rect",{width:"8.48913",height:"8.48913",fill:"white",transform:"translate(83.3374 26.5366)"}))))}function a2(e){return a.createElement("svg",{width:"136",viewBox:"0 0 196 136",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t3()(aH,{[az]:e.hovered})},a.createElement("rect",{x:"27.172",y:"7.98674",width:"141.765",height:"41.2909",fill:"#E4CCFF"}),a.createElement("g",{filter:"url(#filter0_d_351_120552)"},a.createElement("rect",{x:"63.4768",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),a.createElement("rect",{x:"63.6489",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),a.createElement("rect",{x:"67.6057",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"67.6057",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("g",{filter:"url(#filter1_d_351_120552)"},a.createElement("rect",{x:"98.2268",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),a.createElement("rect",{x:"98.3989",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),a.createElement("rect",{x:"102.355",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"102.355",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("g",{filter:"url(#filter2_d_351_120552)"},a.createElement("rect",{x:"132.977",y:"13.321",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),a.createElement("rect",{x:"133.149",y:"13.4931",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),a.createElement("rect",{x:"137.109",y:"17.4517",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"137.109",y:"23.3",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"27.172",y:"7.98674",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),a.createElement("rect",{x:"27.172",y:"55.1305",width:"141.765",height:"41.2909",fill:"#BDE3FF"}),a.createElement("g",{filter:"url(#filter3_d_351_120552)"},a.createElement("rect",{x:"32.5081",y:"60.4646",width:"26.8391",height:"30.6241",fill:"white"}),a.createElement("rect",{x:"32.6801",y:"60.6366",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),a.createElement("rect",{x:"35.4333",y:"63.0461",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091"}),a.createElement("g",{filter:"url(#filter4_d_351_120552)"},a.createElement("rect",{x:"63.4768",y:"60.4646",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),a.createElement("rect",{x:"63.6489",y:"60.6366",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),a.createElement("rect",{x:"67.6057",y:"64.5955",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"67.6057",y:"70.4438",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("g",{filter:"url(#filter5_d_351_120552)"},a.createElement("rect",{x:"98.2268",y:"60.4646",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),a.createElement("rect",{x:"98.3989",y:"60.6366",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),a.createElement("rect",{x:"102.355",y:"64.5955",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"102.355",y:"70.4438",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("g",{clipPath:"url(#clip0_351_120552)"},a.createElement("path",{d:"M52.4628 72.139C52.4653 75.5713 50.0667 78.5645 46.8075 79.1817C46.4186 79.2545 45.9344 79.3649 45.4652 79.3423C43.9397 79.2746 42.7856 78.9007 41.6465 77.9398C40.0834 76.6175 39.3433 74.8813 39.3884 72.8616C39.4461 70.2497 40.5727 68.1497 42.8057 66.7597C44.8831 65.4651 47.0785 65.3396 49.2663 66.5113C51.2635 67.5801 52.4603 69.7429 52.4628 72.139ZM51.8631 72.2494C51.8631 72.1992 51.8606 72.149 51.8556 72.0988C51.8105 71.7074 51.7804 71.3135 51.7101 70.9297C51.1732 67.9741 48.4785 65.9945 45.558 66.3959C41.215 66.993 38.6809 72.1214 40.816 75.9527C41.9451 77.9774 44.5018 79.0864 46.4563 78.705C49.5423 78.1029 51.7879 75.3906 51.8631 72.2494Z",fill:"black"}),a.createElement("path",{d:"M42.6576 74.7006C44.424 75.9777 47.5 76.2537 49.0179 74.3719C49.038 74.3468 49.0581 74.3268 49.0506 74.3217C48.9778 74.1812 48.7495 74.0081 48.9276 73.8551C49.1108 73.697 49.2563 73.8952 49.3767 74.0156C49.5524 74.1913 49.7305 74.3694 49.876 74.5701C49.9362 74.6554 50.0767 74.7934 49.9362 74.9139C49.8158 75.0318 49.7054 74.9716 49.5624 74.8637C49.5047 74.821 49.442 74.7658 49.4018 74.7332C49.2061 74.9139 49.033 75.0895 48.8448 75.2501C47.7384 76.196 46.4387 76.4067 45.0512 76.1884C44.0827 76.0354 43.1895 75.6741 42.4092 75.0594C42.3867 75.0418 42.3089 74.959 42.2738 74.9565C42.2035 74.9515 42.1859 74.9992 42.0931 75.0318C42.0279 75.0544 41.9902 75.1221 41.8598 74.9841C41.7519 74.8737 41.8272 74.7583 41.8773 74.7182C42.1408 74.5074 42.4193 74.3142 42.7053 74.1336C42.758 74.101 42.8784 74.0734 42.9386 74.1787C43.0039 74.2916 42.9437 74.3518 42.9035 74.4146C42.8433 74.5074 42.7505 74.5827 42.6551 74.6755C42.6526 74.6855 42.6526 74.6956 42.6576 74.7006Z",fill:"black"}),a.createElement("path",{d:"M49.5523 72.5779C49.5824 72.5804 49.6151 72.5729 49.6427 72.5603C49.8384 72.4575 49.8308 72.1639 49.8308 71.9858C49.8283 71.6094 49.7832 71.2958 49.7807 70.9345C49.7807 70.7865 49.7731 70.6284 49.8133 70.4904C49.8384 70.4051 49.9488 70.2972 50.0265 70.2922C50.1043 70.2872 50.2247 70.3223 50.2624 70.4603C50.4054 71.0549 50.4104 71.8403 50.3025 72.3496C50.2122 72.7786 49.8308 72.9894 49.5047 72.9919C49.1509 72.9944 48.762 72.7385 48.6566 72.3044C48.5437 71.8377 48.5362 71.3435 48.486 70.8617C48.4835 70.8341 48.4835 70.7438 48.486 70.7162C48.5061 70.5481 48.5663 70.4528 48.7821 70.4653C48.9401 70.4703 48.9853 70.6962 49.0154 70.8266C49.0681 71.0574 49.0505 71.3033 49.0907 71.5392C49.1534 71.898 49.191 72.5528 49.5523 72.5779Z",fill:"black"}),a.createElement("path",{d:"M42.7832 70.9848C42.7983 70.8819 42.7807 70.7339 42.989 70.7013C43.1721 70.6737 43.2549 70.8593 43.2625 70.9471C43.3051 71.4414 43.3528 71.9407 43.3126 72.4325C43.275 72.8891 42.866 73.273 42.4972 73.3181C42.0732 73.3708 41.604 73.1124 41.4635 72.6257C41.333 72.1765 41.2778 71.6396 41.2804 71.2206C41.2804 71.1504 41.3029 71.0174 41.4309 70.9973C41.594 70.9622 41.6316 71.1077 41.6542 71.1855C41.7495 71.4991 41.7972 71.8253 41.8951 72.1389C41.9528 72.3246 42.0456 72.5128 42.1685 72.6583C42.3693 72.8941 42.6327 72.849 42.713 72.5529C42.7908 72.2619 42.7506 71.198 42.7832 70.9848Z",fill:"black"})),a.createElement("path",{d:"M97.2147 88.2858L97.2147 88.2858L95.4155 90.1223L95.8404 92.7175C95.8404 92.7175 95.8404 92.7175 95.8404 92.7175C95.9069 93.1235 95.4922 93.4743 95.107 93.2618L92.891 92.0416L90.675 93.2618L90.6749 93.2619L97.2147 88.2858ZM97.2147 88.2858C97.5016 87.9928 97.3551 87.4674 96.9341 87.4033L97.2147 88.2858ZM90.3664 90.1223L89.9415 92.7175L92.4384 84.6696L92.4383 84.6698C92.4383 84.6698 92.4383 84.6698 92.4382 84.6699L91.3279 87.0259L88.8479 87.4033C88.8479 87.4033 88.8479 87.4033 88.8479 87.4033C88.4269 87.4674 88.2803 87.9928 88.5673 88.2858L88.5673 88.2858L90.3664 90.1223Z",fill:"#FFC700",stroke:"black",strokeWidth:"0.344091"}),a.createElement("rect",{x:"27.172",y:"55.1305",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),a.createElement("rect",{x:"27.172",y:"103.172",width:"141.765",height:"41.2909",fill:"#93E396"}),a.createElement("g",{filter:"url(#filter6_d_351_120552)"},a.createElement("rect",{x:"32.5081",y:"108.506",width:"26.8391",height:"30.6241",fill:"white"}),a.createElement("rect",{x:"32.6801",y:"108.678",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),a.createElement("rect",{x:"35.4333",y:"111.088",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091"}),a.createElement("g",{clipPath:"url(#clip1_351_120552)"},a.createElement("path",{d:"M45.5755 113.495C47.3906 113.521 48.8594 114.261 50.2344 115.453C53.0677 117.912 53.2735 123.865 48.8125 126.552C45.7344 128.406 41.6458 127.526 39.6719 124.149C37.4896 120.417 39.2214 115.445 43.2344 113.925C43.987 113.638 44.7656 113.487 45.5755 113.495ZM51.6276 119.922C51.6693 118.594 51 117.055 49.8333 115.844C48.3386 114.294 46.4115 113.763 44.2891 114.255C40.3828 115.156 38.263 119.57 39.9349 123.261C41.1172 125.87 43.8958 127.331 46.5521 126.74C49.5443 126.073 51.6406 123.435 51.6276 119.922Z",fill:"black"}),a.createElement("path",{d:"M50.0078 122C49.2031 124.023 47.7682 125.206 45.5989 125.232C43.7396 125.253 42.3724 124.333 41.5417 122.617C41.4896 122.641 41.4271 122.672 41.3672 122.693C41.2812 122.724 41.2318 122.745 41.1536 122.646C41.1172 122.599 41.0599 122.516 41.1667 122.43C41.4297 122.213 41.7135 122.026 42 121.846C42.0443 121.818 42.1484 121.815 42.2083 121.906C42.2734 122.008 42.2318 122.073 42.1927 122.125C42.1198 122.221 42.0156 122.294 41.9114 122.385C42.9062 123.909 44.2318 124.825 46.1276 124.635C47.7995 124.469 49.0443 123.229 49.5 121.768C49.5208 121.703 49.4479 121.656 49.3776 121.57C49.2604 121.432 49.1797 121.409 49.3125 121.187C49.4088 121.049 49.5573 121.13 49.6432 121.174C49.9167 121.318 50.1875 121.476 50.4271 121.669C50.5208 121.745 50.6927 121.857 50.5807 122.057C50.4766 122.26 50.3333 122.128 50.1641 122.078C50.1172 122.057 50.0703 122.029 50.0078 122Z",fill:"black"}),a.createElement("path",{d:"M42.5313 117.878C42.6797 117.638 42.8412 117.448 43.1354 117.508C43.4167 117.565 43.5313 117.81 43.5339 118.036C43.5417 118.484 43.5339 118.945 43.4349 119.38C43.3334 119.828 43.125 120.255 42.9401 120.68C42.8099 120.979 42.6042 121.039 42.3802 120.82C41.6615 120.112 41.2266 119.263 41.2735 118.226C41.2865 117.932 41.4453 117.69 41.7396 117.591C42.0573 117.484 42.3021 117.63 42.5313 117.878ZM43.1094 117.927C43.1094 117.927 43.0521 117.844 42.9558 117.872C42.8828 117.867 42.8021 118.177 42.7552 118.341C42.711 118.495 42.7188 118.607 42.6094 118.625C42.4349 118.641 42.4479 118.492 42.375 118.419C42.3412 118.383 42.1771 117.919 41.9427 118.005C41.7917 118.06 41.7839 118.281 41.7917 118.414C41.8282 119.088 42.1354 119.667 42.5 120.286C42.8334 119.487 43.3308 118.414 43.1094 117.927Z",fill:"black"}),a.createElement("path",{d:"M48.4791 117.661C48.6692 117.555 48.8489 117.463 49.026 117.5C49.289 117.555 49.3411 117.831 49.3645 118.07C49.44 118.833 49.1093 119.479 48.7525 120.115C48.6718 120.258 48.5572 120.383 48.4817 120.531C48.2656 120.953 47.8932 120.875 47.6874 120.513C47.2578 119.75 47.013 118.911 47.0911 118.018C47.1197 117.677 47.2473 117.352 47.6249 117.263C48.0052 117.169 48.3359 117.409 48.4791 117.661ZM48.0104 120.148C48.0494 120.333 48.0885 120.19 48.1249 120.154C48.3854 119.763 48.6484 119.372 48.802 118.943C48.9218 118.607 49.2369 117.755 48.9062 117.841C48.8255 117.846 48.7421 118.094 48.6718 118.219C48.6145 118.318 48.4973 118.476 48.4479 118.484C48.2578 118.49 48.2812 118.318 48.2447 118.219C48.1588 117.995 48.1666 117.643 47.8463 117.685C47.5286 117.726 47.565 118.078 47.6067 118.307C47.7161 118.924 47.8723 119.536 48.0104 120.148Z",fill:"black"})),a.createElement("g",{filter:"url(#filter7_d_351_120552)"},a.createElement("rect",{x:"63.4768",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),a.createElement("rect",{x:"63.6489",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),a.createElement("rect",{x:"67.6057",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"67.6057",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("g",{filter:"url(#filter8_d_351_120552)"},a.createElement("rect",{x:"98.2268",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),a.createElement("rect",{x:"98.3989",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),a.createElement("rect",{x:"102.355",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"102.355",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("g",{filter:"url(#filter9_d_351_120552)"},a.createElement("rect",{x:"134",y:"108.506",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),a.createElement("rect",{x:"134.172",y:"108.678",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),a.createElement("rect",{x:"138.129",y:"112.637",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"138.129",y:"118.485",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2"}),a.createElement("rect",{x:"27.172",y:"103.172",width:"141.765",height:"41.2909",stroke:"black",strokeWidth:"0.344091"}),a.createElement("path",{d:"M163.058 5.32444L163.144 5.46819L163.29 5.38648L163.93 5.02854C164.401 4.76472 164.965 4.6956 165.497 4.83787C166.028 4.98013 166.482 5.32166 166.759 5.78594C167.036 6.25002 167.113 6.7986 166.976 7.31116C166.839 7.82371 166.498 8.26021 166.026 8.52392L166.026 8.52399L165.449 8.84723L165.449 8.84732L161.674 10.9565L159.121 6.67356C158.844 6.20954 158.767 5.66108 158.904 5.1487C159.041 4.63631 159.382 4.20002 159.854 3.93649C160.326 3.67286 160.889 3.60389 161.421 3.74625C161.952 3.8886 162.406 4.23014 162.682 4.69436L163.058 5.32444Z",fill:"#F24E1E",stroke:"black",strokeWidth:"0.344091"}),a.createElement("g",{clipPath:"url(#clip2_351_120552)"},a.createElement("path",{d:"M50.4871 107.641C48.8069 109.488 47.7973 109.61 46.2305 108.164C44.1148 111.157 42.1849 111.774 39.8514 110.153C39.3857 111.079 38.7655 112.239 37.5921 112.305C36.4645 112.372 35.5675 111.561 35.5655 111.477C35.4727 112.106 34.6737 113.559 33.4639 113.686C32.2099 113.819 31.2714 113.252 30.5935 112.255C29.723 110.962 29.5512 109.451 29.3703 107.956C29.191 106.467 29.0468 104.962 28.982 103.463C28.9502 102.678 29.0635 101.875 29.1937 101.087C29.2925 100.431 29.6597 99.9338 30.3896 99.8121C31.1194 99.6905 31.6381 100.065 31.9285 100.641C32.3488 101.47 32.6502 102.369 32.9353 103.077C33.2923 102.692 33.636 101.824 34.3226 101.609C35.0214 101.392 35.4604 101.455 36.3429 102.413C36.466 102.004 36.5602 101.635 36.6897 101.277C36.8358 100.882 36.9849 100.473 37.1984 100.113C37.8619 99.0194 38.6917 99.0087 39.483 100.068C41.3417 97.8755 42.7542 97.6508 45.017 99.1989C45.1976 98.6844 45.3353 98.1548 45.5664 97.6599C45.9532 96.8325 46.466 96.1419 47.5332 96.2202C48.4276 96.284 49.1693 96.9204 49.4516 97.9734C49.6358 98.6678 49.71 99.3903 49.8425 100.137C50.3717 99.6633 50.906 99.2599 51.6015 99.843C51.9154 98.8326 52.1853 97.879 52.518 96.9418C52.6775 96.4977 52.9121 96.067 53.1866 95.691C53.8238 94.8256 54.8328 94.8797 55.2722 95.86C55.5988 96.6025 55.8035 97.4282 55.8874 98.2393C56.1186 100.567 56.1084 102.892 55.4407 105.164C55.1061 106.296 54.4433 107.24 53.5059 107.974C52.1712 109.011 51.4815 108.934 50.4871 107.641ZM39.1546 101.785C39.0891 101.528 38.9628 100.247 38.431 100.253C38.0747 100.207 37.9209 100.878 37.8281 101.226C37.5065 102.512 37.3242 103.834 36.9597 105.104C36.8457 105.497 36.6329 105.708 36.3764 105.748C36.1323 105.836 36.0697 105.286 36.0118 105.034C35.8691 104.375 35.8318 103.695 35.6418 103.054C35.5686 102.793 35.455 102.425 34.9767 102.437C34.7887 102.44 34.5019 102.539 34.3083 102.901C34.0965 103.293 33.9031 103.707 33.7862 104.14C33.5734 104.91 33.4662 105.712 33.2259 106.475C33.1403 106.751 33.0228 107.08 32.747 107.222C32.492 107.268 32.2728 107.149 32.1872 106.305C32.1341 105.818 32.0887 105.335 32.0157 104.847C31.8459 103.7 31.6608 102.544 31.3612 101.424C31.2831 101.119 31.078 100.495 30.4631 100.684C29.8482 100.874 29.9096 101.47 29.9595 101.945C29.9644 101.989 29.9784 102.044 29.9848 102.095C30.134 103.39 30.2893 104.683 30.4324 105.98C30.6126 107.625 30.698 109.282 30.9957 110.903C31.2384 112.233 32.1254 112.904 33.1276 112.829C34.0977 112.757 34.5588 112.118 34.7112 110.629C34.7807 109.935 34.8013 109.227 34.9106 108.536C34.9416 108.326 35.0266 107.947 35.3415 107.957C35.6613 108.012 35.7028 108.352 35.753 108.574C35.8707 109.136 35.8113 109.743 36.0098 110.264C36.1478 110.626 36.541 110.993 36.9117 111.146C37.3912 111.342 37.9451 111.194 38.2282 110.698C38.5189 110.182 38.8062 109.627 38.9192 109.052C39.3781 106.599 39.4945 104.13 39.1546 101.785ZM50.8522 100.321C50.6149 100.258 50.3557 100.923 50.2715 101.178C50.0578 101.792 49.9284 102.43 49.7147 103.044C49.647 103.237 49.5064 103.527 49.2543 103.533C48.9942 103.482 48.9645 103.366 48.8893 103.021C48.8485 102.837 48.8275 102.628 48.8218 102.427C48.7926 101.55 48.8153 100.673 48.7357 99.8021C48.6756 99.1606 48.5757 98.4902 48.3279 97.9031C48.1793 97.5509 47.7245 97.1208 47.3882 97.1028C47.0656 97.0877 46.6017 97.4861 46.4018 97.8234C46.0823 98.38 45.9086 99.0228 45.7102 99.6459C45.6547 99.8358 45.6715 100.105 45.7672 100.275C46.8416 102.238 46.9952 104.339 46.6722 106.483C46.563 107.2 46.9941 107.487 47.413 107.803C47.8581 108.144 48.4053 108.147 48.8005 107.76C49.2155 107.348 49.5459 106.834 49.8595 106.331C50.0246 106.061 50.0502 105.703 50.206 105.423C50.2847 105.273 50.5023 105.107 50.6476 105.115C50.7592 105.119 50.9256 105.362 50.9616 105.529C51.0227 105.793 50.986 106.082 51.0211 106.346C51.1198 107.062 51.2231 107.517 51.6431 107.735C51.8624 107.881 52.5903 107.395 52.9417 107.091C54.0901 106.088 54.7064 104.76 54.7639 103.255C54.8461 101.237 54.8412 99.2094 54.7797 97.1893C54.7667 96.7568 54.7833 95.881 54.1461 95.9074C53.7619 95.8041 53.4068 96.5518 53.3005 96.9498C52.8868 98.4345 52.594 99.9599 52.2232 101.46C52.1499 101.758 52.0432 102.358 51.7501 102.433C51.4493 102.477 51.3007 102.405 51.1703 101.488C51.1212 101.169 51.1439 100.292 50.8522 100.321ZM45.4285 102.079C45.2305 101.635 45.0085 100.996 44.6721 100.419C43.5398 98.484 41.2245 98.5104 40.1057 100.468C39.9544 100.741 39.8878 101.142 39.9537 101.45C40.4517 103.651 40.4271 105.869 40.2406 108.089C40.1474 109.225 40.646 109.852 41.8126 109.938C43.2636 110.041 44.5426 109.168 45.2218 107.602C45.9719 105.856 45.931 103.407 45.4285 102.079Z",fill:"black"}),a.createElement("path",{d:"M59.6396 92.9477C59.6565 93.5223 59.7124 95.0885 59.7076 96.163C59.6942 97.6363 59.661 99.1083 59.5957 100.582C59.5728 101.154 59.472 101.726 59.3543 102.283C59.2411 102.806 58.8621 103.105 58.3303 103.111C57.7603 103.12 57.3065 102.872 57.0987 102.313C57.001 102.059 56.917 101.781 56.9124 101.509C56.9306 98.9612 57.0382 96.5596 57.0869 94.004C57.0898 93.6845 57.1071 93.2183 57.1818 92.9C57.328 92.2512 57.6344 91.8216 58.4066 91.8907C59.0794 91.9528 59.6227 92.3732 59.6396 92.9477ZM58.2221 102.332C58.2955 102.339 58.3705 102.352 58.4373 102.283C58.5789 102.175 58.5611 102.004 58.5634 101.861C58.6363 98.9672 58.7107 96.0798 58.7514 93.1879C58.7564 92.9785 58.7327 92.5553 58.3965 92.5632C57.9562 92.5458 58.0021 93.3861 57.9966 93.7713C57.9589 96.3956 57.9427 99.0275 57.9433 101.649C57.9446 101.882 57.9833 102.263 58.2221 102.332Z",fill:"black"}),a.createElement("path",{d:"M59.9054 105.251C60.1529 106.345 59.539 107.276 58.6658 107.474C57.8782 107.649 57.0496 107.055 56.8431 106.171C56.6145 105.176 57.0259 104.394 57.9922 104.179C58.8348 103.99 59.7065 104.372 59.9054 105.251ZM57.6513 105.847C57.8325 106.555 58.3501 106.468 58.4661 106.438C58.8092 106.305 59.0463 106.062 58.7828 105.388C58.71 105.205 58.5347 105.003 58.249 105.031C57.696 105.081 57.5609 105.519 57.6513 105.847Z",fill:"black"}),a.createElement("path",{d:"M42.9659 102.547C42.9771 102.921 43.0739 105.537 43.0732 107.085C43.0759 107.299 42.9866 107.738 42.5969 107.74C42.2333 107.768 42.0919 107.343 42.0754 107.126C41.9862 105.607 41.9396 104.078 41.9404 102.555C41.9392 102.322 42.0882 101.913 42.4165 101.848C42.8885 101.812 42.9547 102.172 42.9659 102.547Z",fill:"black"})),a.createElement("g",{filter:"url(#filter10_d_351_120552)",className:t3()(aW,aY)},a.createElement("rect",{x:"132.649",y:"60.1077",width:"30.6241",height:"30.6241",fill:"#FFD45B"}),a.createElement("rect",{x:"132.821",y:"60.2797",width:"30.28",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),a.createElement("rect",{x:"136.782",y:"64.2385",width:"22.0218",height:"4.12909",fill:"black",fillOpacity:"0.2",className:t3()(aW,aY)}),a.createElement("rect",{x:"136.782",y:"70.0869",width:"19.2691",height:"4.12909",fill:"black",fillOpacity:"0.2",className:t3()(aW,aY)}),a.createElement("g",{filter:"url(#filter11_d_351_120552)",className:t3()(aW,aq)},a.createElement("rect",{x:"32.7107",y:"12.5178",width:"26.8391",height:"30.6241",fill:"white"}),a.createElement("rect",{x:"32.8827",y:"12.6899",width:"26.495",height:"30.28",stroke:"black",strokeWidth:"0.344091"})),a.createElement("rect",{x:"35.6359",y:"15.0993",width:"20.9895",height:"18.5809",fill:"#F5F5F5",stroke:"black",strokeWidth:"0.344091",className:t3()(aW,aq)}),a.createElement("path",{className:t3()(aW,aq),d:"M40.2485 22.3512C41.0198 21.4451 41.8657 20.5791 42.8005 19.8422C43.4514 19.3289 43.6751 19.3031 44.0335 19.2056C44.131 19.1798 44.217 19.1196 44.3002 19.0594C47.7898 16.5963 52.2372 18.3425 53.0974 22.6896C53.668 25.5742 52.1971 28.4387 49.668 29.6086C49.6278 29.6287 49.5676 29.6345 49.5476 29.666C49.0458 30.4517 48.025 30.7556 47.4027 30.9105C47.2766 30.9563 47.1791 31.0882 47.0644 31.1743C46.9755 31.2402 46.8866 31.3119 46.7862 31.3578C43.4973 32.8832 39.9618 30.8416 39.1876 27.4638C39.0786 26.9878 38.5997 24.1147 40.2485 22.3512ZM47.0988 29.4251C48.2716 29.4194 49.0372 29.2273 49.7225 28.8516C53.02 27.0423 53.5132 22.1275 50.6114 19.7275C48.9483 18.354 46.8206 18.1217 44.9511 19.4379C42.7288 21.0006 41.9231 24.2036 43.1675 26.6237C44.0622 28.3642 45.4816 29.3248 47.0988 29.4251ZM48.2199 30.1678C48.3633 30.1162 48.3834 30.0789 48.3604 30.0617C48.3604 30.0617 48.3002 30.0617 48.1999 30.0646C45.6192 30.2596 43.6779 29.233 42.5281 26.919C41.4041 24.6595 41.6765 22.4401 43.0041 20.3153C42.898 20.3669 42.812 20.43 42.7346 20.5017C40.9453 22.1218 40.4177 24.8659 41.45 27.2115C42.4019 29.3764 44.4005 30.661 46.6486 30.5004C47.1762 30.4631 47.6952 30.2825 48.2199 30.1678ZM40.6413 22.7297C40.6442 22.6465 40.5668 22.7498 40.5553 22.7641C40.5152 22.8186 40.475 22.8759 40.4406 22.9333C39.9675 23.7304 39.6722 24.5935 39.632 25.5197C39.5374 27.6301 40.2772 29.3793 42.0636 30.5721C43.2507 31.3664 44.5697 31.5298 45.9489 31.0997C43.9331 30.8961 42.3618 29.9613 41.3009 28.2352C40.2399 26.5147 40.0707 24.6681 40.6413 22.7297Z",fill:"black"}),a.createElement("path",{className:t3()(aW,aq),d:"M49.2781 24.5675C49.6738 24.5819 49.8028 24.7883 49.6738 25.1611C49.3526 26.0787 48.4494 26.526 47.529 26.2048C46.9841 26.0127 46.5569 25.6629 46.2616 25.164C46.035 24.7797 46.1354 24.5589 46.5798 24.5303C47.0444 24.4987 48.8451 24.5503 49.2781 24.5675ZM49.1892 25.0149C48.3978 25.0149 47.6265 25.0149 46.8465 25.0149C47.6379 25.9353 48.8078 25.9525 49.1892 25.0149Z",fill:"black"}),a.createElement("path",{className:t3()(aW,aq),d:"M46.0523 22.9417C46.0552 23.389 45.625 23.7962 45.1548 23.7933C44.7447 23.7905 44.458 23.4206 44.4551 23.0277C44.4494 22.6349 44.8508 22.2478 45.2924 22.2363C45.7168 22.222 46.0523 22.5317 46.0523 22.9417ZM45.1921 22.6578C44.9799 22.6922 44.9139 22.893 44.9311 23.0449C44.9541 23.2657 45.1204 23.3202 45.2236 23.3231C45.3211 23.3259 45.5132 23.2284 45.5534 23.0392C45.605 22.8471 45.496 22.5861 45.1921 22.6578Z",fill:"black"}),a.createElement("path",{className:t3()(aW,aq),d:"M51.5318 23.0622C51.5261 23.4952 51.2193 23.8135 50.8092 23.8106C50.3676 23.8077 50.0494 23.4493 50.0637 22.9704C50.0752 22.5547 50.3848 22.2335 50.7691 22.2421C51.1677 22.2536 51.5376 22.6493 51.5318 23.0622ZM51.1361 23.0507C51.1361 22.8299 51.0185 22.6808 50.835 22.6808C50.7232 22.6808 50.534 22.7669 50.534 23.002C50.534 23.412 50.835 23.3891 50.835 23.3891C50.9956 23.3833 51.1361 23.3174 51.1361 23.0507Z",fill:"black"}),a.createElement("defs",null,a.createElement("filter",{id:"filter0_d_351_120552",x:"63.4768",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),a.createElement("filter",{id:"filter1_d_351_120552",x:"98.2268",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),a.createElement("filter",{id:"filter2_d_351_120552",x:"132.977",y:"13.321",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),a.createElement("filter",{id:"filter3_d_351_120552",x:"32.5081",y:"60.4646",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),a.createElement("filter",{id:"filter4_d_351_120552",x:"63.4768",y:"60.4646",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),a.createElement("filter",{id:"filter5_d_351_120552",x:"98.2268",y:"60.4646",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),a.createElement("filter",{id:"filter6_d_351_120552",x:"32.5081",y:"108.506",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),a.createElement("filter",{id:"filter7_d_351_120552",x:"63.4768",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),a.createElement("filter",{id:"filter8_d_351_120552",x:"98.2268",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),a.createElement("filter",{id:"filter9_d_351_120552",x:"134",y:"108.506",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),a.createElement("filter",{id:"filter10_d_351_120552",x:"132.649",y:"60.1077",width:"31.3122",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),a.createElement("filter",{id:"filter11_d_351_120552",x:"32.7107",y:"12.5178",width:"27.5273",height:"31.3122",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"0.688182",dy:"0.688182"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_351_120552"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_351_120552",result:"shape"})),a.createElement("clipPath",{id:"clip0_351_120552"},a.createElement("rect",{width:"14.4518",height:"14.4518",fill:"white",transform:"translate(38.6985 65.2793)"})),a.createElement("clipPath",{id:"clip1_351_120552"},a.createElement("rect",{width:"15",height:"15",fill:"white",transform:"translate(38 113)"})),a.createElement("clipPath",{id:"clip2_351_120552"},a.createElement("rect",{width:"36.296",height:"36.296",fill:"white",transform:"translate(23 89.9951) rotate(-14.3491)"}))))}var a5=n(794321),a3=n(406534);let a4="browse_templates_make_something_onboarding--faded--UuXrP";var a6=n(764350),a8=n(325570),a7=n(518577),a9=n(13303),re=n(663364);let rt="loadingMakeSomethingTemplate",rn=e=>{let t=(0,C.Xr)(av.w),{name:n}=(0,d.j6)(),r=(0,s.wA)(),[i,l]=(0,a.useState)(a5.fD.NONE),o=(0,a.useCallback)(e=>{r(aT.Ji({isActive:e}))},[r]);(0,a.useEffect)(()=>(o(!0),()=>{o(!1)}),[o]);let u=(0,ak.g)();(0,a.useEffect)(()=>(u&&b.gw5?.setFigjamStarterKitEnabled(!0),()=>{b.gw5?.setFigjamStarterKitEnabled(!1)}),[u]);let m=(0,C.Xr)(aU.Qs);(0,a.useEffect)(()=>{m({type:"CLOSE"})},[m]);let p=(0,nY.O)(),_=(0,a.useRef)(Date.now()),g=e.onHideModal,f=(0,a.useCallback)(()=>{g(),(0,nW.YQ)({id:a5.Lz}),r(c.b({figjam_browse_templates_modal_onboarding_item_selected:!0})),r(eb.Ce()),t(av.tX.COMPLETED)},[g,r,t]),h=t=>{(!e.shouldAcceptClickUseCaseTile||e.shouldAcceptClickUseCaseTile())&&((0,e_.Cu)({trackingContext:n,text:`${t} tile clicked`},"CTA Clicked"),e.onClickUseCaseTile(t))};function E(t,a){(0,e_.Cu)({trackingContext:n,text:`${t} tile hovered`},"CTA Hovered"),l(t),e.onUseCasePreview?.(t,a)}let y=[{headerText:(0,x.t)("figjam_onboarding_make_something.templates_modal.button_title.brainstorm"),headerIcon:a6.A,previewSvg:e=>a.createElement(aQ,{hovered:e}),useCase:a5.fD.BRAINSTORM,previewType:b.KpW.MAKE_SOMETHING_BRAINSTORM},{headerText:(0,x.t)("figjam_onboarding_make_something.templates_modal.button_title.team_updates"),headerIcon:a9.A,previewSvg:e=>a.createElement(a2,{hovered:e}),useCase:a5.fD.UPDATES,previewType:b.KpW.MAKE_SOMETHING_TEAM_UPDATES},{headerText:(0,x.t)("figjam_onboarding_make_something.templates_modal.button_title.planning_ahead"),headerIcon:a8.A,previewSvg:e=>a.createElement(a1,{hovered:e}),useCase:a5.fD.PLAN,previewType:b.KpW.MAKE_SOMETHING_PLANNING},{headerText:(0,x.t)("figjam_onboarding_make_something.templates_modal.button_title.team_chart"),headerIcon:a7.A,previewSvg:e=>a.createElement(a0,{hovered:e}),useCase:a5.fD.TEAM,previewType:b.KpW.MAKE_SOMETHING_TEAM_CHART}];function v(e,t){let n=y.findIndex(t=>t.useCase===e)+t;return n>y.length-1?n=0:n<0&&(n=y.length-1),n}return{hoveredUseCase:i,setHoveredUseCase:l,onClickCloseButton:()=>{e.onHideModal(),(0,nW.YQ)({id:a5.Lz}),t(av.tX.COMPLETED);let n=Math.round((Date.now()-_.current)/1e3);p({eventName:"msv2_dismissed",style:e.style,secondsAfterShown:n})},onClickMoreTemplatesButton:()=>{(0,aR.KF)(r,{templateInsertionLocation:e.templateInsertionLocation,triggeredFrom:"makeSomething",onTemplateInsertedCurrentFile:f,onTemplateInsertedNewFile:f,hideModal:()=>{r(eb.Ce())}}),p({eventName:"more_templates_clicked",style:e.style})},onClickUseCaseTile:h,onUseCasePreview:E,useCaseTiles:y,onListBoxKeydown:function(e){let t;if("Enter"===e.key){i!==a5.fD.NONE&&y.find(({useCase:e})=>e===i)&&h(i);return}if("Home"===e.key)t=0;else if("End"===e.key)t=y.length-1;else if(["ArrowUp","ArrowLeft"].includes(e.key))t=v(i,-1);else{if(!["ArrowDown","ArrowRight"].includes(e.key))return;t=v(i,1)}let n=y[t];l(n.useCase),E(n.useCase,n.previewType)}}},ra={[a5.fD.BRAINSTORM]:a5.qy.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED,[a5.fD.PLAN]:a5.qy.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED,[a5.fD.UPDATES]:a5.qy.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED,[a5.fD.TEAM]:a5.qy.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED},rr=(0,aB.n)(({onSuccess:e}={})=>{let t=(0,C.Xr)(av.w),n=(0,s.wA)(),r=(0,eU.aV)(),i=(0,ak.g)(),l=(0,s.d4)(e=>e.mirror.appModel.multiplayerSessionState===b.kul.JOINED),{hubFiles:o,templates:d,categoryIds:u,isLoading:m}=(0,aP.bg)({templatesShelfType:aO.cS.FIGJAM_SIMPLE_TEMPLATES_PICKER,source:"make-something-v2"}),{insertTemplate:p}=(0,ax.Fz)(),_=(0,a.useMemo)(()=>{let e={};return Object.keys(o).filter(e=>u.some(t=>d[t].includes(e))).reduce((e,t)=>{let n=o[t];return e[(0,aI.a6)(n).name.toUpperCase()]=n,e},e),e},[o,d,u]),g=i&&!m&&!r&&l;return{insert:(0,a.useCallback)(a=>{if(!g)return;if(a===a5.fD.NONE){e?.();return}let r=_[a],i=ra[a];p({template:{template:r,type:aA.n.HubFile},onSuccess:()=>{e?.(),n(em.F.dequeue({matchType:rt})),(0,nW.YQ)({id:i}),n(c.b({figjam_browse_templates_modal_onboarding_item_selected:!0})),t(av.tX.USE_CASE_STEPS),a===a5.fD.PLAN?b.glU.setCanvasZoomScale(.8):a===a5.fD.TEAM&&b.glU.setCanvasZoomScale(1.2)},triggeredFrom:"browse-templates-make-something",selectTemplateAfterInsertion:!1}),n(em.F.enqueue({message:(0,x.t)("figjam_onboarding_make_something.visual_bell.loading_template"),icon:ep.zX.SPINNER,type:rt}))},[n,e,p,t,_,g]),canInsert:g}});function ri(e){let t=(0,s.d4)(e=>{let t=e?.mirror?.appModel?.currentPage,n=e?.mirror?.sceneGraph,a=n?.get(t);return!a||!a.childrenNodes.length||a.childrenAreAllGhosts}),n=(0,nI.Un)(),r=(0,nY.O)(),i=!n||t,l=i?"banner":"popup",o=()=>{e.hideModal?.()},c=e=>{r({eventName:"use_case_hovered",useCase:e,style:l})},d=e=>{r({eventName:"use_case_clicked",useCase:e,style:l})};return function(e){let t=(0,nY.O)(),n=(0,aC.ZC)(e);(0,a.useEffect)(()=>{if(!n){t({eventName:"msv2_shown",style:e});return}if(n!==e){t({eventName:"msv2_style_changed",style:e,prevStyle:n});return}},[n,e,t])}(l),i?a.createElement(rl,{onHideModal:o,trackUseCaseHover:c,trackUseCaseClick:d}):a.createElement(ro,{onHideModal:o,trackUseCaseHover:c,trackUseCaseClick:d})}function rl(e){let{onHideModal:t,trackUseCaseHover:n,trackUseCaseClick:r}=e,[i,l]=(0,a.useState)(!1),o=(0,a.useRef)(!1),{insert:s,canInsert:c}=rr({onSuccess:()=>{o.current=!1}}),{hoveredUseCase:d,setHoveredUseCase:u,onClickCloseButton:m,onClickMoreTemplatesButton:p,onClickUseCaseTile:_,onUseCasePreview:g,useCaseTiles:f,onListBoxKeydown:h}=rn({templateInsertionLocation:aI.RD.CURRENT_FILE,onHideModal:t,onClickUseCaseTile(e){o.current=!0,s(e),t(),r(e)},onUseCasePreview(e,t){b.gw5.clearFigjamStarterKitPreview(),b.gw5.rotateFigjamStarterKitStrings(),b.gw5.showFigjamStarterKitPreview(t),n(e)},shouldAcceptClickUseCaseTile:()=>!o.current,style:"banner"});function E(){l(!1),b.gw5.clearFigjamStarterKitPreview(),u(a5.fD.NONE)}let y=(0,nI.Un)();return c?a.createElement(tz.Nb,{size:"fitContent",className:"browse_templates_make_something_onboarding--modalContainer--tYRC4",backgroundClassName:y?"browse_templates_make_something_onboarding--modalBackgroundWithPassthroughClicks--Lrf3O browse_templates_make_something_onboarding--modalBackground--Cyb7O":"browse_templates_make_something_onboarding--modalBackground--Cyb7O",hide:t,tintedModalBackground:!1,disableClickOutsideToHide:!0,enableEscapeToClose:!0,disableFocusTrap:!0},a.createElement(aw.i,{displayAs:aw.C.Block},a.createElement("div",{className:t3()("browse_templates_make_something_onboarding--closeHeader--tGUaS",{[a4]:i})},a.createElement(t6.Jn,{dataTestId:"MakeSomethingCloseButton",onClick:m,trackingEventName:"modal closed"})),a.createElement("div",{className:"browse_templates_make_something_onboarding--makeSomethingContainer--rxr6G"},a.createElement("div",{className:t3()("browse_templates_make_something_onboarding--titleContainer--41-OQ",{[a4]:i})},a.createElement("div",{className:"browse_templates_make_something_onboarding--title--OqmHP text--fontPos20Whyte--o3mBO text--_fontBaseWhyte--efAjI"},(0,x.tx)("figjam_onboarding_make_something.templates_modal.main_title")),a.createElement("div",{className:"browse_templates_make_something_onboarding--subtitle--T-kBc text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI"},(0,x.tx)("figjam_onboarding_make_something.templates_modal.main_subtitle")),a.createElement("div",{className:t3()("browse_templates_make_something_onboarding--templateButtonContainer--ey3hb",{[a4]:i})},a.createElement(tM.vd,{className:t3()({"browse_templates_make_something_onboarding--templateButtonParent--4zUAI text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI":!0}),trackingEventName:"more templates click",onClick:p,onFocus:E,autoFocus:!1,tabIndex:0},a.createElement("div",{className:"browse_templates_make_something_onboarding--templateButton--gmFOn"},a.createElement("div",{className:"browse_templates_make_something_onboarding--templateButtonContent--Sl5TE text--fontPos11Whyte--wZDnv text--_fontBaseWhyte--efAjI"},a.createElement(T.B,{svg:re.A,className:"browse_templates_make_something_onboarding--templatesButtonIcon--m4jW4",useOriginalSrcFills_DEPRECATED:!0}),a.createElement("div",{className:"browse_templates_make_something_onboarding--templatesButtonText--CzC6F"},(0,x.tx)("figjam_onboarding_make_something.templates_modal.button_title.templates_button"))))))),a.createElement("div",{"aria-activedescendant":d,"aria-label":(0,x.t)("figjam_onboarding_make_something.use_case_listbox.aria_label"),"aria-orientation":"horizontal",className:"browse_templates_make_something_onboarding--listItems--57vh3",onKeyDown:h,onMouseEnter:()=>l(!0),onMouseLeave:E,role:"listbox",tabIndex:0},f.map(({headerIcon:e,headerText:t,useCase:n,previewSvg:r,previewType:i})=>a.createElement("div",{tabIndex:-1,role:"option",className:t3()("browse_templates_make_something_onboarding--useCaseContainer--nnBm-",{[a4]:![a5.fD.NONE,n].includes(d)}),onFocus:()=>g(n,i),onMouseEnter:()=>g(n,i),onClick:()=>_(n),key:n,"aria-label":t,"aria-selected":d===n,id:`make-something-onboarding-${n}`},a.createElement("div",{className:"browse_templates_make_something_onboarding--useCaseHeader--0ad0i text--fontPos11Whyte--wZDnv text--_fontBaseWhyte--efAjI"},a.createElement(T.B,{svg:e,height:"28px",width:"28px",autosize:!0,className:"browse_templates_make_something_onboarding--useCaseIcon--0Dqvb",useOriginalSrcFills_DEPRECATED:!0}),t),a.createElement("div",{className:"browse_templates_make_something_onboarding--previewContainer--lohmG"},r(d===n)))))))):null}function ro(e){let{onHideModal:t,trackUseCaseHover:n,trackUseCaseClick:r}=e,{shiftPopupUp:i,popupRef:l}=function(){let e=aK.C()?.dltContainerNode,t=(0,a.useRef)(null),[n,r]=(0,a.useState)(!1);return(0,a.useLayoutEffect)(()=>{let n=(0,aG.s)(()=>{let n=t.current?.getBoundingClientRect(),a=e?.getBoundingClientRect();n&&a&&r(a.left-n.right<24)},100);return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[e]),{popupRef:t,shiftPopupUp:n}}(),o=(0,s.wA)(),c=(0,aN.B)(),{hoveredUseCase:u,setHoveredUseCase:m,onClickCloseButton:p,onClickMoreTemplatesButton:_,onClickUseCaseTile:g,onUseCasePreview:f,useCaseTiles:h,onListBoxKeydown:E}=rn({templateInsertionLocation:aI.RD.NEW_FILE,onHideModal:t,onClickUseCaseTile(e){o(aS.zE({state:c,from:aL.f6.FIGJAM_MAKE_SOMETHING_POPUP,editorType:t7._Y.WHITEBOARD,team:void 0,openNewFileIn:aL.ai.NEW_TAB,figjamMakeSomethingUseCase:e})),r(e)},onUseCasePreview(e){n(e)},style:"popup"});return a.createElement(tz.Nb,{modalRef:l,className:"browse_templates_make_something_onboarding--popupModal--y2117",backgroundClassName:t3()("browse_templates_make_something_onboarding--popupBackground--qUE9z",{"browse_templates_make_something_onboarding--popupBackgroundAboveDlt--3VTFo":i}),size:"fitContent",hide:t,tintedModalBackground:!1,disableClickOutsideToHide:!0,enableEscapeToClose:!0,disableFocusTrap:!0,disableFocusOnMount:!0},a.createElement(aw.i,{displayAs:aw.C.Block},a.createElement("div",{className:"browse_templates_make_something_onboarding--popupHeader--gqTTZ"},a.createElement("div",{className:"browse_templates_make_something_onboarding--popupTitle--qSiMo text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI"},(0,x.tx)("figjam_onboarding_make_something.popup.title")),a.createElement(t6.Jn,{dataTestId:"MakeSomethingCloseButton",onClick:p,trackingEventName:"modal closed"})),a.createElement("div",{"aria-activedescendant":u,"aria-label":(0,x.t)("figjam_onboarding_make_something.use_case_listbox.aria_label"),"aria-orientation":"horizontal",onKeyDown:E,role:"listbox",tabIndex:0},h.map(({headerIcon:e,headerText:t,useCase:n})=>a.createElement("button",{className:t3()("browse_templates_make_something_onboarding--popupButton--r5tGZ text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",{"browse_templates_make_something_onboarding--popupButtonActive--EbHMe":u===n}),tabIndex:-1,role:"option",onFocus:()=>f(n),onBlur:()=>m(a5.fD.NONE),onMouseEnter:()=>f(n),onMouseLeave:()=>m(a5.fD.NONE),onClick:()=>g(n),key:n,"aria-label":t,"aria-selected":u===n,id:`make-something-onboarding-${n}`},a.createElement(T.B,{className:t3()({"browse_templates_make_something_onboarding--brainstormIcon--O0mh5":n===a5.fD.BRAINSTORM}),svg:e,height:n===a5.fD.BRAINSTORM?"16px":"20px",width:n===a5.fD.BRAINSTORM?"16px":"20px",autosize:!0,useOriginalSrcFills_DEPRECATED:!0}),t)),a.createElement(d.Co,{className:"browse_templates_make_something_onboarding--popupTemplates--aTTD4 text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",trackingEventName:"more templates click",onFocus:()=>m(a5.fD.NONE),onMouseEnter:()=>m(a5.fD.NONE),onClick:_,tabIndex:0},(0,x.tx)("figjam_onboarding_make_something.templates_modal.button_title.templates_button")))))}function rs(){let{insert:e,canInsert:t}=rr(),[n,r]=(0,v.fp)(av.l5),i=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{t&&n!==a5.fD.NONE&&!i.current&&(e(n),i.current=!0)},[n,e,t]),(0,a.useEffect)(()=>()=>r(a5.fD.NONE),[r]),null}a5.Og,eY.q3.SELF_CONTAINED,e=>a.createElement(ri,{hideModal:e.dismissModal});let rc=`${a5.Og} Templates Toolbar Connector Tooltip`,rd=`${a5.Og} Templates Toolbar Onboarding Finished Connector Tooltip`;function ru(e){return a.createElement(n$.Dv,{targetType:"dom",targetKey:aM.G,topPadding:-6,autoWidth:!0,isBold:!0,arrowPosition:aF.F_.BOTTOM},a.createElement(aD.mI,{bodyText:a.createElement("span",{className:t3()(a3.RL)},(0,x.tx)("figjam_onboarding_make_something.templates_toolbar_connector.body_text",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.templates_toolbar_connector.body_text_bold"))})),buttonText:(0,x.tx)("figjam_onboarding_make_something.templates_toolbar_connector.done_button"),onButtonClick:e.onClickPrimaryCta}))}function rm(e){return a.createElement(n$.Dv,{targetType:"dom",targetKey:aM.G,topPadding:-6,autoWidth:!0,isBold:!0,arrowPosition:aF.F_.BOTTOM},a.createElement(aD.mI,{titleText:a.createElement("span",{className:"browse_templates_make_something_onboarding--tooltipTitle--EmYZQ"},(0,x.tx)("figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.title_want_to_try_something_else")),bodyText:a.createElement("span",{className:a3.$s},(0,x.tx)("figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.body_text",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.templates_toolbar_onboarding_finished_connector.body_text_bold"))})),buttonText:(0,x.tx)("figjam_onboarding_make_something.templates_toolbar_connector.done_button"),onButtonClick:e.onClickPrimaryCta}))}function rp(e){let t=(0,C.Xr)(av.w);return(0,tg.h)(()=>{t(av.tX.MODAL_SHOWING)}),a.createElement(ez.h,{testId:e.testId?e.testId:"MakeSomethingOnboardingOverlay",modalType:eY.q3.SELF_CONTAINED,trackingContextName:"Make Something Modal Onboarding",element:a.useCallback(e=>a.createElement(ri,{hideModal:e.dismissModal}),[]),isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}eY.q3.SELF_CONTAINED,eY.q3.SELF_CONTAINED;let r_="figjam_unified_onboarding_product",rg="figjam_unified_onboarding_pz";function rf(e){(0,nW.YQ)({id:e===nI.jg.PRODUCT_THEN_PZ?r_:rg})}let rh=[n8,n7];function rE(){let e=(0,v.md)(nI.Am),{show:t,uniqueId:n,isShowing:r,complete:i}=(0,u.e)({overlay:g.wRI,priority:m.N.OVERRIDING_MODAL}),l=aE((0,a.useCallback)(()=>{i(),e===nI.jg.PZ_THEN_PRODUCT&&(0,nW.YQ)({id:r_}),e===nI.jg.PRODUCT_THEN_PZ&&(0,nW.YQ)({id:af})},[i,e]));return(0,ew.E)(n,rg,()=>{t()}),a.createElement(ab,{steps:rh,onComplete:l,isShowing:r,overlayUniqueId:n})}function ry(){let e=(0,v.md)(nI.Am),t=(0,v.md)(av.w),{show:n,uniqueId:r,isShowing:i,complete:l}=(0,u.e)({overlay:g.Kze,priority:m.N.OVERRIDING_MODAL}),o=aE(l);return(0,ew.E)(r,r_,()=>{n()}),(0,a.useEffect)(()=>{t===av.tX.COMPLETED&&e===nI.jg.PRODUCT_THEN_PZ&&(0,nW.YQ)({id:rg}),t===av.tX.COMPLETED&&e===nI.jg.PZ_THEN_PRODUCT&&(0,nW.YQ)({id:af})},[t,e]),a.createElement(rp,{onClickPrimaryCta:o,onClose:t4.lQ,onManualDismiss:o,isShowing:i})}var rb=n(286640),rv=n(650769),rC=n(296922),rw=n(205548),rT=n(554905),rS=n(776621),rx=n(493323),rk=n(989329),rN=n(507877),rI=n(340159),rA=n(540019),rO=n(984968);let rL=(0,aB.D)((e,t)=>{t(rN.V3({url:e}))});function rD(e){let t=(0,s.wA)(),n=(0,rk.qm)(),r=rO.ol()?.id,[i]=(0,rA.IT)(rI.XZ({currentOrgId:n,currentTeamId:r,fileTags:["figjam_template"],shouldRecreate:!0})),{dismissModal:l}=e;return a.useEffect(()=>{"errors"===i.status&&(l(),rR("failure","curator"))},[i.status,l]),a.useEffect(()=>{let e=setTimeout(()=>{"loading"===i.status&&rR("timeout","curator")},5e3);return()=>clearTimeout(e)},[i.status]),a.createElement("div",{className:"onboard_figjam_viewer--openTutorialModalContainer--O1ld1"},a.createElement("div",{className:"onboard_figjam_viewer--openTutorialModalShadow--HF-Gb onboard_figjam_viewer--openTutorialModalBase--vDoVP"},a.createElement("div",{className:"onboard_figjam_viewer--openTutorialModal--3j-H4 onboard_figjam_viewer--openTutorialModalBase--vDoVP"},a.createElement("div",{className:nX},a.createElement("div",{className:nJ},a.createElement("img",{className:nZ,src:"https://static.figma.com/uploads/964c3ddf18b0f2712b664efde991dfc4f2c58eb8",alt:""})),a.createElement("div",{className:t3()({[nQ]:!0,[n0]:!0})},a.createElement("div",{className:"onboard_figjam_viewer--openTutorialModalText--9oABQ onboard_figjam_viewer--text--xkcTB"},(0,x.tx)("rcs.figjam_onboarding.for_more_tips_and_tricks_here_s_a_2_minute_hands_on_tutorial")),a.createElement("div",{className:"onboard_figjam_viewer--openTutorialBottomContentRow--rVWqG onboard_figjam_viewer--bottomContentRow--PgTeU"},a.createElement("div",{className:"onboard_figjam_viewer--secondaryTextClickable--iF6eC onboard_figjam_viewer--secondaryText--THVcI",onClick:e.dismissModal},(0,x.tx)("rcs.figjam_onboarding.maybe_later")),a.createElement(tM.vd,{className:"loading"===i.status||null==i.data?"onboard_figjam_viewer--openTutorialButtonDisabled--EYffC onboard_figjam_viewer--openTutorialButton--4AqFo onboard_figjam_viewer--ctaButton--aFKKt text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI":"onboard_figjam_viewer--openTutorialButton--4AqFo onboard_figjam_viewer--ctaButton--aFKKt text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI",onClick:()=>{"loaded"!==i.status||null==i.data||i.data.length<1||(rL(i.data[0].url,t),e.dismissModal())},disabled:"loading"===i.status},"loading"===i.status||null==i.data?a.createElement(rx.kt,{"data-testid":"loading-spinner",className:"onboard_figjam_viewer--openTutorialSpinner--zV-nH publish_modal--spinner--7DaqW"}):(0,x.tx)("rcs.figjam_onboarding.open_tutorial"))))))))}function rR(e,t){(0,rS.kF)("type",e),(0,rS.kF)("source",t),(0,rS.us)("FigJam onboarding - failed to load open tutorial button")}async function rM(e){let t=(await e).data;if(!t)return!1;let n=(0,rw.kd)(t),a=(0,rw.mW)(n,"figjam_editor_onboarded");return!a&&!a&&!(()=>{let e=(0,rb.DN)();try{return!!e.get(rv.Xk)}catch(e){}return!1})()}function rP({openFile:e}){return!!(e&&e.trackTags?.isTemplate&&e.editorType===t7._Y.WHITEBOARD)}function rF(e){return a.createElement(ez.h,{testId:e.testId?e.testId:"OpenFigJamTutorialOverlay",modalType:eY.q3.SELF_CONTAINED,trackingContextName:"FigJam Editor Onboarding - Open Tutorial",userFlagOnShow:"figjam_editor_onboarded",element:rD,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function rB(){let e=(0,s.wA)(),t=(0,el.MY)(),{show:n,uniqueId:r,complete:i,isShowing:l}=(0,u.e)({overlay:g.MJs,priority:m.N.OVERRIDING_MODAL},[t]),o=function(e,t){let n=(0,a.useRef)(),r=(0,a.useRef)(),i=(0,a.useRef)();return((0,a.useEffect)(()=>()=>{n.current?.()},[]),r.current)?r.current:null==n.current||null==i.current?(r.current=new Promise(a=>{n.current?.(),n.current=(0,rC.WB)().subscribe(e,t,e=>{("loaded"===e.status||e.errors)&&(i.current=e,a(i.current),r.current=void 0)})}),r.current):Promise.resolve(i.current)}(al.Tej,{}),d=(0,v.md)(el.yV),p=(0,rT.Td)(),_=!rP({openFile:d}),f=(0,a.useRef)(!1);(0,a.useEffect)(()=>{rM(o).then(e=>{e&&!f.current&&n({canShow:e=>{let t=e?.editorType===t7._Y.WHITEBOARD&&!e?.canEdit;return t&&(f.current=!0),t}})})},[n,o]);let{currentStep:h,next:E,reset:y}=(0,eG.A)({numSteps:_?4:3,onComplete:i});(0,ew.E)(r,"Reset Onboarding",()=>{e(c.b({figjam_editor_onboarded:!1})),p&&(y(),n())});let b=aE(i),C=a.useMemo(()=>{let e=n9.map(e=>a.createElement(e,{key:e.name,isShowing:l,onClickPrimaryCta:E,onClose:t4.lQ,onManualDismiss:b}));return _&&e.push(a.createElement(rF,{key:"OpenFigJamTutorialOverlay",isShowing:l,onClickPrimaryCta:E,onClose:t4.lQ,onManualDismiss:b,testId:"open_figjam_tutorial_overlay"})),e},[E,b,l,_]);return a.createElement(eH.U,{currentStep:h,isShowing:l,children:C})}var rU=n(583765),rG=n(315944);let rK=(0,aB.D)(()=>{let e=(0,rb.DN)();try{return!!e.get(rv.Xk)}catch(e){}return!1});function rV({isTemplateFile:e,isTryFile:t,canvasEmpty:n,onboardedToFigJam:a,cameFromWhatsNew:r}){if(a||rK())return[];let i=(0,nq.O)()?[]:n9;if(e)return i;let l=[...i,rF];return r||t||!n?l:[rp]}function rH({openFile:e}){let t=(0,v.md)(av.l5),n=(0,v.md)(tw.zo),r=(0,v.md)(nI.Am);return t!==a5.fD.NONE?null:("loaded"!==n.status||n.data)&&!r?a.createElement(rj,{openFile:e}):a.createElement(rW,{openFile:e})}let rz=(e,t)=>{let n=(0,el.MY)(),r=(0,C.Xr)(nI.Am),i=(0,C.Xr)(av.w),l=(0,v.md)(tw.zo),o=(0,eU.aV)(),s=(0,v.md)(rU.dO).status===rG.c.LOADING;ay({overlayUniqueId:e,afterReset:()=>{r(null),i(av.tX.NOT_STARTED)}});let c=(0,a.useRef)(!1);(0,a.useEffect)(()=>{!c.current&&"loaded"===l.status&&!o&&!s&&n.data?.canEdit&&n.data?.editorType==="whiteboard"&&(c.current=!0,t())},[t,l.status,o,s,n])};function rW({openFile:e}){let t=(0,s.d4)(e=>e.mirror.appModel.currentPage),n=(0,ts.Fk)((e,t)=>(0,to.zC)(e,t),t),r=(0,v.md)(tw.zo),i=(0,eS.Fu)("interacted_figjam_whats_new_v2_cta"),l=(0,v.md)(i),o=(0,C.Xr)(nI.Am),{getConfig:c}=(0,t2.XV)("exposed_exp_figjam_unified_onboarding","figjam_unified_onboarding"),d=(0,a.useCallback)(()=>{let e=c().get("sequence",nI.jg.DEFAULT);return o(e),e},[c,o]),[p,_]=(0,a.useState)(!1),[f,h]=(0,a.useState)([]),{show:E,uniqueId:y,isShowing:b,complete:w,experimentResult:T}=(0,u.e)({overlay:g.zoI,priority:m.N.OVERRIDING_MODAL,experiment:{check:d,predicate:e=>e!==nI.jg.DEFAULT,postCheck:e=>(e||rK()||_(!0),!1)}},[r,l]),S=(0,a.useRef)(n);(0,a.useEffect)(()=>{S.current=n},[n]);let{show:x,isShowing:k,complete:N}=(0,u.e)({overlay:g.lLk,priority:m.N.OVERRIDING_MODAL,experiment:{check:d,predicate:e=>e===nI.jg.DEFAULT,postCheck:(t,n)=>{let a=rV({isTemplateFile:rP({openFile:e}),isTryFile:e.isTryFile,canvasEmpty:S.current,onboardedToFigJam:t,cameFromWhatsNew:(0,tI.SS)(n)}),r=a.length>0;return r&&h(a),r}}},[r,l]),I=T||nI.jg.DEFAULT,A=I===nI.jg.DEFAULT?k:b,O=I===nI.jg.DEFAULT?N:w,L=(0,a.useMemo)(()=>I===nI.jg.DEFAULT?f:[],[I,f]);rz(y,(0,a.useCallback)(()=>{E(),x()},[E,x]));let D=aE(O),R=(0,a.useCallback)(()=>{I===nI.jg.DEFAULT?D():p&&(O(),rf(I))},[D,O,p,I]);return((0,a.useEffect)(()=>{0===L.length&&p&&I!==nI.jg.DEFAULT&&rf(I)},[p,L,I]),T&&A&&0!==L.length)?a.createElement(ab,{steps:L,onComplete:R,isShowing:A,overlayUniqueId:y}):null}function rj({openFile:e}){let t=(0,s.d4)(e=>e.mirror.appModel.currentPage),n=(0,ts.Fk)((e,t)=>(0,to.zC)(e,t),t),r=(0,v.md)(tw.zo),i=(0,eS.Fu)("interacted_figjam_whats_new_v2_cta"),l=(0,v.md)(i),{show:o,uniqueId:c,isShowing:d,complete:p}=(0,u.e)({overlay:g.lLk,priority:m.N.OVERRIDING_MODAL},[r,l]),[_,f]=(0,a.useState)([]);rz(c,(0,a.useCallback)(()=>{o({canShow:(t,a)=>{let r=rV({isTemplateFile:rP({openFile:e}),isTryFile:e.isTryFile,canvasEmpty:n,onboardedToFigJam:t,cameFromWhatsNew:(0,tI.SS)(a)}),i=r.length>0;return i&&f(r),i}})},[o,f,n,e]));let h=aE(p);return d&&0!==_.length?a.createElement(ab,{steps:_,onComplete:h,isShowing:d,overlayUniqueId:c}):null}function r$({openFile:e}){return a.createElement(rH,{openFile:e})}var rq=n(288706);let rY=(0,es.eU)(async()=>{if(document.fonts&&FontFace){let e=new FontFace("Whyte","url(https://static.figma.com/webfont/1/Whyte-Regular.woff)");document.fonts.add(e)}await document.fonts.ready}),rX=(0,rq.Rq)(rY);function rJ(e){return a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:rc,userFlagOnShow:"figjam_browse_templates_modal_onboarded",element:ru,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function rZ(e){return a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:rd,userFlagOnShow:"figjam_browse_templates_modal_onboarded",element:rm,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function rQ(){let e=(0,eS.r1)("figjam_browse_templates_modal_onboarded"),t=(0,v.md)(e),n=(0,v.md)(rX),[r,i]=(0,a.useState)(!1),l=(0,nI.Un)(),{show:o,isShowing:s,uniqueId:c,complete:d}=(0,u.e)({overlay:g.kp0,priority:m.N.OVERRIDING_MODAL},[t,n]);return(0,ew.E)(c,a5.Lz,()=>{i(!0),o({canShow:e=>!e&&!l})}),(0,ew.E)(c,eq.P7,()=>{o({canShow:e=>!e&&!l})}),r?a.createElement(rJ,{isShowing:s,onClickPrimaryCta:d,onClose:d,onManualDismiss:d}):a.createElement(rZ,{isShowing:s,onClickPrimaryCta:d,onClose:d,onManualDismiss:d})}var r0=n(244673),r1=n(178498),r2=n(972283),r5=n(728406),r3=n(487392);let r4={};function r6(e){return r4[e]??""}function r8(e){return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.BRAINSTORM},a.createElement(aD.wV,{bodyText:a.createElement("span",{className:a3.R9},(0,x.tx)("figjam_onboarding_make_something.brainstorm.fig_jam_s_great_for_brainstorming",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.brainstorm.fig_jam_s_great_for_brainstorming_prefix"))})),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:a6.A}))}function r7(e){let{onClickPrimaryCta:t,dismissModal:n}=e;return a.useEffect(()=>{function e(e){var n;t(),n=e.nodeId,r4.createdSticky=n}return t8.Y5.fromFullscreen.on("createdSticky",e),()=>{t8.Y5.fromFullscreen.removeListener("createdSticky",e)}},[t]),a.createElement(aD.vX,{onSkipClick:n,useCase:a5.fD.BRAINSTORM},a.createElement(n$.Dv,{targetType:"dom",targetKey:r1.s,topPadding:-22,autoWidth:!0,isBold:!0},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.brainstorm.sticky_notes_let_you_share_ideas_go_ahead_drag_one_into_the_blue_box_above",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.brainstorm.sticky_notes_let_you_share_ideas_go_ahead_drag_one_into_the_blue_box_above_bold_text"))}))})))}function r9(e){let[t]=a.useState(()=>r6("createdSticky")),{handleTargetLost:n}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.BRAINSTORM},a.createElement(n$.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.LEFT_TITLE,onTargetLost:n},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.brainstorm.just_like_that_keep_it_to_one_idea_per_sticky_next_let_s_check_out_stamps",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.brainstorm.just_like_that_keep_it_to_one_idea_per_sticky_next_let_s_check_out_stamps_bold_text"))})),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function ie(e){let{onClickPrimaryCta:t,dismissModal:n}=e,{handleTargetLost:r}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.useEffect(()=>{function e(e){var n;t(),n=e.nodeId,r4.createdStamp=n}return t8.Y5.fromFullscreen.on("createdStamp",e),()=>{t8.Y5.fromFullscreen.removeListener("createdStamp",e)}},[t]),a.createElement(aD.vX,{onSkipClick:n,useCase:a5.fD.BRAINSTORM},a.createElement(n$.Dv,{targetType:"dom",targetKey:r2.E$,topPadding:-27,isBold:!0,autoWidth:!0,onTargetLost:r},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.brainstorm.stamps_are_here_or_press_e_they_re_good_for_voting_go_ahead_stamp_something",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.brainstorm.stamps_are_here_or_press_e_they_re_good_for_voting_go_ahead_stamp_something_bold_text"))}))})))}function it(e){let[t]=a.useState(()=>r6("createdStamp")),{handleTargetLost:n}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.BRAINSTORM},a.createElement(n$.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.TOP,onTargetLost:n},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.brainstorm.lovely_just_one_more_thing",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.brainstorm.lovely_just_one_more_thing_bold_text"))})),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function ia(e){let t=(0,s.wA)(),n=(0,r3.MR)(),r=(0,r3.qU)(),[i,l]=a.useState("invalid"),{handleTargetLost:o}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.useEffect(()=>(n({source:r3.OO.MAKE_SOMETHING_V2_ONBOARDING}),t(r0.lu({state:"open",userInitiated:!1})),l(r5.Hm),()=>{r({source:r3.OO.MAKE_SOMETHING_V2_ONBOARDING}),t(r0.lu({state:"closed",userInitiated:!1}))}),[r,t,n]),a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.BRAINSTORM},a.createElement(n$.Dv,{targetType:"dom",targetKey:i,topPadding:-4,isBold:!0,autoWidth:!0,onTargetLost:o},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.brainstorm.use_the_timer_to_keep_things_moving",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.brainstorm.use_the_timer_to_keep_things_moving_bold_text"))})),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function ir(e){let{onNext:t}=aV({...e,useCase:a5.fD.BRAINSTORM});return a.createElement(n$.Dv,{targetType:"dom",targetKey:eq.v4,topPadding:-4,isBold:!0,hasShadow:!0},a.createElement(n2,{titleText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.when_you_re_ready"),bodyText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.start_a_brainstorm_by_inviting_a_few_people_here_that_s_it"),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:aD.mN,isBold:!0}))}function ii(e){return(0,aD.rL)({useCase:a5.fD.BRAINSTORM,stepName:"Intro",stepNum:1}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Brainstorm - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:r8,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function il(e){return(0,aD.rL)({useCase:a5.fD.BRAINSTORM,stepName:"Sticky Prompt",stepNum:2}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Brainstorm - Sticky Prompt`,userFlagOnShow:"figjam_editor_onboarded",element:r7,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function io(e){return(0,aD.rL)({useCase:a5.fD.BRAINSTORM,stepName:"Sticky Reaction",stepNum:3}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Brainstorm - Sticky Reaction`,userFlagOnShow:"figjam_editor_onboarded",element:r9,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function is(e){return(0,aD.rL)({useCase:a5.fD.BRAINSTORM,stepName:"Stamp Prompt",stepNum:4}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Brainstorm - Stamp Prompt`,userFlagOnShow:"figjam_editor_onboarded",element:ie,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ic(e){return(0,aD.rL)({useCase:a5.fD.BRAINSTORM,stepName:"Stamp Reaction",stepNum:5}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Brainstorm - Stamp Reaction`,userFlagOnShow:"figjam_editor_onboarded",element:it,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function id(e){return(0,aD.rL)({useCase:a5.fD.BRAINSTORM,stepName:"Timer",stepNum:6}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Brainstorm - Timer`,userFlagOnShow:"figjam_editor_onboarded",element:ia,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iu(e){let t=(0,nY.O)();return(0,aD.rL)({useCase:a5.fD.BRAINSTORM,stepName:"Share",stepNum:7}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Brainstorm - Share`,userFlagOnShow:"figjam_editor_onboarded",element:ir,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:a5.fD.BRAINSTORM}),e.onClose()},onManualDismiss:e.onManualDismiss})}var im=n(202232);function ip(e){return a.useEffect(()=>{!function(){let e=U.q.instance.getCurrentPage();if(e&&e.childrenGuids.length>=1){var t,n,a;let r=e.childrenNodes[0];if(r?.type==="SECTION"&&r.childrenGuids.length>=1){let e=r.childrenNodes[0];e?.type==="SHAPE_WITH_TEXT"&&(t=e.guid,r4.planningAheadInitialNode=t)}if(r?.type==="SECTION"&&r.childrenGuids.length>=9){let e=r.childrenNodes[8];e?.type==="TEXT"&&(n=e.guid,r4.planningAheadPerson=n)}if(r?.type==="SECTION"&&r.childrenGuids.length>=4){let e=r.childrenNodes[3];e?.type==="SHAPE_WITH_TEXT"&&(a=e.guid,r4.planningAheadProject=a)}}}()},[]),a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.PLAN},a.createElement(aD.wV,{bodyText:a.createElement("span",{className:a3.R9},(0,x.tx)("figjam_onboarding_make_something.planning_ahead.fig_jam_s_great_for_planning_ahead_here_s_how_it_s_done",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.planning_ahead.fig_jam_s_great_for_planning_ahead_here_s_how_it_s_done_bold_text"))})),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:a8.A}))}function i_(e){let[t]=a.useState(()=>r6("planningAheadInitialNode")),{handleTargetLost:n}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.PLAN},a.createElement(n$.Dv,{targetType:"canvas",targetKey:t,topPadding:-7,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.BOTTOM,onTargetLost:n},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.planning_ahead.start_with_a_simple_timeline_with_a_row_for_each_member_of_your_team")),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function ig(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[r]=a.useState(()=>r6("planningAheadPerson")),{handleTargetLost:i}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.useEffect(()=>{function e(){t()}return t8.Y5.fromFullscreen.on("finishedEditingText",e),()=>{t8.Y5.fromFullscreen.removeListener("finishedEditingText",e)}},[t]),a.createElement(aD.vX,{onSkipClick:n,useCase:a5.fD.PLAN},a.createElement(n$.Dv,{targetType:"canvas",targetKey:r,topPadding:2,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.LEFT_TITLE,onTargetLost:i},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.planning_ahead.type_your_name_here_right_at_the_top",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.planning_ahead.type_your_name_here_right_at_the_top_bold_text"))}))})))}function ih(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[r]=a.useState(()=>r6("planningAheadProject")),{handleTargetLost:i}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.useEffect(()=>{function e(){t()}return t8.Y5.fromFullscreen.on("finishedEditingShapeWithText",e),()=>{t8.Y5.fromFullscreen.removeListener("finishedEditingShapeWithText",e)}},[t]),a.createElement(aD.vX,{onSkipClick:n,useCase:a5.fD.PLAN},a.createElement(n$.Dv,{targetType:"canvas",targetKey:r,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.BOTTOM,onTargetLost:i},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.planning_ahead.what_are_you_working_on_this_month_rename_this_block_to_your_current_project",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.planning_ahead.what_are_you_working_on_this_month_rename_this_block_to_your_current_project_bold_text"))}))})))}function iE(e){let[t]=a.useState(()=>r6("planningAheadProject")),{handleTargetLost:n}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.PLAN},a.createElement(n$.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.LEFT_TITLE,onTargetLost:n},a.createElement(aD.mI,{bodyText:(0,x.tx)("figjam_onboarding_make_something.planning_ahead.you_can_resize_blocks_by_dragging_their_ends"),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function iy(e){let{handleTargetLost:t}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.PLAN},a.createElement(n$.Dv,{targetType:"dom",targetKey:im.BC,topPadding:-23,isBold:!0,autoWidth:!0,onTargetLost:t},a.createElement(aD.mI,{bodyText:(0,x.tx)("figjam_onboarding_make_something.planning_ahead.and_grab_more_shapes_as_needed_from_your_toolbar"),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function ib(e){let{onNext:t}=aV({...e,useCase:a5.fD.PLAN});return a.createElement(n$.Dv,{targetType:"dom",targetKey:eq.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0},a.createElement(n2,{titleText:(0,x.tx)("figjam_onboarding_make_something.planning_ahead.try_it_with_your_team"),bodyText:(0,x.tx)("figjam_onboarding_make_something.planning_ahead.share_this_board_and_your_whole_team_can_contribute"),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:aD.mN,isBold:!0}))}function iv(e){return(0,aD.rL)({useCase:a5.fD.PLAN,stepName:"Intro",stepNum:1}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Planning Ahead - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:ip,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iC(e){return(0,aD.rL)({useCase:a5.fD.PLAN,stepName:"Section",stepNum:2}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Planning Ahead - Section`,userFlagOnShow:"figjam_editor_onboarded",element:i_,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iw(e){return(0,aD.rL)({useCase:a5.fD.PLAN,stepName:"Person",stepNum:3}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Planning Ahead - Person`,userFlagOnShow:"figjam_editor_onboarded",element:ig,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iT(e){return(0,aD.rL)({useCase:a5.fD.PLAN,stepName:"Project Name",stepNum:4}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Planning Ahead - Project Name`,userFlagOnShow:"figjam_editor_onboarded",element:ih,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iS(e){return(0,aD.rL)({useCase:a5.fD.PLAN,stepName:"Project Block",stepNum:5}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Planning Ahead - Project Block`,userFlagOnShow:"figjam_editor_onboarded",element:iE,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ix(e){return(0,aD.rL)({useCase:a5.fD.PLAN,stepName:"Shape",stepNum:6}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Planning Ahead - Shape`,userFlagOnShow:"figjam_editor_onboarded",element:iy,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function ik(e){let t=(0,nY.O)();return(0,aD.rL)({useCase:a5.fD.PLAN,stepName:"Share",stepNum:7}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Planning Ahead - Share`,userFlagOnShow:"figjam_editor_onboarded",element:ib,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:a5.fD.PLAN}),e.onClose()},onManualDismiss:e.onManualDismiss})}function iN(e){return a.useEffect(()=>{!function(){var e,t,n;let a=U.q.instance.getCurrentPage();if(a){if(a.childrenGuids.length>=1){let t=a.childrenNodes[0];t?.type==="SHAPE_WITH_TEXT"&&(e=t.guid,r4.teamChartName=e)}if(a.childrenGuids.length>=2){let e=a.childrenNodes[1];e?.type==="ROUNDED_RECTANGLE"&&(t=e.guid,r4.teamChartImage=t)}if(a.childrenGuids.length>=5){let e=a.childrenNodes[4];e?.type==="SHAPE_WITH_TEXT"&&(n=e.guid,r4.teamChartQuickCreate=n)}}}()},[]),a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.TEAM},a.createElement(aD.wV,{bodyText:a.createElement("span",{className:a3.R9},(0,x.tx)("figjam_onboarding_make_something.team_chart.in_fig_jam_you_can_diagram_all_sorts_of_things_here_s_an_example",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.team_chart.in_fig_jam_you_can_diagram_all_sorts_of_things_here_s_an_example_bold_text"))})),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:a7.A}))}function iI(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[r]=a.useState(()=>r6("teamChartName")),{handleTargetLost:i}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.useEffect(()=>{function e(){t()}return t8.Y5.fromFullscreen.on("finishedEditingShapeWithText",e),()=>{t8.Y5.fromFullscreen.removeListener("finishedEditingShapeWithText",e)}},[t]),a.createElement(aD.vX,{onSkipClick:n,useCase:a5.fD.TEAM},a.createElement(n$.Dv,{targetType:"canvas",targetKey:r,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.BOTTOM,onTargetLost:i},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.team_chart.double_click_this_text_to_type_in_the_manager_s_name_go_ahead_try_it",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.team_chart.double_click_this_text_to_type_in_the_manager_s_name_go_ahead_try_it_bold_text"))}))})))}function iA(e){let[t]=a.useState(()=>r6("teamChartImage")),{handleTargetLost:n}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.TEAM},a.createElement(n$.Dv,{targetType:"canvas",targetKey:t,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.LEFT_TITLE,onTargetLost:n},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.team_chart.you_can_add_images_by_simply_dragging_them_into_fig_jam")),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function iO(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[r]=a.useState(()=>r6("teamChartQuickCreate")),{handleTargetLost:i}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.useEffect(()=>{function e(){t()}return t8.Y5.fromFullscreen.on("quickCreate",e),()=>{t8.Y5.fromFullscreen.removeListener("quickCreate",e)}},[t]),a.createElement(aD.vX,{onSkipClick:n,useCase:a5.fD.TEAM},a.createElement(n$.Dv,{targetType:"canvas",targetKey:r,topPadding:-4,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.RIGHT_TITLE,onTargetLost:i},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.team_chart.adding_to_a_diagram_is_simple_hover_over_a_shape_and_click_this_button_try_it",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.team_chart.adding_to_a_diagram_is_simple_hover_over_a_shape_and_click_this_button_try_it_bold_text"))}))})))}function iL(e){let{handleTargetLost:t}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.TEAM},a.createElement(n$.Dv,{targetType:"dom",targetKey:im.BC,topPadding:-23,isBold:!0,autoWidth:!0,onTargetLost:t},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.team_chart.you_can_also_grab_more_shapes_from_here")),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function iD(e){let{handleTargetLost:t}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.TEAM},a.createElement(n$.Dv,{targetType:"dom",targetKey:im.Nr,isBold:!0,autoWidth:!0,onTargetLost:t},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.team_chart.and_use_the_connector_tool_to_connect_any_two_things_together")),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function iR(e){let{onNext:t}=aV({...e,useCase:a5.fD.TEAM});return a.createElement(n$.Dv,{targetType:"dom",targetKey:eq.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0},a.createElement(n2,{titleText:(0,x.tx)("figjam_onboarding_make_something.team_chart.diagram_together"),bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.team_chart.share_this_board_and_your_whole_team_can_pitch_in")),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:aD.mN,isBold:!0}))}function iM(e){return(0,aD.rL)({useCase:a5.fD.TEAM,stepName:"Intro",stepNum:1}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Chart - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:iN,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iP(e){return(0,aD.rL)({useCase:a5.fD.TEAM,stepName:"Name",stepNum:2}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Chart - Name`,userFlagOnShow:"figjam_editor_onboarded",element:iI,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iF(e){return(0,aD.rL)({useCase:a5.fD.TEAM,stepName:"Image",stepNum:3}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Chart - Image`,userFlagOnShow:"figjam_editor_onboarded",element:iA,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iB(e){return(0,aD.rL)({useCase:a5.fD.TEAM,stepName:"Quick Create",stepNum:4}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Chart - Quick Create`,userFlagOnShow:"figjam_editor_onboarded",element:iO,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iU(e){return(0,aD.rL)({useCase:a5.fD.TEAM,stepName:"Shape",stepNum:5}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Chart - Shape`,userFlagOnShow:"figjam_editor_onboarded",element:iL,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iG(e){return(0,aD.rL)({useCase:a5.fD.TEAM,stepName:"Connector",stepNum:6}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Chart - Connector`,userFlagOnShow:"figjam_editor_onboarded",element:iD,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iK(e){let t=(0,nY.O)();return(0,aD.rL)({useCase:a5.fD.TEAM,stepName:"Share",stepNum:7}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Chart - Share`,userFlagOnShow:"figjam_editor_onboarded",element:iR,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:a5.fD.TEAM}),e.onClose()},onManualDismiss:e.onManualDismiss})}function iV(e){return a.useEffect(()=>{!function(){var e,t,n,a,r;let i=U.q.instance.getCurrentPage();if(i){if(i.childrenGuids.length>=1){let t=i.childrenNodes[0];t?.type==="SECTION"&&(e=t.guid,r4.teamUpdatesSection=e)}if(i.childrenGuids.length>=6){let e=i.childrenNodes[5];e?.type==="WIDGET"&&(t=e.guid,r4.teamUpdatesPhotoBooth=t)}if(i.childrenGuids.length>=4){let e=i.childrenNodes[3];e?.type==="TEXT"&&(n=e.guid,r4.teamUpdatesUpdates=n)}if(i.childrenGuids.length>=5){let e=i.childrenNodes[4];e?.type==="TEXT"&&(a=e.guid,r4.teamUpdatesImportantDates=a)}if(i.childrenGuids.length>=1){let e=i.childrenNodes[0];if(e?.type==="SECTION"&&e.childrenGuids.length>=2){let t=e.childrenNodes[1];t?.type==="STICKY"&&(r=t.guid,r4.teamUpdatesSticky=r)}}}}()},[]),a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.UPDATES},a.createElement(aD.wV,{bodyText:a.createElement("span",{className:a3.R9},(0,x.tx)("figjam_onboarding_make_something.team_updates.fig_jam_s_great_for_team_syncs_here_s_how_it_works",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.team_updates.fig_jam_s_great_for_team_syncs_here_s_how_it_works_bold_text"))})),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.go_on"),onButtonClick:e.onClickPrimaryCta,svg:a9.A}))}function iH(e){let[t]=a.useState(()=>r6("teamUpdatesSection")),{handleTargetLost:n}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.UPDATES},a.createElement(n$.Dv,{targetType:"canvas",targetKey:t,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.BOTTOM,onTargetLost:n},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.team_updates.each_person_gets_a_row_of_their_own_for_sharing_updates_and_priorities")),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function iz(e){let[t]=a.useState(()=>r6("teamUpdatesPhotoBooth")),{handleTargetLost:n}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.UPDATES},a.createElement(n$.Dv,{targetType:"canvas",targetKey:t,topPadding:-6,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.BOTTOM,onTargetLost:n},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.team_updates.take_a_selfie_then_drag_it_into_whichever_row_you_d_like_try_and_click_the_red_dot",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.team_updates.take_a_selfie_then_drag_it_into_whichever_row_you_d_like_try_and_click_the_red_dot_bold_text"))})),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function iW(e){let[t]=a.useState(()=>r6("teamUpdatesUpdates")),{handleTargetLost:n}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.UPDATES},a.createElement(n$.Dv,{targetType:"canvas",targetKey:t,topPadding:-5,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.BOTTOM,onTargetLost:n},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.team_updates.your_whole_team_can_share_updates_here")),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function ij(e){let[t]=a.useState(()=>r6("teamUpdatesImportantDates")),{handleTargetLost:n}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.createElement(aD.vX,{onSkipClick:e.dismissModal,useCase:a5.fD.UPDATES},a.createElement(n$.Dv,{targetType:"canvas",targetKey:t,topPadding:-5,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.BOTTOM,onTargetLost:n},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.team_updates.and_can_add_important_dates_to_the_calendar_over_here")),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.next"),onButtonClick:e.onClickPrimaryCta})))}function i$(e){let{onClickPrimaryCta:t,dismissModal:n}=e,[r]=a.useState(()=>r6("teamUpdatesSticky")),{handleTargetLost:i}=(0,n$.Du)({shouldSkipConnectorModalAtom:av.aG,skipConnectorModal:e.onClickPrimaryCta});return a.useEffect(()=>{function e(){t()}return t8.Y5.fromFullscreen.on("finishedEditingSticky",e),()=>{t8.Y5.fromFullscreen.removeListener("finishedEditingSticky",e)}},[t]),a.createElement(aD.vX,{onSkipClick:n,useCase:a5.fD.UPDATES},a.createElement(n$.Dv,{targetType:"canvas",targetKey:r,topPadding:-16,isBold:!0,autoWidth:!0,arrowPosition:aF.F_.TOP,onTargetLost:i},a.createElement(aD.mI,{bodyText:a.createElement("span",null,(0,x.tx)("figjam_onboarding_make_something.team_updates.give_it_a_go_try_typing_your_priorities_in_this_sticky_note",{boldText:a.createElement("b",null,(0,x.tx)("figjam_onboarding_make_something.team_updates.give_it_a_go_try_typing_your_priorities_in_this_sticky_note_bold_text"))}))})))}function iq(e){let{onNext:t}=aV({...e,useCase:a5.fD.UPDATES});return a.createElement(n$.Dv,{targetType:"dom",targetKey:eq.v4,topPadding:-4,isBold:!0,autoWidth:!0,hasShadow:!0},a.createElement(n2,{titleText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.when_you_re_ready"),bodyText:(0,x.tx)("figjam_onboarding_make_something.team_updates.invite_your_teammates_and_run_a_quick_team_check_in"),buttonText:(0,x.tx)("figjam_onboarding_make_something.brainstorm.share_board"),onNext:t,onDismiss:e.dismissModal,imgSrc:aD.mN,isBold:!0}))}function iY(e){return(0,aD.rL)({useCase:a5.fD.UPDATES,stepName:"Intro",stepNum:1}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Updates - Intro`,userFlagOnShow:"figjam_editor_onboarded",element:iV,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iX(e){return(0,aD.rL)({useCase:a5.fD.UPDATES,stepName:"Section",stepNum:2}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Updates - Section`,userFlagOnShow:"figjam_editor_onboarded",element:iH,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iJ(e){return(0,aD.rL)({useCase:a5.fD.UPDATES,stepName:"Photo Booth",stepNum:3}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Updates - Photo Booth`,userFlagOnShow:"figjam_editor_onboarded",element:iz,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iZ(e){return(0,aD.rL)({useCase:a5.fD.UPDATES,stepName:"Updates",stepNum:4}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Updates - Updates`,userFlagOnShow:"figjam_editor_onboarded",element:iW,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function iQ(e){return(0,aD.rL)({useCase:a5.fD.UPDATES,stepName:"Important Dates",stepNum:5}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Updates - Important Dates`,userFlagOnShow:"figjam_editor_onboarded",element:ij,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function i0(e){return(0,aD.rL)({useCase:a5.fD.UPDATES,stepName:"Sticky",stepNum:6}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Updates - Sticky`,userFlagOnShow:"figjam_editor_onboarded",element:i$,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss})}function i1(e){let t=(0,nY.O)();return(0,aD.rL)({useCase:a5.fD.UPDATES,stepName:"Share",stepNum:7}),a.createElement(ez.h,{testId:e.testId,modalType:eY.q3.SELF_CONTAINED,trackingContextName:`${aD.CM} - Team Updates - Share`,userFlagOnShow:"figjam_editor_onboarded",element:iq,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:()=>{t({eventName:"msv2_completed",useCase:a5.fD.UPDATES}),e.onClose()},onManualDismiss:e.onManualDismiss})}function i2(e){switch(e){case a5.qy.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED:return[ii,il,io,is,ic,id,iu,i5];case a5.qy.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED:return[iY,iX,iJ,iZ,iQ,i0,i1,i5];case a5.qy.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED:return[iv,iC,iw,iT,iS,ix,ik,i5];case a5.qy.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED:return[iM,iP,iF,iB,iU,iG,iK,i5];default:return[]}}function i5({onClickPrimaryCta:e}){let t=(0,s.d4)(e=>e.modalShown),n=(0,a.useRef)(t);return(0,a.useEffect)(()=>{!t&&n.current&&(e(),(0,nW.YQ)({id:eq.P7}))},[e,t]),a.createElement(a.Fragment,null)}function i3(){let[e,t]=a.useState([]),n=(0,C.Xr)(av.w),{complete:r,uniqueId:i,show:l,isShowing:o}=(0,u.e)({overlay:g.Njd,priority:m.N.OVERRIDING_MODAL}),s=a.useCallback(()=>{r(),n(av.tX.COMPLETED)},[r,n]);return((0,ew.E)(i,a5.qy.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED,()=>{t(i2(a5.qy.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED)),n(av.tX.USE_CASE_STEPS),l()}),(0,ew.E)(i,a5.qy.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED,()=>{t(i2(a5.qy.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED)),n(av.tX.USE_CASE_STEPS),l()}),(0,ew.E)(i,a5.qy.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED,()=>{t(i2(a5.qy.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED)),n(av.tX.USE_CASE_STEPS),l()}),(0,ew.E)(i,a5.qy.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED,()=>{t(i2(a5.qy.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED)),n(av.tX.USE_CASE_STEPS),l()}),ay({overlayUniqueId:i,afterReset:r}),0===e.length)?null:a.createElement(ab,{steps:e,onComplete:s,isShowing:o,overlayUniqueId:i})}var i4=n(992303),i6=n(835691),i8=n(784578),i7=n(317946);let i9="edit_action_experiment_dont_show_again";function le({dismissModal:e}){let t=(0,i7.E)(),n=(0,s.wA)(),r=(0,el.q5)();return a.createElement(a.Fragment,null,a.createElement("div",{className:"edit_action_experiment_steps--header--kBYL2 onboarding--editorOnboardingHeader--Kk5Cb"},(0,x.tx)("pro_edit_action.heading")),a.createElement("div",{className:"edit_action_experiment_steps--content---HMhp"},(0,x.tx)("pro_edit_action.body_text")),a.createElement("div",{className:"edit_action_experiment_steps--cta--3U128"},a.createElement(tM.tM,{onClick:()=>{n(c.b({[i9]:!0})),e()},trackingProperties:{text:"Not now"}},(0,x.tx)("pro_edit_action.dismiss_button_text")),a.createElement(tM.vd,{className:"edit_action_experiment_steps--primaryButton--R2FKA",onClick:()=>{e(),r&&t(r,i8.$5)},trackingProperties:{text:"Start editing"}},(0,x.tx)("pro_edit_action.primary_button_text"))))}var lt=n(22774),ln=n(708277),la=n(217071);let lr=(0,ln.Op)({initial:"await_button_or_fullscreen",states:[{id:"await_button_or_fullscreen",transitions:[(0,ln.nr)("Context Viewed","check_in_drafts",{condition:({event:e})=>"Editor > Toolbar > File Edit Button"===e.properties.name||"Editor > Toolbelt > File Edit Button"===e.properties.name}),(0,ln.nr)(la.R,"check_show_button",{condition:({event:e})=>0!==e.properties.numSelected&&null!=e.properties.numSelected}),(0,ln.nr)(lt.cZ,"check_show_button")]},{id:"check_in_drafts",transitions:[(0,ln.MR)("static_checks_in_drafts","await_button_or_fullscreen",{condition:({event:e})=>!e.succeeded}),(0,ln.MR)("static_checks_in_drafts","show_overlay",{condition:({event:e})=>e.succeeded})]},{id:"check_show_button",transitions:[(0,ln.MR)("static_checks_show_button","await_button_or_fullscreen",{condition:({event:e})=>!e.succeeded}),(0,ln.MR)("static_checks_show_button","show_overlay",{condition:({event:e})=>e.succeeded})]},{id:"show_overlay",terminal:!0}]}),li="edit_action_experiment_shown_once",ll="edit_action_experiment_shown_twice",lo=(0,eS.r1)("edit_action_experiment_dont_show_again"),ls=(0,eS.r1)(li),lc=(0,eS.r1)(ll);function ld(){let e=(0,s.wA)(),t=(0,i6.eD)(lr),n=(0,v.md)(lo),r=(0,v.md)(tw.$q),i=(0,v.md)(ls),l=(0,v.md)(lc),o=(0,v.md)(tw.aT),d=(0,u.e)({overlay:g.UGT,priority:m.N.HIGH_PRIORITY_MODAL},[n,i,l]),p=(0,a.useCallback)(()=>{d.show({canShow:e=>!e})},[d]),_=(0,a.useCallback)(()=>{"loaded"!==i.status||i.data||e(c.b({[li]:!0})),"loaded"===i.status&&i.data&&e(c.b({[ll]:!0})),d.complete()},[e,d,i]);(0,i6.ST)(t,(0,a.useCallback)(({to:e})=>{"check_in_drafts"===e&&t.transition({id:"static_checks_in_drafts",succeeded:!r}),"check_show_button"===e&&t.transition({id:"static_checks_show_button",succeeded:o}),"show_overlay"===e&&(p(),t.reset())},[r,t,o,p]));let f=(0,a.useCallback)(({dismissModal:e})=>a.createElement(le,{dismissModal:e}),[]);return a.createElement(ez.h,{className:"edit_action_experiment_steps--modal--3KhyN pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",element:f,disableHighlight:!0,isShowing:d.isShowing,modalType:eY.q3.WALK_THROUGH,onboardingKey:i8.m7,onClickPrimaryCta:_,onClose:_,onManualDismiss:_,shouldCenterArrow:aF.EL.FALLBACK,shouldDismissWhenLostDOMTarget:!0,trackingContextName:"Edit Action Experiment Modal (no checkbox)",width:300-2*n$.uv,additionalOnExplicitDismiss:()=>{e(c.b({[i9]:!0}))}})}var lu=n(133537),lm=n(401352),lp=n(175290),l_=n(898211),lg=n(237870);function lf(){return a.createElement("svg",{width:"146",height:"191",viewBox:"0 0 146 191",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M35 153H3C1.34315 153 0 154.343 0 156V188C0 189.657 1.34315 191 3 191H35C36.6569 191 38 189.657 38 188V156C38 154.343 36.6569 153 35 153Z",fill:"#007BE5"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.875 166.25C22.4943 166.25 21.375 167.369 21.375 168.75C21.375 170.131 22.4943 171.25 23.875 171.25C25.2557 171.25 26.375 170.131 26.375 168.75C26.375 167.369 25.2557 166.25 23.875 166.25ZM19.875 168.75C19.875 166.541 21.6659 164.75 23.875 164.75C26.0841 164.75 27.875 166.541 27.875 168.75C27.875 170.3 26.9937 171.644 25.7049 172.308C28.337 173.03 30.3125 175.271 30.3125 178.012V179.312V180.062H29.5625H20.5625H19.8125H18.1875H8.4375H7.6875V179.312V178.012C7.6875 175.271 9.663 173.03 12.2951 172.308C11.0063 171.644 10.125 170.3 10.125 168.75C10.125 166.541 11.9159 164.75 14.125 164.75C16.3341 164.75 18.125 166.541 18.125 168.75C18.125 170.3 17.2437 171.644 15.9549 172.308C17.1449 172.634 18.2008 173.271 19.0005 174.125C19.7985 173.271 20.8514 172.633 22.0433 172.307C20.7555 171.642 19.875 170.299 19.875 168.75ZM9.1875 178.012C9.1875 175.617 11.3334 173.562 14.125 173.562C16.9166 173.562 19.0625 175.617 19.0625 178.012V178.562H18.1875H9.1875V178.012ZM20.5625 178.562H28.8125V178.012C28.8125 175.617 26.6666 173.562 23.875 173.562C22.2296 173.562 20.7911 174.286 19.8997 175.374C20.323 176.164 20.5625 177.058 20.5625 178.012V178.562ZM11.625 168.75C11.625 167.369 12.7443 166.25 14.125 166.25C15.5057 166.25 16.625 167.369 16.625 168.75C16.625 170.131 15.5057 171.25 14.125 171.25C12.7443 171.25 11.625 170.131 11.625 168.75Z",fill:"white"}),a.createElement("path",{d:"M89 153H57C55.3431 153 54 154.343 54 156V188C54 189.657 55.3431 191 57 191H89C90.6569 191 92 189.657 92 188V156C92 154.343 90.6569 153 89 153Z",fill:"#9747FF"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M77.875 166.25C76.4943 166.25 75.375 167.369 75.375 168.75C75.375 170.131 76.4943 171.25 77.875 171.25C79.2557 171.25 80.375 170.131 80.375 168.75C80.375 167.369 79.2557 166.25 77.875 166.25ZM73.875 168.75C73.875 166.541 75.6659 164.75 77.875 164.75C80.0841 164.75 81.875 166.541 81.875 168.75C81.875 170.3 80.9937 171.644 79.7049 172.308C82.337 173.03 84.3125 175.271 84.3125 178.012V179.312V180.062H83.5625H74.5625H73.8125H72.1875H62.4375H61.6875V179.312V178.012C61.6875 175.271 63.663 173.03 66.2951 172.308C65.0063 171.644 64.125 170.3 64.125 168.75C64.125 166.541 65.9159 164.75 68.125 164.75C70.3341 164.75 72.125 166.541 72.125 168.75C72.125 170.3 71.2437 171.644 69.9549 172.308C71.1449 172.634 72.2008 173.271 73.0005 174.125C73.7985 173.271 74.8514 172.633 76.0433 172.307C74.7555 171.642 73.875 170.299 73.875 168.75ZM63.1875 178.012C63.1875 175.617 65.3334 173.562 68.125 173.562C70.9166 173.562 73.0625 175.617 73.0625 178.012V178.562H72.1875H63.1875V178.012ZM74.5625 178.562H82.8125V178.012C82.8125 175.617 80.6666 173.562 77.875 173.562C76.2296 173.562 74.7911 174.286 73.8997 175.374C74.323 176.164 74.5625 177.058 74.5625 178.012V178.562ZM65.625 168.75C65.625 167.369 66.7443 166.25 68.125 166.25C69.5057 166.25 70.625 167.369 70.625 168.75C70.625 170.131 69.5057 171.25 68.125 171.25C66.7443 171.25 65.625 170.131 65.625 168.75Z",fill:"white"}),a.createElement("path",{d:"M143 153H111C109.343 153 108 154.343 108 156V188C108 189.657 109.343 191 111 191H143C144.657 191 146 189.657 146 188V156C146 154.343 144.657 153 143 153Z",fill:"#FFCD29"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M131.875 166.25C130.494 166.25 129.375 167.369 129.375 168.75C129.375 170.131 130.494 171.25 131.875 171.25C133.256 171.25 134.375 170.131 134.375 168.75C134.375 167.369 133.256 166.25 131.875 166.25ZM127.875 168.75C127.875 166.541 129.666 164.75 131.875 164.75C134.084 164.75 135.875 166.541 135.875 168.75C135.875 170.3 134.994 171.644 133.705 172.308C136.337 173.03 138.312 175.271 138.312 178.012V179.312V180.062H137.562H128.562H127.812H126.188H116.438H115.688V179.312V178.012C115.688 175.271 117.663 173.03 120.295 172.308C119.006 171.644 118.125 170.3 118.125 168.75C118.125 166.541 119.916 164.75 122.125 164.75C124.334 164.75 126.125 166.541 126.125 168.75C126.125 170.3 125.244 171.644 123.955 172.308C125.145 172.634 126.201 173.271 127 174.125C127.799 173.271 128.851 172.633 130.043 172.307C128.755 171.642 127.875 170.299 127.875 168.75ZM117.188 178.012C117.188 175.617 119.333 173.562 122.125 173.562C124.917 173.562 127.062 175.617 127.062 178.012V178.562H126.188H117.188V178.012ZM128.562 178.562H136.812V178.012C136.812 175.617 134.667 173.562 131.875 173.562C130.23 173.562 128.791 174.286 127.9 175.374C128.323 176.164 128.562 177.058 128.562 178.012V178.562ZM119.625 168.75C119.625 167.369 120.744 166.25 122.125 166.25C123.506 166.25 124.625 167.369 124.625 168.75C124.625 170.131 123.506 171.25 122.125 171.25C120.744 171.25 119.625 170.131 119.625 168.75Z",fill:"white"}),a.createElement("path",{d:"M112.581 1L125 13.7668V113H20V1H112.581Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.5 0.5H112.792L125.5 13.5637V113.5H19.5V0.5ZM20.5 1.5V112.5H124.5V14.2668H112.081V1.5H20.5ZM113.081 2.23108L123.816 13.2668H113.081V2.23108Z",fill:"black",fillOpacity:"0.8"}),a.createElement("path",{d:"M38 71C41.866 71 45 67.866 45 64C45 60.134 41.866 57 38 57C34.134 57 31 60.134 31 64C31 67.866 34.134 71 38 71Z",fill:"#56CCF2",fillOpacity:"0.8"}),a.createElement("path",{d:"M60 71C63.866 71 67 67.866 67 64C67 60.134 63.866 57 60 57C56.134 57 53 60.134 53 64C53 67.866 56.134 71 60 71Z",fill:"#EB5757"}),a.createElement("path",{d:"M82 71C85.866 71 89 67.866 89 64C89 60.134 85.866 57 82 57C78.134 57 75 60.134 75 64C75 67.866 78.134 71 82 71Z",fill:"#F2994A"}),a.createElement("path",{d:"M104 71C107.866 71 111 67.866 111 64C111 60.134 107.866 57 104 57C100.134 57 97 60.134 97 64C97 67.866 100.134 71 104 71Z",fill:"#F2C94C"}),a.createElement("path",{d:"M38 49C41.866 49 45 45.866 45 42C45 38.134 41.866 35 38 35C34.134 35 31 38.134 31 42C31 45.866 34.134 49 38 49Z",fill:"#333333"}),a.createElement("path",{d:"M60 49C63.866 49 67 45.866 67 42C67 38.134 63.866 35 60 35C56.134 35 53 38.134 53 42C53 45.866 56.134 49 60 49Z",fill:"#4F4F4F"}),a.createElement("path",{d:"M82 49C85.866 49 89 45.866 89 42C89 38.134 85.866 35 82 35C78.134 35 75 38.134 75 42C75 45.866 78.134 49 82 49Z",fill:"#828282"}),a.createElement("path",{d:"M104 49C107.866 49 111 45.866 111 42C111 38.134 107.866 35 104 35C100.134 35 97 38.134 97 42C97 45.866 100.134 49 104 49Z",fill:"#E0E0E0"}),a.createElement("path",{d:"M36.66 20L36.1 18.36H33.26L32.68 20H31.05L33.72 13H35.69L38.34 20H36.66ZM33.7 17.1H35.67L35.15 15.58C34.99 15.11 34.97 14.59 34.96 13.85H34.42C34.41 14.59 34.4 15.11 34.23 15.59L33.7 17.1ZM39.9023 21.95C38.9523 21.95 38.6523 21.49 38.6523 21.01C38.6523 20.61 38.9823 20.32 39.3423 20.21V19.75C39.0223 19.66 38.7723 19.44 38.7723 19.08C38.7723 18.54 39.1623 18.28 39.5923 18.14V17.69C39.2423 17.44 39.0223 17.16 39.0223 16.65C39.0223 15.6 39.9323 14.85 41.1023 14.85C41.9223 14.85 42.6723 15.17 42.9323 15.9H43.3623C43.4423 15.17 43.6723 15 44.1523 15H44.4123V16.08H43.8623C43.5523 16.08 43.4723 16.15 43.4123 16.66L43.4023 16.75C43.2823 17.83 42.4123 18.49 41.2423 18.49C40.8723 18.49 40.5023 18.45 40.2023 18.32C39.9223 18.4 39.8223 18.51 39.8223 18.67C39.8223 18.89 40.0323 18.89 40.3223 18.89H42.4723C43.5423 18.89 44.2123 19.59 44.2123 20.4C44.2123 21.41 43.4523 21.95 42.4723 21.95H39.9023ZM41.2323 17.56C41.7623 17.56 42.1123 17.22 42.1123 16.71C42.1123 16.19 41.7623 15.81 41.2323 15.81C40.7023 15.81 40.3523 16.19 40.3523 16.71C40.3523 17.22 40.7023 17.56 41.2323 17.56ZM40.2423 20.92H42.1923C42.6623 20.92 42.8123 20.73 42.8123 20.45C42.8123 20.22 42.6623 20 42.1923 20H40.0023C39.8823 20.07 39.7423 20.25 39.7423 20.45C39.7423 20.77 39.9723 20.92 40.2423 20.92Z",fill:"black",fillOpacity:"0.8"}),a.createElement("path",{d:"M54.62 20L53.97 18.15H50.89L50.23 20H49.15L51.78 13H53.16L55.74 20H54.62ZM51.22 17.23H53.64L52.97 15.33C52.77 14.75 52.66 14.35 52.65 13.7H52.23C52.21 14.35 52.11 14.76 51.9 15.33L51.22 17.23ZM57.4441 21.95C56.5441 21.95 56.2441 21.45 56.2441 21.05C56.2441 20.6 56.5041 20.27 56.9341 20.08V19.72C56.6641 19.63 56.4441 19.41 56.4441 19.11C56.4441 18.73 56.7041 18.43 57.1841 18.23V17.87C56.8741 17.62 56.6441 17.28 56.6441 16.64C56.6441 15.7 57.4141 14.9 58.5441 14.9C59.5941 14.9 60.0441 15.46 60.2141 15.87H60.5641C60.6041 15.4 60.8441 15.04 61.3241 15.04H61.6641V15.82H61.2541C60.8341 15.82 60.6741 15.92 60.6341 16.49L60.6141 16.73C60.5241 17.85 59.7541 18.57 58.6441 18.57C58.3041 18.57 57.9841 18.53 57.7041 18.38C57.4341 18.49 57.2641 18.67 57.2641 18.85C57.2641 19.02 57.3641 19.17 57.7041 19.17H59.8541C60.8241 19.17 61.4541 19.73 61.4541 20.56C61.4541 21.49 60.7341 21.95 59.8741 21.95H57.4441ZM58.6441 17.83C59.2941 17.83 59.7141 17.4 59.7141 16.74C59.7141 16.09 59.2941 15.64 58.6441 15.64C57.9941 15.64 57.5741 16.09 57.5741 16.74C57.5741 17.4 57.9941 17.83 58.6441 17.83ZM57.8241 21.15H59.7541C60.1541 21.15 60.5041 21.04 60.5041 20.57C60.5041 20.1 60.1541 20 59.7541 20H57.4341C57.2741 20.1 57.0741 20.32 57.0741 20.63C57.0741 21.03 57.3441 21.15 57.8241 21.15Z",fill:"black",fillOpacity:"0.8"}),a.createElement("path",{d:"M67.4862 20H66.2205L68.5249 13.4545H69.9886L72.2962 20H71.0305L69.2823 14.7969H69.2312L67.4862 20ZM67.5277 17.4336H70.9794V18.386H67.5277V17.4336ZM75.1377 21.9432C74.7222 21.9432 74.3653 21.8867 74.067 21.7738C73.7687 21.663 73.529 21.5138 73.3479 21.3263C73.1668 21.1388 73.0411 20.9311 72.9708 20.7031L74.0127 20.4506C74.0596 20.5465 74.1277 20.6413 74.2172 20.7351C74.3067 20.831 74.4271 20.9098 74.5784 20.9716C74.7318 21.0355 74.9246 21.0675 75.1569 21.0675C75.485 21.0675 75.7566 20.9876 75.9718 20.8278C76.187 20.6701 76.2946 20.4102 76.2946 20.0479V19.1179H76.2371C76.1775 19.2372 76.0901 19.3597 75.975 19.4854C75.8621 19.6112 75.7119 19.7166 75.5244 19.8018C75.339 19.8871 75.1057 19.9297 74.8245 19.9297C74.4473 19.9297 74.1054 19.8413 73.7986 19.6644C73.4939 19.4854 73.251 19.2191 73.0699 18.8654C72.8909 18.5096 72.8014 18.0643 72.8014 17.5295C72.8014 16.9904 72.8909 16.5355 73.0699 16.1648C73.251 15.7919 73.4949 15.5096 73.8017 15.3178C74.1086 15.1239 74.4505 15.027 74.8277 15.027C75.1153 15.027 75.3518 15.076 75.5372 15.174C75.7247 15.2699 75.8738 15.386 75.9846 15.5224C76.0954 15.6566 76.1796 15.7834 76.2371 15.9027H76.301V15.0909H77.442V20.0799C77.442 20.4996 77.3419 20.8469 77.1416 21.1218C76.9413 21.3967 76.6675 21.6023 76.3202 21.7386C75.9729 21.875 75.5787 21.9432 75.1377 21.9432ZM75.1473 19.022C75.3923 19.022 75.6011 18.9624 75.7737 18.843C75.9463 18.7237 76.0773 18.5522 76.1668 18.3285C76.2563 18.1048 76.301 17.8363 76.301 17.5231C76.301 17.2141 76.2563 16.9435 76.1668 16.7113C76.0794 16.479 75.9495 16.299 75.7769 16.1712C75.6064 16.0412 75.3966 15.9762 75.1473 15.9762C74.8895 15.9762 74.6743 16.0433 74.5017 16.1776C74.3291 16.3118 74.1991 16.4961 74.1118 16.7305C74.0244 16.9627 73.9807 17.2269 73.9807 17.5231C73.9807 17.8235 74.0244 18.0866 74.1118 18.3125C74.2013 18.5362 74.3323 18.7109 74.5049 18.8366C74.6796 18.9602 74.8937 19.022 75.1473 19.022Z",fill:"black",fillOpacity:"0.8"}),a.createElement("path",{d:"M84.0611 20H83.2301L85.6335 13.4545H86.4517L88.8551 20H88.0241L86.0682 14.4901H86.017L84.0611 20ZM84.3679 17.4432H87.7173V18.1463H84.3679V17.4432ZM91.7989 21.9432C91.4346 21.9432 91.1213 21.8963 90.8593 21.8026C90.5972 21.7109 90.3788 21.5895 90.2041 21.4382C90.0315 21.2891 89.8941 21.1293 89.7918 20.9588L90.3927 20.5369C90.4608 20.6264 90.5471 20.7287 90.6515 20.8438C90.7559 20.9609 90.8987 21.0621 91.0798 21.1474C91.263 21.2347 91.5027 21.2784 91.7989 21.2784C92.1952 21.2784 92.5223 21.1825 92.7801 20.9908C93.0379 20.799 93.1668 20.4986 93.1668 20.0895V19.0923H93.1029C93.0475 19.1818 92.9687 19.2926 92.8664 19.4247C92.7662 19.5547 92.6213 19.6708 92.4317 19.7731C92.2442 19.8732 91.9907 19.9233 91.6711 19.9233C91.2748 19.9233 90.9189 19.8295 90.6036 19.642C90.2904 19.4545 90.0422 19.1818 89.8589 18.8239C89.6778 18.4659 89.5873 18.0312 89.5873 17.5199C89.5873 17.017 89.6757 16.5792 89.8525 16.2063C90.0294 15.8313 90.2755 15.5415 90.5908 15.337C90.9062 15.1303 91.2705 15.027 91.6838 15.027C92.0035 15.027 92.257 15.0803 92.4445 15.1868C92.6341 15.2912 92.779 15.4105 92.8792 15.5447C92.9814 15.6768 93.0603 15.7855 93.1157 15.8707H93.1924V15.0909H93.9211V20.1406C93.9211 20.5625 93.8252 20.9055 93.6334 21.1697C93.4438 21.4361 93.1881 21.631 92.8664 21.7546C92.5468 21.8803 92.191 21.9432 91.7989 21.9432ZM91.7733 19.2457C92.0759 19.2457 92.3316 19.1765 92.5404 19.038C92.7492 18.8995 92.9079 18.7003 93.0166 18.4403C93.1253 18.1804 93.1796 17.8693 93.1796 17.5071C93.1796 17.1534 93.1263 16.8413 93.0198 16.5707C92.9133 16.3001 92.7556 16.0881 92.5468 15.9347C92.338 15.7812 92.0802 15.7045 91.7733 15.7045C91.4537 15.7045 91.1874 15.7855 90.9743 15.9474C90.7634 16.1094 90.6047 16.3267 90.4981 16.5994C90.3937 16.8722 90.3415 17.1747 90.3415 17.5071C90.3415 17.848 90.3948 18.1495 90.5013 18.4116C90.61 18.6715 90.7698 18.8761 90.9807 19.0252C91.1938 19.1722 91.458 19.2457 91.7733 19.2457Z",fill:"black",fillOpacity:"0.8"}),a.createElement("path",{d:"M75.8419 93V88.6364H77.4399C77.7496 88.6364 78.006 88.6875 78.2091 88.7898C78.4122 88.8906 78.5642 89.0277 78.6651 89.201C78.7659 89.3729 78.8163 89.5668 78.8163 89.7827C78.8163 89.9645 78.783 90.1179 78.7162 90.2429C78.6494 90.3665 78.5599 90.4659 78.4477 90.5412C78.3369 90.6151 78.2148 90.669 78.0813 90.7031V90.7457C78.2261 90.7528 78.3675 90.7997 78.5053 90.8864C78.6445 90.9716 78.7595 91.093 78.8504 91.2507C78.9413 91.4084 78.9868 91.6001 78.9868 91.826C78.9868 92.049 78.9342 92.2493 78.8291 92.4268C78.7254 92.603 78.5649 92.7429 78.3476 92.8466C78.1303 92.9489 77.8526 93 77.5145 93H75.8419ZM76.5003 92.4354H77.4506C77.7659 92.4354 77.9918 92.3743 78.1281 92.2521C78.2645 92.13 78.3327 91.9773 78.3327 91.794C78.3327 91.6562 78.2979 91.5298 78.2283 91.4148C78.1587 91.2997 78.0592 91.2081 77.93 91.1399C77.8021 91.0717 77.6501 91.0376 77.474 91.0376H76.5003V92.4354ZM76.5003 90.5241H77.3824C77.5301 90.5241 77.6629 90.4957 77.7808 90.4389C77.9001 90.3821 77.9946 90.3026 78.0642 90.2003C78.1352 90.0966 78.1707 89.9744 78.1707 89.8338C78.1707 89.6534 78.1075 89.5021 77.9811 89.38C77.8547 89.2578 77.6608 89.1967 77.3994 89.1967H76.5003V90.5241ZM81.8197 91.6428V89.7273H82.4589V93H81.8325V92.4332H81.7984C81.7231 92.608 81.6024 92.7536 81.4362 92.87C81.2714 92.9851 81.0662 93.0426 80.8204 93.0426C80.6102 93.0426 80.4241 92.9964 80.2622 92.9041C80.1017 92.8104 79.9752 92.6719 79.8829 92.4886C79.792 92.3054 79.7465 92.0788 79.7465 91.8089V89.7273H80.3836V91.7322C80.3836 91.9553 80.4454 92.1328 80.569 92.2649C80.6926 92.397 80.8531 92.4631 81.0505 92.4631C81.1698 92.4631 81.2885 92.4332 81.4063 92.3736C81.5257 92.3139 81.6244 92.2237 81.7025 92.103C81.7821 91.9822 81.8211 91.8288 81.8197 91.6428ZM84.8726 89.7273V90.2386H83.085V89.7273H84.8726ZM83.5644 88.9432H84.2014V92.0391C84.2014 92.1626 84.2199 92.2557 84.2568 92.3182C84.2938 92.3793 84.3414 92.4212 84.3996 92.4439C84.4593 92.4652 84.5239 92.4759 84.5935 92.4759C84.6446 92.4759 84.6894 92.4723 84.7277 92.4652C84.7661 92.4581 84.7959 92.4524 84.8172 92.4482L84.9323 92.9744C84.8953 92.9886 84.8428 93.0028 84.7746 93.017C84.7064 93.0327 84.6212 93.0412 84.5189 93.0426C84.3513 93.0455 84.195 93.0156 84.0502 92.9531C83.9053 92.8906 83.7881 92.794 83.6986 92.6634C83.6091 92.5327 83.5644 92.3686 83.5644 92.1712V88.9432ZM87.135 89.7273V90.2386H85.3474V89.7273H87.135ZM85.8268 88.9432H86.4639V92.0391C86.4639 92.1626 86.4823 92.2557 86.5193 92.3182C86.5562 92.3793 86.6038 92.4212 86.662 92.4439C86.7217 92.4652 86.7863 92.4759 86.8559 92.4759C86.907 92.4759 86.9518 92.4723 86.9901 92.4652C87.0285 92.4581 87.0583 92.4524 87.0796 92.4482L87.1947 92.9744C87.1578 92.9886 87.1052 93.0028 87.037 93.017C86.9688 93.0327 86.8836 93.0412 86.7813 93.0426C86.6137 93.0455 86.4575 93.0156 86.3126 92.9531C86.1677 92.8906 86.0505 92.794 85.961 92.6634C85.8715 92.5327 85.8268 92.3686 85.8268 92.1712V88.9432ZM89.2131 93.0661C88.9063 93.0661 88.6386 92.9957 88.4099 92.8551C88.1812 92.7145 88.0036 92.5178 87.8772 92.2649C87.7508 92.0121 87.6876 91.7166 87.6876 91.3786C87.6876 91.0391 87.7508 90.7422 87.8772 90.4879C88.0036 90.2337 88.1812 90.0362 88.4099 89.8956C88.6386 89.755 88.9063 89.6847 89.2131 89.6847C89.52 89.6847 89.7877 89.755 90.0164 89.8956C90.2451 90.0362 90.4227 90.2337 90.5491 90.4879C90.6755 90.7422 90.7387 91.0391 90.7387 91.3786C90.7387 91.7166 90.6755 92.0121 90.5491 92.2649C90.4227 92.5178 90.2451 92.7145 90.0164 92.8551C89.7877 92.9957 89.52 93.0661 89.2131 93.0661ZM89.2153 92.5312C89.4141 92.5312 89.5789 92.4787 89.7096 92.3736C89.8403 92.2685 89.9369 92.1286 89.9994 91.9538C90.0633 91.7791 90.0952 91.5866 90.0952 91.3764C90.0952 91.1676 90.0633 90.9759 89.9994 90.8011C89.9369 90.625 89.8403 90.4837 89.7096 90.3771C89.5789 90.2706 89.4141 90.2173 89.2153 90.2173C89.015 90.2173 88.8488 90.2706 88.7167 90.3771C88.586 90.4837 88.4887 90.625 88.4248 90.8011C88.3623 90.9759 88.331 91.1676 88.331 91.3764C88.331 91.5866 88.3623 91.7791 88.4248 91.9538C88.4887 92.1286 88.586 92.2685 88.7167 92.3736C88.8488 92.4787 89.015 92.5312 89.2153 92.5312ZM92.1169 91.0568V93H91.4798V89.7273H92.0913V90.2599H92.1318C92.2071 90.0866 92.325 89.9474 92.4855 89.8423C92.6474 89.7372 92.8513 89.6847 93.097 89.6847C93.32 89.6847 93.5153 89.7315 93.683 89.8253C93.8506 89.9176 93.9805 90.0554 94.0729 90.2386C94.1652 90.4219 94.2114 90.6484 94.2114 90.9183V93H93.5743V90.995C93.5743 90.7578 93.5125 90.5724 93.3889 90.4389C93.2653 90.304 93.0956 90.2365 92.8797 90.2365C92.732 90.2365 92.6006 90.2685 92.4855 90.3324C92.3719 90.3963 92.2817 90.4901 92.2149 90.6136C92.1496 90.7358 92.1169 90.8835 92.1169 91.0568Z",fill:"black",fillOpacity:"0.8"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73 83C71.8954 83 71 83.8954 71 85V97C71 98.1046 71.8954 99 73 99H97C98.1046 99 99 98.1046 99 97V85C99 83.8954 98.1046 83 97 83H73ZM70 85C70 83.3431 71.3431 82 73 82H97C98.6569 82 100 83.3431 100 85V97C100 98.6569 98.6569 100 97 100H73C71.3431 100 70 98.6569 70 97V85Z",fill:"black",fillOpacity:"0.8"}),a.createElement("path",{d:"M58 82H34C32.3431 82 31 83.3431 31 85V97C31 98.6569 32.3431 100 34 100H58C59.6569 100 61 98.6569 61 97V85C61 83.3431 59.6569 82 58 82Z",fill:"#56CCF2",fillOpacity:"0.8"}),a.createElement("path",{d:"M36.7669 93V88.6364H38.3649C38.6746 88.6364 38.931 88.6875 39.1341 88.7898C39.3372 88.8906 39.4892 89.0277 39.5901 89.201C39.6909 89.3729 39.7413 89.5668 39.7413 89.7827C39.7413 89.9645 39.708 90.1179 39.6412 90.2429C39.5744 90.3665 39.4849 90.4659 39.3727 90.5412C39.2619 90.6151 39.1398 90.669 39.0063 90.7031V90.7457C39.1511 90.7528 39.2925 90.7997 39.4303 90.8864C39.5695 90.9716 39.6845 91.093 39.7754 91.2507C39.8663 91.4084 39.9118 91.6001 39.9118 91.826C39.9118 92.049 39.8592 92.2493 39.7541 92.4268C39.6504 92.603 39.4899 92.7429 39.2726 92.8466C39.0553 92.9489 38.7776 93 38.4395 93H36.7669ZM37.4253 92.4354H38.3756C38.6909 92.4354 38.9168 92.3743 39.0531 92.2521C39.1895 92.13 39.2577 91.9773 39.2577 91.794C39.2577 91.6562 39.2229 91.5298 39.1533 91.4148C39.0837 91.2997 38.9842 91.2081 38.855 91.1399C38.7271 91.0717 38.5751 91.0376 38.399 91.0376H37.4253V92.4354ZM37.4253 90.5241H38.3074C38.4551 90.5241 38.5879 90.4957 38.7058 90.4389C38.8251 90.3821 38.9196 90.3026 38.9892 90.2003C39.0602 90.0966 39.0957 89.9744 39.0957 89.8338C39.0957 89.6534 39.0325 89.5021 38.9061 89.38C38.7797 89.2578 38.5858 89.1967 38.3244 89.1967H37.4253V90.5241ZM42.7747 91.6428V89.7273H43.4139V93H42.7875V92.4332H42.7534C42.6781 92.608 42.5574 92.7536 42.3912 92.87C42.2264 92.9851 42.0212 93.0426 41.7754 93.0426C41.5652 93.0426 41.3791 92.9964 41.2172 92.9041C41.0567 92.8104 40.9302 92.6719 40.8379 92.4886C40.747 92.3054 40.7015 92.0788 40.7015 91.8089V89.7273H41.3386V91.7322C41.3386 91.9553 41.4004 92.1328 41.524 92.2649C41.6476 92.397 41.8081 92.4631 42.0055 92.4631C42.1248 92.4631 42.2435 92.4332 42.3613 92.3736C42.4807 92.3139 42.5794 92.2237 42.6575 92.103C42.7371 91.9822 42.7761 91.8288 42.7747 91.6428ZM45.8576 89.7273V90.2386H44.07V89.7273H45.8576ZM44.5494 88.9432H45.1864V92.0391C45.1864 92.1626 45.2049 92.2557 45.2418 92.3182C45.2788 92.3793 45.3264 92.4212 45.3846 92.4439C45.4443 92.4652 45.5089 92.4759 45.5785 92.4759C45.6296 92.4759 45.6744 92.4723 45.7127 92.4652C45.7511 92.4581 45.7809 92.4524 45.8022 92.4482L45.9173 92.9744C45.8803 92.9886 45.8278 93.0028 45.7596 93.017C45.6914 93.0327 45.6062 93.0412 45.5039 93.0426C45.3363 93.0455 45.18 93.0156 45.0352 92.9531C44.8903 92.8906 44.7731 92.794 44.6836 92.6634C44.5941 92.5327 44.5494 92.3686 44.5494 92.1712V88.9432ZM48.15 89.7273V90.2386H46.3624V89.7273H48.15ZM46.8418 88.9432H47.4789V92.0391C47.4789 92.1626 47.4973 92.2557 47.5343 92.3182C47.5712 92.3793 47.6188 92.4212 47.677 92.4439C47.7367 92.4652 47.8013 92.4759 47.8709 92.4759C47.922 92.4759 47.9668 92.4723 48.0051 92.4652C48.0435 92.4581 48.0733 92.4524 48.0946 92.4482L48.2097 92.9744C48.1728 92.9886 48.1202 93.0028 48.052 93.017C47.9838 93.0327 47.8986 93.0412 47.7963 93.0426C47.6287 93.0455 47.4725 93.0156 47.3276 92.9531C47.1827 92.8906 47.0655 92.794 46.976 92.6634C46.8865 92.5327 46.8418 92.3686 46.8418 92.1712V88.9432ZM50.2581 93.0661C49.9513 93.0661 49.6836 92.9957 49.4549 92.8551C49.2262 92.7145 49.0486 92.5178 48.9222 92.2649C48.7958 92.0121 48.7326 91.7166 48.7326 91.3786C48.7326 91.0391 48.7958 90.7422 48.9222 90.4879C49.0486 90.2337 49.2262 90.0362 49.4549 89.8956C49.6836 89.755 49.9513 89.6847 50.2581 89.6847C50.565 89.6847 50.8327 89.755 51.0614 89.8956C51.2901 90.0362 51.4677 90.2337 51.5941 90.4879C51.7205 90.7422 51.7837 91.0391 51.7837 91.3786C51.7837 91.7166 51.7205 92.0121 51.5941 92.2649C51.4677 92.5178 51.2901 92.7145 51.0614 92.8551C50.8327 92.9957 50.565 93.0661 50.2581 93.0661ZM50.2603 92.5312C50.4591 92.5312 50.6239 92.4787 50.7546 92.3736C50.8853 92.2685 50.9819 92.1286 51.0444 91.9538C51.1083 91.7791 51.1402 91.5866 51.1402 91.3764C51.1402 91.1676 51.1083 90.9759 51.0444 90.8011C50.9819 90.625 50.8853 90.4837 50.7546 90.3771C50.6239 90.2706 50.4591 90.2173 50.2603 90.2173C50.06 90.2173 49.8938 90.2706 49.7617 90.3771C49.631 90.4837 49.5337 90.625 49.4698 90.8011C49.4073 90.9759 49.376 91.1676 49.376 91.3764C49.376 91.5866 49.4073 91.7791 49.4698 91.9538C49.5337 92.1286 49.631 92.2685 49.7617 92.3736C49.8938 92.4787 50.06 92.5312 50.2603 92.5312ZM53.1919 91.0568V93H52.5548V89.7273H53.1663V90.2599H53.2068C53.2821 90.0866 53.4 89.9474 53.5605 89.8423C53.7224 89.7372 53.9263 89.6847 54.172 89.6847C54.395 89.6847 54.5903 89.7315 54.758 89.8253C54.9256 89.9176 55.0555 90.0554 55.1479 90.2386C55.2402 90.4219 55.2864 90.6484 55.2864 90.9183V93H54.6493V90.995C54.6493 90.7578 54.5875 90.5724 54.4639 90.4389C54.3403 90.304 54.1706 90.2365 53.9547 90.2365C53.807 90.2365 53.6756 90.2685 53.5605 90.3324C53.4469 90.3963 53.3567 90.4901 53.2899 90.6136C53.2246 90.7358 53.1919 90.8835 53.1919 91.0568Z",fill:"white"}),a.createElement("mask",{id:"mask0_1_30",style:{maskType:"luminance"},maskUnits:"userSpaceOnUse",x:"20",y:"121",width:"107",height:"22"},a.createElement("path",{d:"M126.001 121H20.5566V143H126.001V121Z",fill:"white"})),a.createElement("g",{mask:"url(#mask0_1_30)",className:"oss_sales_upsell_modal--graphicLine--6Z-mU"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M73 143V121H74V143H73Z"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M40.5566 121.477L20.5566 143L19.8759 142.267L39.8759 120.745L40.5566 121.477Z"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M126 142.523L106 121L106.681 120.267L126.681 141.79L126 142.523Z"})))}let lh=[{key:1,elem:(0,x.tx)("oss_sales_upsell_overlay.feature1")},{key:2,elem:(0,x.tx)("oss_sales_upsell_overlay.feature2")},{key:3,elem:(0,x.tx)("oss_sales_upsell_overlay.feature3")}],lE=(0,lg.Ju)(function({onDismiss:e}){let t=(0,v.md)(el.yV),n=(0,s.wA)();return a.createElement(tz.Rw,{isLoading:!t?.teamId,confirmationTitle:(0,x.tx)("oss_sales_upsell_overlay.title"),titleClass:"oss_sales_upsell_modal--title--wpaS5",confirmText:(0,x.tx)("oss_sales_upsell_overlay.primary_cta"),cancelText:(0,x.tx)("oss_sales_upsell_overlay.secondary_cta"),onConfirm:()=>{if(!t?.teamId)return;let e=ex.b.LIBRARY_DUPLICATE_OSS_SALES_UPSELL;n((0,eb.to)({type:ey.V,data:{upsellSource:e,teamId:t.teamId,isProCurrent:!0,overrideHighlightedPlan:"none",openCheckoutInNewTab:!0}}))},onCancel:()=>{n((0,eb.to)({type:l_.lk,data:{source:l_.B7.LIBRARY_DUPLICATE_OSS_SALES_UPSELL,overridePlaceholderText:(0,x.t)("oss_sales_upsell_overlay.contact_sales_form.text_placeholder")}}))},onCloseButtonClick:e,className:"oss_sales_upsell_modal--modal--fdI6U",overrideOnHide:e,hideOnConfirm:!1,hideOnCancel:!1,autoFocusCta:!1},a.createElement("div",{className:S.cx.lh24.font13.pt24.pr0.pb32.pl0.$},a.createElement(lp.Y,{spacing:"40px"},a.createElement(lp.Y,{direction:"vertical",spacing:"12px"},a.createElement("p",null,(0,x.tx)("oss_sales_upsell_overlay.body1")),a.createElement(lp.Y,{direction:"vertical",spacing:8},a.createElement("p",{className:S.cx.fontSemiBold.$},(0,x.tx)("oss_sales_upsell_overlay.body2")),a.createElement(lp.Y,{direction:"vertical",spacing:8},lh.map(e=>a.createElement(lp.Y,{key:e.key,spacing:8,horizontalAlignItems:"start"},a.createElement("p",null,"\u2713"),a.createElement("p",null,e.elem))))),a.createElement("p",{className:S.cx.pt4.$},(0,x.tx)("oss_sales_upsell_overlay.body3"))),a.createElement("div",{className:S.cx.mr16.$},a.createElement(lf,null)))),a.createElement("div",{className:S.cx.bt1.colorBorder.bSolid.$}))},"OssSalesUpsellModal");function ly(){let e=(0,v.md)(el.As),t=(0,v.md)(el.ze);return e&&t?a.createElement(lb,{teamId:e,fileKey:t}):null}function lb({teamId:e,fileKey:t}){let n=(0,s.wA)(),i=(0,v.md)(eT.M$),l=(0,aa.Rs)(al.TNJ,{id:e}),o=(0,u.e)({overlay:g.jRE,priority:m.N.DEFAULT_MODAL},[i,l]),c=r.tl().user_data,d=c?.email,p=(0,lu.HS)(d);return(0,tg.h)(()=>{o.show({canShow:(e,n)=>!!(p&&(0,lm.nN)(t)&&!e&&n.team?.hasPermission)})}),(0,a.useEffect)(()=>{o.isShowing&&(0,lm.wj)()},[p,o.isShowing]),a.createElement(ez.h,{isShowing:o.isShowing,modalType:eY.q3.FEATURE_UPDATE,element:function(e){return(0,tg.h)(()=>{n((0,eb.to)({type:lE,data:{onDismiss:e.dismissModal}}))}),a.createElement("div",null)},trackingContextName:"oss_sales_upsell_overlay",onClickPrimaryCta:t4.lQ,onClose:o.complete,onManualDismiss:o.complete,testId:"oss_sales_upsell_overlay_test_id"})}var lv=n(862442),lC=n(433861);function lw(){let{show:e,isShowing:t,complete:n,uniqueId:r}=(0,u.e)({overlay:g.Q8d,priority:m.N.DEFAULT_MODAL}),i=!!(0,ed.f)("seen_pinned_comments_education_callout"),l=!!(0,ed.f)("has_toggled_comment_pin"),o=(0,el.q5)(),s=(0,tS.TA)(),c=a.useContext(lC.kw),d=(0,lv.Z)();return((0,ew.E)(r,"Context Viewed",t=>{t.properties?.name==="Editor > Pin comment icon"&&e({canShow:()=>!i&&o?.creatorId===s&&!l,onShow:()=>{let{offsetX:e,offsetY:t,zoomScale:n}=c.getViewportInfo();d({centerX:e,centerY:t-72/n,scale:n})}})}),t)?a.createElement("div",{onClick:()=>{n()},role:"button",tabIndex:0},a.createElement(eM.rq,{userFlagOnShow:"seen_pinned_comments_education_callout",description:a.createElement("div",{className:S.cx.alignCenter.$},(0,x.tx)("comments.pinning.pinned_comments_always_show_up_first_great_for_a_project_intro_or_important_info")),onClose:()=>n(),trackingContextName:"Pinned Comments Creator Education Callout",targetKey:"pin-comment-icon",isShowing:t,arrowPosition:nv.F_.BOTTOM,width:320,disableHighlight:!0,emphasized:!0,hideCloseButton:!0,pointerOffsetOverride:196,zIndex:eO.R.UNSET,onTargetLost:()=>n()})):null}function lT(){let{show:e,isShowing:t,complete:n,uniqueId:r}=(0,u.e)({overlay:g.S$N,priority:m.N.DEFAULT_MODAL}),i=(0,s.wA)(),l=!!(0,ed.f)("seen_pinned_comments_navigation_callout"),o=(0,el.q5)(),d=(0,tS.TA)(),p=t&&!l;a.useEffect(()=>{p&&i(c.b({seen_pinned_comments_navigation_callout:!0}))},[i,p]);let _=a.useContext(lC.kw),f=(0,lv.Z)();return((0,ew.E)(r,"Context Viewed",a=>{a.properties?.name==="Editor > Pin comment icon"&&(t&&l&&a.properties?.isPinned&&n(),e({canShow:()=>!l&&o?.creatorId!==d&&!!a.properties?.isPinned,onShow:()=>{let{offsetX:e,offsetY:t,zoomScale:n}=_.getViewportInfo();f({centerX:e,centerY:t-72/n,scale:n})}}))}),t)?a.createElement("div",{onClick:()=>{n()},role:"button",tabIndex:0},a.createElement(eM.rq,{userFlagOnShow:"seen_pinned_comments_education_callout",description:a.createElement("div",{className:S.cx.justifyCenter.alignCenter.$},(0,x.tx)("comments.pinning.feedback_giver_callout")),onClose:()=>n(),trackingContextName:"Pinned Comments Feedback Giver Education Callout",targetKey:"thread-header-left-section",isShowing:t,arrowPosition:nv.F_.BOTTOM,width:320,disableHighlight:!0,emphasized:!0,hideCloseButton:!0,pointToLeftEdge:!0,pointerOffsetOverride:20,zIndex:eO.R.UNSET,onTargetLost:()=>n()})):null}var lS=n(384303),lx=n(963067),lk=n(212957),lN=n(507956),lI=n(258751),lA=n(787523),lO=n(428467),lL=n(338400),lD=n(442617),lR=n(611047),lM=n(66154);let lP=lR.qv.AUDIO,lF=lR.qQ.getOnboardingStepTriggerEventId(lP),lB=lR.qQ.getOnboardingStepUserFlag(lP),lU=(0,eS.r1)(lB);function lG(e){let t=(0,v.md)(lU),{show:n,isShowing:r,complete:i,uniqueId:l}=(0,u.e)({overlay:g.U3h,priority:m.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),o=(0,s.wA)(),p=(0,s.d4)(e=>e.openFile?.key&&!!e.voice.activeCall[e.openFile.key]),f=(0,s.d4)(e=>{let{allUsers:t,deviceNameFilter:n}=e.multiplayer;return new Set(t.filter(e=>e.deviceName===n).map(e=>e.userID)).size}),h=(0,a.useCallback)(()=>o(c.b({[lB]:!0})),[o]);return(0,ew.E)(l,[aL.M8],(0,a.useCallback)(()=>{f<2||p||n({canShow:e=>!e,onShow:h})},[n,h,p,f])),(0,ew.E)(l,[lF],(0,a.useCallback)(()=>{n({onBlocked:e=>lR.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,lP)})},[n])),a.createElement(_.M,{isShowing:r},a.createElement(d.fu,{name:lk.S.getTooltipTrackingContext(lP),properties:lk.S.getTrackingProperties()},a.createElement(lM.Mi,{dismissModal:i})))}let lK=lR.qv.COMPONENT_PUBLISHING,lV=lR.qQ.getOnboardingStepTriggerEventId(lK),lH=lR.qQ.getOnboardingStepUserFlag(lK),lz=(0,eS.r1)(lH);function lW(e){let t=(0,v.md)(lz),{show:n,isShowing:r,complete:i,uniqueId:l}=(0,u.e)({overlay:g.K_4,priority:m.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),o=(0,s.wA)(),p=(0,a.useCallback)(()=>o(c.b({[lH]:!0})),[o]);return(0,ew.E)(l,["action_create_symbol"],(0,a.useCallback)(()=>{n({onShow:p,canShow:e=>!e})},[n,p])),(0,ew.E)(l,[lV],(0,a.useCallback)(()=>{n({onBlocked:e=>lR.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,lK)})},[n])),a.createElement(_.M,{isShowing:r},a.createElement(d.fu,{name:lk.S.getTooltipTrackingContext(lK),properties:lk.S.getTrackingProperties()},a.createElement(lM.Ec,{dismissModal:i})))}var lj=n(707465);let l$=lR.qv.OPEN_SESSIONS,lq=lR.qQ.getOnboardingStepTriggerEventId(l$),lY=lR.qQ.getOnboardingStepUserFlag(l$),lX=(0,eS.r1)(lY);function lJ(e){let t=(0,v.md)(lX),n=(0,el.tS)(),{show:r,isShowing:i,complete:l,uniqueId:o}=(0,u.e)({overlay:g.bJw,priority:m.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),p=(0,s.wA)(),f=(0,s.d4)(e=>(0,lj.zg)(e.selectedView)),h=(0,s.d4)(e=>e.modalShown?.type===at.g_.type),E=(0,aC.ZC)(h),y=(0,a.useCallback)(()=>p(c.b({[lY]:!0})),[p]);return(0,ew.E)(o,["multiplayer_toolbar_share_button"],(0,a.useCallback)(()=>{f||r({onShow:y,canShow:e=>!e})},[r,y,f])),(0,ew.E)(o,[lq],(0,a.useCallback)(()=>{n&&r({onShow:()=>p((0,eb.to)({type:at.g_,data:{fileKey:n,source:ae.nk.expProTrialsV3CardStackWidget}})),onBlocked:e=>lR.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,l$)})},[n,r,p])),a.useEffect(()=>{!h&&E&&l()},[l,h,E]),a.createElement(_.M,{isShowing:i},a.createElement(d.fu,{name:lk.S.getTooltipTrackingContext(l$),properties:lk.S.getTrackingProperties()},a.createElement(lM.Nm,{dismissModal:l})))}let lZ=lR.qv.PASSWORD_PROTECTION,lQ=lR.qQ.getOnboardingStepTriggerEventId(lZ),l0=lR.qQ.getOnboardingStepUserFlag(lZ),l1=lR.qQ.getOnboardingStepUserFlag(lR.qv.OPEN_SESSIONS),l2=(0,eS.r1)(l0),l5=(0,eS.r1)(l1);function l3(e){let t=(0,v.md)(l2),n=(0,v.md)(l5),{show:r,isShowing:i,complete:l,uniqueId:o}=(0,u.e)({overlay:g.GUu,priority:m.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t,n]),p=(0,s.wA)(),f=(0,el.tS)(),h=(0,s.d4)(e=>(0,ai.XE)(e.selectedView)===nt.nT.Whiteboard),E=(0,s.d4)(e=>(0,lj.zg)(e.selectedView)),y=(0,s.d4)(e=>e.modalShown?.type===at.g_.type),b=(0,aC.ZC)(y),C=(0,a.useCallback)(()=>p(c.b({[l0]:!0})),[p]);return(0,ew.E)(o,["multiplayer_toolbar_share_button"],(0,a.useCallback)(()=>{E||r({onShow:C,canShow:(e,t)=>!e&&(!h||!!t)})},[r,C,h,E])),(0,ew.E)(o,[lQ],(0,a.useCallback)(()=>{f&&r({onShow:()=>p((0,eb.to)({type:at.g_,data:{fileKey:f,source:ae.nk.expProTrialsV3CardStackWidget}})),onBlocked:e=>lR.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,lZ)})},[f,r,p])),a.useEffect(()=>{!y&&b&&l()},[l,y,b]),a.createElement(_.M,{isShowing:i},a.createElement(d.fu,{name:lk.S.getTooltipTrackingContext(lZ),properties:lk.S.getTrackingProperties()},a.createElement(lM._G,{dismissModal:l})))}let l4=lR.qv.UNLIMITED_PAGES,l6=lR.qQ.getOnboardingStepTriggerEventId(l4),l8=lR.qQ.getOnboardingStepUserFlag(l4),l7=(0,eS.r1)(l8);function l9(e){let t=(0,v.md)(l7),{show:n,isShowing:r,complete:i,uniqueId:l}=(0,u.e)({overlay:g.fR0,priority:m.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),o=(0,s.wA)(),p=(0,a.useCallback)(()=>o(c.b({[l8]:!0})),[o]);return(0,tg.h)(()=>{n({onShow:p,canShow:e=>!e})}),(0,ew.E)(l,[l6],(0,a.useCallback)(()=>{n({onBlocked:e=>lR.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,l4)})},[n])),a.createElement(_.M,{isShowing:r},a.createElement(d.fu,{name:lk.S.getTooltipTrackingContext(l4),properties:lk.S.getTrackingProperties()},a.createElement(lM.BI,{dismissModal:i})))}var oe=n(738269),ot=n(157147),on=n(485861);let oa=lR.qv.VIDEO,or=lR.qQ.getOnboardingStepTriggerEventId(oa),oi=lR.qQ.getOnboardingStepUserFlag(oa),ol=(0,eS.r1)(oi);function oo(e){let t=(0,v.md)(ol),{show:n,isShowing:r,complete:i,uniqueId:l}=(0,u.e)({overlay:g.juT,priority:m.N.OVERRIDING_MODAL,experiment:e.experimentCheck?{check:e.experimentCheck,predicate:e=>e,postCheck:()=>!0}:void 0},[t]),o=(0,s.wA)(),p=(0,s.d4)(e=>e.dropdownShown?.type==="flyout-dropdown-shape-flyout"),f=(0,aC.ZC)(p),h=(0,a.useCallback)(()=>o(c.b({[oi]:!0})),[o]);return(0,a.useEffect)(()=>{p&&n({onShow:h,canShow:e=>!e})},[n,h,p]),(0,ew.E)(l,[or],(0,a.useCallback)(()=>{let e=(0,on.xT)("shape-flyout");e&&n({onShow:()=>o(oe.j7({type:"flyout-dropdown-shape-flyout",data:{items:ot.yY.children,targetRect:e.getBoundingClientRect()}})),onBlocked:e=>lR.qQ.trackActivelyTriggeredOnboardingStepBlocked(e,oa)})},[n,o])),a.useEffect(()=>{f&&!p&&r&&i()},[f,p,i,r]),a.createElement(_.M,{isShowing:r},a.createElement(d.fu,{name:lk.S.getTooltipTrackingContext(oa),properties:lk.S.getTrackingProperties()},a.createElement(lM.Lz,{dismissModal:i})))}let os="seen_pro_onboarding_variables_overlay",oc=(0,eS.r1)(os);function od(){let e=(0,v.md)(oc),t=(0,ev.kO)(),{show:n,isShowing:r,complete:i}=(0,u.e)({overlay:g.wwW,priority:m.N.DEFAULT_MODAL,experiment:{check:t,predicate:e=>e,postCheck:e=>!e}},[e]);return(0,tg.h)(()=>{n()}),a.createElement(_.M,{isShowing:r,userFlagOnShow:os},a.createElement(d.fu,{name:lk.S.getTooltipTrackingContext("Variables"),properties:lk.S.getTrackingProperties()},a.createElement(lM.rQ,{dismissModal:i})))}let ou="seen_pro_onboarding_voting_overlay",om=(0,eS.r1)(ou);function op(){let e=(0,v.md)(om),t=(0,ev.kO)(),{show:n,isShowing:r,complete:i,uniqueId:l}=(0,u.e)({overlay:g.oyU,priority:m.N.DEFAULT_MODAL,experiment:{check:t,predicate:e=>e,postCheck:e=>!e}},[e]),o=(0,s.d4)(e=>!!e.modalShown),c=(0,s.d4)(e=>{let{allUsers:t,deviceNameFilter:n}=e.multiplayer;return new Set(t.filter(e=>e.deviceName===n).map(e=>e.userID)).size});return(0,ew.E)(l,[aL.M8],(0,a.useCallback)(()=>{o||c<2||n()},[n,o,c])),a.createElement(_.M,{isShowing:r,userFlagOnShow:ou},a.createElement(d.fu,{name:lk.S.getTooltipTrackingContext("Voting"),properties:lk.S.getTrackingProperties()},a.createElement(lM.lj,{dismissModal:i})))}function o_(e){let{teamId:t,isDesignEditor:n,isFigJamEditor:r}=e,i=function(){let e=(0,v.md)(lI.P),t=(0,lN.ks)(),n=(0,eU.p8)("showUi"),a=(0,eU.aV)(),r=(0,el.q5)(),i=(0,s.d4)(e=>e.selectedView),l=(0,s.d4)(e=>e.userFlags),o=(0,s.d4)(e=>e.notifications.length>0);return!!r&&!!r.editorType&&!!r.canEdit&&lk.S.canSeeOnboardingInFile({editorType:r.editorType,selectedView:i,showStarterKit:e!==lA.iH.FALSE,userFlags:l,hasNotifications:o,isDevHandoffView:t,isAppUiShown:n,isLoading:a})}(),l=(0,el.q5)(),o=(0,s.d4)(e=>e.teams[t])||null,c=(0,lx.yy)()||null,d=l?.editorType||null,u=(0,s.d4)(e=>(0,lO.canEditTeam)(t,e)),m=(0,lL.Lk)(),p=(0,lD.M_)({team:o,org:c,editorType:d}),_=(0,ev.kO)();return i&&o&&o.pro_team&&u?a.createElement("div",{"data-testid":"proOnboardingOverlayWrapper"},a.createElement(l3,{experimentCheck:_}),m&&a.createElement(lG,{experimentCheck:_}),n&&a.createElement(lW,{experimentCheck:_}),n&&a.createElement(l9,{experimentCheck:_}),n&&a.createElement(oo,{experimentCheck:_}),r&&p&&a.createElement(lJ,{experimentCheck:_}),r&&a.createElement(op,null),n&&a.createElement(od,null)):null}var og=n(498270);function of(e){let{teamId:t,isDesignEditor:n,isFigJamEditor:r}=e,i=(0,og.i)(t),l=(0,el.q5)(),o=(0,s.d4)(e=>e.teams[t])||null,c=(0,lx.yy)()||null,d=l?.editorType||null,u=(0,lL.Lk)(),m=(0,lD.M_)({team:o,org:c,editorType:d});return i?a.createElement("div",{"data-testid":"proTrialsV3EditorOverlayWrapper"},a.createElement(l3,null),u&&a.createElement(lG,null),n&&a.createElement(lW,null),n&&a.createElement(l9,null),n&&a.createElement(oo,null),r&&m&&a.createElement(lJ,null)):null}var oh=n(373119),oE=n(279994),oy=n(520177),ob=n(5231),ov=n(275596);let oC="seen_figjam_section_preset_picker_callout",ow=(0,eS.Fu)(oC),oT=e=>(0,s.d4)(t=>{if(!e)return!1;let n=Object.keys(t.mirror.sceneGraphSelection);return 1===n.length&&n[0]===e});function oS({sectionNodeId:e,isShowing:t,complete:n}){let r=(0,L._X)({subscribeToUpdates_expensive:!0}),i=U.q.instance.get(e);if(!i)return null;let l=i.sectionPresetPickerCalloutPosition;if(isNaN(l.x)||isNaN(l.y))return null;let o=(0,L.Z0)(r,l,!0),s=parseFloat(ov._1),c={top:o.y+r.y+s+2,left:o.x+r.x-150,pointerOffset:150-s,pointerPosition:nv.F_.TOP};return a.createElement(eM.rq,{isShowing:t,userFlagOnShow:oC,fixedPosition:!0,location:c,onClose:n,clickOutsideToHide:!0,trackingContextName:"section_preset_picker_callout",title:(0,x.tx)("whiteboard.section_presets_onboarding.picker_callout.title"),description:(0,x.tx)("whiteboard.section_presets_onboarding.picker_callout.description"),primaryCta:{label:(0,x.tx)("rcs.got_it"),type:"button",onClick:n,ctaTrackingDescriptor:eC.c.GOT_IT},width:300})}function ox(){let e=(0,oh.q)(),t=(0,v.md)(oy.w),n=(0,v.md)(ob.m5),r=(0,v.md)(ow),i=(0,a.useRef)({numShown:0,hasLoggedToSentry:!1}),[l,o]=(0,a.useState)(null),s=oT(l),{show:c,isShowing:d,complete:p}=(0,u.e)({overlay:g.Byv,priority:m.N.DEFAULT_MODAL},[n,r]);return((0,a.useEffect)(()=>{t&&l&&s&&e&&c({canShow:(e,t)=>!!e&&!t})},[c,e,t,l,s]),(0,a.useEffect)(()=>{if("loaded"===r.status&&!r.data&&"loaded"===n.status&&n.data)return(0,oE.H)(function(e){o(e)})},[r,n]),(0,a.useEffect)(()=>{d&&i.current.numShown++,i.current.numShown>1&&!i.current.hasLoggedToSentry&&(i.current.hasLoggedToSentry=!0,(0,rS.x1)("SectionPresetPickerCallout","Callout shown more than once, this should not happen. Please investigate.",void 0,{reportAsSentryError:!0}))},[d]),d&&l)?a.createElement(oS,{sectionNodeId:l,isShowing:d,complete:p}):null}function ok({isShowing:e,onPrimaryCtaClick:t,onClose:n}){return a.createElement(eM.rq,{testId:"share-to-google-classroom-onboarding",isShowing:e,trackingContextName:"Share to Google Classroom Onboarding",targetKey:"share",title:(0,x.tx)("whiteboard.google_classroom.onboarding.header"),description:(0,x.tx)("whiteboard.google_classroom.onboarding.body"),media:a.createElement(eI.y,{src:"https://static.figma.com/uploads/90c10991400b728428a200de3b347bba3f6d1d1e",alt:(0,x.t)("whiteboard.google_classroom.onboarding.image_alt"),aspectRatio:300/169}),primaryCta:{label:(0,x.tx)("whiteboard.google_classroom.onboarding.show_me"),type:"button",onClick:t,ctaTrackingDescriptor:eC.c.SHOW_ME},onClose:n})}function oN(){let e=(0,s.wA)(),t=ao({}),n=(0,v.md)(au),r=(0,v.md)(ap),i=(0,v.md)(a_),l=(0,v.md)(ag),o=(0,v.md)(an.Ij),{show:d,isShowing:p,complete:_}=(0,u.e)({overlay:g.Y2_,priority:m.N.DEFAULT_MODAL},[r,n,i,l,t]);a.useEffect(()=>{d({onShow:()=>{e(c.b({[ad]:!0}))},canShow:(e,t,n,a,r)=>!e&&!t&&!n&&a&&r})},[t,e,d]),a.useEffect(()=>{r.data&&_()},[r,_]);let{currentStep:f,next:h}=(0,eG.A)({numSteps:2,onComplete:_}),E=function({isShowing:e,next:t,complete:n}){let r=(0,s.wA)(),i=(0,el.q5)();return[a.createElement(ok,{key:"share-to-google-classroom-existing-user-callout",onPrimaryCtaClick:()=>{if(!i){n();return}r((0,eb.to)({type:at.g_,data:{fileKey:i.key,source:ae.nk.shareToGoogleClassroomOnboarding}})),t()},onClose:n,isShowing:e}),a.createElement(ac,{key:"share-to-google-classroom-share-option-pointer",isShowing:e,onClose:n})]}({isShowing:p,next:h,complete:_});return a.useEffect(()=>{o&&p&&0===f&&h()},[f,p,o,h]),a.createElement(eH.U,{currentStep:f,isShowing:p,children:E})}var oI=n(147723);let oA=240/135,oO=m.N.HIGH_PRIORITY_MODAL+3,oL="seen_exit_ui3_ai_help_callout";function oD(){let{show:e,isShowing:t,complete:n,uniqueId:r}=(0,u.e)({overlay:g.Pke,priority:oO}),i=!!(0,ed.f)(oL);return(0,ew.E)(r,oI.p,()=>{e({canShow:()=>!i})}),a.createElement(eM.rq,{userFlagOnShow:oL,description:a.createElement("div",{className:S.cx.pr8.$},a.createElement("div",{className:S.cx.colorTextTooltip.textBodyMediumStrong.$},(0,x.tx)("ui3_and_ai_callouts.exit_ui3_ai.title")),a.createElement("div",{className:S.cx.colorTextTooltipSecondary.$},(0,x.tx)("ui3_and_ai_callouts.exit_ui3_ai.description"))),onClose:()=>n(),trackingContextName:"Exit UI3 AI Help Callout",targetKey:eq.J_,isShowing:t,arrowPosition:nv.F_.BOTTOM,disableHighlight:!0,hideCloseButton:!0,onTargetLost:()=>n(),testId:"exitUi3HelpCallout",isTooltip:!0})}let oR="seen_exit_ui3_help_callout";function oM(){let{show:e,isShowing:t,complete:n,uniqueId:r}=(0,u.e)({overlay:g.$lu,priority:oO}),i=!!(0,ed.f)(oR);return(0,ew.E)(r,oI.e7,()=>{e({canShow:()=>!i})}),a.createElement(eM.rq,{userFlagOnShow:oR,description:a.createElement("div",{className:S.cx.pr8.$},a.createElement("div",{className:S.cx.colorTextTooltip.textBodyMediumStrong.$},(0,x.tx)("ui3_and_ai_callouts.exit_ui3.title")),a.createElement("div",{className:S.cx.colorTextTooltipSecondary.$},(0,x.tx)("ui3_and_ai_callouts.exit_ui3.description",{back_to_old_design_option:a.createElement("div",{className:S.cx.textBodyMediumStrong.$},(0,x.tx)("ui3_and_ai_callouts.exit_ui3.back_to_old_design_option"))}))),onClose:()=>n(),trackingContextName:"Exit UI3 Help Callout",targetKey:eq.J_,isShowing:t,arrowPosition:nv.F_.BOTTOM,disableHighlight:!0,hideCloseButton:!0,onTargetLost:()=>n(),testId:"exitUi3HelpCallout",isTooltip:!0})}var oP=n(256975),oF=n(964881),oB=n(69961),oU=n(734938),oG=n(239737),oK=n(179283),oV=n(700886),oH=n(384775);function oz(e,t){(0,tg.h)(()=>{e(c.b({[t]:!0}))})}let oW=a.createElement(oV.Jm,{src:"https://static.figma.com/uploads/b89b812ff4935b239f91bd78df370ad6dd947e0b",aspectRatio:oA,width:240});function oj({onClose:e,isShowing:t,onTargetLost:n}){return oz((0,s.wA)(),oI.jx),a.createElement(eM.rq,{isShowing:t,targetKey:oI.Ij,trackingContextName:"UI3/AI Onboarding > AI",onClose:e,arrowPosition:nv.F_.BOTTOM,title:(0,x.tx)("ui3_and_ai_tour.ai_callout.title"),description:(0,x.tx)("ui3_and_ai_tour.ai_callout.description"),media:oW,primaryCta:{type:"button",label:(0,x.tx)("ui3_and_ai_tour.ai_callout.show_me"),onClick:()=>{(0,oH.$I)({trackingData:{source:"onboarding_ai_callout_component"}}),e()},ctaTrackingDescriptor:eC.c.SHOW_ME},secondaryCta:{type:"link",label:(0,x.tx)("ui3_and_ai_tour.ai_callout.playground_link"),href:"https://www.figma.com/community/file/1375505114072192161",ctaTrackingDescriptor:eC.c.AI_PLAYGROUND},testId:oI.T4,highlightBlue:!0,onTargetLost:n})}var o$=n(260906),oq=n(511617),oY=n(748324),oX=n(36816),oJ=n(279145);let oZ=a.createElement(oV.Jm,{src:"https://static.figma.com/uploads/b89b812ff4935b239f91bd78df370ad6dd947e0b",aspectRatio:oA,width:240});function oQ({primaryCta:e,onClose:t,isShowing:n,stepNum:r,totalNumSteps:i,onTargetLost:l}){let o=(0,s.wA)();return oz(o,oI.jx),oz(o,oI.pN),a.createElement(eM.rq,{isShowing:n,testId:oI.T2,targetKey:oI.Ij,trackingContextName:"UI3/AI Onboarding > Toolbar with AI",onClose:t,arrowPosition:nv.F_.BOTTOM,title:(0,x.tx)("ui3_and_ai_tour.toolbar_with_ai.title"),description:a.createElement("span",{className:S.cx.preWrap.$},(0,x.tx)("ui3_and_ai_tour.toolbar_with_ai.description",{actions:a.createElement("strong",null,(0,x.tx)("ui3_and_ai_tour.actions"))})),media:oZ,stepCounter:{stepNum:r,totalNumSteps:i},primaryCta:e,secondaryCta:{type:"link",label:(0,x.tx)("ui3_and_ai_tour.toolbar_with_ai.playground_link"),href:"https://www.figma.com/community/file/1375505114072192161",ctaTrackingDescriptor:eC.c.AI_PLAYGROUND},highlightBlue:!0,onTargetLost:l})}let o0=a.createElement(oV.Jm,{src:"https://static.figma.com/uploads/a9557b89b0e5c885443c176c697961ed424fbe80",aspectRatio:oA,width:240});function o1({primaryCta:e,onClose:t,isShowing:n,stepNum:r,totalNumSteps:i,onTargetLost:l}){return oz((0,s.wA)(),oI.pN),a.createElement(eM.rq,{isShowing:n,testId:oI.hM,targetKey:oI.Ij,trackingContextName:"UI3/AI Onboarding > Toolbar without AI",onClose:t,arrowPosition:nv.F_.BOTTOM,title:(0,x.tx)("ui3_and_ai_tour.toolbar_without_ai.title"),description:a.createElement("span",{className:S.cx.preWrap.$},(0,x.tx)("ui3_and_ai_tour.toolbar_without_ai.description",{actions:a.createElement("strong",null,(0,x.tx)("ui3_and_ai_tour.actions"))})),media:o0,stepCounter:{stepNum:r,totalNumSteps:i},primaryCta:e,secondaryCta:{type:"link",label:(0,x.tx)("general.learn_more"),href:"https://help.figma.com/hc/en-us/articles/360041064174-Access-design-tools-from-the-toolbar",ctaTrackingDescriptor:eC.c.LEARN_MORE},highlightBlue:!0,onTargetLost:l})}let o2=a.createElement(oV.Jm,{src:"https://static.figma.com/uploads/4375c0d63ed914a9184547fabb589cb5c742f3d9",aspectRatio:oA,width:240});function o5({primaryCta:e,onClose:t,isShowing:n,stepNum:r,totalNumSteps:i,onTargetLost:l}){let o=(0,s.wA)(),c=(0,ev.FC)();return oz(o,oI.pN),a.createElement(eM.rq,{isShowing:n,targetKey:c()?oI._D:oI.hH,testId:oI.W_,trackingContextName:"UI3/AI Onboarding > Toolbar view only",onClose:t,arrowPosition:nv.F_.BOTTOM,title:(0,x.tx)("ui3_and_ai_tour.toolbar_view_only.title"),description:c()?(0,x.tx)("ui3_and_ai_tour.toolbar_view_only.description_in_xp"):(0,x.tx)("ui3_and_ai_tour.toolbar_view_only.description"),media:c()?void 0:o2,stepCounter:{stepNum:r,totalNumSteps:i},primaryCta:e,disableHighlight:!0,onTargetLost:l})}let o3=a.createElement(oV.Jm,{src:"https://static.figma.com/uploads/3a475600349d265b920a9db449ba736636c22f71",aspectRatio:oA,width:240}),o4=a.createElement(oV.Jm,{src:"https://static.figma.com/uploads/21c12d8cf9cbf9f391f70b9ded168bf0f61e2653",aspectRatio:oA,width:240});function o6({primaryCta:e,onClose:t,isShowing:n,stepNum:r,totalNumSteps:i,onTargetLost:l}){let o=(0,s.wA)(),d=(0,v.md)(tw.wg),u=(0,eU.p8)("topLevelMode")!==b.lyf.LAYOUT,m=(0,t9.wy)({migrationGroup:ne.L.GROUP_1,component:"DevModeCallout",attribute:"paidStatus",legacy:(e,t)=>t?.design_paid_status===t7.El.FULL||e?.design_paid_status===oX.Zf.FULL,migrated:e=>e?.designPaidStatus===t7.dQ.FULL}),p=1===i,_=(0,eU.p8)("keyboardShortcuts"),g=a.createElement(nw.S,{shortcut:(0,oJ.c1)(_,"enter-inspect-mode")}),f=p&&(d||m)?(0,x.tx)("ui3_and_ai_tour.dev_mode_toggle_editor_callout.description",{toggleDevModeKeyCommand:g}):(0,x.tx)("ui3_and_ai_tour.dev_mode_toggle_callout.description",{toggleDevModeKeyCommand:g}),h=(0,ed.f)(oI.pN);return(0,tg.h)(()=>{p?o(c.b({[oI.TT]:!0})):h||o(c.b({[oI.pN]:!0}))}),a.createElement(eM.rq,{isShowing:n,testId:oI.e0,targetKey:eq.ON,trackingContextName:p?"Dev mode callout":"UI3/AI Onboarding > Dev Mode",onClose:t,arrowPosition:nv.F_.BOTTOM,title:(0,x.tx)("ui3_and_ai_tour.dev_mode_callout.title"),description:a.createElement("span",null,f),media:u?o3:o4,stepCounter:p?void 0:{stepNum:r,totalNumSteps:i},primaryCta:e,highlightBlue:!0,onTargetLost:l})}function o8({primaryCta:e,onClose:t,isShowing:n,stepNum:r,totalNumSteps:i,onTargetLost:l}){oz((0,s.wA)(),oI.pN);let o=(0,eU.p8)("topLevelMode")!==b.lyf.LAYOUT;return a.createElement(eM.rq,{isShowing:n,testId:oI.zW,targetKey:oI.ue,trackingContextName:"UI3/AI Onboarding > Resize or Minimize",onClose:t,arrowPosition:nv.F_.LEFT_TITLE,title:(0,x.tx)("ui3_and_ai_callouts.resize_or_minimize.title"),description:a.createElement("span",null,(0,x.tx)("ui3_and_ai_callouts.resize_or_minimize.description",{minimizeUI:a.createElement("span",{className:S.cx.inlineFlex.itemsCenter.$},a.createElement("div",{className:"design_steps--minimizeUIIcon--EFBdo"},a.createElement(o$.O,null)),a.createElement("strong",{className:S.cx.pl24.$},(0,x.tx)("ui3_and_ai_callouts.resize_or_minimize.minimize_ui")))})),media:a.createElement(oV.Jm,{src:o?"https://static.figma.com/uploads/5fc7531228623bad0549984d9b482f525964bb5d":"https://static.figma.com/uploads/c24e9a3e1bb4e0babe4ebc86f9d58b79e44a1992",aspectRatio:oA,width:240}),stepCounter:{stepNum:r,totalNumSteps:i},primaryCta:e,secondaryCta:void 0,highlightBlue:!0,onTargetLost:l})}function o7({primaryCta:e,onClose:t,isShowing:n,stepNum:r,totalNumSteps:i,onTargetLost:l}){return oz((0,s.wA)(),oI.pN),a.createElement(eM.rq,{isShowing:n,testId:oI.U7,targetKey:oI.D9,trackingContextName:"UI3/AI Onboarding > Refreshed properties",onClose:t,arrowPosition:nv.F_.RIGHT_BODY,title:(0,x.tx)("ui3_and_ai_callouts.refreshed_properties.title"),description:(0,x.tx)("ui3_and_ai_callouts.refreshed_properties.description"),media:a.createElement(oV.Jm,{src:"https://static.figma.com/uploads/582733467466bd80b9afa3cc8935c1d68697c3b9",aspectRatio:oA,width:240}),stepCounter:{stepNum:r,totalNumSteps:i},primaryCta:e,secondaryCta:{label:(0,x.tx)("general.learn_more"),type:"button",ctaTrackingDescriptor:eC.c.LEARN_MORE,onClick:()=>(0,oq.FJ)("https://help.figma.com/hc/en-us/articles/360039832014-Design-prototype-and-explore-layer-properties-in-the-right-sidebar","_blank")},highlightBlue:!0,onTargetLost:l})}function o9({primaryCta:e,onClose:t,isShowing:n,stepNum:r,totalNumSteps:i,onTargetLost:l}){return oz((0,s.wA)(),oI.pN),a.createElement(eM.rq,{isShowing:n,testId:oI.EB,targetKey:oI.hH,trackingContextName:"UI3/AI Onboarding > Ask to edit",onClose:t,arrowPosition:nv.F_.BOTTOM,title:(0,x.tx)("ui3_and_ai_callouts.ask_to_edit.title"),description:(0,x.tx)("ui3_and_ai_callouts.ask_to_edit.description"),media:a.createElement(eI.y,{src:"https://static.figma.com/uploads/6629092993720542f2e7befaccf593e6e604551b",alt:"Ask to edit in toolbar",aspectRatio:oA}),stepCounter:{stepNum:r,totalNumSteps:i},primaryCta:e,highlightBlue:!0,onTargetLost:l})}function se({primaryCta:e,onClose:t,isShowing:n,stepNum:r,totalNumSteps:i,onTargetLost:l}){return oz((0,s.wA)(),(0,lN.ks)()?oI.qM:oI.pN),a.createElement(eM.rq,{isShowing:n,testId:oI.DX,targetKey:oY.Z8,trackingContextName:"UI3/AI Onboarding > Help resources",onClose:t,arrowPosition:nv.F_.RIGHT_BODY,title:(0,x.tx)("ui3_and_ai_callouts.help.title"),description:a.createElement("span",{className:S.cx.preWrap.$},(0,x.tx)("ui3_and_ai_callouts.help.description")),media:a.createElement(eI.y,{src:"https://static.figma.com/uploads/bda3ec9e88a20e645af9aa542d2f13c8fe04c4db",alt:"image of the help widget with the menu expanded",aspectRatio:oA}),stepCounter:{stepNum:r,totalNumSteps:i},primaryCta:e,secondaryCta:void 0,highlightBlue:!0,onTargetLost:l})}function st({primaryCta:e,onClose:t,isShowing:n,stepNum:r,totalNumSteps:i,onTargetLost:l}){let o=(0,s.wA)();return oz(o,oI.Ih),oz(o,oI.qM),a.createElement(eM.rq,{isShowing:n,testId:oI.xd,targetKey:oI.o5,trackingContextName:"UI3/AI Onboarding > Ready for Dev",onClose:t,arrowPosition:nv.F_.LEFT_TITLE,title:(0,x.tx)("ui3_and_ai_tour.ready_for_dev.title"),description:(0,x.tx)("ui3_and_ai_tour.ready_for_dev.description"),stepCounter:{stepNum:r,totalNumSteps:i},primaryCta:e,secondaryCta:{type:"link",label:(0,x.tx)("general.learn_more"),href:"https://help.figma.com/hc/en-us/articles/23918228264855",ctaTrackingDescriptor:eC.c.LEARN_MORE},disableHighlight:!0,onTargetLost:l})}function sn({primaryCta:e,onClose:t,isShowing:n,stepNum:r,totalNumSteps:i,onTargetLost:l}){return oz((0,s.wA)(),oI.qM),a.createElement(eM.rq,{isShowing:n,testId:oI.j1,targetKey:oI.aE,trackingContextName:"UI3/AI Onboarding > Toolbar in Dev Mode",onClose:t,arrowPosition:nv.F_.BOTTOM,title:(0,x.tx)("ui3_and_ai_tour.toolbar_dev_mode.title"),description:(0,x.tx)("ui3_and_ai_tour.toolbar_dev_mode.description"),stepCounter:{stepNum:r,totalNumSteps:i},primaryCta:e,disableHighlight:!0,onTargetLost:l})}var sa=n(233387);function sr({onClose:e,isShowing:t,onTargetLost:n}){return oz((0,s.wA)(),oI.af),a.createElement(eM.rq,{title:(0,x.tx)("ui3_and_ai_callouts.fragment_search.title"),description:(0,x.tx)("ui3_and_ai_callouts.fragment_search.description"),primaryCta:{type:"button",label:(0,x.tx)("ui3_and_ai_callouts.fragment_search.cta"),onClick:()=>{(0,sa.Bd)(),e()},ctaTrackingDescriptor:eC.c.TRY_IT_OUT},onClose:()=>e(),trackingContextName:"Fragment Search Callout",targetKey:oI.Ij,isShowing:t,arrowPosition:nv.F_.BOTTOM,highlightBlue:!0,testId:"fragmentSearchCallout",onTargetLost:n})}var si=n(634832),sl=n(168039),so=n(694687);let ss="https://static.figma.com/uploads/5539c0da8138a8bfc81bf3666349ec4d64872041",sc="https://static.figma.com/uploads/272636366e58b7fbab4ff9535da9caa1eeeaffb1",sd="https://static.figma.com/uploads/d9343cbdcd73dbbc6573e25e38b6b74682f31107";var su=(e=>(e.UI3_ONLY="UI3_ONLY",e.AI_ONLY="AI_ONLY",e.UI3_AND_AI="UI3_AND_AI",e))(su||{});function sm(e,t){e(c.b({has_onboarded_ai:t}))}function sp(e,t){e(c.b({has_onboarded_ui3:t}))}function s_({label:e,href:t}){return a.createElement("a",{href:t,className:S.cx.colorTextBrand.cursorPointer.$,target:"_blank"},e)}function sg({variant:e,onClose:t,onStartTour:n}){let i=(0,s.wA)(),l=(0,so.sL)(),o=(0,a.useMemo)(()=>a.createElement(s_,{label:(0,x.tx)("ui3_and_ai_welcome.learn_more_ai_link"),href:"https://help.figma.com/hc/en-us/articles/24039793359767"}),[]),c="dark"===(0,sl.DP)(),d=(0,oB.o3)(oB.nt.ui3Ga),{title:u,imgSrc:m,body:p,betaDisclaimer:_,ctaLabel:g}=(0,a.useMemo)(()=>{switch(e){case"UI3_AND_AI":return{title:(0,x.tx)("ui3_and_ai_welcome.ui3_and_ai.title"),imgSrc:c?sc:ss,body:(0,x.tx)("ui3_and_ai_welcome.ui3_and_ai.body"),betaDisclaimer:(0,x.tx)("ui3_and_ai_welcome.ui3_and_ai.beta_disclaimer",{learnMore:o}),ctaLabel:(0,x.tx)("ui3_and_ai_welcome.ui3_and_ai.cta")};case"UI3_ONLY":return{title:(0,x.tx)("ui3_and_ai_welcome.ui3_only.title"),imgSrc:c?"https://static.figma.com/uploads/0a7b90ceb5dd62bb538f1220ba12c0cf1f0be4f0":sd,body:(0,x.tx)("ui3_and_ai_welcome.ui3_only.body"),betaDisclaimer:null,ctaLabel:(0,x.tx)("ui3_and_ai_welcome.ui3_only.cta"),...d&&{title:(0,x.tx)("ui3_and_ai_welcome.ui3_only.title.ga"),imgSrc:c?"https://static.figma.com/uploads/0bf2ba02463470bcec95e528536a7784f5467888":"https://static.figma.com/uploads/1b10e004dd5794fe0f56932d2293a40c11aa272d",body:(0,x.tx)("ui3_and_ai_welcome.ui3_only.body.ga")}};case"AI_ONLY":let t=(0,r.kc)().ai_onboarding_modal_new_copy;return{title:(0,x.tx)(t?"ui3_and_ai_welcome.ai_only.title_v2":"ui3_and_ai_welcome.ai_only.title"),imgSrc:c?sc:ss,body:(0,x.tx)(t?"ui3_and_ai_welcome.ai_only.body_v2":"ui3_and_ai_welcome.ai_only.body"),betaDisclaimer:(0,x.tx)("ui3_and_ai_welcome.ai_only.beta_disclaimer",{learnMore:o}),ctaLabel:(0,x.tx)("ui3_and_ai_welcome.ai_only.cta")};default:(0,si.assertNever)(e)}},[e,c,o,d]);function f(){switch(e){case"UI3_AND_AI":sp(i,!0),sm(i,!0);break;case"UI3_ONLY":sp(i,!0);break;case"AI_ONLY":sm(i,!0);break;default:(0,si.assertNever)(e)}}let h=(0,a.useMemo)(()=>a.createElement(s_,{label:(0,x.tx)("ui3_and_ai_welcome.ai_legal_consent.ai_subprocessors_link"),href:"https://www.figma.com/sub-processors/"}),[]),E=(0,a.useMemo)(()=>a.createElement(s_,{label:(0,x.tx)("ui3_and_ai_welcome.ai_legal_consent.software_services_agreement_link"),href:"https://www.figma.com/ssa/"}),[]),y="UI3_AND_AI"===e||"AI_ONLY"===e,b=l.length>0,v=(0,a.useMemo)(()=>y&&b?(0,x.tx)("ui3_and_ai_welcome.ai_legal_consent.subprocessors_and_ssa",{subprocessorsLink:h,softwareServicesAgreementLink:E}):y?(0,x.tx)("ui3_and_ai_welcome.ai_legal_consent.subprocessors_only",{subprocessorsLink:h}):b?(0,x.tx)("ui3_and_ai_welcome.ai_legal_consent.ssa_only",{softwareServicesAgreementLink:E}):void 0,[y,b,h,E]);return(0,tg.h)(()=>{(0,tm.sx)(oI.LK,{variant:e})}),a.createElement("div",{"data-testid":oI.Hl,"data-variant":e},a.createElement(oV._l,{isShowing:!0,onClose:function(){switch(t(),f(),e){case"UI3_AND_AI":(0,tm.sx)(oI.p);break;case"UI3_ONLY":(0,tm.sx)(oI.e7);break;case"AI_ONLY":break;default:(0,si.assertNever)(e)}},description:a.createElement("div",{className:S.cx.flex.flexColumn.gap8.$},a.createElement("p",null,p),_&&a.createElement("p",{className:S.cx.mt12.$},_)),trackingContextName:"UI3 And AI Welcome Modal",title:a.createElement("div",{className:"welcome_modal--title--N2oxD"},a.createElement(tM.Kz,{multiple:4}),u,a.createElement(tM.Kz,{multiple:1})),primaryCta:{label:g,onClick:function(){n(),f()},ctaTrackingDescriptor:eC.c.UI3_AND_AI_WELCOME,type:"button"},disclaimerFooter:v,orientation:"portrait",media:a.createElement("img",{width:332,src:m,alt:"An illustration showcasing the new Figma"}),closeButtonColor:m===sd?"dark":"light"}))}function sf({primaryCta:e,onClose:t}){return a.createElement(sg,{variant:"UI3_AND_AI",onClose:t,onStartTour:e.onClick})}function sh({primaryCta:e,onClose:t}){return a.createElement(sg,{variant:"UI3_ONLY",onClose:t,onStartTour:e.onClick})}function sE({primaryCta:e,onClose:t}){return a.createElement(sg,{variant:"AI_ONLY",onClose:t,onStartTour:e.onClick})}function sy({openFile:e}){var t;let n=(0,I.GS)(),i=function({openFile:e}){let t=function(){let e=(0,oK.C2)(),t=(0,ed.f)(oK.Fw),n=(0,ed.f)(oK.iU),r=(0,ed.f)(oK.Ch),i=(0,eU.p8)("showUi"),l=(0,a.useMemo)(()=>t,[i]),o=(0,a.useMemo)(()=>n,[i]),s=(0,a.useMemo)(()=>r,[i]),c=(0,lN.ks)(),d=(0,ai.Em)();return!e.shouldShowUI3AndAIModal||l||o||s?!e.shouldShowUI3OnlyModal||l||s?e.shouldShowAIOnlyModal&&!o&&!c&&d?sE:null:sh:sf}(),n=function({openFile:e}){let t=(0,oK.C2)(),n=(0,eU.p8)("topLevelMode")===b.lyf.LAYOUT,r=(0,oP.U4)(),i=(0,lN.ks)(),l=(0,v.md)(tw.wg),o=(0,eU.aV)(),c=(0,tS.iZ)(),d=(0,s.d4)(t=>o&&e?e.canEdit:t.mirror?.appModel?.isReadOnly),u=!!c&&!!e&&!!d,m=(0,i8.kU)({file:e,viewOnly:u}),p=(0,ev.FC)(),_=!l&&m&&m?.type!==i8.Kw.VIEW_ONLY;return(0,a.useMemo)(()=>{let e=[];return n?t.shouldShowAIOnlyModal||t.shouldShowUI3AndAIModal?e.push(oQ):e.push(o1):e.push(o5),(!i||r)&&e.push(o6),e.push(o8),n&&e.push(o7),_&&!p()&&e.push(o9),e.push(se),e},[r,n,i,t.shouldShowAIOnlyModal,t.shouldShowUI3AndAIModal,_,p])}({openFile:e}),r=function(){let e=(0,oF.ZI)();return(0,a.useMemo)(()=>{let t=[];return e>0&&t.push(st),t.push(sn),t.push(se),t},[e])}(),i=(0,oB.o3)(oB.nt.ui3DevModeCallout),l=(0,ed.f)(oI.pN),o=(0,ed.f)(oI.qM),c=(0,ed.f)(oI.$9),d=(0,ed.f)(oI.af),u=(0,ed.f)(oI.TT),m=(0,ed.f)(oK.Ch),p=(0,eU.p8)("showUi"),_=(0,a.useMemo)(()=>l,[p]),g=(0,a.useMemo)(()=>o,[p]),f=(0,a.useMemo)(()=>c,[p]),h=(0,a.useMemo)(()=>d,[p]),E=(0,a.useMemo)(()=>u,[p]),y=(0,a.useMemo)(()=>m,[p]),C=(0,lN.ks)(),w=(0,ai.Em)(),T=(0,oG.PE)(),S=(0,oK.b1)(),x=(0,oP._I)(),k=(0,oP.U4)(),N=[];return t&&N.push(t),C&&x&&!g&&!y?N.push(...r):C||_||y||N.push(...n),(0===N.length||1===N.length&&N[0]===sE)&&!C&&w&&T&&!f&&N.push(oj),0!==N.length||C||!w||!k||g||E||!i||y||N.push(o6),0===N.length&&!C&&w&&S&&!h&&N.push(sr),N}({openFile:e}),l=(t=i[0])===sh||t===sE||t===sf,o=(0,oK.C2)(),c=(0,eS.r1)(oK.Fw),d=(0,v.md)(c),m=(0,eS.r1)(oK.iU),p=(0,v.md)(m),_=(0,eS.r1)(oK.Ch),f=(0,v.md)(_),h=(0,eS.r1)(oI.pN),E=(0,v.md)(h),y=(0,eS.r1)(oI.qM),C=(0,v.md)(y),w=(0,eS.r1)(oI.$9),T=(0,v.md)(w),S=(0,eS.r1)(oI.af),k=(0,v.md)(S),N=(0,ai.Em)(),A=(0,oF.l7)(),O=(0,oF.hA)(),L=!!(0,r.kc)().ui3_and_ai_welcome_modal,D=(0,oB.o3)(oB.nt.ui3DevModeCallout),R=(0,eU.aV)(),{uniqueId:M,show:P,isShowing:F,complete:B}=(0,u.e)({overlay:g.S$7,priority:oO},[d,p,E,C,T,f,k]),{currentStep:U,next:G}=(0,eG.A)({numSteps:0===i.length?1:i.length,onComplete:()=>B});(0,ew.E)(M,[(0,oU.w)("dev"),(0,oU.w)("design")],()=>{K()});let K=(0,a.useCallback)(()=>{L&&N&&n&&(D?!R&&0!==i.length&&P():R||P({canShow:(e,t,n,a,r,i)=>!e||!t||!n||!a||!r||!i}))},[L,N,n,D,R,i.length,P]);(0,a.useEffect)(()=>{R||K()},[R,K]),(0,ew.E)(M,"CTA Clicked",e=>{i[U]===se&&e.properties?.text==="HelpWidget"&&B()});let V=(0,a.useCallback)(()=>{B(),o.shouldShowUI3AndAIModal?(0,tm.sx)(oI.p):o.shouldShowUI3OnlyModal&&(0,tm.sx)(oI.e7)},[B,o]),H=a.useMemo(()=>{let e={type:"button",label:(0,x.tx)("general.next"),onClick:G,ctaTrackingDescriptor:eC.c.NEXT},t={type:"button",label:(0,x.tx)("general.done"),onClick:B,ctaTrackingDescriptor:eC.c.DONE};return i.map((n,r)=>a.createElement(n,{primaryCta:r===i.length-1?t:e,onClose:r===i.length-1?B:V,stepNum:l?r:r+1,totalNumSteps:l?i.length-1:i.length,isShowing:F,onTargetLost:r===i.length-1?B:G}))},[G,B,i,V,l,F]);return((0,a.useEffect)(()=>{(!H||0===i.length||!n||A||O)&&B()},[H,i.length,n,A,O,B]),F)?a.createElement(eH.U,{currentStep:U,isShowing:F,children:H}):null}var sb=n(424863),sv=n(984032),sC=n(593788),sw=(e=>(e.AwaitIsShowing="AwaitIsShowing",e.AwaitPastedElementsSelected="AwaitPastedElementsSelected",e.AwaitOtherElementsSelected="AwaitOtherElementsSelected",e.Completed="Completed",e))(sw||{}),sT=(e=>(e.OnShow="OnShowUpsellLibariesConsecutivePaste",e[e.SelectionChanged=la.R]="SelectionChanged",e))(sT||{});let sS=(0,ln.Op)({initial:"AwaitIsShowing",states:[{id:"AwaitIsShowing",transitions:[(0,ln.nr)("OnShowUpsellLibariesConsecutivePaste","AwaitPastedElementsSelected")]},{id:"AwaitPastedElementsSelected",transitions:[(0,ln.nr)(sT.SelectionChanged,"AwaitOtherElementsSelected",{condition:({event:e})=>!!e.properties.didSelectedNodeIdsChange})]},{id:"AwaitOtherElementsSelected",transitions:[(0,ln.nr)(sT.SelectionChanged,"Completed",{condition:({event:e})=>!!e.properties.didSelectedNodeIdsChange})]},{id:"Completed",terminal:!0}]}),sx=(0,sC.rn)("paste_deselected_machine",sS),sk=(0,eS.r1)("explicitly_dismissed_create_component_pointer"),sN=(0,eT.tH)("first_component_created_date");function sI(){let e=(0,s.wA)(),t=(0,v.md)(eT.t),n=(0,v.md)(tw.NZ),r=(0,v.md)(tw.pQ),i=(0,tX.jO)(),l=(0,v.md)(sN),o=(0,v.md)(sk),d=(0,i6.zl)(sx),p=(0,u.e)({overlay:g.g4U,priority:m.N.SECONDARY_MODAL},[t,r,o]);return(0,ew.E)(p.uniqueId,sb.zb,()=>{null===l&&p.show({canShow:(e,t,a)=>e&&(t||n)&&i&&!a,onShow:()=>{(0,nW.YQ)({id:sT.OnShow})}})}),(0,ew.E)(p.uniqueId,"action_create_symbol",()=>{p.isShowing&&(e(c.b({explicitly_dismissed_create_component_pointer:!0})),p.complete())}),(0,i6.ST)(d,({to:e})=>{e===sw.Completed&&(p.complete(),d.reset())}),a.createElement(sA,{isShowing:p.isShowing,onAbort:p.complete},a.createElement(ez.h,{isShowing:p.isShowing,modalType:eY.q3.SELF_CONTAINED,trackingContextName:"Consecutive Paste Create Component Pointer",element:sv.gL,onClickPrimaryCta:p.complete,onClose:p.complete,onManualDismiss:p.complete,testId:"upsell_libraries_consecutive_paste_overlay"}))}function sA(e){let[t,n]=a.useState(!1),i=r.Ay().user_data?.id,{isShowing:l,onAbort:o}=e;return a.useEffect(()=>{!t&&l&&((0,nI.Hz)(i)?n(!0):o())},[n,t,l,o,i]),t?e.children:null}var sO=n(410424),sL=n(944682),sD=n(116135),sR=n(867795),sM=n(178911);let sP="seen_workflow_interop_diagram_onboarding",sF=(0,eS.r1)(sP),sB="FigJam Diagram Onboarding (Workflow Interop Experiment)",sU={connectors:`${sB} - Connectors`,shapes:`${sB} - Shapes`,templates:`${sB} - Templates`};function sG(){!function(){let e=(0,eU.p8)("pagesList");(0,a.useMemo)(()=>{let t=(0,tD.QL)("preservePageIndex");if(t&&e.length>0){(0,tD.EM)("preservePageIndex");let n=parseInt(t);if(isNaN(n)||n<0||n>=e.length)return;e.forEach((e,t)=>{t!==n&&t8.Y5.triggerAction("page-delete",{args:{nodeId:e.nodeId,skipVisualBell:!0}})})}},[e])}(),function(){let{insertTemplate:e}=(0,ax.Fz)(),t=(0,s.wA)();(0,tg.h)(()=>{let n=(0,tD.QL)("templateId");null!=n&&((0,tD.EM)("templateId"),t(sO.ts({hubFileId:n,callback:t=>{e({template:{template:t,type:aA.n.HubFile},userTriggered:!1,templateInsertionDirection:b.hKj.ABOVE,triggeredFrom:"workflow-interop"})}})))})}();let e=(0,v.md)(sF),t=(0,u.e)({overlay:g.uPw,priority:m.N.OVERRIDING_MODAL},[e]),n=function(e){let t=(0,s.wA)();return a.useMemo(()=>[{title:(0,x.tx)("rcs.figjam_diagram_onboarding.connectors_title"),trackingContextName:sU.connectors,arrowPosition:nv.F_.BOTTOM,media:a.createElement(eI.y,{src:"https://static.figma.com/uploads/2655e9f0e4247dff3d5a46cf59f788473bffe0c6",aspectRatio:900/508,alt:(0,x.t)("rcs.figjam_diagram_onboarding.connectors_title")}),description:(0,x.tx)("rcs.figjam_diagram_onboarding.connectors"),targetKey:im.BC,onClose:t4.lQ},{title:(0,x.tx)("rcs.figjam_diagram_onboarding.shapes_title"),trackingContextName:sU.shapes,arrowPosition:nv.F_.BOTTOM,media:a.createElement(eI.y,{aspectRatio:900/507,src:"https://static.figma.com/uploads/0c9201d8164c2390cdcf3fb8d316b6bacdddb438",alt:(0,x.t)("rcs.figjam_diagram_onboarding.shapes_title")}),description:(0,x.tx)("rcs.figjam_diagram_onboarding.shapes"),targetKey:im.BC,onClose:t4.lQ},{title:(0,x.tx)("rcs.figjam_diagram_onboarding.templates_title"),trackingContextName:sU.templates,arrowPosition:nv.F_.BOTTOM,media:a.createElement(eI.y,{aspectRatio:900/505,src:"https://static.figma.com/uploads/b8b42ba263794abd20364c3da0f3f4993fd4ed86",alt:(0,x.t)("rcs.figjam_diagram_onboarding.templates_title")}),description:(0,x.tx)("rcs.figjam_diagram_onboarding.templates"),targetKey:sM.yl,secondaryCta:{type:"button",label:(0,x.tx)("rcs.figjam_diagram_onboarding.see_templates"),onClick:()=>{t(tC.En({initialX:0,initialY:0,initialTab:sR.p.TEMPLATES})),e.complete()}},onClose:t4.lQ}],[t,e])}(t);return(0,tg.h)(()=>{(0,tD.QL)(sL.tX.key)===sL.tX.value&&t.show({canShow:e=>!e})}),a.createElement(sD.WZ,{testId:"workflow-interop-machine-overlay",userFlagOnShow:sP,isShowing:t.isShowing,onComplete:t.complete,steps:n})}var sK=n(70964);let sV="seen_figjam_workshop_onboarding",sH=(0,eS.r1)(sV);function sz(e){let t=(0,v.md)(tw.J1),n=(0,v.md)(sH),r=(0,v.md)(tw.zo),i=(0,v.md)(tw.PD),l=(0,u.e)({overlay:g.Fq3,priority:m.N.SECONDARY_MODAL},[t,n,r,i]);return(0,tg.h)(()=>{l.show({canShow:(e,t,n,a)=>e&&!t&&n&&!a})}),a.createElement(ez.h,{onboardingKey:eq.v4,modalType:eY.q3.DRAGGABLE,trackingContextName:"Fig Jam Workshop Onboarding",title:()=>(0,x.t)("rcs.figjam_workshop.invite_the_world_to_your_workshop"),disableFooter:!0,width:301,element:sW,isShowing:l.isShowing,onClickPrimaryCta:l.complete,onClose:l.complete,onManualDismiss:l.complete,currentStepIndex:0,totalNumSteps:1,userFlagOnShow:sV})}function sW(e){return a.createElement(a.Fragment,null,a.createElement(sK.Gv,{width:301,src:"https://static.figma.com/uploads/a97e76df2b43ae8b408127c1c63ea0b8485ba8ac"}),a.createElement(sK.ak,null,(0,x.tx)("rcs.figjam_workshop.open_sessions_let_you_jam_with_anyone_even_people_who_don_t_have_a_figma_account")))}var sj=n(666258),s$=n(396021),sq=n(173101),sY=n(600907);function sX(e,t,n,r){let i=(0,s.wA)(),l=(0,ed.f)(n),o=a.useRef(!!l);(0,ew.E)(e,t,a.useCallback(()=>{!(r?.current||o?.current)&&(l||(o.current=!0,i(c.b({[n]:!0}))))},[r,i,l,n]))}var sJ=n(469572),sZ=n(752795),sQ=n(627776),s0=n(538918),s1=n(787133),s2=n(414598),s5=n(996887);function s3(){let e=(0,s.wA)(),t=(0,s1.C)();return a.useEffect(()=>{if(t)return;let n=(0,ej.Es)(),a=document.querySelector(`[data-tooltip=${n}]`);return a&&e(oe.j7({type:oJ.pi,data:{targetRect:a.getBoundingClientRect()}})),()=>{e(oe.oB())}},[t,e]),a.createElement(a.Fragment,null,a.createElement(sK.Gv,{width:350,src:"https://static.figma.com/uploads/30b3da35c8e26b773e6fc4b88528ff8077543ad8"}),a.createElement(sK.ak,null,(0,x.tx)("rcs.back_to_file_browser.the_file_browser_allows_you_to"),a.createElement("br",null),a.createElement("br",null),(0,x.tx)("rcs.back_to_file_browser.you_can_head_there_by_clicking_on_option_in_the_main_menu",{optionName:a.createElement("span",{className:s5.Cr},(0,x.tx)("rcs.back_to_file_browser.back_to_files"))})))}function s4(e){return a.createElement(ez.h,{testId:"BackToFileBrowserOverlay",modalType:eY.q3.DRAGGABLE,trackingContextName:"Back to File Browser Modal",element:s3,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:s5.Yl,footerClassName:s2.ay,title:(0,x.tx)("rcs.back_to_file_browser.file_browser"),onboardingKey:"back-to-files",pointDirection:eY._L.LEFT_TITLE,currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,userFlagOnShow:"back_to_file_browser_onboarded",UNSAFE_disableFocus:!0})}function s6(){return a.createElement("div",null,a.createElement(sK.Gv,{src:"https://static.figma.com/app/onboarding/page-3.gif"}),a.createElement(sK.ak,null,(0,x.tx)("rcs.comments.leave_notes_right_in_your_design_files"),a.createElement("br",null),a.createElement("br",null),(0,x.tx)("rcs.comments.get_feedback_requests_and_copy_updates_where_you_ll_use_them_not_in_your_inbox")))}function s8(e){return a.createElement(d.fu,{name:"Community Hub Duplicate Onboarding Modal"},a.createElement(_.M,{userFlagOnShow:"editor_community_duplicate_onboarded",isShowing:e.isShowing},a.createElement(tz.Nb,{className:s5.W8,hide:e.onManualDismiss,size:eY.pN,disableClickOutsideToHide:!0},a.createElement("div",{className:s5.SI},a.createElement("h1",null,(0,x.tx)("rcs.community_hub_file_duplicate.welcome_to_figma")),a.createElement(tM.Kz,{multiple:4}),a.createElement("p",null,(0,x.tx)("rcs.community_hub_file_duplicate.you_just_duplicated_this_file_from_the_community_to_get_started_let_us_show_you_some_of_the_things_that_make_figma_special_and_different_from_other_design_tools")),a.createElement(tM.Kz,{multiple:4}),a.createElement(tP.Go,{fullWidth:!1,onClick:e.onClickPrimaryCta},(0,x.tx)("rcs.community_hub_file_duplicate.show_me_around")),a.createElement(tM.Kz,{multiple:3}),a.createElement(tM.Ph,{className:s5.X8,onClick:e.onManualDismiss,trusted:!0},(0,x.tx)("rcs.community_hub_file_duplicate.no_thanks"))))))}function s7(){return a.createElement("div",null,a.createElement(sK.Gv,{src:"https://static.figma.com/app/onboarding/export.png",width:350}),a.createElement(sK.ak,null,(0,x.tx)("rcs.export.export_your_designs_for_use_in_production_or_to_share_with_your_team"),a.createElement("br",null),a.createElement("br",null),(0,x.tx)("rcs.export.figma_can_export_to_png_jpeg_svg_and_pdf")))}function s9(){return a.createElement("div",null,a.createElement(sK.Gv,{src:"https://static.figma.com/app/onboarding/livepreview.gif"}),a.createElement(sK.ak,null,(0,x.tx)("rcs.live_device_preview.to_view_your_frames_live_on_your_device_just_download_figma_mirror",{linkToIOS:a.createElement(sK.lp,{href:"https://itunes.apple.com/app/figma-mirror/id1152747299"},(0,x.tx)("rcs.live_device_preview.i_os")),linkToAndroid:a.createElement(sK.lp,{href:"https://play.google.com/store/apps/details?id=com.figma.mirror&hl=en"},(0,x.tx)("rcs.live_device_preview.android"))}),a.createElement("br",null),a.createElement("br",null),(0,x.tx)("rcs.live_device_preview.they_ll_update_instantly_no_matter_what_network_you_re_on_and_with_no_need_to_connect_via_usb")))}function ce(){return a.createElement("div",null,a.createElement(sK.Gv,{src:"https://static.figma.com/app/onboarding/multiplayer.gif"}),a.createElement(sK.ak,null,(0,x.tx)("rcs.multiplayer.collaborate_in_real_time_with_your_team_and_never_worry_about_your_files"),a.createElement("br",null),a.createElement("br",null),(0,x.tx)("rcs.multiplayer.no_syncing_no_waiting_no_merge_conflicts")))}function ct(){return a.createElement("div",null,a.createElement(sK.Gv,{src:"https://static.figma.com/app/onboarding/sharing.gif"}),a.createElement(sK.ak,null,(0,x.tx)("rcs.sharing.share_your_projects_with_teammates_clients_and_stakeholders"),a.createElement("br",null),a.createElement("br",null),(0,x.tx)("rcs.sharing.control_their_access_with_granular_permissions_and_manage_their_access_in_one_simple_place")))}function cn(){let e=(0,s.wA)(),t=(0,s.Pj)();return a.useEffect(()=>{let n=t.getState().leftPanel.activeTab;return e(nb.FP({tab:b.xae.ASSETS})),()=>{e(nb.FP({tab:n}))}},[e,t]),a.createElement("div",null,a.createElement(sK.Gv,{src:"https://static.figma.com/app/onboarding/library.gif"}),a.createElement(sK.ak,null,(0,x.tx)("rcs.team_library.share_components_and_styles_across_your_team_by_publishing_them"),a.createElement("br",null),a.createElement("br",null),(0,x.tx)("rcs.team_library.enable_quick_access_to_other_libraries_in_this_file")))}function ca(){return a.createElement("div",null,a.createElement(sK.Gv,{src:"https://static.figma.com/uploads/238ff8ea8ab49de9355932f62342f3f859ad8f4a"}),a.createElement(sK.ak,null,(0,x.tx)("rcs.universal_inserts.insert_components_from_your_libraries")))}let cr=["editor_community_duplicate_onboarded","editor_onboarded","shared_component_library_onboarded","shared_component_publish_onboarded","library_modal_onboarded","styles_onboarded","pdf_onboarded","coco_onboarded","line_height_update_onboarded","gifs_onboarded","opentype_onboarded","seen_community_hub_landing_editor_onboarding","variants_onboarded","multiple_starting_points_onboarded"],ci=[function(e){return a.createElement(eA.X,{emphasized:!0,testId:"LaunchNuxModalViewOverlay",trackingContextName:"LaunchNux",isShowing:e.isShowing,position:eO.Q.BOTTOM_RIGHT,title:(0,x.tx)("rcs.launch_nux_modal.take_a_quick_tour_of_figma"),description:(0,x.tx)("rcs.launch_nux_modal.walk_through_figma_s_unique_editor_and_collaboration_features"),primaryCta:{type:"button",label:(0,x.tx)("rcs.launch_nux_modal.show_me_around"),onClick:e.onClickPrimaryCta,ctaTrackingDescriptor:eC.c.SHOW_ME_AROUND},secondaryCta:{type:"button",label:(0,x.tx)("rcs.launch_nux_modal.no_thanks"),onClick:e.onManualDismiss,ctaTrackingDescriptor:eC.c.NO_THANKS},onClose:e.onManualDismiss})},function(e){return a.createElement(eM.rq,{testId:"ConstraintsOverlay",trackingContextName:"Constraints Onboarding Modal",title:(0,x.tx)("rcs.constraints.constraints"),media:a.createElement(eI.y,{src:"https://static.figma.com/app/onboarding/page-2.gif",alt:"An animation showing how constraints works in Figma.",aspectRatio:1280/720}),description:a.createElement(a.Fragment,null,(0,x.tx)("rcs.constraints.setting_precise_constraints_lets_you_build_fluid_layouts_to_support_multiple_device_sizes_and_breakpoints_within_the_same_group"),a.createElement("br",null),a.createElement("br",null),(0,x.tx)("rcs.constraints.all_of_your_layers_adjust_the_way_you_expect_no_magic_you_get_full_control")),isShowing:e.isShowing,primaryCta:{type:"button",label:(0,x.tx)("rcs.rcs_shared.next"),onClick:e.onClickPrimaryCta,ctaTrackingDescriptor:eC.c.NEXT},onClose:e.onManualDismiss,targetKey:"frame",secondaryCta:{type:"link",label:(0,x.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360039957734",ctaTrackingDescriptor:eC.c.LEARN_MORE},stepCounter:{stepNum:e.currentStepIndex+1,totalNumSteps:e.totalNumSteps}})},function(e){return a.createElement(eM.rq,{testId:"VectorNetworksOverlay",trackingContextName:"Vector Networks Onboarding Modal",title:(0,x.tx)("rcs.vector_networks.vector_networks"),media:a.createElement(eI.y,{src:"https://static.figma.com/app/onboarding/page-1.gif",alt:"An animation showing how to use the pen tool",aspectRatio:1280/720}),description:a.createElement(a.Fragment,null,(0,x.tx)("rcs.vector_networks.pen_tools_have_always_been_scary_to_use"),a.createElement("br",null),a.createElement("br",null),(0,x.tx)("rcs.vector_networks.now_they_re_both_simpler_and_more_powerful_paths_finally_work_the_way_they_should")),isShowing:e.isShowing,primaryCta:{type:"button",label:(0,x.tx)("rcs.rcs_shared.next"),onClick:e.onClickPrimaryCta,ctaTrackingDescriptor:eC.c.NEXT},onClose:e.onManualDismiss,targetKey:"pen",secondaryCta:{type:"link",label:(0,x.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360040450213",ctaTrackingDescriptor:eC.c.LEARN_MORE},stepCounter:{stepNum:e.currentStepIndex+1,totalNumSteps:e.totalNumSteps}})},function(e){return a.createElement(ez.h,{testId:"UniversalInsertsOverlay",modalType:eY.q3.DRAGGABLE,trackingContextName:"Universal Inserts Onboarding Modal",element:ca,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:s5.Yl,footerClassName:s2.ay,title:(0,x.tx)("rcs.universal_inserts.find_components_plugins_and_widgets"),onboardingKey:"insert",additionalButton:{onClickBehavior:"link",label:(0,x.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360038510693-Guide-to-Figma-Community"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return a.createElement(ez.h,{testId:"CommentsOverlayOverlay",modalType:eY.q3.DRAGGABLE,trackingContextName:"Comments Onboarding Modal",element:s6,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:s5.Yl,footerClassName:s2.ay,title:(0,x.tx)("rcs.comments.comments"),onboardingKey:"comment",additionalButton:{onClickBehavior:"link",label:(0,x.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360039825314"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return a.createElement(ez.h,{testId:"SharingOverlay",modalType:eY.q3.DRAGGABLE,trackingContextName:"Sharing Onboarding Modal",element:ct,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:s5.Yl,footerClassName:s2.ay,title:(0,x.tx)("rcs.sharing.sharing_and_permissions"),onboardingKey:eq.v4,additionalButton:{onClickBehavior:"link",label:(0,x.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360039485514"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return a.createElement(ez.h,{testId:"MultiplayerOverlay",modalType:eY.q3.DRAGGABLE,trackingContextName:"Multiplayer Onboarding Modal",element:ce,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:s5.Yl,footerClassName:s2.ay,title:(0,x.tx)("rcs.multiplayer.multiplayer"),onboardingKey:eq.v4,additionalButton:{onClickBehavior:"link",label:(0,x.tx)("rcs.rcs_shared.learn_more"),href:"https://blog.figma.com/multiplayer-editing-in-figma-8f8076c6c3a6"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return a.createElement(ez.h,{testId:"TeamLibraryOverlay",modalType:eY.q3.DRAGGABLE,trackingContextName:"Team Library Onboarding Modal",element:cn,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:s5.Yl,footerClassName:s2.ay,title:(0,x.tx)("rcs.team_library.team_library"),onboardingKey:"library",additionalButton:{onClickBehavior:"link",label:(0,x.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360041051154"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,userFlagOnShow:"library_modal_onboarded",UNSAFE_disableFocus:!0})},function(e){return a.createElement(ez.h,{testId:"ExportOverlay",modalType:eY.q3.DRAGGABLE,trackingContextName:"Export Onboarding Modal",element:s7,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:s5.Yl,footerClassName:s2.ay,title:(0,x.tx)("rcs.export.export"),additionalButton:{onClickBehavior:"link",label:(0,x.tx)("rcs.rcs_shared.learn_more"),href:"https://help.figma.com/hc/articles/360040028114"},currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})},function(e){return a.createElement(ez.h,{testId:"LiveDevicePreviewOverlay",modalType:eY.q3.DRAGGABLE,trackingContextName:"Live Device Preview Onboarding Modal",element:s9,isShowing:e.isShowing,onClickPrimaryCta:e.onClickPrimaryCta,onClose:e.onClose,onManualDismiss:e.onManualDismiss,headerClassName:s5.Yl,footerClassName:s2.ay,title:(0,x.tx)("rcs.live_device_preview.live_device_preview"),currentStepIndex:e.currentStepIndex,totalNumSteps:e.totalNumSteps,UNSAFE_disableFocus:!0})}];function cl(){return tp.eD||(0,sQ.ce)()?ci:[...ci,s4]}function co(){let e=(0,s.wA)(),t=(0,v.md)(eS.qG),n=(0,v.md)(eT.d2),r=(0,v.md)(eT.g5),i=(0,v.md)(eT.NT),l=(0,el.q5)(),o=(0,sZ.isNotNullish)(l)&&(0,e_.pi)({editorType:l.editorType})===t7._Y.DESIGN,d=(0,sZ.isNotNullish)(l)&&l.canEdit,_=(0,u.e)({overlay:g.LiP,priority:m.N.OVERRIDING_MODAL},[t,r,n,i]),[f,h]=a.useState([]),E=a.useCallback(e=>{_.show({canShow:(t,n,a,r)=>{let i=(function({userFlags:e,emailValidatedAt:t,userSpace:n,isReset:a,jobTitle:r}){let i=(0,tX._q)(e),l=(0,rw.mW)(e,"editor_community_duplicate_onboarded"),o=(0,s0.d2)({emailValidatedAt:t,jobTitle:r}),s=(0,rw.mW)(e,"claimed_invite_with_pending_user_mention"),c=(0,rw.mW)(e,"has_closed_comment"),d=!!t_.Ay.location.hash,u=n===p.qo.ORG,m=(0,nI.XX)(e),_=(0,tD.QL)(aI.pt.KEY)===aI.pt.VALUE;return i&&!a||s&&!c&&d?[]:_||m?l||o?[]:u?m?[]:[s8,...cl()]:m||i&&!a?[]:[s8,...cl()]:cl()})({userFlags:t,emailValidatedAt:n,userSpace:a,isReset:e,jobTitle:r}).filter(e=>!!e);return i.length>0&&(h(i),!0)}})},[_]);a.useEffect(()=>{d&&o&&E(!1)},[E,d,o]),(0,ew.E)(_.uniqueId,"Reset Onboarding",()=>E(!0));let y=a.useCallback(()=>{let t={};for(let e of cr)t[e]=!0;e(c.b(t)),_.complete()},[e,_]);return _.isShowing&&0!==f.length?a.createElement(cs,{steps:f,onComplete:y}):null}function cs(e){let{steps:t,onComplete:n}=e,r=(0,eG.A)({numSteps:t.length,onComplete:n});return a.createElement(eH.U,{currentStep:r.currentStep,isShowing:!0,children:t.map((e,i)=>a.createElement(e,{onClickPrimaryCta:r.next,onClose:t4.lQ,onManualDismiss:n,isShowing:!0,currentStepIndex:i,totalNumSteps:t.length}))})}var cc=n(239349),cd=n(168289),cu=n(988889),cm=n(721047),cp=n(425037),c_=n(354537);function cg(){let{uniqueId:e,show:t,isShowing:n,complete:r}=(0,u.e)({overlay:g.a9B,priority:m.N.OVERRIDING_MODAL}),i=(0,s.wA)(),l=(0,ed.f)("cursor_bot_v2__no_basics_file__played_frame_formatting"),o=(0,ed.f)("design_panel_step_shown"),d=(0,ed.f)("cursor_bot_v2__basics_file__started_flow"),p=(0,tX.Ai)(["exp_cursor_bot_onboarding"]),_=(0,cm.b)();(0,ew.E)(e,"create_frame",a.useCallback(()=>{!l||o||d||p||n||t()},[o,d,n,l,t,p]));let f=(0,v.md)(sj.a8),h=!!(0,ed.f)((0,s$.Of)(cd.wn.FORMAT_FRAME,!1).tutorialPlayedUserFlag),E=a.useMemo(()=>(0,cp.p)(h,!1),[h]);if(!n)return null;if(f===cd.h0.PLAYING)return a.createElement(cu.a,{cursorBotStateManager:_,currentTutorial:E});let y=()=>{i(c.b({design_panel_step_shown:!0})),r()};return a.createElement(E.TooltipElement,{onClickNext:y,onClickShowMe:()=>{_.runTutorial(E)},onClickClose:y,skip:y,isFollowUp:!0})}function cf(){let{uniqueId:e,show:t,isShowing:n,complete:r}=(0,u.e)({overlay:g.ENg,priority:m.N.OVERRIDING_MODAL}),i=(0,s.wA)(),l=(0,ed.f)("cursor_bot_v2__no_basics_file__played_text_formatting"),o=(0,ed.f)("format_text_step_shown"),d=(0,ed.f)("cursor_bot_v2__basics_file__started_flow"),p=(0,cm.b)(),_=(0,tX.Ai)(["exp_cursor_bot_onboarding"]),[f,h]=a.useState(!1),E=(0,cc.VW)(),y=(0,s.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);(0,ew.E)(e,"create_text",()=>{h(!0)}),a.useEffect(()=>{!l||o||d||_||n||!f||E?.type!=="TEXT"||y!==b.m1T.DESIGN_LAYOUT||n||t()},[E,f,n,t,y,l,o,d,_]);let C=!!(0,ed.f)((0,s$.Of)(cd.wn.FORMAT_TEXT,!1).tutorialPlayedUserFlag),w=a.useMemo(()=>(0,c_.Z)(C,!1),[C]),T=(0,v.md)(sj.a8);if(!n)return null;if(T===cd.h0.PLAYING)return a.createElement(cu.a,{cursorBotStateManager:p,currentTutorial:w});let S=()=>{i(c.b({format_text_step_shown:!0})),r()};return a.createElement(w.TooltipElement,{onClickNext:S,onClickShowMe:()=>{p.runTutorial(w)},onClickClose:S,skip:S,isFollowUp:!0})}var ch=n(460528),cE=n(258525);function cy(){let e=(0,u.e)({overlay:g.CVA,priority:m.N.OVERRIDING_MODAL}),t=(0,ed.f)("no_figma_basics_tooltips_design_panel_step"),n=(0,ed.f)("design_panel_step_shown"),r=(0,ed.f)("started_figma_basics_onboarding"),i=(0,s.wA)(),l=t&&!n&&!r;if((0,ew.E)(e.uniqueId,"create_frame",a.useCallback(()=>{l&&!e.isShowing&&e.show()},[e,l])),!e.isShowing)return null;let o=()=>{e.complete(),i(c.b({design_panel_step_shown:!0}))};return a.createElement(eM.rq,{onClose:o,title:(0,x.tx)("tooltips_plus_onboarding.change_properties_in_the_design_panel"),description:(0,x.tx)("tooltips_plus_onboarding.design_panel.description"),trackingContextName:"Tooltips+ > Reactive Follow Ups > Frame Formatting",isShowing:e.isShowing,targetKey:ch.W,arrowPosition:nv.F_.RIGHT_BODY,onTargetLost:o,emphasized:!0,disableHighlight:!0})}function cb(){let e=(0,u.e)({overlay:g.IQ,priority:m.N.OVERRIDING_MODAL}),t=(0,ed.f)("no_figma_basics_tooltips_format_text_step"),n=(0,ed.f)("format_text_step_shown"),r=(0,ed.f)("started_figma_basics_onboarding"),i=(0,s.wA)(),l=!n&&t&&!r;if((0,ew.E)(e.uniqueId,"create_text",a.useCallback(()=>{l&&!e.isShowing&&e.show()},[e,l])),!e.isShowing)return null;let o=()=>{e.complete(),i(c.b({format_text_step_shown:!0}))};return a.createElement(eM.rq,{onClose:o,title:(0,x.tx)("tooltips_plus_onboarding.text_formatting.title"),description:(0,x.tx)("tooltips_plus_onboarding.text_formatting.description"),trackingContextName:"Tooltips+ > Reactive Follow Ups > Text Formatting",isShowing:e.isShowing,targetKey:cE.B,arrowPosition:nv.F_.RIGHT_BODY,onTargetLost:o,emphasized:!0,disableHighlight:!0})}var cv=n(502601),cC=n(841563),cw=n.n(cC),cT=n(877645),cS=n(529928),cx=n(717156),ck=n(971646);function cN(e){let t;let{file:n,org:r,overlay:i}=e,l=(0,cT.B)(n,r.id),o=(0,a.useRef)(void 0),s=i.complete;if((0,a.useEffect)(()=>{l&&o.current&&!cw()(l.filePermissionsData,o.current?.filePermissionsData)&&s(),o.current=l},[l,s]),!l)return null;let c=l.isBranch,d=l.branchMatchesRepo,u=l.linkExpiresAt,m=(0,ae.Ch)(l.filePermissionsData,e.org),p=(0,ck.M3)((0,eo.A)(u)),_=!d&&c?(0,x.tx)("link_expired_overlay.different_branch_permissions_header"):(0,x.tx)("link_expired_overlay.header");return t=d?(0,x.tx)("link_expired_overlay.same_branch_permissions_body",{formattedTimestamp:p,audience:m}):c?(0,x.tx)("link_expired_overlay.different_branch_permissions_body",{formattedTimestamp:p,audience:m}):(0,x.tx)("link_expired_overlay.body",{formattedTimestamp:p,audience:m}),a.createElement(eM.rq,{isShowing:i.isShowing,trackingContextName:"Link Expired Overlay",title:_,description:t,targetKey:eq.v4,onClose:i.complete})}let cI=(0,cS.bt)(e=>e.modalShown);function cA(e){let t=(0,a.useRef)(null),n=(0,u.e)({overlay:g.K_h,priority:m.N.SECONDARY_MODAL}),r=(0,so.sZ)(),i=(0,v.md)(el.yV),l=v.md(cI)?.type===at.jS;return((0,ew.E)(n.uniqueId,[cx.q2],()=>{r&&i&&!n.isShowing&&!l&&n.show()}),(0,a.useEffect)(()=>(n.isShowing?t.current=setTimeout(()=>{t.current=null,n.complete()},45e3):t.current&&clearTimeout(t.current),()=>{t.current&&clearTimeout(t.current)}),[n]),r&&i)?a.createElement(cN,{overlay:n,org:r,file:i}):null}var cO=n(144119),cL=n(69324),cD=n(924430);function cR(){let e=(0,s.wA)(),t=(0,oG.PE)(),n=(0,eS.r1)(cD.Kt),r=(0,v.md)(n),i=(0,eS.r1)(cD.wl),l=(0,v.md)(i),o=(0,cO.sO)(),d=(0,eU.aV)(),{show:m,isShowing:p,complete:_}=(0,u.e)({overlay:g.Fff,priority:oO},[r,l]),f=(0,a.useCallback)(()=>{o&&t&&(d||m({canShow:(e,t)=>e&&!t}))},[t,d,o,m]);return(0,a.useEffect)(()=>f(),[f]),(0,cL.i)({onClickPrimaryCta:_,onClickSecondaryCta:()=>{e(c.b({agreed_to_slides_ai_terms:!1}))},isShowing:p,isOnboarding:!1,totalSteps:1})}var cM=n(726864),cP=n(576144),cF=n(366501);function cB({openFile:e}){let t=(0,tl.Gi)(),n=(0,r.kc)().pro_templates_slides_announcement,i=(0,tl.J3)(),l=(0,tl.JU)(i);return e&&e.teamId&&t?.type==="team"&&n&&l?a.createElement(cU,{teamId:e.teamId}):null}function cU({teamId:e}){let t=(0,s.wA)(),n=(0,eS.r1)(cD.Kt),r=(0,v.md)(n),i=(0,eS.r1)(cD.uM),l=(0,v.md)(i),o=(0,cM.hX)(`[data-onboarding-key="${eW.O0}"]`),c=(0,el.q5)(),d=(0,v.md)(eT.Fy),p=(0,eU.aV)(),_=(0,v.md)((0,cP.U)({teamId:e,editorType:t7._Y.SLIDES})),{numSkippedSlides:f,numTotalSlides:h}=(0,cF.Nr)(),E=h-f,{show:y,isShowing:b,complete:C}=(0,u.e)({overlay:g.uTW,priority:m.N.SECONDARY_MODAL},[r,l,d,_]),w=(0,a.useCallback)(()=>{!p&&o&&c&&y({canShow:(e,t,n,a)=>E>1&&e&&!t&&0===a&&n})},[p,o,c,y,E]);return(0,a.useEffect)(()=>w(),[w]),(0,a.useEffect)(()=>{b&&t(oe.j7({type:eW.eg,data:{targetRect:o,activePathOnMount:[(0,x.t)("tile.dropdown.publish_as_template")]}}))},[t,o,b]),a.createElement(eM.rq,{isShowing:b,userFlagOnShow:"seen_slides_pro_templates_announcement",description:(0,x.tx)("slides.templates.pro_templates_announcement.description"),trackingContextName:"Slides Pro Templates Announcement",targetKey:cD.w1,title:(0,x.tx)("slides.templates.pro_templates_announcement.header"),primaryCta:{label:(0,x.tx)("slides.templates.pro_templates_announcement.button.done"),type:"button",onClick:C,ctaTrackingDescriptor:eC.c.DONE},disableHighlight:!0,zIndex:eO.R.MODAL,arrowPosition:nv.F_.LEFT_TITLE,clickOutsideToHide:!0,onClose:C,onTargetLost:C,arrowPadding:4})}var cG=n(211041),cK=n(402609);let cV=a.memo(function({isFigjamEditor:e,isDesignEditor:t,isSlidesEditor:n,openFile:r}){let l=a.useRef(!t);a.useEffect(()=>{l.current=!t},[t]),function(e){let t=(0,v.md)(sj.a8),n=(0,s.d4)(e=>e.user?.created_at),r=!!n&&(0,eo.A)("2023-05-01").isBefore(n);a.useEffect(()=>{if(!r){e.current=!0;return}e.current=e.current||(0,s$.XC)(t)},[e,t,r]),(0,sJ.yE)("x",e),(0,sJ.yE)("y",e),(0,sJ.yE)("width",e),(0,sJ.yE)("height",e),(0,sJ.yE)("angle",e),(0,sJ.yE)("cornerRadius",e),(0,sJ.yE)("strokePaints",e),(0,sJ.yE)("fillPaints",e),(0,sJ.yE)("effects",e),(0,sJ.yE)("fontSize",e),(0,sJ.yE)("fontFamily",e),(0,sJ.yE)("fontStyle",e),(0,sY.g)("has_zoomed_in_design_file",e),(0,sq.U)("has_panned_in_design_file",e);let i=(0,u.e)({overlay:g._5$,priority:0});sX(i.uniqueId,"action_set_tool_frame","has_selected_frame_tool",e),sX(i.uniqueId,"create_frame","has_created_frame",e),sX(i.uniqueId,"create_text","has_created_text",e),e.current}(l),function(e){let t=(0,s.wA)(),n=(0,v.md)(ec.mp),r=null!=n&&(0,eo.A)("2023-10-31").isBefore(n),i=!!(0,ed.f)("has_opened_design_editor"),[l,o]=(0,v.fp)(eu);(0,a.useEffect)(()=>{r&&!i&&e&&(o(!0),t(c.b({has_opened_design_editor:!0})))},[t,i,e,o,r]),(0,a.useEffect)(()=>{l&&!e&&o(!1)},[l,e,o])}(t);let o=(0,el.MY)();return ei.z4.getIsExtension()||"loaded"!==o.status||er.pb.isGoogleClassroomIntegration()?null:a.createElement(a.Fragment,null,a.createElement(cH,{isFigjamEditor:e,isDesignEditor:t,isSlidesEditor:n,openFile:r}),!i.Ay.isIpadNative&&a.createElement(cz,{isFigjamEditor:e,isDesignEditor:t,isSlidesEditor:n,openFile:r}))});function cH({isFigjamEditor:e}){return a.createElement(a.Fragment,null,e&&a.createElement(cK.p,null,a.createElement(tV,null),a.createElement(tj,null)))}function cz({isFigjamEditor:e,isDesignEditor:t,isSlidesEditor:n,openFile:s}){let c=(0,cG.tG)(),d=(0,o.q8)();return a.createElement(a.Fragment,null,t&&!(0,l.nl)()&&a.createElement(cK.p,null,a.createElement(ti,null)),e&&!t&&a.createElement(cv.Q,null,a.createElement(cK.p,null,a.createElement(tu,null))),s?.teamId&&a.createElement(cv.Q,null,a.createElement(cK.p,{featureFlag:"pro_trials_v3_ux"},a.createElement(of,{teamId:s.teamId,isDesignEditor:t,isFigJamEditor:e}))),s?.teamId&&a.createElement(cv.Q,null,a.createElement(cK.p,null,a.createElement(o_,{teamId:s.teamId,isDesignEditor:t,isFigJamEditor:e}))),t&&a.createElement(cK.p,null,a.createElement(nR,null)),a.createElement(cK.p,null,a.createElement(nU.A,null)),a.createElement(cK.p,null,a.createElement(nG.F,null)),a.createElement(cK.p,null,a.createElement(nK.w,null)),!i.Xb&&a.createElement(a.Fragment,null,a.createElement(cK.p,null,a.createElement(nz.$l,null)),a.createElement(cK.p,null,a.createElement(ny.P,null))),s?.canEditCanvas&&e&&!t&&a.createElement(cK.p,null,a.createElement(r$,{openFile:s}),a.createElement(i3,null),a.createElement(rs,null),a.createElement(rQ,null),a.createElement(rE,null),a.createElement(ry,null)),e&&!t&&a.createElement(a.Fragment,null,a.createElement(cK.p,null,a.createElement(nH.L,null)),a.createElement(cK.p,null,a.createElement(rB,null))),a.createElement(cK.p,null,a.createElement(i4.KX,null)),e&&a.createElement(cK.p,null,a.createElement(sz,null)),a.createElement(cK.p,null,a.createElement(ld,null)),a.createElement(cK.p,null,a.createElement(lS.Wk,null)),t&&a.createElement(cK.p,null,a.createElement(co,null)),t&&a.createElement(cK.p,null,a.createElement(nE,null)),e&&a.createElement(cK.p,null,a.createElement(sG,null)),a.createElement(cK.p,null,a.createElement(cA,null)),a.createElement(cK.p,null,a.createElement(eB,null)),e&&a.createElement(a.Fragment,null,a.createElement(cK.p,null,a.createElement(tO,null))),t&&s?.canEdit&&a.createElement(cK.p,null,a.createElement(sI,null)),t&&s?.canEdit&&a.createElement(cK.p,null,a.createElement(nC,null)),t&&a.createElement(cK.p,null,a.createElement(t1,null)),a.createElement(cK.p,null,a.createElement(ty,null)),!i.Xb&&a.createElement(cK.p,null,a.createElement(nB,null)),a.createElement(cK.p,null,a.createElement(nV.b,null)),t&&a.createElement(cK.p,null,a.createElement(ly,null)),t&&a.createElement(cK.p,null,a.createElement(cy,null),a.createElement(cb,null)),t&&a.createElement(cK.p,{featureFlag:"cursor_bot"},a.createElement(cg,null),a.createElement(cf,null)),e&&!d&&!(0,r.kc)().figjam_synthesize_handbrake&&a.createElement(cK.p,null,a.createElement(ea,null)),e&&!d&&!(0,r.kc)().figjam_synthesize_handbrake&&a.createElement(cK.p,null,a.createElement(P.Cw,null)),e&&a.createElement(cK.p,null,a.createElement(tv.$8,null)),e&&a.createElement(cK.p,null,a.createElement(tq.PC,null)),c&&a.createElement(cK.p,null,e&&a.createElement(tb.vi,null)),t&&a.createElement(cK.p,null,a.createElement(eD,null)),e&&a.createElement(cK.p,null,a.createElement(ob.rj,null),a.createElement(ox,null)),t&&a.createElement(cK.p,{featureFlag:"rollout_pinned_comments_ff"},a.createElement(lw,null),a.createElement(lT,null)),a.createElement(cK.p,{featureFlag:"qa_v2"},a.createElement(nN,null)),e&&a.createElement(cK.p,null,a.createElement(oN,null),a.createElement(ah,null)),s&&a.createElement(cK.p,{featureFlag:"ui3_and_ai_welcome_modal"},a.createElement(sy,{openFile:s}),a.createElement(oM,null),a.createElement(oD,null)),a.createElement(cK.p,null,a.createElement(cR,null)),s?.canEditCanvas&&n&&a.createElement(cK.p,null,a.createElement(cB,{openFile:s})),a.createElement(cK.p,null,a.createElement(eE,null)))}},56207:(e,t,n)=>{n.d(t,{AI:()=>v,bX:()=>b,i1:()=>I,vi:()=>N});var a=n(411855),r=n(320063),i=n(374626),l=n(288706),o=n(646240),s=n(939863),c=n(101505),d=n(456104),u=n(683694),m=n(582947),p=n(397065),_=n(143678),g=n(394828),f=n(340514),h=n(493364),E=n(463546),y=n(583765);let b="ai_generate_onboarding_key",v="ai_new_file_modal_v2_onboarding_key",C="has_seen_figjam_ai_modal_overlay",w="has_seen_figjam_ai_toolbar_tooltip",T=(0,m.r1)(y.W1),S=(0,m.r1)(C),x=(0,m.r1)(w),k=(0,m.r1)("figjam_editor_onboarded");function N(){let e=(0,i.md)(x),t=(0,i.md)(y.qe),n=(0,i.md)(y.rM),r=(0,d.e)({overlay:E.QLv,priority:p.N.HIGH_PRIORITY_MODAL},[e]);return(0,a.useEffect)(()=>{let e=setTimeout(()=>{r.show({canShow:e=>!e&&n&&t})},1e3);return()=>clearTimeout(e)},[t,n,r]),a.createElement(f.rq,{isShowing:r.isShowing,userFlagOnShow:w,targetKey:b,onClose:r.complete,trackingContextName:_.e0.AI_TOPBAR_TOOLTIP,title:(0,s.tx)("whiteboard.ai_onboarding.ai_templates_toolbar.title"),description:(0,s.tx)("whiteboard.ai_onboarding.ai_templates_toolbar.description"),emphasized:!0})}function I({targetKey:e}){let t=(0,i.md)((0,l.Rq)(u.Sb)),n=(0,i.md)(T),m=(0,i.md)(S),b=(0,i.md)(k),v=(0,o.Xr)(y.RC),w=(0,d.e)({overlay:E.xiH,priority:p.N.HIGH_PRIORITY_MODAL},[n,m,t,b]);(0,r.h)(()=>{w.show({canShow:(e,t,n,a)=>!e&&!t&&!n&&a})});let x=()=>{w.complete(),v(!0)};return(0,r.h)(()=>()=>{x()}),a.createElement(f.rq,{isShowing:w.isShowing,userFlagOnShow:C,targetKey:e,onClose:x,onTargetLost:x,trackingContextName:_.e0.AI_MODAL_ONBOARDING_TOOLTIP,arrowPosition:h.F_.LEFT_TITLE,title:(0,s.tx)("whiteboard.ai_onboarding.new_file_modal.title"),media:a.createElement(g.y,{src:"https://static.figma.com/uploads/b306123ab827a626d46db70bcc5a74e9e76feacf",alt:"",aspectRatio:301/154}),description:(0,s.tx)("whiteboard.ai_onboarding.new_file_modal.footer"),primaryCta:{label:(0,s.tx)("rcs.got_it"),type:"button",onClick:x,ctaTrackingDescriptor:c.c.GOT_IT}})}},957379:(e,t,n)=>{n.d(t,{$8:()=>S,gh:()=>C,jn:()=>v});var a=n(411855),r=n(374626),i=n(913016),l=n(939863),o=n(226055),s=n(456104),c=n(683694),d=n(723239),u=n(582947),m=n(29680),p=n(335682),_=n(694687),g=n(243987),f=n(984968),h=n(397065),E=n(340514),y=n(463546);let b="seen_figjam_pages_launch_tooltip",v="used_figjam_pages",C="figjam-pages-onboarding-key",w=(0,u.r1)(b),T=(0,u.r1)(v);function S(){let e=(0,r.md)(w),t=(0,r.md)(T),n=(0,r.md)(c.zo),u=(0,r.md)(d.Fy),v=(0,o.GS)(),S=(0,m.aV)(),x=(0,p.q5)(),k=!!(x&&(0,g.dT)(x)),N=Date.now()<=i.rn.getTime()+2592e6,I=(0,f.ol)(),A=(0,_.sZ)(),O=!!(I?.student_team||A?.k12_google_org),{show:L,isShowing:D,complete:R}=(0,s.e)({overlay:y.$8i,priority:h.N.SECONDARY_MODAL},[e,n,u,t]);return a.useEffect(()=>{L({canShow:(e,t,n,a)=>!e&&k&&t&&n&&!a&&N&&!v&&!S&&!O})},[L,e,k,n,u,t,N,v,S,O]),a.createElement(E.rq,{isShowing:D,userFlagOnShow:b,emphasized:!0,title:(0,l.tx)("pages_panel.toolbar.rcs_title"),description:a.createElement("p",null,(0,l.tx)("pages_panel.toolbar.rcs_desc")),targetKey:C,onClose:R,trackingContextName:"figjam_pages_onboarding_pointer"})}},339690:(e,t,n)=>{n.d(t,{AV:()=>g,Lj:()=>f,PC:()=>v,sW:()=>E});var a=n(411855),r=n(374626),i=n(939863),l=n(226055),o=n(456104),s=n(683694),c=n(723239),d=n(582947),u=n(29680),m=n(397065),p=n(116135),_=n(463546);let g="figjam-ui3-left-panel-onboarding-key",f="figjam-ui3-right-rpanel-onboarding-key",h="seen_figjam_ui3_launch_tooltip",E="used_figjam_ui3",y=(0,d.r1)(h),b=(0,d.r1)(E);function v(){let e=(0,r.md)(y),t=(0,r.md)(b),n=(0,r.md)(s.zo),d=(0,r.md)(c.Fy),E=(0,l.GS)(),v=(0,u.aV)(),{show:C,isShowing:w,complete:T}=(0,o.e)({overlay:_.PCP,priority:m.N.SECONDARY_MODAL},[e,n,d,t]);a.useEffect(()=>{C({canShow:(e,t,n,a)=>!e&&t&&n&&!a&&E&&!v})},[C,e,n,d,t,E,v]);let S=[{title:(0,i.tx)("whiteboard.ui3_panels.rcs_title"),description:(0,i.tx)("whiteboard.ui3_left_panel.rcs_description"),trackingContextName:"figjam_ui3_left_panel_onboarding_pointer",targetKey:g,emphasized:!0,disableHighlight:!0},{title:(0,i.tx)("whiteboard.ui3_panels.rcs_title"),description:(0,i.tx)("whiteboard.ui3_right_panel.rcs_description"),trackingContextName:"figjam_ui3_right_panel_onboarding_pointer",targetKey:f,emphasized:!0,disableHighlight:!0}];return a.createElement(p.WZ,{isShowing:w,steps:S,onComplete:T,userFlagOnShow:h})}},698380:(e,t,n)=>{n.d(t,{O:()=>i});var a=n(411855),r=n(939683);function i(){let e=(0,r.U)();return(0,a.useCallback)(t=>{e("figjam_onboarding_event",t,{batchRequest:!1})},[e])}},615297:(e,t,n)=>{n.d(t,{CM:()=>h,mI:()=>E,wV:()=>v,mN:()=>y,vX:()=>b,rL:()=>C});var a=n(411855),r=n(629019),i=n.n(r),l=n(946689),o=n(511443),s=n(163023),c=n(47506),d=n(939863);function u({onClick:e,autoFocus:t,children:n,trackingEventName:r,large:o}){return a.createElement(l.vd,{className:i()({"connector_modal_cta_button--button--mhvSu text--fontPos12Whyte---tkNx text--_fontBaseWhyte--efAjI":!0,"connector_modal_cta_button--buttonLarge--4RXeh text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI":o}),onClick:e,autoFocus:t,trackingEventName:r},n)}var m=n(698380),p=n(601538),_=n(712546),g=n(406534),f=n(874529);let h="FigJam Editor Onboarding";function E(e){return a.createElement("div",{className:g.hQ},e.svg&&a.createElement("div",{className:g.ZS},a.createElement(s.B,{svg:e.svg,useOriginalSrcFills_DEPRECATED:!0})),a.createElement("div",{className:g.IP},e.titleText?e.titleText:"",e.bodyText),e.buttonText&&e.onButtonClick&&a.createElement("div",{className:g.UD},a.createElement(u,{onClick:e.onButtonClick,autoFocus:!0},e.buttonText)))}let y="https://static.figma.com/uploads/8f3066fc3906f11f2601a390725f2b7af58e01a1";function b(e){let t=(0,m.O)(),n=(0,_.hO)()<o.lc+110;return a.createElement(a.Fragment,null,e.children,a.createElement(l.vd,{className:i()(g.SZ,{[g.x1]:n}),onClick:()=>{e.onSkipClick(),(0,c.YQ)({id:p.P7}),t({eventName:"msv2_skipped",useCase:e.useCase})},autoFocus:!0,trackingProperties:{text:"Skip intro"}},(0,d.tx)("figjam_onboarding_make_something.all.skip_intro"),a.createElement(s.B,{svg:f.A})))}function v(e){return a.createElement("div",{className:i()({[g.xn]:!0})},a.createElement(E,{bodyText:e.bodyText,buttonText:e.buttonText,onButtonClick:e.onButtonClick,svg:e.svg}))}function C(e){let{useCase:t,stepName:n,stepNum:r}=e,i=(0,m.O)();(0,a.useEffect)(()=>{i({eventName:"msv2_step_shown",useCase:t,stepName:n,stepNum:r})},[n,r,i,t])}},998109:(e,t,n)=>{n.d(t,{Mw:()=>T,RJ:()=>v});var a=n(411855),r=n(320063),i=n(374626),l=n(939863),o=n(226055),s=n(456104),c=n(696673),d=n(335682),u=n(309798),m=n(833629),p=n(397065),_=n(402609),g=n(340514),f=n(756159),h=n(746806),E=n(463546),y=n(455263);let b="explore_ui_kits_tooltip--hiddenNuxAnchor--j8BjB",v="ui_kits_tooltip_onboarding_key",C="all_libraries_header_onboarding_key";function w({scrollToUiKit:e}){let t=(0,o.GS)(),n=(0,d.MY)(),{show:_,isShowing:b,complete:w}=(0,s.e)({overlay:E.ibU,priority:p.N.SECONDARY_MODAL},[n]),{hasAnyUiKit:T}=(0,c.I7)(),S=(0,i.md)(f.Cl),x=(0,m.jO)(),k=(0,y.t)(),N=(0,u.f)("seen_explore_ui_kits_blue_tooltip");(0,r.h)(()=>{!N&&x&&!k&&(T||S)&&_({canShow:e=>!!e?.canEdit,onShow:e})});let I=(0,c.oe)();return a.createElement(g.rq,{isShowing:b,targetKey:I?C:v,trackingContextName:"UI Kits Assets Panel Tooltip",userFlagOnShow:"seen_explore_ui_kits_blue_tooltip",onClose:w,arrowPosition:h.F_.LEFT_TITLE,emphasized:!0,disableHighlight:!0,description:a.createElement("div",{style:t?void 0:{width:"236px",color:"var(--color-text-onbrand)",letterSpacing:"0.055px"}},(0,l.tx)("rcs.ui_kits.explore_ui_kits_to_find_assets_you_like")),hideCloseButton:t})}function T({width:e,scrollToPreset:t}){let n=(0,o.GS)();return a.createElement(_.p,null,a.createElement("div",{style:{left:`${e}px`,top:n?"240px":"139px"},className:b,"data-onboarding-key":v}),a.createElement("div",{style:{left:`${e}px`,top:n?"192px":"100px"},className:b,"data-onboarding-key":C}),a.createElement(w,{scrollToUiKit:t}))}},455263:(e,t,n)=>{n.d(t,{t:()=>c});var a=n(835691),r=n(309798),i=n(268223),l=n(463546);let o=(0,i.Op)({initial:"ready_to_show",states:[{id:"ready_to_show",transitions:[(0,i.nr)("curator_content_shown","ui3_onboarding_was_shown_in_current_session",{condition:({event:e})=>e.properties.shown===l.S$7.id})]},{id:"ui3_onboarding_was_shown_in_current_session",terminal:!0}]}),s=(0,i.rn)("track_ui3_onboarding_shown",o);function c(){let e="ui3_onboarding_was_shown_in_current_session"===(0,a.zl)(s).currentState,t=!!(0,r.f)("figma_basics_tooltips_ui_kits_ending_step"),n=!!(0,r.f)("no_figma_basics_tooltips_ui_kits_step"),i=!!(0,r.f)("no_figma_basics_tooltips_ui_kits_ending_step");return e||t||n||i}},5231:(e,t,n)=>{n.d(t,{m5:()=>O,pN:()=>I,rj:()=>L});var a=n(411855),r=n(188507),i=n(587670),l=n(374626),o=n(288706),s=n(939863),c=n(101505),d=n(456104),u=n(683694),m=n(723239),p=n(582947),_=n(373119),g=n(177505),f=n(601607),h=n(397065),E=n(394828),y=n(340514),b=n(493364),v=n(463546),C=n(583765),w=n(315944),T=n(712546),S=n(520177),x=n(258751),k=n(787523),N=n(683568);let I="section_presets_announcement_key",A="seen_figjam_section_presets_announcement",O=(0,p.Fu)(A);function L(){let e=(0,l.md)(x.P)===k.iH.TRUE,t=(0,r.d4)(e=>e.mirror.appModel.currentPage),n=(0,f.Fk)((t,n)=>(0,g.zC)(t,n)||e&&(0,g.re)(t,n),t),p=(0,_.q)(),L=(0,l.md)((0,o.Rq)(u.Sb)),D=(0,l.md)(O),R=(0,l.md)(S.w),M=(0,T.FF)(),P=function(){let[e,t]=(0,a.useState)(!1),n=(0,r.d4)(e=>e.isMakeSomethingV2Active),i=(0,l.md)(C.rM);return(0,a.useEffect)(()=>{(n||i)&&t(!0)},[i,n]),e}(),F=(0,l.md)(C.dO),B=(0,l.md)(m.mp),U=F.status!==w.c.NONE,[G,K]=(0,a.useState)(!1),{show:V,isShowing:H,complete:z}=(0,d.e)({overlay:v.pjo,priority:h.N.SECONDARY_MODAL},[D,L,B]),W=1e3*parseFloat(N.H)+1e3;return(0,a.useEffect)(()=>{let e=setTimeout(()=>{K(!0)},W);return()=>{clearTimeout(e)}},[W]),(0,a.useEffect)(()=>{R&&!P&&!U&&n&&p&&M&&G&&V({canShow:(e,t,n)=>{let a=function(e){let t=Date.now();return e.getTime()<=t-12096e5}(n);return!e&&!t&&a}})},[V,n,p,R,M,G,U,P]),a.createElement(y.rq,{isShowing:H,userFlagOnShow:A,targetKey:I,onClose:z,trackingContextName:"section_preset_picker_dlt_announcement",title:(0,s.tx)("whiteboard.section_presets_onboarding.feature_announcement.title"),description:(0,s.tx)("whiteboard.section_presets_onboarding.feature_announcement.description"),media:a.createElement(E.w,{src:"https://static.figma.com/uploads/0ccb9b0b677f719939bd9bacd937201dfea4e8c9",aspectRatio:4/3}),primaryCta:{label:(0,s.tx)("rcs.got_it"),type:"button",onClick:z,ctaTrackingDescriptor:c.c.GOT_IT},secondaryCta:{label:(0,s.tx)("whiteboard.section_presets_onboarding.feature_announcement.secondary"),type:"button",onClick:()=>{e&&i.gw5.setFigjamStarterKitEnabled(!1),i.T4N.createSectionForOnboarding(),z()},ctaTrackingDescriptor:c.c.SECTION_PRESET_PICKER_SHOW_ME},arrowPosition:b.F_.BOTTOM})}},681816:(e,t,n)=>{n.d(t,{B5:()=>I,cH:()=>M,cU:()=>L,tp:()=>A});var a=n(411855),r=n(188507),i=n(730371),l=n(346124),o=n(587670),s=n(629019),c=n.n(s),d=n(966712),u=n(646240),m=n(563706),p=n(939863),_=n(738269),g=n(259927),f=n(809831),h=n(356390),E=n(843495),y=n(457630),b=n(237395),v=n(425187),C=n(745968),w=n(448211),T=n(839653),S=n(951034),x=n(794535),k=n(610171),N=n(120825);let I={alwaysPan:!1,noPanViewportMultiplier:.9,panJustEnoughViewportMultiplier:1.5},A={jumpOnAbort:!0};function O(e){let t=(0,l.clamp)(e.headerLevel,2,6);return e.header?a.createElement(a.Fragment,null,a.createElement("div",{role:"heading","aria-level":t,id:e.header.headerId},e.header.label),e.children):a.createElement(a.Fragment,null,e.children)}function L({nodeId:e,accessibilityScope:t,isDebugMode:n,navigate:i,suppressIds:l}){let o=(0,b.W)(e,t),s=(0,r.d4)(e=>e.mirror.appModel.showComments);if(!o)return null;let c=o.childIds.length,d=o.childIds.map((e,r)=>a.createElement(D,{key:e,nodeId:e,accessibilityScope:t,isDebugMode:n,navigate:i,setSize:c,setPosition:r+1,headingLevel:1,suppressIds:l,parent:void 0}));return a.createElement(a.Fragment,null,d,s?a.createElement(P,{guid:e,navigate:i,isDebugMode:n,parentTransformProperties:"canvas",isTopLevel:!0,parentAbsoluteTransform:void 0,intermediateTransformProperties:void 0,parentDimensions:void 0}):null)}function D({accessibilityScope:e,nodeId:t,...n}){let r=(0,b.W)(t,e);if(!r)return null;let{childIds:i,...l}=r;return a.createElement(R,{...n,...l,nodeId:t,childIds:i,accessibilityScope:e})}let R=a.memo(({childIds:e,...t})=>{let{accessibilityScope:n,isDebugMode:r,navigate:i,nodeId:l,headingLevel:o,suppressIds:s,type:c,absoluteTransform:d,dimensions:u,transformProperties:m}=t,p=(0,w.iT)(c)?o+1:o,_=e.length;return a.createElement(M,{...t,size:_},e.map((e,t)=>a.createElement(D,{key:e,nodeId:e,accessibilityScope:n,isDebugMode:r,navigate:i,headingLevel:p,setSize:_,setPosition:t+1,suppressIds:s,parent:{dimensions:u,transformProperties:m,absoluteTransform:d,guid:l}})))},function({directTextContent:e,innerTextContent:t,tableCells:n,transformProperties:a,childIds:l,stampFrequencies:o,accessibleLabel:s,absoluteTransform:c,dimensions:d,parent:u,...m},{directTextContent:p,innerTextContent:_,tableCells:g,transformProperties:f,childIds:h,stampFrequencies:E,accessibleLabel:y,absoluteTransform:b,dimensions:v,parent:C,...w}){return(0,r.bN)(m,w)&&(0,r.bN)(d,v)&&(0,r.bN)(c,b)&&(0,r.bN)(a,f)&&(0,r.bN)(o,E)&&(0,r.bN)(s,y)&&(0,r.bN)(l,h)&&(0,r.bN)(u?.absoluteTransform,C?.absoluteTransform)&&(0,r.bN)(u?.dimensions,C?.dimensions)&&(0,r.bN)(u?.transformProperties,C?.transformProperties)&&(0,i.deepEquals)(e,p)&&(0,i.deepEquals)(t,_)&&(0,i.deepEquals)(n,g)});function M({children:e,setSize:t=1,setPosition:n=1,headingLevel:i=2,author:l,transformProperties:s,directTextContent:b,innerTextContent:S,tableCells:k,headerLabel:L,guid:D,isDebugMode:R,navigate:M,ariaRole:F,name:B,shapeType:U,size:G,type:K,nodeId:V,suppressIds:H,stampFrequencies:z,accessibleLabel:W,contentsHidden:j,dimensions:$,absoluteTransform:q,parent:Y}){let X;let J=(0,r.Pj)(),Z=J.getState().comments.showResolved,Q=(0,r.d4)(e=>e.mirror.appModel.showComments),ee=J.getState().mirror.sceneGraph,et=(0,w.iT)(K)?i+1:i,en=(0,f.E3)(),ea=(0,T.E)({type:K,shapeType:U,ariaRole:F,name:B,setData:{size:t,i:n,headerLevel:i},numChildren:G,stampFrequencies:z,accessibleLabel:W,contentsHidden:j,editorType:en}),er=!Y;if((0,d.kc)().a11y_dom_css_positioning)X=er?(0,w.EO)($,q):(0,w.EO)($,q,Y.dimensions,Y.absoluteTransform);else{let e=er?"canvas":Y.transformProperties;X=(0,w.l0)(s,e)}let ei=(0,x.rp)(b,x.d2.SEMANTIC),el=(0,x.rp)(S,x.d2.SEMANTIC),eo=(0,x.Dm)(ee,V,k),es=L?{label:L,headerId:`sectionHeaderFor-${D}`}:null,ec=(0,r.d4)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection);return(e.mirror.appModel.activeCanvasEditModeType!==o.m1T.TEXT&&1===t.length?t[0]:"")===D}),{groupCommentNodeId:ed,groupCommentTransformProperties:eu,groupSize:em}=function(e,t){let n,a,r;let i=t.get(e)?.parentGuid,l=i?t.get(i):void 0;for(;l?.resizeToFit;){n=l.guid??e;let a=l.parentGuid;l=a?t.get(a):void 0}if(n){let t=o.glU.getSortedChildGuids(n);t.length>0&&t[t.length-1]===e?(r=t.length,a=(0,w.xR)(o.Egt.getNodeTransformProperties(n))):n=void 0}return{groupCommentNodeId:n,groupCommentTransformProperties:a,groupSize:r}}(D,ee);(function(e,t,n,r,i,l,o,s,c){let d=(0,u.Xr)(v.f),m=(0,f.E3)();a.useEffect(()=>{e&&d({type:"SET_CURRENTLY_SELECTED_NODE",payload:{nodeId:c,ariaLabel:(0,T.E)({type:t,shapeType:n,name:r,accessibleLabel:i,setData:{size:l,i:o,headerLevel:s},editorType:m})}})},[i,s,o,e,r,c,n,l,t,d,m])})(ec,K,U,B,W,t,n,i,V),a.useLayoutEffect(()=>{if(H)return;let e=document.getElementById(D);e&&(ec&&!o.VDs.getExpectingTextInput()?(e.setAttribute("tabindex","0"),e.focus()):(e.setAttribute("tabindex","-1"),e.blur()))},[D,ec,H]);let[ep,e_]=(0,C.l)(R?[Y,l,s,b,S,L,D,ec,F,B,U,K,V,H]:[]);return a.createElement(a.Fragment,null,a.createElement("div",{id:H?void 0:D,ref:e_,role:F,className:c()(N.rH,R&&ep),style:X,"aria-label":ea,tabIndex:-1,contentEditable:m.Ay.windows&&ec?"true":void 0,onContextMenu:e=>{J.dispatch(_.j7({type:g.K9,data:{clientX:e.clientX,clientY:e.clientY}})),e.preventDefault()},onFocus:e=>{e.target!==e.currentTarget||e.relatedTarget===e.currentTarget||ec||(E.wr(),E.Dh([D]),h.Y5.commit(),M((0,y.QZ)({nodeId:D,...I}),A))},"data-guid":H?D:void 0,"data-fullscreen-intercept-dangerously-include-tab":!0},a.createElement(O,{header:es,headerLevel:et},el.length>0?el:null,ei.length>0?ei:null,null!=l&&(0,p.tx)("fullscreen.accessibility.author",{authorName:l}),eo.length>0?eo:null,e),Q?a.createElement(P,{guid:D,navigate:M,isDebugMode:R,parentTransformProperties:s,showResolved:Z,intermediateTransformProperties:void 0,parentAbsoluteTransform:q,parentDimensions:$}):null),Q&&ed?a.createElement(P,{guid:ed,navigate:M,isDebugMode:R,parentTransformProperties:"canvas",intermediateTransformProperties:eu??s,showResolved:Z,groupSize:em,parentAbsoluteTransform:void 0,parentDimensions:void 0}):null)}function P({guid:e,isDebugMode:t,navigate:n,isTopLevel:r,groupSize:i,parentTransformProperties:l,intermediateTransformProperties:o,showResolved:s,parentAbsoluteTransform:c,parentDimensions:d}){let u=(0,k.x)(e,s),m=a.createElement(S.X,{threads:u,navigate:n,isDebugMode:t,parentTransformProperties:l,intermediateTransformProperties:o,parentAbsoluteTransform:c,parentDimensions:d});if(!u||0===u.length)return null;if(r)return a.createElement("div",{role:"region","aria-labelledby":"canvas-comments-heading"},a.createElement("h2",{id:"canvas-comments-heading"},(0,p.tx)("fullscreen.accessibility_dom.unattached_comments")),m);if(!i)return m;{let e=(0,p.t)("fullscreen.accessibility_dom.grouped_comments",{groupSize:i});return a.createElement("div",{role:"group","aria-label":e},m)}}},199465:(e,t,n)=>{n.d(t,{T:()=>el,G:()=>en});var a=n(411855),r=n(188507),i=n(629019),l=n.n(i),o=n(395096),s=n(121913),c=n(966712),d=n(563706),u=n(96328),m=n(192437),p=n(939863),_=n(392592),g=n(37943),f=n(529906),h=n(516398),E=n(617453),y=n(630331),b=n(457630),v=n(100197),C=n(239671),w=n(325621),T=n(554905),S=n(448211),x=n(587670),k=n(842164),N=n(730371);class I{constructor(e){this.store=e}get graph(){return this.store.getState().mirror.sceneGraph}id(e){return e.guid}isRoot(e){let t=this.parent(e);return!t||"DOCUMENT"===t.type}parent(e){let t=e.parentNode;return t&&"DOCUMENT"!==t.type?t:void 0}interpret(e){if(!e)return{inclusion:k.vF.OMIT};let t=this.getInclusion(e);if(t!==k.vF.INCLUDE)return{inclusion:t};let n=(0,S.xR)(x.Egt.getNodeTransformProperties(e.guid)),a=(0,S.U3)(e),r=(0,S.sh)({type:e.type,name:e.name}),i=(0,S.q4)(e),l=(0,S.q4)(e.textSublayer),o=x.Egt.getStickableFrequencies(e.guid)||{},s=e.accessibleLabel,c="TABLE"===e.type?(0,S.qJ)(this.graph,e):null,d="SECTION"===e.type&&e.sectionContentsHidden;return{guid:e.guid,inclusion:k.vF.INCLUDE,type:e.type,author:e.authorVisible&&e.authorName?e.authorName:null,directTextContent:i,innerTextContent:l,tableCells:c,transformProperties:n,ariaRole:a,name:e.name,headerLabel:r,shapeType:"SHAPE_WITH_TEXT"===e.type?e.shapeWithTextType:null,stampFrequencies:o,accessibleLabel:s,contentsHidden:d,absoluteTransform:e.absoluteTransform,dimensions:e.size}}comparePayloads(e,t){if(A(e)&&A(t))return(0,r.bN)(e.inclusion,t.inclusion);if(A(e)||A(t))return!1;{let{transformProperties:n,directTextContent:a,innerTextContent:i,stampFrequencies:l,accessibleLabel:o,dimensions:s,absoluteTransform:c,...d}=e,{transformProperties:u,directTextContent:m,innerTextContent:p,stampFrequencies:_,accessibleLabel:g,dimensions:f,absoluteTransform:h,...E}=t;return(0,r.bN)(d,E)&&(0,r.bN)(s,f)&&(0,r.bN)(c,h)&&(0,r.bN)(n,u)&&(0,r.bN)(l,_)&&(0,r.bN)(o,g)&&(0,N.deepEquals)(a,m)&&(0,N.deepEquals)(i,p)}}}function A(e){return void 0!==e&&"inclusion"in e&&1===Object.keys(e).length}class O extends I{children(e){return e.childrenNodes}getInclusion(e){return"SECTION_OVERLAY"===e.type?k.vF.OMIT:k.vF.INCLUDE}}var L=n(862442),D=n(601607),R=n(681816),M=n(237395),P=n(752795),F=n(126049),B=n(234945);function U({logAction:e,nodeMapping:t,currentPage:n,extractorCtor:i}){let l=(0,r.Pj)(),o=(0,a.useMemo)(()=>new i(l),[l,i]),s=(0,M._)(o,e),c=(0,r.d4)(B.dK);(0,r.d4)(B.Xt);let d=(0,F.A)(()=>{if(!n)return;let e=x.AlE.getActiveDocument(),t=x.yGz.flushChangedNodes(e);if(t.length){let e=t.map(e=>c.get(e)).filter(P.isNotNullish);s.updateDirtyNodes(e)}},500,{leading:!0,trailing:!0,maxWait:1e3});(0,a.useEffect)(d);let u=n?x.AlE.getActiveDocument():void 0;return(0,a.useEffect)(()=>{if(void 0!==u)return x.yGz.setMapping(u,t),()=>{x.yGz.flushChangedNodes(u),x.yGz.setMapping(u,x.Zbk.NONE)}},[u,t]),(0,a.useEffect)(()=>{if(!n)return;let e=l.getState().mirror.sceneGraph.get(n);e&&s.updateDirtyNodes([e])},[n,l,s]),s}let G=(0,a.memo)(function({navigationTelemetryTag:e,accessibilityLogAction:t,extractorCtor:n,nodeMapping:i}){let l=(0,D.Fk)(e=>e.getCurrentPage()?.guid),o=(0,L.Z)(e),s=(0,v.J2)((0,E.UK)().accessibilityDomDebug),c=U({currentPage:l,extractorCtor:n,logAction:t,nodeMapping:i}),{self:d,parent:u,child:m,next:p,prev:_,siblingCount:g,positionAmongSiblings:f}=function(e,t){let{parentId:n,childId:a,prevId:r,nextId:i,selfId:l,siblingCount:o,positionAmongSiblings:s}=(0,D.wA)((e,t,n)=>{let a,r,i;let l=e.get(t),o=l?function(e,t){let n=e?.parentNode??null;for(;n&&t.adjacencies.get(n.guid)?.inclusion!==k.vF.INCLUDE;)n=n.parentNode;return n}(l,n):null,s=o?n.adjacencies.get(o.guid)?.childIds:[];s?.length&&((i=s.indexOf(t))>0&&(a=s[i-1]),i<s.length-1&&(r=s[i+1]));let c=n.adjacencies.get(t)?.childIds?.[0];return{selfId:l?.guid,parentId:o?.type==="CANVAS"?void 0:o?.guid,prevId:a,nextId:r,childId:c,siblingCount:s?.length,positionAmongSiblings:i}},e,t);return{parent:(0,M.W)(n,t),child:(0,M.W)(a,t),next:(0,M.W)(i,t),prev:(0,M.W)(r,t),self:(0,M.W)(l,t),siblingCount:o,positionAmongSiblings:s}}((0,r.d4)(e=>{let t=e.mirror.appModel.currentPage;return Object.keys(e.mirror.sceneGraphSelection)[0]||t||"-1:-1"}),c);if(!(d&&(0,k.R4)(d)))return null;let h=u&&(0,k.J4)(u),y=a.createElement(a.Fragment,null,_&&(0,k.R4)(_)&&a.createElement(R.cH,{isDebugMode:s,navigate:o,accessibilityScope:c,..._,size:_.childIds.length||0,nodeId:_.guid,setSize:g??1,headingLevel:0,setPosition:void 0!==f?f-1:0,parent:h}),a.createElement(R.cH,{isDebugMode:s,navigate:o,accessibilityScope:c,...d,size:d.childIds.length||0,nodeId:d.guid,setSize:g??1,headingLevel:0,setPosition:f??0,parent:h},m&&(0,k.R4)(m)&&a.createElement(R.cH,{isDebugMode:s,navigate:o,accessibilityScope:c,...m,size:m.childIds.length||0,nodeId:m.guid,setSize:1,headingLevel:0,setPosition:0,parent:d})),p&&(0,k.R4)(p)&&a.createElement(R.cH,{isDebugMode:s,navigate:o,accessibilityScope:c,...p,size:p.childIds.length||0,nodeId:p.guid,setSize:g??1,headingLevel:0,setPosition:void 0!==f?f+1:0,parent:h}));return h?.transformProperties?a.createElement(R.cH,{isDebugMode:s,navigate:o,accessibilityScope:c,...h,size:h.childIds.length,nodeId:h.guid,setSize:1,headingLevel:0,setPosition:0,parent:void 0},y):y}),K=(0,a.memo)(function(){return a.createElement(G,{accessibilityLogAction:s.h.DESIGN_UPDATE_NODE,extractorCtor:O,navigationTelemetryTag:"design_navigate",nodeMapping:x.Zbk.DESIGN})});var V=n(964881);let H=(0,a.memo)(function(){let e=(0,V.l7)();return(0,V.hA)()&&!e?a.createElement(G,{accessibilityLogAction:s.h.DEVMODE_UPDATE_NODE,extractorCtor:O,navigationTelemetryTag:"devmode_navigate",nodeMapping:x.Zbk.DESIGN}):null});class z extends I{children(e){return(0,S.dl)(this.graph,e)?[]:x.glU.getSortedChildGuids(e.guid).map(e=>this.graph.get(e)).filter(P.isNotNullish)}getInclusion(e){return"SECTION_OVERLAY"===e.type?k.vF.OMIT:e.resizeToFit?k.vF.CHILDREN:k.vF.INCLUDE}}let W=(0,a.memo)(function(e){let t=(0,D.Fk)(e=>e.getCurrentPage()?.guid),n=(0,L.Z)("figjam_navigate"),r=(0,v.J2)((0,E.UK)().accessibilityDomDebug),i=U({currentPage:t,extractorCtor:z,logAction:s.h.FIGJAM_UPDATE_NODE,nodeMapping:x.Zbk.FIGJAM});return a.createElement(R.cU,{nodeId:t||"",accessibilityScope:i,navigate:n,isDebugMode:r,parent:void 0})}),j=a.createContext({getLastEventWasTab:()=>!1});function $({children:e}){let t=(0,a.useRef)(!1);(0,a.useEffect)(()=>{let e=()=>{t.current=!1},n=({key:e})=>{t.current="Tab"===e};return document.addEventListener("pointerdown",e),document.addEventListener("pointermove",e),document.addEventListener("keydown",n),()=>{document.removeEventListener("pointerdown",e),document.removeEventListener("pointermove",e),document.removeEventListener("keydown",n)}},[]);let n=(0,a.useCallback)(()=>t.current,[]),r=(0,a.useMemo)(()=>({getLastEventWasTab:n}),[n]);return a.createElement(j.Provider,{value:r},e)}var q=n(274071),Y=n(157663),X=n(794272),J=n(809831),Z=n(356390),Q=n(913964);let ee="textInputRegistered";var et=n(120825);let en=a.createContext({loggerEventName:"uninit_navigate"}),ea={loadAction:s.h.FIGJAM_INITIAL_TREE_LOAD,RootComponent:W},er={loadAction:s.h.DESIGN_INITIAL_TREE_LOAD,RootComponent:K},ei={loadAction:s.h.DEVMODE_INITIAL_TREE_LOAD,RootComponent:H},el=(0,a.memo)(function(){return a.createElement($,null,a.createElement(eo,null))});function eo(){let e=(0,r.d4)(e=>e.selectedView.editorType),{loggerEventName:t}=a.useContext(en);!function({loggerEvent:e}){let t=(0,L.Z)(e),{getLastEventWasTab:n}=(0,a.useContext)(j),i=(0,r.d4)(e=>1===Object.keys(e.mirror.sceneGraphSelection).length?Object.keys(e.mirror.sceneGraphSelection)[0]:null),l=a.useMemo(()=>x.CUU&&x.CUU.exists(x.Sie.REDUX)?x.CUU.getSelectedTextRange(x.Sie.REDUX)?.textNodeId:null,[]),o=i||l;a.useEffect(()=>{o&&n()&&t((0,b.QZ)({nodeId:o,...R.B5}),R.tp)},[t,n,o])}({loggerEvent:t});let n=(0,f.e)();(0,q.of)(e);let i=(0,r.wA)(),l=(0,r.d4)(e=>!!e.modalShown);(0,a.useEffect)(()=>{n&&d.Xb&&(l||i(_.F.enqueue({message:(0,p.t)("fullscreen.accessibility.platform_error"),role:"alert",type:"accessibility-dom-react-error"})),i((0,g.mC)({errorType:"platform_error"})))},[i,l,n]);let o=a.useRef(null);(0,h.k4)(o);let s=!d.Xb,u=a.useMemo(()=>(function(e){switch(e){case C.nT.Design:return(0,c.u4)("a11y_design_dom_mirror",er,void 0);case C.nT.DevHandoff:return(0,c.u4)("a11y_dev_mode_screenreader",ei,void 0);case C.nT.Whiteboard:return ea;default:return}})(e),[e]);if(!s)return null;if(!(u&&n))return a.createElement(w.K,null);{let{loadAction:e,RootComponent:t}=u;return a.createElement(m.tH,{onError:()=>{l||i(_.F.enqueue({message:(0,p.t)("fullscreen.accessibility.dom_error"),role:"alert",type:"accessibility-dom-react-error"})),i((0,g.mC)({errorType:"render_error"}))},fallback:a.createElement("div",null),boundaryKey:"FigjamAccessibilityTreeInnerWithViewport"},a.createElement(es,{loadAction:e,accessibleAreaRef:o},a.createElement(t,null)))}}function es({children:e,accessibleAreaRef:t,loadAction:n}){let i=(0,b._X)({subscribeToUpdates_expensive:!0});!function(){let e=(0,a.useRef)(),t=(0,a.useRef)(!1),n=(0,a.useRef)({value:null}),i=Z.Y5&&Z.Y5.isReady()&&x.VDs.getFocusElementsRegistered(),l=(0,J.E3)(),o=(0,r.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),s=(0,r.d4)(e=>e.mirror.sceneGraphSelection),c=(0,r.d4)(e=>e.mirror.sceneGraph),{textValue:d,selectionRange:u}=(0,X.R)(e=>{let t=e.mirror.appModel.activeCanvasEditModeType,n=e.mirror.sceneGraph,a=e.mirror.sceneGraphSelection;if(t!==x.m1T.TEXT)return{textValue:null,selectionRange:null};let r=Object.keys(a);if(0===r.length)return{textValue:null,selectionRange:null};let i=n.get(r[r.length-1]);if(null==i)return{textValue:null,selectionRange:null};let l=null!=i.containingCanvas?n.get(i.containingCanvas):null,o=l?.getSelectedTextRange();return{textValue:i?.textContent,selectionRange:o}});n.current.value=d,n.current.selectionStart=u?.start,n.current.selectionEnd=u?.end;let m=(0,a.useCallback)((n,a,r)=>{t.current||null==e.current||null==n||(e.current.value=n),t.current||null==e.current||null==a||null==r||e.current.setSelectionRange(a,r)},[]);(0,a.useEffect)(()=>{m(d,u?.start,u?.end)},[d,u?.end,u?.start,u?.textNodeId,m]);let _=()=>{t.current=!1},g=()=>{t.current=!0},f=(0,a.useCallback)(()=>{m(n.current.value,n.current.selectionStart,n.current.selectionEnd),t.current=!1},[m]);(0,a.useEffect)(()=>{if(i){if(e.current=function(){let e=document.getElementById("fullscreen-root")?.getElementsByClassName("focus-target"),t=null==e?null:Array.from(e).filter(e=>"textarea"===e.tagName.toLowerCase()&&!e.hasAttribute("readonly")).map(e=>e);return t?.length===1?t[0]:null}(),e.current?.hasAttribute(ee)){Y.k.error("Input mirror hook registered multiple times");return}return e.current?.setAttribute(ee,"true"),e.current?.addEventListener("compositionend",_),e.current?.addEventListener("compositionstart",g),e.current?.addEventListener("focus",f),e.current?.addEventListener("input",_),()=>{e.current?.removeAttribute(ee),e.current?.removeEventListener("compositionend",_),e.current?.removeEventListener("compositionstart",g),e.current?.removeEventListener("focus",f),e.current?.removeEventListener("input",_)}}},[i,f]);let h=o===x.m1T.TEXT?function(e,t,n){let a=Object.keys(t),r=a.length>0?e.get(a[0]):null,{guid:i,type:l,shapeWithTextType:o}=r??{guid:void 0,type:void 0,shapeWithTextType:void 0};if(null==i)return"";if("SHAPE_WITH_TEXT"===l)return(0,S.ZG)(o);if("TABLE"===l){let t=e.get(a[a.length-1]);if(null==t)return(0,Q.r)(l,n);{let{tableCellRowIndex:e,tableCellColumnIndex:n}=t;return(0,p.t)("fullscreen.accessibility_dom.node_name_table_cell",{r:e,c:n})}}return r?.isSymbolSublayer||r?.isInstanceSublayer?(0,p.t)("fullscreen.accessibility_dom.node_name_instance"):(0,Q.r)(l,n)}(c,s,l):"";(0,a.useEffect)(()=>{e.current&&(e.current.ariaLabel=h)},[h])}();let[c]=(0,o.A)(i,500,{trailing:!0}),d=(0,v.J2)((0,E.UK)().accessibilityDomDebug),m=(0,T.Td)();(0,y.gf)();let _=(0,r.wA)();(0,a.useEffect)(()=>{_((0,g.mC)({errorType:null}))},[_]),(0,a.useEffect)(()=>{(0,s.f)(n)},[n]);let f=(0,a.useMemo)(()=>m?(0,u.Yx)([(0,p.t)("fullscreen.accessibility.main_region"),(0,p.t)("fullscreen.filename_view.view-only")],"unit"):(0,p.t)("fullscreen.accessibility.main_region"),[m]),h=(0,a.useMemo)(()=>(0,S.it)(c),[c]),C=l()(et.kL,{[et.Qg]:!d});return a.createElement("div",{className:C,ref:e=>{t.current=e},id:q.Gl,"aria-label":f,role:"main",tabIndex:0,"data-fullscreen-intercept-dangerously-include-tab":!0,onFocusCapture:()=>{t.current?.setAttribute("aria-hidden","false")}},a.createElement("div",{style:h},e))}},500392:(e,t,n)=>{n.d(t,{S:()=>i,T:()=>r});var a=n(111799);function r(e){var t=(0,a.g)(e);return function(e){let t=new DOMParser().parseFromString(e,"text/html");return t.querySelectorAll("pre").forEach(e=>{let t=document.createElement("div");t.classList.add("ql-code-block-container"),t.setAttribute("spellcheck","false"),e.querySelectorAll("span").forEach(e=>{let n=document.createElement("div");n.classList.add("ql-code-block"),n.innerHTML=e.innerHTML,t.appendChild(n)}),e.replaceWith(t)}),t.body.innerHTML}(t=(t=t.replace(/class="[^"]*"/g,"")).replace(/dir="[^"]*"/g,""))}function i(e){e.querySelectorAll("div.ql-code-block-container").forEach(e=>{let t=document.createElement("pre"),n=e.querySelectorAll("div.ql-code-block");n.forEach((e,a)=>{let r=document.createElement("span");r.innerHTML=e.innerHTML,t.appendChild(r),a<n.length-1&&t.appendChild(document.createElement("br"))}),e.replaceWith(t)})}},639645:(e,t,n)=>{n.d(t,{s:()=>p});var a=n(411855),r=n(111799),i=n(413887),l=n(296210),o=n.n(l),s=n(922070),c=n(563042),d=n(500392);let u={ALLOWED_TAGS:["p","ol","ul","blockquote","h1","h2","strong","em","s","a","li","code","pre","br","div"]},m=o()();function p({htmlString:e,setIsInitialized:t}){let[n]=(0,i.DF)();return(0,a.useEffect)(()=>{n.update(()=>{let a=new DOMParser,i=m.sanitize((0,c.mm)(e),u),l=a.parseFromString(i,"text/html");(0,d.S)(l);let o=(0,r.d)(n,l),p=o.filter(e=>!!e.getParent()||(0,s.ff)(e));p.length!==o.length&&console.warn("Unabled to render some annotation data"),(0,s.Ni)().clear(),(0,s.H2)(p),t&&t(!0)})},[n,e,t]),a.createElement(a.Fragment,null)}},868802:(e,t,n)=>{n.d(t,{A:()=>l});var a=n(444751),r=n(413887),i=n(922070);function l(){let[e]=(0,r.DF)();return e.registerCommand(i.gC,e=>{let t=(0,i.vJ)();if((0,i.I2)(t)){let l=t.anchor.getNode(),o=l.getParent();if(o&&(0,i.hV)(o)&&(0,a.a5)(l)){var n=l.getChildren();if(n.length>0){var r=n[n.length-1];(0,i.wH)(r)&&r.remove()}let t=(0,i.lJ)();return n.length>0?l.insertAfter(t):l.replace(t),t.select(),e.preventDefault(),!0}}return!1},i.Jj),null}},420935:(e,t,n)=>{n.d(t,{A:()=>u});var a=n(411855),r=n(109388),i=n(75395),l=n(813746),o=n(413887),s=n(984611),c=n(922070),d=n(335047);function u({anchorElem:e=document.body,isLinkEditMode:t,setIsLinkEditMode:n}){let[i]=(0,o.DF)();return function(e,t,n,i){let[o,u]=(0,a.useState)(e),[p,_]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{function t(){let e=(0,c.vJ)();if((0,c.I2)(e)){let t=(0,d.OL)(e),n=(0,s.Bt)(t,l.FJ),a=(0,s.Bt)(t,l.iK);if(!(n||a)){_(!1);return}e.getNodes().filter(e=>!(0,c.wH)(e)).find(e=>{let t=(0,s.Bt)(e,l.FJ),r=(0,s.Bt)(e,l.iK);return n&&!n.is(t)||t&&!t.is(n)||a&&!a.is(r)||r&&(!r.is(a)||r.getIsUnlinked())})?_(!1):_(!0)}}return(0,s.Sd)(e.registerUpdateListener(({editorState:e})=>{e.read(()=>{t()})}),e.registerCommand(c.Mv,(e,n)=>(t(),u(n),!1),c.d),e.registerCommand(c.d8,e=>{let t=(0,c.vJ)();if((0,c.I2)(t)){let n=(0,d.OL)(t),a=(0,s.Bt)(n,l.FJ);if((0,l.FJ)(a)&&(e.metaKey||e.ctrlKey))return window.open(a.getURL(),"_blank"),!0}return!1},c.Ac))},[e]),(0,r.createPortal)(a.createElement(m,{editor:o,isLink:p,anchorElem:t,setIsLink:_,isLinkEditMode:n,setIsLinkEditMode:i}),t)}(i,e,t,n)}function m({editor:e,isLink:t,setIsLink:n,anchorElem:r,isLinkEditMode:o,setIsLinkEditMode:u}){let m=(0,a.useRef)(null),p=(0,a.useRef)(null),[_,g]=(0,a.useState)(""),[f,h]=(0,a.useState)("https://"),[E,y]=(0,a.useState)(null),b=(0,a.useCallback)(()=>{let t=(0,c.vJ)();if((0,c.I2)(t)){let e=(0,d.OL)(t),n=(0,s.Bt)(e,l.FJ);n?g(n.getURL()):(0,l.FJ)(e)?g(e.getURL()):g(""),o&&h(_)}let n=m.current,a=window.getSelection(),i=document.activeElement;if(null===n)return;let p=e.getRootElement();if(null!==t&&null!==a&&null!==p&&p.contains(a.anchorNode)&&e.isEditable()){let e=a.focusNode?.parentElement?.getBoundingClientRect(),i=r.firstChild&&r.firstChild.className.includes("asset_description_lexical_editor")?-150:20;e&&(e.y+=i,(0,d.LR)(e,n,r)),y(t)}else i&&i.className.includes("linkInput")||(null!==p&&(0,d.LR)(null,n,r),y(null),u(!1),g(""));return!0},[r,e,u,o,_]);(0,a.useEffect)(()=>(0,s.Sd)(e.registerUpdateListener(({editorState:e})=>{e.read(()=>{b()})}),e.registerCommand(c.Mv,()=>(b(),!0),c.Ac),e.registerCommand(c.cq,e=>!!e.metaKey&&"k"===e.key&&(n(!0),u(!0),!0),c.Wg),e.registerCommand(c.Q$,()=>!!t&&(n(!1),!0),c.Wg)),[e,b,n,t,u]),(0,a.useEffect)(()=>{e.getEditorState().read(()=>{b()})},[e,b]),(0,a.useEffect)(()=>{o&&p.current&&p.current.focus()},[o,t]);let v=e=>{"Enter"===e.key?(e.preventDefault(),C()):"Escape"===e.key&&(e.preventDefault(),u(!1))},C=()=>{if(null!==E){let t=(0,d.Jf)(f);""!==t&&(e.dispatchCommand(l.yW,{url:t,target:"_blank",rel:"noreferrer noopener nofollow ugc"}),h("https://"),u(!1))}};return t?a.createElement("div",{ref:m,className:"floating_link_editor_plugin--linkEditor--5R6gJ"},o?a.createElement(a.Fragment,null,a.createElement("input",{ref:p,className:"floating_link_editor_plugin--linkInput--dh-ah",value:f,onChange:e=>{h(e.target.value)},onKeyDown:e=>{v(e)}}),a.createElement(i.E,{className:"floating_link_editor_plugin--saveButton--seMQP",onClick:()=>{C()}},"Save")):a.createElement("div",{className:"floating_link_editor_plugin--linkView--s9v0u"},a.createElement("a",{href:(0,d.Jf)(_),target:"_blank",rel:"noopener noreferrer"},_),a.createElement(i.E,{className:"floating_link_editor_plugin--editButton--SWzhy",onClick:()=>{h(_),u(!0)}},"Edit"))):a.createElement(a.Fragment,null)}},335047:(e,t,n)=>{n.d(t,{Jf:()=>i,LR:()=>l,OL:()=>r});var a=n(461838);function r(e){let t=e.anchor,n=e.focus,r=e.anchor.getNode(),i=e.focus.getNode();return r===i?r:e.isBackward()?(0,a.Nx)(n)?r:i:(0,a.Nx)(t)?r:i}function i(e){var t=e;return/^mailto:/.test(t)||(/^[^\s@\/]+@[^\s@\/]+\.[^\s@\/]+$/.test(t)?t=`mailto:${t}`:/^https?:\/{2}/.test(t)||(t=`http://${t}`)),t}function l(e,t,n){let a=n.parentElement;if(null===e||!a){t.style.opacity="0",t.style.transform="translate(-10000px, -10000px)";return}let r=t.getBoundingClientRect(),i=n.getBoundingClientRect(),l=a.getBoundingClientRect(),o=e.top-10,s=e.left-5;o<l.top&&(o+=r.height+e.height+20),s+r.width>l.right&&(s=l.right-r.width-5),o-=i.top,s-=i.left,t.style.opacity="1",t.style.transform=`translate(${s}px, ${o}px)`}},814048:(e,t,n)=>{n.d(t,{A:()=>s});var a=n(411855),r=n(813746),i=n(413887),l=n(922070),o=n(335047);let s=function(){let[e]=(0,i.DF)();return(0,a.useEffect)(()=>{let t=e.registerCommand(l.w,t=>{let n=t.clipboardData;if(!n)return!1;let a=n.getData("text");return!!function(e){try{return new URL(e),!0}catch(e){return!1}}(a)&&""!==(0,o.Jf)(a)&&(e.update(()=>{let e=(0,l.vJ)();if((0,l.I2)(e)){let t=(0,r.zA)(a,{target:"_blank",rel:"noreferrer noopener nofollow ugc"}),n=e.getTextContent(),i=(0,l.sT)(n||a);t.append(i),e.insertNodes([t])}}),t.preventDefault(),!0)},l.Wg);return()=>{t()}},[e]),null}},131281:(e,t,n)=>{n.d(t,{b:()=>nC});var a=n(411855),r=n(593392),i=n(109388),l=n(188507),o=n(752795),s=n(587670),c=n(612028),d=n(939683),u=n(966712),m=n(374626),p=n(153234),_=n(763499),g=n(239349),f=n(964881),h=n(975350),E=n(949632),y=n(779709),b=n(630331),v=n(457630),C=n(29680),w=n(335682),T=n(528859),S=n(100197),x=n(601607),k=n(507956),N=n(319882),I=n(343887),A=n(75395),O=n(844519),L=n(882316),D=n(86625),R=n(707458),M=n(629019),P=n.n(M),F=n(663668),B=n(646240),U=n(860601),G=n(812115),K=n(522739),V=n(966981),H=n(163023),z=n(939863),W=n(259927),j=n(798099),$=n(356390),q=n(498606),Y=n(100303),X=n(233890),J=n(444751),Z=n(813746),Q=n(320174),ee=n(919911),et=n(399260),en=n(300638),ea=n(171931),er=n(822094),ei=n(541535),el=n(849271),eo=n(239251),es=n(376962),ec=n(908838),ed=n(226661),eu=n(736923),em=n(922070),ep=n(500392),e_=n(639645),eg=n(413887);function ef({lexicalDefaultValue:e}){let[t]=(0,eg.DF)();try{JSON.stringify(t.getEditorState().toJSON())!==e&&t.update(()=>{let n=t.parseEditorState(e);t.setEditorState(n)})}catch(e){console.error("Error updating editor state",e)}return null}var eh=n(868802),eE=n(420935),ey=n(814048),eb=n(984611);function ev({onEnterPressed:e}){let[t]=(0,eg.DF)();return a.useEffect(()=>(0,eb.Sd)(t.registerCommand(em.if,n=>{if(n&&n.shiftKey)return n.preventDefault(),t.dispatchCommand(em.XK,void 0);let a=(0,em.vJ)();if((0,em.I2)(a)){let e=a.anchor.getNode().getParent();if(e&&(0,Q.Mz)(e)||e&&(0,Q.HY)(e))return!1}return e(),!0},em.Jj)),[t,e]),null}let eC="annotation_lexical_editor--heading--Y-FlE";function ew({defaultValue:e,onInputChange:t,lexicalDefaultValue:n,onLexicalInputChange:r,isEditable:i,onEnterPressed:l}){let o=(0,u.kc)().ext_lexical_markdown_annotations&&n,s={namespace:"annotation-lexical-editor",onError(e){console.error(e)},theme:{link:i?"annotation_lexical_editor--link--p4qzL":"annotation_lexical_editor--linkReadOnly--0Ga9J",list:{listitem:"annotation_lexical_editor--listItem--7pRsS",ol:"annotation_lexical_editor--listOl--3PC6m",ul:"annotation_lexical_editor--listUl--bScae"},text:{bold:"annotation_lexical_editor--textBold--TPFH7",italic:"annotation_lexical_editor--textItalic--EyWoo",strikethrough:"annotation_lexical_editor--textStrikethrough--BPwhx",code:"annotation_lexical_editor--inlineCode--eKvp9"},paragraph:"annotation_lexical_editor--paragraph--jyKtB",heading:{h1:eC,h2:eC},code:"annotation_lexical_editor--codeBlock--KoxzV"},nodes:[em.Ey,Q.v5,Q.YW,Z.Db,J.iK,eu.jL],editorState:o?n:'{"root":{"children":[{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1}],"direction":null,"format":"","indent":0,"type":"root","version":1}}',editable:i},[c,d]=(0,a.useState)(!1),[m,p]=(0,a.useState)(null);return a.createElement(en.n,{initialConfig:s},a.createElement("div",{ref:e=>{null!==e&&p(e)}},o||""===e?a.createElement(a.Fragment,null," "):a.createElement(e_.s,{htmlString:e}),a.createElement(ed.$,{contentEditable:a.createElement(ea.a,{className:i?"annotation_lexical_editor--contentEditable--NLeAt":"annotation_lexical_editor--contentEditableReadOnly--tn4-c"}),placeholder:a.createElement("div",{className:"annotation_lexical_editor--placeholder--1Fj3R"},(0,z.t)("dev_handoff.annotations.add_annotation")),ErrorBoundary:er.A})),a.createElement(ei.G,null),a.createElement(eo.Q,null),a.createElement(es.E,{transformers:[ee.mK,ee.NB,ee.eA,ee.gb,ee.d7,ee.Pi,ee.WY,ee.Eg,ee.gW,ee.Sq,ee.TB,ee.Up]}),a.createElement(et.x,null),a.createElement(el.W,null),i&&m?a.createElement(eE.A,{anchorElem:m,isLinkEditMode:c,setIsLinkEditMode:d}):a.createElement(a.Fragment,null),o&&a.createElement(ef,{lexicalDefaultValue:n}),a.createElement(ec.D,{onChange:(e,n,a)=>{a.has("focus")||e.read(()=>{let a=(0,ep.T)(n);t&&t(a),(0,u.kc)().ext_lexical_markdown_annotations&&r&&r(JSON.stringify(e.toJSON()))})},ignoreSelectionChange:!0}),a.createElement(eh.A,null),a.createElement(ev,{onEnterPressed:l||(()=>{})}),a.createElement(ey.A,null))}var eT=n(91408),eS=n(837746);let ex="annotation--annotationContainer--k4xiM",ek="annotation--wrapperEditing--C2Zlx",eN="annotation--viewAnnotation--cA-c1 annotation--_annotationBase--MPByC",eI="annotation--viewAnnotationSelected--UApdn",eA="annotation--canSelect--zG4JI",eO="annotation--viewAnnotationFadedOut--7LQPE",eL="annotation--createAnnotation--tWKSM annotation--_annotationBase--MPByC",eD="annotation--label--Tf5gK",eR="annotation--contentContainer--vSuqs",eM="annotation--properties--1p6UF",eP="annotation--noValue--HHQOU",eF="annotation--propertyOptionIconSvg--LypST",eB="annotation--icon--w1enR",eU="annotation--chit--3je6E",eG="annotation--solidPaint--ClR6h",eK="annotation--solidPaintValue--9PQMf annotation--_ellipsis--8F1VE",eV="annotation--variablePill--VNxoI",eH=(0,eT.jz)("220px"),ez=(0,eT.jz)(eS.KwN),eW=(0,eT.jz)(eS.RHC);var ej=(e=>(e[e.ANNOTATION=0]="ANNOTATION",e[e.CODE_CONNECT=1]="CODE_CONNECT",e[e.LIVING_DESIGN=2]="LIVING_DESIGN",e))(ej||{}),e$=(e=>(e[e.ALIGNED=0]="ALIGNED",e[e.ABOVE=1]="ABOVE",e[e.BELOW=2]="BELOW",e))(e$||{});function eq(e,t,n){let{x:a,y:r,w:i,h:l}=e.absoluteBoundingBox,{x:o,w:s}=t.absoluteBoundingBox,{offsetX:c,offsetY:d,zoomScale:u}=n,m=a-o,p=o+s-(a+i),_=m<p,g=Math.min(Math.max(20*u,5),20);return _?{lineWidth:m*u+g,offsetX:(o-c)*u-g,offsetY:(r+l/2-d)*u,isLeftAligned:_}:{lineWidth:p*u+g,offsetX:(o+s-c)*u+g,offsetY:(r+l/2-d)*u,isLeftAligned:_}}function eY(e,t,n){let a=[];for(let t of e){let e=(n||t.height)+8;for(a.push({basis:t.offsetY-e/2,length:1,height:e});a.length>1&&function(e,t){let n=e.basis+e.height-t.basis;return!(n<=0)&&(e.height+=t.height,e.length+=t.length,e.basis-=n*t.height/e.height,!0)}(a[a.length-2],a[a.length-1]);)a.pop()}let r=0;for(let i of a){let{basis:a}=i;for(let l=0;l<i.length;l++){let i=e[r],l=(n||i.height)+8;t[i.node.guid]=a+l/2,a+=l,r++}}}function eX(e,t,n){let a=[],r=[],i={};for(let e of t)e.isLeftAligned?a.push(e):r.push(e);return eY(a,i,n?6:void 0),eY(r,i,n?6:void 0),t.map(t=>{let{y:n,h:a,w:r}=t.node.absoluteBoundingBox,l=i[t.node.guid],o=(n-e.offsetY)*e.zoomScale,s=t.lineWidth,c=0,d=0,u=t.lineWidth;return l<o?(c=1,d=o-l,u+=r/2*e.zoomScale):l>(n+a-e.offsetY)*e.zoomScale&&(c=2,d=l-(n+a-e.offsetY)*e.zoomScale,u+=r/2*e.zoomScale),{...t,offsetY:l,lineAlignment:c,lineHeight:d,lineWidth:u,originalLineWidth:s}})}var eJ=n(869156),eZ=n(788612),eQ=n(712685);function e0({valueProps:e,isHovered:t,variableContainerClassName:n}){if("mixed"===e.format){let r=e.value.some(e=>!!e.variable);return a.createElement("div",{className:P()("annotation--multipleVariableWrapper--OW3M1",r&&"annotation--vertical--zmpVv")},e.value.map((i,l)=>a.createElement("div",{key:l,className:"annotation--multipleVariableValue--5-5xk"},a.createElement(e0,{valueProps:i,isHovered:t,variableContainerClassName:n}),l<e.value.length-1&&!r&&a.createElement("span",null,", "))))}let r=`${(0,eZ.m3)(e)}`;return e.variable?a.createElement(eQ.w,{dataTestId:"styledValueVariable",containerClassName:P()(eV,n),text:e.variable,disableHover:!0,isHovered:t,isInferred:e.isSuggestedVariable,tooltip:e.isSuggestedVariable?(0,z.t)("dev_handoff.variables.inferred_value",{value:r}):r}):a.createElement(a.Fragment,null,r)}var e1=n(221537);function e2({svg:e}){return a.createElement(H.B,{svg:e,className:P()(eB,eF)})}var e5=n(258890),e3=n(996620),e4=n(957069);function e6({node:e,variable:t,isPreview:n=!1}){return t?n?a.createElement(a.Fragment,null,t.name):a.createElement(eQ.w,{containerClassName:eV,text:t.name,disableHover:!0}):(0,e1.rO)(e.stackPrimaryAlignItems)?(0,z.tx)("dev_handoff.annotations.auto"):a.createElement(a.Fragment,null,(0,eZ.nd)(e.stackSpacing,"px"))}function e8({node:e,isPreview:t=!1}){let n=(0,eJ.u)(e.boundVariables?.itemSpacing?.id);return a.createElement("div",{className:n?void 0:"annotation--spacingProperty--RCjSM annotation--coloredProperty--OTQ6l"},a.createElement("span",null,a.createElement(e6,{node:e,variable:n,isPreview:t})))}function e7({rawValues:e,variables:t,isPreview:n=!1}){if(e.length!==t.length)throw Error("<ManySidedProperty /> must have the same number of rawValues and variables");let r=t.map((t,n)=>({value:e[n],format:"pixels",variable:t?.name})),i=r[0]?.variable;for(let e of r)if(e.variable!==i){if(n)return(0,z.tx)("fullscreen.mixed");return a.createElement(e0,{variableContainerClassName:eV,valueProps:{format:"mixed",value:r}})}return i?n?a.createElement(a.Fragment,null,i):a.createElement(e0,{variableContainerClassName:eV,valueProps:r[0]}):e.some(t=>t!==e[0])?n?(0,z.tx)("fullscreen.mixed"):a.createElement(e0,{variableContainerClassName:eV,valueProps:{format:"pixels",value:e}}):a.createElement(e0,{variableContainerClassName:eV,valueProps:{format:"pixels",value:e[0]}})}function e9({node:e,isPreview:t=!1}){let{stackTopPadding:n,stackRightPadding:r,stackBottomPadding:i,stackLeftPadding:l}=e,o=(0,eJ.u)(e.boundVariables?.paddingTop?.id),s=(0,eJ.u)(e.boundVariables?.paddingRight?.id),c=(0,eJ.u)(e.boundVariables?.paddingBottom?.id),d=(0,eJ.u)(e.boundVariables?.paddingLeft?.id),u=[o,s,c,d].some(e=>!!e);return a.createElement("div",{className:P()(u?void 0:"annotation--paddingProperty--ckvG6 annotation--coloredProperty--OTQ6l")},a.createElement("span",null,a.createElement(e7,{rawValues:[n,r,i,l],variables:[o,s,c,d],isPreview:t})))}function te({node:e}){if("WRAP"===e.stackWrap)return a.createElement(e2,{svg:e4.A});switch(e.stackMode){case"HORIZONTAL":return a.createElement(e2,{svg:e5.A});case"VERTICAL":return a.createElement(e2,{svg:e3.A});default:return null}}function tt({node:e}){if("WRAP"===e.stackWrap)return(0,z.tx)("fullscreen.properties_panel.stack_panel.wrap");switch(e.stackMode){case"HORIZONTAL":return(0,z.tx)("dev_handoff.annotations.autolayout_horizontal");case"VERTICAL":return(0,z.tx)("dev_handoff.annotations.autolayout_vertical");default:return null}}function tn({node:e}){if("NONE"===e.stackMode)return null;if("HORIZONTAL"===e.stackMode)switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return(0,z.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,z.tx)("dev_handoff.annotations.alignment.left");case"MAX":return(0,z.tx)("dev_handoff.annotations.alignment.bottom_left");case"BASELINE":return(0,z.tx)("dev_handoff.annotations.alignment.baseline_left")}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return(0,z.tx)("dev_handoff.annotations.alignment.top_center");case"CENTER":return(0,z.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,z.tx)("dev_handoff.annotations.alignment.bottom_center");case"BASELINE":return(0,z.tx)("dev_handoff.annotations.alignment.baseline_center")}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return(0,z.tx)("dev_handoff.annotations.alignment.top_right");case"CENTER":return(0,z.tx)("dev_handoff.annotations.alignment.right");case"MAX":return(0,z.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return(0,z.tx)("dev_handoff.annotations.alignment.baseline_right")}}switch(e.stackPrimaryAlignItems){case"MIN":switch(e.stackCounterAlignItems){case"MIN":return(0,z.tx)("dev_handoff.annotations.alignment.top_left");case"CENTER":return(0,z.tx)("dev_handoff.annotations.alignment.top_center");case"MAX":return(0,z.tx)("dev_handoff.annotations.alignment.top_right");case"BASELINE":return null}case"CENTER":case"SPACE_BETWEEN":case"SPACE_EVENLY":switch(e.stackCounterAlignItems){case"MIN":return(0,z.tx)("dev_handoff.annotations.alignment.left");case"CENTER":return(0,z.tx)("dev_handoff.annotations.alignment.center");case"MAX":return(0,z.tx)("dev_handoff.annotations.alignment.right");case"BASELINE":return null}case"MAX":switch(e.stackCounterAlignItems){case"MIN":return(0,z.tx)("dev_handoff.annotations.alignment.bottom_left");case"CENTER":return(0,z.tx)("dev_handoff.annotations.alignment.bottom_center");case"MAX":return(0,z.tx)("dev_handoff.annotations.alignment.bottom_right");case"BASELINE":return null}}}var ta=n(416095),tr=n(750029),ti=n(428877),tl=n(137906),to=n(238093);function ts(e,t){let n=(0,l.d4)(e=>e.library),a=(0,to.f$)(e),r=(0,g.mJ)(a);if(!e||!a||!r)return null;let i=(0,ta.Gp)(e.key,[a],n);if(!i)return null;let o=i.value;return"DANGLING"===i.kind&&(o.style_type=t),o.description=r.description,o.name=r.name,o.isLocal="LOCAL"===i.kind,o}function tc(e,t){if(1===t)return e;let n=(100*t).toLocaleString("en",{maximumFractionDigits:2})+"%";return`${e} \xb7 ${n}`}function td(e,t,n){let{opacity:a=1}=e;switch(e.type){case"SOLID":{if(!e.color)return null;let{color:r}=e,{a:i=1}=r,l=n({...r,a:i*a},{alphaInPercent:!0});return t?t.name:l}case"GRADIENT_LINEAR":return tc((0,z.t)("dev_handoff.selection_colors.gradient_linear"),a);case"GRADIENT_ANGULAR":return tc((0,z.t)("dev_handoff.selection_colors.gradient_angular"),a);case"GRADIENT_DIAMOND":return tc((0,z.t)("dev_handoff.selection_colors.gradient_diamond"),a);case"GRADIENT_RADIAL":return tc((0,z.t)("dev_handoff.selection_colors.gradient_radial"),a);case"IMAGE":return tc((0,z.t)("dev_handoff.annotations.image"),a);case"VIDEO":return tc((0,z.t)("dev_handoff.annotations.video"),a);default:return null}}function tu({paints:e,styleRef:t,variables:n}){let r=n?.[0],i=(0,ti.Ig)(),l=(0,eJ.u)(r?.id),o=ts(t,"FILL");return 0===e.length?null:o?a.createElement(a.Fragment,null,o.name):e.length>1?(0,z.tx)("dev_handoff.annotations.multiple"):a.createElement(a.Fragment,null,td(e[0],l,i))}function tm({paints:e}){let t=e[0];return a.createElement(tr.J,{className:eU,tabIndex:-1,paint:t,allowMouseDownPropagation:!0})}function tp({paint:e,variableAlias:t}){let n=(0,ti.Ig)(),r=(0,eJ.u)(t?.id),i=td(e,r,n);return i?a.createElement("div",{className:eG},a.createElement(tr.J,{className:eU,paint:e,tabIndex:-1,allowMouseDownPropagation:!0}),a.createElement("span",{className:eK,title:i},r?a.createElement(eQ.w,{containerClassName:eV,text:i,disableHover:!0}):i)):null}function t_({styleRef:e,styleType:t,hideIcon:n=!1}){let r=ts(e,t);return(!function(e){let t=(0,l.d4)(e=>e.library),n=(0,to.f$)(e),a=n?(0,ta.Gp)(e.key,[n],t):void 0;(0,ta.w$)(a)}(e),r)?a.createElement("div",{className:eG},!n&&a.createElement("div",{className:P()("annotation--styleChit--yCQ3O annotation--chit--3je6E",eB)},a.createElement(tl.zi,{dsStyle:r})),a.createElement("span",{className:eK,title:r.name},r.name)):null}function tg({paints:e,styleRef:t,variables:n}){return t?a.createElement(t_,{styleRef:t,styleType:"FILL"}):0===e.length?null:a.createElement("div",{className:"annotation--mixedValues--Z0qIk"},e.map((e,t)=>a.createElement(tp,{key:t,paint:e,variableAlias:n?.[t]})))}var tf=n(371591),th=n(723081),tE=n(666139);function ty({effects:e}){if(0===e.length)return null;if(e.length>1)return(0,z.tx)("fullscreen.mixed");switch(e[0].type){case"DROP_SHADOW":return(0,z.tx)("dev_handoff.annotations.shadow");case"BACKGROUND_BLUR":return(0,z.tx)("fullscreen.properties_panel.effects.background_blur");case"FOREGROUND_BLUR":return(0,z.tx)("fullscreen.properties_panel.effects.layer_blur");case"INNER_SHADOW":return(0,z.tx)("fullscreen.properties_panel.effects.inner_shadow");case void 0:return null}}function tb({effects:e,styleRef:t}){return a.createElement(a.Fragment,null,e.map((e,n)=>a.createElement(tC,{effect:e,styleRef:t,key:n})))}let tv=new th.SU;function tC({effect:e,styleRef:t}){let n=(0,ti.Ig)(),r=t&&a.createElement(tw,{styleRef:t});switch(e.type){case"DROP_SHADOW":case"INNER_SHADOW":{let{color:t}=e,i=t?n(t,{alphaInPercent:!0}):null,l=[e.offset?.x,e.offset?.y,e.radius,e.spread].filter(e=>void 0!==e).join(", ");return a.createElement("div",null,r,a.createElement("span",null,a.createElement(ty,{effects:[e]})),t&&a.createElement(a.Fragment,null,a.createElement("span",null),a.createElement("div",{className:eG},a.createElement(tr.J,{className:P()(eU,"annotation--chitInline--vG6cM"),color:t,allowMouseDownPropagation:!0}),a.createElement("span",{className:eK,title:i||void 0},i))),a.createElement("span",null),a.createElement("span",null,l),e.blendMode&&"NORMAL"!==e.blendMode&&a.createElement(a.Fragment,null,a.createElement("span",null),a.createElement("span",null,tv.format(e.blendMode))))}case"BACKGROUND_BLUR":case"FOREGROUND_BLUR":return a.createElement("div",null,r,a.createElement("span",null,a.createElement(ty,{effects:[e]})),void 0!==e.radius&&a.createElement("span",null,` ${(0,eZ.nd)(e.radius,"px")}`));case void 0:return null}}function tw({styleRef:e}){let t=(0,to.f$)(e),n=(0,g.mJ)(t);return t&&n?a.createElement("div",null,n.name):null}var tT=n(142284);let tS=e=>{switch(e){case"RIGHT":return(0,z.t)("inspect_panel.typography.align_right");case"CENTER":return(0,z.t)("inspect_panel.typography.align_center");case"JUSTIFIED":return(0,z.t)("inspect_panel.typography.align_justified");case"LEFT":return(0,z.t)("dev_handoff.annotations.align_left")}};function tx(){return a.createElement(H.B,{svg:tT.A,className:P()(eB,eF)})}function tk({textAlignHorizontal:e}){return a.createElement(a.Fragment,null,tS(e))}function tN({lineHeightOrMixed:e,variableAlias:t,isPreview:n}){let r=(0,eJ.u)(t?.id);if("mixed"===e)return(0,z.tx)("fullscreen.mixed");if(r&&n)return a.createElement(a.Fragment,null,r.name);if("PERCENT"===e.units&&100===e.value)return(0,z.tx)("dev_handoff.annotations.auto");let i="RAW"===e.units?{value:100*e.value,units:"PERCENT"}:e;return a.createElement(eZ.lN,{variableContainerClassName:eV,valueProps:{format:"fig_number",value:i,variable:r?.name}})}function tI({fontNameOrMixed:e,variableAlias:t,isPreview:n}){let r=(0,eJ.u)(t?.id);return"mixed"===e?(0,z.tx)("fullscreen.mixed"):r&&n?a.createElement(a.Fragment,null,r.name):a.createElement(eZ.lN,{variableContainerClassName:eV,valueProps:{value:e.family,variable:r?.name}})}function tA({fontWeightOrMixed:e,variableAlias:t,isPreview:n}){let r=(0,eJ.u)(t?.id);return"mixed"===e?(0,z.tx)("fullscreen.mixed"):(r&&r.resolvedType!==s.rXF.FLOAT&&(r=null),r&&n)?a.createElement(a.Fragment,null,r.name):a.createElement(eZ.lN,{variableContainerClassName:eV,valueProps:{value:e,variable:r?.name}})}var tO=n(313888),tL=n(595869),tD=n(560185),tR=n(30562),tM=n(438806),tP=n(904595),tF=n(235107),tB=n(58502),tU=n(144919);function tG({node:e}){let{symbolId:t}=e;if(!t)return a.createElement(a.Fragment,null);let n=R.q.instance.get(t);if(!n)return a.createElement(a.Fragment,null);if(n.isState){let e=n.parentNode?.name;return a.createElement(a.Fragment,null,`${e} (${n.name})`)}return a.createElement(a.Fragment,null,n.name)}let tK=new Map([[s.L5V.HEIGHT,{label:(0,z.tx)("fullscreen.properties_panel.transform_panel.height"),category:"dimension",Icon:()=>a.createElement(e2,{svg:tM.A}),PreviewValue:({node:e})=>a.createElement(tq,{value:e.size.y,variableAlias:e.boundVariables.height,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tq,{value:e.size.y,variableAlias:e.boundVariables.height}),index:0}],[s.L5V.MIN_HEIGHT,{label:(0,z.tx)("fullscreen.properties_panel.stack_panel.minmax.min_height_tt"),category:"dimension",Icon:()=>a.createElement(e2,{svg:tM.A}),PreviewValue:({node:e})=>a.createElement(tq,{value:e.minHeight,variableAlias:e.boundVariables.minHeight,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tq,{value:e.minHeight,variableAlias:e.boundVariables.minHeight}),index:0}],[s.L5V.MAX_HEIGHT,{label:(0,z.tx)("fullscreen.properties_panel.stack_panel.minmax.max_height_tt"),category:"dimension",Icon:()=>a.createElement(e2,{svg:tM.A}),PreviewValue:({node:e})=>a.createElement(tq,{value:e.maxHeight,variableAlias:e.boundVariables.maxHeight,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tq,{value:e.maxHeight,variableAlias:e.boundVariables.maxHeight}),index:0}],[s.L5V.WIDTH,{label:(0,z.tx)("fullscreen.properties_panel.transform_panel.width"),category:"dimension",Icon:()=>a.createElement(e2,{svg:tF.A}),PreviewValue:({node:e})=>a.createElement(tq,{value:e.size.x,variableAlias:e.boundVariables.width,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tq,{value:e.size.x,variableAlias:e.boundVariables.width}),index:0}],[s.L5V.MIN_WIDTH,{label:(0,z.tx)("fullscreen.properties_panel.stack_panel.minmax.min_width_tt"),category:"dimension",Icon:()=>a.createElement(e2,{svg:tF.A}),PreviewValue:({node:e})=>a.createElement(tq,{value:e.minWidth,variableAlias:e.boundVariables.minWidth,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tq,{value:e.minWidth,variableAlias:e.boundVariables.minWidth}),index:0}],[s.L5V.MAX_WIDTH,{label:(0,z.tx)("fullscreen.properties_panel.stack_panel.minmax.max_width_tt"),category:"dimension",Icon:()=>a.createElement(e2,{svg:tF.A}),PreviewValue:({node:e})=>a.createElement(tq,{value:e.maxWidth,variableAlias:e.boundVariables.maxWidth,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tq,{value:e.maxWidth,variableAlias:e.boundVariables.maxWidth}),index:0}],[s.L5V.CORNER_RADIUS,{label:(0,z.tx)("fullscreen.properties_panel.transform_panel.corner_radius"),category:"dimension",Icon:()=>a.createElement(e2,{svg:tL.A}),PreviewValue:({node:e})=>a.createElement(tz,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tz,{node:e}),index:0}],[s.L5V.STACK_MODE,{label:(0,z.tx)("dev_handoff.annotations.autolayout_mode"),category:"stack",Icon:({node:e})=>a.createElement(te,{node:e}),PreviewValue:({node:e})=>a.createElement(tt,{node:e}),DisplayValue:({node:e})=>a.createElement(tt,{node:e}),index:0}],[s.L5V.STACK_ALIGNMENT,{label:(0,z.tx)("dev_handoff.annotations.alignment"),category:"stack",Icon:({node:e})=>a.createElement(e2,{svg:(0,tf.GN)(e)}),PreviewValue:({node:e})=>a.createElement(tn,{node:e}),DisplayValue:({node:e})=>a.createElement(tn,{node:e}),index:0}],[s.L5V.STACK_SPACING,{label:(0,z.tx)("inspect_panel.properties.gap"),category:"stack",Icon:({node:e})=>a.createElement(e2,{svg:"HORIZONTAL"===e.stackMode?tD.A:tR.A}),PreviewValue:({node:e})=>a.createElement(e8,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(e8,{node:e}),index:0}],[s.L5V.STACK_PADDING,{label:(0,z.tx)("inspect_panel.properties.padding"),category:"stack",Icon:()=>a.createElement(e2,{svg:tP.A}),PreviewValue:({node:e})=>a.createElement(e9,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(e9,{node:e}),index:0}],[s.L5V.TEXT_STYLE,{label:(0,z.tx)("dev_handoff.annotations.text_style"),category:"text",Icon:tx,PreviewValue:({node:e})=>a.createElement(tX,{styleRef:e.inheritedTextStyle}),DisplayValue:({node:e})=>a.createElement(t_,{styleRef:e.inheritedTextStyle,styleType:"TEXT",hideIcon:!0}),index:0}],[s.L5V.FONT_FAMILY,{label:(0,z.tx)("inspect_panel.typography.font"),category:"text",Icon:tx,PreviewValue:({node:e})=>a.createElement(tI,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:e.boundVariables.fontFamily?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tI,{fontNameOrMixed:e.fontNameOrMixed,variableAlias:e.boundVariables.fontFamily?.[0]}),index:0}],[s.L5V.FONT_STYLE,{label:(0,z.tx)("inspect_panel.code.font_style"),category:"text",Icon:tx,PreviewValue:({node:e})=>a.createElement(a.Fragment,null,e.fontName.style),DisplayValue:({node:e})=>a.createElement(a.Fragment,null,e.fontName.style),index:0}],[s.L5V.FONT_SIZE,{label:(0,z.tx)("dev_handoff.annotations.font_size"),category:"text",Icon:tx,PreviewValue:({node:e})=>a.createElement(tq,{value:e.fontSizeOrMixed,variableAlias:e.boundVariables.fontSize?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tq,{value:e.fontSizeOrMixed,variableAlias:e.boundVariables.fontSize?.[0]}),index:0}],[s.L5V.LINE_HEIGHT,{label:(0,z.tx)("fullscreen.type_panel.line_height"),category:"text",Icon:tx,PreviewValue:({node:e})=>a.createElement(tN,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:e.boundVariables.lineHeight?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tN,{lineHeightOrMixed:e.lineHeightOrMixed,variableAlias:e.boundVariables.lineHeight?.[0]}),index:0}],[s.L5V.LETTER_SPACING,{label:(0,z.tx)("fullscreen.type_panel.letter_spacing"),category:"text",Icon:tx,PreviewValue:({node:e})=>a.createElement(tY,{value:e.letterSpacingOrMixed,variableAlias:e.boundVariables.letterSpacing?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tY,{value:e.letterSpacingOrMixed,variableAlias:e.boundVariables.letterSpacing?.[0]}),index:0}],[s.L5V.TEXT_ALIGN_HORIZONTAL,{label:(0,z.tx)("dev_handoff.annotations.text_align"),category:"text",Icon:tx,PreviewValue:({node:e})=>a.createElement(tk,{textAlignHorizontal:e.textAlignHorizontal}),DisplayValue:({node:e})=>a.createElement(tk,{textAlignHorizontal:e.textAlignHorizontal}),index:0}],[s.L5V.FONT_WEIGHT,{label:(0,z.tx)("inspect_panel.typography.weight"),category:"text",Icon:tx,PreviewValue:({node:e})=>a.createElement(tA,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:e.boundVariables.fontStyle?.[0],isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tA,{fontWeightOrMixed:e.fontWeightOrMixed,variableAlias:e.boundVariables.fontStyle?.[0]}),index:0}],[s.L5V.FILL,{label:(0,z.tx)("fullscreen.properties_panel.fill.fill"),category:"paint",Icon:({node:e})=>a.createElement(tm,{paints:e.fills}),PreviewValue:({node:e})=>a.createElement(tu,{paints:e.fills,variables:e.boundVariables.fills,styleRef:e.inheritedFillStyle}),DisplayValue:({node:e})=>a.createElement(tg,{paints:e.fills,styleRef:e.inheritedFillStyle,variables:e.boundVariables.fills}),index:0}],[s.L5V.STROKE,{label:(0,z.tx)("fullscreen.properties_panel.fill.stroke"),category:"paint",Icon:({node:e})=>a.createElement(tm,{paints:e.strokePaints.data}),PreviewValue:({node:e})=>a.createElement(tu,{paints:e.strokePaints.data,variables:e.boundVariables.strokes,styleRef:e.inheritedFillStyle}),DisplayValue:({node:e})=>a.createElement(tg,{paints:e.strokePaints.data,styleRef:e.inheritedFillStyleForStroke,variables:e.boundVariables.strokes}),index:0}],[s.L5V.STROKE_WIDTH,{label:(0,z.tx)("fullscreen.properties_panel.borders.stroke_width"),category:"paint",Icon:()=>a.createElement(e2,{svg:tB.A}),PreviewValue:({node:e})=>a.createElement(tW,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tW,{node:e}),index:0}],[s.L5V.EFFECT,{label:(0,z.tx)("inspect_panel.code.effect"),category:"paint",Icon:function(){return a.createElement(e2,{svg:tE.A})},PreviewValue:({node:e})=>a.createElement(ty,{effects:e.effects.filter(e=>e.visible)}),DisplayValue:({node:e})=>a.createElement(tb,{effects:e.effects.filter(e=>e.visible),styleRef:e.inheritedEffectStyle}),index:0}],[s.L5V.OPACITY,{label:(0,z.tx)("fullscreen.scrubbable.opacity"),category:"paint",Icon:()=>a.createElement(e2,{svg:tU.A}),PreviewValue:({node:e})=>a.createElement(tH,{node:e,isPreview:!0}),DisplayValue:({node:e})=>a.createElement(tH,{node:e}),index:0}],[s.L5V.COMPONENT,{label:(0,z.tx)("dev_handoff.annotations.component"),category:"component",Icon:()=>a.createElement(e2,{svg:tO.A}),PreviewValue:tG,DisplayValue:tG,index:0}]]),tV=0;function tH({node:e,isPreview:t=!1}){let n=e.boundVariables.opacity,r=(0,eJ.u)(n?.id??void 0);return r&&t?a.createElement(a.Fragment,null,r.name):a.createElement(e0,{variableContainerClassName:eV,valueProps:{format:"percent",value:e.opacity,variable:r?.name}})}function tz({node:e,isPreview:t=!1}){let{rectangleTopLeftCornerRadius:n,rectangleTopRightCornerRadius:r,rectangleBottomRightCornerRadius:i,rectangleBottomLeftCornerRadius:l}=e,o=(0,eJ.u)(e.boundVariables?.topLeftRadius?.id),s=(0,eJ.u)(e.boundVariables?.topRightRadius?.id),c=(0,eJ.u)(e.boundVariables?.bottomRightRadius?.id),d=(0,eJ.u)(e.boundVariables?.bottomLeftRadius?.id);return a.createElement(e7,{rawValues:[n,r,i,l],variables:[o,s,c,d],isPreview:t})}function tW({node:e,isPreview:t=!1}){return e.borderStrokeWeightsIndependent?a.createElement(t$,{node:e,isPreview:t}):a.createElement(tj,{node:e,isPreview:t})}function tj({node:e,isPreview:t}){let n=(0,eJ.u)(e.boundVariables.strokeWeight?.id);return n&&t?a.createElement(a.Fragment,null,n.name):a.createElement(e0,{variableContainerClassName:eV,valueProps:{value:e.strokeWeight,variable:n?.name,format:"pixels"}})}function t$({node:e,isPreview:t}){let{borderTopWeight:n,borderRightWeight:r,borderBottomWeight:i,borderLeftWeight:l}=e,o=(0,eJ.u)(e.boundVariables.strokeTopWeight?.id),s=(0,eJ.u)(e.boundVariables.strokeRightWeight?.id),c=(0,eJ.u)(e.boundVariables.strokeBottomWeight?.id),d=(0,eJ.u)(e.boundVariables.strokeLeftWeight?.id);return a.createElement(e7,{rawValues:[n,r,i,l],variables:[o,s,c,d],isPreview:t})}function tq({value:e,variableAlias:t,isPreview:n}){let r=(0,eJ.u)(t?.id);return null===e?null:"mixed"===e?(0,z.tx)("fullscreen.mixed"):r&&n?a.createElement(a.Fragment,null,r.name):a.createElement(e0,{variableContainerClassName:eV,valueProps:{value:(0,eZ.nd)(e,"px"),variable:r?.name}})}function tY({value:e,variableAlias:t,isPreview:n}){let r=(0,eJ.u)(t?.id);return"mixed"===e?(0,z.tx)("fullscreen.mixed"):r&&n?a.createElement(a.Fragment,null,r.name):a.createElement(e0,{variableContainerClassName:eV,valueProps:{format:"fig_number",value:e,variable:r?.name}})}function tX({styleRef:e}){let t=(0,to.f$)(e),n=(0,g.mJ)(t);return n?a.createElement(a.Fragment,null,n.name):null}function tJ(){let e=(0,d.IL)(),t=(0,B.Xr)(N.J),n=!!(0,f.hA)();return a.useCallback(a=>{D.l7.user("clear-annotations",()=>{a.setAnnotation(null);let r=(0,c.kh)(R.q.instance,a.guid);e("delete_annotation",{nodeId:a.guid,nodeType:a.type,tlfId:r?.guid,isDevModeFocusView:n}),t(!1),(0,E.d)().lockMouseMoves.set(!1),$.Y5.triggerAction("commit")})},[t,e,n])}tK.forEach(e=>{e.index=tV++});var tZ=n(462166),tQ=n(243742),t0=n(560945),t1=n(256975),t2=n(592096),t5=n(843495);function t3({node:e,setDimensions:t,offsetX:n,offsetY:r,lineWidth:i,originalLineWidth:o,lineHeight:c,lineAlignment:p,isLeftAligned:_,viewportInfo:f,shouldMinimize:h,annotationType:y,canOverlapNode:b=!1,children:v}){let w=(0,d.IL)(),T=(0,a.useRef)(null),S=(0,t0.w)(h?void 0:T),x=(0,l.d4)(e=>e.mirror.appModel.hoveredNode),[k,I]=(0,a.useState)(!1),A=(0,t1._I)()||(0,u.kc)().livefish&&y===ej.LIVING_DESIGN,O=(0,C.dH)(),L="ui3"===(0,tQ.DP)().version,D=e.guid===x||k,R=(0,g.uQ)(),M=(0,m.md)(N.J),F=M&&R===e.guid,B=h&&!F,U=O===s.NLJ.ANNOTATE&&!D&&null!==R&&R!==e.guid,G=F||f.zoomScale>=.05&&(e.guid===R||e.annotations.length>0);(0,u.kc)().dt_code_connect_overview_on_canvas&&y===ej.CODE_CONNECT&&(G=f.zoomScale>=.05),(0,u.kc)().livefish&&y===ej.LIVING_DESIGN&&(G=!0);let K=(0,t2.LO)(),V=a.useCallback(e=>{(0,E.d)().lockMouseMoves.set(e)},[]);(0,a.useLayoutEffect)(()=>{S&&t(e.guid,S)},[e.guid,S,t,y]);let H={top:`${f.y+f.height/2}px`,left:`${f.x+f.width/2}px`,transform:`translate(${n}px, calc(${r}px - 50%))`};return a.createElement("div",{ref:T,className:P()("annotation--annotationWrapper--pKMw2",{"annotation--wrapperMinimized--UOExu":B&&!D,[ek]:F,"annotation--annotationWrapperCodeConnected--raIU7":y===ej.CODE_CONNECT,"annotation--annotationWrapperLivingDesign--l8vyM":y===ej.LIVING_DESIGN}),style:H,"data-testid":"annotationWrapper"},G&&a.createElement(a.Fragment,null,a.createElement("div",{className:P()("annotation--annotationLine--jr4Mc",{"annotation--annotationLineLeftAligned--W-1DZ":_,"annotation--annotationLineAboveNode--WwqWD":p===e$.ABOVE,"annotation--annotationLineBelowNode--JeafT":p===e$.BELOW}),style:{width:i,height:c}},a.createElement("div",{className:P()("annotation--annotationLineStartDot--x6RNc",{"annotation--annotationLineStartDotHovered--Chqa7":!A&&D})}),a.createElement("div",{className:"annotation--annotationLineEndDot--Lsq0a"})),a.createElement("div",{onMouseOut:()=>{V(!1),I(!1)},onMouseOver:()=>{M||(V(!0),t5.Uc(e.guid),B&&!k&&w("hover_minimized_annotation",{nodeId:e.guid,nodeType:e.type}),I(!0))},className:P()({"annotation--annotationLeftAligned--FHQRp":_,"annotation--annotationRightAligned--VrH8e":!_,"annotation--annotationHovered--QUHJv":!F&&D}),style:{transform:function(e,t,n,a,r,i,l,o){let c=s.Ez5.isFullscreenYScrollbarNeeded()&&(!o||!s.Ez5.isUI3EdgeToEdgeCanvasEnabled());if(n){let n=`calc(${-a}px - ${e.width/2}px + ${l.left}px + 4px)`,o=i?`calc(${r+t*e.zoomScale}px - 100% - 8px)`:`calc(${r}px - 100% - 8px)`;return`translate(min(${o}, max(-100%, ${n})), 0)`}{let n=i?`calc(-${r+t*e.zoomScale}px + 8px)`:`calc(-${r}px + 8px)`,s=`calc(${e.width/2}px - ${a}px - 100% - ${l.right}px - ${c?o?eW:ez:4}px)`;return`translate(max(${n}, min(0px, ${s})), 0)`}}(f,e.absoluteBoundingBox.w,_,n,o,b,K,L)}},a.createElement("div",{className:P()("annotation--annotationHoverTarget--4y3Xc",{"annotation--annotationHoverTargetLeftAligned--G1twU":_})}),A&&(!B||D)&&v(U))))}var t4=n(501191);function t6({viewportInfo:e,nodeInfo:t,setDimensions:n}){let r=function(){let e=(0,d.IL)(),{Sprig:t}=(0,V.A)(),n=!!(0,f.hA)();return a.useCallback((a,r,i)=>{D.l7.user(i?"edit-annotation":"create-annotation",()=>{a.setAnnotation(r);let l=(0,c.kh)(R.q.instance,a.guid),o={nodeType:a.type,nodeId:a.guid,tlfId:l?.guid??a.guid,hasText:!!r.label,numProperties:r.properties.length,isDevModeFocusView:n};i?e("edit_annotation",o):(e("create_annotation",o),t("track","create_annotation")),$.Y5.triggerAction("commit")})},[t,e,n])}(),i=tJ(),l=(0,B.Xr)(N.J),{node:o}=t,s=o.annotations[0],[m,p]=a.useState(s?.label??""),[_,g]=a.useState(s?.labelV2??""),[h,y]=a.useState(s?.properties??[]),b=a.useCallback(()=>{let e=s&&(""!==s.label||s.properties.length>0),t=0===(0,F.A)(m).length;if(t&&0===h.length)s&&i(o);else{var n=m;if((0,u.kc)().ext_lexical_editor_annotations&&m.endsWith("<br></p>")){let e=m.lastIndexOf("<p");n=m.slice(0,e)}r(o,{label:t?"":n,labelV2:(0,u.kc)().ext_lexical_editor_annotations?_:"",properties:h},e)}l(!1),(0,E.d)().lockMouseMoves.set(!1)},[s,m,h,i,o,r,l,_]);return a.createElement(a.Fragment,null,a.createElement(nt,{viewportInfo:e,onPointerDown:b}),a.createElement(t3,{key:t.node.guid,node:t.node,viewportInfo:e,shouldMinimize:!1,offsetX:t.offsetX,offsetY:t.offsetY,lineWidth:t.lineWidth,originalLineWidth:t.originalLineWidth,lineHeight:t.lineHeight,lineAlignment:t.lineAlignment,isLeftAligned:t.isLeftAligned,setDimensions:n,annotationType:ej.ANNOTATION,canOverlapNode:!0},()=>a.createElement(t8,{node:t.node,saveAnnotation:b,inputText:m,setInputText:p,inputLexical:_,setInputLexical:g,inputProperties:h,setInputProperties:y})))}function t8({node:e,saveAnnotation:t,inputText:n,setInputText:r,inputLexical:i,setInputLexical:l,inputProperties:o,setInputProperties:s}){let c=(0,d.IL)(),m=tJ(),[_,g]=a.useState(-1),[f,h]=a.useState(!1),[y,b]=a.useState(!1),v=a.useRef(null),C=a.useRef(null),w=a.useRef(null),{availableProperties:T,selectedProperties:S}=a.useMemo(()=>{let t=[],n=[];for(let a of t7)o.some(e=>e.type===a.type)?n.push(a):(0,tZ.J)(e,a.type,!0)&&t.push(a);return{availableProperties:t,selectedProperties:n}},[e,o]);a.useEffect(()=>{c("show_annotation_dialog",{nodeId:e.guid,nodeType:e.type})},[c,e.guid,e.type]);let x=a.useCallback(()=>{v.current?.focus()},[]),k=a.useCallback(e=>{g(-1),h(!1),s([...o,{type:e}])},[s,o]);function N(e){s(o.filter(t=>t.type!==e)),x()}let A=a.useCallback(()=>{(0,E.d)().lockMouseMoves.set(!1)},[]),L=a.useCallback((e,t)=>{if(g(e),b(t),t&&C.current){for(let t of C.current.children)if(t.getAttribute("data-property-type")===`property-${T[e]}`){t.focus();break}}},[g,b,T]),D=a.useCallback(()=>{f?(h(!1),g(-1),w.current?.focus()):t()},[f,t]),R=a.useCallback(()=>{f&&(-1===_?L(T.length-1,!0):_>0&&L(_-1,!0))},[T.length,_,L,f]),M=a.useCallback((e,t)=>{if(f){-1===_?L(0,!0):_<T.length-1&&L(_+1,!0);return}e&&!t&&(h(!0),L(0,!0))},[T.length,f,_,L]),F=(0,p.v_)("createAnnotation","keydown",(0,a.useCallback)(e=>{"Escape"===e.key?D():"ArrowUp"===e.key?(R(),e.stopPropagation()):"ArrowDown"===e.key?(M(e.ctrlKey||e.metaKey,e.shiftKey),e.stopPropagation()):("Enter"===e.key||" "===e.key)&&_>=0&&_<T.length&&(k(T[_].type),e.preventDefault(),w.current?.focus())},[T,M,R,D,_,k]));a.useEffect(()=>(document.addEventListener("keydown",F),()=>{document.removeEventListener("keydown",F)}),[F]);let B=p.qP("annotationLabelInput","submit",r),V=p.qP("annotationLabelV2Input","submit",l),$=p.qP("annotationLabelInput","enter",t),J=e=>{h(!f),e?L(0,!0):g(-1)},Z=0===n.length&&0===S.length;return a.createElement(X.vL,{name:"create-annotation",focusOnMount:!0,handleKeyDown:e=>{let{event:n}=e;"Escape"===n.key&&(e.accept(),t())}},a.createElement("div",{onPointerDown:j.dG},a.createElement("div",{className:P()(eL,W.Dm)},a.createElement("div",{className:P()(eR,{"annotation--contentContainerNoProperties--pc2WE":0===S.length})},a.createElement("div",{className:"annotation--labelEditor--xNx12",dir:"auto"},(0,u.kc)().ext_lexical_editor_annotations&&a.createElement(ew,{defaultValue:n,onInputChange:B,lexicalDefaultValue:i,onLexicalInputChange:V,isEditable:!0,onEnterPressed:$}),!(0,u.kc)().ext_lexical_editor_annotations&&a.createElement(G.X,{fallback:null,errorFallback:null,mountBehavior:"focus",placeholder:(0,z.t)("dev_handoff.annotations.add_annotation"),defaultValue:n,onInputChange:B,onBlur:U.lQ,hideToolbar:!0,onEnterKeyPressed:$})),S.length>0&&a.createElement("div",{className:eM},S.map(t=>a.createElement(ne,{key:`selected-${t.type}`,onRemoveProp:N,node:e,property:t})))),a.createElement("div",{className:"annotation--authoringRow--cIo3-"},a.createElement(K.GG,{className:P()("annotation--addPropertyButton--67vPO",{"annotation--active--Q00x6":f}),forwardedRef:w,onMouseDown:e=>J((0,Y.SK)(e)),onKeyDown:e=>{f||"Enter"!==e.code&&"Space"!==e.code||(J(!0),e.preventDefault(),e.stopPropagation())},tabIndex:0,"data-tooltip-type":q.Ib.TEXT,"data-tooltip":(0,z.t)("dev_handoff.annotations.pin_properties_tooltip"),recordingKey:"createAnnotationPinPropertyButton"},a.createElement(H.B,{className:"annotation--plusIcon--Ove-l",svg:t4.A,width:"16",height:"16"}),(0,z.tx)("dev_handoff.annotations.pin_properties_label")),a.createElement(I.K,{actionOnPointerDown:!0,onClick:()=>{m(e),A()},disabled:Z,"aria-label":(0,z.t)("dev_handoff.annotations.delete"),recordingKey:"createAnnotationTrashIcon",htmlAttributes:{"data-tooltip":(0,z.t)("dev_handoff.annotations.delete"),"data-tooltip-type":q.Ib.TEXT}},a.createElement(O.i,null)))),f&&a.createElement("div",{onMouseLeave:()=>L(-1,!1),ref:C,onBlur:e=>{e.relatedTarget?.getAttribute("data-property-type")||h(!1)},className:P()(eL,"annotation--dropdown--WLrjl")},0===T.length&&a.createElement("div",{className:"annotation--allPropertiesAdded--KzT8m"},(0,z.tx)("dev_handoff.annotations.all_properties_added")),T.map((t,n)=>a.createElement(a.Fragment,{key:`option-${t.type}`},n>0&&t.config.category!==T[n-1].config.category&&a.createElement("div",{className:"annotation--propertyDivider--Q3tgS"}),a.createElement(t9,{node:e,property:t,isHovered:_===n,autoFocus:_===n&&y,onMouseOver:()=>L(n,!1),onClick:e=>{k(t.type),e.preventDefault()}}))))))}let t7=Array.from(tK.entries()).map(([e,t])=>({type:e,config:t}));function t9({node:e,property:t,isHovered:n,autoFocus:r,onClick:i,onMouseOver:l}){let o=t.config.PreviewValue,s=t.config.Icon;return a.createElement(A.E,{className:P()("annotation--propertyOption--GJWeu text--fontPos12--YsUAh text--_fontBase--QdLsd",{"annotation--hoveredProperty--ZOJgv":n}),onClick:i,recordingKey:`createAnnotationOptionButton-${t.type}`,htmlAttributes:{onMouseOver:l,autoFocus:r,role:"menuitem",tabIndex:-1,"data-property-type":`property-${t.type}`}},a.createElement("div",{className:"annotation--propertyOptionIconLabel--vFND-"},a.createElement("div",{className:"annotation--propertyOptionIcon---NJse"},a.createElement(s,{node:e})),t.config.label),a.createElement("div",{className:P()("annotation--preview--SrnLk","annotation--propertyValue--yhAB- annotation--_ellipsis--8F1VE")},a.createElement(o,{node:e})))}function ne({node:e,onRemoveProp:t,property:n}){let r=n.config.DisplayValue,i=(0,tZ.J)(e,n.type,!1);return a.createElement(a.Fragment,null,a.createElement("span",{className:"annotation--selectedPropertyDisplayLabel--AtFEJ"},n.config.label),a.createElement("div",{className:"annotation--selectedPropertyValueWrapper--OyM0X"},a.createElement("span",{className:P()("annotation--selectedPropertyValue--wwu2U",{[eP]:!i})},i?a.createElement(r,{node:e}):(0,z.tx)("dev_handoff.annotations.no_value")),a.createElement("span",{className:"annotation--selectedPropertyDelete--DMdrA"},a.createElement(I.K,{recordingKey:`removeAnnotation${n.type}`,htmlAttributes:{"data-tooltip-type":q.Ib.TEXT,"data-tooltip":(0,z.t)("dev_handoff.annotations.remove_property")},"aria-label":(0,z.t)("dev_handoff.annotations.remove_property"),onClick:D.nc.user("remove-annotation",()=>{t(n.type)})},a.createElement(L.f,null)))))}function nt({viewportInfo:e,onPointerDown:t}){return a.createElement(K.D8,{className:`${ek} ${W.Dm} ${W.Uu}`,recordingKey:"annotationDialogBackground",style:{position:"absolute",left:e.x,top:e.y,width:e.width,height:e.height},onPointerDown:t})}var nn=n(328288),na=n(534611),nr=n(686759),ni=n(278312),nl=n(698993),no=n(977467);function ns({viewportInfo:e,nodeInfo:t,setDimensions:n}){return a.createElement(t3,{key:t.node.guid,node:t.node,viewportInfo:e,shouldMinimize:t.shouldMinimize,offsetX:t.offsetX,offsetY:t.offsetY,lineWidth:t.lineWidth,originalLineWidth:t.originalLineWidth,lineHeight:t.lineHeight,lineAlignment:t.lineAlignment,isLeftAligned:t.isLeftAligned,annotationType:t.annotationType,setDimensions:n},e=>t.annotationType===ej.CODE_CONNECT&&(0,u.kc)().dt_code_connect_overview_on_canvas?a.createElement(nd,{node:t.node,isFadedOut:e,componentName:t.meta?.componentName,layerName:t.meta?.layerName,count:t.meta?.count}):t.annotationType===ej.LIVING_DESIGN&&(0,u.kc)().livefish?a.createElement(nm,{node:t.node,isFadedOut:e}):a.createElement(nc,{node:t.node,isFadedOut:e}))}function nc({node:e,isFadedOut:t}){let n=(0,d.IL)(),r=(0,g.uQ)(),i=(0,C.dH)(),l=r===e.guid,o=(0,B.Xr)(N.J),c=tJ(),m=(0,a.useMemo)(()=>s.w3z.isReadOnly(s.SES.ANNOTATIONS),[]),p=(0,S.J2)(s.Ez5.devHandoffState().selectedMeasurementId),_=!!(0,f.hA)(),h=e=>{e&&(t5.wr(),(0,nl.S)("annotations"),t5.Dh([e]))},E=a.useCallback(t=>{!m&&l&&p===na.AD&&(document.activeElement?.classList.contains("focus-target")||(0,ni.t)(document.activeElement)||document.activeElement?.classList.contains(ex))&&("Backspace"===t.key||"Delete"===t.key)&&c(e)},[m,l,p,c,e]);a.useEffect(()=>(document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)),[E]);let y=a.useCallback(()=>{let e=window.getSelection()?.toString()||"";e&&(0,nr.Dk)(e,{withLineBreaks:!0})},[]);if(0===e.annotations.length)return null;let b=e.annotations[0],{label:v,labelV2:w,properties:T}=b,x=[...T].sort((e,t)=>tK.get(e.type).index-tK.get(t.type).index);return a.createElement(K.D8,{className:P()(eN,eR,{[eI]:l,[eA]:!l,[eO]:t}),role:"button",tabIndex:0,onMouseDown:()=>{l||(h(e.guid),n("click_annotation_content",{nodeId:e.guid,nodeType:e.type,hasText:!!b.label,numProperties:b.properties.length,currentTool:i,isDevModeFocusView:_}))},"data-testid":"annotationDisplay",recordingKey:`viewAnnotationContainer-${e.name}`,onDoubleClick:()=>{m||(l||h(e.guid),o(!0))},onCopy:y},v&&!(0,u.kc)().ext_lexical_editor_annotations&&a.createElement(G.R,{value:v,fallback:null,errorFallback:null,quillClassName:eD}),v&&(0,u.kc)().ext_lexical_editor_annotations&&a.createElement(ew,{defaultValue:v,lexicalDefaultValue:w,isEditable:!1}),x&&x.length>0&&a.createElement("div",{className:eM},x.map((t,n)=>a.createElement(nu,{key:n,node:e,property:t}))))}function nd({node:e,isFadedOut:t,componentName:n,layerName:r,count:i}){let l=(0,g.uQ)()===e.guid,o=e=>{e&&(t5.wr(),(0,nl.S)("annotations"),t5.Dh([e]))},s=i?` (${i})`:"";return a.createElement(K.D8,{className:P()(eN,"annotation--viewAnnotationCodeConnected--aChu-",eR,{[eI]:l,[eA]:!l,[eO]:t}),role:"button",tabIndex:0,onMouseDown:()=>{l||o(e.guid)},"data-testid":"annotationDisplay",recordingKey:`viewAnnotationContainer-${e.name}`},a.createElement("div",{className:"annotation--codeConnectIcon--nFdfw"},a.createElement(nn.s,null)),a.createElement("div",{className:"annotation--codeConnectLabel--Pd3TS"},a.createElement("span",{className:"annotation--codeConnectLabelName--d-Hdu"},n||r),i&&a.createElement("span",{className:"annotation--codeConnectCount--ZHPh-"},s)))}function nu({node:e,property:t}){let n=tK.get(t.type),r=n.DisplayValue,i=e&&e.isAlive(),l=(0,tZ.J)(e,t.type,!1);return a.createElement(a.Fragment,null,a.createElement("span",{className:"annotation--propertyDisplayLabel--PQ2vF"},n.label),a.createElement("span",{className:P()("annotation--propertyDisplayValue--bxdp7",{[eP]:!l}),"data-testid":`annotationPropertyValue-${t.type.toString()}`},i&&l?a.createElement(r,{node:e}):(0,z.tx)("dev_handoff.annotations.no_value")))}function nm({node:e,isFadedOut:t}){let{messages:n}=(0,T.u6)(e),r=(0,g.uQ)()===e.guid,i=(0,a.useMemo)(()=>s.w3z.isReadOnly(s.SES.ANNOTATIONS),[]),l=(0,S.J2)(s.Ez5.devHandoffState().selectedMeasurementId),o=e=>{e&&(t5.wr(),(0,nl.S)("annotations"),t5.Dh([e]),t5.NT(s.FAf.LIVING_DESIGNS))},c=a.useCallback(t=>{!i&&r&&l===na.AD&&(document.activeElement?.classList.contains("focus-target")||(0,ni.t)(document.activeElement)||document.activeElement?.classList.contains(ex))&&("Backspace"===t.key||"Delete"===t.key)&&(0,no.NG)(e)},[i,r,l,e]);a.useEffect(()=>(document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)),[c]);let d=a.useCallback(()=>{let e=window.getSelection()?.toString()||"";e&&(0,nr.Dk)(e,{withLineBreaks:!0})},[]);if(!n||0===n.length)return null;let u=n[0].content;return a.createElement(K.D8,{className:P()(eN,eR,{[eI]:r,[eA]:!r,[eO]:t}),role:"button",tabIndex:0,onMouseDown:()=>{r||o(e.guid)},"data-testid":"annotationDisplay",recordingKey:`viewAnnotationContainer-${e.name}`,onCopy:d},a.createElement("div",{className:eD},u))}var np=n(488819),n_=n(610265),ng=n(640001),nf=n(630564),nh=n(119257);function nE(e){let{children:t}=e,n=(0,a.useRef)(null),[r,l]=(0,a.useState)(null);return(0,a.useEffect)(()=>{if(n.current){let e=n.current.attachShadow({mode:"open"}),t=document.createElement("style");t.innerHTML=[np.Nz,ng.Nz,n_.Nz,nh.Nz,"/** @postcss-export-raw */\n\n/**\n * ellipsis.css\n *\n * Add an ellipsis if text is too long.\n *\n * The element that composes this mixin MUST have a defined width or max-width in pixels.\n * - Only works on a single line of text. See below for multi-line ellipses\n */\n\n.ellipsis--ellipsis--Tjyfa {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/**\n * Add an ellipsis after n lines of text.\n * https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-line-clamp\n *\n * The element that composes this mixin MUST:\n * - Have a defined width or max-width in pixels.\n * - Have a defined fallback height or max-height set to `line-height * n`,\n *     in case browsers do not support -webkit-line-clamp or box-orient\n *     at least the container size will be correct (with no ellipses)\n *\n * TODO(golf): start using `line-clamp` instead of -webkit-line-clamp once browsers start supporting it\n */\n\n.ellipsis--_ellipsisAfterNLines--LzI7k {\n  display: -webkit-inline-box;\n  overflow: hidden;\n\n  /* https://github.com/postcss/autoprefixer/issues/776#issuecomment-297734206 */\n  /* autoprefixer: off */\n  -webkit-box-orient: vertical;\n  /* autoprefixer: on */\n}\n\n.ellipsis--ellipsisAfter2Lines--Qo-Xh {\n  -webkit-line-clamp: 2;\n}\n\n.ellipsis--ellipsisAfter3Lines--h405C {\n  -webkit-line-clamp: 3;\n}\n\n.ellipsis--ellipsisAfter6Lines--2UA7M {\n  -webkit-line-clamp: 6;\n}\n\n.ellipsis--ellipsisAfter8Lines--WZFi8 {\n  -webkit-line-clamp: 8;\n}\n","/** @postcss-export-raw */\n/* Keep in line with FGDevHandoffHelpers.h */\n.annotation--annotationContainer--k4xiM {\n  position: relative;\n  /* Make all z indexes in this file relative to the parent.\n     We want all annotations to render underneath comments */\n  z-index: 0;\n}\n.annotation--_ellipsis--8F1VE {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n.annotation--annotationWrapper--pKMw2 {\n  position: absolute;\n  pointer-events: none;\n  width: max-content;\n  --annotation-line-color: var(--color-icon-handoff);\n  --annotation-dot-border-color: var(--color-icon-success);\n  --annotation-border-color: var(--color-border-selected-strong);\n}\n.annotation--annotationWrapperLivingDesign--l8vyM {\n  --annotation-line-color: var(--color-icon-assistive);\n  --annotation-dot-border-color: var(--color-icon-assistive);\n  --annotation-border-color: var(--color-icon-assistive);\n}\n.annotation--annotationWrapper--pKMw2,\n.annotation--wrapperMinimized--UOExu:hover {\n  z-index: 1;\n}\n.annotation--wrapperEditing--C2Zlx {\n  z-index: 2;\n}\n.annotation--wrapperMinimized--UOExu {\n  z-index: 0;\n}\n.annotation--annotationLine--jr4Mc {\n  position: absolute;\n  top: 50%;\n  border-top: 1px dashed var(--annotation-line-color);\n  /* Push to left of annotation box */\n  transform: translate(-100%, -50%);\n}\n.annotation--annotationLineStartDot--x6RNc {\n  position: absolute;\n  top: -6.5px;\n  left: 100%;\n\n  width: 12px;\n  height: 12px;\n\n  background: color-mix(in srgb, var(--annotation-line-color) 45%, transparent);\n  border: 1px solid var(--annotation-dot-border-color);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineStartDot--x6RNc:before {\n  content: '';\n\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n\n  width: 2px;\n  height: 2px;\n\n  background: var(--color-text-onbrand);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineStartDotHovered--Chqa7 {\n  background: var(--annotation-line-color);\n}\n.annotation--annotationLineEndDot--Lsq0a {\n  position: absolute;\n  top: -3.5px;\n  left: -3px;\n\n  width: 6px;\n  height: 6px;\n\n  background: var(--annotation-line-color);\n  border-radius: 100%;\n  box-sizing: border-box;\n}\n.annotation--annotationLineLeftAligned--W-1DZ {\n  transform: translate(0, -50%);\n}\n.annotation--annotationLineLeftAligned--W-1DZ .annotation--annotationLineStartDot--x6RNc {\n  left: auto;\n  right: 100%;\n}\n.annotation--annotationLineLeftAligned--W-1DZ .annotation--annotationLineEndDot--Lsq0a {\n  left: auto;\n  right: -3px;\n}\n.annotation--annotationLineAboveNode--WwqWD:not(.annotation--annotationLineLeftAligned--W-1DZ) {\n  border-left: 1px dashed var(--annotation-line-color);\n  transform: translate(-100%, -0.5px);\n}\n.annotation--annotationLineBelowNode--JeafT .annotation--annotationLineStartDot--x6RNc {\n  top: auto;\n  bottom: -6.5px;\n}\n.annotation--annotationLineAboveNode--WwqWD .annotation--annotationLineEndDot--Lsq0a {\n  top: auto;\n  bottom: -3.5px;\n}\n.annotation--annotationLineBelowNode--JeafT:not(.annotation--annotationLineLeftAligned--W-1DZ) {\n  border-left: 1px dashed var(--annotation-line-color);\n  border-bottom: 1px dashed var(--annotation-line-color);\n  border-top: 0 none;\n\n  transform: translate(-100%, calc(-100% + 0.5px));\n}\n.annotation--annotationLineLeftAligned--W-1DZ.annotation--annotationLineAboveNode--WwqWD {\n  border-right: 1px dashed var(--annotation-line-color);\n  transform: translate(0, -0.5px);\n}\n.annotation--annotationLineBelowNode--JeafT.annotation--annotationLineLeftAligned--W-1DZ {\n  border-right: 1px dashed var(--annotation-line-color);\n  border-bottom: 1px dashed var(--annotation-line-color);\n  border-top: 0 none;\n\n  transform: translate(0, calc(-100% + 0.5px));\n}\n.annotation--_annotationBase--MPByC {\n  background: var(--color-bg);\n  color: var(--color-text);\n\n  pointer-events: auto;\n\n  border-radius: 6px;\n  box-shadow: var(--elevation-200-canvas);\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box;\n\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 400;\n}\n.annotation--viewAnnotation--cA-c1 {\n\n  /* This avoids a size shift when adding a border */\n  border: 1px solid transparent;\n\n  -webkit-user-select: text;\n\n          user-select: text;\n}\n/* This is when the node is hovered (not annotation).\n   Clicking an already selected node does nothing so has no hover state. */\n.annotation--annotationHovered--QUHJv .annotation--viewAnnotation--cA-c1:not(.annotation--viewAnnotationSelected--UApdn),\n\n.annotation--viewAnnotation--cA-c1.annotation--canSelect--zG4JI:hover {\n  background: var(--color-bg-hover);\n}\n.annotation--viewAnnotationSelected--UApdn {\n  border: 1px solid var(--annotation-border-color);\n}\n.annotation--viewAnnotationFadedOut--7LQPE > * {\n  opacity: 0.5;\n}\n.annotation--createAnnotation--tWKSM .text-editor {\n    border: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor.ql-blank::after {\n    margin-top: -1.85em;\n  }\n.annotation--createAnnotation--tWKSM .text-editor:focus-within {\n    margin: 0;\n  }\n[data-fpl-version='ui3'] .annotation--createAnnotation--tWKSM .ql-container {\n      background: none;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor {\n    font-size: 13px;\n    line-height: 24px;\n    min-height: 38px;\n  }\n[data-fpl-version='ui3'] .annotation--createAnnotation--tWKSM .ql-editor {\n      min-height: 24px;\n      padding: 2px 6px;\n      margin: 4px 0 6px 0;\n  }\n.annotation--createAnnotation--tWKSM .ql-editor ul,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ul,\n  .annotation--createAnnotation--tWKSM .ql-editor ol,\n  .annotation--viewAnnotation--cA-c1 .ql-editor ol {\n    padding-left: 1.5em;\n  }\n.annotation--annotationHoverTarget--4y3Xc {\n  width: 24px;\n  height: 24px;\n  position: absolute;\n  pointer-events: auto;\n  top: calc(50% - 12px);\n  /* This is relative to the left edge of the line end dot,\n     but we want to center it around the dot */\n  left: -9px;\n}\n.annotation--annotationHoverTargetLeftAligned--G1twU {\n  /* This is relative to the right edge of the line end dot,\n     but we want to center it around the dot.\n     Shift by parent width (100%) to account for when the\n     annotation is not hidden. */\n  left: calc(100% - 15px);\n}\n.annotation--annotationLeftAligned--FHQRp {\n  transform: translate(-100%, 0);\n  left: 8px;\n}\n.annotation--annotationRightAligned--VrH8e {\n  left: -8px;\n}\n.annotation--label--Tf5gK.quill-readonly .ql-editor {\n    font-size: 11px;\n  }\n.annotation--label--Tf5gK.quill-readonly .ql-editor h1,\n    .annotation--label--Tf5gK.quill-readonly .ql-editor h2 {\n      font-size: 14px;\n    }\n.annotation--label--Tf5gK.quill-readonly .ql-editor pre.ql-syntax {\n      white-space: pre-wrap;\n    }\n.annotation--label--Tf5gK.quill-readonly .ql-editor > * {\n      cursor: default;\n    }\n.annotation--label--Tf5gK .ql-container {\n    background-color: transparent;\n  }\n.annotation--contentContainer--vSuqs {\n  display: flex;\n  flex-direction: column;\n  padding: 6px 0 8px 0;\n  max-width: 220px;\n  box-sizing: border-box;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotation--cA-c1 {\n  gap: 4px;\n}\n.annotation--contentContainerNoProperties--pc2WE {\n  padding: 6px 0 0 0;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotation--cA-c1 {\n  padding: 8px;\n}\n.annotation--createAnnotation--tWKSM .annotation--contentContainer--vSuqs {\n  /* Fixed width when authoring */\n  width: 220px;\n}\n.annotation--labelEditor--xNx12 {\n  padding: 0 10px;\n}\n.annotation--properties--1p6UF {\n  display: grid;\n  grid-template-columns: min-content auto;\n  align-items: center;\n}\n.annotation--createAnnotation--tWKSM .annotation--properties--1p6UF {\n  padding-left: 16px;\n}\nbody:not([data-fpl-version='ui3']) .annotation--createAnnotation--tWKSM .annotation--properties--1p6UF {\n    padding-right: 8px;\n  }\n[data-fpl-version='ui3'] .annotation--createAnnotation--tWKSM .annotation--properties--1p6UF {\n    padding-right: 12px;\n  }\n.annotation--propertyDisplayLabel--PQ2vF,\n.annotation--selectedPropertyDisplayLabel--AtFEJ {\n  align-self: baseline;\n\n  color: var(--color-text-secondary);\n  white-space: nowrap;\n\n  padding-right: 12px;\n}\n.annotation--selectedPropertyValueWrapper--OyM0X {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n\n  width: calc(100% + 4px);\n\n  overflow: hidden;\n}\n.annotation--propertyDisplayValue--bxdp7 {\n  overflow: hidden;\n}\n.annotation--noValue--HHQOU {\n  color: var(--color-text-secondary);\n}\n.annotation--selectedPropertyValue--wwu2U {\n  overflow: hidden;\n\n  flex: 1 1 100%;\n}\n.annotation--selectedPropertyDelete--DMdrA {\n  display: flex;\n  align-items: center;\n}\n.annotation--propertyOption--GJWeu {\n\n  background: transparent;\n  color: var(--color-text);\n  border: none;\n  align-self: stretch;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  height: 32px;\n  padding: 0px 16px;\n  gap: 8px;\n\n  font-family: Inter;\n  font-size: 13px;\n  font-weight: 400;\n}\n.annotation--propertyOption--GJWeu:focus {\n    outline: none;\n  }\n.annotation--propertyDivider--Q3tgS {\n  height: 1px;\n  background: var(--color-border);\n  margin: 8px 0;\n}\n.annotation--propertyOptionIcon---NJse {\n  width: 16px;\n}\n.annotation--propertyOptionIconSvg--LypST {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.annotation--propertyOptionIconLabel--vFND- {\n  display: flex;\n  align-items: center;\n  white-space: nowrap;\n  gap: 8px;\n}\n.annotation--allPropertiesAdded--KzT8m {\n  padding: 0 12px;\n  height: 32px;\n  font-size: 11px;\n  display: flex;\n  align-items: center;\n}\n.annotation--hoveredProperty--ZOJgv {\n  background: var(--color-bg-hover);\n}\n.annotation--preview--SrnLk {\n  color: var(--color-text-secondary);\n}\n.annotation--propertyValue--yhAB- {\n}\n.annotation--icon--w1enR svg {\n  fill: var(--color-icon);\n}\n.annotation--icon--w1enR[aria-disabled='true'] svg {\n  fill: var(--color-icon-disabled);\n}\n.annotation--chit--3je6E {\n  width: 12px;\n  height: 12px;\n  border-radius: 2px;\n  display: flex;\n  overflow: hidden;\n  margin: 1px 2px 1px 0;\n  flex-shrink: 0;\n  border: 1px solid var(--color-border);\n}\n.annotation--chit--3je6E svg {\n    width: 12px;\n    height: 12px;\n  }\n.annotation--styleChit--yCQ3O {\n  border: none;\n}\n.annotation--chitInline--vG6cM {\n  margin: 0;\n}\n.annotation--solidPaint--ClR6h {\n  display: flex;\n  align-items: center;\n  gap: 4px;\n}\n.annotation--solidPaintValue--9PQMf {\n}\n.annotation--authoringRow--cIo3- {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 32px;\n  padding: 0 4px 4px 8px;\n}\n[data-fpl-version='ui3'] .annotation--authoringRow--cIo3- {\n    padding: 0 8px 4px 8px;\n  }\n.annotation--addPropertyButton--67vPO {\n  display: flex;\n  flex-direction: row;\n  justify-content: flex-start;\n  align-items: center;\n  gap: 8px;\n  background-color: transparent;\n  color: var(--color-text);\n  border: 1px solid var(--color-border);\n  border-radius: 4px;\n  padding: 0 8px;\n  font-family: Inter;\n  font-size: 11px;\n  font-weight: 500;\n  height: 24px;\n}\n.annotation--addPropertyButton--67vPO.annotation--active--Q00x6 {\n    background-color: var(--color-bg-pressed);\n  }\n.annotation--addPropertyButton--67vPO:focus-visible {\n    border-color: var(--color-border-selected);\n  }\n.annotation--plusIcon--Ove-l {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 16px;\n  width: 16px;\n  flex: 0 0 16px;\n  line-height: 16px;\n  fill: var(--color-icon);\n}\n.annotation--dropdown--WLrjl {\n  display: flex;\n  flex-direction: column;\n  position: absolute;\n  padding: 8px 0;\n  top: calc(100% + 8px);\n  left: 0;\n  width: 220px;\n}\n.annotation--coloredProperty--OTQ6l {\n  display: flex;\n  align-items: center;\n  justify-content: left;\n}\n.annotation--coloredProperty--OTQ6l > span {\n    padding-left: 2px;\n    padding-right: 2px;\n    border-radius: 2px;\n  }\n.annotation--paddingProperty--ckvG6 > span {\n    background: var(--color-bginspectpadding);\n    color: var(--color-textoninspectpadding);\n  }\n.annotation--spacingProperty--RCjSM > span {\n    background: var(--color-bginspectspacing);\n    color: var(--color-textoninspectspacing);\n  }\n.annotation--mixedValues--Z0qIk {\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n.annotation--variablePill--VNxoI {\n  height: 16px;\n  padding: 0 4px;\n}\n.annotation--multipleVariableWrapper--OW3M1 {\n  display: flex;\n  flex-wrap: wrap;\n  gap: 4px;\n  flex-direction: row;\n  align-items: center;\n}\n.annotation--multipleVariableWrapper--OW3M1.annotation--vertical--zmpVv {\n  flex-direction: column;\n  flex-wrap: nowrap;\n}\n.annotation--multipleVariableValue--5-5xk {\n  overflow: hidden;\n  align-self: stretch;\n}\n/* Code Connect specific overrides */\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--annotationLineStartDot--x6RNc {\n  background: color-mix(in srgb, var(--color-border-component-strong) 45%, transparent);\n  border: 1px solid var(--color-border-component-strong);\n}\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--annotationLine--jr4Mc {\n  border-top-color: var(--color-border-component-strong);\n  border-left-color: var(--color-border-component-strong);\n  border-right-color: var(--color-border-component-strong);\n  border-bottom-color: var(--color-border-component-strong);\n}\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--annotationLineStartDot--x6RNc:before,\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--annotationLineStartDotHovered--Chqa7,\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--annotationLineEndDot--Lsq0a {\n  background: var(--color-border-component-strong);\n}\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--viewAnnotationCodeConnected--aChu- {\n  background-color: var(--color-bg-component-tertiary);\n  color: var(--color-text-component);\n  display: flex !important;\n  flex-direction: row !important;\n  cursor: default;\n}\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--viewAnnotationCodeConnected--aChu-:hover,\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--viewAnnotationSelected--UApdn {\n  background-color: var(--color-bg-component-tertiary);\n  color: var(--color-text-onbrand);\n  border: 1px solid transparent;\n}\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--viewAnnotationCodeConnected--aChu-:hover .annotation--codeConnectIcon--nFdfw svg path,\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--viewAnnotationSelected--UApdn .annotation--codeConnectIcon--nFdfw svg path {\n  fill: var(--color-icon-onbrand);\n}\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--codeConnectLabel--Pd3TS {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--codeConnectIcon--nFdfw {\n  display: inline-block;\n  flex: none;\n}\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--codeConnectIcon--nFdfw svg {\n  display: block;\n}\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--codeConnectIcon--nFdfw svg path {\n  fill: var(--color-icon-component);\n}\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--codeConnectLabelName--d-Hdu {\n  font-size: 10px;\n  font-family: 'Roboto Mono', Monaco, 'Courier New', monospace;\n}\n.annotation--annotationWrapperCodeConnected--raIU7 .annotation--codeConnectCount--ZHPh- {\n  font-size: 10px;\n}\n.annotation--contentContainer--vSuqs.annotation--viewAnnotationCodeConnected--aChu- {\n  padding: 2px 4px;\n}\n",nf.N,"/** @postcss-export-raw */\n.annotation_lexical_editor--contentEditable--NLeAt {\n  box-sizing: border-box;\n  flex-grow: 1;\n  padding-left: 2px;\n  padding-right: 2px;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  font-size: 13px;\n  line-height: 1.7;\n  max-height: 304px;\n  overflow-y: auto;\n  outline: none;\n  text-align: left;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n.annotation_lexical_editor--contentEditableReadOnly--tn4-c {\n  box-sizing: border-box;\n  font-size: 11px;\n  line-height: 1.7;\n}\n.annotation_lexical_editor--placeholder--1Fj3R {\n  color: var(--color-text-secondary);\n  overflow: hidden;\n  position: absolute;\n  text-overflow: ellipsis;\n  top: 15px;\n  left: 12px;\n  font-size: 13px;\n  display: inline-block;\n  pointer-events: none;\n}\n.annotation_lexical_editor--heading--Y-FlE {\n  font-size: 14px;\n  font-weight: bold;\n  margin: 0;\n}\n.annotation_lexical_editor--codeBlock--KoxzV {\n  display: block;\n  background-color: var(--color-bg-secondary);\n  border-radius: 3px;\n  padding: 2px 4px;\n  margin: 0;\n  font-family: 'Roboto Mono';\n  line-height: 1.7;\n  white-space: break-spaces;\n}\n.annotation_lexical_editor--inlineCode--eKvp9 {\n  background-color: var(--color-bg-secondary);\n  border-radius: 3px;\n  padding: 0px 4px;\n  margin: 0;\n  font-family: 'Roboto Mono';\n  line-height: 1.7;\n}\n.annotation_lexical_editor--paragraph--jyKtB {\n  margin: 0;\n}\n.annotation_lexical_editor--textBold--TPFH7 {\n  font-weight: bold;\n}\n.annotation_lexical_editor--textItalic--EyWoo {\n  font-style: italic;\n}\n.annotation_lexical_editor--textStrikethrough--BPwhx {\n  -webkit-text-decoration: line-through;\n  text-decoration: line-through;\n}\n.annotation_lexical_editor--linkReadOnly--0Ga9J {\n  color: var(--color-text-brand);\n  cursor: pointer;\n  -webkit-text-decoration: underline;\n  text-decoration: underline;\n}\n.annotation_lexical_editor--link--p4qzL {\n  color: var(--color-text-brand);\n  cursor: pointer;\n  -webkit-text-decoration: none;\n  text-decoration: none;\n}\n.annotation_lexical_editor--link--p4qzL:hover {\n  -webkit-text-decoration: underline;\n  text-decoration: underline;\n}\n.annotation_lexical_editor--listOl--3PC6m {\n  padding: 0;\n  margin: 0;\n  list-style-position: outside;\n  list-style-type: decimal;\n}\n.annotation_lexical_editor--listUl--bScae {\n  padding: 0;\n  margin: 0;\n  list-style-position: outside;\n  list-style-type: disc;\n}\n.annotation_lexical_editor--listItem--7pRsS {\n  margin-left: 20px;\n}\n"].join("\n"),e.append(t),l(e)}},[]),a.createElement("div",{ref:n,"data-testid":"annotation-renderer-shadow-dom-container",className:ex},r&&(0,i.createPortal)(t,r))}function ny(){let e=(0,l.wA)(),t=(0,g.uQ)(),n=(0,l.d4)(e=>e.isFullscreenDocumentLoaded),r=(0,S.J2)(s.Ez5.uiState().showAnnotations),i=(0,C.dH)(),I=(0,v._X)({subscribeToUpdates_expensive:!0}),A=(0,S.J2)((0,E.d)().lockMouseMoves);a.useEffect(()=>{A&&I.zoomScale<.05&&(0,E.d)().lockMouseMoves.set(!1)},[A,I]);let[O,L]=(0,m.fp)(N.J);(0,a.useEffect)(()=>{r||L(!1)},[r,L]),(0,a.useEffect)(()=>{O&&e((0,h.UU)())},[e,O]);let[D,R]=(0,a.useState)({}),{nodesWithAnnotationInfo:M,annotationsBeingViewed:P,newAnnotationNodeInfo:F}=function(e,t){let n=(0,l.d4)(e=>e.mirror.appModel.currentPage),r=(0,S.J2)(s.Ez5.annotationObserver().annotationInfoByTlf),i=(0,C.dH)(),d=(0,g.uQ)(),p=(0,m.md)(N.J),h=(0,S.J2)(s.Ez5.devHandoffState().focusMode),E=(0,S.J2)(s.Ez5.devHandoffState().focusNodeId),b=(0,f.hA)(),I=(0,S.J2)(s.Ez5.devHandoffState().codeConnectHoveredPillTlfGuid),A=(0,S.J2)(s.Ez5.devHandoffState().codeConnectOverlayHiddenGuids),O=(0,k.ks)(),L=(0,w.tS)(),D=(0,x.Fk)((e,t)=>e.get(t)?(0,c.qT)(e,t):[],n),R=(0,m.md)(_.FH),M=(0,x.Fk)(e=>{let t=e.getCurrentPage();return t&&(0,u.kc)().livefish?function e(t,n,a){if(!t)return{livingDesignsByTlf:new Map};let r=new Map,i=(0,T.u6)(t),l=t.findContainingTopLevelFrameOrSelf();for(let o of(i.messages&&i.messages.length>0&&r.set(l,[{nodeId:t.guid,...i.messages[0]}]),t.childrenNodes))e(o,n,a).livingDesignsByTlf.forEach((e,t)=>{r.has(t)||r.set(t,[]),r.get(t).push(...e)});return{livingDesignsByTlf:r}}(t,e,L).livingDesignsByTlf:new Map}),{tlfsWithNodes:P,newAnnotationNode:F}=(0,x.Fk)((e,t,n,a,r,i,l,o,d,m,p,_,g,f)=>{let h=[],E=new Set([...l.keys()]);if((0,u.kc)().dt_code_connect_overview_on_canvas){for(let e of p.keys())E.add(e);E.add(_)}if((0,u.kc)().livefish)for(let e of f?.keys()||[])E.add(e);for(let n of E){let a=e.get(n);a&&a.containingCanvas===t&&(m?(0,c.hD)(e,n,e=>{e.guid===m&&h.push(n)}):h.push(n))}if(o&&(n===s.NLJ.ANNOTATE||a)){let t=(0,c.kh)(e,o)||e.get(o);t?.guid&&!l.has(t.guid)&&h.push(t.guid)}let b=null;if(y.z4.getIsExtension()&&r&&i){let t=(0,c.kh)(e,i)||e.get(i);t?.guid&&(h=[t?.guid])}let v=h.map(t=>{let r=e.get(t),{nodes:i,tlfContainsSelectedNode:l,newAnnotationNode:d}=function e(t,n,a=[],r){let i=!1,l=null;if(t){if(t.guid===n&&(i=!0),"SECTION"===t.type)return{nodes:[],tlfContainsSelectedNode:i,newAnnotationNode:l};t.childrenNodes.forEach(t=>{let{nodes:o,tlfContainsSelectedNode:s,newAnnotationNode:c}=e(t,n,a,r);return i=i||s,l=l||c,o}),t.annotations.length>0&&t.visible?a.push({node:t,annotationType:ej.ANNOTATION}):r&&t.guid===n&&(l=t)}return{nodes:a,newAnnotationNode:l,tlfContainsSelectedNode:i}}(r,o,[],a),m=[];return O&&(m=i,(0,u.kc)().dt_code_connect_overview_on_canvas&&(m=function(e,t,n,a,r,i,l,o){let d=[...o];if(e&&n!==s.NLJ.ANNOTATE){let n=e.guid;if(a){let e=(0,c.kh)(t,a);if(e?.guid===n&&e.guid!==r&&!i.has(n)){let e=l.get(n)||[];d.push(...e.filter(e=>!o.some(t=>t.node.guid===e.node.guid)).map(e=>({node:e.node,annotationType:ej.CODE_CONNECT,meta:{componentName:e.componentName,layerName:e.layerName,count:e.count}})))}}if(r){let e=(0,c.kh)(t,r);if(e?.guid===n){let e=l.get(n)||[];(d=d.filter(t=>!e.some(e=>e.node.guid===t.node.guid))).push(...e.map(e=>({node:e.node,annotationType:ej.CODE_CONNECT,meta:{componentName:e.componentName,layerName:e.layerName,count:e.count}})))}}}return d}(r,e,n,o,_,g,p,i))),(0,u.kc)().livefish&&!O&&(m=function(e,t,n){if(!n||!e)return[];let a=[];for(let r of n.get(e.guid)||[])(a=a.filter(e=>e.node.guid!==r.nodeId)).push({annotationType:ej.LIVING_DESIGN,node:t.get(r.nodeId)});return a}(r,e,f)),d&&r&&(b={node:d,tlf:t}),{nodes:m,tlfContainsSelectedNode:l,topLevelFrameNode:r}});return d.forEach(e=>{l.has(e.guid)||v.push({nodes:[],tlfContainsSelectedNode:!1,topLevelFrameNode:e})}),{tlfsWithNodes:v,newAnnotationNode:b}},n,i,p,h,E,r,d,D,b,R,I,A,M),{annotationsBeingViewed:B,nodesWithAnnotationInfo:U}=(0,a.useMemo)(()=>{let n={x:e.offsetX,y:e.offsetY},a=P.map(({nodes:a,tlfContainsSelectedNode:r,topLevelFrameNode:i})=>{if(!i||!i.isAlive())return null;let l={x:i.absoluteBoundingBox.x,y:i.absoluteBoundingBox.y,width:i.absoluteBoundingBox.w,height:i.absoluteBoundingBox.h};if(0===a.length)return nb(l,(0,v.qc)(e))?{topLevelFrameNode:i,nodes:a,nodesWithFinalPositionData:[],shouldMinimize:!1,originalShouldMinimize:!1,tlfContainsSelectedNode:r,distanceFromCenter:nv({x:e.offsetX,y:e.offsetY},l),dimensionsWithAnnotations:l}:null;let o=.4>Math.max((l.width||0)*e.zoomScale/e.width,(l.height||0)*e.zoomScale/e.height)&&!r,s=0,c=0,d=a.map(({node:n,annotationType:a,meta:r})=>{let l=t[n.guid]||{width:0,height:0},d=eq(n,i,e);return d.isLeftAligned?s=Math.max(s,24+l.width/e.zoomScale):c=Math.max(c,24+l.width/e.zoomScale),{...d,height:t[n.guid]?.height||0,node:n,tlfGuid:i.guid,shouldMinimize:o,annotationType:a,meta:r}}).sort((e,t)=>e.offsetY-t.offsetY),u=eX(e,d,o),m=1/0,p=-1/0;u.forEach(t=>{let n=t.height/e.zoomScale,a=t.offsetY/e.zoomScale+e.offsetY-n/2;m=Math.min(m,a),p=Math.max(p,a+n)});let _=Math.min(l.y,m),g=Math.max(l.y+l.height,p),f={x:l.x-s,y:_,width:l.width+s+c,height:g-_};return nb(f,(0,v.qc)(e))?(r&&(n={x:f.x+f.width/2,y:f.y+f.height/2}),{topLevelFrameNode:i,nodes:a,nodesWithFinalPositionData:u,shouldMinimize:o,originalShouldMinimize:o,tlfContainsSelectedNode:r,distanceFromCenter:nv({x:e.offsetX,y:e.offsetY},f),dimensionsWithAnnotations:f}):null}).filter(o.isNotNullish).sort((e,t)=>nv(n,e.dimensionsWithAnnotations)-nv(n,t.dimensionsWithAnnotations)),r=a.filter(e=>!e.shouldMinimize);for(let e=0;e<r.length-1;e++){let t=r[e];for(let n=e+1;n<r.length;n++){let e=r[n];nb(t.dimensionsWithAnnotations,e.dimensionsWithAnnotations)&&(t.tlfContainsSelectedNode?e.shouldMinimize=!0:e.tlfContainsSelectedNode?t.shouldMinimize=!0:t.distanceFromCenter<e.distanceFromCenter?e.shouldMinimize=!0:t.shouldMinimize=!0)}}let i=[],l=a.flatMap(({nodes:n,nodesWithFinalPositionData:a,shouldMinimize:r,originalShouldMinimize:l,topLevelFrameNode:o})=>{if(n.length>0&&!r&&i.push({tlf:o.guid,numNodes:n.length}),r===l)return a;let s=n.map(({node:n,annotationType:a,meta:i})=>({...eq(n,o,e),height:t[n.guid]?.height||0,node:n,tlfGuid:o.guid,shouldMinimize:r,annotationType:a,meta:i})).sort((e,t)=>e.offsetY-t.offsetY);return eX(e,s,r)});return{annotationsBeingViewed:i,nodesWithAnnotationInfo:l}},[t,P,e]),G=(0,a.useMemo)(()=>{if(!F)return null;let n=function(e,t){let{x:n,y:a,w:r,h:i}=e.absoluteBoundingBox,{offsetX:l,offsetY:o,zoomScale:c,width:d}=t,u=s.Ez5.isFullscreenYScrollbarNeeded(),m=Math.min(20*c,20),p=n+r,_=(n-l)*c+d/2>eH+8&&!((l-p)*c+d/2>eH+(u?16:4));return _?{lineWidth:m,offsetX:(n-l)*c-m,offsetY:(a+i/2-o)*c,isLeftAligned:_}:{lineWidth:m,offsetX:(p-l)*c+m,offsetY:(a+i/2-o)*c,isLeftAligned:_}}(F.node,e);return{...n,height:t[F.node.guid]?.height||0,newAnnotationNode:F,tlfGuid:F.tlf,shouldMinimize:!1,node:F.node,lineAlignment:e$.ALIGNED,lineHeight:0,originalLineWidth:n.lineWidth,annotationType:ej.ANNOTATION}},[t,F,e]);return{nodesWithAnnotationInfo:U.map(e=>({...e,annotationType:e.annotationType})),annotationsBeingViewed:B,newAnnotationNodeInfo:G}}(I,D),B=(0,d.IL)(),U=P.length,G=P.reduce((e,t)=>e+t.numNodes,0);(0,a.useEffect)(()=>{U&&i===s.NLJ.SELECT&&B("showing_annotations_for_tlfs",{topLevelFrameCount:U,nodesWithAnnotationsCount:G})},[U,G,i,B]);let K=(0,p.v_)("annotationsKeyDown","keydown",(0,a.useCallback)(e=>{i===s.NLJ.ANNOTATE&&!O&&t&&"Enter"===e.key&&(e.ctrlKey||e.metaKey)&&(L(!0),e.stopPropagation())},[i,O,t,L]));if(a.useEffect(()=>(document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)),[K]),a.useEffect(()=>{b.NB?.setIsShowingAnnotations(0!==P.length)},[P]),!n||!r&&i!==s.NLJ.ANNOTATE)return null;function V(e,t){(D[e]?.height!==t.height||D[e]?.width!==t.width)&&R(n=>({...n,[e]:t}))}let H=null,z=M.map(e=>O&&e.node.guid===t?(H=a.createElement(t6,{nodeInfo:e,viewportInfo:I,setDimensions:V}),null):a.createElement(ns,{key:e.node.guid,nodeInfo:e,viewportInfo:I,setDimensions:V})),W=O&&F&&a.createElement(t6,{nodeInfo:F,viewportInfo:I,setDimensions:V});return a.createElement(a.Fragment,null,a.createElement(nE,null,z),H,W)}function nb(e,t){let n=e.x,a=e.x+e.width,r=e.y,i=e.y+e.height,l=t.x,o=t.x+t.width,s=t.y,c=t.y+t.height;return n<o&&a>l&&r<c&&i>s}function nv(e,t){let n={x:t.x+t.width/2,y:t.y+t.height/2};return Math.hypot(n.x-e.x,n.y-e.y)}function nC(){return a.createElement(r.p,null,a.createElement(ny,null))}},283978:(e,t,n)=>{n.d(t,{wc:()=>L,QU:()=>R});var a=n(411855),r=n(188507),i=n(504440),l=n(587670),o=n(776250),s=n(737947),c=n(179479),d=n(966712),u=n(38580),m=n(374626),p=n(799569),_=n(946689),g=n(163023),f=n(939863),h=n(738269),E=n(672517),y=n(809831),b=n(678340),v=n(940596),C=n(100197),w=n(239671),T=n(447402);let S="memory_warning--memoryUsageContainer--CWdMy";var x=n(450147),k=n(967063),N=n(586599),I=n(890666),A=n(612325);function O(e){let t,n,i,o,s;let c=(0,r.d4)(e=>!e.openFile?.canEdit),d=(0,C.ut)(l.Ez5?.uiState().isRecovery,!1),u=(0,r.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===l.m1T.HISTORY&&e.versionHistory.activeId&&"current_version"!==e.versionHistory.activeId),m=e.warningLevel,p=(m===b.Wy.WARNING?(s=(0,f.tx)("fullscreen.pages_panel.memory_usage_try_removing_unneeded_content"),d?s=(0,f.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_high_content"):c&&!u?s=(0,f.tx)("fullscreen.pages_panel.memory_usage_warning_edit_access_needed"):c&&u?s=(0,f.tx)("fullscreen.pages_panel.memory_usage_read_only_view_version_history"):!c&&u&&(s=(0,f.tx)("fullscreen.pages_panel.memory_usage_warning_edit_view_version_history"))):m===b.Wy.ERROR?(s=(0,f.tx)("fullscreen.pages_panel.memory_usage_to_avoid_losing_file_access"),d?s=(0,f.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_high_content"):c&&!u?s=(0,f.tx)("fullscreen.pages_panel.memory_usage_error_contact_file_owner"):c&&u?s=(0,f.tx)("fullscreen.pages_panel.memory_usage_read_only_view_version_history"):!c&&u&&(s=(0,f.tx)("fullscreen.pages_panel.memory_usage_error_edit_view_version_history"))):m===b.Wy.SAFE&&e.hasHadUnsafeWarningLevel&&(s=(0,f.tx)("fullscreen.pages_panel.memory_usage_this_file_has_enough_memory"),d&&(s=(0,f.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_low_content"))),s);if(m===b.Wy.WARNING)t="memory_warning--warningMemoryContentContainerWarning--SUOy5 memory_warning--warningMemoryContentContainer--xajq3",n="memory_warning--memoryWarningContentIconWarning--7lQhY",i=d?I.A:k.A,o=d?(0,f.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_high"):(0,f.tx)("fullscreen.pages_panel.memory_usage_memory_running_low");else if(m===b.Wy.ERROR)t="memory_warning--warningMemoryContentContainerError---AmhI memory_warning--warningMemoryContentContainer--xajq3",n="memory_warning--memoryWarningContentIconError--iWcmQ",i=d?I.A:A.A,o=d?(0,f.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_high"):(0,f.tx)("fullscreen.pages_panel.memory_usage_almost_out_of_memory");else{if(m!==b.Wy.SAFE||!e.hasHadUnsafeWarningLevel)return null;t="memory_warning--warningMemoryContentContainerSafe--KUmYN memory_warning--warningMemoryContentContainer--xajq3",n="memory_warning--memoryWarningContentIconSafe--BHw5o",i=x.A,o=d?(0,f.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_low"):(0,f.tx)("fullscreen.pages_panel.memory_usage_youre_good_to_go")}return a.createElement("div",{className:"memory_warning--memoryWarningContentBetaContainer--xcDgj"},a.createElement("div",{className:t},a.createElement("div",{className:"memory_warning--memoryWarningContentIconContainer--CeqsI"},a.createElement(g.B,{className:n,svg:i})),a.createElement("div",{className:"memory_warning--memoryWarningContentBodyHeader--HRmSt"},a.createElement("div",{className:"memory_warning--memoryWarningContentHeader--b9El-"},o),a.createElement("p",null,p,(m===b.Wy.ERROR||m===b.Wy.WARNING)&&a.createElement(_.Us,{className:m===b.Wy.ERROR?"memory_warning--learnMoreLinkError--JsmPQ":"memory_warning--learnMoreLinkWarning--AHB-S",href:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files",target:"_blank",trusted:!1,trackingEventName:"memory_warning_learn_more_clicked"}," ",(0,f.tx)("fullscreen.pages_panel.memory_usage_learn_more"))))))}function L(e){let t=e.showSidePercentage,n=e.warningLevel&&e.warningLevel>=b.Wy.ERROR;return a.createElement(a.Fragment,null,a.createElement("div",{className:"memory_warning--usageBarContainer--F67OB"},a.createElement(g.B,{style:{left:`${b.xk}%`},className:"memory_warning--icon--HcqCK",svg:N.A}),a.createElement("div",{className:t&&n?"memory_warning--usageBarBorderDanger--3tbol memory_warning--usageBarBorder--RmhaH":"memory_warning--usageBarBorder--RmhaH"},a.createElement("div",{className:t&&n?"memory_warning--usageBarFillDanger--Ew9Tl memory_warning--usageBarFill--ximmI":"memory_warning--usageBarFill--ximmI",style:{width:`${e.memoryUsagePercent}%`}}))),t&&a.createElement("div",{className:n?"memory_warning--usageBarTextDanger--d9-gr memory_warning--usageBarText--6Z1O9":"memory_warning--usageBarText--6Z1O9"},`${Math.trunc(e.memoryUsagePercent).toString()}%`))}let D=(0,v.Wh)(()=>(0,u.eU)(b.Wy.SAFE));function R(e){let t=(0,r.wA)(),n=(0,m.md)(b.Tm),i=(0,m.md)(b.Vu),o=(0,m.md)(b.eE),s=function({warningLevel:e}){let t=e!==b.Wy.SAFE,[n,r]=(0,a.useState)(t);return(0,a.useEffect)(()=>{t&&r(!0)},[t]),n}({warningLevel:o}),d=(0,y.E3)(),u=(0,C.ut)(l.Ez5?.uiState().isRecovery,!1),[p,_]=(0,a.useState)(u);!function({warningLevel:e,usingTestMemory:t,memoryUsedPercent:n,fileKey:i}){let[l,o]=(0,m.fp)(D),s=(0,r.Pj)(),d=(0,c.F)(()=>{var t,a;let r=s.getState(),l=!r.openFile?.canEdit,o=r.mirror.appModel.topLevelMode;t={warningEvent:"BANNER_LEVEL_CHANGE",fileKey:i},a={warningLevel:b.Wy[e],memoryUsedPercent:n,topLevelMode:o,isReadOnly:l},(0,T.$w)(t,{warningOnPct:b.xk,errorOnPct:b.pl,...a})}),u=e!==l&&!t;(0,a.useEffect)(()=>{u&&(o(e),d.current())},[e,u,o,d])}({warningLevel:o,usingTestMemory:i,memoryUsedPercent:n,fileKey:e.fileKey}),function({warningLevel:e,hasHadUnsafeWarningLevel:t}){let n=e===b.Wy.SAFE&&t;(0,a.useEffect)(()=>{if(n){let e=()=>{"hidden"===document.visibilityState&&(l.Ez5.uiState().showMemoryUsage.set(!1),document.removeEventListener("visibilitychange",e))};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}},[n])}({warningLevel:o,hasHadUnsafeWarningLevel:s}),function({warningLevel:e}){(0,a.useEffect)(()=>{let t=e!==b.Wy.SAFE;l.Ez5.uiState().showInFileMemoryPercentage.set(t),t&&l.Ez5.uiState().showMemoryUsage.set(!0)},[e])}({warningLevel:o});let g=(0,C.ut)(l.Ez5?.uiState().showMemoryUsage,!1);return g||u?a.createElement(M,{fileKey:e.fileKey,warningLevel:o,hasHadUnsafeWarningLevel:s,memoryUsedPct:n,showMemoryUsage:g,dispatch:t,closeManageMemoryModal:e.closeManageMemoryModal,toggleManageMemoryModal:e.toggleManageMemoryModal,editorType:d,recoveryMemDisplay:p,setRecoveryMemDisplay:_}):null}function M(e){let t=t=>{let n={view:"fullscreen",editorType:t===w.nT.Design?w.nT.Design:w.nT.Whiteboard,fileKey:e.fileKey,isRecoveryMode:!1};(0,o.sx)("exit_recovery_mode",{currentAllocatedBytes:l.hMR?.getTotalUsedHeapMemory(),maxAllocatedBytes:l.hMR?.getMaxUsedHeapMemory(),fileKey:e.fileKey}),e.dispatch(h.$T(n)),s.Ay.reload("Memory warning panel")},{warningLevel:n,hasHadUnsafeWarningLevel:r,memoryUsedPct:i,showMemoryUsage:c,editorType:u,recoveryMemDisplay:m}=e,g=n===b.Wy.ERROR,E=(0,C.ut)(l.Ez5?.uiState().isRecovery,!1);return a.createElement(a.Fragment,null,(c||m)&&a.createElement("div",{className:S,id:S},a.createElement("div",{className:"memory_warning--memoryUsageHeader--WNS5R"},a.createElement("div",{className:"memory_warning--memoryUsageHeaderTitle--65Nsp"},(0,f.tx)("fullscreen.pages_panel.memory_usage")),a.createElement("div",{className:"memory_warning--memoryUsageCloseIcon--6rw0p"},a.createElement(p.Jn,{onClick:()=>{(0,o.sx)("manage_memory_modal_closed",{currentAllocatedBytes:l.hMR?.getTotalUsedHeapMemory(),maxAllocatedBytes:l.hMR?.getMaxUsedHeapMemory(),fileKey:e.fileKey}),l.Ez5.uiState().showMemoryUsage.set(!1),l.Ez5.uiState().showInFileMemoryPercentage.set(!1),e.closeManageMemoryModal(),e.setRecoveryMemDisplay(!1)},disabled:g,className:g?"memory_warning--memoryUsageCloseButtonError--m6jl7":""}))),a.createElement("div",{className:g?"memory_warning--memoryUsageBodyContainerError--6oxZX":"memory_warning--memoryUsageBodyContainer--NE4lJ"},a.createElement(L,{memoryUsagePercent:i,showSidePercentage:!0,warningLevel:n})),a.createElement(O,{warningLevel:n,hasHadUnsafeWarningLevel:r}),(()=>{let t=(0,f.t)("manage_memory_modal.manage_memory_button"),n=()=>{e.toggleManageMemoryModal()};return a.createElement("div",{className:"memory_warning--memoryWarningButtonContainer--GkcGB"},(0,d.kc)().ss_fpl_memory?a.createElement(P,{variant:"secondary",onClick:()=>n(),trackingProperties:{buttonContext:t}},t):a.createElement(_.tM,{onClick:()=>n(),trackingProperties:{buttonContext:t}},t))})(),E&&i<b.im&&a.createElement("div",{className:c?"memory_warning--recoveryModeBannerExitButtonContainer--7A1pw":"memory_warning--recoveryModeExitButtonContainer--Y21eB"},(0,d.kc)().ss_fpl_memory?a.createElement(P,{variant:"primary",onClick:()=>t(u)},(0,f.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_exit")):a.createElement(_.vd,{onClick:()=>t(u)},(0,f.tx)("fullscreen.pages_panel.memory_usage_recovery_mode_exit")))))}let P=(0,E.tf)(i.IK)},590843:(e,t,n)=>{n.d(t,{P:()=>o,X:()=>l});var a=n(411855),r=n(335682),i=n(836927);let l=(0,a.createContext)(null);function o({children:e}){let t=(0,r.q5)(),n=t?.fileRepoId,o=(0,i.Yj)(n??null),s=(0,a.useMemo)(()=>o&&"loaded"===o.status?o.data.activeBranches.length:null,[o]);return a.createElement(l.Provider,{value:s},e)}},100303:(e,t,n)=>{n.d(t,{A5:()=>R,CT:()=>M,EA:()=>L,II:()=>K,L4:()=>P,SK:()=>G,SQ:()=>F,WB:()=>U,ih:()=>D});var a=n(411855),r=n(188507),i=n(587670),l=n(534611),o=n(707458),s=n(126049),c=n(344780),d=n(173292),u=n(939683),m=n(374626),p=n(498750),_=n(316082),g=n(96328),f=n(456363),h=n(939863),E=n(772167),y=n(809831),b=n(478556),v=n(283942),C=n(435061),w=n(862442),T=n(843495),S=n(29680),x=n(479118),k=n(100197),N=n(776726),I=n(179536),A=n(326127),O=n(81804);let L=a.createContext(!1);function D({onChange:e,query:t,focusedByButtons:n,innerRef:r,onKeyDown:i,onKeyUp:l,onPasteCapture:o,onFocus:s,editorType:c}){return a.createElement(A.H,{innerRef:r,value:t,placeholder:(0,h.t)("canvas_search.search_placeholder"),onFocus:e=>{s&&s(e),!n.current&&e.target&&e.target.select(),n.current=!1},onPasteCapture:o,onKeyDown:e=>{e.keyCode===p.Uz.F?(0,p.Te)(e)?(e.currentTarget.select(),e.preventDefault()):(0,v.jr)(e,v.W0.NO,v.VA.NO)&&e.stopPropagation():i(e)},onKeyUp:l,onChange:e,dataTestId:"canvas-search-input",recordingKey:`${c}.canvas_search.search`})}function R(e,t,n){let r=(0,a.useCallback)(({direction:a,shouldSelectInput:r})=>{if(e&&!e.current?.matches(":focus")){let t=new IntersectionObserver(a=>{let[i]=a;r?e.current?.select():(n.current=!0,e.current?.focus()),i.isIntersecting&&t.disconnect()});return e.current&&t.observe(e.current),()=>t.disconnect()}a&&t(a,"keyboard")},[n,e,t]);(0,d.p)(b.r.FocusEvent,r)}function M(){let e=(0,a.useRef)(!1),[t,n]=(0,a.useState)(!0),{query:i}=(0,r.d4)(e=>e.canvasSearch),{total:l}=(0,m.md)(f.Fk);return{focusedByButtons:e,hidden:t,setHidden:n,inputRef:a.useRef(null),navDisabled:!i||l<=1,showUi:(0,S.p8)("showUi")}}function P(){let e=(0,w.Z)("canvas_search_navigate"),t=(0,r.d4)(e=>e.canvasSearch.scope);return(0,a.useCallback)((n,a)=>{e(i.YEY.setActiveResultAndGetViewportSettings(n,a),{additionalTrackEventParams:{searchScope:i.Lov[t]}})},[e,t])}function F(){let e=(0,w.Z)("canvas_search_navigate"),{query:t,scope:n,filters:o,mode:d}=(0,r.d4)(e=>e.canvasSearch),m=(0,r.wA)(),p=(0,a.useRef)(!1),f=(0,S.p8)("currentPage"),h=(0,k.J2)(i.Ez5.uiState().showCanvasSearch),y=(0,S.p8)("pagesList"),[b,v]=(0,a.useState)(!1),[N,I]=(0,a.useState)(i.Ez5.uiState().isRecovery.getCopy()),[A,O]=(0,a.useState)(!1),L=B(),D=(0,u.am)(),R=(0,_.y)(),M=(0,a.useMemo)(()=>R&&(0,x.lH)(y),[R,y])||R&&i.h3O?.isValidatingIncremental(),P=(0,a.useMemo)(()=>!R&&(0,x.lH)(y),[R,y]);(0,a.useLayoutEffect)(()=>{n!==i.Lov.ALL_PAGES||A||!M&&N?i.YEY.setSearchScope(n):(O(!0),scheduler.postTask(async()=>{M&&await (0,C.q)(i._em.FIND_AND_REPLACE),i.YEY.setSearchScope(n),I(!0)},{priority:"user-blocking"}))},[N,y,n,A,M]);let F=(0,a.useCallback)(async(t,a=!0)=>{c.sn.start("canvas_search_time_to_results"),O(!0);let{nav:r,resultsByPage:o}=await L(t,a);Object.keys(o).filter(e=>e!==f&&e!==l.Xy).length?v(!0):v(!1),O(!1),a&&e(r,{additionalTrackEventParams:{searchScope:i.Lov[n]}});let s=c.sn.tryStop("canvas_search_time_to_results");s&&D("canvas_search_time_to_results",{timeElapsedMs:s,searchScope:i.Lov[n],resultCount:Object.values(o).reduce((e,t)=>e+=t.length,0)})},[f,e,n,L,D]),U=(0,s.A)(F,300),G=(0,a.useCallback)((e,t=!0)=>{m(E.NY(e)),O(!!e&&!(0,g.jN)(e)),U(e,t)},[m,U]);return(0,a.useEffect)(()=>{h&&t&&(n!==i.Lov.ALL_PAGES||!M&&N)&&F(t,!1)},[o,d,n,h,y,N,M]),{query:t,showSearch:h,resultsOnOtherPages:b,search:G,next:(0,a.useCallback)((t,n)=>{(0,T.Uc)(""),i.YEY.setHoveredResult(l.AD,-1);let a=!p.current;p.current=!1,e(i.YEY.setNextSearchResultAndGetViewportSettings(t,a),{additionalTrackEventParams:{source:n}})},[e]),exit:(0,a.useCallback)(()=>{i.YEY?.exitSearchMode(i.dNx.NONE)},[]),setNavigateNearestOnce:function(){p.current=!0},mode:d,isLoading:A,allInstancesExpanded:N,missingResultsOnSomePages:P}}function B(){let{scope:e,filters:t,mode:n}=(0,r.d4)(e=>e.canvasSearch),o=(0,S.p8)("currentPage"),s=(0,u.am)(),c=(0,y.lg)(),d=(0,r.d4)(e=>e.mirror.appModel.pagesList);return(0,a.useCallback)(async(a,r=!0,u)=>{let m=u??o;if(!a||(0,g.jN)(a)){let{nav:e}=i.YEY.setSearchResultsAndGetViewportSettings([],m,"",{categories:[],mode:n});return{nav:e,resultsByPage:{}}}let p=!!t[I.kM.MatchCase],_=!!t[I.kM.WholeWords],{resultsByPage:f,metrics:h}=await N.H1.search(a,{searchLayerNames:"design"===c,matchCase:p,wholeWords:_}),E=(0,O.kH)(t),y=e===i.Lov.ACTIVE_PAGE?f[m]?[{pageId:m,results:f[m]}]:[]:Object.keys(f).map(e=>({pageId:e,results:f[e]}));if(e===i.Lov.ACTIVE_PAGE&&f[l.Xy]){let e=f[l.Xy];e.length&&y.push({pageId:l.Xy,results:e})}if(1===a.length){let e=0,t=[],n=y.findIndex(e=>e.pageId===l.Xy);for(let a of(n>-1&&t.push(y[n]),d)){let n=y.findIndex(e=>e.pageId===a.nodeId);if(-1===n)continue;let r=y[n];if(r.results.length>1e3-e){t.push({results:r.results.slice(0,1e3-e),pageId:r.pageId});break}e+=r.results.length,t.push(r)}y=t}let{nav:b,...v}=i.YEY.setSearchResultsAndGetViewportSettings(y,m,a,{categories:E,mode:n}),C=E.map(e=>I.kM[e]);return s("canvas_search_results",{...h,...v,nodeTypes:C,searchScope:i.Lov[e],matchCase:p,wholeWords:_}),{nav:b,resultsByPage:f}},[o,c,t,n,d,e,s])}function U(){let e=(0,k.J2)(i.Ez5.uiState().showCanvasSearch),t=i.YEY.hasDirtyPrimaryInstances(),n=(0,m.md)(f.Fk),r=(0,a.useRef)([]),l=t&&r.current.length,s=(0,a.useMemo)(()=>{if(!e||!n.total||l)return[];let t=i.YEY.getSearchResults(),a=[];return t.forEach(e=>{let t=e.results.map(e=>{let t=o.q.instance.get(e.guid);return t?{...e,textContent:t.textContent,name:t.name}:e});a.push({results:t,pageId:e.pageId})}),r.current=a,a},[n,e,l]);return l?r.current:s}function G(e){return!e.clientX&&!e.clientY}function K(){let{query:e,scope:t}=(0,r.d4)(e=>e.canvasSearch),n=B();return(0,a.useCallback)(a=>{let r=i.YEY.getActiveResult(),l=r.type===i.Z6A.CANVAS,s=a||l&&r.guid;return!!s&&(o.q.instance.setCurrentPageAsync(s).then(()=>{t===i.Lov.ACTIVE_PAGE?n(e,!1,s):i.YEY.setActiveResultAndGetViewportSettings(s,0)}),!0)},[e,t,n])}},332721:(e,t,n)=>{n.d(t,{_:()=>p});var a=n(411855),r=n(343887),i=n(782683),l=n(243742),o=n(163023),s=n(939863),c=n(498606),d=n(227795),u=n(960896),m=n(130715);function p({onClick:e}){return"ui3"===(0,l.DP)().version?a.createElement(r.K,{onClick:e,recordingKey:"canvas_search.search_icon_button","aria-label":(0,s.t)("fullscreen_actions.find"),htmlAttributes:{"data-onboarding-key":"canvas-search","data-tooltip":"canvas-search","data-tooltip-type":c.Ib.LOOKUP}},a.createElement(i.h,null)):a.createElement(d.K0,{"data-onboarding-key":"canvas-search","data-tooltip-type":c.Ib.LOOKUP,"data-tooltip":"canvas-search",onClick:e,recordingKey:"canvas_search.search_icon_button",isBackgroundTransparent:!0,className:u.gV},a.createElement(o.B,{svg:m.A,className:u.v9}))}},326127:(e,t,n)=>{n.d(t,{H:()=>u});var a=n(411855),r=n(629019),i=n.n(r),l=n(498750),o=n(860601),s=n(563706),c=n(158950),d=n(960896);function u({innerRef:e,value:t,placeholder:n,onChange:r,onFocus:u,onKeyDown:m,onKeyUp:p,shiftEnterInsertsNewline:_,dataTestId:g,recordingKey:f,onPasteCapture:h}){let E=(0,a.useCallback)(t=>{e&&(e.current=t?.textarea??null)},[e]),y=t.includes("\n");return a.createElement(c.v,{className:i()(d.Rt,{[d.tI]:!y}),ref:E,focusOnMount:!0,placeholder:n,value:t,spellCheck:!1,recordingKey:f,dataTestId:g,onEscape:o.lQ,disableBorderStyles:!0,onFocus:u,onPasteCapture:h,onKeyDown:e=>{switch(e.keyCode){case l.Uz.ENTER:if(e.preventDefault(),_&&(e.shiftKey||s.Ay.mac&&e.ctrlKey)){let{selectionStart:t,selectionEnd:n}=e.currentTarget;e.currentTarget.setRangeText("\n",t,n,"end"),e.currentTarget.scrollLeft=0,e.stopPropagation(),r(e.currentTarget.value);return}break;case l.Uz.UP_ARROW:case l.Uz.DOWN_ARROW:if(y)return}m(e)},onKeyUp:p,onChange:e=>r(e.currentTarget.value)})}},796825:(e,t,n)=>{n.d(t,{a:()=>T});var a=n(411855),r=n(188507),i=n(587670),l=n(86625),o=n(344780),s=n(939683),c=n(374626),d=n(498750),u=n(153234),m=n(456363),p=n(163023),_=n(939863),g=n(392592),f=n(553015),h=n(809831),E=n(283942),y=n(862442),b=n(193212),v=n(326127),C=n(960896),w=n(969893);function T({query:e,value:t,onChange:n,onFocus:T,recordingKey:S,hasMultipleSelections:x}){let k=(0,r.wA)(),N=(0,b.aq)(),I=(0,y.Z)("canvas_search_navigate"),A=(0,r.d4)(e=>e.canvasSearch.scope),{total:O}=(0,c.md)(m.Fk),L="whiteboard"===(0,h.lg)(),[D,R]=(0,a.useState)(!1),M=e.toLocaleLowerCase()!==t.toLocaleLowerCase(),P=(0,s.am)(),F=!e||!O,B=l.nc.user("canvas-search-replace",n=>{if(x){let{numReplaced:a,timeMs:r}=i.YEY.replaceInMultipleResults(t,{preserveCase:M},i.rpt.ONLY_ACTIVE);P("canvas_search_multi_replace",{source:n,timeMs:r,numReplaced:a,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),R(!0);return}let a=i.YEY.replaceInActiveResult(t,{preserveCase:M});R(!0),P("canvas_search_replace",{source:n,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),I(a,{delay:300,additionalTrackEventParams:{searchScope:i.Lov[A]}})});return a.createElement("div",null,a.createElement("div",{className:C.N6},!L&&a.createElement("div",{className:C.v9},a.createElement(p.B,{svg:w.A})),a.createElement(v.H,{value:t,placeholder:(0,_.t)("canvas_search.replace_placeholder"),recordingKey:u.Pt(S,"replace_input"),onChange:n,onFocus:e=>{T?.(e,!N())},onKeyDown:e=>{e.keyCode===d.Uz.ENTER?(B("enter"),e.stopPropagation()):D&&(0,d.Fo)(e)&&(0,E.jr)(e,E.W0.YES)&&e.stopPropagation()},shiftEnterInsertsNewline:!0})),a.createElement("div",{className:C._E},a.createElement(f.$,{disabled:F,onClick:()=>B("button"),recordingKey:u.Pt(S,"replace_one")},(0,_.tx)("canvas_search.replace_one")),a.createElement(f.$,{disabled:F,onClick:l.nc.user("canvas-search-replace-all",()=>{o.sn.start("canvas_search_replace_all");let{numReplaced:n,timeMs:a}=i.YEY.replaceInMultipleResults(t,{preserveCase:M},i.rpt.ALL);n>0&&(R(!0),k(g.F.enqueue({type:"canvas-search-replace-all",message:(0,_.t)(L?"canvas_search.replace_all_message_figjam":A===i.Lov.ACTIVE_PAGE?"canvas_search.replace_all_message":"canvas_search.replace_all_message_all_pages",{count:n})}))),P("canvas_search_replace_all",{source:"button",timeMs:a,numReplaced:n,replacementIncludesOriginal:t.toLocaleLowerCase().includes(e.toLocaleLowerCase())}),o.sn.tryStop("canvas_search_replace_all")}),recordingKey:u.Pt(S,"replace_all")},(0,_.tx)("canvas_search.replace_all"))))}},424622:(e,t,n)=>{n.d(t,{g:()=>G,F:()=>H});var a=n(411855),r=n(188507),i=n(459401),l=n(187134),o=n(196367),s=n(538082),c=n(587670),d=n(629019),u=n.n(d),m=n(966712),p=n(374626),_=n(563706),g=n(153234),f=n(456363),h=n(268537),E=n(163023),y=n(46481),b=n(939863),v=n(772167),C=n(809831),w=n(318812),T=n(29680),S=n(179536),x=n(498606),k=n(298543),N=n(227795),I=n(81804),A=n(77499),O=n(968109),L=n(170379),D=n(313888),R=n(638496),M=n(142284),P=n(999918),F=n(931493),B=n(970823),U=n(785496);function G({lean:e,minWidth:t,recordingKey:n}){let i=(0,r.wA)(),d=(0,w.BK)("CANVAS_SEARCH_FILTER_DROPDOWN"),u=a.useRef(null),E=(0,T.p8)("isReadOnly"),I=(0,p.md)(f.yo),A=(0,r.d4)(e=>e.canvasSearch.filters),O=(0,r.d4)(e=>e.canvasSearch.mode),D="whiteboard"===(0,C.lg)(),R=a.useMemo(()=>{let e=E?[]:[a.createElement(h.y0,{key:"find",primaryText:(0,b.t)("canvas_search.search"),checked:O===c.EW4.FIND,onClick:()=>{i(v.sV(c.EW4.FIND)),d.hide()},recordingKey:g.Pt(n,"settings.find")}),a.createElement(h.y0,{key:"replace",primaryText:(0,b.t)("canvas_search.replace"),checked:O===c.EW4.REPLACE,onClick:()=>{i(v.sV(c.EW4.REPLACE)),d.hide()},recordingKey:g.Pt(n,"settings","replace")}),a.createElement(h.wv,{key:"sep1"})],t=(t,r=!1)=>{let l=!!A[t];e.push(a.createElement(K,{key:t,option:t,checked:l,counts:I,onClick:e=>{r||e.ctrlKey||_.Ay.mac&&e.metaKey?(i(v.DI(t)),r&&d.hide()):(i(v.zx(t)),d.hide())},recordingKey:n}))};if(O===c.EW4.FIND&&!D){let r=!S.b4.some(e=>!!A[e]),l=Object.values(I).reduce((e,t)=>e+t,0);e.push(a.createElement(V,{checked:r,icon:L.A,label:(0,b.t)("canvas_search.filter.all"),count:l,onClick:()=>{i(v.dY()),d.hide()},recordingKey:g.Pt(n,"settings","All")})),S.b4.forEach(e=>t(e)),e.push(a.createElement(h.wv,{key:"sep2"}))}return S._V.forEach(e=>t(e,!0)),e},[i,d,A,D,E,O,I,n]);return(0,a.useEffect)(()=>{E&&O===c.EW4.REPLACE&&i(v.sV(c.EW4.FIND))},[i,E,O]),a.createElement(l.o,{eventListeners:["onClick","onMouseUp"]},a.createElement("div",{ref:u},(0,m.kc)().ce_tv_fpl_dialog_trigger_button?a.createElement(o.d,{toggled:d.showing,onClick:()=>d.toggle(),actionOnPointerDown:!0,"aria-label":(0,b.t)("canvas_search.settings"),recordingKey:g.Pt(n,"settings"),htmlAttributes:{"data-tooltip-type":x.Ib.TEXT,"data-tooltip":(0,b.t)("canvas_search.settings")}},a.createElement(y.U,{svg:P.A},a.createElement(s.P,null))):a.createElement(N.YW,{svg:P.A,selected:d.showing,"data-tooltip-type":x.Ib.TEXT,"data-tooltip":(0,b.t)("canvas_search.settings"),onClick:e=>d.showing&&e.stopPropagation(),onMouseDown:d.toggle,recordingKey:g.Pt(n,"settings")})),d.showing&&u.current&&a.createElement(k.Jz,{showPoint:!0,targetRect:u.current.getBoundingClientRect(),options:R,hideDropdown:d.hide,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,autofocusPrevElementOnTab:!1,lean:e,minWidth:t,recordingKey:g.Pt(n,"settings"),propagateCloseClick:!0}))}function K(e){let t=e.counts[e.option],n=function(e){switch(e){case S.kM.Text:return M.A;case S.kM.FrameOrGroup:return A.A;case S.kM.Component:return D.A;case S.kM.Instance:return O.A;case S.kM.Image:return B.A;case S.kM.Shape:return R.A;case S.kM.Other:return F.A;case S.kM.MatchCase:case S.kM.WholeWords:return null}}(e.option),r=W(e.option);return a.createElement(V,{checked:e.checked,icon:n,label:r,count:t,onClick:e.onClick,buttonRef:e.buttonRef,recordingKey:g.Pt(e,"settings",S.kM[e.option])})}function V({checked:e,icon:t,label:n,count:r,onClick:i,buttonRef:l,recordingKey:o}){return a.createElement(h.MM,{checked:e,onClick:i,recordingKey:o,buttonRef:l},a.createElement("div",{className:"canvas_search_settings--optionRow--KS01b"},t&&a.createElement(E.B,{className:"canvas_search_settings--optionIcon---0QYX",svg:t}),a.createElement("span",{className:"canvas_search_settings--optionLabel--Ygpmi"},n),!!r&&a.createElement("span",{className:"canvas_search_settings--optionCount--BzzTP"},r)))}function H({short:e,mode:t,recordingKey:n}){let l=(0,r.wA)(),o=(0,r.d4)(e=>e.canvasSearch.filters),s=t===c.EW4.FIND?I.D4:I.IM,d=(0,i.mapAndFilterNullish)(s,e=>o[e]?a.createElement(z,{key:e,option:e,onClose:()=>{l(v.DI(e))},recordingKey:n}):null);return 0===d.length?null:a.createElement("div",{className:u()("canvas_search_settings--filterPills--tbdih",{"canvas_search_settings--filterPillsShort--GX-Rn":e})},d)}function z({option:e,onClose:t,recordingKey:n}){return a.createElement("div",{className:"canvas_search_settings--filterPill--hjIaF"},W(e),a.createElement(N.K0,{className:"canvas_search_settings--pillRemove--Om1tg",svg:U.A,onClick:t,isBackgroundTransparent:!0,"data-tooltip-type":x.Ib.TEXT,"data-tooltip":(0,b.t)("canvas_search.filter.remove"),tooltipForScreenReadersOnly:!0,recordingKey:g.Pt(n,S.kM[e],"remove")}))}function W(e){switch(e){case S.kM.Text:return(0,b.t)("canvas_search.filter.text");case S.kM.FrameOrGroup:return(0,b.t)("canvas_search.filter.frame_or_group");case S.kM.Component:return(0,b.t)("canvas_search.filter.component");case S.kM.Instance:return(0,b.t)("canvas_search.filter.instance");case S.kM.Image:return(0,b.t)("canvas_search.filter.image");case S.kM.Shape:return(0,b.t)("canvas_search.filter.shape");case S.kM.Other:return(0,b.t)("canvas_search.filter.other");case S.kM.MatchCase:return(0,b.t)("canvas_search.filter.match_case");case S.kM.WholeWords:return(0,b.t)("canvas_search.filter.whole_words")}}},137345:(e,t,n)=>{n.d(t,{Y:()=>eE,f:()=>ey});var a=n(411855),r=n(188507),i=n(729064),l=n(782683),o=n(243742),s=n(587670),c=n(534611),d=n(629019),u=n.n(d),m=n(939683),p=n(622422),_=n(966712),g=n(38580),f=n(374626),h=n(646240),E=n(498750),y=n(860601),b=n(316082),v=n(563706),C=n(153234),w=n(522739),T=n(735536),S=n(96328),x=n(456363),k=n(268537),N=n(950431),I=n(452441),A=n(493323),O=n(355819),L=n(163023),D=n(46481),R=n(271779),M=n(939863),P=n(392592),F=n(772167),B=n(356390),U=n(478556),G=n(541524),K=n(283942),V=n(862442),H=n(843495),z=n(318812),W=n(29680),j=n(479118),$=n(967409),q=n(498606),Y=n(371591),X=n(298543),J=n(227795),Z=n(144119),Q=n(100303),ee=n(332721),et=n(796825),en=n(424622),ea=n(81804),er=n(960896),ei=n(949207),el=n(432023),eo=n(247245),es=n(370903),ec=n(995382),ed=n(761070),eu=n(593701),em=n(289298),ep=n(130715),e_=n(630834),eg=(e=>(e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE",e[e.MULTI=2]="MULTI",e))(eg||{}),ef=(e=>(e[e.NONE=0]="NONE",e[e.TOP=1]="TOP",e[e.MIDDLE=2]="MIDDLE",e[e.BOTTOM=3]="BOTTOM",e[e.ALL=4]="ALL",e))(ef||{});let eh=(0,g.eU)(!1),eE=a.memo(function(e){let{onFocus:t}=e;return a.createElement("div",{className:er.i$},a.createElement("div",{className:er.PP},a.createElement("div",{className:er.JA},a.createElement(ee._,{onClick:e.onFocus}),a.createElement(I.L,{className:er.Rt,onFocus:t,placeholder:(0,M.t)("canvas_search.search_placeholder")}))))}),ey=a.memo(function({showFilter:e}){let{query:t,resultsOnOtherPages:n,next:r,exit:i,setNavigateNearestOnce:d,search:m,showSearch:p,mode:_,isLoading:g,allInstancesExpanded:h,missingResultsOnSomePages:y}=(0,Q.SQ)(),[b,v]=(0,a.useState)(""),{focusedByButtons:C,inputRef:w}=(0,Q.CT)(),T=(0,a.useRef)(null),k=(0,V.Z)("canvas_search_navigate"),N=(0,f.md)(x.Wy),I=(0,f.md)(x.ml),O=(0,a.useContext)(Q.EA),L=(0,f.md)(eh),[P,F]=(0,a.useState)(null),[U,K]=(0,a.useState)(0),[H,z]=(0,a.useState)(!1);(0,a.useLayoutEffect)(()=>{if(O){if(I.size>1||N.size>1){z(!0);return}for(let e of N.values())e.size>1&&z(!0)}},[N,O,I]);let W=(e,t)=>{z(!1),r(e,t)},j=function(e,t,n){if(!n)return!1;if(t.size>1||e.size>1)return!0;for(let t of e.values())return t.size>1;return!1}(N,I,O),Y=function(e,t,n,r,i){let l=eN(e,n,e=>{let n=(e.keyCode===E.Uz.D||e.keyCode===E.Uz.F)&&(0,E.Fo)(e)&&e.shiftKey;eA(e)&&!n&&t.current?.focus()},i);return(0,a.useCallback)(e=>{let a=eO(e);switch(e.keyCode){case E.Uz.RIGHT_ARROW:case E.Uz.LEFT_ARROW:(0,E.Te)(e)||l(e);break;case E.Uz.C:case E.Uz.X:(0,E.Te)(e)&&window.getSelection&&!window.getSelection().toString()&&(B.Y5.triggerAction(e.keyCode===E.Uz.C?"copy":"cut"),e.preventDefault(),e.stopPropagation(),e.keyCode===E.Uz.X&&t.current?.focus());break;case E.Uz.V:case E.Uz.Z:break;default:l(e)}n||a===c.AD||r(s.YEY.setActiveResultAndGetViewportSettings(a,0),{delay:300})},[n,l,t,r])}(W,T,j,k,K),X=eI(K);(0,Q.A5)(w,r,C);let Z="ui3"===(0,o.DP)().version;if(!p)return null;let ee=a.createElement(a.Fragment,null,a.createElement("div",{className:u()(er.v9,{[er.ei]:Z&&""===t})},a.createElement(D.U,{svg:ep.A},a.createElement(l.h,null))),a.createElement(Q.ih,{onChange:e=>{z(!1),m(e)},query:t,focusedByButtons:C,onKeyDown:Y,onKeyUp:X,innerRef:w,onPasteCapture:e=>{(0,G.gk)(e)&&(B.Y5.triggerActionInUserEditScope("paste"),e.preventDefault(),T.current?.focus())},editorType:$._Y.DESIGN}));return a.createElement(R.i,null,a.createElement("div",{className:er.G$,onBlurCapture:e=>{e.relatedTarget&&!e.currentTarget.contains(e.relatedTarget)&&(s.YEY.setOverlayVisible(!1),d(),K(0))}},a.createElement("div",{className:er.PP},a.createElement("div",{className:er.Wv},Z?a.createElement("div",{className:er.Z9},ee):ee,e&&a.createElement(en.g,{lean:"right",recordingKey:"figma_design_search"}),a.createElement(J.K0,{svg:e_.default,onClick:i,"data-tooltip-type":q.Ib.TEXT,"data-tooltip":(0,M.t)("canvas_search.close"),tooltipForScreenReadersOnly:!0,recordingKey:"figma_design_search.close"})),a.createElement(en.F,{mode:_,short:_===s.EW4.REPLACE,recordingKey:"figma_design_search.filterPills"}),_===s.EW4.REPLACE&&a.createElement(et.a,{query:t,value:b,onChange:v,onFocus:(e,n)=>{!t&&n&&w.current?.focus()},hasMultipleSelections:j,recordingKey:"figma_design_search"})),g||L?a.createElement("div",{className:u()(er.S,er.dz)},a.createElement(A.dW,{size:"medium",testId:"canvas-search-loading-spinner"})):t&&!(0,S.jN)(t)&&a.createElement(eb,{onNext:W,navigate:k,replacement:_===s.EW4.REPLACE?b:void 0,resultsOnOtherPages:n,allInstancesExpanded:h,resultInputHandlerRef:T,hoveredResult:P,hasMultipleSelections:j,isInMultiselectMode:H,hoverSelectMode:U,missingResultsOnSomePages:y,setIsInMultiselectMode:z,setHoverSelectMode:K,setHoveredResult:F})))});function eb({onNext:e,navigate:t,replacement:n,resultsOnOtherPages:l,resultInputHandlerRef:o,hoveredResult:d,hasMultipleSelections:_,isInMultiselectMode:g,missingResultsOnSomePages:h,hoverSelectMode:b,setIsInMultiselectMode:v,setHoverSelectMode:C,setHoveredResult:T,allInstancesExpanded:S}){let k=(0,r.wA)(),N=(0,Q.WB)(),I=(0,Q.II)(),L=(0,W.p8)("currentPage"),D=(0,a.useRef)(null),R=(0,r.d4)(e=>e.canvasSearch.scope),P=s.YEY.hasDirtyPrimaryInstances(),U=(0,f.md)(x.Fk),G=(0,f.md)(x.Ch),K=(0,f.md)(x.Wy),H=(0,f.md)(x.ml),z=(0,f.md)(x.hw),j=(0,a.useContext)(Q.EA),$=!g,Y=null==n,X=(0,Q.L4)(),Z=function(e,t){let n=(0,V.Z)("canvas_search_navigate"),i=(0,r.d4)(e=>e.canvasSearch.scope),l=(0,m.am)(),o=(0,a.useContext)(Q.EA),c=(0,a.useCallback)((a,r,o)=>{let{nav:c,numNewNodes:d,numNewTextMatches:u}=s.YEY.addActiveResultAndGetViewportSettings(a,r,o);e&&l("canvas_search_enter_multi_select",{numberOfNodes:d,numberOfTextMatches:u,source:"cmd/ctrl+click",mode:t?"find":"replace"}),n(c,{additionalTrackEventParams:{searchScope:s.Lov[i]}})},[t,n,i,l,e]);return o?c:y.lQ}($,Y),ee=function(e,t){let n=(0,V.Z)("canvas_search_navigate"),i=(0,r.d4)(e=>e.canvasSearch.scope),l=(0,m.am)(),o=(0,a.useContext)(Q.EA),c=(0,a.useCallback)(a=>{let{nav:r,numNewNodes:o,numNewTextMatches:c}=s.YEY.addActiveResultsAndGetViewportSettings(a);e&&l("canvas_search_enter_multi_select",{numberOfNodes:o,numberOfTextMatches:c,source:"shift+click",mode:t?"find":"replace"}),n(r,{additionalTrackEventParams:{searchScope:s.Lov[i]}})},[t,n,i,l,e]);return o?c:y.lQ}($,Y),et=function(){let e=(0,V.Z)("canvas_search_navigate"),t=(0,r.d4)(e=>e.canvasSearch.scope),n=(0,a.useContext)(Q.EA),i=(0,a.useCallback)((n,a,r)=>{e(s.YEY.removeActiveResultAndGetViewportSettings(n,a,r),{additionalTrackEventParams:{searchScope:s.Lov[t]}})},[e,t]);return n?i:y.lQ}(),[en,ei]=function(...e){let[t,n]=(0,a.useState)(()=>e.reduce((e,t)=>(e[t]=!0,e),{}));return[t,(0,a.useCallback)((e,t=!0)=>{n(n=>n[e]!==t?{...n,[e]:t}:n)},[])]}(c.Xy,L),el=(0,a.useRef)({}),eo=(0,a.useMemo)(()=>{let e=[],t=N.find(e=>e.pageId===c.Xy),n=R===s.Lov.ALL_PAGES||!!t,a=N.find(e=>e.pageId===L),r=N;R===s.Lov.ACTIVE_PAGE&&(r=[],t&&r.push(t),a&&r.push(a));let i=0;for(let{pageId:t,results:a}of(el.current={},r)){if(0===a.length)continue;let r=!!en[t];if(n&&(e.push({type:"header",data:{pageId:t,open:r,numResults:a.reduce((e,t)=>e+=t.textMatches.length,0)}}),++i),n&&!r)continue;el.current[t]=i;let l=0;for(let n of a){let{textMatches:a,...r}=n;a.forEach((n,a)=>{e.push({type:"result",data:{...r,matchIndex:a,textMatch:n,index:l,pageId:t}}),++l,++i})}}return e},[L,en,R,N]);(0,a.useEffect)(()=>{null!=G&&ei(G.pageId)},[G,ei]);let ed=(0,i.z)({size:eo.length,parentRef:D,overscan:10}),eu=e=>{if(null==G||null==G.index)return[];let t=el.current[G.pageId];if(null==t)return[];let n=t+G.index;if(n===e)return[];let a=[],r=Math.min(n,e),i=Math.max(n,e);if("header"===eo[e].type)return a;for(let e=r;e<=i;e++)"result"===eo[e].type&&a.push(eo[e].data);return a},em=(0,a.useCallback)(e=>!!j&&"header"!==e.type&&(!!g||0!==b)&&(e.data.textMatch.matchType===s.Ifi.TEXT_MATCH&&H.has(e.data.resultGuid)&&!K.has(e.data.resultGuid)||z.has(e.data.resultGuid)),[K,j,H,b,z,g]),ep=(0,a.useCallback)(e=>"header"!==e.type&&(j?e.data.textMatch.matchType===s.Ifi.PAGE_MATCH?e.data.index===G?.index&&e.data.pageId===G?.pageId:e.data.textMatch.matchType===s.Ifi.LAYER_MATCH?H.has(e.data.resultGuid)&&!K.get(e.data.resultGuid):K.get(e.data.resultGuid)?.has(e.data.matchIndex)??!1:e.data.index===G?.index&&e.data.pageId===G?.pageId),[G?.index,G?.pageId,K,j,H]),e_=(0,a.useCallback)((e,t,n)=>{let a=e+n,r=t+n,i=e=>"result"===e.type&&(ep(e)||em(e));for(;a>0&&a<=eo.length&&i(eo[a-1]);)a-=1;for(;r<eo.length&&i(eo[r]);)r+=1;return[a-n,r-n]},[em,ep,eo]),eg=(0,a.useCallback)((e,t)=>{if(e+t>=eo.length)return!1;let n=eo[e+t];return!ep(n)&&!em(n)},[em,ep,eo]),ef=(0,a.useCallback)((e,t,n)=>{let a=!1;for(let r=e;r<=t&&!(r+n>=eo.length);r+=1){let e=eo[r+n];if(!ep(e)&&!em(e)){a=!0;break}}return a},[em,ep,eo]),[eh,eE]=(0,a.useMemo)(()=>{let e=d?.nodeGuid??c.AD,t=G?.pageId!=null?el.current[G.pageId]:null;if(j&&0!==b&&d&&e!==c.AD&&d.pageId===G?.pageId&&null!=t){let n=d.index,a=d.matchIndex;if((1===b||G?.index==null)&&eg(n,t))return[n,s.YEY.getSingleHoveredSelectionEndIndex(e,a)];if(2===b&&G?.index!=null&&G.index!==d.index){let r=n>G.index?G.index:n;return ef(r,n>G.index?n:G.index,t)?e_(r,s.YEY.getMultiHoveredSelectionEndIndex(e,a),t):[null,null]}}return[null,null]},[G?.index,G?.pageId,j,e_,b,d,ef,eg]),ey=(0,a.useCallback)(e=>!j||null==eh||null==eE||e<eh||e>=eE?0:e===eh&&e===eE-1?4:e===eh?1:e===eE-1?3:2,[j,eh,eE]),eb=(0,p.$)(G);(0,a.useEffect)(()=>{if(g||0!==b||null==G||null==G.index||0===eo.length||!eb)return;let e=el.current[G.pageId];if(null==e)return;let t=e+G.index,n=t>=ed.virtualItems[0].index&&t<=ed.virtualItems[ed.virtualItems.length-1].index,a=!1;if(n){let e=ed.virtualItems.find(e=>e.index===t);if(e){let{start:t,size:n}=e;a=function(e,t){if(!t)return!0;let n=t.scrollTop,a=n+t.clientHeight;return e.top>=n&&e.bottom<=a}({top:t,bottom:t+n},D.current)}}a||P||ed.scrollToIndex(t,{align:"center"})},[G,eb,o,g,eo,P,ed,b]);let ev=(e,t,n,a)=>{let r=()=>{a?et(t.resultGuid,t.matchIndex,t.textMatch.matchType):Z(t.resultGuid,t.matchIndex,t.textMatch.matchType)};t.pageId===c.Xy?(I(t.guid),ei(t.guid),v(!1)):j&&t.pageId===G?.pageId?e.shiftKey&&G?.index==null?(a||r(),v(!0)):e.shiftKey?((()=>{let e=eu(n),t=[];e.forEach(e=>{let n=t.length?t[t.length-1]:void 0;n?.nodeId===e.resultGuid&&n?.searchResultType===s.Ifi.TEXT_MATCH?n.matchIndices.push(e.matchIndex):t.push({nodeId:e.resultGuid,matchIndices:[e.matchIndex],searchResultType:e.textMatch.matchType})}),ee(t)})(),v(!0)):(0,E.Fo)(e)&&t.textMatch.matchType!==s.Ifi.PAGE_MATCH?(r(),v(!0)):(X(t.resultGuid,t.matchIndex),v(!1)):(X(t.resultGuid,t.matchIndex),v(!1))},eS=function(e,t,n,i,l,o,d){let u=function(e,t){let n=(0,V.Z)("canvas_search_navigate"),i=(0,r.d4)(e=>e.canvasSearch.scope),l=(0,m.am)(),o=(0,a.useContext)(Q.EA),c=(0,a.useCallback)(()=>{let{nav:a,numNewNodes:r,numNewTextMatches:o}=s.YEY.setAllResultsAsActiveAndGetViewportSettings();e&&l("canvas_search_enter_multi_select",{numberOfNodes:r,numberOfTextMatches:o,source:"cmd/ctrl+A",mode:t?"find":"replace"}),n(a,{additionalTrackEventParams:{searchScope:s.Lov[i]}})},[t,n,i,l,e]);return o?c:y.lQ}(n,i),p=(0,a.useContext)(Q.EA),_=eN(e,l,eA,o);return(0,a.useCallback)(e=>{let n=eO(e);switch(e.keyCode){case E.Uz.UP_ARROW:case E.Uz.DOWN_ARROW:case E.Uz.RIGHT_ARROW:case E.Uz.LEFT_ARROW:l?(function(){let e=document.getElementById("fullscreen-root")?.getElementsByClassName("focus-target");if(null!=e&&0!==e.length){for(let t of e)if(t.hasAttribute("readonly")&&"application"===t.getAttribute("role")){t?.focus();break}}}(),eA(e,!0)):_(e);break;case E.Uz.A:if(p&&(0,E.Te)(e)){u(),d(!0),e.stopPropagation(),e.preventDefault();break}eA(e);break;case E.Uz.C:(0,E.Te)(e)?(B.Y5.triggerActionInUserEditScope("copy"),e.stopPropagation()):eA(e);break;case E.Uz.V:(0,E.Te)(e)?(B.Y5.triggerActionInUserEditScope("paste"),e.stopPropagation()):eA(e);break;case E.Uz.X:(0,E.Te)(e)?(B.Y5.triggerActionInUserEditScope("cut"),e.stopPropagation()):eA(e);break;case E.Uz.DELETE:case E.Uz.BACKSPACE:eA(e,!0);break;default:_(e)}l||n===c.AD||t(s.YEY.setActiveResultAndGetViewportSettings(n,0),{delay:300})},[l,p,_,u,d,t])}(e,t,$,Y,_,C,v),ex=eI(C);return a.createElement("div",{className:er.sb},a.createElement("div",{className:er.Jo},a.createElement(eC,{totalOnActivePage:U.total,resultsOnOtherPages:l,allInstancesExpanded:S}),0!==eo.length&&a.createElement(a.Fragment,null,a.createElement(J.K0,{svg:ec.A,onClick:t=>{e(ea.OP.PREV,"button")},"data-tooltip-type":q.Ib.TEXT,"data-tooltip":(0,M.t)("canvas_search.previous"),"data-tooltip-shortcut-key":"canvas-search-prev",recordingKey:"figma_design_search.previous",disabled:U.total<=1}),a.createElement(J.K0,{svg:es.A,onClick:t=>{e(ea.OP.NEXT,"button")},"data-tooltip-type":q.Ib.TEXT,"data-tooltip":(0,M.t)("canvas_search.next"),"data-tooltip-shortcut-key":"canvas-search-next",recordingKey:"figma_design_search.next",disabled:U.total<=1}))),a.createElement(O.P,{className:er.bB,scrollContainerRef:D},a.createElement(w.D8,{style:{height:ed.totalSize,position:"relative"},tabIndex:0,role:"listbox",recordingKey:"figma_design_search.results_list",onKeyDown:eS,onKeyUp:ex,forwardedRef:o},ed.virtualItems.map(e=>{let t=eo[e.index];if(!t)return null;let r=ep(t),i="result"===t.type&&t.data.pageId===G?.pageId?ey(t.data.index):0;return a.createElement("div",{key:"header"===t.type?t.data.pageId:`${t.data.pageId}#${t.data.index}`,ref:e.measureRef,className:u()({[er.T]:1===i,[er.fz]:2===i,[er.Nf]:3===i,[er.HR]:(1===b||G?.index==null)&&d?.isPurple}),style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.start}px)`}},"header"===t.type?a.createElement(ew,{...t.data,setOpen:e=>ei(t.data.pageId,e)}):a.createElement(eT,{activePageId:G?.pageId,onSelect:n=>ev(n,t.data,e.index,r),onDoubleClick:()=>{s.YEY.exitSearchMode(s.dNx.SELECT_ACTIVE)},resultInputHandlerRef:o,result:t.data,replacement:n,selected:r,indirectlySelected:em(t),singletonHoverSelected:4===i,isInMultiselectMode:g,isInHoveredSelectMode:0!==b&&!!d,hasMultipleSelections:_,setHoveredResult:T}))})),P&&a.createElement("div",{className:er.S},a.createElement(A.dW,{size:"medium"})),l&&R===s.Lov.ACTIVE_PAGE&&a.createElement(w.GG,{recordingKey:"figma_design_search.other_pages_button",className:u()(er.fp,er.AX),onClick:()=>{k(F.V2(s.Lov.ALL_PAGES))}},(0,M.tx)("canvas_search.results_other_pages")),h&&R===s.Lov.ALL_PAGES&&a.createElement("div",{className:er.du},(0,M.tx)("canvas_search.results_unavailable_offline"))))}let ev={[s.Lov.ACTIVE_PAGE]:()=>(0,M.tx)("canvas_search.this_page"),[s.Lov.ALL_PAGES]:()=>(0,M.tx)("canvas_search.all_pages")};function eC({totalOnActivePage:e,resultsOnOtherPages:t,allInstancesExpanded:n}){let i=(0,r.wA)(),l=(0,Z.sO)(),o=(0,z.BK)("CANVAS_SEARCH_PAGE_SCOPE_DROPDOWN"),c=(0,a.useRef)(null),d=(0,r.d4)(e=>e.canvasSearch.scope),u=(0,r.d4)(e=>e.mirror.appModel.pagesList),m=(0,h.Xr)(eh),p="";p=0===e?(0,j.lH)(u)||!n?l?(0,M.t)("canvas_search.no_results_in_this_deck"):(0,M.t)("canvas_search.no_results_on_page"):t?(0,M.t)("canvas_search.no_results"):(0,M.t)("canvas_search.no_results_in_file"):(0,M.t)("canvas_search.results_count",{total:e});let g=(!l||(0,_.kc)().interop_pages)&&(e>0||t||(0,j.lH)(u)||!n);return a.createElement("div",{className:er._M},a.createElement("span",{"data-testid":"canvas-search-info",className:er.qp},p),g&&a.createElement(a.Fragment,null,a.createElement("span",{className:er.hY},"\xb7"),a.createElement("div",{role:"none",onClick:e=>e.stopPropagation()},a.createElement(w.GG,{forwardedRef:c,recordingKey:"figma_design_search_page_scope_dropdown",className:er.Vz,"data-testid":"figma-design-search-scope-dropdown",onClick:e=>o.showing&&e.stopPropagation(),onMouseDown:()=>o.toggle(),onKeyDown:e=>{(e.keyCode===E.Uz.ENTER||e.keyCode===E.Uz.SPACE)&&(e.preventDefault(),o.toggle())}},a.createElement(a.Fragment,null,ev[d](),a.createElement(L.B,{svg:em.A}))),c.current&&o.showing&&a.createElement(X.Jz,{showPoint:!1,maxWidth:160,minWidth:160,className:er.NB,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,lean:"right",leanPadding:0,targetRect:c.current.getBoundingClientRect(),hideDropdown:o.hide,recordingKey:"figma_design_search_page_scope",propagateCloseClick:!0,options:[s.Lov.ACTIVE_PAGE,s.Lov.ALL_PAGES].map(e=>a.createElement(k.MM,{recordingKey:`figma_design_search_page_scope.${e}`,key:e,checked:e===d,onClick:()=>{o.hide(),e===s.Lov.ALL_PAGES&&((0,j.lH)(u)||!n)?(m(!0),requestAnimationFrame(()=>{i(F.V2(e)),m(!1)})):i(F.V2(e))}},a.createElement("div",{className:er.VM},ev[e]())))}))))}function ew({pageId:e,open:t,setOpen:n,numResults:r}){let i=(0,W.eY)().get(e),l=e===c.Xy?(0,M.t)("fullscreen.canvas_search.pages"):i.name;return a.createElement(w.GG,{className:er.kQ,onClick:()=>n(!t)},a.createElement(L.B,{className:er.eO,svg:t?ei.A:el.A}),a.createElement("span",{className:er.rB},l),a.createElement("span",{className:er.hs},r))}function eT({result:e,replacement:t,activePageId:n,resultInputHandlerRef:i,selected:l,indirectlySelected:o,singletonHoverSelected:d,onSelect:m,onDoubleClick:p,isInMultiselectMode:_,isInHoveredSelectMode:g,hasMultipleSelections:f,setHoveredResult:h}){let E=(0,W.eY)(),T=(0,W.p8)("currentPage"),S=e.textMatch.matchType===s.Ifi.TEXT_MATCH,x=null!=t&&S&&(E.get(e.guid)?.hasMissingFont||!1),k=!(0,b.y)(),N=(0,r.d4)(e=>e.mirror.appModel.pagesList),I=k&&e.textMatch.matchType===s.Ifi.PAGE_MATCH&&s.h3O.isIncrementalSession()&&(0,j.Fy)(N,e.resultGuid)!==s.xal.LOADED,A=(0,r.wA)(),O=u()(er.V3,{[er.HR]:e.isPurple,[er.wH]:l,[er.r9]:I}),D=a.createElement(Y.Bf,{className:O,guid:e.guid});return x?D=a.createElement("div",{className:er.v9+" "+O},a.createElement(L.B,{svg:eu.A})):e.guid===T&&(D=a.createElement("div",{className:er.v9+" "+O},a.createElement(L.B,{svg:eo.A}))),a.createElement(w.GG,{className:u()({[er.AX]:!0,[er.wH]:l,[er.Xt]:!l&&o,[er.rX]:d,[er.Dw]:g,[er.HR]:e.isPurple,[er.r9]:I}),onMouseDown:e=>{e.preventDefault()},onClick:t=>{I?A(P.F.enqueue({type:"offline-page-switch",message:(0,M.t)("fullscreen.pages_panel.unavailable_offline")})):(i.current?.focus(),_||!l||(v.Ay.mac?t.metaKey:t.ctrlKey)||e.textMatch.matchType===s.Ifi.PAGE_MATCH?m(t):f||s.YEY.setOverlayVisible(!0)),t.preventDefault(),t.stopPropagation()},onDoubleClick:_||I?y.lQ:p,onMouseEnter:()=>{e.pageId===c.Xy||e.pageId!==n?h(null):h({nodeGuid:e.resultGuid,pageId:e.pageId,index:e.index,matchIndex:e.matchIndex,isPurple:e.isPurple}),S?s.YEY.setHoveredResult(e.resultGuid,e.matchIndex):e.textMatch.matchType===s.Ifi.LAYER_MATCH&&(0,H.Uc)(e.resultGuid)},onMouseLeave:()=>{(0,H.Uc)(""),h(null),s.YEY.setHoveredResult(c.AD,-1)},recordingKey:C.Pt("figma_design_search","result",e.pageId,e.index)},a.createElement("div",{className:er._P},D),a.createElement("div",{className:u()(er.D6,{[er.c1]:S})},e.textContent&&S?a.createElement(ex,{text:e.textContent,match:e.textMatch,replacement:x?void 0:t,multiline:!0}):a.createElement(eS,{result:e})),I&&a.createElement("div",{className:er.QF,"data-tooltip-type":q.Ib.TEXT,"data-tooltip":(0,M.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"},a.createElement(L.B,{className:er.VQ,svg:ed.A})))}function eS({result:e}){let{query:t}=(0,r.d4)(e=>e.canvasSearch),n=e.name&&e.stateGroupName?(0,T.w)(e.name):e.name;if(!n)return null;let i=e.stateGroupName||e.containerName,l=-1;e.textContent&&(n=e.textContent,l=e.name?.toLowerCase().indexOf(t)??-1,i=e.name);let o=n.toLowerCase().indexOf(t)??-1;return a.createElement("div",null,n&&o>-1?a.createElement(ex,{text:n,match:{start:o,end:o+t.length,matchType:s.Ifi.LAYER_MATCH},multiline:!0}):a.createElement(N.ph,{text:n}),i&&a.createElement("div",{className:er.Gu},l>-1?a.createElement(ex,{text:i,match:{start:l,end:l+t.length,matchType:s.Ifi.LAYER_MATCH}}):a.createElement(N.ph,{text:i})))}function ex({text:e,match:t,replacement:n,multiline:r}){let[i,l]=(0,a.useState)(e),[o,s]=(0,a.useState)(!1);(0,a.useEffect)(()=>{l(e)},[e]),(0,a.useEffect)(()=>{if(!o||i!==e)return;let n=t.start,a=0;for(let t=n-1;t>=0;--t)if(/\s/.test(e[t])&&a++,3===a){n=t;break}a<3&&(n=0),l(e.slice(n))},[o,i,e,t.start]);let c=(0,a.useMemo)(()=>a.createElement(ek,{text:i,replacement:n,fullString:e,match:t}),[i,t,n,e]);return a.createElement(N.ph,{className:r?er.c1:"",text:c,multiline:r,onTruncationChange:s})}function ek({text:e,replacement:t,fullString:n,match:r}){let i=0;n&&e!==n&&(i=n.length-e.length);let l=r.start-i,o=r.end-i,s=e.substring(0,l),c=e.substring(l,o),d=e.substring(o);if(t&&c.toLocaleLowerCase()!==t.toLocaleLowerCase()){let e=U.r.detectTextTransform(c);t=U.r.applyTextTransform(t,e)}return a.createElement(a.Fragment,null,i?"\u2026":"",s,t?a.createElement(a.Fragment,null,a.createElement("span",{className:er.of},c),a.createElement("b",null,t)):a.createElement("b",null,c),d)}function eN(e,t,n,i){let l=(0,Q.II)(),o=function(){let e=(0,V.Z)("canvas_search_navigate"),t=(0,r.d4)(e=>e.canvasSearch.scope),n=(0,m.am)(),i=(0,a.useContext)(Q.EA),l=(0,a.useCallback)(()=>{n("canvas_search_multi_hierarchy",{order:"down"}),e(s.YEY.moveActiveResultsDownOneLevelAndGetViewportSettings(),{additionalTrackEventParams:{searchScope:s.Lov[t]}})},[e,t,n]);return i?l:y.lQ}(),c=function(){let e=(0,V.Z)("canvas_search_navigate"),t=(0,r.d4)(e=>e.canvasSearch.scope),n=(0,m.am)(),i=(0,a.useContext)(Q.EA),l=(0,a.useCallback)(()=>{n("canvas_search_multi_hierarchy",{order:"up"}),e(s.YEY.moveActiveResultsUpOneLevelAndGetViewportSettings(),{additionalTrackEventParams:{searchScope:s.Lov[t]}})},[e,t,n]);return i?l:y.lQ}(),d=(0,a.useContext)(Q.EA);return(0,a.useCallback)(a=>{switch(d?(0,E.Fo)(a)&&!a.shiftKey?i(1):a.shiftKey?i(2):i(0):i(0),a.keyCode){case E.Uz.P:case E.Uz.UP_ARROW:(a.keyCode!==E.Uz.P||v.Ay.mac&&(0,E.vN)(a,E.xH.CONTROL))&&(e(ea.OP.PREV,"keyboard"),a.stopPropagation(),a.preventDefault());break;case E.Uz.N:case E.Uz.DOWN_ARROW:(a.keyCode!==E.Uz.N||v.Ay.mac&&(0,E.vN)(a,E.xH.CONTROL))&&(e(ea.OP.NEXT,"keyboard"),a.stopPropagation(),a.preventDefault());break;case E.Uz.ENTER:if((0,E.Fo)(a)){s.YEY.exitSearchMode(s.dNx.SELECT_ACTIVE);break}if(l())break;a.shiftKey?t?c():e(ea.OP.PREV,"keyboard"):t?o():e(ea.OP.NEXT,"keyboard"),a.stopPropagation(),a.preventDefault();break;case E.Uz.ESCAPE:s.YEY.exitSearchMode(s.dNx.NONE),a.preventDefault(),a.stopPropagation();break;default:n(a)}},[d,i,l,n,e,t,c,o])}function eI(e){return(0,a.useCallback)(t=>{if(t.keyCode===E.Uz.SHIFT){(!v.Ay.mac||t.metaKey)&&(v.Ay.mac||t.ctrlKey)||e(0);return}let n=v.Ay.mac&&"Meta"===t.key,a=!v.Ay.mac&&t.keyCode===E.Uz.CTRL;(n||a)&&!t.shiftKey&&e(0)},[e])}function eA(e,t=!1){if(t||(0,K.U5)(e,K.W0.YES)){let t=(0,K.f7)(e);return t&&e.stopPropagation(),t}return!1}function eO(e){switch(e.keyCode){case E.Uz.DELETE:case E.Uz.BACKSPACE:return s.YEY.getNextResultForActiveResultRemoval();case E.Uz.X:if((0,E.Te)(e))return s.YEY.getNextResultForActiveResultRemoval();break;case E.Uz.H:case E.Uz.R:if((0,E.Fo)(e)&&e.shiftKey)return s.YEY.getNextResultForActiveResultRemoval()}return c.AD}},984871:(e,t,n)=>{n.d(t,{Z5:()=>s,i$:()=>i,uw:()=>o});var a=n(411855),r=n(966712);let i={minZoomPercentage:76,zoomScaleOverlap:64,clusterClickResultViewportPercentage:35,rebuildClustersZoomDelay:50,disableSidebar:!1},l=new Set;function o(e){if(!(0,r.kc)().internal_only_debug_tools)return;let t="function"==typeof e?e({...i}):e;i={...i,...t},requestAnimationFrame(()=>{l.forEach(e=>e(i))})}function s(){let[e,t]=a.useState(i);return a.useEffect(()=>{let e=e=>{t(e)};return l.add(e),()=>{l.delete(e)}},[t]),e}},593392:(e,t,n)=>{n.d(t,{p:()=>o});var a=n(411855),r=n(572206),i=n(457630),l=n(350022);function o(e){let t=(0,i.Cj)(),n=r.Mi.scale(-1,t);return a.createElement("div",{className:l.M,style:{top:t.y,left:t.x,height:t.height,width:t.width}},a.createElement("div",{className:l.W,style:{top:n.y,left:n.x}},e.children))}},372252:(e,t,n)=>{n.d(t,{Yz:()=>S,Z7:()=>w});var a=n(411855),r=n(188507),i=n(587670),l=n(534611),o=n(707458),s=n(91408),c=n(966712),d=n(38580),u=n(646240),m=n(939863),p=n(103907),_=n(617453),g=n(100197),f=n(433861),h=n(514736),E=n(531461),y=n(187882),b=n(366501),v=n(448879),C=n(837746);let w=(0,d.eU)(new Map),T=(0,s.jz)(C.LdP);function S({children:e}){let t=(0,g.ut)(i.Ez5?.singleSlideView().isInSingleSlideView,!1),n=(0,g.J2)(i.Ez5.slideDeck().slideGrid),s=(0,b.rY)(n),d=a.useMemo(()=>s.reduce((e,t,n)=>(e.set(t,n),e),new Map),[s]),C=function(){let e=(0,p.wq)(),t=(0,u.Xr)(w),[n,r]=a.useState(new Map),[i,s]=a.useState(new Map);return a.useEffect(()=>{let a=new Set,c=new Map;"loaded"===e.status&&e.data.forEach(e=>{let t=e.canvasPosition,n=i.get(e.id),r={commentCount:e.comments.filter(e=>!e.resolved_at).length,threadIds:[],hasUnread:e.comments.some(e=>!e.resolved_at&&e.isUnread)};c.set(e.id,r),t&&(!n||t.x!==n.x&&t.y!==n.y)&&a.add(e)}),a.forEach(e=>{let t=e.comments[0]?.client_meta?.node_id;if(!t||!e.canvasPosition)return;let n=o.q.instance.get(t),a=n?n.findContainingSlideOrSelf():l.AD;a!==l.AD&&e.canvasPosition&&(s(t=>new Map(t.set(e.id,e.canvasPosition))),r(t=>new Map(t.set(e.id,a))))});let d=new Map;n.forEach((e,t)=>{let n=c.get(t);if(!n)return;let{commentCount:a,hasUnread:r}=n,i=d.get(e),l={commentCount:(i?.commentCount??0)+a,threadIds:[...i?.threadIds??[],t],hasUnread:i?.hasUnread||r};d.set(e,l)}),t(d)},[t,i,n,e.data,e.status]),n}(),S=(0,r.d4)(e=>e.mirror?.appModel.showUi),x=(0,_.qw)(),k=!(0,y.Ye)(),N=(0,_.dP)(),I=a.useCallback(e=>{let t=C.get(e.id);if(t)return t;let n=e.comments[0]?.client_meta?.node_id;if(!n)return l.AD;let a=o.q.instance.get(n);return a?a.findContainingSlideOrSelf():l.AD},[C]),{xDelta:A,yDelta:O}=(0,v.m)(),L=a.useMemo(()=>({xDelta:A,yDelta:O}),[A,O]),D=a.useMemo(()=>{let e=[E.mW.RESOLVED,E.mW.YOURS];return t&&e.push(E.mW.CURRENT_SLIDE),e},[t]),R=a.useMemo(()=>[E.qN.CREATION_DATE,E.qN.UNREAD,E.qN.SLIDE],[]),M=(0,r.d4)(e=>e.mirror.appModel.currentPage),P=a.useContext(f.kw),F=(0,g.ut)(i.Ez5?.singleSlideView().focusedSlideId,""),B=(0,b.po)(),U=a.useCallback(e=>{let t=e&&M?P.getCommentDestinationForCanvasPosition(e,M)?.nodeId:void 0;if(!t)return!1;let n=o.q.instance.get(t),a=n?n.findContainingSlideOrSelf():l.AD;return F&&F!==l.AD?a!==F:a===l.AD},[M,F,P]),G=a.useCallback((e,t)=>{let n=t?o.q.instance.get(t):void 0,a=n?n.findContainingSlideOrSelf():l.AD,r=a&&a!==l.AD?a:i.glU.getSlideAtPosition(e.x,e.y);return r?i.Egt.getBoundsForNode(r):null},[]),K=a.useCallback(e=>{let t=I(e),n=d.get(t);return void 0===n||t===l.AD?(0,m.t)("comments.slide"):(0,m.t)("comments.slide_number",{orderNum:n+1})},[I,d]),V=a.useMemo(()=>!!t,[t]),H=a.useCallback(e=>{if(!t)return()=>{};let n=I(e);return n!==l.AD?()=>{B(n)}:()=>{}},[I,B,t]),z=a.useMemo(()=>({slide:(e,t)=>{let n=1/0,a=I(e),r=I(t),i=d.get(a)??n,l=d.get(r)??n;return i!==l?i-l:Date.parse(t.comments[0].created_at)-Date.parse(e.comments[0].created_at)}}),[I,d]),W=(0,g.J2)(i.Ez5.editorPreferences().speakerNotesHeight),j=a.useMemo(()=>{let e=0,n=0,a=0;return S&&(e+=T,n+=x,t&&(e+=W+i.Ez5.singleSlideView().dragHandleTotalHeight()),k&&(a+=N)),{maxHeightDelta:-e,minBottomMarginDelta:e,minLeftMarginDelta:a,minRightMarginDelta:n}},[t,x,k,N,S,W]),$=a.useMemo(()=>{if(S)return{paddingRight:x}},[x,S]),q=a.useMemo(()=>({showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,disableZoomViewportOnCommentSelection:V,clusterBy:(0,c.kc)().comments_corner_cluster?"slide":"page",orphanedBy:"non_slide_anchors",filterBy:"non_slide_anchors",sidebarFilters:D,sidebarSorts:R,sidebarModesDisabled:!0,dockPositionAdjustment:L,isCommentingDisabledAtPosition:U,commentDisabledPositionBellMessage:(0,m.t)("comments.comments_can_only_be_placed_on_slides"),calculateSelectionCommentContainerBounds:G,getParentName:K,getOnCommentSelect:H,sortComparatorOverrides:z,commentPositionPaddingAdjustment:$,draggableModalBoundsAdjustment:j}),[V,D,R,L,U,G,K,H,z,$,j]);return a.createElement(h.a.Provider,{value:q},e)}},815549:(e,t,n)=>{n.d(t,{W:()=>A,l:()=>I});var a=n(411855),r=n(188507),i=n(459401),l=n(966712),o=n(38580),s=n(374626),c=n(776621),d=n(939863),u=n(662275),m=n(625651),p=n(259927),_=n(396226),g=n(177505),f=n(29680),h=n(335682),E=n(99506),y=n(243987),b=n(300874),v=n(851363),C=n(887326),w=n(187882),T=n(339688),S=n(454351),x=n(449731),k=n(362369),N=n(391993);let I=(0,o.eU)(!1);function A({clientX:e,clientY:t,pageIds:n,selectedView:o,shouldShowDuplicateOption:A}){let O=(0,r.wA)(),L=(0,r.d4)(e=>e.mirror.appModel),D=(0,h.q5)(),R=(0,f.p8)("pagesList"),M=(0,g.HZ)(),P=_.F.useShouldHideStarterCtaForOpenFile(),F=(0,w.cT)(),B=1===n.length?function({pageId:e,openFile:t,pagesList:n,team:a,shouldShowDuplicateOption:r,shouldPaywallForDraftsPageLimitV1:i,dispatch:o,hideUpsellPlanCta:s,isFileReadOnly:p}){var g;let f=n.length,h=n.filter(e=>!e.isDivider).length,C=n.find(t=>t.nodeId===e),w=!!C&&C.isDivider,I=n=>(0,N.HZ)()&&C&&t&&t.editorType===E._Y.WHITEBOARD?[{separator:!0},{name:"create-slides-outline-from-figjam",callback:()=>(0,N.$t)({pageGuids:[e],dispatch:n,source:k.E.FJ_PAGE_MENU})}]:[];if(p)return[{action:"page-copy-link",args:{nodeId:e}},...I(o)];let A=()=>(0,l.kc)().move_page_to_new_file&&C&&t?((0,c.ED)("getPageMoveMenuItem","Parameters",{pageId:e,folderId:"1",fileKey:t.key}),{name:"page-move-to-new-file",callback:()=>{!function(e,t,n,a,r={},i=!0){if(!e)return;let l={...r,type:S.A.FILE,fileKey:e.key,file:e,afterFileMove:void 0,isMovePageToNewFile:i,page_id:n};t(u.to({type:(0,T.J)(),data:l}))}({key:t.key,name:t.name,folder_id:t.folderId,team_id:t.teamId,editor_type:t.editorType},o,e)}}):null,O=r?(g=w?(0,d.t)("fullscreen_actions.divider-duplicate"):(0,d.t)("fullscreen_actions.page-duplicate"),t&&((0,y.J9)({openFile:t,pageCount:f})||i({openFile:t,pageCount:f}))?{name:"page-duplicate",callback:()=>{o((0,u.to)({type:x.DV,data:{team:a,resource:b.vL.PAGE,action:v.ZN.DUPLICATE_PAGE,editorType:t.editorType,currentPlan:_.F.Plan.STARTER,upsellPlan:_.F.Plan.PRO,hideUpsellPlanCta:s}}))},displayText:g}:{action:"page-duplicate",args:{nodeId:e},loadingIndicatorString:"Duplicating",displayText:g}):null;return w?[O,A(),{action:"page-delete",args:{nodeIds:[e]},loadingIndicatorString:"Deleting",displayText:(0,d.t)("fullscreen_actions.divider-delete")}]:[{action:"page-copy-link",args:{nodeId:e}},{separator:!0},{action:"page-rename",args:{nodeId:e},displayText:(0,d.t)("fullscreen_actions.pages-rename",{pageCount:1})},O,A(),{separator:!0},{action:"page-delete",callback:()=>o(m.PK({})),args:{nodeIds:[e]},loadingIndicatorString:"Deleting",disabled:1===h,displayText:(0,d.t)("fullscreen_actions.pages-delete",{pageCount:1})},...I(o)]}({pageId:n[0],team:D?D.team:null,shouldShowDuplicateOption:A,openFile:D,pagesList:R,shouldPaywallForDraftsPageLimitV1:M,dispatch:O,hideUpsellPlanCta:P,isFileReadOnly:F}):function({pageIds:e,pagesList:t,dispatch:n,isFileReadOnly:a}){if(a)return[];let r=new Set(t.filter(e=>!e.isDivider).map(e=>e.nodeId)),i=e.filter(e=>r.has(e)),l=i.length;return 0===l?[]:[{action:"batch-page-rename",args:{nodeIds:i},displayText:(0,d.t)("fullscreen_actions.pages-rename",{pageCount:l})},{separator:!0},{action:"page-delete",callback:()=>n(m.PK({})),args:{nodeIds:i},loadingIndicatorString:"Deleting",displayText:(0,d.t)("fullscreen_actions.pages-delete",{pageCount:l}),disabled:r.size<=l},...(t=>{if(!(0,N.HZ)())return[];let n=s.zl.get(h.yV);return n&&n.editorType===E._Y.WHITEBOARD?[{separator:!0},{name:"create-slides-outline-from-figjam",callback:()=>(0,N.$t)({pageGuids:Array.from(e),dispatch:t,source:k.E.FJ_PAGE_MENU})}]:[]})(n)]}({pageIds:n,pagesList:R,dispatch:O,isFileReadOnly:F});return(0,a.useEffect)(()=>(s.zl.set(I,!0),()=>{s.zl.set(I,!1)}),[]),a.createElement("div",{className:`${p.Dm}`},a.createElement(C.Q,{appModel:L,menuItems:(0,i.removeNullish)(B),dispatch:O,selectedView:o,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!1,isLimitedDevMode:!1,recordingKey:"pageMenu"}))}},511232:(e,t,n)=>{n.d(t,{G:()=>aH});var a=n(411855),r=n(188507),i=n(730371),l=n(675678),o=n(587670),s=n(517333),c=n(358145),d=n(966712),u=n(192437),m=n(644106),p=n(952593),_=n(256975),g=n(17604),f=n(809831),h=n(441088),E=n(507956),y=n(699857),b=n(939900),v=n(578505),C=n(964881),w=n(57860),T=n(75395),S=n(343887),x=n(755020),k=n(222903),N=n(666309),I=n(782683),A=n(13583),O=n(769335),L=n(935829),D=n(841368),R=n(538649),M=n(629019),P=n.n(M),F=n(203264),B=n(776250),U=n(91408),G=n(737947),K=n(939683),V=n(320063),H=n(38580),z=n(374626),W=n(522739),j=n(438741),$=n(330654),q=n(268537),Y=n(946689),X=n(564577),J=n(452441),Z=n(355819),Q=n(163023),ee=n(901536),et=n(939863),en=n(488090),ea=n(40987),er=n(493471),ei=n(331972),el=n(465904),eo=n(738269),es=n(818),ec=n(226055),ed=n(617453),eu=n(543841),em=n(843495),ep=n(318812),e_=n(29680),eg=n(335682),ef=n(754209),eh=n(161325),eE=n(611978),ey=n(860178),eb=n(792675),ev=n(940596),eC=n(100197),ew=n(601607),eT=n(707465),eS=n(498606),ex=n(563814),ek=n(187882),eN=n(875331),eI=n(298543),eA=n(32067),eO=n(538697),eL=n(549166),eD=n(371746),eR=n(540828),eM=n(504440),eP=n(137035),eF=n(139689),eB=n(511617),eU=n(931828),eG=n(672517),eK=n(309798),eV=n(999394);function eH(){let e=(0,r.wA)();return(0,eK.f)("dismissed_dev_mode_overview_banner")||(0,h.T)()?null:a.createElement(eG.fu,{name:"Dev Mode Overview Banner",properties:{severity:eV.c.EVENT}},a.createElement("div",{className:"overview_banner--banner--9cAw3"},a.createElement(eP.b,{className:"overview_banner--icon--NQ9zx"}),a.createElement("div",{className:"overview_banner--bannerContent--Toai2 text--fontPos13--xW8hS text--_fontBase--QdLsd"},a.createElement("div",{className:"overview_banner--title--JuiVK ellipsis--ellipsis--Tjyfa"},(0,et.tx)("dev_handoff.workflows.overview.banner.title")),a.createElement("div",{className:"overview_banner--subTitle--BEeYg ellipsis--ellipsis--Tjyfa"},(0,et.tx)("dev_handoff.workflows.overview.banner.subtitle"))),a.createElement("div",{className:"overview_banner--rightItems--T2QEG"},a.createElement(eM.$n,{variant:"secondary",onClick:()=>{(0,eB.FJ)("https://help.figma.com/hc/en-us/articles/23918228264855","_blank")}},(0,et.tx)("dev_handoff.workflows.overview.banner.learn_more")),a.createElement(T.E,{className:"overview_banner--dismissButton--cMyLN",onClick:()=>{e(eU.b({dismissed_dev_mode_overview_banner:!0}))}},a.createElement(eF.A,null)))))}function ez(e){return a.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.18 11.384a.5.5 0 0 0 .704-.064l2.5-3a.5.5 0 0 0 0-.64l-2.5-3a.5.5 0 1 0-.768.64L13.349 8l-2.233 2.68a.5.5 0 0 0 .064.704M4.82 4.616a.5.5 0 0 0-.704.064l-2.5 3a.5.5 0 0 0 0 .64l2.5 3a.5.5 0 1 0 .768-.64L2.651 8l2.233-2.68a.5.5 0 0 0-.064-.704m4.654.542a.5.5 0 1 0-.948-.316l-2 6a.5.5 0 0 0 .948.316z",clipRule:"evenodd"}))}var eW=n(902008),ej=n(130097),e$=n(976999),eq=n(67294),eY=n(99506),eX=n(279453),eJ=n(118335),eZ=n(165514),eQ=n(263581);let e0="overview--background--LdDDC",e1="overview--overviewBase--8lImP",e2="overview--withInsetEditorEnabled--ktYXp",e5="overview--focusViewLink--PFEvh",e3="overview--overviewRecentActivityRow--uTKSo",e4="overview--overviewRecentActivity--JwGnv",e6="overview--editInfo--PHbLh",e8="overview--timestamp--EH-pe",e7="overview--avatarIcon--c711v",e9="overview--editedIcon--MhN1N";function te({showDescription:e,previewUrl:t,onClick:n}){return a.createElement("a",{className:P()(e4,e5),href:t,onClick:n},a.createElement("div",{className:e6},a.createElement(e$.Qp,{className:"overview--avatarLoading--jMjJk",animationType:e$.JR.NO_SHIMMER}),a.createElement(e$.Qp,{className:"overview--editInfoRecentActivityLoading--w-QoB overview--editInfoRecentActivity---jsVr",animationType:e$.JR.NO_SHIMMER})),e&&a.createElement(e$.Qp,{className:"overview--editDescriptionLoading--hrI6B",animationType:e$.JR.NO_SHIMMER}))}function tt({user:e,icon:t,editedString:n}){return a.createElement("div",{className:e6},a.createElement("div",{className:"overview--avatarContainer--OD44p"},a.createElement(eq.H8,{user:e,size:24}),t),a.createElement("div",{className:"overview--editInfoRecentActivity---jsVr"},a.createElement("span",{className:"overview--editInfoUser--P4GkS"},n)))}function tn(e,t,n){if(!e||n)return null;switch(e.status){case o.zIx.BUILD:return a.createElement(ez,{className:P()(t?e9:"overview--readyIcon--A94uc",e7)});case o.zIx.COMPLETED:return a.createElement(eW.l,{className:P()(t?e9:"overview--completedIcon--9Nbjl",e7)})}return null}function ta({nodeId:e,user:t,previewUrl:n,isFallbackForLegacyStatus:r,onClick:i}){let l=(0,ew.Fk)(t=>t.get(e)?.getStatusInfo(),e),o=(0,F.ei)(e),s=(0,X.Ak)(o?.lastEditedAt),c=(0,eg.q5)();if(!t)return a.createElement(te,{previewUrl:n,onClick:i});let u=l&&c&&(0,eQ.y)(l,c);return a.createElement("div",{className:e3},a.createElement("a",{className:P()(e4,e5),href:n,onClick:i},a.createElement(tt,{user:t,icon:tn(l,!0,r),editedString:(0,et.tx)("dev_handoff.workflows.edit_info.edited",{user:t.handle,dateFromNow:a.createElement("span",{className:e8},s)})})),u&&(0,d.kc)().dt_workflows_cc_overview&&a.createElement(ti,{nodeId:e,isEdited:!0}))}function tr({nodeId:e,user:t,description:n,previewUrl:r,isFallbackForLegacyStatus:i,onClick:l}){let s=(0,ew.Fk)(t=>t.get(e)?.getStatusInfo(),e),c=s?.lastUpdateUnixTimestamp?1e3*s.lastUpdateUnixTimestamp:null,u=(0,X.Ak)(c),m=(0,eg.q5)();if(!c)return a.createElement(ta,{nodeId:e,user:t,previewUrl:r,isFallbackForLegacyStatus:i,onClick:l});if(!s||!t)return a.createElement(te,{showDescription:!!n,previewUrl:r,onClick:l});let p=eZ.TR(s.status,s.prevStatus)?.toLowerCase();if(!p)return a.createElement(ta,{nodeId:e,user:t,previewUrl:r,isFallbackForLegacyStatus:i,onClick:l});let _=s.status===o.zIx.BUILD&&(s.status===s.prevStatus||!!s.description),g=m&&(0,eQ.y)(s,m),f=_?(0,et.tx)("dev_handoff.workflows.edit_info.updated_design",{user:t.handle,dateFromNow:a.createElement("span",{className:e8},u)}):(0,et.tx)("dev_handoff.workflows.edit_info.marked",{user:t.handle,status:p,dateFromNow:a.createElement("span",{className:e8},u)});return a.createElement("div",{className:e3},a.createElement("a",{className:P()(e4,e5),href:r,onClick:l},a.createElement(tt,{user:t,icon:tn(s,!1,i),editedString:f}),!!n&&a.createElement("div",{className:"overview--editDescription--rb1Qn"},n)),_&&g&&(0,d.kc)().dt_workflows_cc_overview&&a.createElement(ti,{nodeId:e,isEdited:!1}))}function ti({nodeId:e,isEdited:t}){let n=(0,r.wA)(),i=eg.q5()?.key,l=(0,K.U)(),o=(0,ec.GS)(),s=async()=>{if(!i)return;l("Dev Mode Activity Compare Changes",{source:"compare_previous_overview"});let a=await (0,ej.Ek)(eX.WND,{fileKey:i,nodeId:e});if("loaded"===a.file.status&&a.file.data){let r=a.file.data.devModeActivity.filter(e=>e.activityType===eY.o6.STATUS_CHANGE).sort((e,t)=>t.timestamp.getTime()-e.timestamp.getTime()),i=t||1===r.length?r[0]:r[1];i?.version?.id&&(0,eJ.L$)(i.version?.id,n,!0,e)}};return a.createElement(eM.$n,{variant:o?"secondary":"link",onClick:s},(0,et.tx)("inspect_panel.history.compare_changes"))}var tl=n(265911),to=n(126049),ts=n(36867);let tc=(0,ev.Wh)(()=>(0,H.eU)(""),{preserveValue:!1});var td=n(395900);let tu="performance.dev_mode.workflows.overview.time_to_first_thumbnail",tm=new td.jk(tu,{}),tp=(0,ev.rt)(void 0),t_=(0,ev.rt)(!1);var tg=n(282741),tf=n(837746),th=n(768067),tE=n(191278),ty=n(420584);let tb=2*(0,U.jz)(tf.Evg),tv=tb/tf.RtY,tC=tb/8,tw=tv/8;function tT(e){return a.createElement("div",{className:"tab_group--tabs--ChhR5"},e.tabs.map(t=>{let n=t.key===e.selected;return a.createElement("button",{className:P()(n?"overview--selectedTab--LPpAj overview--tab--djrt7 tab_group--tab--j43X- tab_group--selectedTab--dwZ1b tab_group--tab--j43X- utilities--bodyMediumStrong--1R5cZ":"overview--tab--djrt7 tab_group--tab--j43X-",void 0!==t.count&&"overview--tabWithBadge--f0pPx"),key:t.key,onClick:()=>e.onTabSelected(t.key),"data-label":`${t.label}${void 0!==t.count?t.count:""}`},a.createElement("span",null,t.label),void 0!==t.count&&a.createElement(tl.s,{count:t.count,isInTab:!0,isActive:n}))}))}let tS=(0,ev.Wh)(()=>(0,H.eU)(!1),{preserveValue:!1});function tx(){let e=(0,eg.q5)(),t=(0,r.wA)(),n=(0,ey.iZ)(),i=(0,ep.Um)(),l=(0,r.d4)(e=>e.multiplayer),o=a.useMemo(()=>l.allUsers.find(e=>e.sessionID===l.sessionID)||null,[l.allUsers,l.sessionID]),s=(0,ef.dR)(),c=(0,j.B4)(),d=a.useCallback(e=>{(0,eL.Lx)(e,o?.sessionID,t,!1,l,s,c)},[o?.sessionID,t,l,s,c]);return a.createElement("div",{className:"overview--toolbarRightItems--tjF72"},l&&e&&o&&a.createElement(eL.v7,{dropdownShown:i,multiplayer:l,currentUser:o,onUserClick:d}),e&&a.createElement(eD.w,{user:n,editingFile:e,isFileInWorkshop:!1,appendedClassname:"overview--shareButton--5BlrF"}))}let tk=(0,z.E2)("workflows_summary_tab",tg.oz.ALL,$.nativeEnum(tg.oz)),tN=(0,ev.Wh)(()=>(0,H.eU)({}),{preserveValue:!0}),tI=(0,z.E2)("workflows_overview_sorted_by",tg._6.RECENT,$.nativeEnum(tg._6));function tA(){let e=(0,r.d4)(e=>e.selectedView.overviewBackButtonTargetNodeId),t=(0,r.d4)(e=>e.mirror.appModel.pagesList[0]),n=function(){let e=(0,r.d4)(e=>e.mirror.appModel.pagesList),t=(0,eC.J2)(o.Ez5.currentSceneState().numReadyNodesByPage),n=(0,eC.J2)(o.Ez5.currentSceneState().numCompletedNodesByPage);return a.useMemo(()=>e.filter(e=>{let a=e.nodeId,r=t.has(a)?t.get(a)>0:o.glU.nodeStatusesOnPage(a).includes(o.zIx.BUILD),i=n.has(a)?n.get(a)>0:o.glU.nodeStatusesOnPage(a).includes(o.zIx.COMPLETED);return r||i}),[e,t,n])}()[0],i=e||n?.nodeId||t?.nodeId,l=(0,eR.ZJ)(),s=(0,eR.TP)(void 0,i),c=(0,r.d4)(e=>(0,eT.Np)(e,s)),d=(0,ek.n0)(),u=(0,eN.VS)({pagesList:d,isComparingChanges:!1});return i?a.createElement(W.lt,{className:"overview--backLink--vAo8c",onClick:function(e){e.preventDefault(),i?u(i).then(()=>{l("overview_back_clicked")}):l("overview_back_clicked")},href:c,"data-testid":"dev_handoff.workflows.overview.back_button",recordingKey:"dev_handoff.workflows.overview.back_button","aria-label":(0,et.t)("dev_handoff.workflows.overview.back_to_page_tooltip"),"data-tooltip":(0,et.t)("dev_handoff.workflows.overview.back_to_page_tooltip"),"data-tooltip-type":eS.Ib.TEXT},a.createElement(x.C,null)):null}function tO(){let e=(0,_._I)(),t=eg.q5()?.key,n=(0,ed.dP)();(0,h.T)()&&(0,d.kc)().dt_vscode_ready_for_dev&&(n=0);let i=(0,ec.GS)(),l=(0,es.b)(),s=(0,K.U)(),c=function(){let[e,t]=(0,z.fp)(tp);return a.useCallback(n=>{e||(t({source:n}),tm.start())},[e,t])}(),u=(0,eE._6)(),m=(0,r.wA)();(0,ex.O)();let p=(0,eC.J2)(o.Ez5.currentSceneState().nodesWithStatusForFile),g=(0,a.useRef)(null),[f,E]=(0,z.fp)(ea.gk),[y,b]=(0,z.fp)(tI),v=a.useCallback(e=>{s("Dev Mode Overview Sort Changed",{sort:e}),b(e)},[b,s]),T=e?y:tg._6.PAGE,[S,x]=(0,z.fp)(tk),N=(0,el.n9)(t),{setSearchString:I,searchString:A,searchFilter:O,searchActive:L}=function(){let[e,t]=(0,z.fp)(tc),n=(0,K.U)(),r=(0,a.useMemo)(()=>(function(e){let t=e?new ts.A(e.toLowerCase()):null;return{filter:e=>{let n=t?t.matchAgainst(e):null;return!n||!!n.find(e=>e.score>0)}}})(e),[e]),i=(0,a.useCallback)(e=>r.filter([e.nodeName,e.pageName,e.description]),[r]),l=(0,to.A)(()=>{n("Dev Mode Overview Search",{})},1e3);return{setSearchString:(0,a.useCallback)(e=>{t(e),l()},[t,l]),searchString:e,searchFilter:i,searchActive:e.length>0}}(),D=a.useMemo(()=>p.filter(e=>e.status===o.zIx.BUILD&&O(e)),[p,O]),R=a.useMemo(()=>p.filter(e=>e.status===o.zIx.COMPLETED&&O(e)),[p,O]),M=a.useMemo(()=>{switch(S){case tg.oz.ALL:return p.filter(O);case tg.oz.RECENTLY_VIEWED:if(!N)return[];return Object.entries(N).reduce((e,[t,n])=>{let a=p.find(e=>e.nodeId===t&&O(e));return a&&e.push({...a,lastViewedTimestamp:n}),e},[]);case tg.oz.BUILD:return D;case tg.oz.COMPLETED:return R}},[p,S,N,O,D,R]),F=a.useMemo(()=>[{key:tg.oz.ALL,label:(0,et.t)("dev_handoff.workflows.overview.tab_all")},...(0,d.kc)().dt_workflows_recently_viewed?[{key:tg.oz.RECENTLY_VIEWED,label:(0,et.t)("dev_handoff.workflows.overview.tab_recent")}]:[],{key:tg.oz.BUILD,count:D.length,label:(0,et.t)("dev_handoff.workflows.overview.tab_ready")},{key:tg.oz.COMPLETED,count:R.length,label:(0,et.t)("dev_handoff.workflows.overview.tab_completed")}],[D.length,R.length]),U=a.useMemo(()=>{if(0===M.length)return[];if(S===tg.oz.RECENTLY_VIEWED)return[{key:"recent",sortedNodesWithStatusForFile:M.slice().sort(el.YA)}];switch(T){case tg._6.PAGE:let e={};return M.slice().sort((e,t)=>e.visualOrder-t.visualOrder).forEach(t=>{e[t.pageId]||(e[t.pageId]={key:t.pageId,pageId:t.pageId,pageName:t.pageName,sortedNodesWithStatusForFile:[]}),e[t.pageId].sortedNodesWithStatusForFile.push(t)}),Object.values(e);case tg._6.RECENT:return[{key:"recent",sortedNodesWithStatusForFile:M.slice().sort((e,t)=>t.updatedAt-e.updatedAt)}];case tg._6.ALPHABETICAL:return[{key:"alphabetical",sortedNodesWithStatusForFile:M.slice().sort((e,t)=>e.nodeName.localeCompare(t.nodeName))}]}},[S,M,T]),[G,H]=(0,z.fp)(tN);a.useEffect(()=>{H(e=>{let t={...e};return U.forEach(({pageId:e})=>{e&&void 0===t[e]&&(t[e]=!0)}),t})},[H,U]);let W=a.useCallback(e=>{H(t=>{let n={...t};return n[e]=!n[e],n})},[H]),{numSections:j,numFrames:$,numPages:q}=a.useMemo(()=>({numSections:p.filter(e=>e.isSection).length,numFrames:p.filter(e=>!e.isSection).length,numPages:new Set(p.map(e=>e.pageId)).size}),[p]),X=(0,C.US)();!function({nodesWithStatusForFile:e,enabled:t}){let[n,r]=(0,z.fp)(tS),i=a.useRef(),l=(0,e_.eY)();a.useEffect(()=>{if(!t)return;let a=0,o=0,s=performance.now();if(void 0===i.current&&(i.current=new Set),e.forEach(e=>{if(!i.current.has(e.nodeId)){a++;let t=performance.now();l.get(e.nodeId)?.materializeDescendants();let n=performance.now()-t;n>o&&(o=n),i.current.add(e.nodeId)}}),!n){let e=performance.now()-s;(0,B.sx)("performance.dev_mode.workflows.overview.materialize_nodes",{nodeCount:a,worstNodeMs:o,elapsedMs:e},{forwardToDatadog:!0}),r(!0)}},[e,i,l,n,r,t])}({enabled:X,nodesWithStatusForFile:p});let[J,Q]=a.useState(!1),er=a.useCallback(()=>{Q(!0),E(g.current?.scrollTop)},[E]),[eo]=(0,z.fp)(tg._o);(0,V.h)(()=>{let t=eo||"init";s("Dev Mode Overview Shown",{type:e?"full":"lite",source:t},{forwardToDatadog:!0}),c(t),em.wr()});let eu=[...new Set(M.map(e=>e.userId).filter(e=>e))],ep=(0,eh.zy)(eu);(0,tg.c7)(M,S,T),(0,tg.zz)(eu,ep,M);let ef=a.useCallback(e=>{s("Dev Mode Overview Tab Clicked",{tab:e}),x(e)},[x,s]);if(a.useEffect(()=>{"fullscreen"===u.view&&u.commentThreadId&&(0,ei._$)(m,u,"overview_open_notification")},[m,u]),!X||J)return a.createElement("div",{className:e0},a.createElement("div",{className:P()(e1,"overview--overviewSpinner--zv-dq",{[e2]:l}),style:{left:n}},a.createElement(w.k,{size:"lg"})));let ey="";j>0&&(ey+=(0,et.t)("dev_handoff.workflows.overview.sections_count",{count:j})),$>0&&(j>0&&(ey+=", "),ey+=(0,et.t)("dev_handoff.workflows.overview.frames_count",{count:$})),j+$>0&&(ey+=" "+(0,et.t)("dev_handoff.workflows.overview.pages_count",{count:q}));let eb=0===U.length,ev={left:n};return(0,h.T)()&&(0,d.kc)().dt_vscode_ready_for_dev&&(ev.margin="0px"),a.createElement("div",{className:e0},a.createElement("div",{className:P()(e1,{[e2]:l}),style:ev},(0,d.kc)().dt_vscode_ready_for_dev&&(0,h.T)()?a.createElement(en.f,{isOnReadyForDevPage:!0},e&&a.createElement(tD,{value:A,onChange:I})):a.createElement("div",{className:"overview--overviewHeader--BBr9p"},a.createElement(tA,null),a.createElement("div",{className:"overview--overviewTitle--gEd5D text--fontPos13--xW8hS text--_fontBase--QdLsd"},a.createElement("div",{className:"overview--overviewTitleIcon--NvF-4"},a.createElement(k.O,null)),a.createElement("h1",null,(0,et.tx)("dev_handoff.workflows.overview.title"))),a.createElement("div",{className:"overview--overviewTitleInfo--3e2oX text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement("span",null,ey)),a.createElement(tK,null),a.createElement("div",{className:"overview--overviewHeaderSpacer--oRKTg"}),e&&a.createElement(tD,{value:A,onChange:I}),i&&a.createElement(tx,null)),a.createElement("div",{className:"overview--bannerWrapper--D8N5z"},a.createElement(eH,null)),a.createElement("div",{className:"overview--scrollAndEmptyMessage--3hOyM"},eb&&a.createElement("span",{className:"overview--emptyMessage--lyEC8"},L?(0,et.tx)("dev_handoff.workflows.overview.empty_message_search"):a.createElement("div",{className:ee.cx.preWrap.$},(0,et.tx)("dev_handoff.workflows.overview.no_designs",{status:function(e){switch(e){case tg.oz.BUILD:return(0,et.tx)("dev_handoff.workflows.overview.no_designs_ready");case tg.oz.COMPLETED:return(0,et.tx)("dev_handoff.workflows.overview.no_designs_completed");default:return(0,et.tx)("dev_handoff.workflows.overview.no_designs_ready")}}(S),link:a.createElement(Y.CY,{href:"https://help.figma.com/hc/en-us/articles/23918228264855",trusted:!0,target:"_blank",className:"overview--learnMoreLink--Yrujk"},(0,et.tx)("dev_handoff.workflows.overview.learn_more"))}))),a.createElement(Z.P,{className:"overview--overviewNodesScrollContainer--uc1ey",scrollContainerRef:g,initialScrollTop:f},a.createElement("div",{className:"overview--overviewNodesScrollContainerContents--fTO-e"},e&&a.createElement("div",{className:"overview--overviewTabsContainer--sjuS-"},a.createElement(tT,{tabs:F,selected:S,onTabSelected:ef}),S!==tg.oz.RECENTLY_VIEWED&&a.createElement(tG,{sortedBy:T,setSortedBy:v})),!eb&&a.createElement("div",{className:"overview--overviewNodesContainer--P3anz"},a.createElement("div",{className:"overview--overviewSections--2H4Qw"},U.map(({key:e,pageId:t,pageName:n,sortedNodesWithStatusForFile:r})=>{let i=!t||G[e];return a.createElement(tR,{isExpanded:i,key:e,pageId:t,pageName:n,overviewNodes:r,users:ep,onExpandCollapseClicked:t?()=>W(t):void 0,onPreviewClick:er})}))))))))}function tL({pageName:e,isExpanded:t,onExpandCollapseClicked:n}){return a.createElement(T.E,{className:"overview--pageHeader--dubsT",onClick:n,"aria-label":t?(0,et.t)("dev_handoff.workflows.overview.collapse_page",{pageName:e}):(0,et.t)("dev_handoff.workflows.overview.expand_page",{pageName:e})},a.createElement("div",{className:"overview--pageHeaderContent--Bq-Ol text--fontPos13--xW8hS text--_fontBase--QdLsd"},a.createElement(Q.B,{svg:t?tE.A:ty.A,className:"overview--caretIcon--gssmY"}),a.createElement(N.A,{className:"overview--pageIcon--w9-M7"}),a.createElement("span",null,e)))}function tD({value:e,onChange:t}){return a.createElement("div",{className:"overview--searchBar--NX8cb",role:"presentation","data-editor-theme":"dev-handoff"},a.createElement(I.h,null),a.createElement(J.L,{placeholder:(0,et.t)("dev_handoff.workflows.overview.search_placeholder"),value:e,onChange:e=>{t(e.target.value)},className:"overview--searchInput--3X9vp text--fontPos11--2LvXf text--_fontBase--QdLsd",spellCheck:!1}),!!e&&a.createElement("div",{className:"overview--searchInputClose--lNMFC"},a.createElement(S.K,{onClick:()=>t(""),"aria-label":(0,et.t)("dev_handoff.workflows.overview.clear_search"),htmlAttributes:{"data-tooltip":(0,et.t)("dev_handoff.workflows.overview.clear_search"),"data-tooltip-type":eS.Ib.TEXT}},a.createElement(A.L,null))))}function tR({pageName:e,overviewNodes:t,users:n,isExpanded:r,onExpandCollapseClicked:i,onPreviewClick:l}){return a.createElement(a.Fragment,null,e&&a.createElement(tL,{pageName:e,isExpanded:r,onExpandCollapseClicked:i}),r&&a.createElement("div",{className:"overview--overviewNodesList--ipsOp"},t.map(r=>a.createElement(tF,{key:r.nodeId,overviewNode:r,onPreviewClick:l,renderPageName:!e,users:n,nodeCount:t.length}))))}function tM({overviewNode:e,onClick:t,renderPageName:n,showLastUpdated:i}){let{nodeId:l,isSection:s,updatedAt:c,pageName:d,nodeName:u,pageId:m}=e,p=(0,eR.VW)(l,m),_=(0,r.d4)(e=>(0,eT.Np)(e,p)),g=(0,r.d4)(e=>(0,eT.xS)(e,p)),f=(0,eA.Cj)(g),h=(0,eR.TQ)(),E=a.useRef(null),y=(0,ep.BK)(`DEV_HANDOFF_OVERVIEW_OPTIONS_DROPDOWN_${l}`),b=function(e,t){let n=(0,ew.Fk)(t=>t.get(e)?.getStatusInfo(),e),a=n?.lastUpdateUnixTimestamp?1e3*n.lastUpdateUnixTimestamp:null,r=(0,F.ei)(e),i=t?r?.lastEditedAt:a,l=(0,X.Ak)(i);return i?l:null}(l,e.hasBeenEditedSinceLastStatusChange),v=a.useMemo(()=>e.hasBeenEditedSinceLastStatusChange?(0,et.tx)("dev_handoff.workflows.edit_info.changed"):e.status===o.zIx.COMPLETED?(0,et.tx)("dev_handoff.status.completed"):e.status===o.zIx.BUILD?e.description?(0,et.tx)("dev_handoff.workflows.edit_info.new version"):(0,et.tx)("dev_handoff.status.ready_for_dev"):(0,et.tx)("dev_handoff.workflows.edit_info.changed"),[e.description,e.hasBeenEditedSinceLastStatusChange,e.status]);return a.createElement("div",{className:"overview--overviewNodeCardHeader--C-KTf"},a.createElement(W.lt,{className:P()("overview--overviewNodeCardHeaderLeft--jYCXL",e5),onClick:t,href:_,recordingKey:"dev_handoff.workflows.overview.card"},n&&d&&a.createElement("div",{className:"overview--pageNameAndChevron--5v8px"},a.createElement("span",{className:"overview--pageName--TURV8"},d),a.createElement("span",{className:"overview--breadCrumbSeparator--zcd8z"},"/")),a.createElement("div",{className:"overview--nodeNameAndIcon--Tl3e-"},a.createElement("div",null,s?a.createElement(O.e,null):a.createElement(L.q,null)),a.createElement("span",{className:"overview--nodeName--20NeF"},u)),i&&c>1&&a.createElement("div",{className:"overview--updatedAtText--z05FL text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,et.tx)("dev_handoff.overview_mode.design_status",{fromNow:b,status:v}))),a.createElement("div",{className:"overview--overviewNodeCardHeaderRight--wRNMN"},a.createElement(S.K,{"aria-label":(0,et.t)("dev_handoff.workflows.more_actions_tooltip"),ref:E,onClick:()=>y.toggle(),htmlAttributes:{"data-tooltip":(0,et.t)("dev_handoff.workflows.more_actions_tooltip"),"data-tooltip-type":eS.Ib.TEXT}},a.createElement(D.J,null)),y.showing&&E.current&&a.createElement(eI.Cf,{targetRect:E.current.getBoundingClientRect(),minWidth:180,lean:"left"},a.createElement(q.c$,{onClick:()=>h("Dev Mode Overview Card Go To Canvas Clicked",l,m)},(0,et.tx)("dev_handoff.workflows.overview.show_on_page_action")),a.createElement(q.c$,{onClick:f},(0,et.tx)("dev_handoff.status.copy_focus_link"))),a.createElement(er.v,{nodeId:l,isMinimal:!0,sourceForLogging:"overview"})))}function tP({overviewNode:e,onClick:t,user:n}){let{description:i,nodeId:l,hasBeenEditedSinceLastStatusChange:o}=e,s=(0,eR.VW)(e.nodeId),c=(0,r.d4)(e=>(0,eT.Np)(e,s));return a.createElement(a.Fragment,null,a.createElement("div",{className:"overview--overviewAvatarRowMediaQueryHeader--nigbr"},a.createElement("div",{className:"overview--overviewRecentActivityHeader--sPkSZ"},o?a.createElement(ta,{nodeId:l,user:n,previewUrl:c,isFallbackForLegacyStatus:e.isFallbackForLegacyStatus,onClick:t}):a.createElement(tr,{nodeId:l,user:n,description:i,previewUrl:c,isFallbackForLegacyStatus:e.isFallbackForLegacyStatus,onClick:t}))))}function tF({overviewNode:e,onPreviewClick:t,renderPageName:n,users:i,nodeCount:l}){let o=(0,r.wA)(),s=(0,K.U)(),{nodeId:c,pageId:d,updatedAt:u}=e,m=(0,eR.VW)(c),p=(0,r.d4)(e=>(0,eT.Np)(e,m)),[_]=(0,z.fp)(tI),g=_===tg._6.RECENT&&u>1,[,f]=(0,z.fp)(tg.wz),h=i.usersById?.[e.userId],E=g&&(i.loading||h);function y(e){e.preventDefault(),s("Dev Mode Overview Card Clicked",{nodeId:c}),f("overview"),t(),o(eo.$T(m))}return a.createElement("div",{className:"overview--overviewNodeCard--NsmYU"},E&&a.createElement(tP,{overviewNode:e,onClick:y,user:h}),a.createElement("div",{className:"overview--previewContainer--5NeGg"},a.createElement(tM,{overviewNode:e,onClick:y,renderPageName:n,showLastUpdated:!E}),a.createElement(tB,{nodeId:c,pageId:d,updatedAt:u,previewUrl:p,onClick:y,nodeCount:l})))}function tB({nodeId:e,pageId:t,updatedAt:n,previewUrl:r,onClick:i,nodeCount:l}){let s=(0,ew.Fk)((e,t,n)=>(0,ei.S7)(e,t,n)||"var(--color-bg)",e,t),c=(0,ew.Fk)(t=>t.get(e)?.size),d=1+(5-5*Math.pow(Math.min(1,Math.max(0,Math.max(c?1-(tC-c.x)/tC:1,c?1-(tw-c.y)/tw:1))),.5)),u=c?{width:c.x*d,height:c.y*d}:{width:tb,height:tv},m=Math.min(1,Math.min(tb/u.width,tv/u.height)),p={width:Math.round(u.width*m),height:Math.round(u.height*m)},_=a.useRef(null),g=(0,eb.x)(_,"100%"),f=(0,eu.yh)({nodeId:e,width:p.width,height:p.height,shouldSkip:!g,version:n,reason:"workflows.overview.thumbnail",regenerateAfterImagesLoaded:!0,isDevModeBlendedSection:o.w3z.canBeBlendedSection(e)}),h=function(){let[e,t]=(0,z.fp)(t_),[n]=(0,z.fp)(tp),r=(0,K.U)();return a.useCallback(a=>{if(!e&&n){t(!0);let e=tm.stop();r(tu,{nodeCount:a,source:n.source,elapsedMs:e},{forwardToDatadog:!0})}},[e,t,n,r])}();return a.useEffect(()=>{f&&h(l)},[f,h,l]),a.createElement("a",{ref:_,className:P()("overview--previewThumbnail--zofC5",e5),style:{background:s},onClick:i,href:r},f&&a.createElement("img",{src:f.src,style:{maxWidth:f.displaySize.x,maxHeight:f.displaySize.y},alt:(0,et.t)("dev_handoff.nodes_panel.thumbnail_alt_text")}),a.createElement("div",{className:"overview--previewExpandIcon--nqhxn","data-preferred-theme":"dark","data-tooltip":(0,et.t)("dev_handoff.workflows.overview.card_hover_expand_tooltip"),"data-tooltip-type":"text"},a.createElement(R.O,null)))}let tU=new class{format(e){switch(e){case tg._6.PAGE:return(0,et.t)("dev_handoff.workflows.overview.sort_pages");case tg._6.RECENT:return(0,et.t)("dev_handoff.workflows.overview.sort_recent");case tg._6.ALPHABETICAL:return(0,et.t)("dev_handoff.workflows.overview.sort_alphabetical")}}};function tG({sortedBy:e,setSortedBy:t}){let n=(0,r.wA)(),i=(0,ep.Um)();return a.createElement(eO.l6,{dispatch:n,property:e,id:"DEV_MODE_OVERVIEW_SORT_DROPDOWN",onChange:t,formatter:tU,dropdownShown:i,className:"overview--sortDropdownButtonContainer--rL8cS",inputClassName:"overview--sortDropdownButton--Doetn text--fontPos11--2LvXf text--_fontBase--QdLsd",dropdownWidth:180,dropdownAlignment:"right",neverConstrain:!0},a.createElement(eO.c$,{formattedValue:(0,et.t)("dev_handoff.workflows.overview.sort_by"),additionalStylesClassName:"overview--sortByOption--rjLiK",isHeader:!0,ignoreCheck:!0}),Object.values(tg._6).map(t=>a.createElement(eO.c$,{key:t,value:t,selected:e===t,fullWidth:!0})))}function tK(){return a.createElement("button",{"data-editor-theme":"dev-handoff",onClick:()=>G.Ay.unsafeRedirect("https://form.asana.com/?k=dyYqSpHdZqetESFQzNb8hQ&d=10497086658021","_blank"),className:"overview--betaFeedbackBadge--PUv9s text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,et.tx)("dev_handoff.workflows.overview.feedback"),a.createElement(Q.B,{className:"overview--badgeIcon--rKOUQ",svg:th.A}))}var tV=n(521033),tH=n(243742),tz=n(506599),tW=n(988022),tj=n(974105),t$=n(356390),tq=n(15220),tY=n(601978),tX=n(760640),tJ=n(488983),tZ=n(737499),tQ=n(770333),t0=n(85098),t1=n(69961),t2=n(776615),t5=n(400466),t3=n(716253),t4=n(634832),t6=n(621945),t8=n(228739),t7=n(302717),t9=n(221768),ne=n(682301),nt=n(341450),nn=n(747638),na=n(707458),nr=n(153234),ni=n(30637),nl=n(572206),no=n(46481),ns=n(545164),nc=n(992271),nd=n(862442),nu=n(457630),nm=n(155300),np=n(94500),n_=n(728587),ng=n(746806),nf=n(816660),nh=n(765165),nE=n(242979);let ny="hit-target-resize";function nb(e){let t=nc.hY[e.devicePresetIdentifier].inlinePreviewInfo?.hitTargetSvgUrl,[n,r]=a.useState(null);(0,a.useEffect)(()=>{fetch(t).then(e=>e.text()).then(e=>r(e)).catch(()=>console.warn("Failed to fetch hit target SVG. Falling back to rectangular resize boundary."))},[t]);let i=a.useMemo(()=>n?(0,Q.V)(n):null,[n]);return null!==i?a.createElement(nv,{...e,hitTargetSvg:i}):a.createElement(nh.K,{...e})}function nv({resizeTo:e,getCurrentContainerBounds:t,lockAspectRatio:n,isResizing:r,setIsResizing:i,onResizeEnd:l,setResizeDirections:o,devicePresetIdentifier:s,isDeviceRotatedCCW:c,hitTargetSvg:d,hidden:u,recordingKey:m}){let p=a.useCallback(()=>{let e=t(),n=(16/((c?e.bottom-e.top:e.right-e.left)/nc.hY[s].imageSize.x)).toFixed(2);document.querySelectorAll(`[id^=${ny}]`).forEach(e=>e.setAttribute("stroke-width",`${n}`))},[s,c,t]);(0,a.useEffect)(()=>{p()},[p]);let _=a.useCallback(()=>{p(),l?.()},[l,p]),{startResizing:g}=(0,nh.Q)({resizeTo:e,getCurrentContainerBounds:t,isResizing:r,setIsResizing:i,setResizeDirections:o,onResizeEnd:_,lockAspectRatio:n,hidden:u,recordingKey:m}),f=a.useRef(null),h=a.useRef(null),E=a.useMemo(()=>(0,nc.qt)(s)===nc.bq.WATCH,[s]),y=a.useCallback(e=>{let t=e.currentTarget.getBoundingClientRect(),n=e.clientX-t.left,a=e.clientY-t.top;return E?nw({x:n,y:a},t):nC({x:n,y:a},t)},[E]),b=nr.rf(m,"mousedown",a.useCallback(e=>{e.stopPropagation(),e.preventDefault(),g(y(e),{x:e.clientX,y:e.clientY})},[y,g]),{recordMetadata:e=>{let t=e.currentTarget;return{clientX:e.clientX,clientY:e.clientY,svgElementId:t.id}},playbackMetadata:e=>({currentTarget:document.querySelector(`#${e.svgElementId}`),clientX:e.clientX,clientY:e.clientY})}),v=nr.rf(nr.Pt(m,"deviceFrameResizeTarget"),"mousemove",a.useCallback(e=>{if(r)return nr.aH;e.stopPropagation(),e.preventDefault();let t=y(e),n=e.currentTarget;h.current&&n.classList.remove(h.current);let a=(0,nf.as)(t);a&&n.classList.add(a),h.current=a},[y,r]),{recordMetadata:e=>{let t=e.currentTarget;return{clientX:e.clientX,clientY:e.clientY,svgElementId:t.id}},playbackMetadata:e=>({currentTarget:document.querySelector(`#${e.svgElementId}`),clientX:e.clientX,clientY:e.clientY})}),C=a.useCallback(e=>{e.onmousemove=v,e.onmousedown=b},[b,v]);return((0,a.useEffect)(()=>{document.querySelectorAll(`[id^=${ny}]`).forEach(e=>C(e))},[s,C]),u)?null:c?(()=>{let e=nc.hY[s].imageSize,t=e.x/e.y;return a.createElement("div",null,a.createElement(Q.B,{svg:d,svgClassName:P()(nE.Q0,nE._d,nE.iZ),svgWidth:`${100*t}%`,ref:f,useOriginalSrcFills_DEPRECATED:!0}))})():a.createElement("div",null,a.createElement(Q.B,{svg:d,svgClassName:nE.iZ,ref:f,useOriginalSrcFills_DEPRECATED:!0}))}let nC=(e,t)=>{let{x:n,y:a}=e,r=.1*Math.min(t.width,t.height),i=[];return a<r?i.push(nf.OP.TOP):a>t.height-r&&i.push(nf.OP.BOTTOM),n<r?i.push(nf.OP.LEFT):n>t.width-r&&i.push(nf.OP.RIGHT),i},nw=(e,t)=>{let{x:n,y:a}=e,r=.1*t.width;if(a<r)return[nf.OP.TOP];if(a>t.height-r)return[nf.OP.BOTTOM];if(n<r)return[nf.OP.LEFT];if(n>t.width-r)return[nf.OP.RIGHT];let i=[];return a<t.height/2?i.push(nf.OP.TOP):i.push(nf.OP.BOTTOM),n<t.width/2?i.push(nf.OP.LEFT):i.push(nf.OP.RIGHT),i};var nT=n(144119),nS=n(223556),nx=n(705940),nk=n(371435),nN=n(743586),nI=n(802161),nA=n(479991),nO=n(503618),nL=n(844076);let nD={x:600,y:600},nR="inlinePreviewModal",nM=e=>{let t=(0,nu.MG)({subscribeToUpdates_expensive:!0}),n=(0,nu.TZ)({subscribeToUpdates_expensive:!0}),r=(0,ek.GQ)()+t3.gN;return(0,a.useMemo)(()=>e?new nl.Mi(t+r+t3.wR,n+t3.gN):new nl.Mi(t+t3.wR,n+t3.wR),[e,t,n,r])},nP=a.memo(function({pageId:e,viewerControl:t}){let[{previewKeyForErrorBoundary:n},r]=(0,z.fp)(t.stateAtom);return a.createElement(u.tH,{key:n,boundaryKey:"InlinePreviewModal",fallback:u.H4.NONE_I_KNOW_WHAT_IM_DOING,onError:()=>{if((0,B.sx)("inline_preview_crashed",{},{forwardToDatadog:!0}),r({type:"HANDLE_PREVIEW_CRASHED"}),(0,ni.Lg)()||(0,ni.nl)()||(0,d.b5)())throw Error("Inline preview crashed")}},a.createElement(nF,{pageId:e,viewerControl:t}))}),nF=a.memo(function({pageId:e,viewerControl:t}){let n=a.useRef(null),i=(0,ec.GS)(),l=(0,eg.tS)(),s=(0,a.useRef)(!1),[{currentPresentedNode:d,navigateBackwardEnabled:u,navigateForwardEnabled:m,modalStatus:p,sizeInfo:_,showDeviceFrameEnabled:g,scalingInfo:f},h]=(0,z.fp)(t.stateAtom),E=(0,r.wA)(),y=(0,e_.eY)(),b=(0,a.useMemo)(()=>p===nk.b.OPEN,[p]),v=_?.initialViewerSize??nD,C=(0,c.ZC)(v),w=nM(i),[T,S]=a.useState(w),[x,k]=a.useState(v.x),[N,I]=a.useState(v.y+nf.uF),A=na.q.instance.getCurrentPage()?.prototypeDevice||null,O=A?.presetIdentifier,L=!!O&&(0,nc.L_)(O),D=b&&L&&g,{showing:R}=(0,ep.BK)(t.overflowDropdownType),M=(0,nd.Z)(),F=(0,eC.J2)(o.Ez5.singleSlideView().isInSingleSlideView),[B,G]=a.useState(!1),K=a.useCallback(()=>{G(!0),t$.Y5.triggerAction("inline-preview-iframe-focus-state-changed",{isFocused:!0})},[G]),V=(0,nT.sO)(),H=B||R?nI.cD:nI.Xt,W=a.useCallback(e=>{E((0,np.Zh)({name:"prototype.close_inline_viewer",params:{source:e}})),h({type:"CLOSE_INLINE_PREVIEW"})},[E,h]),j=a.useCallback(()=>((0,t4.assert)(!!N),(0,t4.assert)(!!x),{x:x,y:N-nf.uF}),[N,x]),$=a.useCallback(e=>{k(e.x),I(e.y+nf.uF)},[k,I]),q=a.useCallback(()=>{let e=j();if(!D)return e;(0,t4.assertNotNullish)(O,"devicePresetIdentifier must be set");let t=A.rotation,{framePresetSize:n,idealDeviceSize:a}=(0,nS.is)(O,t);return(0,nS.BX)(e,n,a)},[O,j,D,A?.rotation]);a.useEffect(()=>{s.current||S(w)},[w]),a.useEffect(()=>{h({type:"SET_CURRENT_VIEWER_SIZE_CALLBACK",payload:q})},[h,q]);let Y=a.useMemo(()=>_?.breakpoint?.type!==t3.l5.DEVICE,[_]),X=a.useCallback(e=>{if(!Y)return;let t=q();(0,t4.assert)(!!d,"currentPresentedNode must be set");let n=y.get(d);(0,t4.assert)(!!n,"expected selectedNode to exist");let a=(0,t3.HS)(y,n),r=(0,t3.hX)(t,n,a,y);(0,t4.assert)(r.breakpoint.type!==t3.l5.DEVICE,"fit to aspect ratio not allowed for device"),$(r.initialViewerSize),E((0,np.Zh)({name:"prototype.resize_to_fit_aspect_ratio",params:{source:e}}))},[Y,q,d,y,$,E]),J=()=>{if(!d)return!1;let e=!1;if(D){let{idealDeviceSize:t}=(0,nS.is)(O,A.rotation);e=t.x>=t3.Fe&&t.y>=t3.Sq}else{let t=y.get(d);if(!t)return!1;let n=(0,t3.HS)(y,t),a=(0,t3.nw)(n,t);e=a.x>=t3.Fe&&a.y>=t3.Sq}return e},Z=a.useCallback(e=>{h({type:"SET_PREVIEW_IS_RESPONSIVE",payload:e})},[h]),Q=a.useCallback(()=>{h({type:"RESIZE_MODAL",payload:{sceneGraph:y}})},[h,y]),ee=a.useCallback(e=>{if(e){let t=(0,nu.QZ)({nodeId:e,alwaysPan:!0,maxScale:.6});V?p===nk.b.OPEN&&(M(t),F&&o.Ez5.singleSlideView().focusSlideInSingleSlideView(e,!0)):M(t)}},[M,V,F,p]);a.useEffect(()=>{h({type:"SET_SCROLL_CALLBACK",payload:ee})},[h,ee]);let et=a.useCallback(e=>{$({x:e.x,y:e.y+(0,U.jz)(tf.m8f)})},[$]),en=a.useMemo(()=>{if(D&&nc.hY[O].inlinePreviewInfo?.hitTargetSvgUrl)return function(e){let t=A.rotation===o.xOL.CCW_90;return a.createElement(nb,{...e,mirrorResizeHorizontally:!1,devicePresetIdentifier:O,isDeviceRotatedCCW:t})}},[D,O,A?.rotation]),ea=a.useCallback(e=>{(0,t4.assert)(_?.breakpoint.type===t3.l5.DEVICE,"device must be set to toggle device frame"),(0,t4.assert)(!!A,"prototypeDevice must be set to toggle device frame");let t=q();if(e){let e=A.presetIdentifier,{idealDeviceSize:n,framePresetSize:a}=(0,nS.is)(e,A.rotation);et((0,nS.Ho)(t,a,n))}else $(t)},[_?.breakpoint.type,A,q,$,et]);(0,t4.assert)(!b||null!==_,"sizeInfo should always be set when open"),a.useLayoutEffect(()=>{if(C!==v){if(D){let{idealDeviceSize:e,framePresetSize:t}=(0,nS.is)(O,A.rotation);et((0,nS.Ho)(v,t,e))}else $(v)}},[v,C,O,D,A,et,$]),a.useEffect(()=>{O&&(0,nc.L_)(O)&&(0,nc.Gn)(O)},[O]);let er=a.useCallback(()=>{let e=j(),{width:t,height:n}=t$.Y5.getViewportInfo(),a=e.x/t,r=e.y/n;E((0,np.Zh)({name:"prototype.inline_preview_manually_resized",params:{isDeviceFrameShown:D,horizontalCoverage:a,verticalCoverage:r}}))},[E,j,D]),ei=(0,a.useMemo)(()=>{let e={height:"100%"};return i&&!D?{...e,borderBottomLeftRadius:"var(--radius-small)",borderBottomRightRadius:"var(--radius-small)"}:e},[D,i]);if(p===nk.b.NOT_LOADED)return null;let el=P()(V?nI.CN:nI.aq,D?null:H),eo=P()(D?[H,nE.k9]:null,{[nI.FO]:V}),{x:es,y:ed}=(0,t3.ut)(na.q.instance,!0),eu=!b||!_?.initialViewerSize;return a.createElement(ng.BL,{position:T,setPosition:S,width:x,setWidth:k,height:N,setHeight:I,recordingKey:nR,ignoreCloseShortcut:!b,title:a.createElement(nU,{navigateBackwardEnabled:u,navigateForwardEnabled:m,width:x,onBack:t.onBack,onForward:t.onForward,onRestart:t.onRestart}),tabIndex:0,onFocus:()=>{t.onFocus()||K()},onEdgeDoubleClick:()=>X("double_click"),onResize:Q,onResizeEnd:er,onClose:()=>{W("modal")},onDragStart:()=>s.current=!0,hidden:eu,frameStyle:ei,transparentContentBackground:D,containerClassName:el,containerFillsPage:V,headerClassName:eo,minHeight:ed,minWidth:es,preventKeyboardFocus:!0,allowResizeHeight:B&&!V,allowResizeWidth:B&&!V,disableDragging:V,alwaysEnsureHeaderModalOnScreen:!0,allowPartialHeaderOnScreen:!0,makeContentPixelPerfect:!0,dragHeaderOnly:!0,lockAspectRatio:_?.breakpoint?.type===t3.l5.DEVICE,customButton:a.createElement(nB,{viewerControl:t,allowSizeReset:Y,allowActualSizeReset:J(),isPrototypeDeviceSet:!!A&&A.type!==o.XQq.NONE,isPreviewFittedToAspectRatio:()=>{if(!d||!Y)return!1;let e=y.get(d);if(!e)return!1;let t=q(),n=(0,t3.HS)(y,e),a=(0,t3.hX)(t,e,n,y),r=t.x/t.y,i=a.initialViewerSize.x/a.initialViewerSize.y;return(0,nm.o)(r,i)},isDeviceSupportedForPreview:L,openFileKey:l||void 0,showOverflow:!V,showFullscreenButton:V,iframeRef:n,resizeToFitAspectRatio:()=>X("overflow_menu"),scrollToNode:ee,resizeToActualSize:()=>{if(!J())return;(0,t4.assert)(!!d),(0,t4.assert)(!!_);let e=y.get(d);(0,t4.assert)(!!e),E((0,np.Zh)({name:"prototype.resize_to_actual_size"}));let t=D?(0,nS.is)(O,A.rotation).idealDeviceSize:(0,t3.nw)(_.breakpoint,e),n=(e,t)=>{$(e),S(new nl.Mi(t.x,t.y))},a=j();(0,t3.UB)(t,E,()=>n(a,T)),$(t)},isPreviewShownAtActualSize:()=>{if(!d||!n.current)return!1;let e=y.get(d);if(!e||!_?.breakpoint)return!1;let t=D?(0,nS.is)(O,A.rotation).framePresetSize:(0,t3.nw)(_.breakpoint,e),a=q();return(0,nm.o)(t.x,a.x,1e-4)&&(0,nm.o)(t.y,a.y,1e-4)},setPreviewIsResponsive:Z,isPreviewResponsive:"responsive"===f.contentScalingMode,closeInlinePreview:W,onToggleShowDeviceFrame:ea,width:x}),ResizeTargetComponent:en},(()=>{let r=t.ViewerComponent;return a.createElement(nx.H,{initialViewerSize:v,isDeviceFrameShown:D},a.createElement(r,{ref:n,key:e,pageId:e,openFileKey:l||void 0,closeInlinePreview:W,isOpen:b,iframeFocused:B,setIframeFocused:G,onIframeFocus:K}))})())});function nB({allowSizeReset:e,allowActualSizeReset:t,isPrototypeDeviceSet:n,isDeviceSupportedForPreview:i,openFileKey:l,resizeToFitAspectRatio:s,scrollToNode:c,showOverflow:d,showFullscreenButton:u,iframeRef:m,resizeToActualSize:p,isPreviewShownAtActualSize:_,setPreviewIsResponsive:g,isPreviewResponsive:f,closeInlinePreview:h,onToggleShowDeviceFrame:E,width:y,isPreviewFittedToAspectRatio:b,viewerControl:v}){let C=(0,r.wA)(),w=a.useRef(null),[{currentPresentedNode:T,targetFrameFollowingEnabled:x,showDeviceFrameEnabled:k},N]=(0,z.fp)(v.stateAtom),{showing:I,toggle:A}=(0,ep.BK)(v.overflowDropdownType),O=a.useCallback(()=>{if(!l)throw Error("Expected openFileKey to exist");if(!T)throw Error("openPrototypeInNewTab called without currentPresentedNode");C(ns.F({fileKey:l,nodeId:T,startingPointNodeId:o.X3B.getActivePrototypeStartingPointNodeIdOnCurrentPage(),source:"inline_viewer",scalingInfo:f?n?{contentScalingMode:"responsive",viewportScalingMode:"scale-down"}:{contentScalingMode:"responsive",viewportScalingMode:"contain"}:void 0})),h("open_in_new_tab")},[l,T,C,f,n,h]),L=a.useCallback(()=>{let e=!x;C((0,np.Zh)({name:"prototype.toggle_follow_previewed_frame",params:{enabled:e}})),N({type:"TOGGLE_TARGET_FRAME_FOLLOWING"}),c(T)},[C,N,x,c,T]),D=a.useCallback(()=>{let e=!k;C((0,np.Zh)({name:"prototype.toggle_show_device_frame",params:{enabled:e,location:"preview"}})),N({type:"TOGGLE_SHOW_DEVICE_FRAME"}),E(e)},[C,k,E,N]),M=a.useCallback(()=>{let r={displayText:(0,et.t)("inline_preview.overflow_menu.responsive"),name:"responsive",recordingKey:"responsiveButton",callback:()=>{g(!0)},isChecked:f,icon:a.createElement(no.U,{svg:nL.A,className:nN.Fp},a.createElement(t6.V,null)),unsetStrokeOnActiveOption:!0},l={displayText:i?(0,et.t)("inline_preview.overflow_menu.fixed"):(0,et.t)("inline_preview.overflow_menu.fit_width"),name:i?"fixed":"fit-width",isChecked:!f,recordingKey:"fixedButton",icon:i?a.createElement(no.U,{svg:nA.A,className:nN.Fp},a.createElement(t8.O,null)):a.createElement(no.U,{svg:nO.A,className:nN.Fp},a.createElement(t7.v,null)),callback:()=>{g(!1)},unsetStrokeOnActiveOption:!0},o={displayText:(0,et.t)("inline_preview.overflow_menu.follow_prototype"),name:"follow-active-frame",recordingKey:"followActiveFrame",callback:L,isChecked:x},c={displayText:i?(0,et.t)("inline_preview.overflow_menu.resize_device_100_percent"):(0,et.t)("inline_preview.overflow_menu.resize_window_100_percent"),name:"actual-size",recordingKey:"actualSizeButton",callback:p,disabled:!t,isChecked:_(),"data-onboarding-key":"resize-to-actual-size"},d={displayText:(0,et.t)("inline_preview.overflow_menu.reset_aspect_ratio"),name:"reset-size",recordingKey:"resetSizeButton",callback:s,isChecked:b(),disabled:!e,hidden:n},u={displayText:(0,et.t)("inline_preview.overflow_menu.show_device_frame"),name:"show-device-frame",recordingKey:"showDeviceFrame",callback:D,isChecked:k&&i,disabled:!i,hidden:!n};return[i?r:l,i?l:r,{separator:!0,displayText:""},o,c,d,u,{displayText:(0,et.t)("inline_preview.new_tab"),recordingKey:"openInNewTabButton",name:"open-in-new-tab",callback:O,hidden:y>t3.kl}]},[f,i,L,x,p,t,_,s,b,e,n,D,k,O,y,g]),P=a.useCallback(()=>{m.current&&m.current.requestFullscreen()},[m]);return a.createElement(a.Fragment,null,d&&a.createElement("div",{ref:w},a.createElement(S.K,{"aria-label":(0,et.t)("inline_preview.overflow_menu"),htmlAttributes:{"data-tooltip-type":eS.Ib.TEXT,"data-tooltip":(0,et.t)("inline_preview.overflow_menu")},actionOnPointerDown:!0,onClick:e=>{e.stopPropagation(),A({})},recordingKey:(0,nr.Pt)(nR,"overflowMenuButton")},a.createElement(t9.A,null))),y>t3.kl&&a.createElement(S.K,{htmlAttributes:{"data-tooltip-type":eS.Ib.TEXT,"data-tooltip":(0,et.t)("inline_preview.new_tab"),"data-testid":"preview-open-in-presentation-view"},"aria-label":(0,et.t)("inline_preview.new_tab"),onClick:O,recordingKey:(0,nr.Pt)(nR,"openInNewTabButton")},a.createElement(ne.V,null)),u&&a.createElement(S.K,{onClick:P,htmlAttributes:{"data-tooltip-type":eS.Ib.TEXT,"data-tooltip":(0,et.t)("inline_preview.open_fullscreen")},"aria-label":(0,et.t)("inline_preview.open_fullscreen")},a.createElement(R.O,null)),I&&w.current&&a.createElement(n_.j,{dispatch:C,parentRect:w.current.getBoundingClientRect(),onFocus:e=>{e.stopPropagation()},onDismissMenu:v.onDismissOverflow,onDropdownHidden:v.onDismissOverflow,showPoint:!0,lean:"center",onSelectItem:e=>{e.callback&&e.callback()},recordingKey:(0,nr.Pt)(nR,"overflowMenu"),items:M()}))}function nU({navigateForwardEnabled:e,navigateBackwardEnabled:t,onRestart:n,width:i,onBack:l,onForward:o}){let s=(0,r.wA)();return a.createElement("div",{className:nI.KW},i<=t3.Ah?null:a.createElement(a.Fragment,null,a.createElement(S.K,{htmlAttributes:{"data-testid":"preview-navigate-backward"},"aria-label":(0,et.t)("viewer.footer.previous_frame"),onClick:l,disabled:!t,recordingKey:(0,nr.Pt)(nR,"navigateBackwardButton")},a.createElement(x.C,null)),a.createElement(S.K,{"aria-label":(0,et.t)("viewer.footer.next_frame"),onClick:o,disabled:!e,recordingKey:(0,nr.Pt)(nR,"navigateForwardButton"),htmlAttributes:{"data-testid":"preview-navigate-forward"}},a.createElement(nt.e,null))),i<=t3.kl?null:a.createElement(S.K,{"aria-label":(0,et.t)("inline_preview.restart"),htmlAttributes:{"data-tooltip-type":eS.Ib.TEXT,"data-tooltip":(0,et.t)("inline_preview.restart"),"data-testid":"preview-restart-prototype"},onClick:()=>{s((0,np.Zh)({name:"prototype.replay_clicked",params:{source:"inline viewer"}})),n()},recordingKey:(0,nr.Pt)(nR,"restartButton")},a.createElement(nn.H,null)))}var nG=n(701750),nK=n(646240),nV=n(132135),nH=n(241437),nz=n(274071),nW=n(711490),nj=n(894728);let n$=a.forwardRef(function({pageId:e,openFileKey:t,closeInlinePreview:n,isOpen:r,iframeFocused:i,setIframeFocused:l,onIframeFocus:s},c){let d=(0,nK.Xr)(nk.h),[u,m]=a.useState(!1),p=(0,z.md)(nH.yw),{isResizing:_,isDragging:g}=a.useContext(nW.O),f=a.useMemo(()=>_||g||!i,[_,g,i]),h=a.useMemo(()=>_||g,[_,g]);a.useEffect(()=>{nG.A.setDisableCloseWithShortcut(h)},[h]),a.useEffect(()=>{c.current&&(r?c.current.focus():(0,nz.$z)())},[c,r]),a.useEffect(()=>{let e=c.current;if(!e||u)return;let t=e=>{let t=e.shiftKey&&"Space"===e.code,a="Escape"===e.code;(t||a)&&!h&&n("keyboard")};return e.contentWindow?.addEventListener("keydown",t),()=>{e&&e.contentWindow?.removeEventListener("keydown",t)}},[c,u,h,n]);let E=t?function(e,t){let n=encodeURIComponent((0,nV.Kw)({base:"proto",file:{key:e},nodeId:t}));return`${location.origin}/embed?embed_host=inline-viewer&url=${n}&hide-ui=1&inline-viewer=1`}(t,e):"";return(a.useEffect(()=>{if(!c.current)return;let e=nG.A.initialize(c.current,{closeInlinePreview:n,dispatch:d,onLoad:()=>{m(!0)}});return()=>{d({type:"RESET_INLINE_PREVIEW"}),e(),m(!1)}},[n,d,e,c]),a.useEffect(()=>{},[E,e,p]),a.useEffect(()=>{let e=c.current;if(!e)return;let t=()=>{l(!1),t$.Y5.triggerAction("inline-preview-iframe-focus-state-changed",{isFocused:!1})};return e.contentWindow?.addEventListener("focus",s),e.contentWindow?.addEventListener("blur",t),()=>{e&&(e.contentWindow?.removeEventListener("focus",s),e.contentWindow?.removeEventListener("blur",t))}},[c,l,s]),a.useEffect(()=>()=>(0,nH.Bm)("inline_prototype_viewer"),[]),t)?a.createElement("div",{className:nI.Wc},a.createElement("iframe",{ref:c,title:"Inline Preview",src:(0,ni.PN)()?"/test/interactions/proto?secondary=1&inline-viewer=1":E,className:P()(nI.VR,f?nI.dS:null)}),!u&&a.createElement(nj.z2,{shouldNotOverflow:!0,isViewer:!0,editorType:eY._Y.DESIGN,progressBarMode:o.Oin.HIDE_UI})):null}),nq={overflowDropdownType:"INLINE_PREVIEW_OVERFLOW_DROPDOWN",stateAtom:nk.h,ViewerComponent:n$,onBack:()=>{nG.A.navigateBackward()},onForward:()=>{nG.A.navigateForward()},onRestart:()=>{nG.A.restartPrototype()},onFocus:()=>!!nG.A.isIframeInitialized()&&(nG.A.focus(),!0),onDismissOverflow:()=>{nG.A.focus()}};var nY=n(404621),nX=n(131281),nJ=n(844519),nZ=n(228997),nQ=n.n(nZ),n0=n(38329),n1=n(915440),n2=n(711525),n5=n(99380),n3=n(881388),n4=n(392592),n6=n(896474),n8=n(975350),n7=n(662275),n9=n(694517),ae=n(433861),at=n(493536),an=n(597642),aa=n(746830),ar=n(965626),ai=n(721047),al=n(227795),ao=n(862350),as=n(147755),ac=n(951792),ad=n(678738),au=n(717037),am=n(493323),ap=n(188276),a_=n(237870),ag=n(373494);let af=(0,a_.Ju)(function(e){let t=(0,r.wA)(),n=ao.hS(e),[i,o]=a.useState(""),s=a.useCallback(e=>{o(e.currentTarget.value)},[]),c=(0,as.X)(),[d,u]=a.useState(!1),m=async()=>{u(!0);let n=await aa.F.getUploadUrls(e.fileKey),a=e.recordedPositions.arrayBuffer().then(e=>{let t=new Uint8Array(e);return(0,au.ET)(l.FigmaTeam.WAYFINDING,"uploadWalkthroughPositionRecording",n.data.meta.position.url,n.data.meta.position.fields,t,"application/json")}),r=e.userMediaRecording.arrayBuffer().then(e=>{let t=new Uint8Array(e);return(0,au.ET)(l.FigmaTeam.WAYFINDING,"uploadWalkthroughMediaRecording",n.data.meta.media.url,n.data.meta.media.fields,t,"video/webm")}),[o,s]=await Promise.all([a,r]);t(ap.D({fileKey:e.fileKey,savepointID:e.fileVersionId,label:i,description:"async walkthrough"})),await aa.F.saveWalkthroughMedia(e.fileKey,e.fileVersionId,o,s,i,e.currentPage,e.firstPosition.x,e.firstPosition.y,e.isAudioOnly,e.lengthMs),t(n4.F.enqueue({message:(0,et.t)("recordings.recording_saved")})),t(n7.Lo()),e.onRecordingSaved()};return a.createElement(ac.bL,{manager:n,width:"md"},a.createElement(ad.vo,null,a.createElement(ad.Y9,null,a.createElement(ad.hE,null,(0,et.tx)("recordings.save_recording"))),a.createElement(ad.nB,null,a.createElement(Y.ks,{ref:c,name:"title",type:"text",className:ag._Z,placeholder:(0,et.t)("recordings.title_field_placeholder"),value:i,onChange:s})),a.createElement(ad.wi,null,a.createElement(ad.jk,null,a.createElement(Y.$$,{type:"submit",className:ag.pL,disabled:0===i.length,onClick:m},d?a.createElement(am.kt,{shouldMatchTextColor:!0}):(0,et.tx)("general.save"))))))},"SAVE_ASYNC_WALKTHROUGH_MODAL",a_.ZU.YES);var ah=n(683472),aE=n(335650),ay=n(548091),ab=n(113675),av=n(434228);function aC(e){return(0,av.O)()?a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6 5h2.5a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1M4 6a2 2 0 0 1 2-2h2.5a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2zm11.5-1H18a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-2.5a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1m-2 1a2 2 0 0 1 2-2H18a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-2.5a2 2 0 0 1-2-2z",clipRule:"evenodd"})):a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7 5h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1M5 6a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2zm10-1h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V6a1 1 0 0 1 1-1m-2 1a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2z",clipRule:"evenodd"}))}var aw=n(921211);function aT(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m9 16 3 3 1 1V4l-1 1-3 3H4.5a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5zm3.293-12.707L8.586 7H4.5A1.5 1.5 0 0 0 3 8.5v7A1.5 1.5 0 0 0 4.5 17h4.086l3.707 3.707A1 1 0 0 0 14 20v-1h.06H14V4a1 1 0 0 0-1.707-.707M16.1 18.68c-.304.095-.6-.143-.6-.462v-.02a.53.53 0 0 1 .372-.496 6.003 6.003 0 0 0 0-11.404.53.53 0 0 1-.372-.496v-.02c0-.319.296-.557.6-.461a7.003 7.003 0 0 1 0 13.359m.034-2.157c-.305.145-.634-.095-.634-.433v-.044c0-.203.125-.384.307-.476a4 4 0 0 0 0-7.14.54.54 0 0 1-.307-.476V7.91c0-.337.329-.577.634-.433a5 5 0 0 1 0 9.046m.044-2.46c-.265.28-.678.054-.678-.331v-.22c0-.122.047-.238.118-.336a1.99 1.99 0 0 0 0-2.351.6.6 0 0 1-.118-.337v-.22c0-.385.413-.61.678-.331A3 3 0 0 1 17 12c0 .8-.312 1.526-.822 2.063",clipRule:"evenodd"}))}var aS=n(259927),ax=n(973149);function ak(e){let{onPlay:t,onPause:n,onTimeUpdate:r}=e,i=a.useCallback(()=>{e.video&&e.video.pause(),n()},[e.video,n]),l=a.useCallback(()=>{e.video&&e.video.play(),t()},[e.video,t]),o=a.useCallback(t=>{e.video&&(e.video.currentTime=t),r()},[e.video,r]),s=a.useMemo(()=>e.isPlaying?a.createElement(S.K,{onClick:i,"aria-label":(0,et.t)("fullscreen.properties_panel.pause")},a.createElement(aC,null)):a.createElement(S.K,{onClick:l,"aria-label":(0,et.t)("fullscreen.properties_panel.pause")},a.createElement(aw.K,null)),[l,i,e.isPlaying]),c=e.video&&!isNaN(e.video.duration)?e.video.duration:e.lengthMs/1e3,d=a.useMemo(()=>new ax.f0(Number.POSITIVE_INFINITY,!1,!1),[]),[u,m]=a.useState(!1),[p,_]=a.useState(1),g=a.useCallback(t=>{if(!e.video)return;let n=parseFloat(t.target.value);_(n),e.video.volume=n},[e.video]);return a.createElement(a.Fragment,null,a.createElement("div",{className:"recording_video_controls--iconGroup--b52pU"},s,a.createElement(S.K,{onClick:()=>m(!u),"aria-label":(0,et.t)("fullscreen.properties_panel.volume")},a.createElement(aT,null)),u&&(()=>{let e=100*p+-16*p+8;return a.createElement("div",{className:"recording_video_controls--volumeSliderContainer--0oq-n"},a.createElement("input",{className:P()("recording_video_controls--volumeSlider--1xB-5",aS.Dm),type:"range",min:"0",max:"1",value:p,onInput:g,onChange:g,step:.02,style:{background:`linear-gradient(to top, var(--color-bg-brand) 0%, var(--color-bg-brand) ${e}%, var(--color-bg) ${e}%, var(--color-bg) 100%)`}}))})()),e.video?a.createElement(ab.A,{"aria-label":(0,et.t)("fullscreen.properties_panel.video_time"),value:e.currentVideoTime,min:0,max:e.video.duration,step:.01,bigStep:.1,onChange:o}):null,e.video?a.createElement("div",{className:"recording_video_controls--timestampContainer--eEV8y"},a.createElement("div",{className:"recording_video_controls--currentTime--IZSk-"},d.format(e.currentVideoTime)),a.createElement("div",{className:"recording_video_controls--timeSlash--oc9n4"},"/"),a.createElement("div",{className:"recording_video_controls--totalTime--rSunR"},d.format(c))):null)}let aN="recording_replay_focus_ui--horizontalBorder--zGACo",aI="recording_replay_focus_ui--verticalBorder--S7hWd",aA="recording_replay_focus_ui--invertedCorner--o-B-F";var aO=n(234024),aL=n(622711);let aD=(0,H.eU)([]);function aR(e){let[t,n]=a.useState(void 0),[i,l]=a.useState(void 0),[o,s]=a.useState(!1),[c,d]=a.useState(!1),[u,m]=a.useState(!1),[p,_]=a.useState(!0),[g,f]=a.useState(0),h=a.useRef(null),E=a.useRef(void 0),y=a.useRef(n0.D.getState().mirror.appModel.showUi),b=a.useRef(!n0.D.getState().mirror.appModel.hideMultiplayerCursors),v=(0,eE._6)(),C=(0,r.wA)(),w=a.useContext(n5.q5),T=e.recording.id===at.xP,[S,x]=(0,z.fp)(aD),k=(0,eg.q5)();a.useEffect(()=>{y.current&&t$.Y5.triggerAction("toggle-ui"),b.current&&t$.Y5.triggerAction("toggle-multiplayer-cursors"),T?m(!0):(C((0,n9._b)({type:n9.wk.Recording})),d(!0))},[C,T]),a.useEffect(()=>{if(e.recording&&c){if(e.recording.fileVersionId.status===n2.tT.Loaded){let t=e.recording.fileVersionId.data,n=S.find(e=>e.id===t);n?(C((0,n9.Nb)({id:t,versions:[n]})),m(!0)):an.W.getVersion({fileKey:e.recording.fileKey,versionId:e.recording.fileVersionId.data}).then(e=>{x(S.concat(e.data.meta.version))}).catch(()=>{C(n3.s.error((0,et.t)("recordings.replay_ui_canvas_loading_error")))})}else m(!0)}},[c,e.recording,C,S,x]),a.useEffect(()=>()=>{m(!1),n(void 0),l(void 0),s(!0),_(!0),f(0),E.current&&(clearInterval(E.current),E.current=void 0)},[e.recording.id,k]),a.useEffect(()=>{e.recording&&fetch(e.recording.positionInfoSignedUrl).then(e=>e.arrayBuffer()).then(e=>{let t=new Uint8Array(e);n(JSON.parse(new TextDecoder().decode(t)))})},[e.recording]);let N=a.useCallback(()=>{if(!h.current||!t)return;let e=1e3*h.current.currentTime,n=nQ()(t,{...at.rv,msSinceRecordingStart:e},e=>e.msSinceRecordingStart);n>=t.length&&(n=t.length-1),l(t[n])},[t]),I=a.useCallback(()=>{E.current=setInterval(N,at.c6),s(!0)},[N]),A=a.useCallback(()=>{clearInterval(E.current),E.current=void 0,s(!1)},[]),O=a.useCallback(()=>{h.current&&(f(h.current.currentTime),N())},[N]),L=a.useCallback(()=>{T?w.abortRecording():(C((0,n9.Eg)()),y.current&&t$.Y5.triggerAction("toggle-ui"),b.current&&t$.Y5.triggerAction("toggle-multiplayer-cursors"),C(n8.UU()));let e={...v,walkthroughRecordingId:void 0};C((0,eo.$T)(e))},[C,v,w,T]),D=a.useCallback(()=>{T||(aa.F.deleteWalkthroughMedia(e.recording.id).then(()=>{C(n4.F.enqueue({message:(0,et.t)("recordings.recording_deleted")}))}),(0,aE.$F)(k,aE.ed.DELETED,e.recording.id)),L()},[C,T,e.recording.id,L,k]),R=a.useCallback(()=>{C((0,n7.to)({type:ah.p,data:{onConfirm:D}}))},[C,D]),M=a.useCallback(()=>{T?R():L()},[L,R,T]),P=a.useRef(null);return t&&u?a.createElement(a.Fragment,null,a.createElement("div",{className:"recording_replay_focus_ui--container--mnVy4"},a.createElement("div",{className:aN}),a.createElement(ng.vx,{initialPosition:new nl.Mi(26,76),initialConstraints:{x:"left",y:"bottom"}},a.createElement("div",{className:e.recording.meta.audioOnly?"recording_replay_focus_ui--audioOnlyContainer--WUXCP":"recording_replay_focus_ui--videoContainer--IQLLd"},a.createElement("video",{className:e.recording.meta.audioOnly?"recording_replay_focus_ui--audio--Z5Gby":"recording_replay_focus_ui--video--sHfm6",src:e.recording.userMediaSignedUrl,autoPlay:!0,controls:!1,onPlay:I,onPause:A,onTimeUpdate:O,ref:h}))),a.createElement(aK,{recording:e.recording,onClose:M,openDeleteConfirmationModal:R}),a.createElement("div",{className:"recording_replay_focus_ui--centerContainer--lOLAW"},a.createElement("div",{className:aI}),a.createElement("div",{className:"recording_replay_focus_ui--viewportContainer--EYq-7",ref:P},a.createElement("div",{className:"recording_replay_focus_ui--centerInfoBox--ukCZp"},a.createElement(Q.B,{svg:aO.A,className:aA}),a.createElement("div",{className:"recording_replay_focus_ui--followingInfoBox--NPeez"},a.createElement("div",{className:"recording_replay_focus_ui--followingInfoBorderOffset--5fEDC"},a.createElement("div",{className:"recording_replay_focus_ui--followingUserText--bGWg7"},(0,et.tx)(p?"recordings.following_name":"recordings.not_following_name",{name:e.recording.creator.handle})),a.createElement("button",{onClick:()=>_(!p),className:"recording_replay_focus_ui--followingButton--irarm"},(0,et.tx)(p?"recordings.stop_following":"recordings.follow")))),a.createElement(Q.B,{svg:aL.A,className:aA}))),a.createElement("div",{className:aI})),a.createElement("div",{className:"recording_replay_focus_ui--bottomBar--bt2XX"},a.createElement("div",{className:aI}),a.createElement("div",{className:"recording_replay_focus_ui--recordingControls--EuG0k"},a.createElement(ak,{onPause:A,onPlay:I,onTimeUpdate:O,video:h.current,isPlaying:o,currentVideoTime:g,lengthMs:e.recording.meta.lengthMs.status===n2.tT.Loaded?e.recording.meta.lengthMs.data:0}),e.recording.id===at.xP&&a.createElement(aB,{openDeleteConfirmationModal:R,onCloseConfirmed:L})),a.createElement("div",{className:aI})),a.createElement("div",{className:aN})),a.createElement(aU,{replayPosition:i,isFollowingViewport:p,setIsFollowingViewport:_,viewportDivRef:P}),a.createElement(aG,{recording:e.recording,replayPosition:i,isReplayPlaying:o})):null}function aM(e){return e.recordingId===at.xP?a.createElement(aP,null):a.createElement(aF,{recordingId:e.recordingId})}function aP(){let e=a.useContext(n5.q5),t=(0,ey.iZ)(),n=e.getRecordingDataForSinatraCreate(),r=a.useMemo(()=>n&&t?{fileKey:n.fileKey,positionInfoSignedUrl:URL.createObjectURL(n.recordedPositions),userMediaSignedUrl:URL.createObjectURL(n.userMediaRecording),id:at.xP,fileVersionId:{status:n2.tT.Loaded,data:n.fileVersionId},creator:{id:t.id,handle:t.handle,imgUrl:t.img_url},meta:{title:"",audioOnly:n.isAudioOnly,lengthMs:{status:n2.tT.Loaded,data:n.lengthMs}}}:null,[n,t]);return r?a.createElement(aR,{recording:r}):null}function aF(e){let t=(0,n1.Rs)(eX.hzQ,{id:e.recordingId}),n="loaded"===t.status&&t.data.walkthroughMedia;return n?a.createElement(aR,{recording:n}):null}function aB(e){let t=(0,r.wA)(),n=a.useContext(n5.q5).getRecordingDataForSinatraCreate(),i=(0,eg.q5)(),l=()=>{(0,aE.Q3)(i,aE.ZP.RECORDING_SAVED),e.onCloseConfirmed()};return n?a.createElement("div",{className:"recording_replay_focus_ui--newRecordingBottomControls--28MRy"},a.createElement(S.K,{onClick:e.openDeleteConfirmationModal,"aria-label":(0,et.t)("recordings.delete_recording_title")},a.createElement(nJ.i,{className:"recording_replay_focus_ui--icon---MLcx"})),a.createElement(eM.$n,{onClick:()=>{n&&t((0,n7.to)({type:af,data:{...n,onRecordingSaved:l}}))}},(0,et.tx)("recordings.save_recording"))):null}function aU(e){let t=a.useContext(ae.kw),n=a.useRef(!1),{setIsFollowingViewport:r}=e;return a.useEffect(()=>{let t=()=>{r(!1)},a=t=>{if(!e.viewportDivRef.current)return;let a={x:t.clientX,y:t.clientY},r=e.viewportDivRef.current.getBoundingClientRect();(0,nl.gR)(r,a)&&(n.current=!0)},i=()=>{n.current=!1},l=()=>{n.current&&(r(!1),n.current=!1)},o=e.isFollowingViewport;return o&&(document.addEventListener("wheel",t),document.addEventListener("mousedown",a),document.addEventListener("mouseup",i),document.addEventListener("mousemove",l)),()=>{o&&(document.removeEventListener("wheel",t),document.removeEventListener("mousedown",a),document.removeEventListener("mouseup",i),document.removeEventListener("mousemove",l))}},[e.isFollowingViewport,r,e.viewportDivRef]),a.useEffect(()=>{!e.replayPosition||!e.isFollowingViewport||(0,at.s0)(t.getViewportInfo(),e.replayPosition.viewportPath,1)||t.navigateTo({x:e.replayPosition.viewportPath.offsetX,y:e.replayPosition.viewportPath.offsetY},e.replayPosition.viewportPath.zoomScale,{duration:0,delay:0})},[e.replayPosition,e.isFollowingViewport,t]),null}function aG(e){let t=(0,ai.b)(),n=a.useCallback(e=>{t.moveCursorBot({x:e.x,y:e.y,coordinateType:"canvas",animationDuration:0})},[t]);a.useEffect(()=>{e.replayPosition&&n({x:e.replayPosition.mousePositionPath.x,y:e.replayPosition.mousePositionPath.y})},[n,e.replayPosition]);let r=a.useCallback(()=>{e.replayPosition&&n({x:e.replayPosition.mousePositionPath.x,y:e.replayPosition.mousePositionPath.y})},[n,e.replayPosition]);return(0,nu.D6)({subscribeToUpdates_expensive:!e.isReplayPlaying},r),a.createElement(ar.Yh,{manualControl:!0,name:e.recording.creator.handle})}function aK(e){let t=(0,ey.iZ)(),n=(0,ay.aW)(),r=a.useRef(null),i="context"+e.recording.id,l=(0,ep.BK)(i),o=(0,eg.q5)(),{onClose:s,openDeleteConfirmationModal:c}=e,d=e.recording.id===at.xP,u=a.useMemo(()=>{let n=[];return t&&e.recording.creator.id===t.id&&e.recording.id!==at.xP&&n.push(a.createElement(q.c$,{key:"delete",onClick:c},(0,et.tx)("recordings.delete_recording_title"))),n},[t,e.recording.creator,c,e.recording.id]),m=a.useCallback(()=>{n(e.recording.id),(0,aE.$F)(o,aE.ed.LINK_COPIED,e.recording.id)},[n,e.recording.id,o]);return a.createElement("div",{className:"recording_replay_focus_ui--headerRow--Q62zp"},a.createElement("div",{className:aI}),a.createElement("div",{className:"recording_replay_focus_ui--header--zTtko"},a.createElement("div",null,e.recording.meta.title),a.createElement("div",{className:"recording_replay_focus_ui--headerButtonGroup--Jn6a-"},u.length>0&&a.createElement("div",null,a.createElement(al.YW,{style:l.showing?{backgroundColor:"var(--color-bg-hover)"}:void 0,selected:l.showing,"data-tooltip-type":eS.Ib.TEXT,"data-tooltip":(0,et.t)("fig_feed.more_actions"),onClick:l.toggle,ref:r},a.createElement(n6.In,{icon:"dots-32"})),r.current&&l.showing&&a.createElement(eI.Jz,{showPoint:!1,targetRect:r.current.getBoundingClientRect(),options:u,closeDropdown:l.hide,hideDropdown:l.hide})),!d&&a.createElement(S.K,{onClick:m,"aria-label":(0,et.t)("recordings.copy_link")},a.createElement(n6.In,{icon:"hyperlink-32"})),a.createElement(S.K,{onClick:s,"aria-label":(0,et.t)("general.close")},a.createElement(n6.In,{icon:"x-32"})))),a.createElement("div",{className:aI}))}function aV(){let e=(0,r.d4)(e=>e.selectedView),t=(0,eg.tS)(),n=(0,r.d4)(e=>e.progressBarState.mode),l=(0,r.d4)(e=>(0,tW.pi)({editorType:tj.d1(e)?.editor_type})),u=n!==o.Oin.HIDE_UI&&n!==o.Oin.ON_AND_LOCKED,m=(0,eg.q5)(),p=(0,nT.jY)(),b=(0,tZ.BI)(),v=(0,eC.ut)(o.Ez5?.slidesToolMode(),o.EMA.SLIDES),C=(0,eC.ut)(o.Ez5?.cooperToolMode(),o.iN$.COOPER);(0,a.useEffect)(()=>(document.body.dataset.editorTheme=(0,t2.ju)(e,v,C),()=>{delete document.body.dataset.editorTheme}),[e,v,C]),(0,ec.Ou)(),(0,ec.fq)(),(0,tV.c)(),function(){let e="ui3"===(0,tH.DP)().version,{isPropertiesPanelCollapsed:t,setPropertiesPanelCollapsed:n}=(0,tz.iT)(),i=(0,ek.Ye)(),l=(0,f.ow)(),s=(0,e_.ax)(),c=(0,e_.dH)(),d=c===o.NLJ.FRAME||c===o.NLJ.COMMENTS||c===o.NLJ.VECTOR_PENCIL,u=(0,r.d4)(e=>e.mirror.appModel.activeUserAction===o.QOV.DEFAULT),m=(0,tz.ys)();(0,a.useEffect)(()=>{e&&u&&!l&&t&&(d||s)&&n(!1)},[s,u,c,e,n,t,i,d,l]),(0,a.useEffect)(()=>{m&&n(!0)},[m,n,t])}(),(0,es.V)(),(0,a.useEffect)(()=>{u&&t&&p&&(t$.Y5.onReady().then(()=>{o.h3O.sendSignal("client-rendered","")}),window.requestAnimationFrame(()=>{s.eD?.addTabAnalyticsMetadata({reactFullscreenViewRenderTime:window.performance.now()}),tX.xK.reactFullscreenViewIsRendered(),tX.xK.report(t,l),function(){let e=(0,tY.dX)("fullscreen");if(!e)return;let t=(0,tq.ap)()?e.getContext("webgl2"):e.getContext("webgl");if(!t||!window.expectedWebGLContextAttributes)return;let n=t.getContextAttributes();if(!n)return;let a=o.CeL?.getDeviceInfo()??{vendor:"",renderer:"",version:""},r={};for(let e of Object.keys(n))r[`actual_${e}`]=n[e];let i={},l=!0;for(let e of Object.keys(window.expectedWebGLContextAttributes))n[e]!==window.expectedWebGLContextAttributes[e]&&(l=!1),i[`expected_${e}`]=window.expectedWebGLContextAttributes[e];let s={...r,...i,...a,are_context_attributes_correct:l};(0,B.sx)("fullscreen_load_gpu_parameters",s)}()}))},[u,t,l,p]);let w=(0,r.d4)(e=>e.isFullscreenDocumentLoaded);(0,a.useEffect)(()=>{b?.handleCompleteInitialLoad&&w&&b.handleCompleteInitialLoad()},[b,w]);let[T,S]=(0,a.useState)(!1),x=(0,r.d4)(e=>e.mirror.appModel.isReadOnly);(0,a.useEffect)(()=>{b?.updateReadOnly&&w&&!T&&(S(!0),b.updateReadOnly(x))},[b,w,T,S,x]);let k=(0,c.ZC)(m),N=(0,r.d4)(e=>e.mirror.appModel.pagesList),I=(0,a.useMemo)(()=>N.map(e=>({id:e.nodeId,name:e.name})),[N]),A=(0,c.ZC)(I),O=(0,r.d4)(e=>e.mirror.appModel.currentPage),L=(0,c.ZC)(O);(0,a.useEffect)(()=>{b?.updatePages&&m&&(!k||m.key!==k.key||m.name!==k.name||m.editorType!==k.editorType||m.isTryFile!==k.isTryFile||!(0,i.deepEquals)(I,A)||O!==L)&&b.updatePages({fileKey:m.key,fileName:m.name,editorType:m.editorType,isTryFile:m.isTryFile,pages:I.length>0?I:[{id:O,name:"Page 1"}],currentPageId:O})},[b,m,k,I,A,O,L]);let D=(0,tQ.WC)();(0,a.useEffect)(()=>{b?.updateWebOverlaysShown&&b.updateWebOverlaysShown(D)},[b,D]);let R=(0,t1.o3)(t1.nt.customKeyboardShortcuts);(0,a.useEffect)(()=>{(0,d.kc)().ce_custom_keyboard_shortcuts&&o.glU.reloadKeyboardShortcuts()},[R]);let M=(0,r.d4)(e=>e.multiplayer.allUsers),P=(0,r.d4)(e=>e.multiplayer.observingSessionID),F=(0,r.d4)(e=>e.multiplayer.presenterSessionID),U=(0,r.d4)(e=>e.multiplayer.deviceNameFilter),G=(0,r.d4)(e=>e.multiplayer.sessionID),K=(0,a.useMemo)(()=>{let{users:e}=(0,t0.Yp)(M,null,!1,1048576,{sessionID:G,observingSessionID:P,presenterSessionID:F,deviceNameFilter:U});return{sessionID:G,observingSessionID:-1!==P?P:null,presenterSessionID:-1!==F&&F||null,users:e}},[M,U,P,F,G]),V=(0,c.ZC)(K);return(0,a.useEffect)(()=>{b?.updateMultiplayerUserInfo&&!(0,i.deepEquals)(V,K)&&b.updateMultiplayerUserInfo(K)},[b,K,V]),(0,t5.iA)(),!function(){let e=(0,_.U4)(),t=(0,_._I)(),n=(0,g.D)(),r=(0,E.ks)(),i=(0,f.ow)(),l=(0,y.U)("permission",!0),s=r&&!t&&!e&&!(0,h.T)();(0,a.useEffect)(()=>{i||(o.w3z.setCanAccessDevMode(t),o.w3z.setCanEnterDevMode(e),o.w3z.setShowWorkflowsControls(n))},[t,e,n,i]),(0,a.useEffect)(()=>{s&&l("design")},[l,s])}(),null}function aH({children:e}){let t=(0,r.d4)(t3.xY),n=(0,r.d4)(e=>e.mirror.appModel.currentPage),i=(0,C.l7)(),o=(0,b.er)(),s=(0,p.HQ)(),c=(0,r.d4)(e=>e.selectedView),_=(0,r.d4)(e=>e.isFullscreenDocumentLoaded);return a.createElement(a.Fragment,null,_&&(0,d.kc)().async_spotlight&&"fullscreen"===c.view&&c.walkthroughRecordingId?a.createElement(aM,{recordingId:c.walkthroughRecordingId}):e??null,a.createElement(aV,null),t&&a.createElement(nP,{viewerControl:nq,pageId:n}),(0,d.kc)().livefish&&(0,d.kc)().sites&&a.createElement(nY.S,null),(0,d.kc)().livefish&&a.createElement(nX.b,null),i&&a.createElement(u.tH,{boundaryKey:"DevModeOverview",fallback:u.H4.DEFAULT_FULL_PAGE,sentryTags:{area:l.FigmaTeam.DEVELOPER_TOOLS},hasCustomWASMBuild:tJ.y4},a.createElement(tO,null)),o&&a.createElement(u.tH,{boundaryKey:"DevModeVariablesTable",fallback:u.H4.DEFAULT_FULL_PAGE,sentryTags:{area:l.FigmaTeam.DEVELOPER_TOOLS},hasCustomWASMBuild:tJ.y4},a.createElement(v.s,null)),s&&a.createElement(u.tH,{boundaryKey:"Dakota",fallback:u.H4.DEFAULT_FULL_PAGE,sentryTags:{area:l.FigmaTeam.CMS},hasCustomWASMBuild:tJ.y4},a.createElement(m.e4,null)))}},4051:(e,t,n)=>{n.d(t,{n:()=>r});var a=n(587670);let r=(0,n(288706).um)(!1,(e,t)=>{switch(t.type){case"ACTIVATE_AND_MAXIMIZE":return a.glU.setActiveEmbed(t.payload.embedNodeID),!0;case"MINIMIZE":return!1;default:return e}})},344076:(e,t,n)=>{n.d(t,{GR:()=>I,bu:()=>N});var a=n(411855),r=n(188507),i=n(587670),l=n(534611),o=n(91408),s=n(323762),c=n(966712),d=n(374626),u=n(646240),m=n(939863),p=n(145519),_=n(74505),g=n(457630),f=n(100197),h=n(498606),E=n(4051),y=n(488578),b=n(519048),v=n(677859),C=n(774658);function w(){let e=(0,u.Xr)(E.n),t=a.useCallback(()=>{e({type:"MINIMIZE"})},[e]);return a.createElement(v.K0,{svg:C.A,active:"NONE",tooltip:(0,m.t)("whiteboard.embeds.inline_menu.minimize"),onClick:t,recordingKey:"embedMinimizeControl"})}var T=n(929021),S=n(837746);function x(e){let t=e.mirror.sceneGraph,n=e.mirror.sceneGraphSelection;if(1!==Object.keys(n).length)return null;let a=t.get(Object.keys(n)[0]);return a&&"WIDGET"===a.type?a:null}function k(e){return e.mirror.sceneGraph.get(e.mirror.appModel.hoveredNode)}let N=a.memo(function(){let e=(0,r.d4)(k),t=e?.guid,[n,o]=a.useState(null),s=a.useMemo(()=>t&&t!==l.AD?i.glU.getEmbedTypeOfTooltipIcon(t):null,[t]);a.useEffect(()=>{if(!s||!t){o(null);return}let e=(0,_.EE)("embed-tooltip",[t],e=>{o(e?.position||null)});return o(e.currentNodePosition&&e.currentNodePosition[t]?.position||null),()=>{(0,_.lB)("embed-tooltip")}},[t,s]);let c=!!s&&!!n,d=(0,g._X)({subscribeToUpdates_expensive:c}),u=a.useMemo(()=>{if(!n)return{};let e=(0,g.Yb)(d,n),t=e.x+d.x,a=e.y+d.y;return{height:n.height,width:n.width,transformOrigin:"top left",position:"fixed",transform:`translate(${t}px, ${a}px) rotate(${n.angle}deg) scale(${d.zoomScale})`}},[d,n]);return c?a.createElement("div",{"data-tooltip-type":h.Ib.TEXT,"data-tooltip":"video"===s||"autoplayable_video"===s?(0,m.t)("whiteboard.embeds.tooltip_help_text.video"):"audio"===s||"autoplayable_audio"===s?(0,m.t)("whiteboard.embeds.tooltip_help_text.audio"):"file"===s||"figma"===s?(0,m.t)("whiteboard.embeds.tooltip_help_text.file"):(0,m.t)("whiteboard.embeds.tooltip_help_text.generic"),"data-tooltip-show-above":!0,"data-tooltip-max-width":160,"data-tooltip-timeout-delay":50,"data-tooltip-show-immediately":!0,style:u}):null}),I=a.memo(function(){let e=(0,f.J2)(i.Ez5.embedUiState().activeEmbedData),t=(0,r.d4)(e=>e.mirror.appModel.currentPage?e.mirror.appModel.currentPage:void 0),n=(0,r.d4)(x),l=(0,d.md)(E.n),o=!!e&&n?.guid===e.embedNodeId;return e&&e.embedNodeId&&e.embedThumbnailNodeId&&e.srcUrl&&e.containingCanvasId&&e.containingCanvasId===t?(0,c.kc)().figjam_embeds_allowlist&&!(0,s.Cy)(e.srcUrl)?(console.error("Could not play embed; domain not on allow-list:",e.srcUrl),null):a.createElement(A,{isEmbedMaximized:l,nodeSelected:o,embedThumbnailNodeId:e.embedThumbnailNodeId,srcUrl:e.srcUrl}):null}),A=a.memo(function(e){let{embedThumbnailNodeId:t,nodeSelected:n,srcUrl:r,isEmbedMaximized:l}=e,o=a.useRef(null),s=a.useRef(null),c=a.useRef(null),d=a.useRef(null),u=(0,g._X)({subscribeToUpdates_expensive:!0}),m=function(e,t){let[n,r]=a.useState(!1),[i,l]=a.useState(!1);return a.useEffect(()=>{!e&&i&&l(!1)},[e,i]),a.useEffect(()=>{function e(e){if(t.current){let n=t.current.getBoundingClientRect();e.clientX>n.left&&e.clientX<n.right&&e.clientY>n.top&&e.clientY<n.bottom&&r(!0)}}function a(e){if(t.current&&n){r(!1);let n=t.current.getBoundingClientRect();e.clientX>n.left&&e.clientX<n.right&&e.clientY>n.top&&e.clientY<n.bottom&&l(!0)}}return document.addEventListener("pointerdown",e),document.addEventListener("pointerup",a),()=>{document.removeEventListener("pointerdown",e),document.removeEventListener("pointerup",a)}},[n,t]),i||!n&&e}(n,s);return a.useEffect(()=>{let e=(0,_.EE)("active-embed",[t],e=>{if(!e.position){i.glU.setActiveEmbed("");return}d.current=e.position,D(s,u,d,c,l,m)}),n=e.currentNodePosition[t]?.position;return n?(d.current=n,D(s,u,d,c,l,m)):i.glU.setActiveEmbed(""),()=>{(0,_.lB)("active-embed")}},[t,l,m,u]),a.createElement(a.Fragment,null,a.createElement("div",{className:l?"embed_overlay--maximizedIframePositioner--BvF7x":void 0,ref:s},a.createElement(L,{ref:o,key:t+r,srcUrl:r,autofocus:m})),l&&a.createElement(O,{modalTargetRef:c}))});function O(e){let t=(0,u.Xr)(E.n),{modalTargetRef:n}=e,r=()=>{t({type:"MINIMIZE"})};return a.createElement(y.Nb,{className:"embed_overlay--embedModal--NmRO5",hide:r,disableClickOutsideToHide:!1,disableKeyboardEventPropagation:!0},a.createElement("div",{className:"embed_overlay--embedModalMenuBackground--xwJaH",onMouseDown:r},a.createElement("div",{className:"embed_overlay--embedModalMenuContainer--03E8r",onMouseDown:e=>e.stopPropagation()},a.createElement(v.W1,{testID:"embedMenu"},a.createElement(T.e,{inModal:!0}),a.createElement(w,null),a.createElement(v.wv,null),a.createElement(b.S,{inModal:!0})))),a.createElement("div",{className:"embed_overlay--embedModalContentContainer--jP-31"},a.createElement("div",{ref:n,className:"embed_overlay--embedModalTarget--hxGi-"})))}let L=a.forwardRef(function(e,t){let n=(0,r.wA)(),[l,o]=a.useState(!1),s=a.useRef(null),{srcUrl:c,autofocus:d}=e;return a.createElement("div",{className:"embed_overlay--loadingIFrameContainer--FIfGE"},!l&&a.createElement("div",{className:"embed_overlay--iframeLoadingPlaceholder--uAVFk"}),a.createElement("iframe",{key:c,ref:t||s,"data-embed-iframe":!0,className:`embed_overlay--iframe--FcmB0${l?"":" embed_overlay--iframeHidden--xwbj9"}`,src:c,onLoad:()=>{let e=t&&t.current||s.current;e&&d&&e.focus(),o(!0)},onMouseOver:()=>{i.h3O?.sendChatMessage("",""),n(p.Ho())},frameBorder:"0",allowFullScreen:!0,title:(0,m.t)("whiteboard.embeds.embed_overlay_iframe_title")}))});function D(e,t,n,a,r,i){if(!e.current||!t||!n.current)return;let l=e.current,o=n.current;if(r){if(!a.current)return;let e=a.current.getBoundingClientRect();l.style.position="fixed",l.style.height=`${e.height}px`,l.style.width=`${e.width}px`,l.style.transform=`translate(${e.x}px, ${e.y}px)`,l.style.pointerEvents="all"}else{let e=(0,g.Yb)(t,o);l.style.position="fixed",l.style.height=`${o.height}px`,l.style.width=`${o.width}px`,l.style.transform=`translate(${e.x+t.x}px, ${e.y+t.y}px) rotate(${o.angle}deg) scale(${t.zoomScale})`,l.style.transformOrigin="top left",i?l.style.pointerEvents="all":l.style.pointerEvents="none"}}(0,o.hG)(S.tui)},54900:(e,t,n)=>{n.d(t,{_:()=>d});var a=n(411855),r=n(587670),i=n(163023),l=n(396719),o=n(74505),s=n(457630),c=n(60815);let d=a.memo(function(e){let{nodeId:t}=e,n=a.useRef(null),i=a.useRef(null),l=(0,s._X)({subscribeToUpdates_expensive:!0});return a.useEffect(()=>{let e=(0,o.EE)(`loading-embed-${t}`,[t],e=>{if(!e.position){r.glU.removeLoadingEmbed(t);return}i.current=e.position,m(n,l,i)}),a=e.currentNodePosition[t]?.position;return a?(i.current=a,m(n,l,i)):r.glU.removeLoadingEmbed(t),()=>{(0,o.lB)(`loading-embed-${t}`)}},[t,l]),a.createElement("div",{ref:n},a.createElement(u,null))});function u(){return a.createElement("span",{className:"loading_embed_overlay--root--UKqJ8"},a.createElement(i.B,{svg:c.A,className:"loading_embed_overlay--spinner--bw3Cv",autosize:!0}))}function m(e,t,n){if(!e.current||!t||!n.current)return;let a=e.current,r=n.current,i=(0,s.Yb)(t,r),o=28*t.zoomScale;a.style.transform=`translate(${i.x+(i.width-o)/2+t.x}px, ${i.y+(i.height*l.Ao/l.RN-o)/2+t.y}px) rotate(${r.angle}deg) scale(${t.zoomScale})`,a.style.transformOrigin="top left",a.style.position="absolute"}},173101:(e,t,n)=>{n.d(t,{U:()=>u});var a=n(411855),r=n(188507),i=n(587670),l=n(931828),o=n(356390),s=n(114716),c=n(309798);let d=(0,n(479296).D)(()=>o.Y5.fromFullscreen);function u(e,t){let n=(0,r.wA)(),o=(0,c.f)(e),u=(0,s.g)();a.useEffect(()=>{t?.current||o||!u||i.glU.setUsedPanAction(!1)},[u,o,t]),a.useEffect(()=>{if(!(o||t?.current))return d().on("panActionMessageForOnboarding",a),()=>{d().removeListener("panActionMessageForOnboarding",a)};function a(){n(l.b({[e]:!0}))}},[o,n,e,t])}},600907:(e,t,n)=>{n.d(t,{g:()=>u});var a=n(411855),r=n(188507),i=n(587670),l=n(931828),o=n(356390),s=n(114716),c=n(309798);let d=(0,n(479296).D)(()=>o.Y5.fromFullscreen);function u(e,t){let n=(0,r.wA)(),o=(0,c.f)(e),u=(0,s.g)();a.useEffect(()=>{t?.current||o||!u||i.glU.setUsedZoomAction(!1)},[u,o,t]),a.useEffect(()=>{if(!(o||t?.current))return d().on("zoomActionMessageForOnboarding",a),()=>{d().removeListener("zoomActionMessageForOnboarding",a)};function a(){n(l.b({[e]:!0}))}},[o,n,e,t])}},212478:(e,t,n)=>{n.d(t,{Jg:()=>V,xn:()=>F});var a=n(411855),r=n(188507),i=n(634832),l=n(842700),o=n(629019),s=n.n(o),c=n(966712),d=n(374626),u=n(153234),m=n(522739),p=n(776621),_=n(268537),g=n(46481),f=n(939863),h=n(483990),E=n(226055),y=n(728325),b=n(855418),v=n(318812),C=n(234945),w=n(498606),T=n(279145),S=n(855466),x=n(666258),k=n(298543),N=n(947968),I=n(882643),A=n(157147),O=n(136297),L=n(405206),D=n(187409);function R(e){return`flyout-dropdown-${e}`}let M=e=>{switch(e){case"move-flyout":return(0,f.t)("fullscreen.flyout.move_tools");case"region-flyout":return(0,f.t)("fullscreen.flyout.region_tools");case"pen-flyout":return(0,f.t)("fullscreen.flyout.drawing_tools");case"shape-flyout":return(0,f.t)("fullscreen.flyout.shape_tools");case"boolean-flyout":return(0,f.t)("fullscreen.flyout.boolean_groups");case"styles-flyout":return(0,f.t)("fullscreen.flyout.styles");case"symbol-flyout":return(0,f.t)("fullscreen.flyout.components");case"prototype-view-flyout":return(0,f.t)("fullscreen.flyout.prototype_view");default:return""}};function P(e,t,n){let r,i,o;if("currentTool"===e){let e=(0,b.LW)(t);r=(0,b.SD)(t),o=i=e?.ui3Icon||a.createElement(l.V,null)}else{let e=(0,b.bs)(n);r=(0,b.Yy)(n),i=e?.ui3Icon||a.createElement(l.V,null),o=b.bs(n)?.ui3FlyoutIcon??i}return{icon:r,ui3Icon:i,ui3FlyoutIcon:o}}function F(e){let[t,n]=a.useState(null),l=(0,v.Um)(),o=(0,r.wA)(),c=(0,E.GS)(),d=a.useCallback(()=>{n(null)},[]);a.useEffect(()=>(u.y6(d),()=>u.nS(d)));let _=(e,t)=>e&&t?e.action===t.action:!e&&!t,f=(0,r.d4)(t=>e.item.children.find(e=>{if((0,A.Zk)(e)){let n=e.property&&t.mirror.appModel[e.property]===e.propertyValue,a=e.isActive&&e.isActive(t);return n||a}return!1}),_),h=(0,r.d4)(n=>{let a=e.item.children.find(e=>(0,A.Zk)(e)&&(0,T.Yh)(n.mirror.appModel,e.action));return"symbol-flyout"===e.item.name?a:f||(t&&(0,T.Yh)(n.mirror.appModel,t.action)?t:a)},_),b=(0,r.d4)(e=>!!h&&(0,T.Yh)(e.mirror.appModel,h.action));if(!h)return null;b||(0,p.x1)("FlyoutView",`Expected defaultItem with action ${h.action} to be enabled`);let C=!!f&&!(0,T.TY)(l)&&!e.disabled&&e.styleActiveItem,x=l?.type===R(e.item.name),k=P(h.property,h.propertyValue,h.action);(0,i.assertDev)(null!==k.icon,"No icon for tool or action");let N=!0;if(x){for(let t of e.item.children)if((0,A.Zk)(t)&&(void 0!==t.property||void 0!==t.isActive)){N=!1;break}}let L=e.item.name===I.MR,F=a.createElement(I.$0,{item:e.item,defaultItem:h,dropdownKey:R(e.item.name),tooltipText:M(e.item.name),additionalDispatchData:{items:e.item.children},recordingKey:e.recordingKey,disabled:e.disabled}),U=a.createElement("div",{className:s()(c?D.fullHeightSidebarFlyout:D.flyout,(0,O.M)(!0,C),x?D.flyoutDropdownShown:null),"data-tooltip-type":w.Ib.LOOKUP,"data-tooltip":h.action,"data-onboarding-key":e.item.onboardingKey,"data-testid":h.action},a.createElement(m.D8,{className:c?D.fullHeightSidebarFlyoutButton:D.flyoutButton,recordingKey:u.Pt(e.recordingKey,"default",h.recordingKey),onMouseDown:y.VU.get(h.action,"toolbar")},k&&k.icon&&a.createElement(g.U,{svg:k.icon},k.ui3FlyoutIcon)),a.createElement(S.c,{svgContainerClassName:D.chevron,dispatch:o,showingDropdown:x,dropdownKey:R(e.item.name),tooltipText:M(e.item.name),additionalDispatchData:{items:e.item.children},recordingKey:u.Pt(e.recordingKey,"chevron"),dataTestId:`${e.item.name}-chevron`,rcsHandlerId:"flyout_dropdown_opened",dataOnboardingKey:e.item.name,isUI3:c,className:s()({[D.fullHeightSidebarFlyoutChevron]:c,[D.fullHeightSidebarFlyoutDropdownShown]:c&&x})}));return a.createElement("div",null,L?F:U,x&&a.createElement(B,{item:e.item,onFlyoutItemClick:(e,t)=>{n(e);let a=e.actionOnFlyoutItemClick??e.action;y.VU.get(a,"toolbar")(t)},hideCheck:N,recordingKey:e.recordingKey}))}function B(e){let t=(0,r.d4)(e=>e.dropdownShown),n=(0,E.GS)(),i=(0,d.md)(x.oO);if(!t||!t.data?.targetRect)return a.createElement(a.Fragment,null);let l=e.item.flyoutShowItemIcons||void 0===e.item.flyoutShowItemIcons;return a.createElement(k.Cf,{targetRect:n&&"prototype-view-flyout"===e.item.name?{top:t.data.targetRect.top,right:t.data.targetRect.right,bottom:t.data.targetRect.bottom+(n?4:0),left:t.data.targetRect.left-91,width:t.data.targetRect.width,height:t.data.targetRect.height}:t.data.targetRect,className:e.item.largeDisplayMode?D.largeDisplayDropdown:D.pointingDropdown,showPoint:!n,propagateCloseClick:!0,orientation:e.item.largeDisplayMode?"horizontal":"vertical",type:e.item.largeDisplayMode?k.it.MATCH_BACKGROUND:k.it.DEFAULT,footer:e.item.footer},t.data?.items&&t.data.items.map((t,n)=>(0,A.HK)(t)?a.createElement(_.wv,{key:n}):e.item.largeDisplayMode?a.createElement(K,{key:n,item:t,simulatedHoverActionName:i,onFlyoutItemClick:e.onFlyoutItemClick,recordingKey:e.recordingKey}):a.createElement(G,{key:n,item:t,showItemIcon:l,hideCheck:e.hideCheck,simulatedHoverActionName:i,onFlyoutItemClick:e.onFlyoutItemClick,recordingKey:e.recordingKey})))}function U(e,t){let n=(0,r.d4)(C.nj),a=!!(0,r.d4)(t=>(0,A.Zk)(e)&&e.isActive&&e.isActive(t)),{action:i,property:l,propertyValue:o,description:s}=e,c=(0,T.Yh)(n,i),d=void 0!==o&&n[l]===o,u=t?P(l,o,i):null;return{isEnabled:c,isChecked:d||a,icons:u,text:e.text||V(i),shortcutText:(0,T.c1)(n.keyboardShortcuts,i),descriptionText:s?V(s):void 0}}function G({item:e,showItemIcon:t,hideCheck:n,simulatedHoverActionName:r,onFlyoutItemClick:i,recordingKey:l}){let{isEnabled:o,isChecked:s,icons:d,text:m,shortcutText:p}=U(e,t);return a.createElement(L.a1,{key:e.action,text:m,shortcut:p,isEnabled:o,isChecked:s,onPointerUp:(0,c.kc)().ce_flyout_pointer_up_enabled?t=>{i(e,t)}:void 0,onClick:(0,c.kc)().ce_flyout_pointer_up_enabled?void 0:t=>{i(e,t)},hideCheck:n,recordingKey:u.Pt(l,"flyout",e.recordingKey),onboardingKey:e.onboardingKey,simulateHover:e.action===r,tooltip:N.TT.includes(e.action)?e.action:void 0},d&&d.icon?a.createElement(g.U,{svg:d.icon},d.ui3Icon):null)}function K({item:e,simulatedHoverActionName:t,onFlyoutItemClick:n,recordingKey:r}){let{isEnabled:i,isChecked:l,icons:o,text:s,shortcutText:c,descriptionText:d}=U(e,!0);return a.createElement(L.by,{key:e.action,text:s,description:d,shortcut:c,isEnabled:i,isChecked:l,onPointerUp:t=>n(e,t),recordingKey:u.Pt(r,"flyout",e.recordingKey),onboardingKey:e.onboardingKey,simulateHover:e.action===t,tooltip:N.TT.includes(e.action)?e.action:void 0},o&&o.icon?a.createElement(g.U,{svg:o.icon},o.ui3Icon):null)}function V(e){try{return(0,h.A)(e)}catch(t){return(0,f.t)(`fullscreen_actions.${e}`)}}},887326:(e,t,n)=>{n.d(t,{e:()=>eT,Q:()=>eS});var a=n(411855),r=n(188507),i=n(243742),l=n(587670),o=n(86625),s=n(627776),c=n(517333),d=n(966712),u=n(374626),m=n(886653),p=n(153234),_=n(607899),g=n(256975),f=n(738269),h=n(103907),E=n(259927),y=n(324597),b=n(59181),v=n(483990),C=n(325469),w=n(672517),T=n(756085),S=n(261607),x=n(12493),k=n(875847),N=n(728325),I=n(283942),A=n(122983),O=n(369870),L=n(227944),D=n(678340),R=n(428467),M=n(707465),P=n(284321),F=n(239671),B=n(279145),U=n(143678),G=n(507956),K=n(728587),V=n(47506),H=n(572206),z=n(114950),W=n(371399),j=n(760834),$=n(662275),q=n(237870),Y=n(746806),X=n(406270);let J=(0,q.Ju)(function(){let e=(0,r.wA)(),t=a.useCallback(()=>{e($.AS())},[e]),[n,i]=(0,u.fp)(z.c),[l,o]=(0,u.fp)(j.MW),[s,c]=(0,u.fp)(W.O);return a.createElement(Y.vx,{title:"Code Connect Debug Settings",headerSize:"small",initialPosition:new H.Mi(0,0),onClose:t},a.createElement("div",{className:X.kL,onMouseDown:e=>{e.stopPropagation()}},a.createElement("div",{className:X.zN},a.createElement("input",{type:"checkbox",onChange:e=>i(e.target.checked),checked:n}),a.createElement("span",{className:X.Pf},"Debugger break in template execution")),a.createElement("div",{className:X.zN},a.createElement("input",{type:"checkbox",onChange:e=>o(e.target.checked),checked:l}),a.createElement("span",{className:X.Pf},"Log Code Connect document")),a.createElement("div",{className:X.zN},a.createElement("input",{type:"checkbox",onChange:e=>c(e.target.checked),checked:s}),a.createElement("span",{className:X.Pf},"Log JS before execution"))))},"CodeConnectDebugModal");var Z=n(931828),Q=n(335682),ee=n(309798),et=n(99506),en=n(848661),ea=n(498606),er=n(218973),ei=n(984871),el=n(659350);function eo(e){let[t,n]=a.useState(e.initialValue),i=a.useCallback(e=>{(0,en.gl)(e)||n(e.valueOf())},[n]),l=(0,r.wA)();return a.useEffect(()=>{(0,ei.uw)({[e.configPropertyName]:t})},[t,e.configPropertyName]),a.createElement(er.Ht,{className:el.hF,"data-tooltip-type":ea.Ib.TEXT,min:e.minVal,max:e.maxVal,bigNudgeAmount:e.bigNudgeAmount,smallNudgeAmount:e.smallNudgeAmount,"data-tooltip":e.propertyDescription,dispatch:l,value:t,onValueChange:i},a.createElement("span",{className:el.Pf},e.displayName))}let es=(0,q.Ju)(function(){let e=(0,r.wA)(),t=a.useCallback(()=>{e($.AS())},[e]);return a.createElement(Y.vx,{title:"Comments Debug Settings",headerSize:"small",initialPosition:new H.Mi(0,0),onClose:t},a.createElement("div",{className:el.kL,onMouseDown:e=>{e.stopPropagation()}},a.createElement(eo,{configPropertyName:"minZoomPercentage",initialValue:ei.i$.minZoomPercentage,displayName:"Clustering Zoom Level Threshold",propertyDescription:"The zoom level threshold at which we will no longer apply clustering",minVal:1,maxVal:25600,bigNudgeAmount:5,smallNudgeAmount:.1}),a.createElement(eo,{configPropertyName:"zoomScaleOverlap",initialValue:ei.i$.zoomScaleOverlap,displayName:"Pin Overlap",propertyDescription:"The base number of pixels we check for overlapping pins when clustering, this value is multiplied by the current zoomScale to compute bounding box",minVal:1,maxVal:2e4,bigNudgeAmount:100,smallNudgeAmount:10}),a.createElement(eo,{configPropertyName:"clusterClickResultViewportPercentage",initialValue:ei.i$.clusterClickResultViewportPercentage,displayName:"Cluster Click Result Viewport Percentage",propertyDescription:"After a cluster click, one of the pins in the cluster will be positioned this percentage between the center of the viewport and the edge of the viewport. However, we will always zoom in far enough to break the cluster, even if one of the pins ends up being positioned farther away than this percentage.",minVal:1,maxVal:100,bigNudgeAmount:5,smallNudgeAmount:1}),a.createElement(eo,{configPropertyName:"rebuildClustersZoomDelay",initialValue:ei.i$.rebuildClustersZoomDelay,displayName:"Rebuild Cluster User Zoom Delay",propertyDescription:"Delay in ms that occurs between a zoomScale change and the clusters rebuilding",minVal:0,maxVal:1e4,bigNudgeAmount:100,smallNudgeAmount:10})))},"CommentDebugSettingsModal");var ec=n(965626),ed=n(52354),eu=n(27087),em=n(973131),ep=n(585878),e_=n(283339);class eg extends Error{}async function ef({dispatch:e,fileKey:t,log:n=()=>{}}){try{n("Generating file version...");let a=(await em.m(t,"Exported to ML account","",e,!0))?.id;if(void 0===a)throw Error("undefined versionId");n(`Exporting file version ${a}...`);let{meta:{run_key:r}}=(await eu.Ay.post(`/api/ml/export/file_version/${a}`)).data;n(`Waiting for run ${r}...`);for(let e=30;e>=0;e--){await new Promise(e=>setTimeout(e,1e3));let{meta:{ready:t,s3_uri:a}}=(await (0,eu.Ay)({url:`/api/ml/export/status/${encodeURIComponent(r)}`})).data;if(t){n(`Export manifest is ready at ${a}`);break}if(0===e){n("Timed out!");return}}n("Succeeded!")}catch(e){if(e instanceof eg)return;n("Failed!"),n(`${e}`)}}let eh=(0,q.Ju)(function(){let e=(0,r.wA)(),t=a.useCallback(()=>{e($.AS())},[e]),[n,i]=a.useState([]),l=(0,Q.tS)();return a.useEffect(()=>{let n=!1,a=e=>{if(n)throw new eg;i(t=>t.concat([e]))};return null===l?a("No open file"):ef({dispatch:e,fileKey:l,log:a}),()=>{n=!0,t()}},[t,e,l]),a.createElement(ep.XV,{title:"ML Export",headerSize:"large",minWidth:300,onClose:t},a.createElement("div",{className:e_.k},n.join("\n")))},"MLExportModal"),eE=()=>{let e=(0,r.wA)(),t=(0,Q.Cq)({useSinatraType:!0}),n=(0,ee.f)("cursor_bot_v2_make_show_me_primary_cta");return(0,a.useMemo)(()=>{let a=[{name:"toggle-comments-debug-settings",callback:()=>{e((0,$.YK)({type:es,data:{}}))}},{name:"toggle-comments-debug-disable-sidebar",callback:()=>{(0,ei.uw)(e=>({disableSidebar:!e.disableSidebar}))}},{name:"toggle-code-connect-debug-tools",callback:()=>{e((0,$.YK)({type:J,data:{}}))}}];return window.INITIAL_OPTIONS?.cluster_name==="local"&&a.push({name:"debug-ml-export",callback:()=>{e((0,$.YK)({type:eh,data:{}}))}}),(0,d.kc)().cursor_bot&&t?.editor_type===et._Y.DESIGN&&a.push({name:"toggle-cursor-bot",callback:()=>{(0,V.YQ)({id:ec.Wl})}},{name:"toggle-cursor-bot-primary-cta",callback:()=>{e(Z.b({cursor_bot_v2_make_show_me_primary_cta:!n}))}}),(0,d.b5)()&&t?.editor_type===et._Y.DESIGN&&a.push({name:"toggle-tooltips-plus",callback:()=>{(0,V.YQ)({id:ed.v})}}),a},[e,n,t?.editor_type])};var ey=n(193948);let eb="preferences-menu",ev=(0,A.ck)();class eC extends p.o6{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.onKeyDown=p.C0(this,"keydown",e=>{(0,I.jr)(e,I.W0.NO)}),this.selectPreferencesMenu=()=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(this.getPathToPreferences())},this.getPathToPreferences=()=>[(0,v.A)(eb)]}componentDidUpdate(e,t){if(super.componentDidUpdate(e,t),this.props.selectionToUpdate&&this.props.selectionToUpdate===l.m7W.PREFERENCES){let e=this.multilevelDropdown&&this.multilevelDropdown.getActiveItemAtDepth(0);!e||(0,y.k$)(e)||(0,y.gN)(e)||(0,y.id)(e)||!e.name||e.name!==eb?(this.selectPreferencesMenu(),this.props.dispatch(f.ho({type:B.pi,data:{selectionToUpdate:null}}))):this.props.dispatch(f.oB())}}menuItems(){return(0,b.p)({fileMenuArgs:{branchingActionsStatus:this.props.branchingActionsStatus,saveAsState:this.props.saveAsState,topLevelMode:this.props.appModel.topLevelMode,unreadCommentCount:this.props.unreadCommentCount,isOrgMember:this.props.isOrgMember,shouldShowSlideConversionEntrypoint:!1},pluginAndWidgetMenuArgs:this.props.pluginAndWidgetMenuArgs,additionalDebugItems:this.props.debugMenuItems,theme:this.props.theme,backToFileArgs:{shouldShowBackToFiles:(!ev||ev&&(0,O.MP)()&&!!(0,d.kc)().integ_zoom_allow_file_switching)&&!c.eD&&!(0,s.ce)(),isDisabled:!this.props.userStateLoaded},zoomArgs:{canZoomOut:this.props.canZoomOut,canZoomIn:this.props.canZoomIn},publishingModalArgs:{isPublishingModalDisabled:this.props.selectIsPublishingModalDisabled}})}render(){let e=this.props.positionOnChevron&&this.props.chevronRef?.current?.getBoundingClientRect()||null;return a.createElement("div",{className:`${E.Dm}`},a.createElement(eS,{recordingKey:"mainMenu",ref:this.multilevelDropdownRef,menuItems:this.menuItems(),onKeyDown:this.onKeyDown,controlledByID:this.props.controlledByID,"aria-labelledby":this.props["aria-labelledby"],activatePathOnMount:this.props.dropdown.data.togglePreferences?this.getPathToPreferences():void 0,showPoint:!this.props.isUI3&&this.props.appModel.showUi,targetRect:e??(this.props.appModel.showUi?this.props.dropdown.data.targetRect:{top:0,left:0}),alwaysShowCheckMarkOffset:!0,allowCodegenOptions:this.props.selectedView.editorType===F.nT.Design,lean:this.props.isUI3?"right":void 0,...this.props}))}}eC.displayName="FullscreenMainMenu";let ew=(0,r.Ng)((e,t)=>{let n={view:"recentFiles"},a=e.openFile;a&&a.folderId&&(0,k.N5)(e.folders,a.folderId)&&(n={view:"folder",folderId:a.folderId});let r=e.selectedView;return{appModel:e.mirror.appModel,userStateLoaded:e.userStateLoaded,selectedView:r,recentlyUsedPlugins:t.recentlyUsedPlugins,backToFilesHref:(0,M.Np)(e,n),saveAsState:e.saveAsState,dropdown:t.dropdown,branchingActionsStatus:t.branchingActionsStatus,memoryWarningLevel:t.memoryWarningLevel,debugMenuItems:t.debugMenuItems,selectionToUpdate:e.dropdownShown?.data?.selectionToUpdate,theme:e.theme.themePreference,unreadCommentCount:t.unreadCommentCount,canZoomIn:t.canZoomIn,canZoomOut:t.canZoomOut,isOrgMember:(0,R.canMemberOrg)(e.currentUserOrgId,e),isLimitedDevMode:(0,G.$A)(e.selectedView)&&!(0,g.tn)(e),selectIsPublishingModalDisabled:(0,P.LD)(e)}})(eC);function eT(e){let t=(0,u.md)(D.eE),n=eE(),r=(0,T.op)(),l=(0,x.$n)(),o=(0,h.n6)(),s=(0,L.Zr)("zoom-in"),c=(0,L.Zr)("zoom-out"),d="ui3"===(0,i.DP)().version;(0,C.n)();let m=(0,S.c)();return a.createElement(ew,{...e,memoryWarningLevel:t,debugMenuItems:n,branchingActionsStatus:l,recentlyUsedPlugins:r,unreadCommentCount:o,canZoomIn:s,canZoomOut:c,isUI3:d,pluginAndWidgetMenuArgs:m})}class eS extends a.Component{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.getActiveItemAtDepth=e=>this.multilevelDropdown?this.multilevelDropdown.getActiveItemAtDepth(e):null,this.setActiveItemPath=e=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(e)},this.onSelectItem=(e,t)=>{o.l7.user(`fullscreen-menu-${e.name??e.action??"unknown"}`,()=>{if(e.callback&&e.callback((0,y.Dz)(e),e.args,this.props.dispatch,t),e.action&&!e.input){let n=e.action;e.loadingIndicatorString?this.props.dispatch(_.n.set({message:e.loadingIndicatorString,callback:()=>{N.VU.get(n,e.source??"menu",e.args)(t)}})):N.VU.get(n,e.source??"menu",e.args)(t)}})},this.transformMenuItems=(0,m.xx)(e=>(0,ey.jv)(e,{appModel:this.props.appModel,selectedView:this.props.selectedView,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,removeDisabledItems:this.props.removeDisabledItems,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,isLimitedDevMode:this.props.isLimitedDevMode}))}componentDidMount(){this.closeIfNoItems()}componentDidUpdate(){this.closeIfNoItems()}componentWillUnmount(){this.props.controlledByID&&document.getElementById(this.props.controlledByID)?.focus()}hasMenuValidItems(){let e=this.transformMenuItems(this.props.menuItems);return e.length>0&&e.some(e=>!e.separator&&(this.props.allowDisabledOnly||!e.disabled))}closeIfNoItems(){this.hasMenuValidItems()||this.props.dispatch(f.oB())}render(){let e=this.transformMenuItems(this.props.menuItems);return this.hasMenuValidItems()?a.createElement(w.fu,{name:U.e0.EDITOR_MENU},a.createElement(K.j,{ref:this.multilevelDropdownRef,items:e,onKeyDown:this.props.onKeyDown,onSelectItem:this.onSelectItem,parentRect:this.props.targetRect,activatePathOnMount:this.props.activatePathOnMount,lean:this.props.lean,...this.props})):null}}eS.displayName="FullscreenMultilevelDropdown"},582828:(e,t,n)=>{n.d(t,{c:()=>tW}),n(206354);var a=n(411855),r=n(188507),i=n(603625),l=n(243742),o=n(627776),s=n(966712),c=n(498750),d=n(563706);let u=new Set(["-","="]),m=new Set(["-","=","f","o","p","r","s"]);function p(e){if(!m.has(e.key))return;let t=d.Ay.mac?c.xH.META:c.xH.CONTROL;(0,c.vN)(e,t)?e.preventDefault():u.has(e.key)&&(t|=c.xH.SHIFT,(0,c.vN)(e,t)&&e.preventDefault())}var _=n(794272),g=n(99380),f=n(218881),h=n(286640),E=n(763658),y=n(192437),b=n(256975),v=n(609219),C=n(293017),w=n(986270),T=n(696097),S=n(672517),x=n(720289),k=n(126049),N=n(776250),I=n(809831),A=n(988022),O=n(661843),L=n(611720),D=n(516398),R=n(285381);n(692609);var M=n(297666),P=n(517333),F=n(529529),B=n(325680),U=n(756085),G=n(886119),K=n(697551),V=n(384792);let H=(0,M.s)((e,t)=>{P.eD.updateFullscreenMenuState({pluginMenuData:e,widgetMenuData:t})},250);var z=n(488983),W=n(669178),j=n(335682),$=n(694687),q=n(860178),Y=n(940596),X=n(587670),J=n(588169),Z=n(939863),Q=n(392592),ee=n(22774),et=n(931828),en=n(356390),ea=n(272042),er=n(245389);let ei="keyboard-layout-preference",el=(e,t,n)=>{t&&e(ee.FU({tab:t})),n||en.Y5.triggerAction("toggle-keyboard-shortcuts")},eo=(e,t,n,a)=>{e(et.b({keyboard_manual_supported_bell:!0})),e(Q.F.enqueue({message:(0,Z.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_available",{newKeyboardName:(0,J.As)(t)}),button:{text:(0,Z.t)("keyboard_settings.update_keyboard_shortcuts"),action:()=>el(e,"layout",a)},type:ei,onDismiss:()=>{e(et.b({keyboard_manual_supported_bell:!0}))},timeoutOverride:2e4})),(0,J.CZ)({layout:n,detectedLayout:t,eventName:"manual_supported_keyboard_detected"})},es=(e,t,n)=>{e(et.b({keyboard_generic_supported_first_bell:!0})),e(Q.F.enqueue({message:(0,Z.t)("keyboard_settings.new_keyboard_name_keyboard_shortcuts_are_now_available",{newKeyboardName:(0,J.As)(t)}),button:{text:(0,Z.t)("keyboard_settings.enable_and_show_new_shortcuts"),action:()=>{el(e,"layout",n),(0,J.rd)({layout:t})}},type:ei,onDismiss:()=>{}})),(0,J.CZ)({layout:X.aTn.UNKNOWN,detectedLayout:t,eventName:"first_generic_detected_supported_keyboard"})};async function ec(e,t){if(!P.eD)return null;let n=await P.eD.getKeyboardLayout();if(!n)return null;if(t===n)return n;let a=(0,er.pB)(n),r=(0,J.v7)();return a===r||e(a,r,n,null!=t),n}async function ed(e,t){if(!window.isSecureContext||window.top!==window.self)return null;let n=navigator.keyboard;if(!n||!n.getLayoutMap)return null;let a=await n.getLayoutMap();if(function(e,t){for(let[n,a]of e)if(t?.get(n)!==a)return!1;return!0}(a,t))return t;let{layoutJSON:r,detectedLayoutsWeb:i}=(0,ea.$$)(a),l=(0,ea.ZN)({layoutJSON:r,detectedLayouts:i,desktopLayout:null}),o=(0,J.v7)();return l===o||e(l,o,JSON.stringify(r),null!=t),a}var eu=n(974105),em=n(27703),ep=n(336599),e_=n(388094),eg=n(790202),ef=n(743415),eh=n(705129),eE=n(933342),ey=n(535257),eb=n(540019),ev=n(830524),eC=n(331626),ew=n(239671),eT=n(294662),eS=n(143678),ex=n(280945),ek=n(88823),eN=n.n(ek),eI=n(646240),eA=(e=>(e.NOT_INITIALIZED="not_initialized",e.ACTIVE_FIRST_TIME="active_first_time",e.ACTIVE_AFTER_IDLE="active_after_idle",e.IDLE_DUE_TO_INACTIVITY="idle_due_to_inactivity",e.IDLE_DUE_TO_TAB_SWITCH="idle_due_to_tab_switch",e))(eA||{}),eO=n(38580),eL=n(529928);let eD=(0,eO.eU)(eA.NOT_INITIALIZED),eR=(0,eL.bt)(e=>({state:e,fileKey:e.openFile?.key})),eM=[eA.ACTIVE_AFTER_IDLE,eA.ACTIVE_FIRST_TIME],eP=(0,eO.eU)(null,(e,t,n)=>{let{state:a,fileKey:r}=e(eR),i=e(eD);if((i&&eM.includes(i)?"start":"end")!=(n&&eM.includes(n)?"start":"end")){let e="";switch(n){case eA.ACTIVE_AFTER_IDLE:case eA.ACTIVE_FIRST_TIME:e="active";break;case eA.IDLE_DUE_TO_INACTIVITY:case eA.IDLE_DUE_TO_TAB_SWITCH:e="inactive";break;default:e="non-initialized"}(0,A.ds)("active_time_spent_event",r,a,{currentState:e,activeState:n},{forwardToDatadog:!0,batchRequest:!1})}t(eD,n)}),eF=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];var eB=n(915440),eU=n(279453),eG=n(355025),eK=n(963719),eV=n(629019),eH=n.n(eV),ez=n(709270),eW=n(901536),ej=n(359170),e$=n(929018),eq=n(737947),eY=n(761870),eX=n(195847),eJ=n(411380),eZ=n(322611);function eQ(e){let t=(0,r.wA)(),n=(0,r.d4)(e=>e.auth);return(0,a.useEffect)(()=>{t(eY.Ts({origin:"request_permissions_entry",redirectUrl:eq.Ay.location.pathname,formState:eX.qB.ACCOUNT_PICKER,accountPickerData:e.accountPickerData}))},[t,e.accountPickerData]),a.createElement(eZ.u,{useOriginalSrcFills:!0,onBackClick:()=>{n.formState===eX.qB.ACCOUNT_PICKER?e.closeAuth():t(eY.Ts({origin:"request_permissions_entry",redirectUrl:eq.Ay.location.pathname,formState:eX.qB.ACCOUNT_PICKER,accountPickerData:e.accountPickerData}))}},a.createElement("div",{className:"request_permissions_app--authViewContainer--1XJOG"},a.createElement(eJ.Ob,{id:"request-permissions-app",modal:!0,auth:n})))}var e0=n(805710);function e1(e){let t=(0,I.lg)(),n=e.pageType||t,i=((0,r.d4)(e=>e.authedUsers)??{}).byId??{},l=e.authedUsers??Object.values(i),[o,s]=(0,a.useState)(!1);return a.createElement(ez.w,{pageType:n},o?a.createElement(eQ,{accountPickerData:{authed_users:l,authed_user_access_reason:{},destination_name:(0,Z.t)("mfa_required_modal.account_switcher.destination")},closeAuth:()=>{s(!1)}}):a.createElement(e$.H,{org:e.org,switchAccountsSection:a.createElement(function(){let e=(0,q.iZ)();return e?a.createElement("div",{className:eH()(eW.cx.mt24.$,e0.Yg)},(0,Z.tx)("mfa_required_modal.account_switcher.text",{userEmail:e.email,link:a.createElement(ej.u4,{defaultClass:e0.yu,onClick:()=>{s(!0)}},(0,Z.tx)("mfa_required_modal.account_switcher.switch_accounts"))})):null},null),fileKey:e.fileKey}))}var e2=n(358145),e5=n(838e3),e3=n(662275),e4=n(650769),e6=n(198371),e8=n(408405),e7=n(227338),e9=n(793670),te=n(799569),tt=n(62342),tn=n(373494);function ta(e){let{onDismiss:t,canUpgrade:n}=e;return a.createElement(S.fu,{name:"Workshop Expired File Banner"},a.createElement("div",{className:`workshop_expiry_footer--banner--ELf7G ${tn.yl}`},a.createElement("div",{className:"workshop_expiry_footer--bannerContent--w2Lw1"},a.createElement(tt.oS,{className:"workshop_expiry_footer--icon--mM-A8",type:tt.y1.WHITEBOARD}),a.createElement("div",{className:"workshop_expiry_footer--textContent--TN7cv"},a.createElement("span",{className:"workshop_expiry_footer--title--cmlOu text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"},(0,Z.tx)("whiteboard.open_sessions.expiry_banner_title")),n&&a.createElement("span",{className:"workshop_expiry_footer--subtitle--jmRvc text--fontPos13Whyte--VhWqH text--_fontBaseWhyte--efAjI"},(0,Z.tx)("whiteboard.open_sessions.expiry_banner_prompt")))),a.createElement(te.Jn,{onClick:t,className:"workshop_expiry_footer--closeButton--L8lrO"})))}var tr=n(974898),ti=n(648022);function tl(e){let{onWorkshopExpired:t}=e;!function(){let e=(0,r.wA)(),t=(0,q.iZ)(),n=!t,i=(0,e6.nF)(),l=i.enabled,o=i.enabled?i.id:null,s=(0,r.d4)(e=>e.progressBarState.mode),c=j.q5()?.isTryFile,d=(0,a.useMemo)(()=>{if(!t||null==o)return!1;if(c)return!0;let e=(0,h.DN)();try{return e.get((0,ti.v6)(o)).includes(t.email)}catch(e){return!1}},[t,o,c]),u=t?.email;(0,a.useEffect)(()=>{u&&o&&c&&(0,ti.kO)(o,u)},[u,o,c]);let m=(0,j.MY)();(0,a.useEffect)(()=>{if(l&&!(0,e8.T)(s)&&"loaded"===m.status){let t=localStorage.getItem((0,e7.K)(o));n?t?(0,e4.QA)(t):e(e3.$O({type:tr.e})):m.data?.canEdit||d||e(e3.$O({type:tr.e}))}},[e,n,l,o,s,d,m]);let p=(0,j.q5)(),_=p?.key,g=p?.name;(0,a.useEffect)(()=>{if(l&&!(0,e8.T)(s)&&n&&c&&_&&g===(0,Z.t)("fullscreen.fullscreen_view_selector.untitled")){let t=localStorage.getItem((0,e7.K)(o));t&&e(e5.S({userName:t,file_key:_}))}},[l,s,o,n,c,_,g,e])}();let{showEditFileFooter:n,userCanSeeEditButton:i,dismissEditFileFooter:l}=function(e){let[t,n]=(0,a.useState)(!1),i=(0,r.wA)(),l=(0,q.iZ)(),o=(0,j.q5)(),s=o?.name,c=!l,{userCanEditFile:d,userCanSeeEditButton:u}=(0,a.useMemo)(()=>c?{userCanEditFile:!1,userCanSeeEditButton:!1}:o?{userCanEditFile:o.canEdit,userCanSeeEditButton:o.showEditButton}:{userCanEditFile:!1,userCanSeeEditButton:!1},[c,o]),m=(0,e6.nF)(),p=m.enabled,_=(0,e2.ZC)(p),g=m.enabled?m.until.valueOf():null,f=(0,a.useRef)(null),h=(0,a.useCallback)(()=>{if(!c){X.h3O?.reconnect(!1),d||n(!0);return}i(eY.Ts({origin:"logged_out_footer",formState:eX.qB.SIGN_UP,redirectUrl:eq.Ay.location.pathname})),i(e3.to({type:e9.x,data:{headerText:(0,Z.t)("whiteboard.open_sessions.expiry_modal_title",{file_name:s||""}),subtitle:(0,Z.t)("whiteboard.open_sessions.expiry_modal_subtext"),disableHiding:!0}})),e()},[i,e,c,d,s]);return(0,a.useEffect)(()=>{if(p&&g){let e=Math.max(g-Date.now(),0);f.current=setTimeout(()=>{f.current=null,h()},e)}return()=>{f.current&&clearTimeout(f.current)}},[i,p,g,h]),(0,a.useEffect)(()=>{null!=_&&p!==_&&(p?X.h3O?.reconnect(!1):(f.current&&clearTimeout(f.current),h()))},[i,p,_,h]),{showEditFileFooter:t,dismissEditFileFooter:(0,a.useCallback)(()=>{n(!1)},[]),userCanSeeEditButton:u}}(t);return n?a.createElement(ta,{onDismiss:l,canUpgrade:i}):null}var to=n(717156),ts=n(726864),tc=n(788811),td=n(29680),tu=n(737499),tm=n(279145),tp=n(334290),t_=n(712546),tg=n(750252),tf=n(214673),th=n(503316),tE=n(877997),ty=n(144119),tb=n(374626),tv=n(92566),tC=n(479296),tw=n(59779),tT=n(590843),tS=n(7860),tx=n(877723),tk=n(410424),tN=n(74021),tI=n(271245),tA=n(632430),tO=n(715879),tL=n(114716),tD=n(860707),tR=n(661060),tM=n(1688),tP=n(987850),tF=n(239737),tB=n(889085),tU=n(109176);let tG=a.memo(({children:e})=>{let t=(0,r.d4)(e=>e.openFile),n=t?t.key:"",i=(0,a.useRef)(null),l=(0,r.wA)(),o=(0,tb.md)(tO.h),c=(0,r.d4)(e=>e.openFile?.canEdit??!1),u=(0,td.p8)("isReadOnly"),m=(0,$.dq)(),p=(0,I.E3)(),_=(0,e2.ZC)(p);p!==_&&_&&l(C.PQ([])),(0,tP.j)(n),(0,tF.G_)(n),(0,tx.OQ)(n),(0,tF.y1)(n),(0,tM.W)(),tA.nz(),(0,tL.N)(),(0,tB.Ky)(),(0,a.useEffect)(()=>{let e=()=>{window.scrollTo({left:document.body.scrollLeft,top:document.body.scrollTop,behavior:"smooth"})};window.scrollTo(0,0),d.XN&&document.addEventListener("focusout",e),document.documentElement.classList.add(tU.FC),document.body.classList.add(tU.Wc),l(tN._J());let t=window.FigmaMobile;return t&&(t._get_memory_stats=()=>{let e=X.P2e?.getImageMemory();function t(e){return"number"==typeof e?e:parseInt(e)}return{metadata:JSON.parse(JSON.stringify({coreJsBufferMemory:X.hMR?.getJsBufferMemory()||0,coreLocalMaxUsedHeapMemory:X.hMR?.getLocalMaxUsedHeapMemory()||0,coreMaxUsedHeapMemory:X.hMR?.getMaxUsedHeapMemory()||0,coreTotalUsedHeapMemory:X.hMR?.getTotalUsedHeapMemory()||0,fullscreenCompressedImages:e?.compressedImages??0,fullscreenUncompressedImagesArrayBuffers:e?.uncompressedArrayBuffer??0,fullscreenUncompressedImagesImageBitmap:e?.uncompressedImageBitmap??0})),reservedWasmMemory:(0,tD.le)()||0,rendererGpuMemory:t(X.P2e?.getRendererGpuMemory())||0,rendererBreakdown:function(e){return{textures:t(e.textures),vertexBuffers:t(e.vertexBuffers),indexBuffers:t(e.indexBuffers),renderBuffers:t(e.renderBuffers),uniformBuffers:t(e.uniformBuffers)}}(X.P2e?.getRendererMemoryBreakdown())??void 0,memStats:X.hMR?.getMemStatsSummary()??void 0}}),()=>{d.XN&&document.removeEventListener("focusout",e),document.body.classList.remove(tU.Wc),document.documentElement.classList.remove(tU.FC)}},[l]),(0,a.useEffect)(()=>{t&&!i.current&&(l(tA.Yx({})),t&&!u?t?.canEdit&&l(tk.rH({fileKey:t.key})):(0,s.kc)().ce_new_missing_fonts_logging&&(0,tR.DI)(),i.current=t)},[l,u,t]),(0,a.useEffect)(()=>{(0,tB.RS)(l,t?.key,m)},[l,m,t?.key,p]),(0,a.useEffect)(()=>{P.eD&&P.eD.setEditFilePermissions(c)},[c]);let g=(0,a.useRef)(null),f=(0,a.useRef)(null);return((0,a.useEffect)(()=>{t&&(null===g.current||!g.current)&&l((0,tI.x4)()),t&&g.current&&t.key!==g.current&&l((0,tI.x4)()),f.current&&p!==f.current&&l((0,tI.x4)()),f.current=p,g.current=t?.key},[l,t,p]),"ok"!==o)?null:a.createElement(a.Fragment,null,e)});var tK=n(447402);function tV(){let{error:e}=(0,y.Hb)();return e instanceof Error&&e.message.includes("Out of memory")?a.createElement(tK.PG,null):a.createElement(y.S1,null)}var tH=n(354235);let tz=()=>{"hidden"===document.visibilityState&&(h.x4?.clear(),ex.L.cleanupSession())};function tW({children:e,loadedCommentsProvider:t=!0}){let n=(0,r.wA)(),c=(0,j.q5)();(0,b.lF)(c?.key??""),eb.M4.Folder.useValue(c?.folderId);let u=(0,r.d4)(e=>e.selectedView.editorType),m=(0,t_.FF)(),[_,h]=(0,a.useState)(!1),y=(0,l.DP)(),T=(0,ty.sO)(),S=(0,a.useCallback)(()=>{(0,tB.jS)(),h(!0)},[]),O=function({fileKey:e,onCanvasExpired:t}){let n=(0,q.TA)(),r=(0,$.dq)(),[i,l]=a.useState(!1),o=(0,eG.K)(),c=(0,eB.Rs)(eU.NSA,{fileKey:e??""},{enabled:!!e}),d="loaded"===c.status&&c.data.file?.canRead!==!0;return a.useLayoutEffect(()=>{o&&d&&(l(!0),t())},[o,d,t]),a.useEffect(()=>{o&&!d&&N.az.trackDefinedEvent("mfa.file_access_without_restriction",{orgId:r??void 0,userId:n??void 0,fileKey:e})},[o,d,r,n,e]),!!(0,s.kc)().mfa_for_guests&&i}({fileKey:c?.key,onCanvasExpired:S}),M=(0,r.d4)(e=>e.mergingStatus);(0,a.useEffect)(()=>{if((0,s.kc)().ce_suppress_browser_keys)return document.addEventListener("keydown",p,!0),()=>void document.removeEventListener("keydown",p,!0)},[]),(0,D.LD)(),function(){let e=(0,a.useRef)(),t=(0,a.useRef)(),n=(0,r.wA)(),i=(0,r.d4)(e=>e.userFlags),l=(0,r.d4)(e=>!!e.user),o=function(e,t){let n=(0,r.d4)(e=>e.mirror.appModel.showKeyboardShortcuts),i=(0,r.d4)(e=>e.user?.created_at),l=(0,a.useMemo)(()=>{let e=new Date("2022-11-14").getTime();return null!=i&&new Date(i).getTime()>=e},[i]);return(0,a.useCallback)((a,r,i,o)=>{t.keyboard_user_first_detection||o||!l?a!==X.aTn.US_QWERTY||o||r!==X.aTn.UNKNOWN?a&&r!==X.aTn.UNKNOWN?t.keyboard_manual_supported_bell||eo(e,a,r,n):a&&r===X.aTn.UNKNOWN?t.keyboard_generic_supported_first_bell||es(e,a,n):(0,J.CZ)({layout:r,detectedLayoutStr:i??void 0,eventName:"keyboard_change_no_bell"}):(0,J.CZ)({layout:a,eventName:"ignore_us_qwerty"}):(e(et.b({keyboard_user_first_detection:!0})),a&&((0,J.rd)({layout:a}),(0,J.CZ)({layout:a,eventName:"auto_set_new_user_layout"})))},[e,t,n,l])}(n,i),s=(0,a.useCallback)(async()=>{if(l){if(P.eD){let t=await ec(o,e.current??null);e.current=t}else{let e=await ed(o,t.current??null);t.current=e}}},[o,l]);(0,a.useEffect)(()=>{en.Y5.isReady()?s():en.Y5.onReady().then(()=>setTimeout(s,500))},[])}(),(0,W.XS)(),function(){let e=(0,r.Pj)(),t=(0,r.d4)(eu.d1),n=(0,r.d4)(e_.m0),i=(0,r.d4)(e_.No),l=(0,r.d4)(e=>e.library.published),o=(0,j.q5)(),c=(0,r.d4)(e=>e.fileVersion),d=(0,r.d4)(e=>e.loadingState),u=(0,r.d4)(e=>e.library.local),m=(0,r.d4)(e=>e.library.assetsPanelSearch.shouldSearchDefaultLibraries),p=(0,em.ud)(),_=(0,r.d4)(e=>e.folders),g=(0,eg.l6)(),f=(0,r.d4)(e=>e.library.assetsPanelSearch.query),h=(0,r.d4)(e=>e.library.assetsPanelSearch.searchOptions),E=(0,ep.D2)(d,(0,eh.yD)(o?.key||"")),y=(0,ef.M)(),b=(0,s.kc)().asset_search_min_searches;(0,a.useEffect)(()=>{t&&eE.YG.sourcesDidChange()},[t,n,i,l,u,m,p,_]),(0,a.useEffect)(()=>{(0,eE.Wg)(e.getState(),{ignoreLoadingState:y})&&eE.YG.queryDidChange(e)},[e,f,y]),(0,a.useEffect)(()=>{(0,eE.Wg)(e.getState(),{ignoreLoadingState:y})&&eE.YG.searchOptionsDidChange(e)},[e,h,y]),(0,a.useEffect)(()=>{(0,eE.Wg)(e.getState(),{ignoreLoadingState:y})&&eE.YG.subscriptionsDidChange(e,g)},[e,E,g,y]),(0,a.useEffect)(()=>{!b&&(0,eE.Wg)(e.getState(),{ignoreLoadingState:y})&&eE.YG.assetSearchMinimizeSearchShadowRead(e,ey.oi.OPEN_FILE)},[e,o,y,b]),(0,a.useEffect)(()=>{!b&&(0,eE.Wg)(e.getState(),{ignoreLoadingState:y})&&eE.YG.assetSearchMinimizeSearchShadowRead(e,ey.oi.FILE_VERSION)},[e,c,y,b]),(0,a.useEffect)(()=>{!b&&(0,eE.Wg)(e.getState(),{ignoreLoadingState:y})&&eE.YG.assetSearchMinimizeSearchShadowRead(e,ey.oi.LOADING_STATE)},[e,d,y,b])}(),(0,V.gN)(),P.eD&&function(){let e=(0,U.JI)(),t=(0,r.d4)(e=>e.mirror.appModel.isReadOnly),n=(0,K.Yo)(),i=(0,r.d4)(e=>e.openFile),l=(0,r.d4)(e=>e.localPlugins),o=(0,I.E3)(),s=(0,U.op)(),c=(0,r.d4)(e=>e.installedPluginVersions.plugins),d=(0,r.d4)(e=>e.mirror.selectedStyleProperties?.selectedWidgetInfo),u=(0,r.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),m=(0,r.d4)(e=>e.publishedPlugins),p=(0,r.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),_=(0,U.Be)(),g=_.orgPlugins,f=_.orgWidgets,h=(0,G.h)("plugin"),E=(0,G.h)("widget"),y=(0,U.NU)(),b=(0,U.qr)(),v=(0,U.ZT)(),C=null!=(0,V.SH)();a.useEffect(()=>{let a={isReadOnly:t,userCanRunPlugins:e,openFile:i,publishedPlugins:m,localExtensions:l,orgEntity:n,allSavedPlugins:c,recentlyUsedPlugins:s,org:p,editorType:o,widgetSelectionInfo:d,hideRecentsHeader:!0,activeTextReviewPlugin:u,orgSavedPlugins:g,orgSavedWidgets:f,orgPrivatePlugins:h,orgPrivateWidgets:E,savedWidgetVersions:y,recentlyUsedWidgets:b,publishedWidgets:v};H(F.$0(a),B.wX(a))},[t,e,i,m,c,s,l,n,p,o,d,u,_,g,f,h,E,y,b,v,C])}(),function(){let e=(0,I.E3)(),t=(0,a.useCallback)(()=>{(0,N.sx)("display_redline",{source:"keyboard_shortcut",mode:e})},[e]),n=(0,k.A)(t,1e3,{leading:!0,trailing:!1}),i=(0,r.d4)(e=>e.usedKeyboardShortcuts["measure-to-selection"]||0),l=(0,a.useRef)(i);(0,a.useEffect)(()=>{l.current!==i&&(l.current=i,n())},[i,n])}();let z=(0,g.Sl)();(0,f.I7)("exp_aa_test_fullscreen_view").getConfig(),function(){let e=(0,r.wA)(),t=(0,t_.FF)(),n=(0,tu.BI)(),[i,l]=(0,a.useState)(!1),o=(0,r.d4)(e=>e.mirror.appModel.multiplayerSessionState===X.kul.JOINED);a.useEffect(()=>{t&&!i&&n?.shouldOptimizeForIpadApp&&o&&!X.Ez5?.defaultToolIsHandSelect()&&(l(!0),en.Y5.triggerAction("set-tool-hand",null))},[t,n,i,l,o]);let s=(0,r.d4)(({mirror:{appModel:e}})=>e.showUi);a.useEffect(()=>{n?.updateUIVisible&&n.updateUIVisible(s)},[n,s]);let c=(0,tu.m0)();a.useEffect(()=>{c&&(c._try_to_flush_autosave=async()=>{let e=(0,tc.ZG)();if(e){let t=e.session();t&&await t.tryToFlushAutosave()}})},[c]);let d=(0,tp.Kd)();a.useEffect(()=>{n?.updateSaveStatus&&(d?o?n.updateSaveStatus(tf.a.SAVING):n.updateSaveStatus(tf.a.PAUSED):n.updateSaveStatus(tf.a.SAVED))},[n,d,o]);let u=(0,r.d4)(e=>(0,tm.Yh)(e.mirror.appModel,"undo")),m=(0,r.d4)(e=>(0,tm.Yh)(e.mirror.appModel,"redo"));a.useEffect(()=>{if(n?.updateUndoEnabled&&n.updateUndoEnabled(u),n?.updateRedoEnabled&&n.updateRedoEnabled(m),c){let t=t=>{e(Q.F.dequeue({matchType:"undo_redo_gesture"})),e(Q.F.enqueue({message:t,type:"undo_redo_gesture",timeoutOverride:750}))};c._trigger_undo=()=>{u&&(en.Y5.triggerActionInUserEditScope("undo"),t((0,Z.t)("fullscreen_actions.undo")))},c._trigger_redo=()=>{m&&(en.Y5.triggerActionInUserEditScope("redo"),t((0,Z.t)("fullscreen_actions.redo")))}}},[n,e,u,m,c]);let p=(0,tu.pt)();a.useEffect(()=>{p&&(p._set_ui_visibility=e=>{e!==s&&en.Y5.triggerAction("toggle-ui")})},[p,s]);let _=(0,ts.Yk)();a.useEffect(()=>{n?.updateDLTHeight&&n.updateDLTHeight(_)},[_,n]);let g=(0,td.dH)(),f=(0,tE.pK)(g),h=(0,tu.Ef)(),E=(0,r.d4)(e=>e.mirror?.appModel.isReadOnly);a.useEffect(()=>{f&&!E&&(h?.nativeToolbarUpdateActiveTool?.(f),h?.nativeToolbarUpdateMultiselectActive?.("MULTISELECT"===f))},[h,f,E]);let[y,b]=a.useState("ERASER"),[v,C]=a.useState("PENCIL");a.useEffect(()=>{!E&&f&&(0,tE.S0)(f)&&f!==y&&(C(y),b(f))},[f,y,b,C,E]),a.useEffect(()=>{p&&(p._switch_to_eraser=function(){if(E)return{success:!1,error:th.lj.READ_ONLY_FILE,currentTool:"NONE"};if("ERASER"!==y)return(0,tE.Jm)("set-tool-eraser"),{success:!0,error:null,currentTool:"ERASER"};{let e=tE.Jh.get(v);return e&&(0,tE.Jm)(e),{success:!0,error:null,currentTool:v}}},p._switch_to_previous_drawing_tool=function(){if(E)return{success:!1,error:th.lj.READ_ONLY_FILE,currentTool:"NONE"};let e=tE.Jh.get(v);return e&&(0,tE.Jm)(e),{success:!0,error:null,currentTool:v}})},[E,f,v,y,p]),c&&(c._update_context_menu_visibility=e=>{X.glU.updateNativeContextMenuVisibility(e)},c._override_document_visibility_state=tg.R),p&&(p._activate_multiselect_mode=()=>{(0,tE.Jm)("set-tool-multiselect")},p._deactivate_multiselect_mode=()=>{(0,tE.Jm)("set-tool-default")})}(),(0,ev.a4)(),(0,o.fp)(),a.useEffect(()=>Y.Bc,[]),a.useEffect(()=>{u===ew.nT.Whiteboard&&(0,f.hW)("exp_unified_index_v3_figjam")},[u]),a.useEffect(()=>(u===ew.nT.Whiteboard&&d.Ay.isMeetDevice&&"undefined"!=typeof document&&document.addEventListener("visibilitychange",tz),()=>{document.removeEventListener("visibilitychange",tz)}),[u]);let ee=(0,x.o)();a.useEffect(()=>{if(ee)return n(w.HQ({storeInRecentsKey:ee})),u===ew.nT.Whiteboard&&(n(w.gr({storeInRecentsKey:ee})),n(w.vZ({storeInRecentsKey:ee}))),u!==ew.nT.DevHandoff&&n(w.aF({storeInRecentsKey:ee})),window.addEventListener("storage",e,!1),()=>{window.removeEventListener("storage",e,!1)};function e(e){switch(e.key){case eC.vY:case eC.S7:n(w.HQ({storeInRecentsKey:ee}));break;case eC.YN:case eC.xk:n(w.aF({storeInRecentsKey:ee}));break;case eC.SO:n(w.gr({storeInRecentsKey:ee}));break;case eC.JG:n(w.vZ({storeInRecentsKey:ee}))}}},[n,u,ee]);let ea=(0,q.TA)();a.useEffect(()=>{ea&&n(v.oQ())},[n,ea]),function(){let e=(0,eI.Xr)(eP);(0,a.useEffect)(()=>{let t;let n=()=>{clearTimeout(t),t=setTimeout(()=>{e(eA.IDLE_DUE_TO_INACTIVITY)},6e4)},a=()=>{n(),e(eA.ACTIVE_AFTER_IDLE)},r=eN()(a,500,{trailing:!1,leading:!0}),i=()=>{"visible"===document.visibilityState?a():e(eA.IDLE_DUE_TO_TAB_SWITCH)};return e(eA.ACTIVE_FIRST_TIME),eF.forEach(e=>{document.addEventListener(e,r)}),document.addEventListener("visibilitychange",i),n(),()=>{eF.forEach(e=>{document.removeEventListener(e,r)}),document.removeEventListener("visibilitychange",i),clearTimeout(t)}},[e,6e4])}(),a.useEffect(()=>{let e=e=>{if(M===i.y.MERGING)return e.returnValue="A merge operation is in progress. Closing the window could result in data loss or corruption; please wait until the operation completes.",e.preventDefault(),n(C.sx({name:"Unload During Merge Warning Shown"})),!1},t=()=>{M===i.y.MERGING&&n(C.sx({name:"Page Closed During Merge"}))};return window.addEventListener("beforeunload",e),window.addEventListener("unload",t),()=>{window.removeEventListener("beforeunload",e),window.removeEventListener("unload",t)}},[M,n]);let er=(0,a.useRef)(!1);a.useEffect(()=>{(0,s.kc)().search_persistent_sessions&&c?.key&&!er.current&&(er.current=!0,L.y.startTimer(c.key,(0,eT.lM)()))},[c?.key]);let[ei,el]=(0,tE.H_)(),eS=a.createElement(a.Fragment,null,a.createElement(tj,{file:c,loadedCommentsProvider:t,onCanvasExpired:S},e),m&&a.createElement(tH.d,null,ei?el&&a.createElement(tE.vW,null):a.createElement(tw.a,null)));return a.createElement(E.k,{name:"editor",alsoTrack:()=>({editorType:(0,ew.Bu)(u),productType:(0,A.Dc)(u),uiVersion:y.version,fileKey:c?.key||"",slideView:T?tb.zl.get(tv.v2)?"ssv":"grid":void 0}),trackImpressions:!1},a.createElement(R.wG,null,a.createElement(g.q5.Provider,{value:z},a.createElement(a.Fragment,null,!_&&eS,!_&&a.createElement(tl,{onWorkshopExpired:S}),O&&a.createElement(t$,{file:c})))))}function tj({children:e,file:t,loadedCommentsProvider:n,onCanvasExpired:i}){let l=(0,r.d4)(e=>e.userStateLoaded),o=(0,r.d4)(e=>e.mirror.appModel.isInitialized),s=(0,_.R)(e=>e.comments),{anchorPositions:c,boundingBoxPositions:d,DEPRECATED_updateWatchedNodeIds:u,updateWatchedStablePaths:m}=(0,O.Cn)(),p=(0,O.e_)(),g=(0,q.TA)();(0,to.ox)({file:t,onCanvasExpired:i});let f=a.createElement(tS.R,null,a.createElement(tT.P,null,a.createElement(y.tH,{boundaryKey:"InAppPage",fallback:a.createElement(tV,null),hasCustomWASMBuild:z.y4},a.createElement(tG,null,e))));return(0,S.T8)(n?a.createElement(T.NX,{userId:g,file:t,orgId:t?.parentOrgId??null,activeId:s.activeThread?.id||null,anchorPositions:c,boundingBoxPositions:d,DEPRECATED_updateWatchedNodeIds:u,updateWatchedStablePaths:m,getPageIdsForNodes:p},f):f,eS.e0.EDITOR,null!=t?(0,A.oP)(t):{},null!=t&&l&&o)}function t$({file:e}){let t=(0,$.sZ)();return(0,r.d4)(e=>e.modalShown?.type===eK.M)||!t?null:a.createElement(e1,{org:t,fileKey:e?.key})}(0,tC.n)(()=>{})},911179:(e,t,n)=>{n.d(t,{sk:()=>d4}),n(206354);var a=n(411855),r=n(188507),i=n(587670),l=n(794272),o=n(966712),s=n(915440),c=n(711525),d=n(453418),u=n(860601),m=n(563706),p=n(192437),_=n(939863),g=n(392592),f=n(952593),h=n(488090),E=n(964881),y=n(632430),b=n(625651),v=n(103907),C=n(259927),w=n(356390),T=n(776621),S=n(15220),x=n(604978),k=n(198868),N=n(601978);class I{static getCanvasColorSpace(e={}){let t=(0,N.dX)("fullscreen"),n=t?.getContext(S.ap()?"webgl2":"webgl")?.drawingBufferColorSpace;if("srgb"===n);else if("display-p3"===n)return e.returnString?i.RYP[i.RYP.DISPLAY_P3]:i.RYP.DISPLAY_P3;return e.returnString?i.RYP[i.RYP.SRGB]:i.RYP.SRGB}static setCanvasColorSpace(e){let t=(0,N.dX)("fullscreen"),n=t?.getContext(S.ap()?"webgl2":"webgl");"drawingBufferColorSpace"in n&&(n.drawingBufferColorSpace=e)}static getDocumentColorProfile(e={}){if(void 0===i.H4l)throw Error("ColorManagementStateJs is not defined");return e.returnString?i.ywP[i.H4l.documentColorProfile().getCopy()]:i.H4l.documentColorProfile().getCopy()}static async debugImagesFromSelection(){async function e(e){for(let t of["image/png","image/jpeg","image/heic"])try{return await x.EC.decodeAsync(e,t,0,0,!0)}catch(e){}return null}let t=(0,k.D)();for(let n of t.currentPage.selection){for(let a=0;a<n.fills.length;a++){let r=n.fills[a];if("IMAGE"===r.type){let l=t.getImageByHash(r.imageHash);if(!l)continue;let o=await l.getBytesAsync(),s=await e(o);if(s){let e={id:n.id,type:"fill",index:a,imageHash:r.imageHash,colorProfile:i.RYP[s.colorProfile],bytes:o};(0,T.ED)("ColorManagementDebug","images",e,{logToConsole:i.NUh.ALWAYS})}}}for(let a=0;a<n.strokes.length;a++){let r=n.strokes[a];if("IMAGE"===r.type){let l=t.getImageByHash(r.imageHash);if(!l)continue;let o=await l.getBytesAsync(),s=await e(o);if(s){let e={id:n.id,type:"stroke",index:a,imageHash:r.imageHash,colorProfile:i.RYP[s.colorProfile],bytes:o};(0,T.ED)("ColorManagementDebug","images",e,{logToConsole:i.NUh.ALWAYS})}}}}}}function A(){return a.useEffect(()=>((0,o.kc)().ee_color_management_debug&&(window.colorManagementDebug=I),()=>{"colorManagementDebug"in window&&delete window.colorManagementDebug}),[]),null}var O=n(441088),L=n(860178),D=n(99506),R=n(279453),M=n(336599),P=n(100197),F=n(601607),B=n(374626),U=n(966981),G=n(743905),K=n(54025),V=n(706966),H=n(30075),z=n(719624);function W(){let{Sprig:e}=(0,U.A)(),t=(0,B.md)(z.Lk),n=(0,V.I)(),{loaded:r,query:i,sessionId:l}=function(){let[e,t]=(0,a.useState)(!1),{currentSearch:n}=(0,B.md)(K.WP),r=(0,B.md)(G.hO.currentSearchAtom),i=(0,B.md)(z.dd);(0,a.useEffect)(()=>{let e=n?.result.status==="loaded",a=r?.result.status==="loaded";e&&a&&t(!0)},[n?.result.status,r?.result.status]);let l="";return n?.input.type==="input-text"&&(l=n.input.query),{loaded:e,query:l,sessionId:i}}(),s=(0,a.useRef)(null),c=(0,a.useRef)(!1),d=(0,a.useCallback)(()=>{s.current&&(clearTimeout(s.current),s.current=null)},[]),u=(0,a.useCallback)(()=>{e("track","quick_actions_assets_tab_search",{query:i,sessionId:l}),c.current=!0},[e,i,l]);return(0,a.useEffect)(()=>{if((0,o.kc)().assets_tab_sprig_tracking&&!c.current)return t===H.Jc.ASSETS&&r&&(n?s.current=setTimeout(()=>{u()},3e4):(u(),d())),d},[t,d,r,n,u]),null}var j=n(239671),$=n(279145),q=n(335682),Y=n(507956),X=n(201140),J=n(138020),Z=n(776250),Q=n(181912),ee=n(517333),et=n(323653),en=n(737947),ea=n(910522),er=n(650322),ei=n(946689),el=n(901536),eo=n(501114),es=n(160838),ec=n(206144),ed=n(654923),eu=n(838e3),em=n(738269),ep=n(293017),e_=n(662275),eg=n(995852),ef=n(931828),eh=n(760824),eE=n(107877),ey=n(349410),eb=n(101505),ev=n(672517),eC=n(809831),ew=n(198371),eT=n(875847),eS=n(29680),ex=n(694687),ek=n(594901),eN=n(309798),eI=n(106472),eA=n(643067),eO=n(243987),eL=n(147206),eD=n(428467),eR=n(746869),eM=n(984968),eP=n(668526),eF=n(851363),eB=n(283978),eU=n(965480),eG=n(777078),eK=n(809073),eV=n(407844),eH=n(164795);function ez({shouldDisplay:e,registerAsActive:t,bannerId:n,bannerContent:r,additionalTrackingProperties:i,dataTestId:l,location:o}){let s=(0,eS.p8)("showUi"),[c,d]=(0,a.useState)(!1),u=(0,eC.E3)();if((0,a.useEffect)(()=>t(n),[t,n]),(0,a.useEffect)(()=>{e&&d(!1)},[e]),!e||c||!s)return null;let m={id:n,...r},p={bannerId:eH.om[n],bannerType:m.bannerType,bannerLocation:o,...i};return a.createElement(ev.fu,{name:"TopBanner",properties:p},a.createElement(eV.C,{content:m,onDismiss:()=>d(!0),editorType:u,dataTestId:l}))}var eW=n(554905),ej=n(333369),e$=n(144119),eq=n(915914),eY=n(407909),eX=n(828702),eJ=n(318327);let eZ=JSON.parse('{"safari":"16","firefox":"101","chrome":"88","edge":"121","deprecatedOn":"2024-03-18T08:00:00.000Z"}');var eQ=n(896572),e0=n(315457),e1=n(10388),e2=n(87171);let e5={bannerId:eH.om.TestWarningBanner,Banner:function(e){let t=(0,q.q5)();if(t?._name==="_BANNERTEST PAYMENT"){let t={bannerType:eH.x1.WARN,icon:e2.A,mainText:"Payment failed",description:"Our last attempted charge was unsuccessful. Please update your payment source as soon as possible. File editing will be locked after 3 more failed attempts.",button:{buttonText:"Update payment",onClick:()=>{}},dismissible:!0};return a.createElement(ez,{...e,bannerContent:t})}return null},dataTestId:"test-warning-banner"},e3={bannerId:eH.om.TestOOMBanner,Banner:function(e){let t=(0,q.q5)();if(t?._name==="_BANNERTEST OOM"){let t={bannerType:eH.x1.WARN,icon:e2.A,mainText:"80% of memory used",customElem:a.createElement("div",{className:eQ.DB},a.createElement(eB.wc,{memoryUsagePercent:80})),description:a.createElement(a.Fragment,null,a.createElement("b",{style:eo.sx.fontSemiBold.$},"This file is almost out of browser memory.")," Remove content to lower memory use to 50% or less. This will ensure you can continue to work in this file safely."),button:{buttonText:"Show memory-reduction tips",onClick:()=>{}}};return a.createElement(ez,{...e,bannerContent:t})}return null},dataTestId:"test-oom-banner"},e4={bannerId:eH.om.BrowserDeprecationBanner,Banner:function(e){let{deprecatedOn:t,...n}=eZ,r=(0,ea.R)("day"),i=new Date(t);if(i>new Date(r.getTime()+24192e5)||!m.Ay.isUnsupportedBrowser(n))return null;let l=i>r?(0,_.t)("banner.browser_deprecation.description",{deprecationDate:i}):(0,_.t)("banner.browser_deprecation.description_now"),o={dismissible:!0,bannerType:eH.x1.WARN,icon:e2.A,mainText:(0,_.t)("banner.browser_deprecation.title"),description:l,button:{buttonText:(0,_.t)("banner.browser_deprecation.learn_more"),onClick:()=>en.Ay.redirect("https://help.figma.com/hc/en-us/articles/360039827194-Figma-browser-requirements","_blank")}};return a.createElement(ez,{...e,bannerContent:o})},dataTestId:"browser-deprecation-banner"},e6={bannerId:eH.om.DesktopDeprecationBanner,Banner:function(e){let t=(0,ee.GN)();if(null==t||B.zl.get(et.Pi))return null;let n=(0,_.t)("banner.desktop_app_deprecation.description",{deprecationDate:t.toDate()}),r={dismissible:!0,bannerType:eH.x1.WARN,icon:e2.A,mainText:(0,_.t)("banner.desktop_app_deprecation.title"),description:n,button:{buttonText:(0,_.t)("banner.desktop_app_deprecation.learn_more"),onClick:()=>en.Ay.unsafeRedirect("https://figma.com/downloads","_blank")},dismissedAtom:et.Pi};return a.createElement(ez,{...e,bannerContent:r})},dataTestId:"desktop-deprecation-banner"},e8={bannerId:eH.om.TestInfoBanner,Banner:function(e){let t=(0,q.q5)();if(t?._name==="_BANNERTEST EDU"){let t={bannerType:eH.x1.INFO,icon:e0.A,mainText:"File in Education Team",description:"This file is in an Education team. To keep editing this file after 00/00, verify that you're a student or educator.",button:{buttonText:"Verify status",onClick:()=>en.Ay.redirect("/education/apply",m.Ay.isIpadNative?void 0:"_blank")}};return a.createElement(ez,{...e,bannerContent:t})}return null},dataTestId:"test-info-banner"},e7={bannerId:eH.om.ProTeamPastDue,Banner:function(e){let t=(0,r.wA)(),n=(0,eM.cD)(),i=(0,r.d4)(e=>n?e.teams[n]:null),l=(0,ek.FC)(),o=n&&(0,eD.canAdminTeam)(n,l);if(i&&i.subscription===D.Qh.PAST_DUE){let r={bannerType:eH.x1.WARN,icon:e2.A,mainText:(0,_.t)("banner.pro_team_past_due.locked"),description:o?(0,_.t)("banner.pro_team_past_due.update_payment_source.can_admin",{teamName:i.name}):(0,_.t)("banner.pro_team_past_due.update_payment_source.no_admin",{teamName:i.name}),button:o?{buttonText:(0,_.t)("banner.pro_team_past_due.update_payment"),onClick:()=>{t?.(em.$T({view:"teamAdminConsole",teamId:n,teamAdminConsoleViewTab:eP.I.SETTINGS}))}}:void 0};return a.createElement(ez,{...e,bannerContent:r})}return null},dataTestId:"pro-team-past-due-banner"},e9={bannerId:eH.om.ExternalContentControlBanner,Banner:function(e){let t=(0,r.wA)(),n=(0,q.q5)(),i=(0,L.iZ)(),l=(0,ex.dq)(),o=(0,eL.R$)(i,l),s=(0,r.d4)(e=>{if(!o)return null;let t=e.orgById[i.external_restricted_org_id];return t?t.name:null});if(o&&s){let r=!!n&&n.viewerExportRestricted,i={bannerType:eH.x1.WARN,icon:e2.A,mainText:(0,_.tx)("external_collaboration_restricted.banner.title"),description:(0,_.tx)("external_collaboration_restricted.banner.restriction_description",{organizationName:s}),button:r?void 0:{buttonText:(0,_.t)("external_collaboration_restricted.banner.export_file"),onClick:()=>{n?.editorType==="design"?t(ep.u1({id:C.C9})):t(ep.TB({selectionArea:0,canvasArea:0,nodeCounts:{selectionNodeCount:0,canvasNodeCount:0,selectionStickyCount:0,canvasStickyCount:0,selectionTableCount:0,canvasTableCount:0}}))}},dismissible:!1};return a.createElement(ez,{...e,bannerContent:i})}return null},dataTestId:"external-content-control-banner"},te={bannerId:eH.om.DesktopDownloadBanner,Banner:function(e){let t=(0,r.wA)(),n=(0,r.d4)(e=>"fullscreen"===e.selectedView.view),i=(0,eN.f)("dismissed_desktop_download_banner_prompt");if(n&&!i&&!ee.eD&&(0,o.kc)().desktop_download_banner_prompt){let n={bannerType:eH.x1.INFO,icon:e1.A,mainText:(0,_.t)("banner.desktop_download_title"),description:(0,_.t)("banner.desktop_download_description"),button:{buttonText:(0,_.t)("banner.desktop_download_button"),onClick:()=>{en.Ay.redirect(`/download/desktop/${m.Ay.mac?"mac":"win"}`,"_blank")}},dismissible:!0,onDismiss:()=>t?.(ef.b({dismissed_desktop_download_banner_prompt:!0}))};return a.createElement(ez,{...e,bannerContent:n})}return null},dataTestId:"download-desktop-banner"},tt={bannerId:eH.om.ProTeamChargeFailed,Banner:function(e){let t=(0,r.wA)(),n=(0,eM.cD)(),i=(0,r.d4)(e=>n?e.teams[n]:null),l=(0,ek.FC)(),o=n&&(0,eD.canAdminTeam)(n,l);if(i&&i.subscription===D.Qh.GRACE_PERIOD){let r={bannerType:eH.x1.WARN,icon:e2.A,mainText:(0,_.t)("banner.pro_team_charge_failed.payment_failed"),description:o?(0,_.t)("banner.pro_team_charge_failed.unsuccessful_team_charge.can_admin",{teamName:i.name}):(0,_.t)("banner.pro_team_charge_failed.unsuccessful_team_charge.no_admin",{teamName:i.name}),button:o?{buttonText:(0,_.t)("banner.pro_team_charge_failed.update_payment"),onClick:()=>{t?.(em.$T({view:"teamAdminConsole",teamId:n,teamAdminConsoleViewTab:eP.I.SETTINGS}))}}:void 0,dismissible:!0};return a.createElement(ez,{...e,bannerContent:r})}return null},dataTestId:"pro-team-charge-failed-banner"},tn={bannerId:eH.om.ProTeamNoMonthlySubEditorCountExceeded,Banner:function(e){let t=(0,r.wA)(),n=(0,eM.cD)(),i=(0,r.d4)(e=>n?e.teams[n]:null),l=(0,ek.FC)(),s=n&&(0,eD.canAdminTeam)(n,l);if(i&&i.subscription===D.Qh.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED){let r=s?a.createElement("span",null,(0,_.tx)("banner.pro_team_no_monthly_sub.over_limit_as_admin.seat_rename",{contactSupportLink:a.createElement("a",{href:`mailto:${(0,o.W4)()}`},(0,_.tx)("banner.pro_team_no_monthly_sub.contact_support"))})):a.createElement("span",null,(0,_.tx)("banner.pro_team_no_monthly_sub.over_team_limit_without_admin.seat_rename",{teamName:i.name})),l={bannerType:eH.x1.WARN,icon:e2.A,mainText:(0,_.t)("banner.pro_team_no_monthly_sub.locked"),description:r,button:s?{buttonText:(0,_.t)("banner.pro_team_no_monthly_sub.manage_plan"),onClick:()=>{t?.(em.$T({view:"teamAdminConsole",teamId:n,teamAdminConsoleViewTab:eP.I.SETTINGS}))}}:void 0};return a.createElement(ez,{...e,bannerContent:l})}return null},dataTestId:"pro-team-no-monthly-sub-editor-count-exceeded-banner"},ta={bannerId:eH.om.ProTrialsExpiryBanner,Banner:function(e){let t=(0,r.wA)(),n=(0,q.q5)(),i=(0,eM.cD)(),l=(0,r.d4)(e=>i?e.teams[i]:null),o=(0,ek.FC)(),s=(0,r.d4)(e=>e.userTeamFlags),c=(0,r.Pj)(),d=(0,eI.q)({teamId:i,flag:eR.lg});if(!l||!n)return null;let u=(0,eD.canEditTeam)(l.id,o),m=(0,eO.oc)(l.id,o);if(eR.ng.canSeeExpiredProTrialBanner(s,l,o)&&(m||u&&!d)){let r,i,o;m?(o=eH.x1.WARN_SOFT,r=u?(0,_.tx)("banner.pro_trial_expiry.locked_description",{lowerUsageLink:a.createElement("button",{onClick:e=>{e.preventDefault(),t?.(e_.to({type:eJ.v,data:{teamId:l.id}}))}},(0,_.tx)("banner.pro_trial_expiry.lower_usage")),upgradeLink:a.createElement(ev.$z,{onClick:e=>{e.preventDefault();let n=c.getState();t(eg.WX({teamId:l.id,selectedView:n.selectedView}))}},(0,_.tx)("banner.pro_trial_expiry.upgrade"))}):(0,_.tx)("banner.pro_trial_expiry.locked_description_for_viewer_on_team",{teamName:l.name}),i={buttonText:(0,_.t)("banner.pro_trial_expiry.move_this_file_cta"),onClick:()=>(0,es.hd)({key:n.key,name:n.name,folder_id:n.folderId,team_id:n.teamId,editor_type:n.editorType,parent_org_id:n.parentOrgId},null,t)}):(o=eH.x1.INFO,r=(0,_.tx)("banner.pro_trial_expiry.expiry_description",{teamName:l.name}),i={buttonText:(0,_.t)("banner.pro_trial_upgrade_cta.upgrade_to_professional"),onClick:()=>{let e=c.getState();t(eg.WX({teamId:l.id,selectedView:e.selectedView}))}});let s={bannerType:o,icon:e2.A,mainText:(0,_.t)("banner.pro_trial_expiry.title"),dismissible:!m,onDismiss:m?void 0:()=>{t(eh.bE({all_team_flags:[{team_id:l.id,flags:{[eR.lg]:!0}}]}))},description:r,button:u?i:void 0};return a.createElement(ez,{...e,bannerContent:s})}return null},dataTestId:"pro-trials-expiry-banner"},tr={bannerId:eH.om.StarterTeamOverFreeLimitAndLocked,Banner:function(e){let t=(0,r.wA)(),n=(0,eM.cD)(),i=(0,r.d4)(e=>n?e.teams[n]:null),l=(0,ek.FC)(),o=(0,Y.ks)(),s=(0,eC.ow)(),c=(0,ey.Yz)(),d=(0,r.Pj)(),u=q.q5()?.canEdit,m=n&&(0,eD.canEditTeam)(n,l),p=i&&!(0,eO.n0)(i)&&!i.student_team&&(0,eO.oc)(i.id,l);if(p){let r=i.student_team_state===eF.kU.STUDENT_TEAM_CURRENT||i.student_team_state===eF.kU.STUDENT_TEAM_EXPIRED,l=c(p&&!r);if(l&&!u){let r=!!i.stripe_customer_id,l=s?(0,_.t)("locked_team.banner.this_board_is_part_of_a_locked_team"):(0,_.t)("locked_team.banner.this_file_is_part_of_a_locked_team"),c=a.createElement("div",{style:eo.sx.add({marginLeft:"-32px"}).$},(0,_.tx)(o?"locked_team.banner.all_of_this_teams_work_is_currently_view_only_dev_mode":"locked_team.banner.all_of_this_teams_work_is_currently_view_only",{learnMoreLink:m?a.createElement(a.Fragment,null,a.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),t?.(e_.to({type:eX.t,data:{teamId:n,canEditTeam:!0}}))}},(0,_.tx)("locked_team.banner.learn_more"))):a.createElement(a.Fragment,null)})),u=r?(0,_.t)("locked_team.banner.reactivate_professional"):(0,_.t)("locked_team.banner.upgrade_to_professional"),p={bannerType:eH.x1.WARN_SOFT,icon:a.createElement(X.s,null),mainText:l,description:c,button:m?{buttonText:u,onClick:()=>{let e=d.getState();t(eg.WX({teamId:n,selectedView:e.selectedView}))},className:eQ.Vg}:void 0};return a.createElement(ez,{...e,bannerContent:p})}if(!l&&!o){let r;r=m?a.createElement("span",null,a.createElement("b",{style:eo.sx.fontSemiBold.$},(0,_.tx)("banner.free_limit_locked.team_locked_over_starter_limits",{teamName:i.name})," "),(0,_.tx)("banner.free_limit_locked.upgrade_team_or_lower_usage",{teamName:i.name,learnMoreLink:a.createElement(a.Fragment,null,a.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),t?.(e_.to({type:eJ.v,data:{teamId:n}}))}},(0,_.tx)("banner.free_limit_locked.learn_more")))})):a.createElement("span",null,a.createElement("b",{style:eo.sx.fontSemiBold.$},(0,_.tx)("banner.free_limit_locked.team_locked_over_starter_limits",{teamName:i.name}))," ",(0,_.tx)("banner.free_limit_locked.ask_your_team_admin_for_details"));let l={bannerType:eH.x1.WARN,icon:e2.A,mainText:(0,_.t)("banner.free_limit_locked.locked"),description:r,button:m?{buttonText:(0,_.t)("banner.free_limit_locked.upgrade_now"),onClick:()=>{let e=d.getState();t(eg.WX({teamId:n,selectedView:e.selectedView}))},className:eQ.n3}:void 0};return a.createElement(ez,{...e,bannerContent:l})}}return null},dataTestId:"starter-team-over-free-limit-and-locked-banner"},ti={bannerId:eH.om.OrphanedOrgDraftsFile,Banner:function(e){let t=(0,q.q5)(),n=(0,ex.dq)(),i=(0,r.d4)(eA.wA),l=null,s=null;if((0,o.kc)().abandoned_drafts_editor_improvement?(l=n&&(0,J.oA)(t?.isAbandonedDraftFile),s=(0,J.oA)(t?.canMove)?a.createElement(a.Fragment,null,(0,_.tx)("banner.orphaned_projects.move_to_project")," ",a.createElement(ei.N_,{trusted:!0,target:"_blank",className:el.cx.inline.ml4.$,href:"https://help.figma.com/hc/articles/4420549259799"},(0,_.tx)("general.learn_more"))):(0,_.t)("banner.orphaned_projects.move_to_project.member",{orgName:i?.name??""})):(l=n&&t?.project&&(0,eT.n3)(t.project),s=(0,_.t)("banner.orphaned_projects.move_to_project")),l&&t){let t={bannerType:eH.x1.WARN,icon:e2.A,mainText:(0,_.t)("banner.orphaned_projects.file_in_an_abandoned_project"),description:s};return a.createElement(ez,{...e,bannerContent:t})}return null},dataTestId:"orphaned-org-drafts-file-banner"},tl={bannerId:eH.om.TeamAbandonedDraftsFile,Banner:function(e){let t=(0,q.q5)(),n=(0,ex.dq)(),r=(0,J.oA)(t?.isAbandonedDraftFile),i=(0,eM.ol)();if((0,o.kc)().abandoned_drafts_editor_improvement&&i&&!n&&r){let n=(0,J.oA)(t?.canMove)?a.createElement(a.Fragment,null,(0,_.tx)("banner.orphaned_projects.move_to_project.team")," ",a.createElement(ei.N_,{trusted:!0,target:"_blank",className:el.cx.inline.ml4.$,href:"https://help.figma.com/hc/articles/4420549259799"},(0,_.tx)("general.learn_more"))):(0,_.t)("banner.orphaned_projects.move_to_project.team_member",{teamName:i.name??""});if(t){let t={bannerType:eH.x1.WARN,icon:e2.A,mainText:(0,_.t)("banner.orphaned_projects.file_in_an_abandoned_project"),description:n};return a.createElement(ez,{...e,bannerContent:t})}}return null},dataTestId:"team-abandoned-drafts-file-banner"},to={bannerId:eH.om.PersonalProjectDeprecatedFile,Banner:function(e){let t=(0,q.q5)(),n=(0,eM.cD)(),i=(0,r.d4)(e=>n?e.teams[n]:null),l=(0,ex.dq)(),o=(0,r.wA)(),s=(0,ek.FC)();if(!(l&&t?.project&&(0,eT.n3)(t.project))&&!i&&t&&(0,eO.f4)(t.folderId,t.teamId,s)){let t={bannerType:eH.x1.WARN,icon:e2.A,mainText:(0,_.t)("banner.personal_projects.locked"),description:a.createElement(a.Fragment,null,(0,_.tx)("banner.personal_projects.deprecation_message",{learnMoreLink:a.createElement("a",{href:"/pricing-faq#what-changes-for-me"},(0,_.tx)("banner.personal_projects.learn_more"))})),button:{buttonText:(0,_.t)("banner.personal_projects.back_to_files"),onClick:()=>o?.(em.$T({view:"recentFiles"}))}};return a.createElement(ez,{...e,bannerContent:t})}return null},dataTestId:"personal-project-deprecated-file-banner"},ts={bannerId:eH.om.EduGracePeriodAccessRestricted,Banner:function(e){let t=(0,q.q5)(),n=(0,eM.cD)(),i=(0,r.d4)(e=>n?e.teams[n]:null),l=(0,L.iZ)(),o=(0,ew.nF)(),s=(0,r.d4)(e=>e.userEduGracePeriods);if(!n||!l)return null;if(i&&!o?.enabled&&t?.canEditIgnoreEduGracePeriod&&i&&(0,er.GU)(s,(0,er.cn)(l),n,!!i.student_team).showAccessRestricted){let t={bannerType:eH.x1.WARN,icon:e2.A,mainText:(0,_.t)("banner.edu_grace_period.verification_required"),description:(0,_.t)("banner.edu_grace_period.editing_restricted_on_file",{teamName:i.name}),button:{buttonText:(0,_.t)("banner.edu_grace_period.verify_status_button"),onClick:()=>en.Ay.redirect("/education/apply",m.Ay.isIpadNative?void 0:"_blank")}};return a.createElement(ez,{...e,bannerContent:t})}return null},dataTestId:"edu-grace-period-access-restricted-banner"},tc={bannerId:eH.om.EduGracePeriodShowReminder,Banner:function(e){let t=(0,q.q5)(),n=(0,eM.cD)(),i=(0,r.d4)(e=>n?e.teams[n]:null),l=(0,L.iZ)(),o=(0,ew.nF)(),s=(0,r.d4)(e=>e.userEduGracePeriods);if(n&&l){let r=i&&!o?.enabled&&t?.canEditIgnoreEduGracePeriod&&i&&(0,er.GU)(s,(0,er.cn)(l),n,!!i.student_team).showReminder,c=(0,er.zR)(s,n);if(r){let t={bannerType:eH.x1.INFO,icon:e0.A,mainText:(0,_.t)("banner.edu_grace_period.verification_required"),description:(0,_.t)("banner.edu_grace_period.grace_period_team_reminder",{teamName:i.name,endDate:c}),dismissible:!0,button:{buttonText:(0,_.t)("banner.edu_grace_period.verify_status_button"),onClick:()=>en.Ay.redirect("/education/apply",m.Ay.isIpadNative?void 0:"_blank")}};return a.createElement(ez,{...e,bannerContent:t})}}return null},dataTestId:"edu-grace-period-show-reminder-banner"},td={bannerId:eH.om.MultiplayerSessionUpgrade,Banner:function(e){let t=(0,eS.p8)("multiplayerSessionState")!==i.kul.UNJOINED,n=!(0,eS.p8)("isReadOnly");if((0,r.d4)(e=>e.showingUpgradeBanner)){let r={bannerType:eH.x1.INFO,icon:e2.A,mainText:(0,_.t)("banner.multiplayer_session_upgrade.page_out_of_date"),description:t?(0,_.t)("banner.multiplayer_session_upgrade.out_of_date.connected"):(0,_.t)("banner.multiplayer_session_upgrade.out_of_date.not_connected"),button:{buttonText:n?(0,_.t)("banner.multiplayer_session_upgrade.save_and_reload"):(0,_.t)("banner.multiplayer_session_upgrade.reload"),onClick:()=>{(0,Z.sx)("Upgrade Banner Clicked"),i.h3O.startUpgrade()}}};return a.createElement(ez,{...e,bannerContent:r})}return null},dataTestId:"multiplayer-session-upgrade-banner"},tu={bannerId:eH.om.FigJamTryDraftsBanner,Banner:function(e){let t=(0,r.wA)(),n=(0,q.q5)(),i=(0,ew.nF)(),l=(0,L.iZ)(),o=(0,eN.f)("dismissed_figjam_try_drafts_banner"),s=(0,ea.R)("minute");if(!i?.enabled||!n||!l)return null;if(!n.isTryFile&&!n.parentOrgId&&n.folderId===l.drafts_folder_id&&!o){let r=(0,Q.A)(s),l=Math.ceil((0,Q.A)(i.until).diff(r,"hours",!0)),o={bannerType:eH.x1.INFO,icon:e0.A,mainText:l>1?(0,_.t)("figjam_try.drafts_banner_title_more_time",{num_hours:l}):(0,_.t)("figjam_try.drafts_banner_title_1_hour_or_less"),description:(0,_.t)("figjam_try.drafts_banner_description"),onDismiss:()=>t?.(ef.b({dismissed_figjam_try_drafts_banner:!0})),dismissible:!0,button:{buttonText:(0,_.t)("figjam_try.move_file"),onClick:()=>(0,es.hd)({key:n.key,name:n.name,folder_id:n.folderId,team_id:n.teamId,editor_type:n.editorType,parent_org_id:n.parentOrgId},null,t)}};return a.createElement(ez,{...e,bannerContent:o})}return null},dataTestId:"figjam-try-drafts-banner"},tm={bannerId:eH.om.FigJamTryClaimBanner,Banner:function(e){let t=(0,r.wA)(),n=(0,q.q5)(),i=(0,ew.nF)(),l=(0,L.iZ)(),o=(0,eN.f)("dismissed_figjam_try_claim_banner"),s=(0,ea.R)("minute"),c=n?.key;if(!n?.isTryFile||m.Ay.isMeetDevice||!l||!i?.enabled||!c||o)return null;let d=(0,Q.A)(s),u=Math.ceil((0,Q.A)(i.until).diff(d,"hours",!0)),p=()=>{t(eu.Q({file_key:c}))},g={bannerType:eH.x1.INFO,icon:e0.A,mainText:u>1?(0,_.t)("figjam_try_v2.timer_hours_left",{hoursLeft:u}):(0,_.t)("figjam_try.claim_banner_title_1_hour_or_less"),description:(0,_.t)("figjam_try_v2.logged_in.after_that_this_board_will_be_deleted"),onDismiss:()=>t?.(ef.b({dismissed_figjam_try_claim_banner:!0})),dismissible:!0,button:{buttonText:(0,_.t)("figjam_try_v2.claim_file_logged_in"),onClick:()=>p()}};return a.createElement(ez,{...e,bannerContent:g})},dataTestId:"figjam-try-claim-banner"};function tp({hubFile:e}){return(0,ed._)(e)?(0,_.tx)("banner.freemium_preview.this_is_just_a_preview"):(0,_.tx)("banner.freemium_preview.get_the_full_file_on_community")}function t_({hubFile:e}){return(0,ed._)(e)?(0,_.tx)("banner.freemium_preview.you_purchased_this_file_already"):(0,_.tx)("banner.freemium_preview.this_is_just_a_preview_of_the_file_you_can_buy_on_community")}function tg({hubFile:e}){let t=(0,ed._)(e),n=t?"":`?${eE.Tb}`;return a.createElement(ec.A6,{to:`/community/file/${e.id}${n}`},a.createElement(ei.tM,{trackingProperties:{trackingDescriptor:t?eb.c.OPEN_IN_COMMUNITY:eb.c.BUY_THE_RESOURCE}},t?(0,_.tx)("banner.freemium_preview.open_in_community"):(0,_.tx)("banner.freemium_preview.buy_the_resource")))}let tf={bannerId:eH.om.FreemiumPreviewBanner,Banner:function(e){let t=(0,q.tS)(),n=(0,r.d4)(e=>t?e.figFileDuplicatedFromHubFile[t]:null),i=(0,r.d4)(e=>n?e.hubFiles[n.hubFileId]:null);return n&&n.isPreview&&i&&i.monetized_resource_metadata?a.createElement(ez,{...e,bannerContent:{bannerType:eH.x1.INFO,icon:e0.A,dismissible:!1,mainText:a.createElement(tp,{hubFile:i}),description:a.createElement(t_,{hubFile:i}),button:{type:eH.MA.CUSTOM,element:a.createElement(tg,{hubFile:i})}}}):null},dataTestId:"freemium-preview-banner"},th={bannerId:eH.om.FileCreationFailureBanner,Banner:function(e){if((0,r.d4)(e=>e.showingFileCreationFailureBanner)){let t={bannerType:eH.x1.WARN,dismissible:!1,mainText:(0,_.tx)("banner.file_creation_failure.title"),description:(0,_.tx)("banner.file_creation_failure.description")};return a.createElement(ez,{...e,bannerContent:t})}return null},dataTestId:"file-creation-failure-banner"},tE=[e4,e6,td,{bannerId:eH.om.FileIsTeamTemplate,Banner:function(e){let t=(0,r.wA)(),n=(0,eS.aV)(),i=(0,eU.kD)(),l=(0,eG.b4)(),o=(0,q.q5)(),s=(0,eU.tS)(),c=(0,eU.ac)(),d=(0,eW.Td)(),u=(0,eC.lg)(),m=(0,e$.sO)(),p=(0,L.iZ)(),g=p?.id&&i&&i.publishedByUserId===p.id,f=(0,eU.J3)();if(!s||n||!o||!i||d||null===c)return null;let h=c&&f===eU.kN.CAN_PUBLISH,E={type:eH.MA.STRUCTURED,onClick:()=>{i&&o&&l({templateIdentifier:{type:eK.vt.TeamTemplate,file_key:i.fileKey},templateName:i.name})},trackingDescriptor:eb.c.USE_IN_NEW_FILE,buttonText:m?(0,_.t)("slides.templates.banner.new_deck_button"):(0,_.t)("whiteboard.delightful_toolbar.custom_template_banner.new_file_button")};if(h){if(!g)return a.createElement(ez,{...e,bannerContent:{dismissible:!1,bannerType:eH.x1.INFO,icon:eY.A,mainText:(0,_.t)("templates.banner.republish.primary_text"),description:(0,_.t)("templates.banner.republish.secondary_text_not_owner"),button:E}});let n={type:eH.MA.STRUCTURED,onClick:()=>{(0,ej.YM)(t,i.fileKey,u,"editor-republish-banner")},trackingDescriptor:eb.c.PUBLISH_CHANGES,buttonText:(0,_.t)("templates.banner.republish.republish_action")};return a.createElement(ez,{...e,bannerContent:{dismissible:!1,bannerType:eH.x1.INFO,icon:eY.A,mainText:(0,_.t)("templates.banner.republish.primary_text"),description:(0,_.t)("templates.banner.republish.secondary_text"),button:n}})}let y=i.publishedByUser?.handle?(0,_.tx)("templates.banner.republish.you_re_viewing_a_template_made_by_publisher_name",{madeByPublisherName:a.createElement("span",{className:el.cx.fontNormal.$},g?(0,_.tx)("templates.banner.made_by_you"):(0,_.tx)("templates.banner.republish.made_by_publisher_name",{publisherName:i.publishedByUser.handle}))}):(0,_.t)("templates.banner.republish.you_re_viewing_a_template");return a.createElement(ez,{...e,bannerContent:{dismissible:!1,bannerType:eH.x1.INFO,icon:eq.A,mainText:y,button:E}})},dataTestId:"team-templates-banner"},e7,tt,tn,ta,tr,e9,ti,tl,to,ts,tc,tu,tm,tf,te,...(0,o.b5)()?[e5,e3,e8]:[]],ty=[e6,td,ti],tb=[th],tv=[],tC=a.memo(function({prioritizedBanners:e,location:t}){let{bannerIdToShow:n,registerActiveBanner:r}=function({prioritizedBanners:e}){let[t,n]=(0,a.useState)(new Set);return{registerActiveBanner:(0,a.useCallback)(e=>(n(t=>{if(t.has(e))return t;let n=new Set(t);return n.add(e),n}),()=>{n(t=>{if(t.has(e)){let n=new Set(t);return n.delete(e),n}return t})}),[]),bannerIdToShow:function(e,t=[]){let n=(0,a.useMemo)(()=>t.map(e=>e.bannerId).reduce((e,t,n)=>(e.set(t,n),e),new Map),[t]),r=(0,a.useMemo)(()=>[...e].reduce((e,t)=>{let a=n.get(t)??1/0;return a<e?a:e},1/0),[e,n]);return t[r]?.bannerId??null}(t,e)}}({prioritizedBanners:e});return a.createElement(a.Fragment,null,e.map(({bannerId:e,Banner:i,dataTestId:l})=>a.createElement(i,{key:e,bannerId:e,shouldDisplay:e===n,registerAsActive:r,location:t,dataTestId:l})))});function tw(){let e=function(){let e=(0,q.q5)(),t=(0,Y.ks)(),n=e?.teamId,a=(0,r.d4)(e=>n?e.teams[n]:null);return e?n&&!a?tv:t?ty:tE:tb}();return a.createElement(tC,{prioritizedBanners:e,location:"editor"})}var tT=n(949012);let tS=a.memo(function(){return(0,o.kc)().internal_only_debug_tools?a.createElement(tk,null):null});a.memo(function(){return(0,o.kc)().internal_only_debug_tools?a.createElement(tN,null):null});let tx={loading:()=>null,error:function(){return a.useEffect(()=>{console.error("Failed to load FigmaScope")},[]),null}},tk=tT.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(2512),n.e(4920),n.e(3779),n.e(6739),n.e(6832),n.e(7336)]).then(n.bind(n,99063)).then(e=>e.EmbeddedFigmaScopeViewForEditorEnabled),{...tx,componentName:"EmbeddedFigmaScopeViewForEditorEnabled"}),tN=tT.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(2512),n.e(4920),n.e(3779),n.e(6739),n.e(6832),n.e(7336)]).then(n.bind(n,99063)).then(e=>e.EmbeddedFigmaScopeViewForViewerEnabled),{...tx,componentName:"EmbeddedFigmaScopeViewForViewerEnabled"});var tI=n(695132),tA=n(199465),tO=n(629019),tL=n.n(tO),tD=n(638889),tR=n(126911);function tM(){let e=Array.from((0,P.ut)(i.Ez5?.uiState().autoLayoutShortcutHints,new Map).values()),t=(0,B.md)(z.Bu),n=tR.y.isApple(),r=e=>{switch(e){case i.oeV.IGNORE_AUTOLAYOUT:return{displayName:(0,_.t)("fullscreen.auto_layout_hints.ignore_auto_layout"),shortcutText:n?"\u2303 Ctrl":"S"};case i.oeV.PREVENT_NESTING:return{displayName:(0,_.t)("fullscreen.auto_layout_hints.prevent_nesting"),shortcutText:(0,_.t)("fullscreen.auto_layout_hints.space_key")};case i.oeV.FORCE_INSERTION:return{displayName:(0,_.t)("fullscreen.auto_layout_hints.force_insertion"),shortcutText:n?"\u2318":"Ctrl"}}},l=e=>e.isValid?e.isActive?"auto_layout_hints--activeShortcutWithTextContainer--dkT1S auto_layout_hints--shortcutWithTextContainer--uEquz":"auto_layout_hints--shortcutWithTextContainer--uEquz":"auto_layout_hints--invalidShortcutWithTextContainer--gvHLT auto_layout_hints--shortcutWithTextContainer--uEquz";return e?a.createElement("div",{className:tL()("auto_layout_hints--root--MJKU2",{"auto_layout_hints--rootAdjustedForQA--YZlbt":t})},a.createElement("div",{className:"auto_layout_hints--hintsBarContainer--3DyGD"},e.sort((e,t)=>e.shortcut-t.shortcut).map((e,t)=>{let n=r(e.shortcut);return a.createElement("div",{className:l(e),key:t},a.createElement("div",{className:e.isActive&&e.isValid?"auto_layout_hints--activeShortcutContainer--bj0CD auto_layout_hints--shortcutContainer--mIecl":"auto_layout_hints--shortcutContainer--mIecl"},n.shortcutText.length>0?a.createElement("div",{className:"auto_layout_hints--smallShortcutText--lHZ8Q utilities--bodySmall--JyKR1"},n.shortcutText):a.createElement(tD.S,{shortcut:n.shortcutText})),a.createElement("p",null,n.displayName))}))):null}let tP={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,clusterBy:"page",orphanedBy:"deleted_pages",filterBy:"hidden_sections"},tF={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,clusterBy:"page",orphanedBy:"deleted_pages"};var tB=n(514736),tU=n(448879),tG=n(91408),tK=n(506599),tV=n(213190),tH=n(818),tz=n(226055);function tW(){let e=(0,tz.GS)(),t=(0,r.d4)(e=>e.mirror?.appModel.showUi),n=(0,tH.b)(),a=(0,tV.qM)();return e&&t&&!(n&&!a)}var tj=n(617453),t$=n(231472),tq=n(531461),tY=n(760445),tX=n(837746);function tJ({children:e}){let t=(0,r.d4)(e=>e.universalInsertModal?.pinned===t$.t.PINNED_AND_DOCKED_LEFT),n=tW(),{isPropertiesPanelCollapsed:i}=(0,tK.iT)(),l=(0,tj.qw)();l=i?0:l;let o=a.useMemo(()=>[tq.mW.RESOLVED,tq.mW.YOURS,tq.mW.CURRENT_PAGE],[]),s=a.useMemo(()=>[tq.qN.CREATION_DATE,tq.qN.UNREAD],[]),{xDelta:c,yDelta:d}=(0,tU.m)(),u=a.useMemo(()=>{let e=(0,tG.hG)(tX.PXB),n=c;return t&&(n+=tY.AN+e),{xDelta:n,yDelta:d}},[t,d,c]),m=a.useMemo(()=>{let e=(0,tG.jz)(tX.LdP),t=0,a=0;return n&&(t+=e,a+=l),{maxHeightDelta:0,minBottomMarginDelta:t,minLeftMarginDelta:0,minRightMarginDelta:a}},[l,n]),p=a.useMemo(()=>{if(n)return{paddingRight:l}},[l,n]),_=a.useMemo(()=>({...tU.y,sidebarFilters:o,sidebarSorts:s,dockPositionAdjustment:u,draggableModalBoundsAdjustment:m,commentPositionPaddingAdjustment:p}),[o,s,p,u,m]);return a.createElement(tB.a.Provider,{value:_},e)}var tZ=n(612028),tQ=n(707458),t0=n(433861);let t1={isDevHandoff:!0};function t2({children:e}){let t=tW(),n=(0,E.hA)(),i=(0,r.d4)(e=>e.mirror.appModel.currentPage),l=a.useContext(t0.kw),{isPropertiesPanelCollapsed:o}=(0,tK.iT)(),s=(0,tj.UX)();s=o?0:s;let c=(0,tG.jz)(tX.ZB$),d=a.useMemo(()=>[tq.mW.RESOLVED,tq.mW.YOURS,tq.mW.CURRENT_PAGE],[]),u=a.useMemo(()=>[tq.qN.CREATION_DATE,tq.qN.UNREAD],[]),m=(0,tU.m)(),p=a.useMemo(()=>{let e=0,n=0;return t&&(e+=c,n+=s),{maxHeightDelta:0,minBottomMarginDelta:e,minLeftMarginDelta:0,minRightMarginDelta:n}},[c,s,t]),g=a.useMemo(()=>{if(t)return{paddingRight:s}},[s,t]),f=a.useCallback(e=>{if(!n)return!1;let t=e&&i?l.getCommentDestinationForCanvasPosition(e,i)?.nodeId:void 0;return!t||!(0,tZ.rV)(tQ.q.instance,n,t)},[i,l,n]),h=a.useMemo(()=>{let e={...tU.y,sidebarFilters:d,sidebarSorts:u,dockPositionAdjustment:m,draggableModalBoundsAdjustment:p,commentPositionPaddingAdjustment:g,linkGenerationParams:t1,isCommentingDisabledAtPosition:f,commentDisabledPositionBellMessage:(0,_.t)("dev_handoff.workflows.focus_view.comments")};return n&&(e.filterBy="non_dev_mode_focus"),e},[d,u,m,p,g,f,n]);return a.createElement(tB.a.Provider,{value:h},e)}var t5=n(568214),t3=n(813648),t4=n(228131),t6=n(525040),t8=n(368702),t7=n(908198);let t9={isFigJam:!0};function ne({children:e}){let t=(0,t6.Vi)(),n=(0,tz.GS)(),i=(0,r.d4)(e=>e.universalInsertModal?.pinned===t$.t.PINNED_AND_DOCKED_LEFT),l=a.useMemo(()=>[tq.mW.RESOLVED,tq.mW.YOURS],[]),o=a.useMemo(()=>[tq.qN.CREATION_DATE,tq.qN.UNREAD],[]),s=(0,tU.m)(),{xDelta:c,yDelta:d}=a.useMemo(()=>{if(n)return s;let e=(0,tG.jz)(tX.PXB),t=0;return i&&(t+=t3.gR+e),{xDelta:t,yDelta:0}},[i,n,s]),u=a.useMemo(()=>({xDelta:c,yDelta:d}),[c,d]),m=a.useMemo(()=>208,[]),p=a.useMemo(()=>{let e=new Map;return e.set(t4.b.DOCK_STYLE,t7._V),e.set(t4.b.ATTACHMENT_MODAL_BACKGROUND_COLOR,(0,t5.Bx)("light")),e},[]),_=a.useMemo(()=>{let e;let a=n?(0,tG.jz)(tX.LQy):(0,tG.jz)(tX.IuL),r=(0,tG.jz)(tX.rY4),i=0,l=0;return e=0-a,i+=a,t&&(l+=r),{maxHeightDelta:e,minBottomMarginDelta:i,minLeftMarginDelta:0,minRightMarginDelta:l}},[t,n]),g=a.useCallback(()=>{(0,t8.W)("left",()=>{})},[]),f=a.useMemo(()=>({showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,clusterBy:"page",orphanedBy:"deleted_pages",filterBy:"hidden_sections",sidebarFilters:l,sidebarSorts:o,dockPositionAdjustment:u,draggableModalBoundsAdjustment:_,onDockSideEffect:g,sidebarBottomPaddingAdjustment:m,styleOverrideMap:p,linkGenerationParams:t9}),[u,_,g,m,l,o,p]);return a.createElement(tB.a.Provider,{value:f},e)}var nt=n(372252);function nn({children:e}){let t=(0,r.d4)(e=>e.selectedView.editorType),n=a.useMemo(()=>{if(window.FigmaMobile)return t===j.nT.Whiteboard?function({children:e}){return a.createElement(tB.a.Provider,{value:tP},e)}:function({children:e}){return a.createElement(tB.a.Provider,{value:tF},e)};switch(t){case j.nT.Design:return tJ;case j.nT.Whiteboard:return ne;case j.nT.Slides:return nt.Yz;case j.nT.DevHandoff:return t2;default:return function({children:e}){return a.createElement(tB.a.Provider,{value:tU.y},e)}}},[t]);return a.createElement(n,null,e)}var na=n(266039),nr=n(504440),ni=n(140686),nl=n(256296),no=n(554322),ns=n(572206),nc=n(355819),nd=n(163023),nu=n(46415),nm=n(402603),np=n(973149);let n_=0;class ng{constructor(){this.work=()=>{let e=this.jobs.shift();if(e)try{let t=e.callback();e.resolve(t)}catch(t){e.reject(t)}},this.jobs=[]}isDone(){return 0===this.numJobs()}numJobs(){return this.jobs.length}cancelJobs(e){this.jobs=this.jobs.filter(t=>-1===e.indexOf(t.jobId))}queueJob(e){let t,n;let a=new Promise((e,a)=>{t=e,n=a}),r=++n_;return this.jobs.push({jobId:r,resolve:t,reject:n,callback:e}),{promise:a,jobId:r}}}let nf={requestAnimationFrame:e=>requestAnimationFrame(e),computeElapsedTime:e=>{let t=Date.now();return e(),Date.now()-t}},nh=new class{constructor(e={}){this.tick=()=>{if(!this.isTickScheduled)throw Error("wat, how did tick() get called if we're not ticking?");let e=0,t=0;for(;t<this.msPerTick&&!this.queuedWorker.isDone();)t+=this.utils.computeElapsedTime(this.queuedWorker.work),e++;this.debug&&console.log(`did ${e} jobs in ${t} ms`),this.isTickScheduled=!1,this.queuedWorker.isDone()||this.requestTick()},this.requestTick=()=>{this.isTickScheduled||(this.isTickScheduled=!0,this.utils.requestAnimationFrame(this.tick))},this.numJobs=()=>this.queuedWorker.numJobs(),this.queueJob=e=>{let{promise:t,jobId:n}=this.queuedWorker.queueJob(e);return this.requestTick(),{promise:t,jobId:n}},this.queuedWorker=new ng,this.isTickScheduled=!1,this.msPerTick=e.msPerTick||6,this.utils=e.utils||nf,this.debug=!0===e.debug}cancelJobs(e){this.queuedWorker.cancelJobs(e)}}({debug:!1});var nE=n(162620),ny=n(285381),nb=n(968783),nv=n(895083),nC=n(350428),nw=n(15859),nT=n(848661),nS=n(931770),nx=n(471224),nk=n(498606),nN=n(222478),nI=n(709731),nA=n(946465),nO=n(232309),nL=n(999140),nD=n(606432),nR=n(746806);let nM="export_picker--header--Wz6np",nP="export_picker--labelWithoutCheckbox--3zcNc export_picker--label--43URE",nF="export_picker--button--PiGDo";var nB=n(957412);let nU=(0,tG.hG)(tX.zK5);function nG(){let e=(0,q.q5)(),t=(0,r.d4)(e=>e.exportableItems),n=(0,r.d4)(e=>e.dropdownShown),i=!!e&&(0,eL.Pe)(e),l=(0,no.Av)(),o=(0,r.d4)(e=>e.saveAsState),s=(0,r.d4)(e=>e.mirror.appModel.currentPage),c=(0,r.wA)(),d=new ns.Mi(window.innerWidth-nU,l+12);return a.useEffect(()=>{c((0,nb.HR)())},[c]),a.createElement(nR.vx,{title:(0,_.t)("fullscreen.properties_panel.export"),headerSize:"small",initialPosition:d,onClose:()=>{c(ep.XE())},dragHeaderOnly:!0,headerClassName:"export_picker--modalHeader--f3fKx"},a.createElement("div",{className:"export_picker--exportModalContainer---vmI7"},a.createElement(nH,{exports:t,isCopyExportRestricted:i,width:nU,dispatch:c,dropdownShown:n,saveAsState:o,currentPage:s})))}let nK=new np.mz;function nV({nodeID:e,title:t,filename:n,exportSetting:r,colorProfile:l=i.RYP.SRGB,isBeingRenamed:s,...c}){let[d,u]=(0,a.useState)({size:"",warning:"",warningTooltip:""}),[m,p]=(0,a.useState)("");(0,a.useEffect)(()=>{let a={guid:e,title:t,filename:n,exportSetting:r},o=i.glU.getExportWarningAndSize(a);if(o){let{size:e,warning:t,warningTooltip:n}=o;u({size:e,warning:t,warningTooltip:n})}else console.error("Failed to export",a);let s=!!r.contentsOnly,c=(0,nT.gl)(r)?l:(0,nE.A)([r],l),{jobId:d}=nh.queueJob(()=>{let t=nS._G(new ns.Mi(32,32),e,s),n="";t&&t.pixels&&t.pixelSize&&t.displaySize&&(n=nS.Pv(t.pixels,t.pixelSize,c)),p(n)});return()=>nh.cancelJobs([d])},[l,r,n,e,t]);let{onToggleChecked:_,isChecked:g,isDisabled:f}=c,{imageType:h}=r,E=c.warning??d.warning,y=c.warningTooltip??d.warningTooltip,b=(0,a.useId)(),v=`${b}-input`,C=`${b}-desc`;return a.createElement("div",{className:"export_picker--row--lVRtp"},a.createElement("label",{htmlFor:v,className:"export_picker--label--43URE"},a.createElement(na.W,{id:v,checked:g,onChange:_,disabled:f,htmlAttributes:{"aria-describedby":C}}),a.createElement("div",{className:"export_picker--thumbContainer--xwXyl",onClick:t=>{t.preventDefault(),i.glU.panToNode(e,!1)},"aria-hidden":"true"},!!m&&a.createElement("img",{src:m,className:"export_picker--thumb--pKbcx","data-tooltip-type":nk.Ib.TEXT,"data-tooltip":n,alt:""})),a.createElement("div",{className:"export_picker--nameInfo--03piR export_picker--twoRows--PAHTA"},a.createElement("div",{className:tL()("export_picker--name--HuhHU ellipsis--ellipsis--Tjyfa",{"export_picker--nameRenaming--jTYjh":(0,o.kc)().ai_prod_rename_layers_dev_export&&s})},t),E&&a.createElement("div",{className:"export_picker--warningRow--PMwtO"},a.createElement(nd.B,{className:"export_picker--warningIcon--fgSRz",svg:nB.A,"data-tooltip-type":nk.Ib.TEXT,"data-tooltip":y}),a.createElement("span",{className:"export_picker--warning--qpraF ellipsis--ellipsis--Tjyfa"},E)))),a.createElement("div",{className:"export_picker--settingsInfo--H9DJ1 export_picker--twoRows--PAHTA",id:C},a.createElement("div",null,nK.format(r.constraint)," ",h),a.createElement("div",null,d.size)))}class nH extends a.PureComponent{constructor(){super(...arguments),this.state={renamingLayersRunning:!1,downloadStarted:!1,exportingStarted:!1,exportingProgress:0,exportingTotal:0,exportingJobIds:[]},this.onCancel=()=>{this.props.dispatch(ep.XE())},this.autoRenameFrameAndFile=async e=>{if(0===e.length)return;this.setState({renamingLayersRunning:!0}),this.props.exports.items.forEach(t=>{e.includes(t.nodeID)&&(t.isBeingRenamed=!0)}),B.zl.set(nL.zF,nv.uQ.EXPORT_PICKER),(0,nI.B3)(nN.JT.AUTO_RENAME_LAYERS),await (0,nI.Ag)(nN.JT.AUTO_RENAME_LAYERS,nv.Ay,{source:nv.uQ.EXPORT_PICKER,overwriteNames:!1,customNodeSelection:e,ignoreDescendants:!0});let t=(0,nI.pP)(nN.JT.AUTO_RENAME_LAYERS).state;t===nI.qy.DONE?this.props.exports.items.forEach(t=>{if(!e.includes(t.nodeID))return;let n=tQ.q.instance.get(t.nodeID)?.name;t.filename=t.filename.replace(t.title,n||t.title),t.title=n||t.title,t.isBeingRenamed=!1}):(t===nI.qy.ERROR||t===nI.qy.CANCELLED)&&this.props.exports.items.forEach(e=>{e.isBeingRenamed=!1}),this.setState({renamingLayersRunning:!1})},this.cancelAutoRename=()=>{let{aiTrackingContext:e}=(0,nI.pP)(nN.JT.AUTO_RENAME_LAYERS),t={...e,...(0,nA.LU)({shortcut:null,target:null}),interaction:nO.Ek.STOP};(0,nI.cT)(nN.JT.AUTO_RENAME_LAYERS),(0,nA.nP)(t)},this.onExport=e=>{if(this.props.isCopyExportRestricted||((0,Z.sx)("Export Picker Exported"),this.state.downloadStarted||this.state.exportingStarted||this.isExporting()||0===e.length))return;let t=[this.props.currentPage];nw.xY.includeOutsideContents(e.map(e=>e.exportSetting))||(t=e.map(e=>e.nodeID)),this.setState({downloadStarted:!0}),(0,nx.Dc)(nx.hV.Export,this.props.saveAsState,this.props.dispatch,()=>{this.setState({exportingStarted:!0,downloadStarted:!1}),this.exportItemsWithFullscreen(e)},t,"export-picker")},this.exportItemsWithFullscreen=e=>{let t=e.map(e=>({guid:e.nodeID,title:e.title,filename:e.filename,exportSetting:e.exportSetting})),n=0;i.glU.clearExportedItems();let a=t.map(e=>nh.queueJob(()=>i.glU.exportItem(e))),r=a.map(e=>e.promise);r.forEach(e=>e.then(()=>this.setState({exportingProgress:++n}))),this.setState({exportingProgress:0,exportingTotal:t.length,exportingJobIds:a.map(e=>e.jobId)}),Promise.all(r).then(()=>{this.setState({exportingJobIds:[]}),i.glU.saveExportedItems(),this.props.dispatch(ep.XE()),this.props.dispatch(nu.rg())})},this.setAllChecked=e=>{this.props.exports.items.forEach((t,n)=>{this.props.dispatch(nm.G({itemID:t.itemID,checked:e}))})},this.setChecked=(e,t)=>{this.props.dispatch(nm.G({itemID:e.itemID,checked:t}))},this.isChecked=e=>this.props.exports.checked[e.itemID],this.renderRenameLayersButton=e=>{let{detectedUnnamedLayers:t,exceedingLayerLimit:n,renamableNodeGuids:r}=(0,nC.Mc)(e.map(e=>e.nodeID),!0),i=this.state.renamingLayersRunning?this.cancelAutoRename:()=>this.autoRenameFrameAndFile(r),l=!(t&&!n)||this.state.downloadStarted||this.state.exportingStarted;return a.createElement(nr.Pw,{variant:"secondary",onClick:i,disabled:l},this.state.renamingLayersRunning?(0,_.tx)("fullscreen.export.cancel"):a.createElement("div",{className:el.cx.flex.flexRow.justifyCenter.gap8.$},(0,_.tx)("fullscreen.context_menu.auto_rename_layers"),a.createElement(nD.W,null)))}}isExporting(){return this.state.exportingJobIds&&this.state.exportingJobIds.length>0}componentWillUnmount(){this.isExporting()&&nh.cancelJobs(this.state.exportingJobIds)}getItemsToExport(){return this.props.exports.items?this.props.exports.items.filter(e=>this.isChecked(e)):[]}renderHeader(){if(this.isExporting())return a.createElement("div",{className:nM},a.createElement("label",{className:nP},(0,_.tx)("fullscreen.export.preparing_exporting_progress_of_exporting_total",{exportingProgress:this.state.exportingProgress,exportingTotal:this.state.exportingTotal})),a.createElement(ei.nR,{className:nF,onClick:this.onCancel},(0,_.tx)("fullscreen.export.cancel")));if(this.state.exportingStarted||!this.props.saveAsState.startTime&&this.state.downloadStarted)return a.createElement("div",{className:nM},a.createElement("label",{className:nP},(0,_.tx)("fullscreen.export.exporting")));if(this.state.downloadStarted){if(!(this.props.saveAsState.totalImagesToDownload>0))return a.createElement("div",{className:nM},a.createElement("label",{className:nP},(0,_.tx)("fullscreen.export.downloading")));{let e=Math.min(this.props.saveAsState.totalImagesToDownload,this.props.saveAsState.totalImagesToDownload-this.props.saveAsState.remainingImagesToDownload);return a.createElement("div",{className:nM},a.createElement("label",{className:nP},(0,_.tx)("fullscreen.export.downloading_progress",{downloadingProgress:e,downloadingTotal:this.props.saveAsState.totalImagesToDownload})),a.createElement(ei.nR,{className:nF,onClick:this.onCancel},(0,_.tx)("fullscreen.export.cancel")))}}{let e=this.props.exports.items||[],t=e.filter(this.isChecked).length,n=e.length,r=n===t;return a.createElement("div",{className:nM},a.createElement(ni.S,{checked:r,mixed:!r&&t>0,onChange:()=>this.setAllChecked(!r),label:a.createElement(nl.J,null,(0,_.tx)("fullscreen.export.num_selected_of_total_selected",{numSelected:t,total:n}))}),a.createElement(ei.nR,{className:tL()(nF,"export_picker--flexRight--PFS7g"),disabled:!t,onClick:()=>this.onExport(this.getItemsToExport()),autoFocus:!0},(0,_.tx)("fullscreen.export.export")))}}render(){let e=this.props.exports.items&&this.props.exports.items.length>0;return a.createElement("div",null,a.createElement("div",{className:"export_picker--modal--FoIpV"},this.renderHeader(),a.createElement(nc.P,{width:this.props.width,className:"export_picker--scrollContainer--F9sI6"},!e&&a.createElement("div",{className:"export_picker--emptyModal--x2aqt"},(0,_.tx)("fullscreen.export.no_selected_layers_with_export")),a.createElement(ny.ZH,null,({documentExportColorProfile:t})=>e&&this.props.exports.items.map((e,n)=>a.createElement(nV,{key:n,colorProfile:t,isDisabled:this.isExporting(),isChecked:this.isChecked(e),onToggleChecked:()=>this.setChecked(e,!this.isChecked(e)),isBeingRenamed:(0,o.kc)().ai_prod_rename_layers_dev_export&&e.isBeingRenamed,...e})))),(0,o.kc)().ai_prod_rename_layers_dev_export&&a.createElement("div",{className:"export_picker--footer--a3gs1"},this.renderRenameLayersButton(this.getItemsToExport()))))}}nH.displayName="ExportPicker";var nz=n(29808),nW=n(566418),nj=n(592096),n$=n(457630),nq=n(416095),nY=n(173454),nX=n(187882),nJ=n(859703);let nZ=(0,tG.jz)(tX.ZAq);function nQ(){let e=(0,r.d4)(e=>e.eyedropper),t=(0,r.d4)(e=>e.library.local.styles),n=(0,B.md)(nJ.Cg),a=(0,r.d4)(e=>e.library.used__LIVEGRAPH.styles);if(!e)return null;let l=e.assetId,o={},s=e.variableSetModeId;if(""===l)return null;let c=null,d=null;if(nW.PK.isValid(l)?!(c=nW.PK.toGuidStrIfLocal(l))&&(d=nW.PK.toRefIfSubscribed(l))&&(c=nW.PK.fromRef(d)):nW.sD.isValid(l)&&(c=nW.sD.toString(l)),!c)return null;if(c in o)return o[c];if(c in t){let e={style:t[c]};return o[c]=e,e}if(c in n){let e={variable:n[c],variableModeId:s};return o[c]=e,e}if(d){let e=(0,nq.yh)(d.key,a,{}),t=null;return e&&(t={style:e},o[c]=t),t}let u=i.CWU.getSubscribedVariableInfo(c);if(u){let e={variable:(0,nY.ZI)(u),variableModeId:s};return o[c]=e,e}return null}function n0(){let e=(0,n$._X)({subscribeToUpdates_expensive:!0}),t=(0,nX.Ye)(),n=(0,no.Pg)(),r=(0,eV._)(),{left:i,right:l}=(0,nj.LO)();return a.useCallback((a,o,s)=>{let c={top:r,left:t?0:i,right:e.width-Math.max(l,s+26),bottom:e.height-n-nZ-8},d=a+13;a<c.left?d=c.left+13:a>c.right&&(d=a-s-4);let u=o+14;return o>c.bottom&&(u=Math.min(c.bottom,o-n-24)),{x:d,y:u}},[e,t,n,r,i,l])}var n1=n(86625);function n2({initialPosition:e,initialCreationColor:t,initialView:n,disableStyleModal:l,onClose:o}){let{VariableAndStyleCreateModalRoot:s}=a.useContext(nz.l)??{},c=(0,r.d4)(e=>e.pickerShown),d=(0,r.wA)();function u(){(ep.Ty(c?.id??null)||ep.kU(c?.id??null))&&d(ep.XE())}let m=a.useMemo(()=>({type:i.Z_n.COLOR,resolvedType:i.rXF.COLOR,value:t}),[t]);return e&&s?a.createElement(s,{initialPosition:e,initialVariableValue:m,initialView:n,resolvedType:i.rXF.COLOR,inheritStyleKeyField:"inheritFillStyleKey",initialStyleCreationPaint:{type:"SOLID",opacity:1,visible:!0,blendMode:"NORMAL"},onCreateVariable:function(e){i.OmW?.applyVariable(e.node_id),u()},onCreateStyle:function(e){n1.l7.system("create-new-style-from-eyedropper",()=>{i.OmW.applyStyle(e.node_id),u()})},onClose:o,disableStyleModal:l,shouldUseEyedropperStyleCreationFlow:!0}):null}var n5=n(350730),n3=n(686759),n4=n(934533),n6=n(750029),n8=n(32067),n7=n(846848),n9=n(428877),ae=n(137906),at=n(38329),an=n(988022);function aa(e,t,n,a){let r="raw",i=t;return n&&"style name"===e?(r="style",i=n.node_id):a&&"variable name"===e&&(r="variable",i=a.node_id),[r,i]}let ar=document.createElement("canvas"),ai=ar.getContext("2d"),al=(e,t,n,a,r,i)=>{e.save();{let l=t/2;i?e.roundRect(0,0,48,48,5):e.arc(l,l,l-2,0,2*Math.PI,!1),e.clip();let{width:o,height:s,rgba:c,grid:d}=r;if(ai){let n=ai.createImageData(o,s);n.data.set(c),ar.width=o,ar.height=s,ai.putImageData(n,0,0),e.imageSmoothingEnabled=!1,e.drawImage(ar,0,0,t,t)}if(d){e.beginPath();let r=i?1:0,l=i?-.5:.5;for(let i=1;i<a;i++)l+=n,e.moveTo(l,r),e.lineTo(l,t-r),e.moveTo(r,l),e.lineTo(t-r,l);e.strokeStyle=i?"rgba(0, 0, 0, 0.1)":"rgba(51, 51, 51, 0.2)",e.stroke()}}e.restore()},ao=(e,t,n,a)=>{a||(e.strokeStyle="white",e.strokeRect(t-n/2-.5,t-n/2-.5,n+2,n+2),e.strokeStyle="black",e.strokeRect(t-n/2+.5,t-n/2+.5,n,n))},as=(e,t,n)=>{if(n){e.beginPath(),e.roundRect(.5,.5,47,47,5),e.strokeStyle="rgba(0, 0, 0, 0.1)",e.stroke();return}e.beginPath(),e.arc(t,t,t-1,0,2*Math.PI,!1),e.strokeStyle="white",e.stroke(),e.beginPath(),e.arc(t,t,t-2,0,2*Math.PI,!1),e.strokeStyle="black",e.stroke()};function ac(e,t,n){let a=n?7:17,r=n?7:10,i=n?48:a*r,l=e.getContext("2d");if(!l)return;let o=devicePixelRatio;e.width=i*o,e.height=i*o,l.scale(o,o),al(l,i,r,a,t,n),ao(l,i/2,r,n),as(l,i/2,n)}let ad="eyedropper_v2--text--dOiTx",au="eyedropper_v2--rowContents--dv3nr",am="eyedropper_v2--chit--1D1ND",ap=(0,tG.jz)(tX.k22),a_=a.createElement("div",{className:tL()(ad,"eyedropper_v2--keyTextBadge--ERRPy eyedropper_v2--keyBadge--9GITk")},a.createElement(tD.S,{shortcut:"shift"})),ag=a.createElement("div",{className:tL()(ad,"eyedropper_v2--keyMetaBadge--S1g3y eyedropper_v2--keyBadge--9GITk")},a.createElement(tD.S,{shortcut:"\u2318"}));function af({eyedropper:e,onOpenCreationModal:t}){let n,l;let s=nQ(),c=(0,r.wA)(),d=function(){let e=i.Ez5?.uiState().backgroundPickerOpen.getCopy(),t=(0,r.d4)(e=>e.mirror.appModel.prototypeBackgroundPickerOpen),n=(0,r.d4)(e=>e.variablePickerShown.isShown),a=(0,r.d4)(e=>e.mirror.appModel.currentSelectedProperty),l=(0,r.d4)(e=>e.mirror.selectionProperties.numSelected);return e||t||n||a.type!==i.rrT.NONE||0!==l}(),u=(0,eC.ow)(),[m,p]=a.useState(!1),f=a.useRef(null),h=a.useRef(null);a.useLayoutEffect(()=>{if(h.current){let{width:t,height:n,rgba:a,grid:r}=e;ac(h.current,{width:t,height:n,rgba:a,grid:r},!0)}});let E=(0,n9.Ig)(),y=(0,tj.Ku)(),b=function(){let e=(0,tj.Ku)();return a.useCallback(()=>{let t=Object.keys(i.NVY).length/2,n=(e+1)%(t-1),a=[i.NVY.CSS,i.NVY.UIColor];for(;a.includes(n);)n=(n+1)%(t-1);(0,tj.UK)().colorFormat.set(n)},[e])}(),v=n0(),C=(0,n8.Tv)(),w=(0,t5.H0)(e.color)??t5.UE,T=(0,t5.H0)(e.resolvedVariableColor)??t5.UE,S=s?.style?s.style:void 0,x=s?.variable?s.variable:void 0,k=E(w,{eyedropperFormat:!0})||"",N="";S?(N=S.name,n=a.createElement("div",null,a.createElement("div",{className:"eyedropper_v2--styleCircle--rLPqT"}),a.createElement(ae.zi,{dsStyle:S,disableOutline:!0,disableTooltip:!0})),l="eyedropper-v2-style"):x?(N=x.name,n=a.createElement(n6.J,{className:am,color:T,hideBorderShadow:!0}),l="eyedropper-v2-variable"):(0,o.kc)().ds_eyedropper_creation_flow&&!u&&(e.dropperData.creationFlow===i._4o.STYLES?(N=(0,_.t)("eyedropper.create_style"),n=a.createElement(n5.J,null),l="eyedropper-v2-style-creation"):e.dropperData.creationFlow===i._4o.VARIABLES&&(N=(0,_.t)("eyedropper.create_variable"),n=a.createElement(n5.J,null),l="eyedropper-v2-variable-creation"));let I=!u&&e.dropperData.creationFlow!==i._4o.NONE&&(0,o.kc)().ds_eyedropper_creation_flow&&!S&&!x,A=S||x?[a_]:I?[a_,ag]:[],O=a.useCallback(()=>{if(!f.current)return null;t(w,e)},[t,w,e]),L=a.useCallback(e=>{"Tab"===e.key&&(e.preventDefault(),b()),e.shiftKey&&(I&&e.metaKey||!I)&&p(!0)},[b,I]),D=a.useCallback(e=>{e.shiftKey||"Shift"!==e.key||p(!1)},[]),R=a.useCallback(e=>{I&&m&&O()},[I,m,O]),M=a.useCallback(e=>{let t=document.elementFromPoint(e.clientX,e.clientY);f.current&&(t?.tagName==="CANVAS"?f.current.style.visibility="visible":f.current.style.visibility="hidden")},[]),P=a.useCallback(t=>{if(f.current?.style.visibility!=="visible")return;let n="",a="";if(m&&(S?n="style name":x&&(n="variable name"),a=N),""===n&&(n=n7.Fr.format(y),a=k),d){!function(e,t,n,a,r,i){let l=at.D.getState(),o=aa(n,a,r,i)[0];(0,an.GS)("paint.set",l.openFile?.key??"",l,{nodeIds:JSON.stringify(e),picker_shown:l.pickerShown?.id,paint_picker_session_id:t.paintPickerId,tracking_session_dropper_id:t.dropperId,entry_point:t.entryPoint,paint_picker_tab:t.paintPickerTab,paint_picker_filter:t.paintPickerFilter,selection_type:o,sampled_node_contains_style:!!r,sampled_node_contains_variable:!!i})}(C,e.dropperData,n,a,S,x);return}(0,n3.Dk)(a),c(g.F.enqueue({i18n:{id:n4.XU.EYEDROPPER_COPY_PASTE_BELL_ID,params:{text:n,textSecondary:a}}})),function(e,t,n,a,r){let i=at.D.getState(),[l,o]=aa(t,n,a,r);(0,an.ds)("eyedropper_copy",i.openFile?.key,i,{tracking_session_dropper_id:e,selected_value_type:l,copied_value:o,contains_style:!!a,contains_variable:!!r})}(e.dropperData.dropperId,n,a,S,x)},[y,c,e.dropperData,k,d,N,m,S,x,C]);return a.useEffect(()=>(window.addEventListener("keydown",L),window.addEventListener("keyup",D),window.addEventListener("pointerout",M),window.addEventListener("pointerup",P),window.addEventListener("mousedown",R),()=>{window.removeEventListener("keydown",L),window.removeEventListener("keyup",D),window.removeEventListener("pointerout",M),window.removeEventListener("pointerup",P),window.removeEventListener("mousedown",R)})),a.useEffect(()=>{if(!f.current)return;let t=v(e.cursorPosition.x,e.cursorPosition.y,ap);f.current.style.transform=`translate(${t.x}px, ${t.y}px)`,e.dropperData.entryPoint&&"paintPicker"!==e.dropperData.entryPoint&&(f.current.style.visibility="visible")},[e.cursorPosition,D,L,v,e.dropperData.entryPoint]),a.createElement("div",{className:tL()("eyedropper_v2--eyedropperv2----W5m"),ref:f},a.createElement("div",{className:tL()("eyedropper_v2--loupeSamplingSquare--mt9xT")}),a.createElement("canvas",{ref:h}),a.createElement("div",null,a.createElement(ah,{icon:a.createElement(n6.J,{className:am,color:w,hideBorderShadow:!0}),text:k,keyBadges:[],isSelected:!m}),a.createElement(ah,{icon:n,text:N,keyBadges:A,isSelected:m,dataTestId:l})))}function ah({icon:e,text:t,keyBadges:n,isSelected:r,dataTestId:i}){return a.createElement("div",{className:tL()("eyedropper_v2--menuRow--IGEss",r&&"eyedropper_v2--selectedRow--GlyoK",C.Dm),"data-testid":i},a.createElement("div",{className:au},a.createElement("div",{className:"eyedropper_v2--iconContainer--TVZ5N"},e),a.createElement("div",{className:tL()("eyedropper_v2--menuOption--WK4oh",ad)},t)),a.createElement("div",{className:au},n&&n.map((e,t)=>a.createElement("div",{key:t},e))))}let aE=(0,tG.jz)(tX.k22);function ay(){let{VARIABLE_CREATE_MODAL_WIDTH_PX:e}=a.useContext(nz.l)??{},t=(0,r.d4)(e=>e.eyedropper),n=a.useRef(),l=n0(),[s,c]=a.useState(!1),[d,u]=a.useState(null),[m,p]=a.useState("createVariable"),[_,g]=a.useState(!1),f=s&&(0,o.kc)().ds_eyedropper_creation_flow&&d;return a.createElement(a.Fragment,null,t&&a.createElement(af,{eyedropper:t,onOpenCreationModal:(t,a)=>{c(!0),u(t),p(a.dropperData.creationFlow===i._4o.STYLES?"createStyle":"createVariable"),g(a.dropperData.canAcceptStyles);let r=l(a.cursorPosition.x,a.cursorPosition.y,e??aE),o=new ns.Mi(r.x,r.y);n.current=o,i.OmW?.toggleOffEyedropper()}}),f&&a.createElement(n2,{initialPosition:n.current,initialCreationColor:d,initialView:m,disableStyleModal:!_,onClose:function(){c(!1)}}))}var ab=n(603689);let av="eyedropper_view--label--PsjGr";function aC(){let e=(0,r.d4)(e=>e.eyedropper),t=nQ(),n=(0,eS.p8)("showUi"),i=(0,ab.lz)(),l=(0,Y.ks)(),s=(0,eC.ow)(),c=(0,tz.GS)(),d=(0,o.kc)().ds_library_eye_dropper&&c,u=(0,tj.qw)(),m=a.useRef(null),p=d?7:10,_=d?48:(d?7:17)*p,g=_/2;if(a.useLayoutEffect(()=>{if(e&&m.current){let{width:t,height:n,rgba:a,grid:r}=e;ac(m.current,{width:t,height:n,rgba:a,grid:r},!1)}}),!e)return null;let f=n&&!s?c?l?i+(0,tG.jz)(tX.ms_):u+(0,tG.jz)(tX.ms_):l?i:(0,tG.jz)(tX.uj0):0;return a.createElement("div",{className:tL()({"eyedropper_view--container--Qpjgx":!0,"eyedropper_view--topToolbarShown--Aoby4":n,"eyedropper_view--topToolbarHidden--Auk7e":!n}),style:{width:_,height:_,right:(0,tG.jz)(tX.ms_)+f}},a.createElement("canvas",{ref:m}),(0,o.kc)().ds_style_eye_dropper?a.createElement("div",{className:av,style:{left:3*p,right:3*p,top:2*g+p,lineHeight:1.5*p+"px",borderRadius:p/2,padding:p/2+"px"}},(()=>{if(t){if(t.style)return t.style.name;if(t.variable)return t.variable.name}return e.color})()):a.createElement("div",{className:av,style:{left:3*p,right:3*p,top:g+4*p,lineHeight:2*p+"px",borderRadius:p}},e.color))}var aw=n(153234),aT=n(893281),aS=n(607899),ax=n(959232),ak=n(318812),aN=n(541878),aI=n(179447),aA=n(7959),aO=n(538697),aL=n(585878);let aD="figjam_export_pickers--selectRow--aTA0S figjam_export_pickers--row--iT7Hm",aR="figjam_export_pickers--label--a71ES",aM="figjam_export_pickers--dropdownPlaceholderText--JNOu2 ellipsis--ellipsis--Tjyfa",aP="figjam_export_pickers--backgroundTypeIcon--s-7IZ",aF="figjam_export_pickers--option--WG1Jy";var aB=n(967063);class aU extends aO.l6{}class aG extends aO.c${}class aK extends aO.l6{}class aV extends aO.c${}class aH extends aO.l6{}class az extends aO.c${}class aW extends aO.l6{}class aj extends aO.c${}let a$={PNG:i.v8u.PNG,JPG:i.v8u.JPEG,CSV:i.v8u.CSV,PDF:i.v8u.PDF},aq=e=>{switch(e){case i.v8u.PNG:return"PNG";case i.v8u.JPEG:return"JPG";case i.v8u.CSV:return"CSV";case i.v8u.PDF:return"PDF"}},aY=e=>{switch(e){case i.ZRE.SOLID:return(0,_.t)("whiteboard.figjam_export.solid");case i.ZRE.TRANSPARENT:return(0,_.t)("whiteboard.figjam_export.transparent");case i.ZRE.GRID:return(0,_.t)("whiteboard.figjam_export.grid")}},aX=e=>{switch(e){case i.EUU.TABLE:return(0,_.t)("whiteboard.figjam_export.table");case i.EUU.STICKY:return(0,_.t)("whiteboard.figjam_export.sticky")}},aJ={format:e=>aY(e)},aZ={format:e=>aX(e)},aQ=e=>{switch(e){case"selection":return(0,_.t)("whiteboard.figjam_export.selection_only");case"file":return(0,_.t)("whiteboard.figjam_export.entire_file")}},a0={format:e=>aQ(e)},a1=e=>{switch(e){case i.v8u.CSV:return[];case i.v8u.JPEG:return[i.ZRE.SOLID,i.ZRE.GRID];case i.v8u.PNG:return[i.ZRE.TRANSPARENT,i.ZRE.SOLID,i.ZRE.GRID];case i.v8u.PDF:return[i.ZRE.SOLID]}};function a2(e,t){return a1(t).includes(e)}function a5(e){switch(e.background){case i.ZRE.TRANSPARENT:return a.createElement("div",{className:aP,style:{background:`url(${(0,ax.A)()})`,backgroundSize:"5px 5px"}});case i.ZRE.GRID:return a.createElement("div",{className:`figjam_export_pickers--gridIcon--mPS09 thumbnail_DEPRECATED--lightModeDotGrid--ZUhXy thumbnail_DEPRECATED--thumbnailContainer--xPcsg ${aP}`});case i.ZRE.SOLID:return a.createElement("div",{className:`${aP} figjam_export_pickers--solidIcon--Gt-95`})}}let a3=a.memo(function(){let e=(0,r.wA)(),t=()=>{e(ep._O())};return a.createElement(aL.XV,{title:(0,_.t)("whiteboard.figjam_export.export"),headerClassName:"figjam_export_pickers--modalHeader--E6NRM",headerSize:"small",closeOnEsc:!0,onClose:t,minWidth:364,maxWidth:364},a.createElement(a4,{onCancel:t,recordingKey:"exportSettingsPicker",dispatch:e}))});function a4(e){let t=(0,ak.Um)(),n=(0,P.J2)(i.Ez5.editorPreferences().exportSelectionSettings),l=(0,r.d4)(e=>e.exportSettingsPickerShown.pickerInfo??{selectionArea:0,canvasArea:0,nodeCounts:{selectionNodeCount:0,canvasNodeCount:0,selectionStickyCount:0,canvasStickyCount:0,selectionTableCount:0,canvasTableCount:0}}),[s,c]=a.useState(n.fileType),[d,u]=a.useState(n.contentType),[p,g]=a.useState(n.backgroundType),f=e=>{switch(e){case i.v8u.JPEG:return aN.Ho;case i.v8u.PDF:return aN.JI;default:return aN.GU}},[h,E]=a.useState(()=>0===n.quality?f(n.fileType):n.quality),y=(0,r.d4)(e=>!!e.mirror.selectionProperties.numSelected),[b,v]=a.useState(y?"selection":"file"),[C,w]=a.useState(!1),T=e=>{c(e),a2(p,e)||g(i.ZRE.SOLID),E(f(e))},S=(e,t)=>{E((0,aN.t_)(e,t))},x=a1(s).length>1,k=aY(a1(s)[0])||(0,_.t)("whiteboard.figjam_export.no_background"),N=aq(s),I=l.nodeCounts.selectionStickyCount>0||l.nodeCounts.canvasStickyCount>0,A=l.nodeCounts.selectionTableCount>0||l.nodeCounts.canvasTableCount>0,O=I||A,L=(0,aN.dB)(h,s);return a.createElement("div",{className:"figjam_export_pickers--modalContainer--ecxGT"},a.createElement("div",{className:"figjam_export_pickers--row--iT7Hm"},a.createElement(aA.JU,{className:aR},(0,_.tx)("whiteboard.figjam_export.file_type")),a.createElement(aT.z,{className:"figjam_export_pickers--radioGroup--UXiC-",value:N,onChange:e=>T(a$[e]),recordingKey:aw.Pt(e,"exportFileTypeRadioGroup")},(m.Ay.isIpadNative?[i.v8u.PNG,i.v8u.JPEG,i.v8u.PDF]:[i.v8u.PNG,i.v8u.JPEG,i.v8u.PDF,i.v8u.CSV]).map(t=>{let n=t===i.v8u.CSV&&!O;return a.createElement(aT.Z,{value:aq(t),key:t,labelClassName:"figjam_export_pickers--radioLabel--zw-U-",recordingKey:aw.Pt(e,`exportFileTypeRadioGroup.${aq(t)}`),disabled:n,"data-tooltip-type":n&&nk.Ib.TEXT,"data-tooltip":n&&(0,_.t)("whiteboard.figjam_export.csv_disabled")},aq(t))}))),s===i.v8u.CSV&&a.createElement("div",{className:aD},a.createElement(aA.JU,{className:aR},(0,_.tx)("whiteboard.figjam_export.content_type")),a.createElement(aH,{id:"exportSettingsPickerContentTypeControl",className:"figjam_export_pickers--contentTypeSelect--Ioh5g",inputClassName:"figjam_export_pickers--contentTypeInput--3duA- figjam_export_pickers--input--YZm9H",dispatch:e.dispatch,property:d,onChange:u,formatter:aZ,recordingKey:aw.Pt(e,"contentTypeSelect"),dropdownShown:t,blurOnChange:!0},[i.EUU.TABLE,i.EUU.STICKY].map(t=>{let n=t===i.EUU.STICKY&&!I||t===i.EUU.TABLE&&!A;return a.createElement(az,{value:t,key:t,disabled:n,additionalStylesClassName:aF,recordingKey:aw.Pt(e,`contentTypeSelect.${aX(t)}`)},aX(t))}))),(0,o.kc)().ce_fj_export_quality_selector&&(0,o.kc)().ce_jpeg_export_quality_selector&&(0,o.kc)().ce_pdf_export_quality_selector&&(s===i.v8u.PDF||s===i.v8u.JPEG)&&a.createElement("div",{className:aD},a.createElement(aA.JU,{className:aR},(0,_.tx)("fullscreen.properties_panel.export_settings_quality")),a.createElement(aK,{className:"figjam_export_pickers--qualitySelect--PT7cb",id:"exportSettingsPickerQualityControl",inputClassName:"figjam_export_pickers--qualityInput--GbL5K figjam_export_pickers--input--YZm9H",dispatch:e.dispatch,property:void 0!==L?L:aN.Kj.HIGH,onChange:e=>{S(e,s)},formatter:(0,aI.Q)(),recordingKey:aw.Pt(e,"qualitySelect"),dropdownShown:t,dropdownAlignment:"right"},a.createElement(aV,{value:aN.Kj.HIGH,recordingKey:aw.Pt(e,"exportQuality","high")}),a.createElement(aV,{value:aN.Kj.MEDIUM,recordingKey:aw.Pt(e,"exportQuality","medium")}),a.createElement(aV,{value:aN.Kj.LOW,recordingKey:aw.Pt(e,"exportQuality","low")}))),a.createElement("div",{className:aD},a.createElement(aA.JU,{className:aR},(0,_.tx)("whiteboard.figjam_export.background")),!x&&a.createElement(aA.JU,{className:aM},k),x&&a.createElement(aU,{id:"exportSettingsPickerBackgroundTypeControl",className:"figjam_export_pickers--backgroundTypeSelect--eexDx",inputClassName:"figjam_export_pickers--input--YZm9H",dispatch:e.dispatch,property:p,onChange:g,formatter:aJ,recordingKey:aw.Pt(e,"backgroundTypeSelect"),dropdownShown:t,dropdownAlignment:"right",blurOnChange:!0,icon:a.createElement(a5,{background:p,disabled:!1}),iconClassName:"figjam_export_pickers--svgStyles--G9Vof"},[i.ZRE.GRID,i.ZRE.TRANSPARENT,i.ZRE.SOLID].map(t=>{let n=!a2(t,s);return a.createElement(aG,{value:t,key:t,disabled:n,additionalStylesClassName:aF,recordingKey:aw.Pt(e,`backgroundTypeSelect.${aY(t)}`),height:32},a.createElement("div",{className:"figjam_export_pickers--backgroundOptionWrapper--DkFx1"},a.createElement(a5,{background:t,disabled:n}),a.createElement("span",{className:"figjam_export_pickers--backgroundTypeLabel--b--Px ellipsis--ellipsis--Tjyfa"},aY(t))))}))),a.createElement("div",{className:y?aD:"figjam_export_pickers--exportAreaPlaceholderRow--G7H-m figjam_export_pickers--selectRow--aTA0S figjam_export_pickers--row--iT7Hm"},a.createElement(aA.JU,{className:aR},(0,_.tx)("whiteboard.figjam_export.export_area")),!y&&a.createElement(aA.JU,{className:aM},aQ("file")),y&&a.createElement(aW,{id:"exportSettingsPickerExportAreaTypeControl",className:"figjam_export_pickers--exportAreaSelect--GP6S-",inputClassName:"figjam_export_pickers--exportAreaInput--AbQMJ figjam_export_pickers--input--YZm9H",dispatch:e.dispatch,property:b,onChange:v,formatter:a0,recordingKey:aw.Pt(e,"exportAreaTypeSelect"),dropdownShown:t,blurOnChange:!0},["selection","file"].map(t=>a.createElement(aj,{key:t,value:t,additionalStylesClassName:aF,recordingKey:aw.Pt(e,`exportAreaTypeOption.${aQ(t)}`)},aQ(t))))),a.createElement("div",{className:"figjam_export_pickers--buttonContainer---c6mP"},(()=>{if(!l)return!1;switch(s){case i.v8u.PNG:case i.v8u.JPEG:return("selection"===b?l.selectionArea:l.canvasArea)>=15e7;case i.v8u.PDF:return("selection"===b?l.nodeCounts.selectionNodeCount:l.nodeCounts.canvasNodeCount)>=300;case i.v8u.CSV:return!1}})()&&a.createElement("div",{className:"figjam_export_pickers--exportWarning--KzT0q text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement(nd.B,{className:"figjam_export_pickers--infoIcon--H0pOt",svg:aB.A}),(0,_.tx)("whiteboard.figjam_export.exporting_may_take_a_minute_or_two")),a.createElement(ei.$$,{onClick:()=>{w(!0),e.dispatch(aS.n.set({message:(0,_.t)("whiteboard.figjam_export.exporting"),showLoadingSpinner:!0,callback:()=>{i.Ez5.editorPreferences().exportSelectionSettings.set({contentType:d,fileType:s,backgroundType:p,quality:h}),"selection"===b?i.glU.exportSelectionOrCurrentPage(!0,l.selectionArea,l.nodeCounts.selectionNodeCount):i.glU.exportSelectionOrCurrentPage(!1,l.canvasArea,l.nodeCounts.canvasNodeCount),e.dispatch(nu.rg()),e.dispatch(ep._O())}}))},recordingKey:aw.Pt(e,"exportButton"),disabled:C,className:"figjam_export_pickers--exportButtonStyles--KYDuq"},(0,_.tx)("whiteboard.figjam_export.export"))))}var a6=n(65225),a8=n(644106),a7=n(756085),a9=n(675678),re=n(887326);function rt(e){return{attachmentId:e.id,attachmentUploadedAt:e.uploadedAt.toString(),imageUrlPrefix:function(e){if(-1!==e.search("blob"))return"blob";let t=e.search("/images/");if(-1!==t)return e.substring(0,t)}(e.imageUrl)}}function rn(e){let t=(0,r.wA)(),n=(0,r.d4)(e=>e.mirror.appModel),i=e.clientX,l=e.clientY,o=async t=>{let n=await fetch(e.attachment.imageUrl,{mode:"cors"}),a=await n.blob();if(!t)return a;if("image/jpeg"===a.type||"image/gif"===a.type){let e=await createImageBitmap(a),t=document.createElement("canvas");t.width=e.width,t.height=e.height;let n=t.getContext("2d");return n?.drawImage(e,0,0),new Promise(e=>{t.toBlob(t=>{e(t)},"image/png")})}return a},s=[{name:"download-attachment",callback:async()=>{try{await o(!1).then(n=>{let a=URL.createObjectURL(n),r=document.createElement("a");r.href=a,r.download=(0,_.t)("comments.attachment_default_name",{fileExtension:n.type.split("/")[1]}),r.click(),URL.revokeObjectURL(a),(0,Z.sx)("Comment Attachment Download Success",rt(e.attachment)),t(g.F.enqueue({message:(0,_.t)("comments.download_attachment_success"),type:"attachment-download"}))})}catch(n){(0,Z.sx)("Comment Attachment Download Failure",rt(e.attachment)),(0,T.$D)(a9.FigmaTeam.FEEDBACK,n),t(g.F.enqueue({message:(0,_.t)("comments.download_attachment_error"),type:"attachment-download",error:!0}))}}},{name:"copy-attachment",callback:async()=>{t(g.F.enqueue({message:(0,_.t)("comments.copying_attachment"),type:"copy-attachment",icon:n4.zX.SPINNER}));try{await o(!0).then(async n=>{let a=new ClipboardItem({[n.type]:n});await navigator.clipboard.write([a]).then(()=>{(0,Z.sx)("Comment Attachment Copy Success",rt(e.attachment)),t(g.F.enqueue({message:(0,_.t)("comments.copy_attachment_success"),type:"copy-attachment"}))})})}catch(n){(0,Z.sx)("Comment Attachment Copy Failure",rt(e.attachment)),(0,T.$D)(a9.FigmaTeam.FEEDBACK,n),t(g.F.enqueue({message:(0,_.t)("comments.copy_attachment_error"),type:"copy-attachment",error:!0}))}}}];return a.createElement(re.Q,{appModel:n,menuItems:s,targetRect:{width:10,height:10,left:i+100,top:l,right:i+110,bottom:l-10},showPoint:!1,selectedView:e.selectedView,recordingKey:"comment-context-menu",dispatch:t})}var ra=n(91425),rr=n(728268),ri=n(205478),rl=n(256975),ro=n(75395),rs=n(939683),rc=n(911826),rd=n(699857),ru=n(416393);function rm({children:e,entryPoint:t}){let n=(0,q.tS)(),r=(0,L.iZ)(),i=(0,eM.ol)(),l=(0,rc.O)(),o=(0,rs.U)(),s=(0,rd.U)("upsell"),c=(0,a.useCallback)(()=>{o("Dev Mode Paywall clicked",{type:"Design Mode Upsell",entryPoint:t},{forwardToDatadog:!0}),s("handoff")},[t,s,o]);return a.createElement(ev.fu,{name:"Dev Mode Upsell In Design Mode",properties:{currentPlan:l,teamId:i?.id,userId:r?.id,fileKey:n,upsell:t}},a.createElement(ro.E,{className:"context_menus_upsells--upsellItem--lBYll",onClick:c},a.createElement(nd.B,{svg:ru.A}),a.createElement("span",null,e)))}function rp(){return a.createElement(rm,{entryPoint:"design_section_status"},(0,_.tx)("dev_handoff.paywall.ready_for_dev.upsell"))}function r_(){return a.createElement(rm,{entryPoint:"design_copy_as_code"},(0,_.tx)("dev_handoff.paywall.codegen.upsell"))}function rg(){return a.createElement(rm,{entryPoint:"design_annotations"},(0,_.tx)("dev_handoff.paywall.annotations.upsell"))}function rf({targetInViewport:e,annotationsCount:t,selectedView:n}){var i;let l=(0,r.wA)(),o=(0,r.d4)(e=>e.mirror.appModel),s=(0,r.d4)(e=>e.mirror.sceneGraph),c=(0,rd.U)("annotations_button"),d=(0,n$.ni)(),u=(0,rl._I)(),m=(0,rl.U4)(),p=(i=()=>c("handoff"),u?[{name:"view-annotations",callback:i,flags:["design"]},{separator:!0},{render:()=>a.createElement("div",{className:el.cx.flex.itemsCenter.colorTextMenuSecondary.columnGap4.pl4.pb4.pr10.pt0.$},a.createElement(ri.V,{style:{"--color-icon":"var(--color-text-menu-secondary)"}}),(0,_.tx)("dev_handoff.paywall.annotations.double_click_hint")),optionHeight:32}]:m?[{header:!0,name:(0,_.t)("dev_handoff.annotation.number_annotations",{count:t})},{separator:!0},{render:()=>a.createElement(rg,null),optionHeight:32,flags:["design"]}]:[{header:!0,name:(0,_.t)("dev_handoff.annotation.number_annotations",{count:t})}]),g=e.origin.x+d.x,f=e.origin.y+d.y,h={left:g,top:f,right:g+e.size.x,bottom:f+e.size.y,width:e.size.x,height:e.size.y};return a.createElement("div",{className:C.Dm},a.createElement(re.Q,{appModel:o,sceneGraph:s,selectedView:n,menuItems:p,dispatch:l,showPoint:!0,targetRect:h,removeDisabledItems:m,recordingKey:"annotationsButtonMenu",minWidth:50,allowDisabledOnly:!m}))}var rh=n(975350),rE=n(707465),ry=n(440535);function rb(e){let t=(0,r.wA)(),n=(0,v.I_)(),i=(0,r.d4)(e=>e.mirror.appModel);if(!(0,r.d4)(e=>(0,rE.U2)(e.selectedView)))return null;let{thread:l}=e,o=!!l.comments.find(e=>e.isUnread),s=!!l.isPendingFromSinatra,c=null,d=n.commentReceipts;d&&(c=o?{name:"mark-as-read",callback:()=>{t(rh.AY({receiptsAPI:d,thread:l}))}}:{name:"mark-as-unread",callback:()=>{t(rh.QY({receiptsAPI:d,comment:l.comments[0]}))}});let u=[];s||((0,ry.m)(l.sidebarItemType)?u.push({name:"resolve",callback:()=>{t(rh.hx({thread:l,resolved:!0}))},disabled:null!=l.commentPin},c,{name:"copy-link",callback:()=>{e.copyLink(l.comments[0])}},{separator:!0}):u.push({name:"copy-link",callback:()=>{e.copyLink(l.comments[0])}},{separator:!0})),u.push({action:"toggle-show-comments",displayText:(0,_.t)("fullscreen.context_menu.hide_comments")});let m=u.filter(e=>e).map(e=>e),p={width:224,height:129,left:e.pinClientRect.x,top:e.pinClientRect.y,right:e.pinClientRect.x+e.pinClientRect.width,bottom:e.pinClientRect.y+e.pinClientRect.height};return a.createElement(re.Q,{appModel:i,menuItems:m,targetRect:p,showPoint:!1,selectedView:e.selectedView,recordingKey:"comment-context-menu",dispatch:t})}var rv=n(459401),rC=n(593779),rw=n(157663),rT=n(27087),rS=n(413145),rx=n(113853),rk=n(941381),rN=n(297281);async function rI({paint:e,fileKey:t,dispatch:n}){if(!t||"VIDEO"!==e.type||!e.video||!e.video?.hash)return rO("Incorrect asset type"),null;n(aS.n.set({message:(0,_.t)("whiteboard.figjam_export.exporting"),showLoadingSpinner:!0,callback:()=>{}}));let a=await (0,rN.tW)({paint:e,fileKey:t});if(null===a)return rO("Error getting download url for asset"),null;rA(a)}let rA=e=>{let t=document.createElement("a");t.setAttribute("href",e),t.setAttribute("target","_blank"),document.body.appendChild(t),t.click(),document.body.removeChild(t)},rO=e=>{(0,T.$D)(a9.FigmaTeam.FIGJAM,Error(`Error exporting video: ${e}`))};var rL=n(944682),rD=n(145519),rR=n(640262),rM=n(465201),rP=n(59181),rF=n(483990),rB=n(529529),rU=n(325680),rG=n(886119),rK=n(697551),rV=n(27703),rH=n(450225),rz=n(128803);function rW(e){return new URL(e).hostname.split(".").slice(-2).join(".")}var rj=n(248639),r$=n(843495),rq=n(990922),rY=n(850168),rX=n(460289),rJ=n(132135),rZ=n(892542),rQ=n(288641),r0=n(215822),r1=n(384792),r2=n(772192),r5=n(496470),r3=n(555328),r4=n(376485),r6=n(779086),r8=n(319882),r7=n(301922),r9=n(987850),ie=n(239737),it=n(132572),ia=n(384775),ir=n(610043),ii=n(41398),il=n(234587),io=n(983724),is=n(326186),ic=n(656147),id=n(565831);function iu(e,t){return{action:"slides-rewrite-text",flags:["slides"],featureFlags:["figjam_ai_piper_text_manipulation","slides_10_launch_tone_dial_update"],callback:()=>(0,is.mD)(e,{source:"context_menu"}),disabled:!t}}function im(e){let t=B.zl.get(is.Tm),n=!!(0,o.kc)().slides_10_launch_tone_dial_update;return!t&&n&&e}var ip=n(828736);let i_=(0,tG.hG)(tX.tui);class ig extends a.PureComponent{items(){var e,t,n,a;let r=this.props.isPrototypeCanvasEditUiVisible&&!this.props.hasSelection?[{separator:!0},{action:"remove-interactions-on-page",flags:["edit"]}]:[],l=window.FigmaMobile,o=ik(this.props.appModel.showComments,this.props.selectedView,this.props.viewportInfo,this.props.clientX,this.props.clientY,this.props.dispatch,l?.requestToAddDraftCommentPin),s=this.props.selectedView.editorType===j.nT.Whiteboard,c=this.props.selectedView.editorType===j.nT.Slides,d=(0,Y.$A)(this.props.selectedView),u=m.Ay.windows?"Ctrl+":"\u2318",p={action:"paste-here",flags:["edit"],displayText:s?(0,_.t)("fullscreen_actions.paste"):void 0,shortcutText:s?`${u}V`:void 0},g={action:"paste-as-live-object",flags:["edit"],featureFlags:["live_paste"],displayText:(0,_.t)("fullscreen_actions.paste-as-live-object")},f=!m.Ay.safari||l?.readClipboardData?[p,g,s?{separator:!0}:null]:[],h={name:"start-chat",disabled:this.props.isJoinedToActiveVotingSession||this.props.isCursorChatDisabled,callback:(e,t,n,a)=>{i.glU.triggerAction("set-tool-default",null),this.props.dispatch(rD.F6({position:{x:a.clientX||this.props.clientX,y:(a.clientY||this.props.clientY)-i_},source:"canvas_context_menu"}))}},E=(e=this.props.hasSlidesAiTextEnabled,t={x:this.props.clientX,y:this.props.clientY},n=this.props.slideId,a=this.props.viewportInfo,!!(n&&a&&(0,id.ih)(n,t,a))&&im(e)),y=iu(this.props.dispatch,E),b=this.props.openFile,v=this.props.canPublishOrgTemplate&&b?(0,ip.we)({dispatch:this.props.dispatch,file:{key:b.key,name:b.name,folder_id:b.folderId,team_id:b.teamId,editor_type:b.editorType,parent_org_id:b.parentOrgId},fileNeedsMovingBeforePublish:this.props.fileNeedsMovingBeforePublish,isPublished:this.props.isFilePublishedTemplate,source:"fullscreen-context-menu"}):null,C=[{action:"toggle-ui"},{action:"toggle-show-comments",displayText:(0,_.t)("fullscreen.context_menu.show_hide_comments")},...s?[]:[{separator:!0},h],s?null:{action:"toggle-menu",displayText:(0,ia.gn)()?(0,_.t)("fullscreen_actions.toggle-actions-menu"):(0,_.t)("fullscreen_actions.toggle-menu")},!this.props.userCanRunPlugins||c?null:(0,rB.qz)({...this.props,isReadOnly:this.props.appModel.isReadOnly},"contextmenu"),this.props.appModel.isReadOnly||d||c?null:(0,rU.Vd)(this.props,"contextmenu"),v,...r];return[...o,...f,{action:"unlock-all",flags:["edit","whiteboard"]},{separator:!0},...s?[h,{separator:!0}]:[],...c?[{separator:!0},y]:[],...C]}render(){let e=this.props.clientX,t=this.props.clientY;return a.createElement("div",{className:`${C.Dm}`},a.createElement(re.Q,{appModel:this.props.appModel,menuItems:(0,rv.removeNullish)(this.items()),selectedView:this.props.selectedView,dispatch:this.props.dispatch,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!0,recordingKey:"canvasMenu",allowCodegenOptions:this.props.selectedView.editorType===j.nT.Design,isLimitedDevMode:this.props.isLimitedDevMode,"aria-labelledby":this.props.ariaLabelledBy}))}}ig.displayName="CanvasContextMenu";let ih=(0,r.Ng)((e,t)=>({...t,appModel:e.mirror.appModel,openFile:e.openFile,editorType:e.selectedView.editorType,orgEntity:(0,rK.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,isJoinedToActiveVotingSession:(0,rX.gR)(e),hasSelection:Object.keys(e.mirror.sceneGraphSelection).length>0,isDevHandoff:(0,Y.$A)(e.selectedView)}))(ig);function iE(e){let t=(0,a7.op)(),n=(0,a7.$1)(),i=(0,a7.cW)(),l=(0,a7.Be)(),o=l.orgPlugins,s=l.orgWidgets,c=(0,rG.h)("plugin"),d=(0,rG.h)("widget"),u=(0,a7.NU)(),m=(0,a7.qr)(),p=(0,a7.ZT)(),_=(0,r7.S)(),g=(0,rs.am)();a.useEffect(()=>{g("Canvas Right Click")},[g]);let f=(0,n$._X)({subscribeToUpdates_expensive:!0}),h=(0,eU.J3)(),E=(0,eU.JU)(h),y=h===eU.kN.FILE_IN_DRAFTS,b=!!(0,eU.kD)(),v=(0,r.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),C=iI(),w=(0,is.Ne)(),T=(0,io.Jb)();return a.createElement(ih,{...e,isPrototypeCanvasEditUiVisible:C,allSavedPlugins:l.plugins,recentlyUsedPlugins:t,localExtensions:n,publishedPlugins:i,viewportInfo:f,activeTextReviewPlugin:v,canPublishOrgTemplate:E,isFilePublishedTemplate:b,fileNeedsMovingBeforePublish:y,savedWidgetVersions:u,recentlyUsedWidgets:m,publishedWidgets:p,orgSavedPlugins:o,orgSavedWidgets:s,orgPrivatePlugins:c,orgPrivateWidgets:d,isCursorChatDisabled:_,hasSlidesAiTextEnabled:w,slideId:T})}class iy extends a.PureComponent{constructor(){super(...arguments),this.savepointMenuItems=(e,t)=>{let n=this.props.version,a=(0,r6.pW)(n),r={name:this.props.editName||"savepoint-edit",args:{version:n,checkpointKey:e},callback:t},i={name:"savepoint-restore",args:{version:n,checkpointKey:e},callback:t},l={name:"savepoint-duplicate",args:{version:n,checkpointKey:e},callback:t,disabled:this.props.disableDuplicate},s={name:"savepoint-clear",args:{version:n,checkpointKey:e},callback:t,disabled:!this.props.enableClear},c={name:"savepoint-link",args:{version:n,checkpointKey:e},callback:t},d=[];if(this.props.userCanEditFile?a?"branch_child_merge"===n.view?d.push(r,i,l,c):d.push(i,l,c):d.push(r,i,l,s,c):d.push(l,c),(0,o.kc)().version_diffing&&this.props.selectedView.editorType!==j.nT.Whiteboard&&!(0,Y.$A)(this.props.selectedView)&&d.push({name:"savepoint-compare",args:{version:n,checkpointKey:e},callback:t}),(0,Y.$A)(this.props.selectedView)){let e=["savepoint-restore","savepoint-clear"];return d.filter(t=>!e.includes(t.name))}return d}}render(){let e=this.props.clientX,t=this.props.clientY,n=this.savepointMenuItems(this.props.checkpointKey,this.props.callback);return a.createElement("div",{className:`${C.Dm}`},a.createElement(re.Q,{appModel:this.props.appModel,menuItems:n,dispatch:this.props.dispatch,selectedView:this.props.selectedView,showPoint:!0,targetRect:{width:10,height:10,left:e-5,top:t+7,right:e+5,bottom:t+17},removeDisabledItems:!1,recordingKey:"savepointMenu"}))}}iy.displayName="SavepointContextMenu";let ib=(0,r.Ng)((e,t)=>({...t,appModel:e.mirror.appModel}))(iy),iv=(e,t)=>i.glU.getObjectsListUnderCursor(e,t),iC=class e extends a.PureComponent{constructor(e){super(e),this.objectsListMouseEnter=e=>{r$.Uc(e)},this.objectsListMouseExit=()=>{r$.Uc("")},this.getSelectionGuid=()=>Object.keys(this.props.sceneGraphSelection)[0],this.getObjectsListMenu=(e,t)=>{let n=iv(e,t);if(null==n)return[];let a=[];for(let e of n){let t=e.nodeId;a.push({nodeId:t,args:{nodeId:t,name:e.name},action:"select-node",displayText:(0,_.t)("fullscreen_actions.select-node",{name:e.name??""}),onMouseEnter:()=>this.objectsListMouseEnter(t),onMouseExit:this.objectsListMouseExit})}return a},this.getNodeType=()=>{let e=this.getSelectionGuid();return i.glU.getNodeType(e)},this.getPageListForMoveToMenu=()=>{let e=this.props.appModel.pagesList;if(!this.props.userCanEditFile||null==e||e.length<2)return[];let t=[];for(let n of e)n.nodeId!==this.props.appModel.currentPage&&(n.isDivider?t.push({separator:!0}):t.push({name:n.name,args:{nodeId:n.nodeId,name:n.name},action:"page-move-to",displayText:(0,_.t)("fullscreen_actions.page-move-to",{name:n.name??""})}));return t},this.state={pageItems:this.getPageListForMoveToMenu(),relatedComponentMenu:this.getRelatedComponentMenu(i.iCO.NONE),relatedStateMenu:this.getRelatedComponentMenu(i.iCO.STATE_INSTANCE),objectItems:this.getObjectsListMenu(this.props.clientX,this.props.clientY),nodeType:this.isFigjam()?this.getNodeType():null,hyperlink:this.isFigjam()?this.getHyperlinkUnderCursor():null}}getRelatedComponentMenu(e){let t;if(e!==i.iCO.NONE&&e!==i.iCO.STATE_INSTANCE)return null;let n={userId:this.props.user?.id,fileKey:this.props.openFile?.key,orgId:this.props.openFile?.parentOrgId??void 0,teamId:this.props.openFile?.teamId??void 0},a=(0,r5.SY)(this.props.masterSymbolGUID,this.props.dispatch,this.props.openFile?.key||"",(0,rC.l)(this.props.openFile?.libraryKey??""),this.props.fileByKey,this.props.library,this.props.sceneGraph,this.props.sceneGraphSelection,this.props.fileVersion,e,n,this.props.stateGroupSelectionInfo);if(0===a.length)return null;t=e===i.iCO.STATE_INSTANCE?"relatedComponentMenuSwapVariants":"relatedComponentMenu";let r=this.props.clientX,l=this.props.clientY;return{items:a,showPoint:!1,parentRect:{width:10,height:10,left:r+100,top:l,right:r+110,bottom:l-10},recordingKey:t,dispatch:this.props.dispatch,depth:0,onSelectItem:()=>{}}}getHyperlinkUnderCursor(){return i.glU.getHyperlinkUnderCursor(this.props.clientX,this.props.clientY)}selectLayerMenu(){return!this.props.isObjectsPanelMenu&&this.state.objectItems.length>1?this.state.objectItems:[]}textEditModeMenu(){let e=this.getCopyPasteMenu(),t=this.getCopyExportMenu(),n=this.props.spellCheckPreference,a=this.props.appModel.spellCheckSuggestions,r=a||!n?[{name:"spell-check-menu",flags:["design","whiteboard","slides"],children:[(0,rY.x)(),{separator:!0},...(0,rY.A)()]},...this.props.userCanRunPlugins?(0,rB.dL)(this.props,"contextmenu"):[]]:[];return[...n||this.props.appModel.activeTextReviewPlugin?iN(a,this.props.editorType):[],...r,{separator:!0},...this.getTableCellMenu(),{separator:!0},...e,{separator:!0},...this.isFigjam()?t:[]]}getFaviconMenu(e){return{name:e?"clear-favicon":"set-favicon",args:{label:e?(0,_.t)("fullscreen_actions.clear_favicon"):(0,_.t)("fullscreen_actions.set_as_favicon")},flags:["edit","!slides","sites"],featureFlags:["sites","sts_document_settings"],callback:()=>{let t=tQ.q.instance.getCurrentPage()?.guid;void 0!==t&&n1.l7.user("set-responsive-set-settings",()=>{i.glU.setResponsiveSetSettings({faviconID:e?"":this.getSelectionGuid()},[t]),w.Y5.commit()})}}}getThumbnailMenu(e){return{name:w.Y5.getFileThumbnailMenuItemName(),args:{label:e?(0,_.t)("fullscreen_actions.restore_default_thumbnail"):(0,_.t)("fullscreen_actions.set_as_thumbnail")},flags:["edit","!slides"],callback:()=>{this.props.openFile&&this.props.dispatch(rL.$m({file_key:this.props.openFile.key,thumbnail_guid:e?null:this.getSelectionGuid()}))}}}selectedEmbedOrLinkPreviewHasValidUrl(){return this.props.widgetSelectionInfo?.pluginID===rj.k.EMBED_WIDGET&&this.props.embedData&&(this.props.embedData.url||this.props.embedData.srcUrl)||this.props.widgetSelectionInfo?.pluginID===rj.k.LINK_PREVIEW_WIDGET&&this.props.linkPreviewData&&this.props.linkPreviewData.url}isFigjam(){return"fullscreen"===this.props.selectedView.view&&this.props.selectedView.editorType===j.nT.Whiteboard}getCopyLinkMenu(){let e=this.selectedEmbedOrLinkPreviewHasValidUrl()?"FigJam":"";return{name:"copy-link",args:{label:(0,_.t)("fullscreen.context_menu.copy_link",{editorSpecifierString:e})},displayText:this.isFigjam()&&this.state.nodeType?function(e){switch(e){case i.Z6A.STICKY:return(0,_.t)("fullscreen_actions.copy-link-to-sticky");case i.Z6A.CONNECTOR:return(0,_.t)("fullscreen_actions.copy-link-to-connector");case i.Z6A.WIDGET:return(0,_.t)("fullscreen_actions.copy-link-to-widget");case i.Z6A.STAMP:return(0,_.t)("fullscreen_actions.copy-link-to-stamp");case i.Z6A.SECTION:return(0,_.t)("fullscreen_actions.copy-link-to-section");case i.Z6A.TEXT:return(0,_.t)("fullscreen_actions.copy-link-to-text");case i.Z6A.TABLE:return(0,_.t)("fullscreen_actions.copy-link-to-table");case i.Z6A.WASHI_TAPE:return(0,_.t)("fullscreen_actions.copy-link-to-washi-tape");case i.Z6A.SHAPE_WITH_TEXT:return(0,_.t)("fullscreen_actions.copy-link-to-shape");case i.Z6A.INSTANCE:return(0,_.t)("fullscreen_actions.copy-link-to-instance");default:return(0,_.t)("fullscreen_actions.copy-link-to-this")}}(this.state.nodeType):void 0,callback:()=>{let e;if(!this.props.openFile)return;let t=!(0,Y.$A)(this.props.selectedView)&&this.props.attributionContextKey,n=(0,E.Wl)(this.props.selectedView),a=(0,E.s4)(this.props.selectedView),r=(0,ic.P)(this.props.selectedView),l=(0,rJ.jN)({file:this.props.openFile,nodeId:this.getSelectionGuid(),isDevHandoff:(0,Y.$A)(this.props.selectedView),isReadOnly:this.props.appModel.isReadOnly,isFigJam:this.isFigjam(),isDevModeOverview:n,devModeFocusId:a,attributionContext:t?(0,rZ.b)(this.props.attributionContextKey,rZ.d.FULLSCREEN_CONTEXT_MENU):null});if((0,o.kc)().ce_copy_labelled_links){let t=tQ.q.instance.get(this.getSelectionGuid());e=t?t.name:this.props.openFile.name}this.props.dispatch(rL.S({fileKey:this.props.openFile.key,url:l,label:e,source:rZ.d.FULLSCREEN_CONTEXT_MENU,visualBellMessageOverride:(()=>{if(this.isFigjam()&&this.state.nodeType)return function(e){switch(e){case i.Z6A.STICKY:return(0,_.t)("visual_bell.copy_link_to_sticky");case i.Z6A.CONNECTOR:return(0,_.t)("visual_bell.copy_link_to_connector");case i.Z6A.WIDGET:return(0,_.t)("visual_bell.copy_link_to_widget");case i.Z6A.STAMP:return(0,_.t)("visual_bell.copy_link_to_stamp");case i.Z6A.SECTION:return(0,_.t)("visual_bell.copy_link_to_section");case i.Z6A.TEXT:return(0,_.t)("visual_bell.copy_link_to_text");case i.Z6A.TABLE:return(0,_.t)("visual_bell.copy_link_to_table");case i.Z6A.WASHI_TAPE:return(0,_.t)("visual_bell.copy_link_to_washi_tape");case i.Z6A.SHAPE_WITH_TEXT:return(0,_.t)("visual_bell.copy_link_to_shape");case i.Z6A.INSTANCE:return(0,_.t)("visual_bell.copy_link_to_instance");default:return(0,_.t)("visual_bell.copy_link")}}(this.state.nodeType);if(r){let e=tQ.q.instance.get(this.getSelectionGuid());if(e)return(0,_.t)("copy_to_clipboard.slides.link_to_slide_copied_to_clipboard",{name:e.name})}})()}))}}}getCopyHyperlinkMenu(){let e=(()=>{let e=this.state.hyperlink;if(!e||""===e)return null;if(e.startsWith("mailto:")){let t=e.substring(7);if(t)return{displayText:(0,_.t)("fullscreen_actions.copy-email",{email:t}),linkToCopy:t,visualBellText:(0,_.t)("visual_bell.copy_email",{email:t})}}else if(e.startsWith("tel:")){let t=e.substring(4);if(t)return{displayText:(0,_.t)("fullscreen_actions.copy-phone",{number:t}),linkToCopy:t,visualBellText:(0,_.t)("visual_bell.copy_phone",{number:t})}}else{let t=rW(e);if(t)return{displayText:(0,_.t)("fullscreen_actions.copy-hyperlink",{hyperlink:t}),linkToCopy:e,visualBellText:(0,_.t)("visual_bell.copy_hyperlink",{hyperlink:t})}}})();return e?{name:"copy-hyperlink",displayText:e.displayText,callback:()=>(0,rQ.UA)(this.props.dispatch,e.linkToCopy,"ContextMenu",e.visualBellText)}:null}getImageToProfilePicture(){if(!this.props.user||!this.props.fillPaints||(0,nT.gl)(this.props.fillPaints))return null;let e=this.props.fillPaints.findIndex(e=>"IMAGE"===e.type);if(e<0)return null;let t=this.props.fillPaints[e];return{name:"set-image-as-profile-picture",args:{label:"Set image as profile picture"},flags:["view_restricted","whiteboard"],featureFlags:["figjam_canvas_image_to_avatar"],callback:()=>{(0,rx.V8)(t,this.props.user,this.props.dispatch)}}}getMaybeEmbedOrLinkPreviewWidgetMenu(){if(!this.selectedEmbedOrLinkPreviewHasValidUrl())return null;let e=this.props.embedData?.url||this.props.embedData?.srcUrl||this.props.linkPreviewData?.url,t=rW(decodeURIComponent(e));return{name:"labeled-menu-item",args:{label:(0,_.t)("fullscreen_actions.copy-hyperlink",{hyperlink:t})},callback:()=>{!function(e,t){let n=decodeURIComponent(t);(0,n3.Dk)(n),(0,rz.Rm)(rH.yc.COPY_LINK,n),e(g.F.enqueue({type:"copy-preview",message:(0,_.t)("visual_bell.copy_hyperlink",{hyperlink:rW(n)}),error:!1}))}(this.props.dispatch,e)}}}getMaybeEmbedDeactivateMenu(){return this.props.widgetSelectionInfo?.pluginID!==rj.k.EMBED_WIDGET||this.props.widgetSelectionInfo.widgetID!==i.Ez5.embedUiState().activeEmbedData.getCopy().embedNodeId?null:{name:"labeled-menu-item",args:{label:"Deactivate preview"},callback:()=>{i.glU.deactivateEmbed()}}}getExportVideo(){if(!this.props.fillPaints||(0,nT.gl)(this.props.fillPaints))return null;let e=this.props.fillPaints.find(e=>"VIDEO"===e.type);if(!e)return null;let t=this.props.openFile?.key;return{action:"export-selected-video",flags:["view_restricted","whiteboard"],platforms:["!ipad"],displayText:(0,_.t)("fullscreen.context_menu.export_selected_video"),callback:(n,a,r)=>{rI({paint:e,fileKey:t,dispatch:r})}}}selectedDefaultLibraryComponents(){let e=Object.keys(this.props.sceneGraphSelection);if(0===e.length)return!1;let t=this.props.sceneGraph.get(e[0])?.symbolId;if(!t)return!1;let n=(0,nq.yW)(this.props.sceneGraph.get(t));return!!n&&(0,nq.td)(this.props.library,n)}getMoveToMenu(){return this.state.pageItems.length>=1?{action:"page-move-to-menu",flags:["edit"],children:this.state.pageItems,name:"page-move-to-menu"}:null}getFigJamRemovePluginActionsMenu(){if(this.props.selectedView.editorType===j.nT.Design)return null;let t=e=>this.props.dispatch(rk.af({id:e,resourceType:r3.bD.PLUGIN})),n=(0,r0.vA)(this.props.pluginRelaunchData,this.props.publishedPlugins,this.props.localExtensions,this.props.orgEntity,this.props.numSelected||0,(n,a)=>e.refreshCache.debounceRefresh(n,()=>t(n),a),r4.FW.FIGJAM),a=[],r=new Set;for(let e of n)r.has(e.pluginTypeAndID)||(a.push({name:e.plugin.name,plugin_id:e.plugin.plugin_id}),r.add(e.pluginTypeAndID));return 0===a.length?null:{name:"remove-plugin-actions",children:[...a.map(({name:e,plugin_id:t})=>({name:"plugins-menu-item",callback:()=>i.NfO.removeRelaunchDataFromSelection(t),args:{extensionName:e}})),{separator:!0},{name:"remove-all-plugin-actions",callback:()=>a.map(({plugin_id:e})=>i.NfO.removeRelaunchDataFromSelection(e))}]}}getMainComponentActionsMenu(){if(this.props.isLimitedDevMode)return null;let e=(0,$.Yh)(this.props.appModel,"find-symbol")&&!this.selectedDefaultLibraryComponents(),t=(0,$.Yh)(this.props.appModel,"push-changes-to-main"),n=(0,$.Yh)(this.props.appModel,"restore-symbol-or-state-group"),a=(0,$.Yh)(this.props.appModel,"add-variant"),r=(0,$.Yh)(this.props.appModel,"publish-selection"),i=[e,t,n,a,r].filter(Boolean).length;if(0===i)return null;if(1===i){if(e)return{action:"find-symbol"};if(a)return{action:"add-variant",flags:["edit"]};if(r)return{action:"publish-selection",flags:["edit"]}}return{action:"main-component",children:[{action:"find-symbol"},{action:"push-changes-to-main",flags:["edit"]},{action:"restore-symbol-or-state-group",flags:["edit"]},{action:"publish-selection",flags:["edit"]},{action:"add-variant",flags:["edit"]}]}}getTableCellMenu(){let e=(0,$.Yh)(this.props.appModel,"delete-table-contents"),t=(0,$.Yh)(this.props.appModel,"delete-current-table-row")||(0,$.Yh)(this.props.appModel,"delete-current-table-column");return[{action:"move-table-row-up",flags:["edit"]},{action:"move-table-row-down",flags:["edit"]},{action:"move-table-column-left",flags:["edit"]},{action:"move-table-column-right",flags:["edit"]},{separator:!0},{action:"add-table-column-before",flags:["edit"]},{action:"add-table-column-after",flags:["edit"]},{separator:!0},{action:"add-table-row-above",flags:["edit"]},{action:"add-table-row-below",flags:["edit"]},{separator:!0},{action:"delete-table-contents",flags:["edit"],shortcutText:e&&!t?"\u232B":void 0},{action:"delete-current-table-column",flags:["edit"],shortcutText:!e&&t?"\u232B":void 0},{action:"delete-current-table-row",flags:["edit"],shortcutText:!e&&t?"\u232B":void 0}]}getCopyPasteMenu(){let e;let t=window.FigmaMobile,n=!m.Ay.safari||!!t?.readClipboardData,r=!this.props.isObjectsPanelMenu&&!this.props.isSingleSlideViewCarousel&&n,i=this.props.isTextEditModeMenu,l=(0,it.C7)()&&this.props.hasFragmentSearchPermission&&this.props.isUI3,s=[{action:"copy-text"},{action:"copy-as-code",children:[{action:"copy-as-css"},{action:"copy-as-css-recursive"},{action:"copy-as-ios"},{action:"copy-as-android"},...!this.props.canAccessDevMode&&this.props.canAccessDevModeEntryPoint?[{separator:!0},{render:()=>a.createElement(r_,null),optionHeight:40}]:[]]},{action:"copy-as-svg"},{action:"copy-as-png"},...this.props.canCopyLink?[this.getCopyLinkMenu()]:[],{separator:!0},{action:"copy-properties",flags:["view_restricted"]},{action:"paste-properties",flags:["edit"]}],c=m.Ay.windows?"Ctrl+":"\u2318";switch(this.props.selectedView.editorType){case j.nT.Design:case j.nT.Sites:case j.nT.Slides:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${c}C`}:null,r?{action:"paste-here",flags:["edit"],displayText:(0,_.t)("fullscreen_actions.paste-here"),shortcutText:i?`${c}V`:void 0}:this.props.isSingleSlideViewCarousel?{action:"paste",flags:["edit"],displayText:(0,_.t)("fullscreen_actions.paste"),shortcutText:`${c}V`}:null,n?{action:"paste-as-live-object",flags:["edit"],featureFlags:["live_paste"],displayText:i?(0,_.t)("fullscreen_actions.paste-as-live-object"):void 0}:null,n?{action:"paste-to-replace",flags:["edit"],displayText:i?(0,_.t)("fullscreen_actions.paste-and-match-style"):void 0,shortcutText:i?`${c}\u21E7V`:void 0}:null,{action:"copy-paste-menu",flags:["edit"],children:s},{action:"copy-as-menu",flags:["!edit"],children:s},{action:"duplicate-in-place",flags:["edit","slides"],displayText:(0,_.t)("fullscreen_actions.duplicate-in-place"),shortcutText:`${c}D`},l?{action:"find-inspiration",flags:["edit","!slides"]}:null,(0,o.kc)().asset_suggestions_inspect_fragment?{action:"inspect-fragment",flags:["!slides"]}:null,...(0,rR.x)({isOrgMember:this.props.isOrgMember})];break;case j.nT.DevHandoff:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${c}C`}:null,this.props.isLimitedDevMode?null:{action:"copy-text"},this.props.isLimitedDevMode?null:{action:"copy-as-svg"},this.props.isLimitedDevMode?null:{action:"copy-as-png"},this.props.isLimitedDevMode?null:{action:"copy-layer-name"},this.props.canCopyLink?this.getCopyLinkMenu():null];break;default:e=[navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${c}C`}:null,r?{action:"paste",flags:["edit"],displayText:(0,_.t)("fullscreen_actions.paste"),shortcutText:`${c}V`}:null,r?{action:"paste-as-live-object",flags:["edit"],featureFlags:["live_paste"],displayText:i?(0,_.t)("fullscreen_actions.paste-as-live-object"):void 0}:null,n?{action:"paste-to-replace",flags:["edit"],displayText:(0,_.t)("fullscreen_actions.paste-to-replace")}:null,...(0,rR.x)({isOrgMember:this.props.isOrgMember})]}return e}getCopyExportMenu(){return[...this.props.canCopyLink?[this.getCopyLinkMenu(),this.getCopyHyperlinkMenu()]:[],this.getMaybeEmbedOrLinkPreviewWidgetMenu(),this.getMaybeEmbedDeactivateMenu(),{action:"copy-as-png"},{action:"export-selection-or-current-page",flags:["view_restricted","whiteboard"],displayText:(0,_.t)("fullscreen.context_menu.export_selection")},this.getExportVideo()]}rulerGuideMenu(e,t){let n="toggle-rulers",a=[e===i._0v.Y?{action:"remove-vertical-guides"}:{action:"remove-horizontal-guides"},{separator:!0},{action:n,displayText:(0,_.t)("fullscreen.ruler_guide_context_menu.hide_rulers"),shortcutText:(0,$.c1)(this.props.appModel.keyboardShortcuts,n)}],r=[{action:"remove-guide"}];switch(t){case i.bQY.RULER:return a;case i.bQY.GUIDE:return r;case i.bQY.BOTH:return r.concat(...a);default:return[]}}singleSlideViewCarouselMenu(){return[...this.getCopyPasteMenu(),{separator:!0},{action:"delete-selection",flags:["slides"]},{separator:!0},{action:"create-slide",flags:["slides"]},{action:"select-all-slides",flags:["slides"]},...this.skipSlidesMenu()]}skipSlidesMenu(){let e=(()=>{for(let e of Object.keys(this.props.sceneGraphSelection)){let t=tQ.q.instance.get(e);if(!t?.isSlide())return!1}return!0})(),t=Object.keys(this.props.sceneGraphSelection).length>1;return e?[{separator:!0},(()=>{for(let e of Object.keys(this.props.sceneGraphSelection)){let t=tQ.q.instance.get(e);if(!t?.isSlide()||!t?.isSkippedSlide)return!1}return!0})()?{action:t?"unskip-slides":"unskip-slide",flags:["slides"],featureFlags:["piper_skip_slides"]}:{action:t?"skip-slides":"skip-slide",flags:["slides"],featureFlags:["piper_skip_slides"]}]:[]}contextMenu(){let{objectItems:e,relatedComponentMenu:t,relatedStateMenu:n}=this.state,r=this.props.appModel,i=this.props.selectedView.editorType===j.nT.Design,l=this.props.selectedView.editorType===j.nT.Slides,s=(0,il.Vj)(this.props.selectedView),c=(i||s)&&(0,$.Yh)(this.props.appModel,"select-node-menu")&&!this.props.isObjectsPanelMenu&&e.length>1,d=this.props.isObjectsPanelMenu,{withinMeter:u}=(0,r9.X)(nN.JT.AUTO_RENAME_LAYERS),m=d&&this.props.hasAIPermission&&(0,it.AL)()&&(0,it.Ii)()&&u&&this.props.isUI3,p=window.FigmaMobile,g=ik(r.showComments,this.props.selectedView,this.props.viewportInfo,this.props.clientX,this.props.clientY,this.props.dispatch,p?.requestToAddDraftCommentPin),f=(0,$.Yh)(this.props.appModel,"swap-to-related-symbol"),h=(0,$.Yh)(this.props.appModel,"swap-to-related-state"),E=this.props.isPrototypeCanvasEditUiVisible?[{separator:!0},{action:"remove-interactions-on-selection",flags:["edit"]},{action:"add-prototype-starting-point",flags:["edit"]},{action:"delete-prototype-starting-point",flags:["edit"]}]:[],y=this.getCopyPasteMenu(),b=this.getCopyExportMenu(),v=[c?{action:"select-node-menu",children:e,name:"select-node-menu"}:null,this.getMoveToMenu(),{action:"move-to-file",flags:["edit"]}],C=!i,w=l?[]:[C?{separator:!0}:null,this.props.userCanRunPlugins?(0,rB.qz)(this.props,"contextmenu"):null,this.props.appModel.isReadOnly?null:(0,rU.Vd)(this.props,"contextmenu")],T=(0,o.kc)().internal_only_debug_tools,S=T&&1===this.props.numSelected,x=(0,o.kc)().convert_to_thumbnail_frame,k=this.props.spellCheckPreference,N=this.props.appModel.spellCheckSuggestions,I=im(this.props.hasSlidesAiTextEnabled),A=iu(this.props.dispatch,I);return[...k||this.props.appModel.activeTextReviewPlugin?iN(N,this.props.editorType):[],{separator:!0},...this.getTableCellMenu(),{separator:!0},...g,...y,{separator:!0},{action:"delete-selection",flags:["whiteboard","slides"]},{separator:!0},A,{separator:!0},...this.isFigjam()?b:[],{separator:!0},...v,{action:"bring-to-front",flags:["edit"]},{action:"bring-forward",flags:["edit","slides"]},{action:"send-backward",flags:["edit","slides"]},{action:"send-to-back",flags:["edit"]},{separator:!0},{action:"create-responsive-set",flags:["edit","sites"]},{action:"set-as-default-responsive-set",flags:["edit","sites"]},{action:"replace-selected-frame-with-section",flags:["edit","!slides"]},{action:"replace-selected-section-with-frame",flags:["edit","!slides"]},{action:"group-selection",flags:["edit"]},{action:"frame-selection",flags:["edit"]},{action:"create-section-from-selection",flags:["edit","!slides"]},{action:"ungroup-selection",flags:["edit"],displayText:(0,_.t)("fullscreen.context_menu.ungroup")},d?{action:"rename-selection",flags:["edit"],displayText:(0,_.t)("fullscreen.context_menu.rename")}:null,m?{name:"auto-rename-layers",flags:["edit"],displayText:(0,_.t)("fullscreen.context_menu.auto_rename_layers"),rightIcon:a.createElement(nD.W,{variant:ir.x.ON_MENU}),callback:()=>{(0,ia.$I)({moduleToOpen:{type:"custom",module:a.createElement(ii.A,{source:nv.uQ.CONTEXT_MENU}),beforeModuleOpen:()=>{(0,nI.B3)(nN.JT.AUTO_RENAME_LAYERS),(0,nI.Ag)(nN.JT.AUTO_RENAME_LAYERS,nv.Ay,{source:nv.uQ.CONTEXT_MENU,overwriteNames:!1})},name:H.Sn.RENAME_LAYERS_TOAST},trackingData:{source:"selection_context_menu_rename_layers"}})}}:null,{action:"flatten-selection",flags:["edit"],displayText:(0,_.t)("fullscreen.context_menu.flatten")},{action:"outline-stroke",flags:["edit"],shortcutText:(0,$.c1)(this.props.appModel.keyboardShortcuts,"outline-stroke")},{action:"mask-selection",flags:["edit"],get displayText(){let e=(0,rP.P)();return(0,rF.A)(e)}},this.props.canSetAsFavicon&&!this.props.appModel.isReadOnly?this.getFaviconMenu(this.getSelectionGuid()===this.props.sceneGraph.getCurrentPage()?.responsiveSetSettings?.faviconID):null,this.props.canSetAsFileThumbnail&&!this.props.appModel.isReadOnly?this.getThumbnailMenu(this.getSelectionGuid()===this.props.openFile?.thumbnailGuid):null,{separator:!0},{action:this.props.propertiesPanelShouldShowRemoveAutoLayout?"unstack-selection":"stack-selection",flags:["design","edit"]},(0,rM.r)({msalEnabled:(0,$.Yh)(this.props.appModel,"run-multi-stack-auto-layout")&&!this.props.propertiesPanelShouldShowRemoveAutoLayout,destroyAllALEnabled:(0,$.Yh)(this.props.appModel,"destroy-all-auto-layout"),resizeToFitEnabled:(0,$.Yh)(this.props.appModel,"resize-to-fit")}),{action:"create-symbol",flags:["edit"]},{action:"create-template",flags:["edit"],featureFlags:["dse_templates_proto"]},{action:"create-module",flags:["edit"],featureFlags:["dse_editor_templates_v1"]},f&&t?{name:"swap-to-related-symbol",flags:["edit"],childDropdown:t}:null,h&&n?{name:"swap-to-related-state",flags:["edit"],childDropdown:n}:null,{action:"reset-symbol",flags:["edit"]},{action:"detach-instance",flags:["edit"]},this.getMainComponentActionsMenu(),{action:"link-to-component",flags:["edit"]},...C?[]:w,this.getFigJamRemovePluginActionsMenu(),{separator:!0},{action:"toggle-shown-for-selected-nodes",flags:["edit"],displayText:(0,_.t)("fullscreen.context_menu.show_hide")},{action:"toggle-locked-for-selected-nodes",flags:["edit"],displayText:(0,_.t)("fullscreen.context_menu.lock_unlock")},{action:"unlock-all",flags:["edit","whiteboard"]},{separator:!0},{action:"flip-horizontal",flags:["edit"]},{action:"flip-vertical",flags:["edit"]},{separator:!0},{action:"remove-annotations",flags:["dev_handoff"]},{separator:!0},...C?w:[],{separator:!0},this.getImageToProfilePicture(),...E,...l?this.skipSlidesMenu():[],S?{separator:!0}:null,S?{action:"debug-inspect-layer-figma-scope"}:null,x?{action:"convert-to-thumbnail-frame"}:null,T?{action:"debug-print-as-test-code"}:null]}render(){let e=this.props.clientX,t=this.props.clientY,n=(0,rv.removeNullish)(this.props.isTextEditModeMenu?this.textEditModeMenu():this.props.isSelectLayerMenu?this.selectLayerMenu():this.props.isRulerGuideMenu?this.rulerGuideMenu(this.props.axis,this.props.rulerGuideContextMenuType):this.props.isSingleSlideViewCarousel?this.singleSlideViewCarouselMenu():this.contextMenu());return a.createElement("div",{className:`${C.Dm}`},a.createElement(re.Q,{appModel:this.props.appModel,sceneGraph:this.props.sceneGraph,selectedView:this.props.selectedView,sceneGraphSelection:this.props.sceneGraphSelection,menuItems:n,dispatch:this.props.dispatch,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!0,isLimitedDevMode:this.props.isLimitedDevMode,recordingKey:"layerMenu"}))}};function iw(e){let t=(0,r.d4)(q.tB),n=(0,a7.Tg)(),i=(0,n$._X)({subscribeToUpdates_expensive:!0}),o=(0,rV.ud)(),s=(0,rl._I)(),c=(0,rl.U4)(),d=(0,r.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),u=iI(),m=(0,r.wA)(),p=(0,a7.Be)(),_=p.orgPlugins,g=(0,rG.h)("plugin"),f=(0,P.J2)((0,tj.UK)().spellCheckPreference),h=(0,l.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection),n=1===t.length?tQ.q.instance.get(t[0]):null,a=null!=n&&("FRAME"===n.type&&!n.resizeToFit||"SYMBOL"===n.type||"SECTION"===n.type),r=null!=n&&"FRAME"===n.type&&n.isTopLevelFrame(),i=e.selectedView.editorType;return{appModel:e.mirror.appModel,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,localExtensions:e.localPlugins,userCanRunPlugins:(0,eL.GP)(e),sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,library:e.library,masterSymbolGUID:e.mirror.selectionProperties.masterSymbolGUID,propertiesPanelShouldShowRemoveAutoLayout:e.mirror.selectionProperties.propertiesPanelShouldShowRemoveAutoLayout,orgEntity:(0,rK.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,user:e.user,fillPaints:e.mirror.selectionProperties.fillPaints,canSetAsFavicon:r,canSetAsFileThumbnail:a&&!n?.isInstanceSublayer,canCopyLink:e.mirror.selectionProperties.canCopyLinkToSelection,fileVersion:e.fileVersion,stateGroupSelectionInfo:e.mirror.selectionProperties.stateGroupSelectionInfo,widgetSelectionInfo:e.mirror.selectionProperties.selectedWidgetInfo,publishedCanvasWidgetVersions:e.publishedCanvasWidgetVersions,embedData:e.mirror.selectionProperties.embedData,linkPreviewData:e.mirror.selectionProperties.linkPreviewData,pluginRelaunchData:e.mirror.selectionProperties.pluginRelaunchData,numSelected:e.mirror.selectionProperties.numSelected,attributionContextKey:e.sharingAttributionContextKey,editorType:i,isOrgMember:(0,eD.canMemberOrg)(e.currentUserOrgId,e),isDevHandoff:i===j.nT.DevHandoff,isLimitedDevMode:(0,Y.$A)(e.selectedView)&&!(0,rl.tn)(e)}}),E=(0,ie.PE)(),y=(0,is.Ne)(),b=(0,ie.LC)(),v=(0,tz.GS)();return a.createElement(iC,{...e,...h,dispatch:m,spellCheckPreference:f,isPrototypeCanvasEditUiVisible:u,openFile:t,fileByKey:o,allSavedPlugins:p.plugins,recentlyUsedPlugins:n,viewportInfo:i,activeTextReviewPlugin:d,editorType:h.editorType,orgSavedPlugins:_,orgPrivatePlugins:g,canAccessDevMode:s,canAccessDevModeEntryPoint:c,hasAIPermission:E,hasSlidesAiTextEnabled:y,hasFragmentSearchPermission:b,isUI3:v})}function iT(e){let t=(0,r.d4)(q.tB),n=(0,a7.Tg)(),i=(0,n$._X)({subscribeToUpdates_expensive:!0}),o=(0,rV.ud)(),s=(0,rl._I)(),c=(0,rl.U4)(),d=(0,r.d4)(e=>e.mirror.appModel.activeTextReviewPlugin),u=iI(),m=(0,r.wA)(),p=(0,a7.Be)(),_=p.orgPlugins,g=(0,rG.h)("plugin"),f=(0,P.J2)((0,tj.UK)().spellCheckPreference),h=(0,l.R)(e=>{let t=Object.keys(e.mirror.sceneGraphSelection),n=1===t.length?tQ.q.instance.get(t[0]):null,a=null!=n&&("FRAME"===n.type&&!n.resizeToFit||"SYMBOL"===n.type||"SECTION"===n.type),r=e.selectedView.editorType;return{appModel:e.mirror.appModel,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,localExtensions:e.localPlugins,userCanRunPlugins:(0,eL.GP)(e),sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,library:e.library,masterSymbolGUID:e.mirror.selectionProperties.masterSymbolGUID,propertiesPanelShouldShowRemoveAutoLayout:e.mirror.selectionProperties.propertiesPanelShouldShowRemoveAutoLayout,orgEntity:(0,rK.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,user:e.user,fillPaints:e.mirror.selectionProperties.fillPaints,canSetAsFavicon:!1,canSetAsFileThumbnail:a&&!n?.isInstanceSublayer,canCopyLink:e.mirror.selectionProperties.canCopyLinkToSelection,fileVersion:e.fileVersion,stateGroupSelectionInfo:e.mirror.selectionProperties.stateGroupSelectionInfo,widgetSelectionInfo:e.mirror.selectionProperties.selectedWidgetInfo,publishedCanvasWidgetVersions:e.publishedCanvasWidgetVersions,embedData:e.mirror.selectionProperties.embedData,linkPreviewData:e.mirror.selectionProperties.linkPreviewData,pluginRelaunchData:e.mirror.selectionProperties.pluginRelaunchData,numSelected:e.mirror.selectionProperties.numSelected,attributionContextKey:e.sharingAttributionContextKey,editorType:r,isOrgMember:(0,eD.canMemberOrg)(e.currentUserOrgId,e),isDevHandoff:r===j.nT.DevHandoff,isLimitedDevMode:(0,Y.$A)(e.selectedView)&&!(0,rl.tn)(e)}}),E=(0,ie.PE)(),y=(0,is.Ne)(),b=(0,ie.LC)(),v=(0,tz.GS)();return a.createElement(iC,{...e,...h,dispatch:m,spellCheckPreference:f,isPrototypeCanvasEditUiVisible:u,openFile:t,fileByKey:o,allSavedPlugins:p.plugins,recentlyUsedPlugins:n,viewportInfo:i,activeTextReviewPlugin:d,editorType:h.editorType,orgSavedPlugins:_,orgPrivatePlugins:g,canAccessDevMode:s,canAccessDevModeEntryPoint:c,isSingleSlideViewCarousel:!0,hasAIPermission:E,hasSlidesAiTextEnabled:y,hasFragmentSearchPermission:b,isUI3:v})}function iS({expandElement:e,guid:t,...n}){let i=(0,r.d4)(e=>e.mirror.sceneGraphSelection),l=(0,r.d4)(e=>e.mirror.appModel),o=(0,r.d4)(e=>e.mirror.sceneGraph),s=(0,E.hA)()??void 0,c=(0,q.q5)(),d=(0,r.d4)(e=>e.mirror.selectionProperties.canCopyLinkToSelection),u=(0,F.Fk)((e,t)=>{let n=e.get(t);return n?n.canHaveAnnotation:null},t),p=(0,F.Fk)((e,t)=>{let n=e.get(t);return!!n&&n.annotations.length>0},t),g=(0,r.wA)(),f=m.Ay.windows?"Ctrl+":"\u2318",h=[e?{name:"expand-element",callback:e}:null,{separator:!0},u?{name:p?"edit-annotation":"add-annotation",callback:()=>{B.zl.set(r8.J,!0)}}:null,{separator:!0},navigator.clipboard&&navigator.clipboard.write?{action:"copy",shortcutText:`${f}C`}:null,{action:"copy-text"},{action:"copy-as-svg"},{action:"copy-as-png"},{action:"copy-layer-name"},d?{name:"copy-link",args:{label:(0,_.t)("fullscreen.context_menu.copy_link",{editorSpecifierString:""})},callback:()=>{if(!c)return;let e=(0,rJ.jN)({file:c,nodeId:t,isDevHandoff:!0,devModeFocusId:s,isReadOnly:!0,isFigJam:!1,attributionContext:null});g(rL.S({fileKey:c.key,url:e,source:rZ.d.FULLSCREEN_CONTEXT_MENU,visualBellMessageOverride:void 0}))}}:null],y=n.clientX,b=n.clientY;return a.createElement("div",{className:`${C.Dm}`},a.createElement(re.Q,{appModel:l,sceneGraph:o,selectedView:n.selectedView,sceneGraphSelection:i,menuItems:h.filter(rS.t),dispatch:g,showPoint:!1,targetRect:{width:10,height:10,left:y+100,top:b,right:y+110,bottom:b-10},removeDisabledItems:!0,recordingKey:"codeMenu"}))}function ix({...e}){let t=(0,r.d4)(e=>e.mirror.sceneGraphSelection),n=(0,r.d4)(e=>e.mirror.appModel),i=(0,r.d4)(e=>e.mirror.sceneGraph),l=(0,r.wA)(),o=m.Ay.windows?"Ctrl+":"\u2318",s=[];navigator.clipboard&&navigator.clipboard.write&&s.push({name:"copy",shortcutText:`${o}C`,callback:()=>{e.onCopyText()}});let c=e.clientX,d=e.clientY;return a.createElement("div",{className:`${C.Dm}`},a.createElement(re.Q,{appModel:n,sceneGraph:i,selectedView:e.selectedView,sceneGraphSelection:t,menuItems:s,dispatch:l,showPoint:!1,targetRect:{width:10,height:10,left:c+100,top:d,right:c+110,bottom:d-10},removeDisabledItems:!0,recordingKey:"codeMenu"}))}function ik(e,t,n,a,r,i,l){return e&&n&&t.commentsEnabled&&m.Ay.isIpadNative?[{name:"add-comment",callback:()=>{!function(e,t,n,a,r){if(!e)return;let i={x:t,y:n-i_};if(r)r({x:i.x,y:i.y,width:36.8,height:36.8});else{let t=(0,n$.$$)(e,i);a(rh.vV({anchorPosition:t})),a(rh.CX())}}(n,a,r,i,l)}},{separator:!0}]:[]}function iN(e,t){var n;if(!e)return[];let a=!!e?.figma;return[...function(e,t){let{figma:n,textReviewPlugin:a}=e,r=e=>{if(!e)return[];let n=[],a=e?.suggestions||[],r=e?.rangeStart||0,i=e?.rangeEnd||0;for(let e of a.slice(0,3))n.push({action:"replace-selected-text",flags:["design","whiteboard","slides"],displayText:e,recordingKey:`replace-selected-text-${n.length}`,args:{replacementText:e,rangeStart:r,rangeEnd:i},callback(){let e=(0,an.pi)({editorType:(0,j.oD)(t)});(0,Z.sx)("Spell Check Suggestion Clicked",{productType:e})}});return n},i=r(n),l=r(a);return i.length||l.length?!i.length&&l.length?[{header:!0,name:r1.SH()?.plugin.name||"Plugin"},...l]:i.length&&!l.length?i:[...i,{name:"replace-selected-text",displayText:r1.SH()?.plugin.name||"Plugin",children:l}]:[{header:!0,flags:["design","whiteboard"],name:(0,_.t)("spell_check.no_suggestions_found")}]}(e,t),{separator:!0},...a&&e?.figma?.rangeText?[(n=e?.figma?.rangeText,{name:"spell-check-menu-add-word",flags:["design","whiteboard","slides"],callback:async(e,t,a)=>{try{let e=await rT.Ay.post("/api/spell-check-words",{word:n});if(200===e.status){let e=await (0,rq.Xw)();await e.addWords([n]),w.Y5.triggerAction("redo-spell-checking")}else(0,T.x1)("spell_check_add_word_error","spell check add word failed http request",{responseStatus:e.status,responseData:e.data},{reportAsSentryError:!0})}catch(e){e.message.includes("The word provided already exists in your dictionary")||(rw.k.error(e),(0,T.x1)("spell_check_add_word_error","spell check add word error",{err:e},{reportAsSentryError:!0}))}}})]:[]]}function iI(){return(0,P.ut)((0,r$.aY)(),i.FAf.DESIGN)===i.FAf.PROTOTYPE}iC.displayName="SelectionContextMenu",iC.refreshCache=new r2.O(Q.A.duration(1,"day"));var iA=n(970516);function iO({clientX:e,clientY:t,selectedView:n}){let i=(0,r.wA)(),l=(0,r.d4)(e=>e.mirror.appModel),o=(0,q.q5)(),s=a.useCallback(()=>{i(iA.lW({stringToCopy:(0,rJ.jN)({file:o,isDevHandoff:!0,isDevModeOverview:!0,isReadOnly:!0,isFigJam:!1,attributionContext:null}),successText:(0,_.t)("permissions.copy_link_button.visual_bell.copy_summary_link")}))},[i,o]),c=[{name:"page-copy-link",displayText:(0,_.t)("dev_handoff.status.copy_summary_link"),callback:s}];return a.createElement("div",{className:`${C.Dm}`},a.createElement(re.Q,{appModel:l,menuItems:c,dispatch:i,selectedView:n,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!1,recordingKey:"overviewMenu"}))}function iL({pageId:e,clientX:t,clientY:n,selectedView:i}){let l=(0,r.wA)(),o=(0,r.d4)(e=>e.mirror.appModel),s=(0,F.Fk)((e,t)=>e.get(t)?.isPageDivider,e),c=[{action:"page-copy-link",args:{nodeId:e},disabled:s}];return a.createElement("div",{className:`${C.Dm}`},a.createElement(re.Q,{appModel:o,menuItems:c,dispatch:l,selectedView:i,showPoint:!1,targetRect:{width:10,height:10,left:t+100,top:n,right:t+110,bottom:n-10},removeDisabledItems:!1,recordingKey:"pageMenu"}))}var iD=n(815549),iR=n(802915),iM=n(780700),iP=n(728587);function iF(){let e=(0,ak.Um)(),t=(0,r.wA)(),n=(0,iM.Gt)(e?.data.pluginId,e?.data.triggeredFrom),i=(0,iM.dR)(e?.data.pluginId,e?.data.triggeredFrom),l=(0,iR.t)(e?.data.pluginId,n,i);if(!e)return null;let o=e.data.target.height+e.data.target.width>0;return a.createElement(iP.j,{showPoint:o,items:l,onSelectItem:e=>{e.callback&&e.callback("",null,t)},parentRect:e.data.target,dispatch:t,lean:o?"left":"right"})}var iB=n(17604),iU=n(239349),iG=n(282741),iK=n(779709),iV=n(177505),iH=n(38580),iz=n(498750);let iW=(0,iH.eU)(""),ij=(0,ev.tf)(nr.IK);function i$({onResult:e}){let[t,n]=(0,B.fp)(iW),i=a.useRef(null),l=(0,a.useCallback)(e=>{n(e.target.value)},[n]),o=(0,r.d4)(e=>(0,Y.$A)(e.selectedView)),s=(0,a.useCallback)(()=>{e(t),n("")},[t,e,n]),c=a.useCallback(e=>{switch(e.keyCode){case iz.Uz.SPACE:case iz.Uz.ENTER:s(),e.stopPropagation();return}},[s]);return(0,a.useEffect)(()=>{let e=i.current;if(e)return e.addEventListener("keydown",c),()=>{e.removeEventListener("keydown",c)}},[c]),a.createElement("div",{className:"ready_status_menu_item--menuItemContainer--Uy01z","data-preferred-theme":"dark","data-editor-theme":o?"dev-handoff":"design"},a.createElement(ei.ks,{placeholder:(0,_.t)("dev_handoff.status.menu_note_placeholder"),type:"textarea",value:t,onChange:l,maxLength:1e3,className:"ready_status_menu_item--textInput--iqTJf",onKeyDown:e=>{e.stopPropagation(),"Enter"!==e.key||e.shiftKey||s()},autoFocus:!0,"data-preferred-theme":o?void 0:"dark"}),a.createElement(ij,{ref:i,variant:"primary",onClick:s,recordingKey:"markReady"},(0,_.tx)("dev_handoff.status.menu_note_button")))}let iq="status_context_menu--headerStrong--9G-Jb";function iY({targetInViewport:e,nodeId:t,selectedView:n}){let s=(0,r.wA)(),c=(0,r.d4)(e=>e.mirror.appModel),d=new tQ.q,u=(0,iU.mJ)(t),m=!!u?.hasReadyStatus,p=!!u?.hasCompletedStatus,g=m||p,f=(0,iB.D)()&&!!u?.hasBeenEditedSinceLastStatusChange,h=(0,q.q5)(),E=(0,rd.U)("status_label_menu"),y=(0,n$.ni)(),b=(0,rl._I)(),v=(0,rl.U4)(),w=(0,iB.D)(),T=b&&w,S=(0,$.Yh)(c,"set-selection-completed-status"),x=(0,$.Yh)(c,"mark-incomplete"),k=(0,rs.U)(),N=(0,eC.E3)(),[,I]=(0,B.fp)(iG.wz),A=(0,iV.dh)(),O=(0,a.useMemo)(()=>i.w3z.isReadOnly(i.SES.NODE_STATUS),[]),L=i.w3z.canEditNodeStatus(),D=v&&O&&!b,R=(0,l.R)(e=>"fullscreen"===e.selectedView.view?{...e.selectedView,editorType:j.nT.DevHandoff,focusViewBackNavigation:{toEditorType:e.selectedView.editorType,toOverview:!1},devModeFocusId:t,overviewBackButtonTargetNodeId:A}:e.selectedView),M=(0,a.useMemo)(()=>{if(!h)return[];let e=x?{name:"status-mark-as-ready",callback:()=>{iK.z4.setNodesReady(!0,[t],"canvas",null),(0,o.kc)().ai_prod_rename_layers_dev_export&&(0,nC.R4)([t])},flags:["dev_handoff","design"]}:null,r=S?{name:"status-mark-as-completed",callback:()=>{iK.z4.setNodesCompleted([t],"canvas")},flags:["dev_handoff","design"]}:null,i=m?r:e,l={name:"ready-status-copy-dev-link",callback:()=>{let e=(0,rJ.jN)({file:h,nodeId:t,isDevHandoff:!0});s(rL.S({fileKey:h.key,url:e,source:rZ.d.STATUS_DROPDOWN_MENU}))},flags:["dev_handoff","design"]},c=v?[{name:"ready-status-open-in-dev-mode",callback:()=>{E("handoff")},flags:["design"]},l]:[l],d={separator:!0,flags:["design","dev_handoff"]},u=[d,{render:()=>a.createElement(rp,null),optionHeight:32,flags:["design"]}],y=[{name:"enter-dev-mode-focus-view",callback:()=>{k("Dev Mode Canvas Focus Entry Clicked",{nodeId:"devModeFocusId"in R?R.devModeFocusId:""}),E("handoff"),I(N===j.nT.DevHandoff?"dev_mode_canvas":"design_canvas"),s(em.$T(R))},flags:["design","dev_handoff"]},{name:"status-copy-focus-link",callback:()=>{let e=(0,rJ.jN)({file:h,nodeId:A,isDevHandoff:!0,devModeFocusId:n?.devModeFocusId??t});s(rL.S({fileKey:h.key,url:e,source:rZ.d.STATUS_DROPDOWN_MENU}))},flags:["dev_handoff","design"],alwaysShowCheckMarkOffset:!1}],b=T&&!iK.z4.getIsExtension()?y:c;if(!L)return[...b,...D?u:[]];let C=[...b,...i?[d,i]:[],d,{name:"status-remove",callback:()=>{iK.z4.setNodesReady(!1,[t],"canvas",null)},flags:["dev_handoff","design"],alwaysShowCheckMarkOffset:!1},...D?u:[]];return g?f?[{name:"completed-status-remark-as-ready",displayText:p?(0,_.t)("dev_handoff.status.menu_title_design_changed_since_completed"):(0,_.t)("dev_handoff.status.menu_title_design_changed_since_ready"),displayTextClassName:iq,children:C,showDotDotDotButton:!0},{render:()=>a.createElement(i$,{onResult:e=>{iK.z4.setNodesReady(!0,[t],"canvas",e??null),(0,o.kc)().ai_prod_rename_layers_dev_export&&(0,nC.R4)([t]),s(em.oB())}}),preventDismissOnSelected:!0,preventSelectOnMouseEnter:!0,allowClickThrough:!0,flags:["design","dev_handoff"]}]:C:[{header:!0,name:(0,_.t)("dev_handoff.status.menu_title_start_handoff_title"),displayTextClassName:iq},{render:()=>a.createElement(i$,{onResult:e=>{iK.z4.setNodesReady(!0,[t],"canvas",e??null),(0,o.kc)().ai_prod_rename_layers_dev_export&&(0,nC.R4)([t]),s(em.oB())}}),flags:["design","dev_handoff"]}]},[h,S,x,A,m,v,L,D,t,E,s,T,g,f,R,n?.devModeFocusId,p,N,I,k]),P=e.origin.x+y.x,F=e.origin.y+y.y,U={left:P,top:F,right:P+e.size.x,bottom:F+e.size.y,width:e.size.x,height:e.size.y};return a.createElement("div",{className:`${C.Dm}`},a.createElement(re.Q,{appModel:c,sceneGraph:d,selectedView:n,menuItems:M,dispatch:s,showPoint:!0,targetRect:U,removeDisabledItems:!0,recordingKey:"readyStatusMenu",minWidth:176}))}var iX=n(870232),iJ=n(279702),iZ=n(559681),iQ=n(452883),i0=n(742934);function i1({clientX:e,clientY:t,selectedView:n,targetItem:o,paint:s,onPaintChange:c}){let d=(0,r.wA)(),{appModel:u,sceneGraph:m,sceneGraphSelection:p}=(0,l.R)(e=>({appModel:e.mirror.appModel,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection})),_=(0,iQ.$)(),g=(0,iZ.k1)(_),f=[];return"DOCUMENT_COLOR"===o.type?f.push({name:"slides-move-to-theme-colors",recordingKey:"moveToThemeColors",callback:()=>{let e=g(o.documentColor);e&&s&&(0,nT.hS)(s)&&s.color&&(0,t5.DA)(s.color,o.documentColor)&&c((0,i0.FW)(e),iJ.zk.YES)}}):(f.push({name:"slides-edit-theme-color",recordingKey:"edit",callback:o.onEdit}),f.push({name:"slides-delete-theme-color",recordingKey:"delete",callback:()=>{i.CWU.deleteVariable(o.variableId)}})),a.createElement("div",{className:C.Dm},a.createElement(re.Q,{appModel:u,sceneGraph:m,selectedView:n,sceneGraphSelection:p,menuItems:f,dispatch:d,showPoint:!1,targetRect:{width:10,height:10,left:e+100,top:t,right:e+110,bottom:t-10},removeDisabledItems:!0,recordingKey:"slidesColorPickerContextMenu"}))}var i2=n(297666),i5=n(646240),i3=n(563042),i4=n(128765),i6=n(373119),i8=n(106112),i7=n(893606),i9=n(239177),le=n(666456),lt=n(520177),ln=n(237870),la=n(488578);let lr=(0,ln.Ju)(function({sectionId:e,initialTemplateId:t,initialShelfId:n,onConfirm:r,onCancel:i}){let l=(0,q.tS)();return a.createElement(ev.fu,{name:"section_preset_picker_confirmation_modal_shown",properties:{fileKey:l,sectionId:e,initialTemplateCategory:n,initialTemplateId:t,templateType:i8.n.HubFile}},a.createElement(la.Rw,{confirmationTitle:a.createElement("div",null,a.createElement("p",{className:tL()(el.cx.fontSemiBold.font15.$,"section_preset_picker--alertHeader--oa08R")},(0,_.tx)("whiteboard.section_preset_picker.confirmation_modal.header")),(0,_.tx)("whiteboard.section_preset_picker.confirmation_modal.description")),confirmText:(0,_.t)("whiteboard.section_preset_picker.confirmation_modal.confirm_text"),cancelText:(0,_.t)("whiteboard.section_preset_picker.confirmation_modal.cancel_text"),onConfirm:r,onCancel:i}))},"SectionPresetPickerConfirmationModal");function li({name:e,leadingIcon:t,onIconClick:n}){return a.createElement("div",{className:"section_preset_picker--headerItemContainer--0R5QO dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L"},a.createElement("button",{className:tL()("section_preset_picker--headerIconButton--tDLql section_preset_picker--iconBase--HKG97",{"section_preset_picker--hover--GYcQi":n}),onClick:n},a.createElement(nd.B,{svg:t})),a.createElement("div",{className:"section_preset_picker--headerText--XZRQV section_preset_picker--textContainer--dyEMF text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L"},e))}var ll=n(493323),lo=n(865141),ls=n(851202);function lc(){return a.createElement("div",{className:"section_preset_picker--loadingSpinnerContainer--OM30n"},a.createElement(ll.kt,null))}function ld({name:e,description:t,iconUrl:n}){return a.createElement(lm,{name:e,description:t,iconUrl:n,trailingIcon:a.createElement(nd.B,{className:"section_preset_picker--chevronRight--hORsb",svg:ls.A}),itemType:"shelf"})}function lu({name:e,description:t,iconUrl:n,isSelected:r,iconBackgroundColor:i}){return a.createElement(lm,{name:e,description:t,iconUrl:n,trailingIcon:r?a.createElement(nd.B,{svg:lo.A}):void 0,iconBackgroundColor:i,itemType:"template"})}function lm({name:e,description:t,itemType:n,iconUrl:r,trailingIcon:i,iconBackgroundColor:l}){return a.createElement("div",{className:tL()({"section_preset_picker--shelfItemContainer--KochN section_preset_picker--bodyItemContainer--Ani9M dropdown--option--JMVCh dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L":"shelf"===n,"section_preset_picker--templateItemContainer--tCRxk section_preset_picker--bodyItemContainer--Ani9M dropdown--option--JMVCh dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L":"template"===n})},a.createElement("div",{className:tL()({"section_preset_picker--shelfItemIcon--MASDu section_preset_picker--iconBase--HKG97":"shelf"===n,"section_preset_picker--templateItemIcon--eWzYK section_preset_picker--iconBase--HKG97":"template"===n}),style:{backgroundColor:l}},r&&a.createElement("img",{src:r,alt:(0,_.t)("whiteboard.section_preset_picker.shelf.thumbnail")})),a.createElement("div",{className:"section_preset_picker--textContainer--dyEMF text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},a.createElement("div",{className:"section_preset_picker--nameText--LS4BG"},e),a.createElement("div",{className:"section_preset_picker--descriptionText--OCJkN"},t)),i&&a.createElement("div",{className:"section_preset_picker--trailingIcon--X-run section_preset_picker--iconBase--HKG97"},i))}var lp=n(251344);function l_(){return(0,i7.R)()?301:285}var lg=n(527335),lf=n(192283);let lh="section_preset_item",lE=/^Section(\s\d+)?$/,ly=(0,tG.jz)(tX.IuL),lb=(0,tG.jz)(tX.LQy);function lv({sectionId:e,sectionName:t,initialShelfId:n,initialTemplateId:l,showAlertOnSelect:o}){let s,c;let d=(0,r.wA)(),u=(0,q.tS)(),m=(0,B.md)(lt.g),p="hasData"===m.state?m.data:[],g=0!==p.length,[f,h]=(0,a.useState)(n),[E,y]=(0,a.useState)(!1),[b,v]=(0,a.useState)(!1),C=(0,i4.fG)(),w=(0,i9.g)(),T=(0,i5.Xr)(le.Yq),S=(0,i5.Xr)(le.pn),x=(0,i5.Xr)(le.bj),k=(0,B.md)(le.oh),N=(0,B.md)(le.pF),I=(0,i6.q)(),A=(0,B.md)(le.pg),O=function(e,t){let n=(0,n$._X)({subscribeToUpdates_expensive:!0}),r=n.zoomScale,i=l_(),l=(0,a.useMemo)(()=>{let t=tQ.q.instance.get(e);if(!t)return null;let n=t.absoluteBoundingBox;return{canvasSpaceSectionTopLeft:t.canvasSpaceSectionTopLeft,canvasSpaceSectionOrigin:{x:n.x,y:n.y}}},[r,e]);if(!l)return null;let{canvasSpaceSectionTopLeft:o,canvasSpaceSectionOrigin:s}=l,c=(0,n$.Z0)(n,{x:o.x,y:o.y},!0),d={x:c.x-8,y:c.y},u=(0,n$.Z0)(n,s,!0),m=Math.max(d.y+n.y,n.y+8),p={top:m,bottom:m+200,height:200,left:0,right:d.x,width:i},_={x:(0,n$.Qt)(t.x,0,r,0),y:(0,n$.Qt)(t.y,0,r,0)};return{contextMenuRect:p,mouseBoundaryRect:{x:d.x,y:u.y+n.y,width:_.x+8,height:_.y}}}(e,N),L=l_(),D=(0,i7.R)(),R=a.useRef(!1),M=a.useCallback(()=>{T(),S(),y(!1)},[T,S]);(0,a.useEffect)(()=>{let e=setTimeout(()=>{v(!0)},500);return()=>clearTimeout(e)},[]),(0,a.useEffect)(()=>()=>{R.current||(T(),S())},[T,S]);let P=O?.mouseBoundaryRect;if((0,a.useEffect)(()=>{if(!E||!P)return;let e=(0,i2.s)(function(e){let t=document.activeElement?.id??"";(!P||e.clientX>P.x+P.width||e.clientX<P.x||e.clientY>P.y+P.height||e.clientY<P.y)&&!t.includes(lh)&&M()},16);return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[M,E,P]),!O)return null;let{contextMenuRect:F}=O,U=(n,a,r)=>{if(I&&u&&!A&&(y(!1),k?.template.id!==n.template.id)){if(T(),n.template.id===l){S();return}n.type===i8.n.HubFile&&(0,eG.Zg)({insert:()=>w(n,{moveViewportAfterPreview:!1,priority:"user-visible",previewManager:{nodeType:i.Z6A.SECTION,options:{nodeId:e,newName:lE.test(t)||a&&t===a?r:null,shelfId:n.category??"",templateId:n.template.id,templateName:(0,i4.gY)(n)}}}),template:n,fileKey:u,dispatch:d,triggeredFrom:"section-preset",userTriggered:!1,isPreview:!0})}},G=e=>{(0,eG.Zg)({insert:()=>x({selectTemplateAfterCommit:!1,moveViewportAfterCommit:!1,priority:"user-visible",editScopeType:n1.zk.USER}),template:e,fileKey:u,dispatch:d,triggeredFrom:"section-preset",userTriggered:!0})},K=t=>{I&&u&&!A&&t.template.id!==l&&(R.current=!0,o?d((0,e_.to)({type:lr,data:{sectionId:e,initialTemplateId:l,initialShelfId:n,onConfirm:()=>G(t),onCancel:()=>M()}})):G(t))},V=f?p.find(e=>e.id===f):void 0;if(V){s={displayText:V.title,render:()=>a.createElement(li,{name:V.title,leadingIcon:lg.A,onIconClick:()=>{h(null),T()}}),preventDismissOnSelected:!0};let e=n&&l?(0,lp.bO)(p,n,l):null;c=V.shelf_content.map((t,n)=>{let r={type:i8.n.HubFile,template:t,category:f},{name:i,description:o}=C(r),s=(0,i3.$J)(o).trim(),c="client_meta"in t?JSON.parse(t.client_meta):{},d=c.preset_picker?.thumbnail_url_dark_bg??"";return{displayText:i,render:()=>a.createElement(lu,{name:i,description:s,iconUrl:d,isSelected:l===r.template.id,iconBackgroundColor:(0,lp.j3)(n)}),onMouseEnter:()=>{U(r,e,i)},callback:()=>K(r)}})}else s={displayText:"Edit section name",render:()=>a.createElement(li,{name:(0,_.t)("whiteboard.section_preset_picker.shelf.title"),leadingIcon:lf.A}),preventDismissOnSelected:!0},c=p.map(t=>({displayText:t.title,render:()=>a.createElement(ld,{name:t.title,description:t.description,iconUrl:t.shelf_meta.preset_picker?.thumbnail_url}),preventDismissOnSelected:!0,callback:()=>{(0,Z.sx)("section_preset_picker_category_clicked",{fileKey:u,sectionId:e,selectedCategory:t.id,initialTemplateCategory:n,initialTemplateId:l}),h(t.id),T()}}));if(!g){if(!b)return null;c.push({displayText:"Loading",render:()=>a.createElement(lc,null),disabled:!0})}return a.createElement(ev.fu,{name:"section_preset_picker_shown",enabled:g,properties:{fileKey:u,sectionId:e,initialTemplateCategory:n,initialTemplateId:l,templateType:i8.n.HubFile}},a.createElement(iP.j,{items:[s,...c],recordingKey:lh,showPoint:!1,parentRect:F,depth:0,onSelectItem:e=>{e.callback&&e.callback("",null,d)},onMouseLeaveMenu:e=>{if(e.clientX>=F.right){y(!0);return}M()},dispatch:d,minBottomMargin:D?lb:ly,lean:"left",leanPadding:0,minWidth:L,disableDropdownScrollContainer:!0,displayOverTarget:!0,preventZoom:!0}))}function lC(e){let t=(0,r.d4)(e=>!e.mirror.appModel.isReadOnly),n=(0,q.q5)(),i=(0,L.iZ)();(0,r.d4)(e=>n?.team||null);let l=(0,a7.JI)(),o=n?.canEdit||!1,s=(0,r.wA)(),c=e.dropdownShown.type,d=(0,ra.v)();if(c===C.K9){let{clientX:n,clientY:r}=e.dropdownShown.data;return a.createElement(iw,{clientX:n,clientY:r,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1})}if(c===C.wi){let{clientX:n,clientY:r}=e.dropdownShown.data;return a.createElement(iw,{clientX:n,clientY:r,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isSelectLayerMenu:!0,isObjectsPanelMenu:!1})}if(c===C.ku){let{clientX:n,clientY:r}=e.dropdownShown.data;return a.createElement(iw,{clientX:n,clientY:r,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1,isTextEditModeMenu:!0})}if(c===C.t4){let{clientX:n,clientY:r,axis:i,rulerGuideContextMenuType:o}=e.dropdownShown.data;return a.createElement(iw,{clientX:n,clientY:r,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1,isTextEditModeMenu:!1,isRulerGuideMenu:!0,axis:i,rulerGuideContextMenuType:o})}if(c===C.Rb){let{clientX:n,clientY:r}=e.dropdownShown.data;return a.createElement(iw,{clientX:n,clientY:r,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0})}if(c===C.W_){let{clientX:n,clientY:r}=e.dropdownShown.data;return a.createElement(iE,{clientX:n,clientY:r,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,ariaLabelledBy:e.ariaLabelledBy})}if(c===C.LO)return a.createElement(iF,null);else if(c===C.SA){let{clientX:t,clientY:n,pageId:r}=e.dropdownShown.data;return a.createElement(iL,{pageId:r,clientX:t,clientY:n,selectedView:e.selectedView})}else if(c===C.bx){let{clientX:t,clientY:n}=e.dropdownShown.data;return a.createElement(iO,{clientX:t,clientY:n,selectedView:e.selectedView})}else if(c===C.d2){let{clientX:t,clientY:n,pageIds:r,shouldShowDuplicateOption:i}=e.dropdownShown.data;return a.createElement(iD.W,{pageIds:r,clientX:t,clientY:n,selectedView:e.selectedView,shouldShowDuplicateOption:i})}else if(c===C.$O){let{clientX:t,clientY:n,version:r,checkpointKey:i,callback:s,editName:c,enableClear:d,disableDuplicate:u}=e.dropdownShown.data;return a.createElement(ib,{version:r,checkpointKey:i,clientX:t,clientY:n,selectedView:e.selectedView,userCanEditFile:o,userCanRunPlugins:l,isObjectsPanelMenu:!1,editName:c,enableClear:d,disableDuplicate:u,callback:s})}else if(c===C.VJ){let{comment:t,parentRect:n,thread:r,isUnread:l}=e.dropdownShown.data;return a.createElement(rr.V,{dispatch:s,comment:t,parentRect:n,currentUser:i,isUnread:l,thread:r,copyLink:d})}else if(c===C.Z7){let{thread:t,pinClientRect:n}=e.dropdownShown.data;return a.createElement(rb,{selectedView:e.selectedView,thread:t,pinClientRect:n,copyLink:d})}else if(c===C.DT){let{attachment:t,clientX:n,clientY:r}=e.dropdownShown.data;return a.createElement(rn,{attachment:t,selectedView:e.selectedView,clientX:n,clientY:r})}else if(c===C.i){let{clientX:n,clientY:r,stringToCopy:i,expandElement:o,guid:s}=e.dropdownShown.data;return a.createElement(iS,{clientX:n,clientY:r,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,stringToCopy:i,expandElement:o,guid:s})}else if(c===C.Sl){let{clientX:n,clientY:r,onCopyText:i}=e.dropdownShown.data;return a.createElement(ix,{clientX:n,clientY:r,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,onCopyText:i})}else if(c===C.WJ){let{targetInViewport:n,nodeId:r}=e.dropdownShown.data;return a.createElement(iY,{targetInViewport:n,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0,nodeId:r})}else if(c===C.XX){let{targetInViewport:n,annotationsCount:r}=e.dropdownShown.data;return a.createElement(rf,{targetInViewport:n,annotationsCount:r,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0})}else if(c===C.si){let{sectionId:n,initialShelfId:r,initialTemplateId:i,sectionName:o,showAlertOnSelect:s}=e.dropdownShown.data;return a.createElement(lv,{sectionId:n,sectionName:o,initialShelfId:r,initialTemplateId:i,showAlertOnSelect:s,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!0})}else if(c===C.U3){let{clientX:n,clientY:r}=e.dropdownShown.data;return a.createElement(iT,{clientX:n,clientY:r,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1})}else if(c===C.kX){let{clientX:t,clientY:n,targetItem:r,paint:i,onPaintChange:l}=e.dropdownShown.data;return a.createElement(i1,{clientX:t,clientY:n,selectedView:e.selectedView,targetItem:r,paint:i,onPaintChange:l})}else if(c===C.J7){let{clientX:n,clientY:r}=e.dropdownShown.data;return a.createElement(iX.mh,{clientX:n,clientY:r,selectedView:e.selectedView,userCanEditFile:t,userCanRunPlugins:l,isObjectsPanelMenu:!1,isTextEditModeMenu:!0})}else if(c===C.V6){let{clientX:t,clientY:n,deleteCollection:r}=e.dropdownShown.data;return a.createElement(a8.e_,{clientX:t,clientY:n,deleteCollection:r,selectedView:e.selectedView})}else if(c===C.Zn){let{clientX:t,clientY:n,deleteField:r}=e.dropdownShown.data;return a.createElement(a8.Zx,{clientX:t,clientY:n,deleteField:r,selectedView:e.selectedView})}else if(c===C.s9){let{clientX:t,clientY:n,deleteItem:r}=e.dropdownShown.data;return a.createElement(a8.M9,{clientX:t,clientY:n,deleteItem:r,selectedView:e.selectedView})}else if(c===C.k3){let{clientX:t,clientY:n,frameId:r}=e.dropdownShown.data;return a.createElement(a6._U,{clientX:t,clientY:n,frameId:r,selectedView:e.selectedView})}return null}var lw=n(236192),lT=n(22774),lS=n(516398),lx=n(283942),lk=n(855418),lN=n(69961),lI=n(536825),lA=n(511617),lO=n(623738),lL=n(281381),lD=n(175290),lR=n(553015),lM=n(809840),lP=n(154979),lF=n(588169),lB=n(227795),lU=n(169006),lG=n(324597),lK=n(586281),lV=n(480952),lH=n(261607),lz=n(501256),lW=n(168671),lj=n(631378);function l$(e){return a.createElement("div",null,(0,lG.Dz)(e.token.content))}function lq(e){let t=(0,r.d4)(e=>e.mirror.appModel.keyboardShortcuts);return a.createElement("div",{style:eo.sx.colorText.px14.$,className:e.isSelected?"action_autocomplete_input--rowSelected--62Uvp autocomplete_permissions--contactRowSelected--xYJKX autocomplete_permissions--contactRow--DRMiv":"action_autocomplete_input--row--HRsbZ autocomplete_permissions--contactRow--DRMiv"},a.createElement(lD.Y,null,a.createElement(lM.E,null,(0,lU.EG)(e.searchResult)),a.createElement(lD.M,null),a.createElement(lM.E,null,e.searchResult.shortcutText??(0,$.c1)(t,(0,lG.Dz)(e.searchResult)))))}function lY({onAutocompleteChange:e}){let t=(0,lV.u)(),n=(0,lH.c)(),i=(0,r.d4)(e=>e.mirror.appModel),l=(0,r.d4)(e=>e.selectedView),o=(0,r.d4)(e=>e.user?.locale),s=(0,lK.M)({isReadOnly:i.isReadOnly,extensionMenuProps:n,includeDisabled:!0}),c=new lj.x(i,l,[...t,...s],{includeDisabled:!0,acceptsUnicode:"ja"===o}),[d,m]=a.useState((0,lz.Rs)());return a.createElement(lW.P,{autoFocus:!0,autocompleteResultsClassName:el.cx.maxW300.$,autocomplete:d,placeholder:(0,_.t)("fullscreen_actions.search_menus_commands_and_plugins"),onChange:t=>{m(t),e(t)},validateToken:u.lQ,searchResults:e=>c.searchIncludeKey(i,e.inputValue).filter(([e,t])=>!t.parametersRequired).map(([e,t])=>({id:`${(0,lG.Dz)(t)}-${t.pluginId}-${(0,lU.EG)(t)}`,searchKey:e,...t})),SearchResultComponent:lq,TokenComponent:l$})}var lX=n(752795),lJ=n(154500);let lZ="\u{1F310}";var lQ=(e=>(e[e.NOT_PRESSED=0]="NOT_PRESSED",e[e.PRESSED=1]="PRESSED",e[e.PRESSED_FIRST_TIME=2]="PRESSED_FIRST_TIME",e[e.HELD=3]="HELD",e[e.COMPLETED_TAB_ANIMATION=4]="COMPLETED_TAB_ANIMATION",e))(lQ||{}),l0=(e=>(e[e.FIGJAM=0]="FIGJAM",e[e.DESIGN=1]="DESIGN",e[e.DEV_MODE=2]="DEV_MODE",e[e.SLIDES=3]="SLIDES",e))(l0||{});function l1(e,t){return e in t?t[e].map(e=>e.text).filter(e=>-1===e.toLowerCase().indexOf("num")).map(l3.splitStringIntoKeys):null}function l2(e,t){let n=e.map(e=>{let n=l1(e,t);return null==n||0===n.length?null:n[0]}).filter(lX.isNotNullish);if(0===n.length)return null;if(1===n.length)return rw.k.warn("combineShortcuts: Could not find bindings to combine. \nactions: %o",e),null;let a=n[0].slice(0,-1),r=n.map(e=>e.length-1===a.length&&e.slice(0,-1).filter((e,t)=>e===a[t]).length===a.length?e.slice(-1)[0]:null).filter(lX.isNotNullish);return r.length!==e.length?(rw.k.warn("combineShortcuts: Bindings length mismatch. \nactions: %o, shortcuts %s and %s",e,n[0].join(""),n[1].join("")),null):[[...a,r]]}let l5=class e extends a.PureComponent{constructor(){super(...arguments),this.state={pressed:0,animationDelays:this.calculateAnimationDelays(this.props)},this.prettifyKeyLabel=e=>e.replace(/\u23B5/,(0,_.t)("whiteboard.keyboard_shortcuts.key_label.space")).replace(/\u21E5/,`\u21E5 ${(0,_.t)("whiteboard.keyboard_shortcuts.key_label.tab")}`).replace(/\u21DE/,`\u21DE ${(0,_.t)("whiteboard.keyboard_shortcuts.key_label.pg_up")}`).replace(/\u21DF/,`\u21DF ${(0,_.t)("whiteboard.keyboard_shortcuts.key_label.pg_dn")}`).replace(/\u2196/,`\u2196 ${(0,_.t)("whiteboard.keyboard_shortcuts.key_label.home")}`).replace(/\u2198/,`\u2198 ${(0,_.t)("whiteboard.keyboard_shortcuts.key_label.end")}`).replace(/\u238B/,`\u238B ${(0,_.t)("whiteboard.keyboard_shortcuts.key_label.esc")}`).replace(/\u21A9/,`\u21A9 ${(0,_.t)("whiteboard.keyboard_shortcuts.key_label.enter")}`),this.getTooltipText=e=>{switch(e){case"\u2318":return(0,_.t)("whiteboard.keyboard_shortcuts.tooltip.command");case"\u21E7":return(0,_.t)("whiteboard.keyboard_shortcuts.tooltip.shift");case"\u2325":return(0,_.t)("whiteboard.keyboard_shortcuts.tooltip.option_alt");case"\u2303":return(0,_.t)("whiteboard.keyboard_shortcuts.tooltip.control");case"\u232B":return(0,_.t)("whiteboard.keyboard_shortcuts.tooltip.backspace");case"\u2190":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.left");case"\u2192":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.right");default:return null}},this.renderCharKeyBox=(e,t)=>{let n=this.prettifyKeyLabel(e),r=n.startsWith(lZ),i=n.length>1&&!r?lJ.SR:lJ.FU,l=this.state.animationDelays[t]?{animationDelay:`${this.state.animationDelays[t]}ms`}:{};return a.createElement("span",{key:n+t,className:i,style:l,"data-tooltip-show-immediately":"true","data-tooltip-show-above":"true","data-tooltip-type":nk.Ib.TEXT,"data-tooltip":this.getTooltipText(e)},n)},this.renderKeyBindings=e=>{let t=[],n=0;return e.forEach(e=>{if("string"==typeof e)t.push(this.renderCharKeyBox(e,n)),n++;else{let r=this.renderCharKeyBox(e[0],n),i=this.renderCharKeyBox(e[1],n+1);t.push(r),t.push(a.createElement("div",{key:`${e[0]}-${e[1]}`,className:lJ.Uo},(0,_.tx)("whiteboard.keyboard_shortcuts.and"))),t.push(i),n+=2}}),a.createElement("span",{className:lJ.pi},t)},this.triggerUnpressed=()=>{this.setState({pressed:0})},this.triggerPressed=()=>{4!=this.state.pressed&&2!=this.state.pressed&&(clearTimeout(this.pressedTimeout),this.pressedTimeout=setTimeout(()=>this.triggerUnpressed(),500),3!=this.state.pressed&&(1==this.state.pressed?this.setState({pressed:3}):this.setState({pressed:1})))},this.triggerPressedFirstTime=()=>{this.setState({pressed:2}),clearTimeout(this.pressedTimeout),setTimeout(()=>this.triggerUnpressed(),1200)},this.triggerCompletedTab=()=>{this.setState({pressed:4}),clearTimeout(this.pressedTimeout),setTimeout(()=>this.triggerUnpressed(),4e3)}}static shortcutUsedCount(e,t){if(null==t)return 0;switch(e){case"align-centers":return Math.min(t["align-horizontal-center"]||0,t["align-vertical-center"]||0);case"align-left-right":return Math.min(t["align-left"]||0,t["align-right"]||0);case"align-top-bottom":return Math.min(t["align-top"]||0,t["align-bottom"]||0);case"distribute-spacing":return Math.min(t["distribute-horizontal-spacing"]||0,t["distribute-vertical-spacing"]||0);case"text-font-size-adjust":return Math.min(t["text-font-size-increase"]||0,t["text-font-size-decrease"]||0);case"text-letter-spacing-adjust":return Math.min(t["text-letter-spacing-increase"]||0,t["text-letter-spacing-decrease"]||0);case"text-indent-and-dedent-list":return Math.min(t["text-indent-list"]||0,t["text-dedent-list"]||0);case"text-line-height-adjust":return Math.min(t["text-line-height-increase"]||0,t["text-line-height-decrease"]||0);case"bold-and-italic":return Math.min(t["toggle-bold"]||0,t["text-toggle-italic"]||0);case"text-bold-adjust":return Math.min(t["text-bold-increase"]||0,t["text-bold-decrease"]||0);case"bulleted-and-numbered-list":return Math.min(t["text-toggle-unordered-list"]||0,t["text-toggle-ordered-list"]||0);default:return t[e]||0}}calculateAnimationDelays(e){let t=[];for(var n=0;n<5;n++){let n=0;e.allTabsCompletedAnimation?n=-Math.floor(2e3*Math.random()):e.tabCompletedFirstTimeAnimation&&null!=e.tabCompletedAnimationKeyPosition&&(n=110*Math.abs(e.keyPosition-e.tabCompletedAnimationKeyPosition)+100),t.push(n)}return t}UNSAFE_componentWillReceiveProps(t){let n=e.shortcutUsedCount(this.props.shortcutKey,this.props.usedKeyboardShortcuts),a=e.shortcutUsedCount(t.shortcutKey,t.usedKeyboardShortcuts);if(this.props.allTabsCompletedAnimation!=t.allTabsCompletedAnimation||this.props.tabCompletedFirstTimeAnimation!=t.tabCompletedFirstTimeAnimation){let e=this.calculateAnimationDelays(t);this.setState({animationDelays:e})}t.tabCompletedFirstTimeAnimation&&!this.props.tabCompletedAnimation&&t.tabCompletedAnimation?this.triggerCompletedTab():n!=a&&this.props.shortcutKey==t.shortcutKey&&(1==a?this.triggerPressedFirstTime():this.triggerPressed())}render(){let t,n;try{t=this.props.customName?this.props.customName:this.props.displayName?(0,rF.A)(this.props.displayName):(0,rF.A)(this.props.shortcutKey)}catch(e){console.error(e),t=this.props.shortcutKey}let r=e.shortcutUsedCount(this.props.shortcutKey,this.props.usedKeyboardShortcuts)>0,i=e.keybindingsForShortcut(this.props.shortcutKey,this.props.useNumbersForOpacity,this.props.appModelKeyboardShortcuts),l=null;return i&&(l=this.renderKeyBindings(i[0])),n=this.props.allTabsCompletedAnimation?lJ.Ve:4==this.state.pressed?lJ.T7:2==this.state.pressed?lJ.Q3:3==this.state.pressed?lJ.u$:1==this.state.pressed?lJ.b3:r?lJ.k3:lJ.J8,i&&a.createElement("tr",{className:n,key:this.props.shortcutKey},this.props.icon&&(this.props.editorType===j.nT.Design||this.props.editorType===j.nT.DevHandoff)&&a.createElement("td",{className:lJ.mH},a.createElement(nd.B,{svg:this.props.icon,className:lJ.cw})),a.createElement("td",{className:lJ.QL},t,this.props.usage&&a.createElement("div",{className:lJ.CI},this.props.usage)),a.createElement("td",{className:lJ.qH},l))}};l5.displayName="Shortcut",l5.specialKeys=["Backspace","Delete","Down","End","Enter","Home","Left","Page Down","Page Up","Right","Tab","Up"],l5.getLocalizedSpecialKey=e=>{switch(e){case"Backspace":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.backspace");case"Delete":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.delete");case"Down":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.down");case"End":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.end");case"Enter":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.enter");case"Home":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.home");case"Left":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.left");case"Page Down":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.page_down");case"Page Up":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.page_up");case"Right":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.right");case"Tab":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.tab");case"Up":return(0,_.t)("whiteboard.keyboard_shortcuts.key_label.up")}},l5.splitStringIntoKeys=e=>{let t=[],n=(0,o.kc)().ce_mac_page_shortcuts&&tR.y.isApple();for(;e.length>0;)if(e.startsWith("Ctrl+"))t.push((0,_.t)("whiteboard.keyboard_shortcuts.key_label.ctrl")),e=e.slice(5);else if(e.startsWith("Shift+"))t.push((0,_.t)("whiteboard.keyboard_shortcuts.key_label.shift")),e=e.slice(6);else if(e.startsWith("Alt+"))t.push((0,_.t)("whiteboard.keyboard_shortcuts.key_label.alt")),e=e.slice(4);else if(e.startsWith("Win+"))t.push((0,_.t)("whiteboard.keyboard_shortcuts.key_label.win")),e=e.slice(4);else if(n&&e.startsWith("Page Up"))t.push(lZ),t.push("\u2191"),e=e.slice(7);else if(n&&e.startsWith("Page Down"))t.push(lZ),t.push("\u2193"),e=e.slice(9);else{let n=!1;for(let a=0;a<l5.specialKeys.length;a++){let r=l5.specialKeys[a];if(e.startsWith(r)){t.push(l5.getLocalizedSpecialKey(r)),e=e.slice(r.length),n=!0;break}}n||(t.push(e[0]),e=e.slice(1))}return t},l5.keybindingsForShortcut=(e,t,n)=>{if(!n)return null;let a=function(e,t){let n=tR.y.isApple(),a=n?"\u2325":m.Ay.chromeos?(0,_.t)("whiteboard.keyboard_shortcuts.key_label.search"):(0,_.t)("whiteboard.keyboard_shortcuts.key_label.alt"),r=n?"\u2318":(0,_.t)("whiteboard.keyboard_shortcuts.key_label.ctrl"),i=n?"\u21A9":(0,_.t)("whiteboard.keyboard_shortcuts.key_label.enter"),l=n?"\u238B":(0,_.t)("whiteboard.keyboard_shortcuts.key_label.esc"),o=n?"\u21E7":(0,_.t)("whiteboard.keyboard_shortcuts.key_label.shift"),s=(0,_.t)("whiteboard.keyboard_shortcuts.key_label.drag"),c=(0,_.t)("whiteboard.keyboard_shortcuts.key_label.click"),d=(0,_.t)("whiteboard.keyboard_shortcuts.key_label.dbl_click"),u=Object.entries({"align-left-right":l2(["align-left","align-right"],e),"align-top-bottom":l2(["align-top","align-bottom"],e),"align-centers":l2(["align-horizontal-center","align-vertical-center"],e),copy:[[r,"C"]],"center-resize-drag":[[a]],"crop-image":[[a,d]],cut:[[r,"X"]],"deep-select":[[r,c]],"deep-select-rectangle":[[r,s]],"deselect-all":[[l]],duplicate:[[a]],"ignore-constraints":[[r]],"measure-to-selection":[[a]],"move-while-resizing":[["\u23B5"]],pan:[["\u23B5",s]],paste:[[r,"V"]],"request-edit-mode":[[i]],"resize-proportionally":[[o]],"swap-instance":[[a]],"text-letter-spacing-adjust":l2(["text-letter-spacing-decrease","text-letter-spacing-increase"],e),"text-line-height-adjust":l2(["text-line-height-decrease","text-line-height-increase"],e),"text-font-size-adjust":l2(["text-font-size-decrease","text-font-size-increase"],e),"text-bold-adjust":l2(["text-bold-decrease","text-bold-increase"],e),"bold-and-italic":l2(["toggle-bold","text-toggle-italic"],e),"stamp-or-reaction-wheel":[["E"]],"set-tool-section":[["F"]],"bulleted-and-numbered-list":l2(["text-toggle-ordered-list","text-toggle-unordered-list"],e),"distribute-spacing":l2(["distribute-horizontal-spacing","distribute-vertical-spacing"],e),"text-indent-and-dedent-list":l2(["text-indent-list","text-dedent-list"],e),"straight-connector":[[o,s]],"edit-text":[[i]],"set-opacity-00":t?[["0","0"]]:[[o,"0","0"]],[lS.dz]:n?[["\u2318","\u2303","\u2192"]]:[[(0,_.t)("whiteboard.keyboard_shortcuts.key_label.ctrl"),"F6"]],[lS.Jt]:n?[["\u2318","\u2303","\u2190"]]:[[o,(0,_.t)("whiteboard.keyboard_shortcuts.key_label.ctrl"),"F6"]],"quick-create-immutable-frame":l1("quick-create",e),"stamp-on-node":l1("quick-create",e)}).reduce((e,[t,n])=>((0,lX.isNotNullish)(n)&&(e[t]=n),e),{});return n?{...u,"bend-tool":[["\u2318"]]}:u}(n,t);return e in n?l1(e,n):e in a?a[e]:null};let l3=l5;function l4(){let[e,t]=a.useState({step:"NOT_CURRENTLY_ADDING"}),n=(0,eC.lg)(),l=(0,P.J2)(i.Ez5.editorState().useNumbersForOpacity),o=(0,r.d4)(e=>e.usedKeyboardShortcuts),s=(0,r.d4)(e=>e.mirror.appModel.keyboardShortcuts),c="ADDING_WAITING_FOR_KEY_REGISTRATION"===e.step&&e.menuItem,d=a.createRef(),u=a.useCallback(n=>{n.stopPropagation(),n.preventDefault();let a=function(e){let t=(0,lF.v7)(),n=[];if(e.metaKey&&n.push("Meta"),e.altKey&&n.push("Alt"),e.shiftKey&&n.push("Shift"),e.ctrlKey&&n.push("Control"),"MetaRight"===e.code||"MetaLeft"===e.code||"ShiftRight"===e.code||"ShiftLeft"===e.code||"ControlRight"===e.code||"ControlLeft"===e.code||"AltRight"===e.code||"AltLeft"===e.code);else if(t===i.aTn.UNKNOWN){let t=i.glU.stringKeyFromWebEventKeycode(e.keyCode);n.push(t)}else{let a=i.glU.stringKeyFromWebEventCode(e.code,t);n.push(a)}return lP.Gm.getKeyboardShortcutFromText(n.join("+"),null)}(n),r=a&&"Escape"===a.key;if(a&&"ADDING_WAITING_FOR_KEY_REGISTRATION"===e.step&&c&&!r){let e,t;if("None"===a.key)return;c.action?(e=i.XpX.FULLSCREEN,t=c.action):(e=i.XpX.NON_FULLSCREEN,t=c.searchKey),(0,lO.L3)(e,t,(0,lP.t4)(a))}t({step:"NOT_CURRENTLY_ADDING"})},[c,e.step]);return a.useEffect(()=>{"ADDING_WAITING_FOR_KEY_REGISTRATION"===e.step&&d.current?.focus()},[d,e.step]),a.createElement("div",{className:lJ.PG},a.createElement("div",{className:lJ.fi},a.createElement(lD.Y,{direction:"vertical",height:"fill-parent",padding:{vertical:10}},a.createElement(lM.E,{color:"menu",fontSize:14},(0,_.tx)("keyboard_settings.custom_keyboard_shortcuts")),a.createElement(lR.$,{variant:"primary",icon:"plus-32",onClick:()=>t({step:"ADDING_WAITING_FOR_ACTION_INPUT"})},a.createElement(lM.E,null,(0,_.tx)("keyboard_settings.custom_keyboard_shortcuts.add"))),a.createElement(lD.M,null),a.createElement(lL.Ex,{className:el.cx.mt4.$,text:"Internal only - #feat-custom-keyboard-shortcuts",color:lL.zE.WARNING,onClick:()=>(0,lA.FJ)("https://figma.slack.com/archives/C055MQJ2E5P","_blank")}))),a.createElement("div",{className:lJ.fi,style:eo.sx.pt32.overflowYScroll.add({maxHeight:"162px"}).$},Object.values((0,lO.Uc)()).map(({action:e,type:t})=>a.createElement(lD.Y,{key:`custom-shortcuts-${e}`,width:"fill-parent",height:"hug-contents"},a.createElement(l3,{customName:"FULLSCREEN"===t?void 0:e,shortcutKey:e,editorType:(0,j.wN)(n),keyPosition:0,useNumbersForOpacity:l,usedKeyboardShortcuts:o,appModelKeyboardShortcuts:s}),a.createElement(lB.K0,{className:"keyboard_shortcut_panel_custom_tab--deleteButton--xf9nN",onClick:()=>(0,lO.C4)("FULLSCREEN"===t?i.XpX.FULLSCREEN:i.XpX.NON_FULLSCREEN,e),"data-tooltip-type":nk.Ib.TEXT,"data-tooltip":(0,_.t)("whiteboard.keyboard_shortcuts.delete.shortcut")},a.createElement(lI.O,null)))),"ADDING_WAITING_FOR_ACTION_INPUT"===e.step&&a.createElement("div",{className:el.cx.relative.mt4.$},a.createElement(lY,{onAutocompleteChange:e=>{let n=e.tokens[0];n&&t({step:"ADDING_WAITING_FOR_KEY_REGISTRATION",menuItem:n.content})}})),"ADDING_WAITING_FOR_KEY_REGISTRATION"===e.step&&a.createElement(lD.Y,{height:"hug-contents",verticalAlignItems:"center"},a.createElement(lM.E,{color:"menu"},(0,lU.EG)(e.menuItem)),a.createElement(lD.M,null),a.createElement("div",{className:el.cx.py4.$},a.createElement("div",{className:tL()(lJ.k3,lJ.pi)},a.createElement(lR.$,{ref:d,variant:"primary",onKeyDown:u},a.createElement(lM.E,null,(0,_.tx)("keyboard_settings.custom_keyboard_shortcuts.press_key")))))),a.createElement("div",{style:eo.sx.h150.$})))}let l6="keyboard_rows--row--8eEsv",l8="ISO_ENTER",l7="SPACER";function l9({createKey:e}){return a.createElement("div",{className:l6},e("Backquote"),e("Digit1"),e("Digit2"),e("Digit3"),e("Digit4"),e("Digit5"),e("Digit6"),e("Digit7"),e("Digit8"),e("Digit9"),e("Digit0"),e("Minus"),e("Equal"),e("IntlYen"),e("Backspace",113))}function oe({createKey:e,isBackslashRow2:t}){let n=null==t?e("Backslash"):t?e("Backslash"):e(l8,90);return a.createElement("div",{className:l6},e("Tab",90),e("KeyQ"),e("KeyW"),e("KeyE"),e("KeyR"),e("KeyT"),e("KeyY"),e("KeyU"),e("KeyI"),e("KeyO"),e("KeyP"),e("BracketLeft"),e("BracketRight"),n)}function ot({createKey:e,isBackslashRow2:t}){let n=null==t?e("Backslash"):t?null:e("Backslash"),r=null==t?e("Enter",60):t?e("Enter",60):e(l7,20);return a.createElement("div",{className:l6},e("CapsLock",120),e("KeyA"),e("KeyS"),e("KeyD"),e("KeyF"),e("KeyG"),e("KeyH"),e("KeyJ"),e("KeyK"),e("KeyL"),e("Semicolon"),e("Quote"),n,r)}function on({createKey:e}){return a.createElement("div",{className:l6},e("ShiftLeft",134),e("IntlBackslash"),e("KeyZ"),e("KeyX"),e("KeyC"),e("KeyV"),e("KeyB"),e("KeyN"),e("KeyM"),e("Comma"),e("Period"),e("Slash"),e("IntlRo"),e("ShiftRight",94))}function oa({createKey:e}){return m.Ay.mac?a.createElement("div",{className:l6},e("Fn"),e("ControlLeft"),e("AltLeft"),e("MetaLeft"),e("Space",500),e("MetaRight"),e("AltRight")):a.createElement("div",{className:l6},e("Fn"),e("ControlLeft"),e("MetaLeft"),e("AltLeft"),e("Space",500),e("AltRight"),e("ControlRight"))}var or=n(245389);let oi="keyboard_shortcut_panel_layout_tab--row--MilbG",ol="keyboard_shortcut_panel_layout_tab--column--SzOhn keyboard_shortcut_panel--column--lHvov",oo="keyboard_shortcut_panel_layout_tab--wideColumn--tR6V-";var os=n(497789);function oc(e){switch(e){case i.aTn.CHINESE:case i.aTn.KOREAN:case i.aTn.US_QWERTY:case i.aTn.UNKNOWN:case i.aTn.DVORAK:return!0;default:return!1}}function od({label:e,width:t}){return a.createElement("div",{style:{flexGrow:t??1},className:"keyboard_shortcut_panel_layout_tab--key--zFiya keyboard_shortcut_panel--singleCharKeyBox--DD6s1 keyboard_shortcut_panel--shortcutBox--9Ltqp"},e)}function ou({layout:e}){let t=(0,a.useCallback)(t=>"Space"===t?" ":i.glU.getKeyboardLayoutAsJSON(e)[t],[e]),n=(e,n)=>{if(e!==l8&&e!==l7){let r=t(e);return r?a.createElement(od,{key:e,width:n,label:r}):null}return e===l8?a.createElement("div",{style:{flexGrow:n??1},className:"keyboard_shortcut_panel_layout_tab--enterISOKeyContainer--PK7LJ keyboard_shortcut_panel_layout_tab--key--zFiya keyboard_shortcut_panel--singleCharKeyBox--DD6s1 keyboard_shortcut_panel--shortcutBox--9Ltqp"},a.createElement(nd.B,{className:"keyboard_shortcut_panel_layout_tab--enterISOKey--AbX2h",svg:os.A})):e===l7?a.createElement("div",{style:{flexGrow:n??1},className:"keyboard_shortcut_panel_layout_tab--spacerKey--g8rv4 keyboard_shortcut_panel_layout_tab--key--zFiya keyboard_shortcut_panel--singleCharKeyBox--DD6s1 keyboard_shortcut_panel--shortcutBox--9Ltqp"},t("Enter")):null};return a.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--keyboardContainer--JLzz1"},a.createElement("div",{className:oi},a.createElement(l9,{createKey:n})),a.createElement("div",{className:oi},a.createElement(oe,{createKey:n,isBackslashRow2:oc(e)})),a.createElement("div",{className:oi},a.createElement(ot,{createKey:n,isBackslashRow2:oc(e)})),a.createElement("div",{className:oi},a.createElement(on,{createKey:n})),a.createElement("div",{className:tL()(oi,"keyboard_shortcut_panel_layout_tab--row5--TBfPa")},a.createElement(oa,{createKey:n})))}let om=async()=>{if(!ee.eD)return null;let e=await ee.eD.getKeyboardLayout();return e?(0,or.pB)(e):null};class op extends aO.c${}function o_({layout:e,setPreviewedLayout:t}){let n=(0,r.wA)(),l=(0,r.d4)(e=>e.dropdownShown),[o,s]=(0,a.useState)(e),[c,d]=(0,a.useState)();om().then(e=>{c!==e&&d(e)});let u=(0,a.useMemo)(()=>{let e=c?a.createElement(op,{key:c,value:c}):null,t=(0,lF.GP)().map(e=>{if(isNaN(parseInt(e)))return null;let t=parseInt(e);return t===c?null:{name:(0,lF.As)(t),layoutOption:t}}).filter(lX.isNotNullish).sort((e,t)=>e.layoutOption===i.aTn.UNKNOWN?1:t.layoutOption===i.aTn.UNKNOWN?-1:e.name.localeCompare(t.name)).map(({layoutOption:e})=>a.createElement(op,{key:e,value:e}));return null!=e?[a.createElement(op,{key:(0,_.t)("keyboard_settings.detected"),formattedValue:(0,_.t)("keyboard_settings.detected"),disabled:!0}),e,a.createElement(aO.sK,{key:"divider-1"}),a.createElement(op,{key:(0,_.t)("keyboard_settings.other_layouts"),formattedValue:(0,_.t)("keyboard_settings.other_layouts"),disabled:!0}),...t]:t},[c]),m=a.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--selectorWrapper--ecEHm"},a.createElement(aO.l6,{id:"keyboard-layout-select",property:o,dispatch:n,autoFocus:!1,className:"keyboard_shortcut_panel_layout_tab--selectorContainer--BWtmR",dropdownClassName:C.s4,inputClassName:"keyboard_shortcut_panel_layout_tab--selectorInputContainer--z1tfj",chevronClassName:"keyboard_shortcut_panel_layout_tab--selectorChevron--ZnCbX",formatter:{format:e=>(0,lF.As)(e)},onMouseDown:e=>{e.stopPropagation()},onChange:e=>{s(e),(0,lF.rd)({layout:e})},onOptionFocus:t,dropdownShown:l,recordingKey:"keyboardLayoutSelector"},u));return a.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--selectorRow--QPlYR"},a.createElement("span",{className:"keyboard_shortcut_panel_layout_tab--selectorLabelText--3jkuk"},(0,_.t)("keyboard_settings.keyboard_layout_panel_selector")),a.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--selectorDropdownContainer--0rd1S"},m))}function og({layout:e,setPreviewedLayout:t}){let n=(0,_.t)("keyboard_settings.figma_keyboard_shortcuts_won_t_automatically_change_if_you_change_your_system_keyboard_layout");return a.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--leftColumnWrapper--8Jn1P"},a.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--keyboardSelectorContainerSection--gTvK9"},a.createElement(o_,{layout:e,setPreviewedLayout:t})),a.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--keyboardDescriptionSection--yD9L-"},e===i.aTn.UNKNOWN?null:n),a.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--keyboardLearnMoreSection--PV6Hj"},a.createElement("a",{className:"keyboard_shortcut_panel_layout_tab--learnMoreLink--bOFxg",href:"https://help.figma.com/hc/articles/5665442977431",target:"_blank",rel:"noopener"},(0,_.tx)("keyboard_settings.request_a_new_layout_or_learn_more"))))}function of(){let e=(0,P.J2)(i.Ez5.editorState().keyboardLayoutPreference),[t,n]=(0,a.useState)();return a.createElement("div",{className:"keyboard_shortcut_panel_layout_tab--contents--8vVa7 keyboard_shortcut_panel--contents--8ae0D"},a.createElement("div",{className:tL()(ol,oo)},a.createElement(og,{layout:e,setPreviewedLayout:n})),a.createElement("div",{className:tL()(ol,oo,"keyboard_shortcut_panel_layout_tab--keyboardVisualColumn--5Hw4F")},a.createElement(ou,{layout:t??e})))}var oh=n(811641),oE=n(481103),oy=n(586779),ob=n(964829),ov=n(630834);class oC extends a.PureComponent{render(){return a.createElement("div",{className:lJ.fi},a.createElement("table",null,this.props.children))}}oC.displayName="Column";class ow extends a.PureComponent{render(){let e=a.Children.toArray(this.props.children).filter(e=>!!e);if(0===e.length)return null;let t=this.props.caption?(0,rF.A)(this.props.caption):null;return a.createElement("tbody",null,t&&a.createElement("tr",null,a.createElement("th",{className:lJ.xQ,colSpan:3},t)),e)}}function oT(e,t,n){if(void 0===t&&void 0===n)return!0;let a=e=>{let a=!0;return void 0!==n&&(a&&=n!==e),void 0!==t&&(Array.isArray(t)?a&&=t.includes(e):a&&=t===e),a};return e===j.nT.Design?a(l0.DESIGN):e===j.nT.DevHandoff?a(l0.DEV_MODE):e===j.nT.Whiteboard?a(l0.FIGJAM):e===j.nT.Slides&&a(l0.SLIDES)}function oS(e){return!e||e.every(e=>(0,o.kc)()[e])}ow.displayName="Category";class ox extends a.Component{constructor(e){super(e),this.keyShortcutPositionsInTab={},this.shortcutList={[oh.Jq.ESSENTIAL]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.essential"),includeInEditorType:[l0.DESIGN,l0.SLIDES],columns:[[{shortcuts:[{shortcutKey:"toggle-ui",usage:(0,_.tx)("fullscreen.keyboard_shortcuts_panel.toggle_ui_description"),includeInEditorType:l0.DESIGN},{shortcutKey:"create-slide",usage:(0,_.tx)("slides.keyboard_shortcuts.create-slide-description"),includeInEditorType:l0.SLIDES}]}],[{shortcuts:[this.props.hasSubscribedLibraries?{shortcutKey:"component-insert",displayName:this.componentInsertDisplayName(),usage:(0,_.tx)("fullscreen.keyboard_shortcuts_panel.component_insert_description"),includeInEditorType:l0.DESIGN}:{shortcutKey:"toggle-dropper",usage:(0,_.tx)("fullscreen.keyboard_shortcuts_panel.toggle_dropper_description"),includeInEditorType:l0.DESIGN},{shortcutKey:"toggle-slide-view",usage:(0,_.tx)("slides.keyboard_shortcuts.toggle-slide-view-description"),includeInEditorType:l0.SLIDES}]}],[{shortcuts:[{shortcutKey:"toggle-menu",displayName:(0,ia.gn)()?"toggle-actions-menu":"toggle-menu",usage:(0,_.tx)("fullscreen.keyboard_shortcuts_panel.toggle_menu_description"),includeInEditorType:[l0.DESIGN,l0.SLIDES]}]}]]},[oh.Jq.TOOLS]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.tools"),columns:[[{shortcuts:[{shortcutKey:"set-tool-default",displayName:"set-tool-default-desc-figma",icon:(0,lk.SD)(i.NLJ.SELECT),includeInEditorType:[l0.DESIGN,l0.SLIDES]},{shortcutKey:"set-tool-default-figjam",displayName:"set-tool-default-desc-figjam",icon:(0,lk.SD)(i.NLJ.SELECT),includeInEditorType:l0.FIGJAM},{shortcutKey:"set-tool-frame",displayName:"set-tool-frame-desc",icon:(0,lk.SD)(i.NLJ.FRAME),includeInEditorType:l0.DESIGN},{shortcutKey:"set-tool-pen",displayName:"set-tool-pen-desc",icon:(0,lk.SD)(i.NLJ.VECTOR_PEN),includeInEditorType:l0.DESIGN},{shortcutKey:"set-tool-sticky",includeInEditorType:l0.FIGJAM},{shortcutKey:"set-tool-connector-straight",includeInEditorType:l0.FIGJAM},{shortcutKey:"set-tool-connector-elbowed",includeInEditorType:l0.FIGJAM},{shortcutKey:"set-tool-pencil",displayName:"set-tool-pencil-desc",icon:(0,lk.SD)(i.NLJ.VECTOR_PENCIL),includeInEditorType:l0.DESIGN},{shortcutKey:"set-tool-pencil",displayName:"set-tool-marker",includeInEditorType:l0.FIGJAM},{shortcutKey:"set-tool-hand",displayName:"set-tool-hand",icon:(0,lk.SD)(i.NLJ.HAND),includeInEditorType:[l0.SLIDES]},{shortcutKey:"set-tool-scale",displayName:"set-tool-scale",icon:(0,lk.SD)(i.NLJ.SCALE),includeInEditorType:[l0.SLIDES]},{shortcutKey:"toggle-dropper",displayName:"toggle-dropper",icon:(0,lk.SD)(i.NLJ.DROPPER_COLOR),includeInEditorType:l0.SLIDES},{shortcutKey:"toggle-menu",displayName:(0,ia.gn)()?"toggle-actions-menu":"toggle-menu",icon:lk.bs(ia.gn()?"toggle-actions-menu":"toggle-menu")?.svg??null,includeInEditorType:[l0.SLIDES]}]}],[{shortcuts:[{shortcutKey:"set-tool-type",displayName:"set-tool-type-desc",icon:(0,lk.SD)(i.NLJ.TYPE),hideInEditorType:l0.DEV_MODE},{shortcutKey:"set-tool-table",icon:(0,lk.SD)(i.NLJ.TABLE),includeInEditorType:l0.FIGJAM},{shortcutKey:"set-tool-section",includeInEditorType:l0.FIGJAM},{shortcutKey:"set-tool-rectangle",displayName:"set-tool-rectangle-desc",icon:(0,lk.SD)(i.NLJ.SHAPE_RECTANGLE),includeInEditorType:l0.DESIGN},{shortcutKey:"set-tool-shape-whiteboard-square",displayName:"set-tool-rectangle-desc",icon:(0,lk.SD)(i.NLJ.SHAPE_RECTANGLE),includeInEditorType:l0.SLIDES},{shortcutKey:"set-tool-ellipse",displayName:"set-tool-ellipse-desc",icon:(0,lk.SD)(i.NLJ.SHAPE_ELLIPSE),hideInEditorType:l0.DEV_MODE},{shortcutKey:"set-tool-shape-whiteboard-ellipse",displayName:"set-tool-ellipse-desc",icon:(0,lk.SD)(i.NLJ.SHAPE_ELLIPSE),includeInEditorType:l0.SLIDES},{shortcutKey:"set-tool-line",displayName:"set-tool-line-desc",icon:(0,lk.SD)(i.NLJ.SHAPE_LINE),includeInEditorType:[l0.DESIGN,l0.SLIDES]},{shortcutKey:"toggle-publish",includeInEditorType:l0.FIGJAM},{shortcutKey:"place",includeInEditorType:l0.FIGJAM},{shortcutKey:"set-tool-arrow",displayName:"set-tool-arrow-desc",icon:(0,lk.SD)(i.NLJ.SHAPE_ARROW),includeInEditorType:[l0.DESIGN,l0.SLIDES]},{shortcutKey:"set-tool-comments",icon:(0,lk.SD)(i.NLJ.COMMENTS),includeInEditorType:l0.DEV_MODE},{shortcutKey:"set-tool-annotate",icon:(0,lk.SD)(i.NLJ.ANNOTATE),includeInEditorType:l0.DEV_MODE},{shortcutKey:"set-tool-measure",icon:(0,lk.SD)(i.NLJ.MEASURE),includeInEditorType:l0.DEV_MODE}]}],[{shortcuts:[{shortcutKey:"start-chat",includeInEditorType:l0.FIGJAM},{shortcutKey:"stamp-or-reaction-wheel",includeInEditorType:l0.FIGJAM},{shortcutKey:"set-tool-code-block",includeInEditorType:l0.FIGJAM},{shortcutKey:"set-tool-table",icon:(0,lk.SD)(i.NLJ.TABLE),includeInEditorType:l0.SLIDES},{shortcutKey:"set-tool-pen",icon:(0,lk.SD)(i.NLJ.VECTOR_PEN),includeInEditorType:l0.SLIDES},{shortcutKey:"set-tool-pencil",icon:(0,lk.SD)(i.NLJ.VECTOR_PENCIL),includeInEditorType:l0.SLIDES},{shortcutKey:"browse-all-resources-modal",icon:lk.bs("browse-all-resources-modal")?.svg??null,includeInEditorType:l0.SLIDES},{shortcutKey:"set-tool-comments",icon:(0,lk.SD)(i.NLJ.COMMENTS),hideInEditorType:l0.DEV_MODE},{shortcutKey:"toggle-dropper",icon:ob.A,includeInEditorType:l0.DESIGN},{shortcutKey:"set-tool-slice",displayName:"set-tool-slice-desc",icon:(0,lk.SD)(i.NLJ.SLICE),includeInEditorType:l0.DESIGN}]}]]},[oh.Jq.VIEW]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.view"),columns:[[{shortcuts:[{shortcutKey:"toggle-slide-view",displayName:"toggle-slide-view-short-description",includeInEditorType:l0.SLIDES},{shortcutKey:"enter-slides-design-mode",displayName:"enter-slides-design-mode-description",includeInEditorType:l0.SLIDES},{shortcutKey:"enter-slides-mode",displayName:"enter-slides-design-mode-description",includeInEditorType:l0.SLIDES},{shortcutKey:"toggle-animate-info",displayName:"toggle-animate-info-description",includeInEditorType:l0.SLIDES},{shortcutKey:"toggle-ui",hideInEditorType:l0.SLIDES},{shortcutKey:"toggle-multiplayer-cursors",hideInEditorType:l0.SLIDES},{shortcutKey:"enter-design-mode",hideInEditorType:l0.SLIDES},{shortcutKey:"enter-inspect-mode",hideInEditorType:l0.SLIDES}]}],[{shortcuts:[{shortcutKey:"pan",includeInEditorType:l0.FIGJAM},{shortcutKey:"zoom-in",includeInEditorType:l0.FIGJAM},{shortcutKey:"zoom-out",includeInEditorType:l0.FIGJAM},{shortcutKey:"zoom-reset",includeInEditorType:l0.FIGJAM},{shortcutKey:"toggle-rulers",includeInEditorType:l0.DESIGN},{shortcutKey:"toggle-outlines",includeInEditorType:l0.DESIGN},{shortcutKey:"toggle-pixel-preview",includeInEditorType:l0.DESIGN},{shortcutKey:"toggle-shown-layout-grids",includeInEditorType:[l0.DESIGN,l0.SLIDES]},{shortcutKey:"toggle-grid",includeInEditorType:l0.DESIGN},{shortcutKey:"zoom-in",includeInEditorType:l0.SLIDES},{shortcutKey:"zoom-out",includeInEditorType:l0.SLIDES}]}],[{shortcuts:[{shortcutKey:"zoom-to-fit",includeInEditorType:l0.FIGJAM},{shortcutKey:"zoom-to-selection",includeInEditorType:l0.FIGJAM},{shortcutKey:"toggle-layers",includeInEditorType:l0.DESIGN},{shortcutKey:"toggle-publish",displayName:"toggle-publish-desc",includeInEditorType:l0.DESIGN},{shortcutKey:"toggle-library",includeInEditorType:l0.DESIGN},{shortcutKey:"show-design-panel",includeInEditorType:l0.DESIGN},{shortcutKey:"show-prototype-panel",includeInEditorType:l0.DESIGN},{shortcutKey:"zoom-reset",includeInEditorType:l0.SLIDES},{shortcutKey:"zoom-to-selection",includeInEditorType:l0.SLIDES},{shortcutKey:"zoom-to-fit",includeInEditorType:l0.SLIDES}]}]]},[oh.Jq.ZOOM]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.zoom"),includeInEditorType:[l0.DESIGN,l0.DEV_MODE],columns:[[{shortcuts:[{shortcutKey:"pan"},{shortcutKey:"zoom-in"},{shortcutKey:"zoom-out"},{shortcutKey:"zoom-reset"}]}],[{shortcuts:[{shortcutKey:"zoom-to-fit"},{shortcutKey:"zoom-to-selection"},{shortcutKey:"next-artboard"},{shortcutKey:"previous-artboard"}]}],[{shortcuts:[{shortcutKey:"page-previous"},{shortcutKey:"page-next"},{shortcutKey:"previous-artboard-same-zoom"},{shortcutKey:"next-artboard-same-zoom"}]}]]},[oh.Jq.TEXT]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.text"),hideInEditorType:l0.DEV_MODE,columns:[[{shortcuts:[{shortcutKey:"bold-and-italic"},{shortcutKey:"text-toggle-underline"},{shortcutKey:"text-edit-hyperlink",hideInEditorType:l0.SLIDES},{shortcutKey:"text-toggle-strikethrough"},{shortcutKey:"bulleted-and-numbered-list",hideInEditorType:l0.SLIDES}]}],[{shortcuts:[{shortcutKey:"text-align-left",includeInEditorType:l0.DESIGN},{shortcutKey:"text-align-center",includeInEditorType:l0.DESIGN},{shortcutKey:"text-align-right",includeInEditorType:l0.DESIGN},{shortcutKey:"text-align-justified",includeInEditorType:l0.DESIGN},{shortcutKey:"text-style-normal",includeInEditorType:l0.FIGJAM},{shortcutKey:"text-style-h3",includeInEditorType:l0.FIGJAM},{shortcutKey:"text-style-h2",includeInEditorType:l0.FIGJAM},{shortcutKey:"text-style-h1",includeInEditorType:l0.FIGJAM},{shortcutKey:"text-style-title",includeInEditorType:l0.FIGJAM},{shortcutKey:"text-edit-hyperlink",includeInEditorType:l0.SLIDES},{shortcutKey:"bulleted-and-numbered-list",includeInEditorType:l0.SLIDES}]}],[{shortcuts:[{shortcutKey:"text-font-size-adjust",includeInEditorType:[l0.DESIGN,l0.SLIDES]},{shortcutKey:"text-bold-adjust",includeInEditorType:[l0.DESIGN,l0.SLIDES]},{shortcutKey:"text-letter-spacing-adjust",includeInEditorType:l0.DESIGN},{shortcutKey:"text-line-height-adjust",includeInEditorType:l0.DESIGN},{shortcutKey:"text-align-left",includeInEditorType:l0.FIGJAM},{shortcutKey:"text-align-center",includeInEditorType:l0.FIGJAM},{shortcutKey:"text-align-right",includeInEditorType:l0.FIGJAM},{shortcutKey:"text-indent-and-dedent-list",includeInEditorType:l0.FIGJAM}]}]]},[oh.Jq.SHAPE]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.shape"),includeInEditorType:l0.DESIGN,columns:[[{shortcuts:[{shortcutKey:"set-tool-pen",icon:(0,lk.SD)(i.NLJ.VECTOR_PEN)},{shortcutKey:"set-tool-pencil",icon:(0,lk.SD)(i.NLJ.VECTOR_PENCIL)}]},{caption:"while-editing-shape",shortcuts:[{shortcutKey:"set-tool-paint-bucket",icon:(0,lk.SD)(i.NLJ.VECTOR_PAINT_BUCKET)},{shortcutKey:"bend-tool",icon:(0,lk.SD)(i.NLJ.VECTOR_BEND)}]}],[{shortcuts:[{shortcutKey:"remove-fill"},{shortcutKey:"remove-stroke"},{shortcutKey:"swap-fill-and-stroke"},{shortcutKey:"outline-stroke"},{shortcutKey:"flatten-selection"}]}],[{caption:"after-selecting-points",shortcuts:[{shortcutKey:"join-selection"},{shortcutKey:"smooth-join-selection"},{shortcutKey:"delete-and-heal-selection"}]}]]},[oh.Jq.SELECT]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.selection"),includeInEditorType:[l0.DESIGN,l0.SLIDES],columns:[[{shortcuts:[{shortcutKey:"select-all"},{shortcutKey:"select-inverse",includeInEditorType:l0.DESIGN},{shortcutKey:"deselect-all"},{shortcutKey:"deep-select"}]}],[{shortcuts:[{shortcutKey:"select-child"},{shortcutKey:"select-parent"},{shortcutKey:"select-next-sibling"},{shortcutKey:"select-previous-sibling",includeInEditorType:l0.DESIGN},{shortcutKey:"select-matching",includeInEditorType:l0.DESIGN}]}],[{shortcuts:[{shortcutKey:"group-selection"},{shortcutKey:"ungroup-selection"},{shortcutKey:"frame-selection"},{shortcutKey:"toggle-shown-for-selected-nodes",includeInEditorType:l0.DESIGN},{shortcutKey:"toggle-locked-for-selected-nodes",includeInEditorType:l0.DESIGN}]}]]},[oh.Jq.CURSOR]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.cursor"),includeInEditorType:l0.DESIGN,columns:[[{caption:"while-pointing",shortcuts:[{shortcutKey:"measure-to-selection"}]},{caption:"while-moving",shortcuts:[{shortcutKey:"duplicate"}]}],[{caption:"while-clicking",shortcuts:[{shortcutKey:"deep-select"}]},{caption:"while-dragging-to-select",shortcuts:[{shortcutKey:"deep-select-rectangle"}]}],[{caption:"while-resizing",shortcuts:[{shortcutKey:"center-resize-drag"},{shortcutKey:"resize-proportionally"},{shortcutKey:"ignore-constraints",displayName:"ignore-constraints-desc"}]}]]},[oh.Jq.COPY]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.copy"),includeInEditorType:l0.DEV_MODE,columns:[[],[{shortcuts:[{shortcutKey:"copy",includeInEditorType:l0.DEV_MODE},{shortcutKey:"copy-as-png",includeInEditorType:l0.DEV_MODE}]}],[]]},[oh.Jq.EDIT]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.edit"),hideInEditorType:l0.DEV_MODE,columns:[[{shortcuts:[{shortcutKey:"copy"},{shortcutKey:"cut"},{shortcutKey:"paste"},{shortcutKey:"paste-to-replace",includeInEditorType:[l0.DESIGN,l0.SLIDES]},{shortcutKey:"paste-over-selection"},{shortcutKey:"export-selection-or-current-page",displayName:"export-selection-or-current-page-desc",includeInEditorType:l0.FIGJAM}]}],[{shortcuts:[{shortcutKey:"bring-forward",includeInEditorType:l0.FIGJAM},{shortcutKey:"send-backward",includeInEditorType:l0.FIGJAM},{shortcutKey:"bring-to-front",includeInEditorType:l0.FIGJAM},{shortcutKey:"send-to-back",includeInEditorType:l0.FIGJAM},{shortcutKey:"group-selection",includeInEditorType:l0.FIGJAM},{shortcutKey:"undo",includeInEditorType:l0.SLIDES},{shortcutKey:"redo",includeInEditorType:l0.SLIDES},{shortcutKey:"duplicate",includeInEditorType:l0.SLIDES},{shortcutKey:"duplicate-in-place",includeInEditorType:[l0.DESIGN,l0.SLIDES]},{shortcutKey:"rename-selection",includeInEditorType:l0.DESIGN},{shortcutKey:"export-selected-exportables",displayName:"export-selected-exportables-desc",includeInEditorType:l0.DESIGN},{shortcutKey:"canvas-search",includeInEditorType:l0.DESIGN}]}],[{shortcuts:[{shortcutKey:"toggle-locked-for-selected-nodes",includeInEditorType:l0.FIGJAM},{shortcutKey:"canvas-search",includeInEditorType:[l0.FIGJAM,l0.SLIDES]},{shortcutKey:"undo",includeInEditorType:l0.FIGJAM},{shortcutKey:"redo",includeInEditorType:l0.FIGJAM},{shortcutKey:"copy-as-png",includeInEditorType:l0.DESIGN},{shortcutKey:"copy-properties",includeInEditorType:[l0.DESIGN,l0.SLIDES]},{shortcutKey:"paste-properties",includeInEditorType:[l0.DESIGN,l0.SLIDES]}]}]]},[oh.Jq.TRANSFORM]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.transform"),includeInEditorType:l0.DESIGN,columns:[[{shortcuts:[{shortcutKey:"flip-horizontal"},{shortcutKey:"flip-vertical"},{shortcutKey:"mask-selection"}]}],[{shortcuts:[{shortcutKey:"request-edit-mode",displayName:"edit-shape-or-image"},{shortcutKey:"place"}]}],[{shortcuts:[{shortcutKey:"set-opacity-00"},{shortcutKey:"set-opacity-1"},{shortcutKey:"set-opacity-5"},{shortcutKey:"set-opacity-0"}]}]]},[oh.Jq.ARRANGE]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.arrange"),includeInEditorType:[l0.DESIGN,l0.SLIDES],columns:[[{shortcuts:[{shortcutKey:"bring-forward"},{shortcutKey:"send-backward"},{shortcutKey:"bring-to-front"},{shortcutKey:"send-to-back"}]}],[{shortcuts:[{shortcutKey:"align-left-right"},{shortcutKey:"align-top-bottom"},{shortcutKey:"align-centers"},{shortcutKey:"distribute-spacing",includeInEditorType:l0.DESIGN},{shortcutKey:"tidy-up",includeInEditorType:l0.DESIGN}]}],[{shortcuts:[{shortcutKey:"stack-selection",includeInEditorType:l0.DESIGN},{shortcutKey:"unstack-selection",includeInEditorType:l0.DESIGN},{shortcutKey:"run-multi-stack-auto-layout",featureFlags:["auto_auto_layout"],includeInEditorType:l0.DESIGN},{shortcutKey:"distribute-spacing",includeInEditorType:l0.SLIDES},{shortcutKey:"tidy-up",includeInEditorType:l0.SLIDES}]}]]},[oh.Jq.COMPONENTS]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.components"),includeInEditorType:l0.DESIGN,columns:[[{shortcuts:[{shortcutKey:"toggle-publish",displayName:"toggle-publish-desc"},{shortcutKey:"toggle-library"},{shortcutKey:"create-symbol"},{shortcutKey:"detach-instance"}]}],[{shortcuts:[{shortcutKey:"component-insert",displayName:this.componentInsertDisplayName()}]},{caption:"while-inserting-a-component",shortcuts:[{shortcutKey:"swap-instance"}]}]]},[oh.Jq.ACCESSIBILITY]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.accessibility"),includeInEditorType:l0.FIGJAM,columns:[[{shortcuts:[{shortcutKey:"select-next-node"},{shortcutKey:"select-previous-node"},{shortcutKey:"select-parent"},{shortcutKey:"select-child"}]}],[{shortcuts:[{shortcutKey:lS.dz},{shortcutKey:lS.Jt}]}]]},[oh.Jq.ADVANCED]:{displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.advanced"),includeInEditorType:l0.FIGJAM,columns:[[{caption:"while-editing-shape-or-sticky",shortcuts:[{shortcutKey:"quick-create-immutable-frame"}]},{caption:"while-text-shape-or-sticky-selected",shortcuts:[{shortcutKey:"edit-text"}]}],[{caption:"while-stamping",shortcuts:[{shortcutKey:"stamp-on-node"}]}],[{shortcuts:[{shortcutKey:"align-left-right"},{shortcutKey:"align-top-bottom"},{shortcutKey:"align-centers"},{shortcutKey:"tidy-up"},{shortcutKey:"straight-connector"}]}]]}},this.state={activeTab:this.props.initActiveTab??this.getDefaultActiveTab(this.props.editorType),completedTabs:this.getCompletedTabs(this.props.usedKeyboardShortcuts),allTabsCompleted:this.allTabsCompleted(this.getCompletedTabs(this.props.usedKeyboardShortcuts)),tabCompletedAnimation:!1,tabCompletedFirstTimeAnimation:!1,allTabsCompletedAnimation:!1},this.onNavClick=e=>{this.setState({activeTab:e,completedTabs:this.state.completedTabs,allTabsCompleted:this.state.allTabsCompleted,tabCompletedFirstTimeAnimation:!1,tabCompletedAnimation:!1,allTabsCompletedAnimation:this.state.allTabsCompletedAnimation})},this.getTabs=()=>{let e=[],t=this.props.editorType===j.nT.Design?lJ.CJ:"";for(let n in this.shortcutList)oT(this.props.editorType,this.shortcutList[n].includeInEditorType,this.shortcutList[n].hideInEditorType)&&oS(this.shortcutList[n].featureFlags)&&e.push({displayName:this.shortcutList[n].displayName,id:n,active:this.state.activeTab==n,className:tL()(lJ.Mf,t)});if(this.props.editorType===j.nT.Design){let n={id:"spacer",className:tL()(lJ.Mf,t)};e.push(n)}return e.push({displayName:(0,_.tx)("whiteboard.keyboard_shortcuts.tab.layout"),id:"layout",active:"layout"===this.state.activeTab,className:tL()(lJ.Mf,t)}),this.props.isCKSLabEnabled&&e.push({displayName:(0,_.tx)("keyboard_settings.custom_tab"),id:"custom",active:"custom"===this.state.activeTab,className:tL()(lJ.Mf,t)}),e},this.replayAllTabsCompletedAnimation=()=>{this.state.allTabsCompletedAnimation?this.stopAllTabsCompletedAnimation():this.playAllTabsCompletedAnimation(this.state.completedTabs)},this.onClose=()=>{this.props.dispatch(lT.FU({tab:null})),w.Y5.triggerAction("toggle-keyboard-shortcuts")},this.onTablistKeyDown=e=>{if("ArrowLeft"===e.key&&0===(0,iz.sN)(e)){let t=this.tabRefs.current?.findIndex(e=>!!e&&e.id===this.state.activeTab);if(!this.tabRefs.current||null==t)return;let n=t-1;for(;!this.tabRefs.current[n]&&n>0;)n--;0===t&&(n=this.tabRefs.current.length-1),this.tabRefs.current[n].focus(),this.onNavClick(this.tabRefs.current[n].id),e.preventDefault()}else if("ArrowRight"===e.key&&0===(0,iz.sN)(e)){let t=this.tabRefs.current?.findIndex(e=>!!e&&e.id===this.state.activeTab);if(!this.tabRefs.current||null==t)return;let n=t+1;for(;!this.tabRefs.current[n]&&n<this.tabRefs.current.length-1;)n++;t===this.tabRefs.current.length-1&&(n=0),this.tabRefs.current[n].focus(),this.onNavClick(this.tabRefs.current[n].id),e.preventDefault()}else if("Home"===e.key)this.tabRefs.current&&this.onNavClick(this.tabRefs.current[0].id),e.preventDefault();else if("End"===e.key)this.tabRefs.current&&this.onNavClick(this.tabRefs.current[this.tabRefs.current.length-1].id),e.preventDefault();else if("Tab"===e.key&&0===(0,iz.sN)(e))this.tabPanelRef.current?.focus(),e.preventDefault();else if("Escape"===e.key){if(this.tabListRef.current?.blur(),this.tabRefs.current){let e=this.tabRefs.current.findIndex(e=>!!e&&e.id===this.state.activeTab);this.tabRefs.current[e].blur()}e.preventDefault()}else"Enter"===e.key?e.preventDefault():(0,lx.f7)(e)},this.tabRefs=a.createRef(),this.tabListRef=a.createRef(),this.tabPanelRef=a.createRef()}componentInsertDisplayName(){return this.props.isUI3?"component-insert-display-name-ui3":"component-insert-display-name"}componentDidMount(){this.tabListRef.current?.focus()}getDefaultActiveTab(e){return e===j.nT.Design||e===j.nT.Slides?"essential":e===j.nT.DevHandoff?"view":"tools"}getCompletedTabs(e,t){let n=t??this.props.editorType,a={};for(let t in this.shortcutList){let r=!0;for(let a of this.shortcutList[t].columns)for(let t of a)if(oT(n,t.includeInEditorType,t.hideInEditorType)){for(let a of t.shortcuts)if(oT(n,a.includeInEditorType,a.hideInEditorType)&&l3.keybindingsForShortcut(a.shortcutKey,this.props.useNumbersForOpacity,this.props.appModelKeyboardShortcuts)&&!(l3.shortcutUsedCount(a.shortcutKey,e)>0)){r=!1;break}}a[t]=r}return a}findChangedKey(e,t,n){for(let a of this.shortcutList[e].columns)for(let e of a)for(let a of e.shortcuts)if(l3.keybindingsForShortcut(a.shortcutKey,this.props.useNumbersForOpacity,this.props.appModelKeyboardShortcuts)){let e=l3.shortcutUsedCount(a.shortcutKey,t);if(l3.shortcutUsedCount(a.shortcutKey,n)>e)return a.shortcutKey}return null}allTabsCompleted(e){let t=!0;for(var n in e)if(!e[n]){t=!1;break}return t}playAllTabsCompletedAnimation(e){this.setState({completedTabs:e,allTabsCompleted:!0,tabCompletedFirstTimeAnimation:!1,tabCompletedAnimation:!1,allTabsCompletedAnimation:!0})}stopAllTabsCompletedAnimation(){this.setState({allTabsCompletedAnimation:!1})}playCompletedTabFirstTimeAnimation(e,t){setTimeout(()=>this.setState({completedTabs:t,tabCompletedFirstTimeAnimation:!0,tabCompletedAnimationKeyPosition:this.keyShortcutPositionsInTab[e],tabCompletedAnimation:!0}),1500),setTimeout(()=>this.setState({tabCompletedFirstTimeAnimation:!1,tabCompletedAnimation:!1}),6e3)}UNSAFE_componentWillReceiveProps(e){let t=this.state.activeTab,n=t;t&&this.props.editorType!==e.editorType&&!oT(e.editorType,this.shortcutList?.[t]?.includeInEditorType,this.shortcutList?.[t]?.hideInEditorType)&&(n=this.getDefaultActiveTab(e.editorType));let a=this.getCompletedTabs(this.props.usedKeyboardShortcuts),r=this.getCompletedTabs(e.usedKeyboardShortcuts);if(this.allTabsCompleted(r)&&!this.allTabsCompleted(a))this.playAllTabsCompletedAnimation(r);else{let t=this.state.activeTab in oh.Jq?this.findChangedKey(this.state.activeTab,this.props.usedKeyboardShortcuts,e.usedKeyboardShortcuts):null;t&&r[this.state.activeTab]&&!a[this.state.activeTab]&&this.playCompletedTabFirstTimeAnimation(t,r)}this.setState({completedTabs:r,allTabsCompleted:this.allTabsCompleted(r),activeTab:n})}renderTabContents(){let e;let t={usedKeyboardShortcuts:this.props.usedKeyboardShortcuts,appModelKeyboardShortcuts:this.props.appModelKeyboardShortcuts};this.keyShortcutPositionsInTab={};let n=0,r=e=>(n++,this.keyShortcutPositionsInTab[e.shortcutKey]=n,oT(this.props.editorType,e.includeInEditorType,e.hideInEditorType)&&oS(e.featureFlags))?a.createElement(l3,{shortcutKey:e.shortcutKey,key:`shortcut-${this.state.activeTab}-${n}`,icon:e.icon,displayName:e.displayName,editorType:this.props.editorType,usage:e.usage,keyPosition:n,tabCompletedFirstTimeAnimation:this.state.tabCompletedFirstTimeAnimation,tabCompletedAnimation:this.state.tabCompletedAnimation,tabCompletedAnimationKeyPosition:this.state.tabCompletedAnimationKeyPosition,allTabsCompletedAnimation:this.state.allTabsCompletedAnimation,useNumbersForOpacity:this.props.useNumbersForOpacity,...t}):null,i=this.shortcutList[this.state.activeTab]?this.shortcutList[this.state.activeTab].columns.map((e,n)=>a.createElement(oC,{...t,key:`column-${n}`},e.map((e,i)=>oT(this.props.editorType,e.includeInEditorType,e.hideInEditorType)?a.createElement(ow,{caption:e.caption,key:`category-${n}-${i}`,...t},e.shortcuts.map(r)):null))):[];e=this.state.tabCompletedFirstTimeAnimation?lJ.iV:this.state.completedTabs[this.state.activeTab]?lJ.xd:lJ.Y0,"layout"===this.state.activeTab&&(e=lJ.Y0);let l="essential"===this.state.activeTab?a.createElement(a.Fragment,null,a.createElement("div",{className:lJ.pG},(0,_.tx)("whiteboard.keyboard_shortcuts.essential_keyboard_shortcuts")),a.createElement("div",{className:lJ.Bz},i)):"layout"===this.state.activeTab?a.createElement("div",{className:lJ.PG},a.createElement(of,null)):"custom"===this.state.activeTab&&this.props.isCKSLabEnabled?a.createElement(l4,null):a.createElement("div",{className:lJ.PG},i);return a.createElement("div",{role:"tabpanel",ref:this.tabPanelRef,id:oh.xC,"aria-labelledby":this.state.activeTab,className:e,tabIndex:0,"data-fullscreen-intercept":!0},l)}render(){let e=this.getTabs(),t=this.props.editorType===j.nT.Design?lJ.CJ:"",n=lJ.C$;for(let a=0;a<e.length;a++){let r=e[a];if((0,oh.$w)(r)&&r.active){e[a].className=this.state.tabCompletedFirstTimeAnimation?tL()(lJ.Ug,t):tL()(lJ.yR,t),a>0?e[a-1].className=tL()(lJ.gK,t):n=lJ.JA,a<e.length-1?e[a+1].className=tL()(lJ.hM,t):n=lJ.NZ;break}}return a.createElement("div",{className:lJ.Ku,"data-fullscreen-intercept":!0},a.createElement("div",{role:"tablist",ref:this.tabListRef,"aria-label":(0,_.t)("keyboard_settings.keyboard_shortcuts"),className:n,onKeyDown:this.onTablistKeyDown,tabIndex:0},a.createElement(oh.Qz,{tabInfo:e,completedTabs:this.state.completedTabs,onNavClick:this.onNavClick,recordingKey:this.props.recordingKey,ref:this.tabRefs}),a.createElement("button",{className:lJ.Nk,onClick:this.onClose,"aria-label":(0,_.t)("general.close"),"data-fullscreen-intercept":!0},a.createElement(nd.B,{svg:ov.default})),this.state.allTabsCompleted&&a.createElement("div",{className:this.state.allTabsCompletedAnimation?lJ.Yk:lJ.C_,onClick:this.replayAllTabsCompletedAnimation},a.createElement(nd.B,{svg:this.state.allTabsCompletedAnimation?oE.A:oy.A}))),this.renderTabContents())}}function ok(e){let t=(0,tz.GS)(),n=(0,r.d4)(e=>Object.keys(e.library.subscriptions.forCurrentOrg).length>0),l=(0,lN.o3)(lN.nt.customKeyboardShortcuts),o=(0,r.d4)(e=>e.usedKeyboardShortcuts),s=(0,r.d4)(e=>e.keyboardShortcutPanel.tab),c=(0,r.d4)(e=>e.mirror.appModel.keyboardShortcuts),d=(0,r.d4)(e=>"fullscreen"===e.selectedView.view?e.selectedView.editorType:j.nT.Design),u=(0,P.ut)(i.Ez5?.slidesToolMode(),i.EMA.DESIGN),m=d===j.nT.Slides&&u===i.EMA.DESIGN?j.nT.Design:d,p=(0,P.J2)(i.Ez5.editorState().useNumbersForOpacity),_=(0,r.wA)();return a.createElement(ox,{recordingKey:e.recordingKey,usedKeyboardShortcuts:o,initActiveTab:s,appModelKeyboardShortcuts:c,editorType:m,hasSubscribedLibraries:n&&d!==j.nT.Slides,useNumbersForOpacity:p,dispatch:_,isCKSLabEnabled:l,isUI3:t})}ox.displayName="KeyboardShortcutPanel";var oN=n(666258),oI=n(396021),oA=n(450503);function oO(){let e=(0,i5.Xr)(oN.mH),t=(0,oI.XC)((0,B.md)(oN.a8));return(0,o.kc)().cursor_bot&&t?a.createElement("div",{className:oA.CR,"data-testid":"cursor-bot-fullscreen-event-blocker",onClick:()=>{e(!0)}}):null}var oL=n(624875),oD=n(344780),oR=n(358145),oM=n(316082),oP=n(168039),oF=n(479118);function oB({background:e,showSpinner:t}){let n=a.useContext(t0.kw),{x:r,y:i,width:l}=n.getViewportInfo(),o={background:e},s=window.innerWidth-l;return n&&(o={...o,width:`calc(100vw - ${s}px)`,height:`calc(100vh - ${i}px)`,top:`${i}px`,left:`${r}px`}),a.createElement("div",{className:"loading_overlay--pageSyncing--9AqbU"},a.createElement("div",{className:tL()("loading_overlay--blurredOverlay--79bya",C.Dm),style:o}),t&&a.createElement(ll.dW,{className:"loading_overlay--pageSyncingSpinner--rjAvP"}))}function oU(){let e=(0,rs.U)(),t=(0,r.d4)(e=>e.selectedView),n=r.d4(e=>e.versionHistory)?.isLoadingPage,l=(0,oP.DP)(),{isLoading:s}=(0,oF.v9)({selectedView:t,isLoadingVersionHistory:n,theme:l}),c=(0,r.d4)(e=>e.mirror.appModel.multiplayerSessionState),d=(0,oM.y)(),u=(0,r.wA)(),[m,p]=a.useState(null),_=(0,oR.ZC)(s);return a.useEffect(()=>{if((0,o.kc)().long_page_change_notif){if(i.h3O.isIncrementalSession()&&s)s!==_&&d&&c!==i.kul.JOINED&&(p(Date.now()),u(g.F.enqueue({message:"Page change may take longer during staging deploy",error:!1,delay:3e3,type:"long-page-change",timeoutOverride:1/0})));else{let e=m?Date.now()-m:0;e<3e3||e>9e3?(u(g.F.dequeue({matchType:"long-page-change"})),p(null)):setTimeout(()=>{u(g.F.dequeue({matchType:"long-page-change"})),p(null)},Math.max(0,9e3-e))}}},[s,c,d,u,m,_]),a.createElement(oG,{onPageLoadingFinish:t=>{e("page_loading_overlay",{timeElapsedMs:t})},selectedView:t,isLoadingVersionHistory:n,theme:l})}function oG({onPageLoadingFinish:e,selectedView:t,isLoadingVersionHistory:n,theme:r}){let{isLoading:i,isLoadingMissingFonts:l,background:o}=(0,oF.v9)({selectedView:t,isLoadingVersionHistory:n,theme:r});return((0,a.useEffect)(()=>{if(!i){let t=oD.sn.tryStop("page_loading_overlay");t&&e&&e(t)}},[i,e]),i)?(oD.sn.get("page_loading_overlay")||oD.sn.start("page_loading_overlay"),a.createElement(oB,{background:o,showSpinner:!l})):null}var oK=n(634832),oV=n(743282),oH=n(1688),oz=n(25397),oW=n(730371),oj=n(179479),o$=n(30637),oq=n(47506),oY=n(728325),oX=n(829632),oJ=n(516703),oZ=n(978527),oQ=n(824767),o0=n(176857),o1=n(99888),o2=n(213690),o5=n(199819),o3=n(236373),o4=n(860809),o6=n(901304),o8=n(193990),o7=n(125906),o9=n(816679),se=n(575126),st=n(961803),sn=n(377849);let sa=e=>(0,lG.Zj)(e)&&!e.hideCheckForQuickCommand;class sr extends aw.o6{constructor(e){super(e),this.searchInputRef=a.createRef(),this.scrollContainerRef=a.createRef(),this.listboxId=(0,oV.g)(),this.resultPrefix=(0,oV.g)(),this.delayedCloseTimerID=0,this.updateQueryAndResults=e=>{let t;if(e){let n=this.searchIndex.search(this.props.appModel,e.trim());t=this.sortedByEnabledSearchResults(n)}else t=this.recentlyUsedItemsMenu();this.logSearchResults(e,t),this.setState({searchQuery:e,searchResults:t,activeItemIndex:0,mouseMoved:!1})},this.logSearchResults=(e,t)=>{this.props.quickActionsSessionId&&this.props.fireQueryResultTrackingEvent({quickActionsSessionId:this.props.quickActionsSessionId,quickActionsQueryId:this.props.latestQuerySessionIdRef.current,searchQuery:e,numSearchResults:this.state.searchResults.length,currentSelection:this.props.currentSelection,module:H.Jc.ALL,moduleFilters:null,qaVersion:o1.U3,searchQueryResults:(0,o2.X)(t)})},this.cancelDelayedClose=()=>{0!==this.delayedCloseTimerID&&(clearTimeout(this.delayedCloseTimerID),this.delayedCloseTimerID=0)},this.onClick=aw.cZ(this,"click",e=>{e?.button!==0||this.state.searchResults.length>0||this.setState({searchResults:this.searchIndex.list(this.props.appModel)})}),this.onKeyDown=aw.C0(this,"keydown",e=>{let t=e=>{if(this.state.searchResults.length>0){let t=this.state.activeItemIndex+e,n=t<0?this.state.searchResults.length-1:t%this.state.searchResults.length,a=1!==this.state.searchResults.length||!this.state.displayAriaActiveDescendant;this.setState({activeItemIndex:n,displayAriaActiveDescendant:a}),this.scrollContainerRef.current.scrollElementAtIndexIntoView(n)}},n=(0,iz.vN)(e,iz.xH.CONTROL),a=m.Ay.mac?(0,iz.vN)(e,iz.xH.META):n,r=m.Ay.mac&&n;switch(e.keyCode){case iz.Uz.ENTER:{e.preventDefault();let t=this.state.searchResults[this.state.activeItemIndex];t&&n1.l7.user(`quick-actions-select-${t.name??t.action??"unknown"}`,()=>{this.onSelectItem(t)});break}case iz.Uz.ESCAPE:e.preventDefault(),this.cancelDelayedClose(),this.props.dispatch(em.oB());break;case iz.Uz.N:case iz.Uz.DOWN_ARROW:if(e.keyCode===iz.Uz.N&&!r){(0,lx.jr)(e,lx.W0.NO);break}e.preventDefault(),this.cancelDelayedClose(),t(1);break;case iz.Uz.P:case iz.Uz.UP_ARROW:if(e.keyCode===iz.Uz.P&&!r){(0,lx.jr)(e,lx.W0.NO);break}e.preventDefault(),this.cancelDelayedClose(),t(-1);break;case iz.Uz.TAB:{e.preventDefault();let t=this.state.searchResults[this.state.activeItemIndex];t&&t.itemParameterArgs&&(this.onStartParameterMode(t.itemParameterArgs,t,"tab"),this.logActionSelectedEvent(t));break}case iz.Uz.R:case iz.Uz.S:case iz.Uz.D:case iz.Uz.E:case iz.Uz.F:case iz.Uz.O:if(a){e.preventDefault();let t=this.state.searchQuery+e.key;this.updateQueryAndResults(t)}break;default:"Meta"!==e.key&&"Ctrl"!==e.key&&this.cancelDelayedClose(),(0,lx.jr)(e,lx.W0.NO)}}),this.onSearchChange=aw.Z7(this,"change",e=>{let t=e.currentTarget.value;this.updateQueryAndResults(t)}),this.onSelectItem=(e,t)=>{if(e.disabled)this.cancelDelayedClose();else{let n=!1;if(e.itemParameterArgs){if(e.runPluginArgs&&!this.state.searchQuery)oX.R.instance.enqueue({mode:"run-forever",runPluginArgs:e.runPluginArgs}),n=!0;else if(e.parametersRequired){this.onStartParameterMode(e.itemParameterArgs,e,t?.type==="click"?"click":"enter"),this.logActionSelectedEvent(e);return}}if(e.callback&&!n&&(e.callback((0,lG.Dz)(e),e.args,this.props.dispatch),n=!0),e.action&&(oY.VU.get(e.action,"quick-actions",e.args)(t),n=!0),n&&this.addToRecentlyUsedCommands(e,e.runPluginArgs),this.logActionSelectedEvent(e),"toggle-publish"===e.action&&(0,oq.YQ)({id:"insert-component-onboarding-event"}),sa(e)&&!(0,o$.PN)()){this.cancelDelayedClose(),this.delayedCloseTimerID=setTimeout(()=>{this.props.dispatch(em.oB())},300);return}this.props.dispatch(em.oB())}},this.renderResult=(e,t)=>{let n=t===this.state.activeItemIndex;return a.createElement(so,{role:"option",id:this.getResultId(t),key:e.action||t,recordingKey:aw.Pt(this.props,e.action||"searchResult"),active:n,disabled:!!e.disabled,appModel:this.props.appModel,item:e,isLastItem:t===this.state.searchResults.length-1,actionIcon:this.getActionIcon(e),onClick:t=>this.onSelectItem(e,t),onMouseMove:()=>{this.state.mouseMoved||this.setState({mouseMoved:!0,activeItemIndex:t})},onMouseEnter:()=>{this.state.mouseMoved&&this.setState({activeItemIndex:t})},allSavedPlugins:this.props.pluginAndWidgetMenuArgs.allSavedPlugins,publishedPlugins:this.props.pluginAndWidgetMenuArgs.publishedPlugins,searchQuery:this.state.searchQuery})},this.searchIndex=this.createSearchIndex(),this.state={searchQuery:"",searchResults:this.recentlyUsedItemsMenu(),activeItemIndex:0,displayAriaActiveDescendant:!0,mouseMoved:!1}}componentDidUpdate(e,t){super.componentDidUpdate(e,t),(0,oW.deepEquals)(this.props.pluginAndWidgetMenuArgs,e.pluginAndWidgetMenuArgs)||(this.searchIndex=this.createSearchIndex())}createSearchIndex(){let e=(0,lK.M)({extensionMenuProps:this.props.pluginAndWidgetMenuArgs,isReadOnly:this.props.appModel.isReadOnly,includeDisabled:!0});return new lj.x(this.props.appModel,this.props.selectedView,[...this.props.fullscreenMenuItems,...e],{includeDisabled:!0,acceptsUnicode:(0,o0.LN)()})}componentDidMount(){super.componentDidMount(),this.searchInputRef.current.focus()}logActionSelectedEvent(e){let{createMetrics:t}=this.props.interactionMetrics;(0,o6.kp)({item:e,searchQuery:this.state.searchQuery,qaVersion:o1.U3,numSearchResults:this.state.searchResults.length,searchPosition:this.state.activeItemIndex,moduleFilters:null,...t()})}recentlyUsedItemsMenu(){return(0,rv.removeNullish)(this.props.recentlyUsedQuickCommands.map(e=>{let t=this.searchIndex.getItem(this.props.appModel,e.displayName);return t&&e.runPluginArgs&&(t.runPluginArgs=e.runPluginArgs),t}))}sortedByEnabledSearchResults(e){let t=e.filter(e=>!e.disabled),n=e.filter(e=>e.disabled);return t.concat(n)}addToRecentlyUsedCommands(e,t){let n=(0,lU.EG)(e),a=this.props.recentlyUsedQuickCommands.filter(e=>e.displayName!==n&&!!this.searchIndex.getItem(this.props.appModel,e.displayName));a.length>=3&&a.pop(),a.unshift({displayName:n,runPluginArgs:t}),this.props.dispatch(ep.PQ(a)),this.props.updateFrecencyHistory(e,this.state.searchQuery),(0,o.kc)().qa_frecency_recents_sync&&(0,o3.s)({recentlyUsedQuickCommandsDB:this.props.recentlyUsedQuickCommands,displayText:n,runPluginArgs:t})}getActionIcon(e){if("plugins-menu-item"===e.name){let t;return(e.pluginId&&(t=(0,r0.DM)({idToSearch:e.pluginId,localExtensionsByFileId:void 0,publishedExtensions:{...this.props.pluginAndWidgetMenuArgs.publishedPlugins,...this.props.pluginAndWidgetMenuArgs.publishedWidgets}})),t&&!(0,r4.ZQ)(t))?a.createElement(oZ.V,{className:o7.ZR,plugin:t,role:"presentation"}):a.createElement(nd.B,{className:o7.pB,svg:st.A,ariaLabel:`${e.name} icon`})}if(e.iconType&&"external_link"===e.iconType)return a.createElement(nd.B,{svg:se.A})}onStartParameterMode(e,t,n){this.addToRecentlyUsedCommands(t),this.props.onStartParameterEntry(e,t,n)}getResultId(e){return this.resultPrefix+"-"+e}renderResults(){let e=this.state.searchResults;if(this.state.searchQuery){if(0===this.state.searchResults.length)return a.createElement("div",{className:o7.Tk},(0,_.tx)("fullscreen_actions.no_matches"))}else if(0===this.state.searchResults.length)return null;return a.createElement(o8.h,{id:this.listboxId,ref:this.scrollContainerRef,resultCount:e.length,role:"listbox"},e.map(this.renderResult))}render(){let e=this.state.searchQuery||this.state.searchResults.length;return a.createElement(o8.H,{recordingKey:this.props.recordingKey||"",onKeyDown:this.onKeyDown,"data-testid":"quick-actions"},a.createElement("div",{className:o7.$P},a.createElement(nd.B,{svg:sn.A,className:o7.qc}),a.createElement("input",{ref:this.searchInputRef,className:o7.Rt,placeholder:(0,rF.A)("quick-actions-modal-placeholder"),onChange:this.onSearchChange,onClick:this.onClick,value:this.state.searchQuery,maxLength:150,spellCheck:!1,dir:"auto",role:"combobox","aria-autocomplete":"list","aria-owns":this.listboxId,"aria-controls":this.listboxId,"aria-expanded":e?"true":"false","aria-activedescendant":e&&(this.state.displayAriaActiveDescendant||this.state.searchResults.length>1)?this.getResultId(this.state.activeItemIndex):void 0})),this.renderResults())}}sr.displayName="QuickActions";let si=(0,r.Ng)(function(e,t){return{pluginAndWidgetMenuArgs:t.pluginAndWidgetMenuArgs,fullscreenMenuItems:t.fullscreenMenuItems,interactionMetrics:t.interactionMetrics,fireQueryResultTrackingEvent:t.fireQueryResultTrackingEvent,currentSelection:t.currentSelection,updateFrecencyHistory:t.updateFrecencyHistory,appModel:e.mirror.appModel,selectedView:e.selectedView,recentlyUsedQuickCommands:t.recentlyUsedQuickCommands,onStartParameterEntry:t.onStartParameterEntry,locale:e.user?.locale,quickActionsSessionId:t.quickActionsSessionId,latestQuerySessionIdRef:t.latestQuerySessionIdRef}},function(e){return{dispatch:e}})(sr);function sl(e){let t=(0,lH.c)(),n=(0,lV.u)(),i=(0,o6.Sk)(),{addFrecencyUsage:l}=(0,oQ.fJ)(),s=(0,r.d4)(oJ.l),c=(0,nL.Ev)(),d=(0,B.md)(z.dd),u=(0,B.md)(z.Rt),m=(0,oj.F)(u),p=(0,oH.W)(),_=(0,r.d4)(e=>e.recentlyUsedQuickCommands),g=(0,o.kc)().qa_recently_used_db_read?p:_;return a.createElement(si,{...e,pluginAndWidgetMenuArgs:t,fullscreenMenuItems:n,interactionMetrics:i,updateFrecencyHistory:l,fireQueryResultTrackingEvent:c,currentSelection:s,quickActionsSessionId:d,latestQuerySessionIdRef:m,recentlyUsedQuickCommands:g})}function so(e){let t=(0,P.J2)((0,tj.UK)().showQuickCommandRankDebug);return a.createElement(ss,{...e,showQuickCommandRankDebug:t})}class ss extends aw.o6{constructor(e){super(e),this.onClick=aw.cZ(this,"click",e=>{if(!this.props.onClick)return aw.aH;this.props.onClick(e)}),this.getDisplayText=()=>{let e=this.props.item;if(e.itemParameterArgs&&e.runPluginArgs&&!this.props.searchQuery)return a.createElement(o4._,{runPluginArgs:e.runPluginArgs,itemParameterArgs:e.itemParameterArgs});if(e.itemPath){let t=e.itemPath;return a.createElement(o4.h,{itemPath:t})}let t=(0,lU.EG)(e);return this.props.showQuickCommandRankDebug&&void 0!==e.stringMatchScore&&void 0!==e.popularityScore&&(t=`M${e.stringMatchScore} P${e.popularityScore}: `+t),a.createElement("div",{className:o7.D6},t)},sa(this.props.item)?this.state={itemIsChecked:(0,lG.WJ)(this.props.appModel,this.props.item)}:this.state={}}componentDidUpdate(e,t){super.componentDidUpdate(e,t),null!=this.state.itemIsChecked&&this.setState({itemIsChecked:(0,lG.WJ)(this.props.appModel,this.props.item)})}render(){let e=this.props.item,t=this.getDisplayText(),n=(0,lG.Dz)(e),r=e.shortcutText||(0,$.c1)(this.props.appModel.keyboardShortcuts,n),i=void 0!==this.props.item.runPluginArgs,l=e.menuActionType&&"run-local-plugin"===e.menuActionType&&(!e.runPluginArgs||this.props.searchQuery),s="plugins-menu-item"===e.name&&!!e.itemParameterArgs&&e.itemParameterArgs.parameters.length>0,c=null;void 0!==this.state.itemIsChecked?c=a.createElement(o5.S,{checked:this.state.itemIsChecked,disabled:this.props.disabled}):this.props.actionIcon&&(c=this.props.actionIcon);let d=`${this.props.active?o7.ix:o7.Ke} ${this.props.disabled?o7.wn:""}`;return a.createElement("div",{className:d,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter,onClick:this.onClick,id:this.props.id,role:this.props.role,"aria-disabled":this.props.disabled||void 0,"aria-checked":this.props.item.checked},a.createElement("div",{className:o7.EA},c),a.createElement("div",{className:o7.V4},t,l&&a.createElement("div",{className:o7.Vu},(0,_.tx)("fullscreen_actions.development"))),r&&!s&&a.createElement("div",{className:o7.LE},a.createElement(tD.S,{shortcut:r})),!r&&s&&a.createElement("div",{className:o7.LE},a.createElement("div",{className:o7.Hq},(0,_.tx)("fullscreen_actions.tab")),i&&a.createElement("div",{className:o7.w8},(0,_.tx)("fullscreen_actions.to_edit")),a.createElement(nd.B,{svg:o9.A})),!r&&e.isRepairCommand&&(0,o.kc)().internal_only_debug_tools&&a.createElement("div",{style:eo.sx.colorBgTertiary.p8.bRadius8.borderBox.flex.itemsCenter.justifyCenter.mr8.h16.add({fontSize:"8px"}).$},"REPAIR"))}}function sc({parameterEntryArgs:e,fireTrackingEvent:t}){let[n,r]=a.useState(),[i,l]=a.useState(!0),o=(0,i5.Xr)(z.dd);a.useEffect(()=>{if(i){l(!1);let n=(0,oV.g)();o(n),t(n),e&&r({args:e})}},[e,i,t,o]);let s=(0,oH.W)();if(!n)return a.createElement(sl,{recordingKey:"quickActions",onStartParameterEntry:(e,t,n)=>{let a;switch(n){case"tab":a="quick-actions-tab";break;case"enter":a="quick-actions-enter";break;case"click":a="quick-actions-click";break;default:(0,oK.assertNever)(n)}r({args:{...e,triggeredFrom:a},item:t})}});{let{args:e,item:t}=n,i=t?(0,lU.EG)(t):void 0;return a.createElement(oz.ry,{recordingKey:"parameterEntry",parameters:e.parameters,displayName:e.displayName,pluginId:e.pluginId,pluginLocalFileId:e.pluginLocalFileId,command:e.command,triggeredFrom:e.triggeredFrom,parameterOnly:e.parameterOnly,onExitParameterEntry:()=>{r(void 0)},initialParameterValues:t?.runPluginArgs?.parameterValues,recentlyUsedCommandName:i,recentlyUsedQuickCommandsDB:s})}}ss.displayName="QuickActionsResult";var sd=n(62557),su=n(96328),sm=n(448169),sp=n(626217),s_=n(939900),sg=n(31913),sf=n(10648),sh=n(408405),sE=n(122983),sy=n(369870),sb=n(316081),sv=n(694517),sC=n(338400),sw=n(143678),sT=n(212478),sS=n(233890),sx=n(173521),sk=n(974898),sN=n(601538),sI=n(503316),sA=n(712546),sO=n(900073),sL=n(487392),sD=n(348425),sR=n(349719),sM=n(760591);function sP(){let e=(0,q.q5)();return a.createElement(ro.E,{className:"extension_toolbar_left_items--leftToolbar--npGkc",onClick:()=>(0,sR._r)(),htmlAttributes:{"data-tooltip-type":nk.Ib.TEXT,"data-tooltip":(0,_.t)("dev_handoff.vscode.toolbar.back_button")},"aria-label":(0,_.t)("dev_handoff.vscode.toolbar.back_button")},a.createElement(sD.t,{svg:sM.A,className:"extension_toolbar_left_items--back--JwiF5"}),a.createElement("div",{className:"extension_toolbar_left_items--fileNameText---u61D"},e?.name))}var sF=n(720248),sB=n(671250);function sU({focusModeEnabled:e,onClick:t}){return a.createElement("button",{"data-editor-theme":"dev-handoff",onClick:t,"data-tooltip":(0,_.t)(e?"dev_handoff.vscode.exit_focus_mode":"dev_handoff.vscode.enter_focus_mode"),"data-tooltip-type":nk.Ib.TEXT},a.createElement(nd.B,{svg:e?sB.A:sF.A,className:"dev_handoff_toolbar_focus_button--focusModeIcon--LMEyU"}))}var sG=n(334290),sK=n(197368),sV=n(699731);function sH(){let e=(0,r.wA)(),t=(0,P.J2)(i.Ez5.devHandoffState().focusMode);return a.createElement("div",{className:"extension_toolbar_right_items--buttons--3pMn8"},t&&a.createElement(sG.jX,null),a.createElement(sU,{focusModeEnabled:t,onClick:()=>i.w3z.setFocusModeEnabled(!t)}),a.createElement("button",{"data-editor-theme":"dev-handoff",onClick:()=>e(iA.lW({stringToCopy:window.location.toString()})),"data-tooltip":(0,_.t)("dev_handoff.copy_link"),"data-tooltip-type":nk.Ib.TEXT},a.createElement(nd.B,{svg:sK.A})),a.createElement("button",{"data-editor-theme":"dev-handoff",onClick:()=>sR.Qn(window.location.toString()),"data-tooltip":(0,_.t)("dev_handoff.open_in_figma"),"data-tooltip-type":nk.Ib.TEXT},a.createElement(nd.B,{svg:sV.A})))}var sz=n(782112),sW=n(766926),sj=n(435898),s$=n(535688),sq=n(522739),sY=n(957379),sX=n(665194),sJ=n(363926),sZ=n(655515);let sQ="pages_sidebar_toolbar_ui2--selected--VbVrq";var s0=n(770806),s1=n(934640);function s2(){return a.createElement(nd.B,{svg:s0.A,ariaLabel:(0,_.t)("pages_panel.toolbar.icon.addPage.aria_label"),dataTestId:"newPageToolbarIcon"})}function s5({numberOfPages:e}){return e>9?a.createElement(nd.B,{svg:s1.A,ariaLabel:(0,_.t)("pages_panel.toolbar.icon.ellipis.aria_label"),dataTestId:"ellipsisPagesToolbarIcon"}):function({numberOfPages:e}){return a.createElement("span",{"data-testid":"pageCountToolbarIcon","aria-label":(0,_.t)("pages_panel.toolbar.icon.pageCount.aria_label")},a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 17H18L18 18H20L21 18V17V7.6875V4V3H20H7H6V4L6 6.00004L7 6.00004V4L20 4V7.6875V17ZM17 20.0001H4V7.00012H17V10.6876V20.0001ZM4 6.00012H17H18V7.00012V10.6876V20.0001V21.0001H17H4H3V20.0001V7.00012V6.00012H4Z",fillOpacity:"0.9"}),a.createElement("text",{id:"numberText",x:"10.5",y:"14.5",dominantBaseline:"middle",textAnchor:"middle",fontFamily:"Inter",fontWeight:"500",fontSize:"9"},e)))}({numberOfPages:e})}function s3(){let e=(0,B.md)(sZ.ET),t=(0,i5.Xr)(sZ.UT),n=(0,i5.Xr)(sZ.Cx),i=(0,iV.rE)(),l=(0,rs.am)(),o=(0,r.d4)(e=>e.mirror.appModel.pagesList),s=(0,a.useMemo)(()=>o.filter(e=>!e.isDivider).length,[o]),c=(0,iV.nn)(),d=(0,r.wA)(),u=(0,sX.h5)({nonDividerPageCount:s,isDropdownOpen:e}),m=()=>{l("pages_panel_open_toggle",{isPagesOpen:!e},{forwardToDatadog:!0}),e?n():(t(),d(ef.b({[sY.jn]:!0})))};if(!u)return null;switch(u){case sX.mb.ADD_PAGE:return a.createElement(sJ.P,{tooltipText:(0,_.t)("pages_panel.toolbar.add_pages_tooltip"),isActive:e,onClick:()=>{i(null),m()},addLeftMargin:!1,recordingKey:"figjamPagesToolbarItem",onboardingKey:sY.gh,dataTestId:"addPages"},a.createElement("div",{className:el.cx.mxAuto.$},a.createElement(s2,null)));case sX.mb.VIEW_PAGES:return a.createElement("div",{className:"pages_sidebar_toolbar_ui2--toolbarItemContainer--az3u2"},a.createElement(sq.GG,{className:tL()("pages_sidebar_toolbar_ui2--toolbarItemButton--cNref","pages_sidebar_toolbar_ui2--withHover--zKrg8",{[sQ]:e}),recordingKey:"figjamPagesToolbarItem",dataTestId:"viewPages",onClick:m,"data-tooltip-type":nk.Ib.TEXT,"data-tooltip":(0,_.t)("pages_panel.toolbar.view_pages_tooltip"),"aria-label":(0,_.t)("pages_panel.toolbar.view_pages_tooltip"),"aria-pressed":e,"data-onboarding-key":sY.gh},a.createElement("div",{className:tL()("pages_sidebar_toolbar_ui2--iconContainer--XuPru")},a.createElement("div",{className:"pages_sidebar_toolbar_ui2--icon--wevM1"},a.createElement(s5,{numberOfPages:s}))),a.createElement("div",{className:tL()("pages_sidebar_toolbar_ui2--textWrapper--HJ3UH text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",{[sQ]:e})},c)));default:(0,oK.assertNever)(u)}}var s4=n(206315);function s6(){let e=(0,eS.aV)(),t=(0,r.d4)(e=>e.mirror.appModel.topLevelMode===i.lyf.HISTORY),n=!(0,sz.q8)()&&(0,sj.Uy)(),l=m.Ay.isMeetDevice;return t?a.createElement(s3,null):a.createElement(a.Fragment,null,n&&a.createElement(s$.V,null),a.createElement(sW.y,null),!e&&!l&&a.createElement(s4.j,null),a.createElement(s3,null))}var s8=n(438741),s7=n(754209),s9=n(27947),ce=n(549166),ct=n(371746),cn=n(637820),ca=n(430823);function cr({variant:e}){switch(e){case"design":return a.createElement("div",{className:el.cx.px8.$},a.createElement("div",{className:el.cx.h16.px4.bRadius3.$,style:eo.sx.add({border:"1px solid var(--color-bg-design)",color:"var(--color-bg-design)"}).$},a.createElement(lM.E,{fontSize:9},(0,_.tx)("fullscreen.toolbar.integ_zoom.beta"))));case"figjam":return a.createElement("div",{className:el.cx.px8.$},a.createElement(lL.Ex,{text:(0,_.t)("fullscreen.toolbar.integ_zoom.beta"),color:lL.zE.FIGJAM,subtle:!0}))}}function ci(){let e=(0,L.iZ)(),t=(0,sy.ck)(),n=(0,ak.Um)(),l=(0,r.d4)(e=>e.multiplayer),s=(0,q.q5)(),c=(0,s7.dR)(),d=(0,s7.Ww)(),u=(0,s8.B4)(),p=(0,r.wA)(),_=(0,r.d4)(e=>"prototype"===e.selectedView.view),g=(0,r.d4)(e=>e.mirror.appModel.topLevelMode===i.lyf.HISTORY),f=a.useCallback(e=>{(0,ce.Lx)(e,d?.sessionID,p,_,l,c,u)},[d?.sessionID,p,_,l,c,u]);(0,a.useEffect)(()=>{},[l,e]);let h=_?null:s,E=(0,ew.DG)(h?.key||"").enabled,y=!e&&!m.Ay.isMeetDevice,b=e?a.createElement(a.Fragment,null,d&&a.createElement(ce.v7,{dropdownShown:n,multiplayer:l,currentUser:d,onUserClick:f})):a.createElement(ce.cU,{dropdownShown:n,multiplayer:l,currentUser:d,onUserClick:f,editingFile:h});return sy.pb.isGoogleClassroomIntegration()?null:a.createElement(a.Fragment,null,(0,o.kc)().internal_only_debug_tools&&a.createElement(sG.bu,null),a.createElement(sG.n8,null),l&&s&&a.createElement(a.Fragment,null,!t&&h&&e&&a.createElement(cn.k,{fileKey:h.key}),a.createElement("div",{className:el.cx.flex.cursorDefault.selectNone.itemsCenter.$},a.createElement(s9.sK,null),b,!g&&a.createElement(ca.J,null),h&&a.createElement(ct.w,{user:e,editingFile:h,isFileInWorkshop:E}))),y&&a.createElement(sG.tO,null),(0,sy.MP)()&&a.createElement(cr,{variant:"figjam"}))}var cl=n(586459),co=n(286640),cs=n(195847),cc=n(950949),cd=n(151166),cu=n(737499),cm=n(826695),cp=n(492167),c_=n(63666),cg=n(135876),cf=n(589462);function ch(e){let t=(0,Q.A)(),n=Math.ceil((0,Q.A)(e).diff(t,"minutes",!0));if(n>30){let e=Math.ceil(n/60);return(0,_.t)("figjam_try.timer_hours_left",{hoursLeft:e})}if(n>=10){let e=10*Math.ceil(n/10);return(0,_.t)("figjam_try.timer_minutes_left",{minutesLeft:e})}return(0,_.t)("figjam_try.timer_less_than_ten_minutes_left")}function cE({until:e,ctaText:t,onCtaClick:n,isFigjam:r,tooltipText:i,showAndHideTooltipImmediately:l,isLoading:o,onExpire:s,onboardingKey:c}){let[d,u]=(0,a.useState)(ch(e));return(0,a.useEffect)(()=>{let t=setInterval(()=>{u(ch(e)),(0,Q.A)().isAfter((0,Q.A)(e))&&s&&s()},6e4);return()=>{clearInterval(t)}},[e,s]),a.createElement("div",{className:r?"countdown--figjamContainer--hlbVE countdown--container--WCLxZ":"countdown--designContainer--PVZIP countdown--container--WCLxZ","data-onboarding-key":c},a.createElement("div",{className:"countdown--timerContainer--L3IFQ","data-tooltip-type":nk.Ib.TEXT,"data-tooltip":i,"data-tooltip-show-immediately":l,"data-tooltip-hide-immediately":l},a.createElement(nd.B,{className:"countdown--icon--PREBw",svg:cf.A}),a.createElement("span",{className:"countdown--text--kN4nf ellipsis--ellipsis--Tjyfa","data-testid":"countdown-time"},d)),a.createElement(cg.x,{isLoading:!!o,className:"countdown--loading--DaaWQ"},()=>a.createElement(ev.$z,{className:"countdown--cta--JhE8T ellipsis--ellipsis--Tjyfa",onClick:()=>n(),trackingProperties:{buttonContext:t}},t)))}function cy(e){let t=(0,Q.A)(),n=Math.ceil((0,Q.A)(e).diff(t,"minutes",!0));if(n>30){let e=Math.ceil(n/60);return(0,_.t)("figjam_try.meet_hardware.timer_hours_left",{hoursLeft:e})}if(n>=10){let e=10*Math.ceil(n/10);return(0,_.t)("figjam_try.meet_hardware.timer_minutes_left",{minutesLeft:e})}return(0,_.t)("figjam_try.meet_hardware.timer_less_than_ten_minutes_left")}function cb({until:e,ctaText:t,onCtaClick:n,tooltipText:r,showAndHideTooltipImmediately:i,isLoading:l,onExpire:o,onboardingKey:s}){let[c,d]=(0,a.useState)(cy(e));return(0,a.useEffect)(()=>{let t=setInterval(()=>{d(cy(e)),(0,Q.A)().isAfter((0,Q.A)(e))&&o&&o()},6e4);return()=>{clearInterval(t)}},[e,o]),a.createElement("div",{className:"countdown_meet_hardware--figjamContainer--libjf countdown_meet_hardware--container--gM5Hl","data-onboarding-key":s},a.createElement("div",{className:"countdown_meet_hardware--timerContainer--JsqME","data-tooltip-type":nk.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-immediately":i,"data-tooltip-hide-immediately":i},a.createElement("img",{src:"https://static.figma.com/uploads/d2458a35e4543003186712a5c44448bc0949f82b",alt:"Wave hand icon",className:"countdown_meet_hardware--waveIcon--Lc-LT"}),a.createElement("span",{className:"countdown_meet_hardware--countdownText--Igbr2 ellipsis--ellipsis--Tjyfa","data-testid":"countdown-time"},c),a.createElement("span",{className:"countdown_meet_hardware--text--Ahn7z ellipsis--ellipsis--Tjyfa","data-testid":"countdown-time-text"},(0,_.t)("figjam_try.meet_hardware.board_deletion_disclaimer"))),a.createElement(cg.x,{isLoading:!!l,className:"countdown_meet_hardware--loading--s6qrq"},()=>a.createElement(ev.$z,{className:"countdown_meet_hardware--cta--H8MOo ellipsis--ellipsis--Tjyfa",onClick:()=>n(),trackingProperties:{buttonContext:t}},t)))}let cv="figjam-try-countdown",cC="figjam-try-timed-tooltip-shown",cw=(0,ln.Ju)(function(){let e=(0,r.wA)(),t=(0,cd.B)(),n=()=>{e(e_.ES({type:cw.type}))};return a.createElement(ev.fu,{name:"FigJam Try - Timed Tooltip"},a.createElement(c_.OA,{targetKey:cv,shouldCenterArrow:nR.EL.FALLBACK,title:(0,_.t)("figjam_try.timed_tooltip_headline"),topPadding:8,dismissModal:n,width:300-2*c_.uv,ctaText:(0,_.t)("figjam_try.timed_tooltip_cta"),onClickPrimaryCta:()=>{n(),t({origin:"figjam_try_timed_tooltip",formState:cs.qB.SIGN_UP})},buttonContext:"Create account"},a.createElement("p",null,(0,_.tx)("figjam_try.timed_tooltip_body"))))},"FigjamTryTimedTooltip");function cT(){let e=(0,ew.nF)(),t=(0,r.wA)(),n=(0,r.d4)(e=>!e.user),i=(0,q.tS)(),l=m.Ay.isMeetDevice,o=(0,r.d4)(e=>!!i&&e.loadingState[eu.Q.loadingKeyForPayload({file_key:i})]===cl.r.LOADING),s=(0,cd.B)(),c=(0,r.d4)(e=>!!e.modalShown),d=(0,a.useRef)((0,Q.A)().add(5,"minutes")),u=(0,cu.Kx)(),[p,g]=(0,a.useState)(!!(0,co.DN)().get(cC));if((0,a.useEffect)(()=>{if(!p&&n&&!c&&!u?.shouldOptimizeForIpadApp&&!l){let e=setInterval(()=>{(0,Q.A)().isSameOrAfter(d.current)&&(g(!0),(0,co.DN)().set(cC,1),t(e_.to({type:cw})))},6e4);return()=>{clearInterval(e)}}},[p,n,c,t,u?.shouldOptimizeForIpadApp,l]),!e.enabled||!i)return null;let f=()=>{t(e_.to({type:cm.nM,data:{onSubmitEmail:({fileKey:e,emailAddress:n})=>{t(cc.f({fileKey:e,emailAddress:n,onSuccess:E}))}}}))},h=({fileKey:e,emailAddress:n,isResentEmail:a})=>{t(cc.f({fileKey:e,emailAddress:n,isResentEmail:a}))},E=e=>{t(e_.to({type:cp.DH,data:{email:e,onChangeEmail:f,onResendEmail:h}}))};return a.createElement(ev.fu,{name:"FigJam Try Countdown Timer"},l?a.createElement(cb,{until:e.until,ctaText:(0,_.t)("figjam_try.save_board"),onCtaClick:()=>{t(e_.to({type:cm.nM,data:{onSubmitEmail:({fileKey:e,emailAddress:n})=>{t(cc.f({fileKey:e,emailAddress:n,onSuccess:E}))}}}))},tooltipText:n?(0,_.t)("figjam_try.timer_tooltip_anonymous"):(0,_.t)("figjam_try.timer_tooltip_logged_in"),showAndHideTooltipImmediately:!0,isLoading:o,onboardingKey:cv}):a.createElement(cE,{until:e.until,ctaText:(0,_.t)("figjam_try.save_board"),onCtaClick:()=>{n?s({origin:"figjam_try_countdown_timer",formState:cs.qB.SIGN_UP}):t(eu.Q({file_key:i}))},isFigjam:!0,tooltipText:n?(0,_.t)("figjam_try.timer_tooltip_anonymous"):(0,_.t)("figjam_try.timer_tooltip_logged_in"),showAndHideTooltipImmediately:!0,isLoading:o,onboardingKey:cv}))}var cS=n(377020),cx=n(608286),ck=n(325621),cN=n(157147),cI=n(663767),cA=n(284321),cO=n(57392),cL=n(715762),cD=n(142232),cR=n(136297),cM=n(16112),cP=n(951864),cF=n(337987);function cB(){let e=(0,B.md)((0,cA.Xh)(void 0)),t=(0,B.md)(cO.Lc),{isLibraryModalShown:n,onToggleLibraryModal:r}=(0,cI.u)({entrypoint:cL.r6.TOOLBAR_BUTTON,modalType:"editor",initialTab:t?nY.Wv.UPDATES:nY.Wv.LIBRARIES}),i=t?(0,_.t)("fullscreen.libraries_button.tooltip.updates_to_pull"):e?(0,_.t)("fullscreen.libraries_button.tooltip.updates_to_push"):(0,_.t)("fullscreen.libraries_button.tooltip.no_updates"),l=t||e;return(0,cD.Pf)({showBadge:l,hasChangesToPull:t}),a.createElement("span",{className:tL()(cM.WT,(0,cR.M)(!0,n))},a.createElement(sD.t,{svg:cP.A,fallbackSvg:cF.A,recordingKey:"actionLibraryButton",className:tL()(cM.gb),onMouseDown:r,"data-tooltip-type":nk.Ib.TEXT,"data-tooltip":i,"data-tooltip-submenu-open":n}),l&&a.createElement("span",{className:tL()(cR.I.updatesBadge)}))}var cU=n(268537),cG=n(901765),cK=n(445448),cV=n(298543),cH=n(232117),cz=n(289298);function cW(){let[e,t]=a.useState(!1),n=a.useRef(null),i=a.useRef(null),[l,o]=a.useState(null),s=(0,r.d4)(e=>e.mirror.appModel.pagesList),c=(0,r.d4)(e=>e.mirror.appModel.currentPage),d=s.find(e=>e.nodeId===c),u=(0,n$.RU)({subscribeToUpdates_expensive:!1})-(0,tG.hG)(tX.YI7)-(l?.top??0);if((0,cG.L)(n,()=>{e&&t(!1)}),!s)return null;async function m(e){await tQ.q.instance.setCurrentPageFromNodeAsync(e),t(!1)}return a.createElement("div",{className:"toolbar_page_picker--pagePicker--GVgi5",ref:n},a.createElement("button",{className:"toolbar_page_picker--pagePickerButton--5Hmqt",ref:i,onClick:function(){if(e)t(!1);else{let e=i.current?.getBoundingClientRect();e&&(o(e),t(!0))}},"data-tooltip":(0,_.t)("dev_handoff.pages_list"),"data-tooltip-type":nk.Ib.TEXT},a.createElement(cK.v,{pageGuid:c,margin:"marginRight",fallback:a.createElement(nd.B,{svg:cH.A,className:"toolbar_page_picker--pagePickerIcon--BvSvj"})}),a.createElement("span",{className:"toolbar_page_picker--pagePickerButtonContent--Sr4lK"},d?.name||""),a.createElement(nd.B,{svg:cz.A,className:"toolbar_page_picker--pagePickerButtonChevron--MiHhI"})),e&&l&&a.createElement(cV.Cf,{targetRect:l,maxHeight:u,propagateCloseClick:!0},s.map(e=>a.createElement(cU.MM,{key:e.nodeId,checked:c===e.nodeId,onClick:()=>m(e.nodeId)},a.createElement(cK.v,{pageGuid:e.nodeId,margin:"marginRight"}),a.createElement("span",{className:"toolbar_page_picker--dropdownOptionContent--7gcmF"},e.name)))))}var cj=n(343887),c$=n(755020),cq=n(341450);let cY="toolbar_vscode_frame_stepper--stepperButton--eRoSc",cX="toolbar_vscode_frame_stepper--stepperButtonDisabled--XSjQQ";function cJ(){let e=(0,P.J2)(i.Ez5.devHandoffState().focusNodeId),t=(0,P.J2)(i.Ez5.devHandoffState().nodeIds),n=(0,eS.eY)(),r=e?t.indexOf(e):-1,l=n?.get(e);if(!l||-1===r)return null;let o=0===r,s=r===t.length-1;return a.createElement("div",{className:"toolbar_vscode_frame_stepper--stepperContainer--ux6kR"},a.createElement("span",{className:o?cX:cY},a.createElement(cj.K,{htmlAttributes:{"data-tooltip-type":nk.Ib.TEXT,"data-tooltip":(0,_.t)("dev_handoff.vscode.toolbar.previous_frame")},"aria-label":(0,_.t)("dev_handoff.vscode.toolbar.previous_frame"),onClick:()=>i.glU.triggerActionInUserEditScope("dev-handoff-focus-previous",{}),disabled:o},a.createElement(c$.C,null))),a.createElement("span",{className:"toolbar_vscode_frame_stepper--stepperContent--hVi69"},l?.name||""),a.createElement("span",{className:s?cX:cY},a.createElement(cj.K,{htmlAttributes:{"data-tooltip-type":nk.Ib.TEXT,"data-tooltip":(0,_.t)("dev_handoff.vscode.toolbar.next_frame")},"aria-label":(0,_.t)("dev_handoff.vscode.toolbar.next_frame"),onClick:()=>i.glU.triggerActionInUserEditScope("dev-handoff-focus-next",{}),disabled:s},a.createElement(cq.e,null))))}var cZ=n(252828);let cQ=(0,sE.ck)(),c0=a.memo(function({item:e}){let t=(0,r.d4)(t=>(0,rF.A)(e.label));return a.createElement("div",{key:`label-${e.label}`,className:cM.Pf},t)}),c1=a.memo(function({item:e,recordingKey:t}){let n=(0,r.d4)(t=>(0,$.Yh)(t.mirror.appModel,e.action)),i=(0,r.d4)(t=>(0,rF.A)(e.action));return a.createElement(sG.QW,{key:`text-button-${e.action}`,action:e.action,isEnabled:n,text:i,recordingKey:t})}),c2=a.memo(function({item:e,disabled:t,recordingKey:n}){let i=e.children.filter(e=>!(0,cN.Zk)(e)||!e.featureFlags||e.featureFlags.every(e=>(0,o.kc)()[e])),s=(0,l.R)(e=>i.filter(t=>(0,cN.Zk)(t)&&(0,$.Yh)(e.mirror.appModel,t.action))),c=(0,r.d4)(e=>s.length>0&&c5(s[0],e));if(0===s.length)return null;if(e.flyoutHideOptionsIfSingleEnabledAction&&1===s.length){var d;return a.createElement(sG.rA,{key:`action-button-${s[0].action}`,item:(d=s[0],{type:cN.ZU.ACTION,...d}),isEnabled:!0,isActive:c,recordingKey:n})}return 1===s.length&&"flatten-selection"===s[0].action?null:a.createElement(sT.xn,{key:`flyout-${e.name}`,item:{...e,children:i},disabled:t,recordingKey:n,styleActiveItem:!e.flyoutDoNotStyleActiveItem})});function c5(e,t){return"isActive"in e&&e.isActive?e.isActive(t):"propertyValue"in e&&void 0!==e.propertyValue&&t.mirror.appModel[e.property]===e.propertyValue}let c3=a.memo(function({item:e,recordingKey:t}){let{featureFlags:n=[]}=e,i=(0,r.d4)(t=>c5(e,t)),l=(0,r.d4)(t=>(0,$.Yh)(t.mirror.appModel,e.action)&&n.every(e=>(0,o.kc)()[e])&&(!e.isAvailable||e.isAvailable(t)));return a.createElement(sG.rA,{key:`action-button-${e.action}`,item:e,isEnabled:l,isActive:i,recordingKey:t})}),c4=a.memo(function({item:e,numUnreadComments:t,recordingKey:n,canEdit:l}){let s=(0,r.d4)(t=>(0,$.Yh)(t.mirror.appModel,e.action)),c=(0,ak.Um)(),d=(0,r.d4)(t=>e.tool!==i.NLJ.NONE&&e.tool===t.mirror.appModel.currentTool&&!(0,$.TY)(c)),u=(0,r.d4)(e=>e.mirror.appModel.topLevelMode);return e.featureFlags&&!e.featureFlags.every(e=>(0,o.kc)()[e])?null:a.createElement(sG.T0,{key:`tool-button-${e.tool}`,dropdownShown:c,isEnabled:s,isActive:d,item:e,numUnreadComments:t,recordingKey:n,topLevelMode:u,isWide:e.isWideForEditors&&l})}),c6=a.memo(function({item:e,numUnreadComments:t,recordingKey:n}){let l=(0,r.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),o=(0,r.d4)(e=>e.mirror.appModel.currentTool),s=(0,q.q5)(),c=(0,r.d4)(e=>e.progressBarState.mode),d=(0,sh.T)(c),u=(0,r.d4)(e=>d?!s?.canEdit:e.mirror.appModel.isReadOnly),m=(0,r.d4)(e=>e.mirror.appModel.isSceneReadOnly),p=(0,r.d4)(e=>!!e.user);if(!e||m&&!e.nonEditorsAllowed||e.onlyShowInReadOnly&&!(u&&c!==i.Oin.HIDE_UI)||e.hideInExtension&&iK.z4.getIsExtension()||!s&&e.newFileDisabled||!p&&!e.loggedOutAllowed||e.editModes&&-1===e.editModes.indexOf(l)||e.showForTools&&-1===e.showForTools.indexOf(o))return null;let _=e.dontChainRecordingKeys?e.recordingKey:aw.Pt(n,e.recordingKey);switch(e.type){case cN.ZU.LABEL:return a.createElement(c0,{item:e});case cN.ZU.TEXT_BUTTON:return a.createElement(c1,{item:e,recordingKey:_});case cN.ZU.FLYOUT:return a.createElement(c2,{item:e,disabled:d,recordingKey:_});case cN.ZU.ACTION:return a.createElement(c3,{item:e,recordingKey:_});case cN.ZU.TOOL:return a.createElement(c4,{item:e,numUnreadComments:t,recordingKey:_,canEdit:s?.canEdit||!1});default:(0,oK.assertNever)(e)}}),c8=()=>{let e=(0,r.wA)(),t=(0,eS.p8)("activeCanvasEditModeType"),n=q.q5()?.canEdit;return()=>{if((0,lw.Ah)(t)){e((0,sv.Eg)());return}if(!n){e(sg.Fm({id:sv.V_})),w.Y5.triggerAction("enter-preview-mode");return}e(sg.Fm({id:sv.V_})),w.Y5.triggerAction("enter-layout-mode")}};function c7(e){let{recordingKey:t}=e,n=(0,r.d4)(e=>e.userStateLoaded),l=(0,eS.p8)("topLevelMode"),s=(0,r.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),c=(0,r.d4)(e=>e.selectedView),d=q.q5()?.canEdit,u=c8();return n&&(!(0,o.kc)().version_diffing||s!==i.m1T.COMPARE_CHANGES)&&((0,lw.Ah)(s)||l===i.lyf.BRANCHING)&&(c.editorType===j.nT.Design||c.editorType===j.nT.DevHandoff)?a.createElement("div",{className:cM.dM},a.createElement(ei.$$,{key:d?"back-to-editing-btn":"back-to-viewing-btn",className:cM.uX,recordingKey:aw.Pt(t,"backToEditing"),onClick:u},(0,_.tx)("fullscreen.toolbar.done"))):null}function c9(e){let t=a.useRef(null),n=a.useCallback(()=>{requestAnimationFrame(()=>{let e=t.current;e&&e.clientWidth!==innerWidth&&(e.style.width="99.999%",requestAnimationFrame(()=>{e.style.width=""}))})},[]),{multiplayer:r,dispatch:l,selectedView:o}=e,s=a.useCallback(e=>{i.h3O.observeUser(e),r&&r.observingSessionID!==e&&r.sessionID!==e&&l(ef.b({aware_of_observation_mode:!0}))},[r,l]);return(a.useEffect(()=>{addEventListener("resize",n);let e=window.FigmaMobile;e&&(e._open_timer=()=>{B.zl.set(sO.Qs,{type:"OPEN"}),(0,Z.sx)(sL.Fn.OPEN,{source:sL.OO.IPAD_MENU})},e._close_timer=()=>{B.zl.set(sO.Qs,{type:"CLOSE"})});let t=window.FigmaMobile;return t&&(t._set_allow_draw_with_touch=e=>{i.glU.setAllowDrawWithTouch(e)},t._unlock_all_objects=()=>{w.Y5.triggerActionInUserEditScope("unlock-all")},t._zoom_reset=()=>{w.Y5.triggerActionInUserEditScope("zoom-reset")},t._zoom_to_fit=()=>{w.Y5.triggerActionInUserEditScope("zoom-to-fit")},t._present=()=>{i.h3O.startPresenting()},t._observe_user=e=>{s(e)},t._find_in_file=()=>{w.Y5.triggerActionInUserEditScope("canvas-search")},t._copy=()=>{w.Y5.triggerActionInUserEditScope("copy")},t._cut=()=>{w.Y5.triggerActionInUserEditScope("cut")},t._paste=()=>{w.Y5.triggerActionInUserEditScope("paste")},t._add_media=e=>{let t=e.map(e=>{let{encoded_data:t,mime_type:n}=e;return new Blob([(0,su.Vs)(t)],{type:n})}),n=w.Y5.fileArrayToString(t);i.glU.handleOpenFromJsonString(n,sI.wu.MOBILE_NATIVE_NAVBAR)},t._get_zoom_scale=()=>i.glU.getViewportZoomScale(),t._get_prototype_status=()=>{let e=i.X3B.currentPagePrototypeStatus(),t="";if(e!==i.bOM.VALID)switch(e){case i.bOM.NO_FRAMES:t=o.editorType===j.nT.Slides?(0,_.t)("proto.status_messages.a_presentation_needs_to_have_at_least_one_slide"):(0,_.t)("proto.status_messages.a_prototype_needs_to_have_at_least_one_frame");break;case i.bOM.INVALID_START_NODE:t=(0,_.t)("proto.status_messages.a_prototype_with_connections_needs_a_valid_top_level_frame_as_the_origin");break;default:(0,oK.assertNever)(e)}return{status:e,message:t}}),()=>{removeEventListener("resize",n)}},[s,o.editorType,n]),(0,lS.C_)(t),"fullscreen"===e.selectedView.view&&e.selectedView.editorType===j.nT.Whiteboard)?a.createElement(dr,{dropdownShown:e.dropdownShown,isInitialized:e.isInitialized,multiplayer:e.multiplayer,numUnreadComments:e.numUnreadComments,openFile:e.openFile,progressBarMode:e.progressBarMode,recordingKey:e.recordingKey,showUi:e.showUi,user:e.user,ref:t}):a.createElement(di,{devHandoffFocusMode:e.devHandoffFocusMode,dropdownShown:e.dropdownShown,isInitialized:e.isInitialized,multiplayer:e.multiplayer,numUnreadComments:e.numUnreadComments,openFile:e.openFile,progressBarMode:e.progressBarMode,recordingKey:e.recordingKey,selectedView:e.selectedView,showMissingFontsButton:e.showMissingFontsButton,showUi:e.showUi,user:e.user,ref:t})}function de(e){return{openFile:e.openFile,dropdownShown:e.dropdownShown,modalShown:e.modalShown,loadingState:e.loadingState,user:e.user,userFlags:e.userFlags,multiplayer:e.multiplayer,userStateLoaded:e.userStateLoaded,topLevelMode:e.mirror.appModel.topLevelMode,isInitialized:e.mirror.appModel.isInitialized,progressBarMode:e.progressBarState.mode,activeVoiceCallExists:!!e.openFile&&e.openFile.key in e.voice.activeCall,showUi:e.mirror.appModel.showUi,isFreeUser:e.isFreeUser}}function dt(e){let t=(0,l.R)(de),n=(0,q.q5)(),o=(0,r.d4)(e=>e.orgById),s=(0,r.d4)(e=>e.teams),c=(0,sC.YL)({openFile:n,teams:s,orgById:o}),d=(0,ew.$D)(),u=(0,P.J2)(i.Ez5.uiState().showMissingFontsButton),m=(0,P.J2)(i.Ez5.devHandoffState().focusMode),p=(0,eS.p8)("showUi"),_=(0,r.wA)();return(0,sx.U)(),a.createElement(c9,{...(0,sd.d)(t),...e,dispatch:_,voiceEligibility:c,isWorkshopFile:d,showMissingFontsButton:u,devHandoffFocusMode:m,showUi:p})}function dn({numUnreadComments:e,recordingKey:t}){let n=(0,eC.E3)(),r=(0,sA.oV)(),l=(0,sA.rD)(),o=(0,rl._I)(),s=(0,E.l7)(),c=(0,s_.er)();if(s||c)return null;let d=(()=>{switch(n){case j.nT.Whiteboard:return cN.FW.filter(e=>n!==j.nT.Whiteboard||!r&&!l||e.type!==cN.ZU.TOOL||e.tool!==i.NLJ.SELECT&&e.tool!==i.NLJ.HAND);case j.nT.DevHandoff:return cN._8.filter(e=>e.type!==cN.ZU.TOOL||e.tool!==i.NLJ.ANNOTATE&&e.tool!==i.NLJ.MEASURE||o);default:return cN.XU}})();return a.createElement(a.Fragment,null,d.map((n,r)=>a.createElement(c6,{key:r,item:n,numUnreadComments:e,recordingKey:t})))}function da({renderDesignMiddleItems:e,renderFileName:t,renderFigjamTryCountdown:n}){let o=(0,P.J2)(i.Ez5.editorState().selectionEmpty),s=(0,sp.s)(!1),{topLevelMode:c,editMode:d}=(0,l.R)(e=>({topLevelMode:e.mirror.appModel.topLevelMode,editMode:e.mirror.appModel.activeCanvasEditModeType})),u=(0,r.d4)(e=>{let t=e.modalShown;return t?.type===sk.e}),m=(0,q.q5)(),p=(0,eS.aV)(),_=(0,sE.ck)(),g=d===i.m1T.COMMENTS||d===i.m1T.PREVIEW||d===i.m1T.BRANCHING||c===i.lyf.HISTORY||c===i.lyf.PREVIEW||c===i.lyf.DEV_HANDOFF||c===i.lyf.BRANCHING,f=(0,eC.ow)(),h=(0,E.l7)(),y=!!m?.isTryFile&&!u&&!p&&_,b=!u&&(f||o||g||p)&&!s,v=p||f?void 0:a.createElement(ck.m,null);return a.createElement("div",{key:"center-group","data-onboarding-key":sN.lm,className:`${cM.GC} ${cM.V3}`},v,t(b&&!y),n(y),e(!b&&!f&&!y&&!h))}let dr=a.forwardRef(function(e,t){var n,r;let{loadingClassName:i,hideToolsClassName:l}=dl(e.progressBarMode,e.openFile,e.isInitialized),o=ds(e.recordingKey),s=(n=e.numUnreadComments,r=e.recordingKey,a.useMemo(()=>new sb.H4(()=>{let e=[];return cN.D4.forEach((t,i)=>{let l=a.createElement(c6,{key:i,item:t,numUnreadComments:n,recordingKey:r});l&&e.push(l)}),e}),[n,r]));return a.createElement(ev.fu,{name:sw.e0.EDITOR_TOOLBAR,trackingTargets:sf.K.RCS},a.createElement("div",{onFocus:sS.F2.focusCustomCanvasFocusElement,tabIndex:0}),a.createElement(sm.V,null,a.createElement("div",{className:tL()(cM.KE,C.Dm,i,cM.Jg,{[cM.R]:!e.showUi}),ref:t,role:"region","aria-label":(0,_.t)("fullscreen.accessibility_dom.primary_toolbar_label")},a.createElement("div",{key:"left-group",className:`${cM.GC} ${cM.l3} ${l}`},a.createElement(sG.xG,{hideToolsClassName:l,recordingKey:e.recordingKey}),a.createElement(dn,{numUnreadComments:e.numUnreadComments,recordingKey:e.recordingKey}),a.createElement(s6,null),a.createElement(c7,{recordingKey:e.recordingKey})),a.createElement(da,{renderFileName:e=>o.render({isVisible:e,className:cM.Xs,displayAs:"block"}),renderFigjamTryCountdown:e=>e&&a.createElement(cT,null),renderDesignMiddleItems:e=>s.render({isVisible:e,displayAs:"block"})}),a.createElement("div",{key:"right-group",className:`${cM.GC} ${cM.gt} ${l}`},a.createElement(ci,null)))))}),di=a.forwardRef(function(e,t){let n=(0,Y.$A)(e.selectedView),r=(0,E.l7)(),i=n&&iK.z4.getIsExtension(),l=!cQ&&!e.selectedView.isRecoveryMode&&!r,{devHandoffFocusMode:o,openFile:s,user:c}=e,{loadingClassName:d,hideToolsClassName:u}=dl(e.progressBarMode,e.openFile,e.isInitialized),m=(s?.canEdit??!1)&&!!c,p=ds(e.recordingKey),g=a.useMemo(()=>new sb.H4(()=>{let t=[];return cN.D4.forEach((n,r)=>{let i=a.createElement(c6,{key:r,item:n,numUnreadComments:e.numUnreadComments,recordingKey:e.recordingKey});i&&t.push(i)}),t}),[e.numUnreadComments,e.recordingKey]);return a.createElement(ev.fu,{name:sw.e0.EDITOR_TOOLBAR,trackingTargets:sf.K.RCS},a.createElement("div",{onFocus:sS.F2.focusCustomCanvasFocusElement,tabIndex:0}),a.createElement(sm.V,null,a.createElement("div",{className:tL()(cM.KE,C.Dm,d,{[cM.R]:!e.showUi}),ref:t,role:"region","aria-label":(0,_.t)("fullscreen.accessibility_dom.primary_toolbar_label")},a.createElement("div",{key:"left-group",className:`${cM.GC} ${cM.l3} ${u}`},!i&&a.createElement(sG.xG,{hideToolsClassName:u,recordingKey:e.recordingKey}),i&&o?a.createElement(sP,null):a.createElement(a.Fragment,null,a.createElement(dn,{numUnreadComments:e.numUnreadComments,recordingKey:e.recordingKey}),a.createElement(c7,{recordingKey:e.recordingKey}))),i?o?a.createElement(cJ,null):a.createElement(cW,null):a.createElement(da,{renderFileName:e=>e&&cN.mb.isActive?.({})?a.createElement(c6,{item:cN.mb,numUnreadComments:0}):p.render({isVisible:e,className:cM.Xs,displayAs:"block"}),renderFigjamTryCountdown:e=>e&&a.createElement(cT,null),renderDesignMiddleItems:e=>g.render({isVisible:e,displayAs:"block"})}),a.createElement("div",{key:"right-group",className:`${cM.GC} ${cM.gt} ${u}`},i?a.createElement(sH,null):r&&e.multiplayer&&e.openFile?a.createElement("div",{className:cM.XA},a.createElement(ce.Cv,{dropdownShown:e.dropdownShown,multiplayer:e.multiplayer,user:e.user})):a.createElement(a.Fragment,null,a.createElement(sG.n8,null),e.multiplayer&&e.openFile&&a.createElement(ce.Cv,{dropdownShown:e.dropdownShown,multiplayer:e.multiplayer,user:e.user}),!e.user&&a.createElement(sG.tO,null),l&&a.createElement(cx.Z,{recordingKey:e.recordingKey,extraPadding:m}),m&&a.createElement(cB,null),!cQ&&a.createElement(c6,{item:cN.Fz,recordingKey:e.recordingKey,numUnreadComments:0}),e.showMissingFontsButton&&a.createElement(sG.w8,{recordingKey:e.recordingKey}),a.createElement(cZ.HT,{recordingKey:aw.Pt(e,"zoomMenu")}),(0,sy.MP)()&&a.createElement(cr,{variant:"design"}))))))});function dl(e,t,n){let a=(0,sh.T)(e);return{loadingClassName:a?cM.Lq:"",hideToolsClassName:!a||t?.canEdit&&n?"":cM.yM}}function ds(e){return a.useMemo(()=>new sb.H4(()=>a.createElement(cS.fH,{recordingKey:aw.Pt(e,"filenameView")})),[e])}function dc(e){return(0,tz.GS)()?null:a.createElement(dt,{...e})}var dd=n(320063),du=n(452441),dm=n(877953),dp=n(555074),d_=n(234945),dg=n(361365),df=n(224690),dh=n(983092),dE=n(761334),dy=n(243008),db=n(282263),dv=n(533573),dC=n(15270),dw=n(720531),dT=n(476066),dS=n(424148);let dx=2*(0,tG.jz)(tX.dGl);var dk=(e=>(e.COMPONENT_PROP="Property",e.VARIABLE="Variable",e))(dk||{});function dN({initialPosition:e,initialVariableValue:t,resolvedType:n,refField:s,recordingKey:c,onCreateComponentPropSubmit:d,onCreateVariableSubmit:u,onClose:m}){let p=(0,a.useRef)(null);(0,dh.oN)(p);let g=(0,dm.C)("fpl_variables_button_migration"),[f,h]=(0,a.useState)("Property"),E=(0,a.useCallback)(()=>"Property"===f,[f]),y=(0,dv.WB)(n),b=(0,l.R)(e=>(0,df.vS)(e,y,s)),v=function(e){let t=(0,r.d4)(d_.qd),n=(0,r.d4)(e=>{let n=t.length?t[0]:null,a=n?e.mirror.sceneGraph.get(n):null;return a?.textContent??""}),a=(0,dp.kl)("visible"),l=(0,dv.WB)(e)===i.J0O.BOOL;return(0,dC.WI)(e,l?a:n)}(n),[C,w]=(0,a.useState)({propName:b,varValue:v}),T=t??(0,dC.WI)(n),[S,x]=(0,a.useState)({varName:E()?b:"",varValue:T,varSetID:null}),k=a.useMemo(()=>E()&&C?C.propName.length>0:!!S.varName&&i.CWU.isValidVariableName(S.varName,S.varSetID??null),[C,E,S.varName,S.varSetID]),N=aw.of(c,"submit",()=>{E()&&C?d(C):S&&u({varName:S.varName,varValue:S.varValue,varSetID:S.varSetID??null})});return(0,o.kc)().ds_variable_props_unified_ui?a.createElement(nR.vx,{title:a.createElement("div",{className:dT.h$},(0,_.tx)("variables.create_modal.component_property_or_variable_title")),initialPosition:e,initialWidth:dh.iG,onClose:m},a.createElement("form",{onSubmit:N,autoComplete:"no"},a.createElement(lD.Y,{direction:"vertical",spacing:0,height:"hug-contents",ref:p},a.createElement(lD.Y,{direction:"vertical",spacing:`${(0,tG.jz)(tX.dGl)}px`,padding:{top:dx},height:"hug-contents"},a.createElement(dh.$p,{label:(0,_.tx)("variables.create.title"),input:a.createElement("div",{className:dT.hF},a.createElement(dA,{selectedType:f,onChange:h}))}),E()?a.createElement(dI,{recordingKey:"createComponentPropForm",setComponentPropSubmitData:w,componentPropSubmitData:C,resolvedType:n}):a.createElement(dh.hG,{recordingKey:c??"",initialVarValue:t,resolvedType:n,setVariableFormSubmitData:x,variableFormSubmitData:S}))),a.createElement(lD.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16},g?a.createElement(nr.$n,{type:"submit",disabled:!k,recordingKey:aw.Pt(c,"createButton"),htmlAttributes:{"data-tooltip":(0,_.t)("variables.create_modal.invalid_variable_name"),"data-tooltip-type":k?void 0:nk.Ib.TEXT}},E()?(0,_.tx)("variables.create_modal.create_component_property"):(0,_.tx)("variables.create_modal.create_file_variable")):a.createElement(ei.$$,{style:{justifySelf:"right"},tabIndex:0,type:"submit",disabled:!k,recordingKey:aw.Pt(c,"createButton"),"data-tooltip-type":k?void 0:nk.Ib.TEXT,"data-tooltip":(0,_.t)("variables.create_modal.invalid_variable_name")},a.createElement("span",null,E()?(0,_.tx)("variables.create_modal.create_component_property"):(0,_.tx)("variables.create_modal.create_file_variable")))))):null}function dI({recordingKey:e,setComponentPropSubmitData:t,componentPropSubmitData:n,resolvedType:r}){let l=(0,a.useRef)(null);(0,dd.h)(()=>{l.current?.select()});let s=e=>{e.type===i.Z_n.ALIAS&&e.resolvedType===i.rXF.STRING&&(e.resolvedType=i.rXF.TEXT_DATA),t({propName:n.propName,varValue:e})},c=(0,dh.J7)(n.varValue,r,s),d=(0,dh.Fr)(n.varValue);return a.createElement(a.Fragment,null,a.createElement(dh.$p,{label:(0,_.tx)("variables.create_modal.name_label"),input:a.createElement(du.L,{className:dT._Z,name:"propName",value:n.propName,onChange:e=>{t({propName:e.target.value,varValue:n.varValue})},ref:l,recordingKey:aw.Pt(e,"componentPropNameInput"),delay:50,"data-1p-ignore":!0,autoFocus:!0})}),a.createElement(dh.$p,{label:(0,_.tx)("variables.create_modal.value_label"),input:(0,o.kc)().ds_variable_props_binding?a.createElement("div",{className:dT.hF},a.createElement(db.Cr,{resolvedType:r,variableValue:n.varValue,onVariableValueChange:s,onVariableSelected:c},a.createElement(dw.gJ,{variableValue:n.varValue,contextType:dy.$.FORM,onChange:s,recordingKey:aw.Pt(e,"variableValueInput")}),d&&a.createElement(aA.K0,{svg:dS.A,type:"button","data-tooltip-type":nk.Ib.TEXT,"data-tooltip":(0,_.t)("variables.authoring_modal.table.detach_alias"),onClick:()=>s(d),recordingKey:aw.Pt(e,"detachVariableButton")}))):a.createElement(dw.gJ,{variableValue:n.varValue,contextType:dy.$.FORM,onChange:s,recordingKey:aw.Pt(e,"variableValueInput"),innerContainerClassName:dT._Z})}))}function dA({selectedType:e,onChange:t}){let n=(0,r.wA)(),i=(0,ak.Um)();return a.createElement(aO.l6,{id:"variable-and-component-prop-create-modal-select",property:e,formatter:{format:e=>e},dispatch:n,chevronClassName:dT.mL,inputClassName:dT.NI,dropdownShown:i,onChange:e=>t(e)},a.createElement(aO.c$,{value:"Property"}),a.createElement(aO.c$,{value:"Variable"}))}var dO=n(602354),dL=n(2063),dD=n(678738),dR=n(215122),dM=n(937036),dP=n(768137),dF=n(154483),dB=n(184027),dU=n(927990),dG=n(502242);function dK({inheritStyleKeyField:e,initialStyleCreationPaint:t,recordingKey:n,onSubmit:i,shouldUseEyedropperStyleCreationFlow:l}){let o=(0,r.d4)(e=>e.mirror.selectedStyleProperties),s=(0,r.d4)(e=>e.mirror.sceneGraphSelection),c=a.useRef(Object.keys(s).length>0),d=(0,dM.sg)(e),{styleRef:u,createStyle:m}=(0,dU.u)({inheritStyleKeyField:e,initialStyleCreationPaint:t,isCreatingFromSelection:c.current,trackingOptions:{styleType:d},shouldUseEyedropperStyleCreationFlow:l}),p=aw.of(n,"submit",()=>{m(),i(u)});return o.styleType?a.createElement(dB.zK.Provider,{value:dB.zM.CREATE_VARIABLE_STYLE},a.createElement(dG.O8,{type:o.styleType,recordingKey:n,isInspectPanel:!1,selectedStyleProperties:o,showProperties:!0,onEnterPressed:p}),a.createElement(lD.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16},a.createElement(dP.$$,{style:{justifySelf:"right"},onClick:p,disabled:!u},(0,_.tx)("design_systems.create_style.create_style")))):null}var dV=n(894728),dH=n(278501),dz=n(83909),dW=n(400333),dj=n(914335);function d$(e){return e.startsWith("mailto:")?-1!==e.indexOf("?")?e:e.substring(7):e}function dq(e){let t=(0,r.wA)(),n=(0,r.Pj)().getState(),[l,s]=a.useState(d$(e.hyperlinkLocation.url)),c=a.useRef(!0),d=a.useRef(l);a.useEffect(()=>{d.current=l},[l]);let m=a.useCallback(t=>n1.l7.user("set-hyperlink",()=>!i.glU.setHyperlink(d$(t),e.hyperlinkLocation.nodeID,e.hyperlinkLocation.rangeStart,e.hyperlinkLocation.rangeEnd)),[e.hyperlinkLocation.nodeID,e.hyperlinkLocation.rangeEnd,e.hyperlinkLocation.rangeStart]);a.useEffect(()=>()=>{c.current&&(m(d.current),(0,Z.sx)("Hyperlink Editor Updated Link On Dismiss"))},[m]);let p=aw.AF(e.recordingKey,"change",e=>{s(e.target.value.trim())}),f=aw.v_(e.recordingKey,"keydown",n=>{if((0,lx.jr)(n,lx.W0.NO))return aw.aH;if("Escape"===n.key)n.preventDefault(),c.current=!1,(0,Z.sx)("Hyperlink Editor Cancelled On Escape"),i.glU.hideHyperlinkEditor();else if("Enter"===n.key){if(n.preventDefault(),c.current=!1,m(l))(0,Z.sx)("Hyperlink Editor Invalid Link"),t(g.F.enqueue({message:(0,_.t)("hyperlink.invalid_link_plain")}));else if(""===l)(0,Z.sx)("Hyperlink Editor Deleted Link"),t(g.F.enqueue({message:(0,_.t)("hyperlink.link_deleted")}));else{l&&dz.wt.reportEditAction("hyperlink_edit");let t={};if(l&&!l.startsWith("mailto:"))try{let n=new URL((0,dW.xT)(l)).hostname,a=e.editorType;t={domain:n,editorType:a}}catch(e){}(0,Z.sx)("Hyperlink Editor Updated Link On Enter",t)}i.glU.hideHyperlinkEditor()}}),h=aw.rf(e.recordingKey,"click",n=>{c.current=!1,e.hyperlinkLocation&&n1.l7.user("clear-hyperlink",()=>i.glU.setHyperlink("",e.hyperlinkLocation.nodeID,e.hyperlinkLocation.rangeStart,e.hyperlinkLocation.rangeEnd)),t(g.F.enqueue({message:(0,_.t)("hyperlink.link_deleted")})),dz.wt.reportEditAction("hyperlink_edit"),i.glU.hideHyperlinkEditor(),n.stopPropagation()}),E=e.hyperlinkLocation.x,y=e.hyperlinkLocation.y,b=w.Y5.getViewportInfo(),v=Math.round(Math.min(Math.max(E,100),b.width-100)+b.x),C=Math.round(y+b.y);return(0,o.kc)().sites_text_links&&e.editorType===j.nT.Sites?a.createElement(iX.S7,{recordingKey:"hyperlinkEditor",setUrl:s,store:n}):a.createElement(dj.c,{url:l,location:new ns.Mi(v,C),onInputChange:p,onInputKeyDown:f,onBlur:u.lQ,onClickTrash:h})}var dY=n(555024),dX=n(20484),dJ=n(140871),dZ=n(522322),dQ=n(889085),d0=n(109176);function d1(e){return{selectedView:e.selectedView,user:e.user,currentUserOrgId:e.currentUserOrgId,comments:e.comments,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,multiplayerEmoji:e.multiplayerEmoji,eyedropper:e.eyedropper,needsUpgrade:e.needsUpgrade,progressBarState:e.progressBarState,showingReconnectingModal:e.showingReconnectingModal,showingOpenDesktopAppModal:e.showingOpenDesktopAppModal,openFile:e.openFile,exportSettingsPickerShown:e.exportSettingsPickerShown,pagesList:e.mirror.appModel.pagesList,timerModalState:e.timer.modalState,timerTime:e.timer.time,universalInsertModal:e.universalInsertModal,isCommentsToolSelected:e.mirror.appModel.currentTool===i.NLJ.COMMENTS,loadingBackgroundColor:e.desktopNewTab.loadingBackgroundColor,isReadOnly:e.mirror.appModel.isReadOnly,currentPage:e.mirror.appModel.currentPage,hyperlinkLocation:e.mirror.appModel.hyperlinkLocation,onCanvasNameEditorInfo:e.mirror.appModel.onCanvasNameEditorInfo,topLevelMode:e.mirror.appModel.topLevelMode,showUi:e.mirror.appModel.showUi,showToolbar:!0,showKeyboardShortcuts:e.mirror.appModel.showKeyboardShortcuts,loadingEmbeds:e.mirror.appModel.loadingEmbeds,fileIsLoading:e.progressBarState.mode===i.Oin.HIDE_UI||e.progressBarState.mode===i.Oin.ON_AND_LOCKED,hasCursorBot:!!(0,o.kc)().internal_only_debug_tools||!!e.userFlags.has_cursor_bot_onboarding_v2}}function d2({fileKey:e}){let t=(0,r.wA)(),n=(0,r.Pj)(),l=(0,r.d4)(e=>e.isFullscreenDocumentLoaded),o=(0,dJ.jz)(),s=(0,dZ.e_)()===dZ.$_.ELIGIBLE,d=(0,F.Fk)(e=>e.getCurrentPage()?.guid);return a.useLayoutEffect(()=>{if(!l||!s)return;let a=n.getState(),r=o?.find(e=>e.inProgress),u=a.mirror.appModel.votingSessionInfo,m=u.sessionId&&o?o.find(e=>e.id===u.sessionId):null;if(r){if(r.id!==u.sessionId){t(b.au({}));let n=(0,M.VP)(a.loadingState,b.$c(e))||a.voting.lastInitiatedVotingSessionId===r.id;t(b.H1({votingStage:n?i.W8Y.JOINED:i.W8Y.NOT_JOINED}))}}else u.sessionId&&!m?t(b.H1({votingStage:i.W8Y.NO_SESSION})):!r&&u.sessionId&&u.votingStage!==i.W8Y.ENDED&&(t((m?.pageNodeId&&(0,c.oA)(m.pageNodeId))===d?b.H1({sessionId:u.sessionId,votingStage:i.W8Y.ENDED}):b.H1({votingStage:i.W8Y.NO_SESSION})),t(b.D6("")))},[e,t,o,l,s,n,d]),null}function d5(){let e=(0,r.d4)(e=>e.isFullscreenDocumentLoaded),t=a.useRef(!1);return a.useEffect(()=>{e&&!t.current&&((0,d.Z1)(),t.current=!0)},[e,t]),null}let d3={VariableCreateModalRoot:dh.IU,VariableAndStyleCreateModalRoot:function({initialPosition:e,initialVariableValue:t,inheritStyleKeyField:n,initialStyleCreationPaint:l,initialView:o,resolvedType:s,onCreateVariable:c,onCreateStyle:d,onClose:u,disableStyleModal:m,shouldUseEyedropperStyleCreationFlow:p}){let g="createVariableAndStyleModal",f=(0,dm.C)("fpl_window");(0,dE.NF)({resolvedType:s});let{onCreateVariableSubmit:h,onCreateStyleSubmit:E}=function({onCreateVariable:e,onCreateStyle:t,onClose:n}){let{onCreateVariableSubmit:a}=(0,dh.C_)({onCreateVariable:e,onClose:n}),l=(0,q.tS)(),o=(0,q._G)(),s=(0,r.d4)(e=>e.mirror.sceneGraph);return{onCreateVariableSubmit:a,onCreateStyleSubmit:function(e){let a=function(e){let t=i.Pt4.getStyleNodeId(e.key,e.version),n=s.get(t);return n?{type:nY.PW.STYLE,name:n.name,file_key:l??"",file_key_source:dF.Ps.LOCAL_FILE,library_key:o??(0,rC.l)(""),key:n.styleKeyForPublish,thumbnail_url:"",canvas_url:"",content_hash:n.styleVersionHash??void 0,userFacingVersion:(0,dR.IA)(n.userFacingVersion),node_id:n.guid,isLocal:!0,style_type:n.styleType}:null}(e);a&&(t(a),n())}}}({onCreateVariable:c,onCreateStyle:d,onClose:u}),[y,b]=dO.tU.useTabs({createStyle:!m,createVariable:!0},{recordingKey:aw.Pt(g,"viewTabs"),defaultActive:()=>(function(e){let t=["createVariable","createStyle"];return e&&t.includes(e)?e:t[0]})(o)});return f?a.createElement(dL.bL,{onClose:u,defaultPosition:e,width:dh.iG},a.createElement(dD.vo,null,a.createElement(dD.Y9,null,a.createElement(dD.r1,null,(0,_.tx)("design_systems.create_style.title")),a.createElement(dO.tU.TabStrip,{manager:b},a.createElement(dO.tU.Tab,{...y.createStyle},(0,_.tx)("design_systems.create_style.style")),a.createElement(dO.tU.Tab,{...y.createVariable},(0,_.tx)("variables.create_modal.title")))),a.createElement(dD.nB,{noPadding:!0},a.createElement(dO.tU.TabPanel,{...y.createStyle},a.createElement(dK,{inheritStyleKeyField:n,initialStyleCreationPaint:l,recordingKey:"createStyleModal",onSubmit:E,shouldUseEyedropperStyleCreationFlow:p??!1})),a.createElement(dO.tU.TabPanel,{...y.createVariable},a.createElement(dh.Ty,{resolvedType:s,initialValue:t,recordingKey:aw.Pt(g,"createVariableForm"),onSubmit:h}))))):a.createElement(nR.vx,{title:a.createElement(dO.tU.TabStrip,{manager:b},a.createElement(dO.tU.Tab,{...y.createStyle},(0,_.tx)("design_systems.create_style.style")),a.createElement(dO.tU.Tab,{...y.createVariable},(0,_.tx)("variables.create_modal.title"))),initialPosition:e,initialWidth:dh.iG,onClose:u},a.createElement(dO.tU.TabPanel,{...y.createStyle},a.createElement(dK,{inheritStyleKeyField:n,initialStyleCreationPaint:l,recordingKey:"createStyleModal",onSubmit:E,shouldUseEyedropperStyleCreationFlow:p??!1})),a.createElement(dO.tU.TabPanel,{...y.createVariable},a.createElement(dh.Ty,{resolvedType:s,initialValue:t,recordingKey:aw.Pt(g,"createVariableForm"),onSubmit:h})))},VariableAndComponentPropCreateModalRoot:function({initialPosition:e,initialVariableValue:t,refField:n,resolvedType:r,onCreateVariable:i,onClose:l}){(0,dE.NF)({resolvedType:r});let{onCreateVariableSubmit:o,onCreateComponentPropSubmit:s}=function({onCreateVariable:e,onClose:t,resolvedType:n,refField:a}){let{onCreateVariableSubmit:r}=(0,dh.C_)({onCreateVariable:e,onClose:t}),{onCreateComponentPropSubmit:i}=function(e,t,n){let a=(0,dv.WB)(t),r=(0,dg.DD)({propType:a,refField:n});return{onCreateComponentPropSubmit:t=>{r(t.propName,t.varValue.value,t.varValue),e()}}}(t,n,a);return{onCreateVariableSubmit:r,onCreateComponentPropSubmit:i}}({onCreateVariable:i,onClose:l,resolvedType:r,refField:n});return a.createElement(dN,{initialPosition:e,initialVariableValue:t,resolvedType:r,refField:n,onCreateVariableSubmit:o,onCreateComponentPropSubmit:s,onClose:l,recordingKey:"createVariableAndComponentPropModal"})},VARIABLE_CREATE_MODAL_WIDTH_PX:dh.iG};function d4({children:e,versionHistoryEnabled:t=!0}){let n=(0,l.R)(d1),d=(0,v.n6)(),b=(0,r.wA)(),T=(0,L.TA)(),S=n.openFile?n.openFile.key:"",x=(0,P.ut)(i.Ez5?.uiState().shouldShowAutoLayoutHintsIfExist,!1),k=(0,P.ut)(i.Ez5?.uiState().autoLayoutShortcutHints,new Map),N=(0,s.Rs)(R.Jpz,{key:S}),I=!1;if(N&&"loaded"===N.status&&n.openFile){let e=N.data.file;if(e&&T){let t=e.linkAccess,a=e.team?.isStarterTeam,r=e.team?.isStudentTeam?.status==="loaded"&&(0,c.oA)(e.team?.isStudentTeam),i=!!e.roles.find(e=>e.userId===T);n.openFile.canEdit&&t===D.PQ.EDIT&&(a||r)&&!i&&(I=!0)}}let M=(0,i7.R)(),F=n.openFile?.editorType==="design",B=(0,E.l7)(),U=(0,f.HQ)(),G=(0,dX.ED)(),K=(0,o.kc)().ds_library_eye_dropper&&M,V=!n.showUi&&(0,$.TY)(n.dropdownShown),H=n.dropdownShown?.type===$.jv,z=H?n.dropdownShown?.data?.parameterEntryArgs:void 0,q=n.dropdownShown?.data?.fireQuickActionsTrackingEvent||u.lQ,Y=n.topLevelMode===i.lyf.HISTORY,X=!(0,dY.t)(),J=(0,a.useCallback)(e=>{b(y.eM({dataTransfer:e.dataTransfer,clientX:e.clientX,clientY:e.clientY}))},[b]),Z=(0,a.useCallback)(e=>{w.Y5.reparentRootElement(e),e&&e.addEventListener("drop",J)},[J]);return a.createElement(a.Fragment,null,(0,o.kc)().ee_color_management_debug?a.createElement(A,null):null,S&&a.createElement(d2,{fileKey:S}),!(m.Ay.isIpad||m.Ay.isIpadNative||m.Ay.isMobileBrowser||m.Ay.isMeetDevice)&&a.createElement(d5,null),a.createElement("div",{className:d0.MY,"data-forward-events-to-fullscreen":!0},a.createElement(nz.l.Provider,{value:d3},a.createElement(nn,null,(0,o.kc)().cursor_bot&&F&&n.hasCursorBot&&a.createElement(oO,null),!B&&!U&&!G&&a.createElement("div",{key:"fullscreen-container",ref:Z}),a.createElement(oU,null),a.createElement(tA.T,null),n.showToolbar&&a.createElement(dc,{numUnreadComments:d,selectedView:n.selectedView,recordingKey:"toolbarView"}),(0,O.T)()&&(0,o.kc)().dt_vscode_ready_for_dev&&a.createElement(h.f,{isOnReadyForDevPage:!1}),!n.fileIsLoading&&a.createElement(tw,null),V&&a.createElement(re.e,{key:"fullscreen-menu",dropdown:n.dropdownShown,recordingKey:"mainMenu"}),H&&a.createElement(p.tH,{boundaryKey:"QuickActionsOuter",onError:()=>{b(g.F.enqueue({message:"Unable to open quick actions",type:"react-error"}))},fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING},a.createElement(sc,{key:"quick-actions",parameterEntryArgs:z,fireTrackingEvent:q})),a.createElement(W,null),M&&(0,o.kc)().ce_al_experiments_on&&x&&k.size>0&&a.createElement(tM,null),e,n.showUi&&t&&Y&&!M&&a.createElement("div",{className:d0.yL},a.createElement(lw.yU,{recordingKey:"versionHistoryView"})),n.hyperlinkLocation&&a.createElement(dq,{hyperlinkLocation:n.hyperlinkLocation,editorType:n.selectedView.editorType,recordingKey:"hyperlinkEditor"}),a.createElement(tI.yq,null),n.progressBarState.mode!==i.Oin.OFF&&a.createElement(dV.z2,{editorType:(0,j.oD)(n.selectedView.editorType),progressBarMode:n.progressBarState.mode,progressBarType:n.progressBarState.type,left:0}),n.showingReconnectingModal&&a.createElement(dH.z,{clientType:"fullscreen"}),a.createElement(dQ.Nd,null),a.createElement(dQ.jx,{showStartModal:I}),n.dropdownShown&&!X&&!m.Ay.isMeetDevice&&a.createElement(p.tH,{boundaryKey:"FullscreenContextMenu",onError:()=>{b(g.F.enqueue({message:"Unable to open context menu",type:"react-error"}))},fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING},a.createElement(lC,{dropdownShown:n.dropdownShown,selectedView:n.selectedView,ariaLabelledBy:(0,_.t)("fullscreen.fullscreen_view.context_menu.aria_label")})),n.pickerShown?.id===C.C9&&a.createElement(nG,null),n.exportSettingsPickerShown.isShown&&a.createElement(a3,null),n.pickerShown?.id===oL.O&&a.createElement(oL.S,{recordingKey:"nudgeAmountPicker"}),K?a.createElement(ay,null):a.createElement(aC,null)))),a.createElement(tS,null),n.showKeyboardShortcuts&&a.createElement(ok,{recordingKey:"keyboardShortcutPanel"}))}},889085:(e,t,n)=>{n.d(t,{jx:()=>em,XI:()=>ef,qn:()=>ed,Nd:()=>eu,jS:()=>eh,RS:()=>ec,X_:()=>eE,P2:()=>e_,j6:()=>eg,Ky:()=>ep});var a=n(411855),r=n(188507),i=n(587670),l=n(737947),o=n(374626),s=n(886653),c=n(939863),d=n(964881),u=n(956143),m=n(225266),p=n(662275),_=n(138369),g=n(809831),f=n(356390),h=n(122983),E=n(29680),y=n(335682),b=n(860178),v=n(38329),C=n(988022),w=n(239671),T=n(945020),S=n(515823),x=n(797539),k=n(615018),N=n(346124),I=n(86625),A=n(707458),O=n(629019),L=n.n(O),D=n(498750),R=n(153234),M=n(259927),P=n(83909),F=n(283942),B=n(843495),U=n(848661),G=n(555074),K=n(457630),V=n(939683),H=n(32067);function z(e,t,n){let l;let{padding:o,margin:s,...c}=(0,r.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),d=(0,K._X)({subscribeToUpdates_expensive:!0}),u=d?.zoomScale||1,[m,p]=a.useState(e),[_,g]=a.useState(!0),h=a.useRef(null),E=a.useRef(null),[y,b]=a.useState(0),[v,C]=a.useState(!1),w=a.useCallback(e=>{switch(c.mode){case i.nzw.FRAME_NAME:b(Math.min(e,n*u)+7);break;case i.nzw.RESPONSIVE_SET_NAME:case i.nzw.SECTION_NAME:let t=n*u;e<t?b(e):b(t-2*s.x);break;case i.nzw.FLOW_STARTING_POINT_NAME:b(Math.min(e,n)+4);break;case i.nzw.MEASUREMENT_FREE_TEXT:b(Math.min(e,n*u)+8.5)}},[c.mode,n,u,s.x]);a.useLayoutEffect(()=>{E.current&&w(E.current.scrollWidth)},[m,w]),a.useEffect(()=>{e&&(g(!0),p(e))},[e]),a.useEffect(()=>{let e=e=>{let t=!(h.current&&h.current.contains(e.target)),n=document.querySelector('[data-resource-id="rename-selection"]'),a=e.target&&n&&n.contains(e.target);t&&!a&&i.glU.hideOnCanvasNameEditor()};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);let T=R.AF("onCanvasRename","change",e=>{p(e.target.value)}),S=R.v_("onCanvasRename","keydown",e=>{if(!v)switch(e.key){case"Escape":case"Enter":case"Tab":e.preventDefault(),g(!1),t(m),f.Y5.commit(),i.glU.hideOnCanvasNameEditor();break;case"=":case"-":(0,D.Fo)(e)&&(0,F.f7)(e,!0)}});if(!d)return null;let x={},k=(0,K.Z0)(d,{x:c.x,y:c.y},!1),I={x:k.x+d.x,y:k.y+d.y};if(c.mode===i.nzw.FLOW_STARTING_POINT_NAME&&(I.x-=32+y,I.y=Math.round(I.y)),c.mode===i.nzw.FRAME_NAME){let e=(0,N.lerp)(5,9,(d.zoomScale-.1)*5);e=(0,N.clamp)(e,5,9)-3,I.y-=e}switch(c.mode===i.nzw.RESPONSIVE_SET_NAME&&(I.x+=24),c.mode===i.nzw.MEASUREMENT_FREE_TEXT?c.invertTextPosition?x.transform=c.isCentered?`translate(calc(${I.x}px - 50%), ${I.y-24}px)`:`translate(calc(${I.x-6}px - 100%), ${I.y-9.5}px)`:x.transform=c.isCentered?`translate(calc(${I.x}px - 50%), ${I.y+7}px)`:`translate(${I.x+6}px, ${I.y-9.5}px)`:x.transform=`translate(${I.x}px, ${I.y}px) rotate(${c.angle}deg)`,c.mode){case i.nzw.FRAME_NAME:l="on_canvas_name_editor--frameNameInput--VpLPf sf_pro--uiFontWithSFProFallback--m-p9V";break;case i.nzw.FLOW_STARTING_POINT_NAME:l="on_canvas_name_editor--flowStartingPointNameInput--lLEZF";break;case i.nzw.MEASUREMENT_FREE_TEXT:l="on_canvas_name_editor--measurementFreeTextInput--gJle8 sf_pro--uiFontWithSFProFallback--m-p9V"}return{containerRef:h,measurerRef:E,containerStyle:x,inputClassname:l,editingName:m,onFocus:e=>{e.target.select(),E.current&&w(E.current.scrollWidth)},onChange:T,onKeyDown:S,onBlur:e=>{_&&(t(e.target.value),f.Y5.commit(),e.relatedTarget&&"focus-target"===e.relatedTarget.className&&i.glU.hideOnCanvasNameEditor())},width:y,setIsComposing:C}}function W(e){let t=z(e.name,e.setName,e.maxWidth);if(!t)return null;let{containerRef:n,measurerRef:r,containerStyle:i,editingName:l,onFocus:o,onChange:s,onKeyDown:c,onBlur:d,width:u,setIsComposing:m,inputClassname:p}=t;return a.createElement("div",{ref:n,className:L()(e.containerClassname,M.Dm,"on_canvas_name_editor--containerOnLight--6zUKs"),style:i},a.createElement("span",{ref:r,className:"on_canvas_name_editor--measurer--KTnSp"},l),a.createElement("input",{autoFocus:!0,dir:"auto",className:p,style:{width:`${u}px`},value:l,onFocus:o,onChange:s,onKeyDown:c,onBlur:d,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,onCompositionEnd:()=>m(!1),onCompositionStart:()=>m(!0)}))}function j(){let e=(0,r.d4)(e=>e.mirror.selectionProperties.name),t=(0,r.d4)(e=>e.mirror.selectionProperties.width),n=(0,H.JA)();return e&&t&&n?a.createElement(W,{name:e,setName:t=>{e&&(P.wt.reportEditActionIf(e!==t,"rename-frame"),I.l7.user("rename-frame",()=>B.i(n,t)))},maxWidth:t}):null}function $(){let[e,t]=(0,G.lJ)("prototypeStartingPoint"),n=U.E7(e)?.name||"";return n?a.createElement(W,{name:n,setName:n=>{n&&t({name:n,description:U.E7(e)?.description||"",position:U.E7(e)?.position||""})},maxWidth:93,containerClassname:"on_canvas_name_editor--flowStartingPointNameContainer--JdVwd"}):null}function q(){let{measurementId:e,initMeasurementText:t}=(0,r.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),n=(0,r.d4)(e=>e.mirror.appModel.currentPage),l=a.useMemo(()=>i.w3z.findMeasurement(e,n),[e,n]),o=a.useRef(!l?.freeText),s=function(){let e=(0,V.U)();return a.useCallback((t,n,a)=>{let r=t.findContainingTopLevelFrameOrSelf(),i=t.containingCanvas,l={measurement_id:n.id,from_node_id:n.fromNode,to_node_id:1===n.toNode.length?n.toNode[0].toString():n.toNode.toString(),node_type:t.type};r&&(l.tlf_id=r),i&&(l.page_id=i),l.free_text=a,e("update_annotation_measurement_free_text",l)},[e])}();return l?a.createElement(W,{name:t,setName:e=>{let n=A.q.instance.get(l.fromNode);if(n){if(o&&e===t)return;I.l7.user("free-text-annotation-measurement",()=>{n.updateMeasurementFreeText(l.id,e),s(n,l,e)})}},maxWidth:150}):null}function Y(){let e=(0,r.d4)(e=>e.mirror.selectionProperties.name),t=(0,r.d4)(e=>e.mirror.selectionProperties.width);return null!=e&&t?a.createElement(X,{name:e,setNameWithNodeId:(t,n)=>{P.wt.reportEditActionIf(e!==n,"rename-section"),I.l7.user("rename-section",()=>B.i(t,n?n.trim():""))},maxWidth:t}):null}function X(e){let{name:t,setNameWithNodeId:n,maxWidth:l}=e,o=(0,H.uQ)(),s=z(t,e=>{o&&n(o,e)},l),c=(0,r.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===i.m1T.DESIGN_LAYOUT),{fontSize:d,top:u,left:m,height:p,horizontalPadding:_,verticalPadding:g,borderRadius:f}=function(e,t,n){let{fontSize:a,padding:l,margin:o,cornerRadius:s}=(0,r.d4)(e=>e.mirror.appModel.onCanvasNameEditorInfo),c=i.qmM.editorTypeConfig().showBigSectionNamePills(),d=l.x,u=l.y,m=c?24:2*l.y+a,p=0,_=-o.y-m,g=i.qmM.editorTypeConfig().sectionNestedZoomLevel();return(!e||t<=g)&&(p=o.x,_=o.y),{fontSize:a,height:m,top:_,left:p,horizontalPadding:d,verticalPadding:u,borderRadius:s}}((0,r.d4)(e=>{if(null===o)return!1;let t=e.mirror.sceneGraph.get(o),n=e.mirror.appModel.currentPage,a=!!t?.isResponsiveSet;return t&&("SECTION"===t.type||a)&&t.parentGuid===n}),Math.round(100*(0,K._X)({subscribeToUpdates_expensive:!0}).zoomScale),0);if(!s||!o)return null;let{containerRef:h,measurerRef:E,containerStyle:y,editingName:b,onFocus:v,onChange:C,onKeyDown:w,onBlur:T,width:S,setIsComposing:x}=s,k=c?"normal":500;return a.createElement("div",{ref:h,className:`on_canvas_name_editor--sectionNameContainer--D8aez ${M.Dm}`,style:y},a.createElement("span",{ref:E,className:"on_canvas_name_editor--sectionMeasurer--kfBij",style:{fontSize:d,fontWeight:k,paddingLeft:_,paddingRight:_,paddingTop:g,paddingBottom:g}},b),a.createElement("input",{autoFocus:!0,dir:"auto",className:"on_canvas_name_editor--sectionNameInput--MgIUi",style:{width:`${S}px`,fontSize:d,fontWeight:k,left:m,top:u,height:p,borderRadius:f,paddingLeft:_,paddingRight:_,paddingTop:g,paddingBottom:g},value:b,onFocus:v,onChange:C,onKeyDown:w,onBlur:T,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,onCompositionEnd:()=>x(!1),onCompositionStart:()=>x(!0)}))}var J=n(164995),Z=n(102930),Q=n(55069),ee=n(776250),et=n(672517),en=n(520425),ea=n(488578),er=n(373494);function ei(e){let t=(0,b.iZ)();return a.createElement(et.fu,{name:"Starter team edit confirmation modal",properties:{userId:t?.id,userEmail:t?.email}},a.createElement(ea.Rw,{confirmationTitle:(0,c.t)("fullscreen.starter_team_edit_modal.open_this_link"),confirmText:"Continue",onConfirm:()=>{(0,ee.sx)("Starter File Edit Modal Confirm Clicked",{fileKey:e.fileKey}),en.L.createStarterTeamFileRole({key:e.fileKey})},disableClickOutsideToHide:!0,hideOnConfirm:!1,size:"small",hideCancel:!1,hideClose:!0,onCancel:()=>{(0,ee.sx)("Starter File Edit Modal Cancel Clicked",{fileKey:e.fileKey}),l.Ay.redirect("/files/recents-and-sharing")}},a.createElement("div",{className:er.jE},(0,c.tx)("fullscreen.starter_team_edit_modal.when_you_open_this_link_your_email_may_be_visible",{email:t?.email}))))}var el=n(860601);let eo=(0,n(237870).Ju)(function(e){return a.createElement(ea.Nb,{size:"small",className:er.yl,disableClickOutsideToHide:!0,hide:el.lQ},a.createElement("div",{className:er.DD},(0,c.tx)("file_migration.updating.title")),a.createElement("div",{className:er.jE},(0,c.tx)("file_migration.updating.message")))},"FileMigrationWarningModal");function es(){return(0,r.d4)(e=>e.progressBarState)}let ec=(0,s.xx)((e,t,n)=>{e(m.gI()),e(u.mV({}))});function ed(){switch((0,E.p8)("onCanvasNameEditorInfo").mode){case i.nzw.FRAME_NAME:return a.createElement(j,null);case i.nzw.FLOW_STARTING_POINT_NAME:return a.createElement($,null);case i.nzw.SECTION_NAME:return a.createElement(Y,null);case i.nzw.MEASUREMENT_FREE_TEXT:return a.createElement(q,null);case i.nzw.RESPONSIVE_SET_NAME:return a.createElement(Y,null);default:return null}}function eu(){let e=es(),t=(0,r.d4)(e=>e.showingOpenDesktopAppModal),n=(0,r.wA)();if(e.mode!==i.Oin.OFF)return a.createElement(a.Fragment,null);switch(t){case T.kF.FOR_OPEN:return a.createElement(Z.g,{dispatch:n});case T.kF.FOR_MENU:return a.createElement(J.s,{dispatch:n})}return a.createElement(a.Fragment,null)}function em(e){let t=(0,y.q5)(),n=(0,b.iZ)();return e.showStartModal&&n&&t&&t.key?a.createElement(ei,{fileKey:t.key}):a.createElement(a.Fragment,null)}function ep(){let e=(0,a.useRef)(null),t=(0,a.useRef)(!1),n=es(),l=(0,r.wA)(),o=(0,r.d4)(e=>e.needsUpgrade),s=(0,a.useCallback)(()=>{null!==e.current&&(clearTimeout(e.current),e.current=null)},[e]),c=(0,a.useCallback)(()=>{s(),e.current=setTimeout(()=>{t.current=!0,o&&n.mode!==i.Oin.OFF&&l((0,p.to)({type:eo}))},2e4)},[o,n,l,s]),d=(0,a.useCallback)(()=>{t.current&&l(p.Ce()),t.current=!1,s()},[t,s,l]);(0,a.useEffect)(()=>(f.Y5.fromFullscreen.on("multiplayerConnect",c),f.Y5.fromFullscreen.on("multiplayerDisconnect",s),f.Y5.fromFullscreen.on("multiplayerGotSchema",d),()=>{f.Y5.fromFullscreen.removeListener("multiplayerConnect",c),f.Y5.fromFullscreen.removeListener("multiplayerDisconnect",s),f.Y5.fromFullscreen.removeListener("multiplayerGotSchema",d),s()}),[s,c,d])}function e_(e,t,n){!t.current&&function(e,t){if(t===i.NLJ.VECTOR_PENCIL||t===i.NLJ.ERASER||t===i.NLJ.HIGHLIGHTER){var n;return n="figjam",(0,C.uE)("Pointer Input",v.D.getState(),{inputSource:e.pointerType,tool:function(e){switch(e){case i.NLJ.VECTOR_PENCIL:return"VECTOR_PENCIL";case i.NLJ.ERASER:return"ERASER";case i.NLJ.HIGHLIGHTER:return"HIGHLIGHTER"}}(t),productType:n}),!0}return!1}(e,n)&&(t.current=!0)}function eg(e,t){t.current||(t.current=!0)}function ef({commentsDetailContainerRef:e}){let t=(0,E.p8)("topLevelMode")===i.lyf.HISTORY,n=(0,y.q5)(),l=(0,r.d4)(e=>e.user),o=(0,E.p8)("currentPage"),s=(0,r.d4)(e=>e.comments),c=(0,d.l7)(),u=(0,g.my)()===w.nT.Design,m=(0,_.Kf)({isDesign:u,isUnauth:!l}),p=n&&!t&&!c&&(l||m()),f=s.activeThread?.id||null,h=s.showOnlyParticipating,b=s.showResolved;return a.createElement(a.Fragment,null,a.createElement(Q.Ay,null),p&&a.createElement(x.$2,{showOnlyParticipatingComments:h,showResolvedComments:b,pageId:o,activeId:f,renderDetailContainerInPortal:!0,detailContainerPortal:e.current}),a.createElement(k.yL,null))}function eh(){i.h3O?.detach();let e=document.getElementById("fullscreen-root");e?.remove()}function eE(e,t){let{openFile:n,wasInWorkshop:a,previousCanEdit:r,previousCanView:i,wasInUnclaimedTryFile:s,previousFileKey:d}=e;if(null==n){a||(eh(),o.zl.get(S._)||(0,h.A7)((0,c.t)("404.file_no_access.title"),t));return}let u=s&&!n.isTryFile;if((null!==r&&n.canEdit!==r||null!==i&&n.canView!==i)&&!u&&n.key===d){let e=new URLSearchParams(l.Ay.location.search);e.set("perms-refresh","1"),l.Ay.replace(`${l.Ay.location.pathname}?${e.toString()}`,l.Ay.location.state),l.Ay.reload("file access changed")}}},606319:(e,t,n)=>{n.d(t,{v:()=>M});var a=n(411855),r=n(188507),i=n(587670),l=n(629019),o=n.n(l),s=n(448169),c=n(692609),d=n(441088),u=n(335682),m=n(694687),p=n(100197),_=n(757782),g=n(776250),f=n(38329),h=n(966712),E=n(646240),y=n(915440),b=n(742808),v=n(727749),C=n(293017),w=n(650769),T=n(198371),S=n(756085),x=n(788744),k=n(315329),N=n(279453),I=n(889085);function A(){return(0,k.o)(),a.createElement(a.Fragment,null)}function O(e){let t=(0,r.wA)(),n=(0,r.d4)(e=>e.showEditButton),l=(0,r.d4)(e=>e.fileByKey),o=(0,r.d4)(e=>e.userAnalyticsData),s=(0,r.d4)(e=>e.user),c=(0,u.q5)(),d=null!=c,m=c?.canEdit,{fileKey:p,orgId:_}=e,O=null!=p&&!!l[p]?.is_favorited,L=(0,y.Rs)(N.jJU,{fileKey:p||""},{enabled:!!p});a.useEffect(()=>{if("loaded"===L.status){let e=L.data.file?.developerRelatedLinks,t=e?.reduce((e,t)=>{let n=e.get(t.nodeId)??[];return n.push(t),e.set(t.nodeId,n),e},new Map);if(t)try{i.glU.setDeveloperRelatedLinks(t)}catch{}}},[L]);let D=a.useRef(!1),R=(0,E.Xr)(T.Kc),M=(0,y.Rs)(N.JKh,{fileKey:p||""},{enabled:!!p});a.useLayoutEffect(()=>{if("loaded"!==M.status)return;let e=M.data.figFileWorkshopMode;R(e?e.expiresAt:null),e&&e.expiresAt>new Date&&(D.current=!0),t(w.lX(e?{id:e.id,until:e.expiresAt,loaded:!0}:{loaded:!0}))},[M,t,R]);let P=a.useRef(null),F=a.useRef(!1),B=a.useRef(null),U=a.useRef(null),G=(0,y.Rs)(N.ehp,{fileKey:p||""},{enabled:!!p});a.useLayoutEffect(()=>{if("loaded"!==G.status||G.errors.length>0&&null===G.data.file)return;let e=G.data.file;if(null===P.current){let t=(0,h.Ay)().editing_file;null!==e&&t&&e.key===t.key&&!!t.can_edit!==e.canEdit&&((0,g.sx)("open_file_inconsistent_permission",{file_key:e.key,lg_can_edit:e.canEdit,sinatra_can_edit:t.can_edit,user:f.D.getState().user?.id},{batchRequest:!0}),(0,b.Rh)("open_file.inconsistent_permissions",{lg_can_edit:e.canEdit,sinatra_can_edit:t.can_edit}))}if((0,I.X_)({openFile:e,wasInWorkshop:D.current,previousCanEdit:P.current,wasInUnclaimedTryFile:F.current,previousCanView:U.current,previousFileKey:B.current?.key||null},t),null==e)return;U.current=e.canView,P.current=e.canEdit,D.current&&e.isTryFile&&(F.current=!0);let a=f.D.getState().selectedView;"fullscreen"===a.view&&a.fileKey===e?.key&&B.current!==e&&(t(C.UC({openFile:{...e,showEditButton:n,isFavorited:O}})),B.current=e)},[G,t,n,O,d]);let K=(0,S.Be)();return a.useLayoutEffect(()=>{let e=f.D.getState().selectedView;if(!K.loaded||"fullscreen"!==e.view)return;let{plugins:n,widgets:a,orgPlugins:r,orgWidgets:i}=K,l={...n,...r},o={...a,...i};t(v.g3(l)),t(v.zI(o))},[t,_,K]),(0,x.rB)(),m&&(0,k.n)(o,s?.email)?a.createElement(A,null):a.createElement(a.Fragment,null)}var L=n(354235),D=n(109176);function R(){return(0,c.co)(),null}function M({children:e,setShouldShowDragAndDropBorder:t,onPointerDown:n=I.j6,isDragTarget:l=!1}){let c=(0,r.d4)(e=>e.modalShown),g=(0,d.T)(),f=(0,p.ut)(i.Ez5?.devHandoffState()?.focusMode,!1),h=(0,u.q5)(),E=h?h.key:"",y=(0,m.dq)(),b=a.useRef(!1);return a.createElement(L.d,null,a.createElement(s.Y,{isDragTarget:()=>l,onTargetDragEnter:()=>{t(!0)},onTargetDragLeave:()=>{t(!1)},onTargetDrop:()=>{t(!1)},style:{flex:"1 1 auto"}},a.createElement("div",{"aria-hidden":!!c,className:o()(D.lA,g&&f&&D.$J),onPointerDown:e=>{n(e,b)}},a.createElement(O,{fileKey:E||null,orgId:y}),e,a.createElement(_.G,null),a.createElement(R,null))))}},563814:(e,t,n)=>{n.d(t,{O:()=>m});var a=n(411855),r=n(188507),i=n(203264),l=n(626217),o=n(143922),s=n(598393),c=n(29680),d=n(286723),u=n(118335);function m(){let e=(0,r.wA)(),t=(0,c.aV)(),n=(0,r.d4)(e=>e.selectedView.compareChangesVersionId),m=(0,r.d4)(e=>e.selectedView.compareChangesActivityId),p=(0,s.VI)(),_=(0,r.d4)(e=>e.selectedView?.view==="fullscreen"&&e.selectedView.compareChangesNodeId||null),g=(0,s.WL)(_)??p,f=(0,i.ei)(g?.id),h=(0,l.i)(g),{versions:E,versionsQueryLoaded:y}=(0,d.DS)(g?.id),b=!y||0===E.length||!f,v=(0,r.d4)(e=>e.modalShown?.type===u.EH.type),C=(0,o.dU)(g?.id??null,"cc_version_id_url");a.useEffect(()=>{(n||m)&&!t&&y&&!v&&(h&&!b?C():(0,u.L$)(void 0,e,!1,null))},[n,m,e,t,v,b,h,C,y])}},665194:(e,t,n)=>{n.d(t,{h5:()=>g,hs:()=>f,mb:()=>_,sv:()=>h});var a=n(634832),r=n(966712),i=n(226055),l=n(177505),o=n(335682),s=n(694687),c=n(187882),d=n(733378);let u=/^Page \d+$/;var m=(e=>(e.FILE_LOADING="fileLoading",e.K_12="k12",e.FLAG="flag",e.READ_ONLY="readOnly",e.PERSONAL_DRAFT="personalDraft",e))(m||{});function p(){let e=(0,o.q5)(),t=(0,c.cT)(),n=(0,s.sZ)();if(!e)return"fileLoading";if(!(0,r.kc)().figjam_pages_for_education){let t=!!n?.k12_google_org,a=!!e.team?.studentTeamAt;if(t||a)return"k12"}return(0,r.kc)().figjam_pages_creation?t?"readOnly":(0,d.Qy)(e)?"personalDraft":null:"flag"}var _=(e=>(e.ADD_PAGE="addPage",e.VIEW_PAGES="viewPages",e))(_||{});function g({nonDividerPageCount:e,isDropdownOpen:t}){let n=p(),r=(0,l.nn)(),o=(0,i.GS)(),s=r&&!u.exec(r);if("fileLoading"===n)return null;if(e>1||s||t&&!o)return"viewPages";switch(n){case null:return"addPage";case"flag":case"readOnly":case"personalDraft":return"viewPages";case"k12":return null;default:(0,a.assertNever)(n)}}function f(){return null===p()}function h(){return null===p()}},318567:(e,t,n)=>{n.d(t,{m:()=>y});var a=n(411855),r=n(188507),i=n(776250),l=n(153234),o=n(939863),s=n(138369),c=n(617524),d=n(809831),u=n(369870),m=n(318812),p=n(860178),_=n(239671),g=n(855466),f=n(377020),h=n(267850),E=n(860142);function y(e){let t=(0,r.wA)(),n=(0,m.Um)(),y=n?.type===f.eg,b=(0,r.d4)(e=>e.isRenaming),v=(0,p.iZ)(),C=(0,d.my)()===_.nT.Design,w=(0,s.Kf)({isDesign:C,isUnauth:!v}),T=(0,c.EO)();return b?null:a.createElement("div",null,a.createElement(g.c,{className:"file_menu--chevron--55jNJ",isUI3:!0,dropdownKey:f.eg,showingDropdown:y,tabIndex:0,ariaLabel:(0,o.t)("fullscreen.filename_view.edit_file_menu"),dataTestId:"filename-menu-chevron",recordingKey:l.Pt(e.recordingKey,"chevron"),dataOnboardingKey:f.O0,dispatch:t,toggleOnClick:!0,inLoggedOutDesktopRevampExp:w,showAuthModalForLoggedOutExp:()=>T("LEFT_PANEL_FILE_NAME_CHEVRON")}),(0,u.MP)()&&a.createElement(E.e,{isUI3:!0,targetKey:f.O0}),a.createElement(h.G,{dropdownTargetRect:n?.data?.targetRect,dispatch:t,dropdownVisible:y,recordingKey:e.recordingKey,activatePathOnMount:n?.data?.activatePathOnMount,trackEvent:i.sx}))}},135726:(e,t,n)=>{n.d(t,{n:()=>h});var a=n(411855),r=n(188507),i=n(697322),l=n(629019),o=n.n(l),s=n(388809),c=n(153234),d=n(857766),u=n(52570),m=n(335682),p=n(860178),_=n(377020),g=n(733378);let f="filename_view--renaming--cVUNf";function h(e){let t=(0,p.iZ)(),n=(0,m.q5)(),l=n?.repo,h=!!(n&&l&&(0,d.Ns)(n,l)),E=!!(n&&(0,d.Kz)(n)),y=!!n&&(0,g.DF)(n,t),b=(0,r.d4)(e=>e.isRenaming),v=(0,r.d4)(e=>e.mergingStatus),C=(0,r.d4)(e=>e.openFileMerge),w=(0,r.d4)(e=>e.mirror.appModel.topLevelMode),T=(0,r.d4)(e=>e.modalShown),S=(0,r.wA)();return a.createElement("div",{className:o()("filename_view--filenameView--b0c-Y",{[f]:b})},E&&a.createElement("span",{className:o()("filename_view--branchIcon--0Svod",{[f]:b})},a.createElement(i.L,null)),a.createElement("span",{className:o()("filename_view--filenameText--YXXQf",{[f]:b})},h&&l?a.createElement(_.IS,{dispatch:S,user:t,repo:l,canRename:y,isRenaming:b,dataTestId:"repo_name_data_test_id"}):a.createElement(_.o3,{recordingKey:c.Pt(e.recordingKey,"fileName")})),n?.fileRepoId&&t?.id&&a.createElement(a.Fragment,null,a.createElement(s.aY,{openFile:n,modalShown:T,topLevelMode:w,dispatch:S}),a.createElement(u.jQ,{repoId:n.fileRepoId,openFileKey:n.key,currentUserId:t.id,appMergingStatus:v,openFileMerge:C})))}},936486:(e,t,n)=>{n.d(t,{d:()=>I});var a=n(411855),r=n(964881),i=n(335682),l=n(381915),o=n(629019),s=n.n(o),c=n(860178),d=n(848761),u=n(377020),m=n(318567),p=n(135726),_=n(188507),g=n(75395),f=n(939863),h=n(199590),E=n(857766),y=n(143678),b=n(590843),v=n(476005);function C(){let e=(0,i.q5)(),t=e?.repo,n=!!(t&&(0,E.Ns)(e,t)),r=!!(e&&(0,E.Kz)(e)),l=(0,_.wA)();return r&&t?a.createElement(v.o,{repo:t,dispatch:l,trackingContextName:y.e0.EDITOR_TOOLBAR_ACTION}):n&&e.fileRepoId?a.createElement(w,null):null}function w(){let e=(0,_.wA)(),t=a.useContext(b.X);return null===t||t<1?null:a.createElement(g.E,{className:"repo_info--button--3ej13",onClick:()=>e(h.o5({trackingContextName:y.e0.EDITOR_TOOLBAR_ACTION}))},(0,f.tx)("fullscreen.filename_view.branch-count",{BRANCHES:t}))}function T({shouldUseBottomBorder:e,children:t,withSmallPaddingRight:n}){return a.createElement("div",{className:s()("left_panel_header_components--container--i23pm",{"left_panel_header_components--withBottomBorder--OQzj-":e,"left_panel_header_components--withSmallPaddingRight--BOLxn":n})},t)}function S({shouldShowFileMenu:e=!0,recordingKey:t}){return a.createElement(N,null,a.createElement(p.n,{recordingKey:t}),e&&a.createElement(m.m,{recordingKey:t}))}function x(){return a.createElement(N,{shouldCorrectForHoverPadding:!0},a.createElement(C,null))}function k({openFile:e}){let t=(0,c.iZ)();return a.createElement(N,{shouldCorrectForHoverPadding:!0},a.createElement(u.ur,{openFile:e,user:t}),a.createElement(d.s,{openFile:e}))}function N({shouldCorrectForHoverPadding:e=!1,children:t}){return a.createElement("div",{className:s()("left_panel_header_components--row--5uMsb",{"left_panel_header_components--withHoverPaddingCorrection--V3VUA":e})},t)}function I({shouldUseBottomBorder:e}){let t=(0,i.q5)(),n=(0,r.l7)();return t&&t.key&&t.name?a.createElement(T,{shouldUseBottomBorder:!!e},a.createElement(S,{shouldShowFileMenu:!n,recordingKey:"leftPanelHeader"}),a.createElement(x,null),a.createElement(k,{openFile:t})):a.createElement(T,{shouldUseBottomBorder:!!e},a.createElement(l.cQ,null))}},107190:(e,t,n)=>{function a(){return null}n.d(t,{E:()=>a}),n(411855),n(45623),n(901536),n(488983),n(498606)},145479:(e,t,n)=>{n.d(t,{J:()=>u});var a=n(411855),r=n(811027),i=n(587670),l=n(939683),o=n(929274),s=n(939863),c=n(100197),d=n(498606);function u(){let e=(0,c.ut)(i.Ez5?.uiState().showMissingFontsButton,!1),t=(0,l.U)();return e?a.createElement(o.J,{onClick:()=>{t("missing_fonts_button_clicked"),i.glU.findMissingFontsAndShowPopover()},recordingKey:"toolbarView.missingFontsButton","aria-label":(0,s.t)("fullscreen.toolbar.missing_fonts"),htmlAttributes:{"data-tooltip":(0,s.t)("fullscreen.toolbar.missing_fonts"),"data-tooltip-type":d.Ib.TEXT}},a.createElement(r.z,null)):null}},865636:(e,t,n)=>{n.d(t,{E:()=>r});var a=n(411855);function r(e,t){let[n,r]=(0,a.useState)(null);return(0,a.useLayoutEffect)(()=>{if(!e||!e.current||!t)return;r(e.current.getBoundingClientRect().width);let n=new ResizeObserver(e=>{e.forEach(e=>{let t=e.borderBoxSize?.[0];r(t?t.inlineSize:e.contentRect.width)})});return n.observe(e.current),()=>n.disconnect()},[e,t]),n}},876743:(e,t,n)=>{n.d(t,{Q:()=>u});var a=n(411855),r=n(629019),i=n.n(r),l=n(818),o=n(617453),s=n(213190),c=n(100197),d=n(187882);let u=a.forwardRef(({shouldAnimate:e=!0,ignoreRulers:t,children:n},r)=>{let u=(0,c.J2)((0,o.UK)().renderRulers),m=(0,l.b)(),p=(0,d.Ye)(),_=(0,s.Tn)();return a.createElement("div",{ref:r,className:i()("left_panel_positioner--leftPanelPositioner--8Yehe",{"left_panel_positioner--withShowingRulers--xB1lD":u&&!t,"left_panel_positioner--withAnimation--pFRuR":e&&!_,"left_panel_positioner--withInsetEditorEnabled--GYcUX":m&&!p})},n)})},319008:(e,t,n)=>{n.d(t,{Nz:()=>el,Qe:()=>es,X5:()=>ed,hH:()=>j});var a=n(411855),r=n(188507),i=n(634832),l=n(243742),o=n(587670),s=n(629019),c=n.n(s),d=n(323434),u=n(134288),m=n(776250),p=n(344780),_=n(358145),g=n(966712),f=n(374626),h=n(563706),E=n(99380),y=n(438741),b=n(489604),v=n(554322),C=n(572206),w=n(153808),T=n(939863),S=n(463304),x=n(457630),k=n(29680),N=n(335682),I=n(754209),A=n(78933),O=n(611978),L=n(247014),D=n(951840),R=n(407844),M=n(666258),P=n(168289),F=n(396021),B=n(270296),U=n(746806),G=n(857063),K=n(214090),V=n(712053),H=n(538975),z=n(371536),W=n(78422);let j=5;var $=(e=>(e[e.Default=0]="Default",e[e.Mobile=1]="Mobile",e[e.Prototype=2]="Prototype",e[e.Slide=3]="Slide",e))($||{});let q=(e,t)=>{let n=(0,x.ni)(),r=(0,v.Av)(),o=(0,R._)(),s=(0,k.p8)("showUi"),c=(0,O._6)(),d="prototype"===c.view&&"slides"===c.file.editor_type,u=function({isUI3:e,prototypeHeaderHidden:t,showUi:n,style:a,toolbarHeight:r,editorBannerHeight:l}){let o=0;if(e)o=0;else switch(a){case 3:case 0:case 1:o=n?r:0;break;case 2:o=t?0:r;break;default:(0,i.assertNever)(a)}return 0!==l&&(o+=l),o}({isUI3:"ui3"===(0,l.DP)().version&&!d,prototypeHeaderHidden:t,showUi:s,style:e,toolbarHeight:r,editorBannerHeight:o});return a.useMemo(()=>({left:n.x,top:u,width:n.width}),[n,u])};function Y(e){let t;let n=(0,x.ni)(),r=(0,R._)(),i=n.y+r;switch(e){case 1:t=4;break;case 2:t=i;break;case 3:t=0;break;case 0:t=2*j}return a.useMemo(()=>({left:n.x,top:i,width:n.width-(0===e?2*j:0),height:n.height-r-t}),[n,e,i,t,r])}let X=(e,t)=>{let n;let r=Y(t),i=0;switch(t){case 0:n={borderWidth:j},i=j;break;case 1:n={borderTopWidth:4},i=4;break;case 3:n={borderWidth:j,borderRadius:"0.8rem",boxSizing:"border-box"},i=j;break;case 2:n={}}return a.useMemo(()=>({style:{...r,...n,"--multiplayerBorderColor":e,borderStyle:"solid","--multiplayerBorderWidth":`${i}px`},borderInfo:{width:i,color:e}}),[e,r,n,i])};function J(e){let{children:t,prototypeHeaderHidden:n}=e,r=(0,O.z3)(),i=0;"prototype"===r?i=2:h.Xb&&(i=1);let l=q(i,n||!1),o=2===i?W.Y$:void 0,s=2===i&&n?W.Fd:void 0;return a.createElement("div",{className:c()(W.GE,o,s),style:l,"data-testid":"multiplayer-bell-container"},t)}function Z(){let{style:e,borderInfo:t}=a.useContext(V.h);return e={...e,borderColor:t.color},a.createElement("div",{"data-testid":"viewport-frame",className:c()(W.KM),style:e})}function Q(){let{style:e,borderInfo:t}=a.useContext(V.h);return e={...e,color:"brand"===t.color?"var(--color-bg-brand)":t.color,"--borderColorTransitionDurationSeconds":`${z.Bn}s`},a.createElement("div",{className:W.KM,style:e})}function ee(e){let{children:t,colorOverride:n,overlayStatus:r}=e,i=(0,I.$0)(),l=(0,I.dR)(),o=(0,I.Ww)(),s=(0,O._6)(),c=0;"prototype"===s.view?c=s.isPresenterView?3:2:h.Xb&&(c=1);let d=X((()=>{if(n)return n;if(!r)return l&&o?.sessionID===l?.sessionID?o?.color??"transparent":i?.color??"transparent";{let{self:e,others:t}=r;return"none"!==e?"recording"===e?"var(--ramp-red-600)":"brand":"following"===t&&"none"===e?i?.color??"transparent":"transparent"}})(),c);return a.createElement(V.h.Provider,{value:d},t)}var et=(e=>(e.PRESENTING="presenting",e.PROMPT_TO_ACCEPT_NOMINATION="prompt_to_accept_nomination",e.SHOWING_EXPLAINER="showing_explainer",e.PREPARING_TO_RECORD="preparing_to_record",e.RECORDING="recording",e.NONE="none",e))(et||{}),en=(e=>(e.PENDING_AUTO_FOLLOW="pending_auto_follow",e.FOLLOWING="following",e.PROMPT_TO_REJOIN="prompt_to_rejoin",e.NONE="none",e))(en||{});function ea(){return"prototype"!==(0,O.z3)()}function er(e,t,n,r){let i=(0,_.ZC)(e),l=(0,_.ZC)(t),o=a.useRef(performance.now());return a.useEffect(()=>{if("presenting"===e){let e=p.sn.tryStop("start_spotlight");e&&((0,m.sx)("start_spotlight",{elapsedMs:e},{forwardToDatadog:!0}),(0,g.kc)().workspace_activity_write&&n&&n.team&&n.team.workspaceId&&D.i.recordActivity({activityUnitType:L.qj.FILE_COLLABORATION,fileKey:n.key,collaborationType:L.Uz.SPOTLIGHT_STARTED,numPeopleInFile:r.current}))}else if("pending_auto_follow"===t){let e=p.sn.tryStop("join_spotlight");e&&(0,m.sx)("join_spotlight",{elapsedMs:e},{forwardToDatadog:!0})}else if("following"===t){let e=p.sn.tryStop("start_following");e&&(0,m.sx)("start_following",{elapsedMs:e},{forwardToDatadog:!0})}},[e,t,n,r]),(e!==i||t!==l)&&(o.current=performance.now()),{statusChangedAt:o.current}}function ei(e){let{multiplayer:t,prototypeHeaderHidden:n}=e,r=(0,I.Ww)(),l=(0,I.dR)(),s=(0,I.$0)(),c=(0,I.y)(),m=(0,N.q5)(),p=(0,A.T)(),_=(0,y.y7)(),g=(0,y.oJ)(),h=(0,y.$)(),v=a.useContext(E.q5),[x,k]=a.useState(!1);a.useEffect(()=>{k(!1)},[l?.sessionID]),a.useEffect(()=>{s?.sessionID===l?.sessionID&&k(!1)},[s?.sessionID,l?.sessionID]);let{isAutoFollowPending:L,cancelAutoFollowCallback:D,completeAutoFollowCallback:R,observeCurrentPresenter:M,autoFollowType:P,autoFollowDelayMs:F}=(0,I.oW)(e),{isWaitingForFirstFollower:B,stopPresenting:V}=function(e){let[t,n]=a.useState(!1),r=e.followerCount,[i,l]=(0,f.fp)(b.Dv);0===r||t||n(!0);let s=(0,y.jA)(e)||i;(0,y.jA)(e)&&i&&l(!1),!s&&t&&n(!1);let c=s&&0===r&&!t,d=(0,A.T)(),u=(0,O.z3)(),m=a.useCallback(()=>{d(A.N.STOP),"prototype"===u?w.hk()?.stopPresenting():o.h3O.stopPresenting()},[d,u]),p=a.useCallback(()=>!!c&&(m(),!0),[m,c]);return(0,S.O1)(p,S.KD.MULTIPLAYER_SPOTLIGHT),{isWaitingForFirstFollower:c,stopPresenting:m}}(t),j=function(e){let{multiplayer:t,showingExplainer:n,isPendingPresenting:a,recorder:r}=e;return r.isRecording?"recording":r.mediaStream?"preparing_to_record":(0,y.jA)(t)||a?"presenting":n?"showing_explainer":(0,y.NB)(t)?"prompt_to_accept_nomination":"none"}({multiplayer:t,showingExplainer:(0,f.md)(b.ah),isPendingPresenting:(0,f.md)(b.Dv),recorder:v}),$=function(e){let{multiplayer:t,isAutoFollowPending:n,presenterUser:a,suppressRejoinPrompt:r}=e;return n?"pending_auto_follow":(0,y.L3)(t)?"following":a&&!r?"prompt_to_rejoin":"none"}({multiplayer:t,isAutoFollowPending:L,presenterUser:l,suppressRejoinPrompt:x}),q=a.useRef(t.allUsers.length);q.current=t.allUsers.length;let{statusChangedAt:Y}=er(j,$,m,q),[X,Z]=function(e,t){switch(e){case"presenting":if("following"===t||"prompt_to_rejoin"===t)return[e,"none"];return[e,t];case"prompt_to_accept_nomination":if("pending_auto_follow"===t)return["none",t];return[e,"none"];case"showing_explainer":case"none":return[e,t];case"preparing_to_record":case"recording":return[e,"none"];default:(0,i.assertNever)(e)}}(j,$),et=a.useCallback(()=>{k(!0),D(),p(A.N.IGNORE)},[D,p]),en=P===I.D_.INITIAL,ei=a.useCallback(()=>"pending_auto_follow"===Z&&!!L&&P===I.D_.INITIAL&&(D(),!0),[P,D,L,Z]);(0,S.O1)(ei,S.KD.MULTIPLAYER_SPOTLIGHT);let el=ea(),eo="showing_explainer"===X,es="none"!==X,ec="none"!==Z,ed=a.useRef(null);a.useEffect(()=>{"preparing_to_record"===X&&v.mediaStream&&ed.current&&(ed.current.srcObject=v.mediaStream)},[X,v.mediaStream]);let eu=["presenting","prompt_to_accept_nomination","showing_explainer","preparing_to_record","recording"].includes(X)||["following"].includes(Z),[em,ep]=(0,f.fp)(b.uc);return eu!==em&&ep(eu),a.createElement(ee,{overlayStatus:{self:X,others:Z}},a.createElement(d.N,null,eu&&a.createElement(u.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:z.Bn}},a.createElement(Q,null))),a.createElement(d.N,null,es&&a.createElement(u.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:z.Bn}},a.createElement(J,{prototypeHeaderHidden:n},(()=>{switch(X){case"presenting":if(null===r)return null;if(B){let e=(0,T.tx)("collaboration.spotlight.bell.presenter.waiting_for_followers"),t=(0,T.t)("collaboration.spotlight.bell.presenter.cancel");return a.createElement(K.Y,{color:"brand",message:{text:e},renderKey:`${r.sessionID}`,progressBar:!0,progressBarDurationMs:6e3,autoHide:!1,button:{text:t,onClick:V}})}return a.createElement(K.Y,{color:"brand",message:{text:a.createElement(G.s,{count:t.followerCount})},renderKey:`${r.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,T.t)("collaboration.spotlight.bell.presenter.stop"),onClick:V},docked:el});case"prompt_to_accept_nomination":if(!r||!c)return null;return a.createElement(K.Y,{color:"brand",useSecondaryColor:!0,message:{text:(0,T.tx)("collaboration.spotlight.bell.follower.nominated",{nominatorName:c.name})},renderKey:`${r.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,T.t)("collaboration.spotlight.tooltip.spotlight_me"),onClick:()=>{_(t)}},showCloseButton:!0,onCloseCallback:()=>{g(r.sessionID,t)}});case"showing_explainer":if(null===r)return null;let e=l?(0,T.tx)("collaboration.spotlight.bell.explainer.takeover",{currentPresenter:l?.name}):(0,T.tx)("collaboration.spotlight.bell.explainer");return a.createElement(K.Y,{color:"brand",useSecondaryColor:!0,message:{text:e},renderKey:`${t.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:null,docked:!1});case"preparing_to_record":case"recording":if(!r)return null;return a.createElement(H.e,{onStopPresenting:V});case"none":return null;default:(0,i.assertNever)(X)}})()))),a.createElement(d.N,null,ec&&a.createElement(u.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:z.Bn}},a.createElement(J,{prototypeHeaderHidden:n},(()=>{switch(Z){case"pending_auto_follow":{if(!l)return null;let e=l.name,t=en?{text:(0,T.tx)("collaboration.spotlight.bell.follower.spotlighting_presenter_alternate_copy",{presenterName:e}),onClick:R}:{text:(0,T.tx)("collaboration.spotlight.bell.follower.switching_to_new_presenter",{presenterName:e})},n=en?{text:(0,T.t)("collaboration.spotlight.bell.follower.not_now"),onClick:et}:null;return a.createElement(K.Y,{color:l?.color,message:t,renderKey:`${l.sessionID}`,progressBar:en,progressBarDurationMs:F||0,autoHide:!1,button:n,ghost:eo})}case"following":{let e=t.observingSessionID===t.presenterSessionID;if(null===s)return null;let n=s?.name||"",r=e?(0,T.tx)("collaboration.spotlight.bell.follower.spotlight_on_presenter",{observedUserName:n}):(0,T.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:n}),i={text:e?(0,T.t)("collaboration.spotlight.bell.stop_following"):(0,T.t)("collaboration.spotlight.bell.stop"),onClick:()=>h(t)};return a.createElement(K.Y,{color:s?.color,message:{text:r},renderKey:`${t.observingSessionID}`,autoHide:!0,progressBar:!1,progressBarDurationMs:0,button:i,docked:el,ghost:eo})}case"prompt_to_rejoin":let e=()=>(0,y.KI)(M,t,"Spotlight Rejoined",Y);if(null!==s||null===l)return null;let n=(0,T.tx)("collaboration.spotlight.bell.follower.reprompt_spotlight_on_presenter",{presenterUserName:l.name}),r=(0,T.t)("collaboration.spotlight.bell.follower.follow");return a.createElement(K.Y,{color:l?.color,message:{text:n,onClick:e},renderKey:`${l.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:{text:r,onClick:e},showCloseButton:!0,onCloseCallback:()=>(0,y.KI)(()=>k(!0),t,"Spotlight Rejoin Dismissed",Y),useSecondaryColor:!0,ghost:eo});case"none":return null;default:(0,i.assertNever)(Z)}})()))),(()=>{if("preparing_to_record"!==X&&"recording"!==X||!v.mediaStream)return null;let e=v.mediaStream.getVideoTracks();if(0===e.length)return null;let t=e[0].getSettings();if(!t.width||!t.height)return null;let n=t.width/400,r=t.height/225,i=n>r?400:t.width/t.height*225,l=n>r?t.height/t.width*400:225;return a.createElement(U.vx,{initialPosition:new C.Mi(12,-30),initialHeight:l,initialWidth:i,transparentContentBackground:!0,initialConstraints:{x:"left",y:"bottom"},canRenderBelowViewport:!0},a.createElement("video",{className:W.bw,ref:ed,autoPlay:!0,playsInline:!0,muted:!0}))})())}function el(e){let{prototypeHeaderHidden:t}=e,n=(0,r.d4)(({multiplayer:e})=>e),i=(0,I.HG)(),l=(0,I.By)(),o=-1!==n.observingSessionID;return((0,I.VA)({multiplayer:n}),(0,I.Pi)({multiplayer:n}),l)?null:i?a.createElement(ei,{multiplayer:n,prototypeHeaderHidden:t}):o?a.createElement(eo,{prototypeHeaderHidden:t}):null}function eo(e){let{prototypeHeaderHidden:t}=e,n=(0,I.$0)(),i=(0,N.q5)(),l=(0,r.d4)(e=>e.multiplayer.allUsers.length),o=a.useRef(l);o.current=l,er("none","following",i,o);let s=`${n?.sessionID}`,c=a.useMemo(()=>{let e=n?.name||"";return{text:(0,T.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:e})}},[n]),d=ea();return null===n?null:a.createElement(ee,null,a.createElement(Z,null),a.createElement(J,{prototypeHeaderHidden:t},a.createElement(K.Y,{color:n?.color,message:c,renderKey:s,autoHide:!0,progressBar:!1,progressBarDurationMs:0,button:null,docked:d})))}function es(){let e=(0,f.md)(M.a8)===P.h0.PLAYING,t=(0,f.md)(M.$i);if(!e)return null;switch(t){case P.JJ.CANVAS:return a.createElement(ee,{colorOverride:F.rK},a.createElement(Z,null));case P.JJ.PROPERTIES_PANEL:return a.createElement(ec,null);default:return null}}function ec(){let e=Y(0),t=B.iP-2*j;return a.createElement("div",{"data-testid":"cursor-bot-properties-panel-frame",className:W.KM,style:{border:`${j}px solid ${F.rK}`,width:`${t}px`,height:e.height,top:e.top,right:0}})}function ed(){return a.createElement(ee,{colorOverride:"var(--color-border-brand-strong)"},a.createElement(Z,null))}},396021:(e,t,n)=>{n.d(t,{$1:()=>_,L7:()=>m,Of:()=>f,XC:()=>g,Y4:()=>E,YX:()=>y,dK:()=>u,mF:()=>p,pM:()=>h,rK:()=>d,tF:()=>c});var a=n(86625),r=n(776621),i=n(198868),l=n(766022),o=n(168289),s=n(450503);let c="cursor_bot",d="#007BE5";function u(e,t){return Math.min(t.width/(e.absoluteBoundingBox.w+300),t.height/(e.absoluteBoundingBox.h+300))*t.zoom}function m(e,t,n){let a;e instanceof HTMLElement?a=e.getBoundingClientRect():a={h:e.absoluteBoundingBox.h,w:e.absoluteBoundingBox.w,x:e.absoluteBoundingBox.x,y:e.absoluteBoundingBox.y,left:e.absoluteBoundingBox.x,right:e.absoluteBoundingBox.x+e.absoluteBoundingBox.w,top:e.absoluteBoundingBox.y,bottom:e.absoluteBoundingBox.y+e.absoluteBoundingBox.h};let r=n?.x||0,i=n?.y||0,l=0;return{targetX:t?.x===o.GF.LEFT?a.left+r:t?.x===o.GF.RIGHT?a.right+r:(a.right+a.left)/2+r,targetY:t?.y===o.NI.TOP?a.top+i:t?.y===o.NI.BOTTOM?a.bottom+i:(a.top+a.bottom)/2+i}}async function p({imgSrc:e,desiredWidth:t,desiredHeight:n}){try{let r=(0,i.D)(),l=a.l7.onboarding("create-rectangle-for-image",()=>r.createRectangle()),o=await r.createImageAsync(e),{width:s,height:c}=await o.getSizeAsync(),d=void 0!==t?t:s,u=void 0!==n?n:c;return a.l7.onboarding("resize-rectangle-node-with-image-fill",()=>{l.resize(d,u)}),a.l7.onboarding("set-image-fill",()=>{l.fills=[{type:"IMAGE",imageHash:o.hash,scaleMode:"FILL"}]}),l.id}catch(t){return(0,r.x1)(c,"Failed to insert image",{imgUrl:e,err:t},{reportAsSentryError:!0}),null}}function _(e){let t=document.getElementById(l.rp);t.classList.add(s.eb),t.scrollTop=e,t.classList.remove(s.eb)}function g(e){return e===o.h0.PLAYING}function f(e,t){let n=t?"cursor_bot_v2__basics_file__":"cursor_bot_v2__no_basics_file__";switch(e){case"How to draw a frame":return{tutorialPlayedUserFlag:`${n}clicked_show_me_for_create_a_frame`,stepCompletedUserFlag:`${n}played_create_a_frame`};case"How to use the design panel":return{tutorialPlayedUserFlag:`${n}clicked_show_me_for_frame_formatting`,stepCompletedUserFlag:`${n}played_frame_formatting`};case"Add words where needed":return{tutorialPlayedUserFlag:`${n}clicked_show_me_for_create_text`,stepCompletedUserFlag:`${n}played_create_text`};case"How to format text":return{tutorialPlayedUserFlag:`${n}clicked_show_me_for_text_formatting`,stepCompletedUserFlag:`${n}played_text_formatting`};default:throw Error(`Unknown tutorial name: ${e}`)}}let h=600,E=1200,y=1500},965626:(e,t,n)=>{n.d(t,{Wl:()=>h,Yh:()=>y});var a=n(411855),r=n(568214),i=n(22332),l=n(374626),o=n(901536),s=n(309798),c=n(99506),d=n(615018),u=n(666258),m=n(168289),p=n(396021),_=n(170460),g=n(450503);let f="Figma",h="cursor_bot_debug_menu_clicked";function E(){return a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"25",fill:"none"},a.createElement("g",{filter:"url(#a)"},a.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M15 6a1 1 0 0 0-2 0v5h-1V4a1 1 0 0 0-1-1 1 1 0 0 0-1 1v7H9V5a1 1 0 0 0-2 0v6H6V8a1 1 0 0 0-2 0v8a5 5 0 0 0 5 5h1c1.55 0 2.94-.7 3.86-1.82l.1-.1 5.01-4.7c.52-.48.57-1.3.12-1.85a1.27 1.27 0 0 0-1.74-.22L15 14.05V6Zm.34 14.55 5-4.71a3.37 3.37 0 0 0 .29-4.59 3.27 3.27 0 0 0-3.63-1V6a3 3 0 0 0-3.17-3 3 3 0 0 0-5.14-.92A3 3 0 0 0 5 5a3 3 0 0 0-3 3v8a7 7 0 0 0 7 7h1a6.99 6.99 0 0 0 5.34-2.45Z",clipRule:"evenodd"})),a.createElement("path",{fill:"#0D99FF",fillRule:"evenodd",d:"M11 3a1 1 0 0 1 1 1v7h1V6a1 1 0 1 1 2 0v8.05l2.35-1.74c.55-.4 1.3-.31 1.74.22.45.54.4 1.37-.12 1.85l-5 4.7-.11.1A4.99 4.99 0 0 1 10 21H9a5 5 0 0 1-5-5V8a1 1 0 1 1 2 0v3h1V5a1 1 0 0 1 2 0v6h1V4a1 1 0 0 1 1-1Z",clipRule:"evenodd"}),a.createElement("path",{fill:"#000",fillOpacity:".8",fillRule:"evenodd",d:"M3 10v6a6 6 0 0 0 6 6h1a5.99 5.99 0 0 0 4.65-2.18l5-4.7c.9-.86 1-2.28.2-3.23a2.27 2.27 0 0 0-3.1-.38l-.75.55V6a2 2 0 0 0-3-1.73V4a2 2 0 0 0-3.89-.66A2 2 0 0 0 6 5v1.27A2 2 0 0 0 3 8v2Zm3 1V7.98A1 1 0 0 0 4 8v8a5 5 0 0 0 5 5h1c1.55 0 2.94-.7 3.86-1.82l.1-.1 5.01-4.7c.52-.48.57-1.3.12-1.85a1.27 1.27 0 0 0-1.74-.22L15 14.05V6a1 1 0 1 0-2 0v5h-1V4a1 1 0 1 0-2 0v7H9V4.98A1 1 0 0 0 7 5v6H6Z",clipRule:"evenodd"}),a.createElement("defs",null,a.createElement("filter",{id:"a",width:"22.4",height:"25",x:".5",y:"0",colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),a.createElement("feOffset",{dy:".5"}),a.createElement("feGaussianBlur",{stdDeviation:".75"}),a.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),a.createElement("feBlend",{in2:"BackgroundImageFix",result:"effect1_dropShadow_1_43"}),a.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_1_43",result:"shape"}))))}function y(e){let t=(0,i.j)(),n=(0,p.XC)((0,l.md)(u.a8)),r=!(0,s.f)("cursor_bot_v2_has_greeted_with_wave")&&!e.manualControl,o=(0,l.md)(u.jr),_=(0,l.md)(u.Sf),h=(0,l.md)(u.nG),E=(0,l.md)(u.Ds),y=(0,l.md)(u.iB),v=(0,l.md)(u.H7)===m.zu.RIGHT,C={display:"block",willChange:"transform",opacity:n||e.manualControl?"1":"0",transform:`translate3D(${o}px, ${_}px, 0)`,transition:"opacity 300ms"+(E?`, transform ${E}ms cubic-bezier(0.14, 0, 0.32, 1)`:"")};return a.createElement("div",{className:g.pJ,style:C,"data-testid":"cursor-bot","aria-hidden":"true"},r?a.createElement(b,null):a.createElement(d.k_,{cursorType:y,chatMessage:[h],name:e.name??f,color:p.rK,isHighFiving:!1,temporarilyHide:!1,isCursorHandOnRight:!1,isCursorPointingRight:v,focusOnTextCursor:!1,editorType:c._Y.DESIGN,isCursorAndChatAreaOffscreen:!1,prefersReducedMotion:t,isHighFivingSupported:!1,useChatAnimation:!0,disableMessageFade:!0,isHoveringWidgetWithHiddenCursors:!1}))}function b(){let e=a.useRef(null);return a.useEffect(()=>{e.current&&e.current.animate([{transform:"rotate(-45deg),",easing:"ease-in-out"},{transform:"rotate(50deg)",easing:"cubic-bezier(0.42, 0, 0.34, 1.05)"},{transform:"rotate(-45deg)"}],{duration:p.pM})},[]),a.createElement("div",{className:o.cx.absolute.top0.left0.w20.$},a.createElement("div",{className:g.lN,ref:e,"data-testid":"cursor-bot-high-five"},a.createElement(E,null)),a.createElement("div",{className:_.VW,style:{color:p.rK}},a.createElement("div",{className:_.iY,style:{color:r.e3}},f),a.createElement("div",{className:_.hD,style:{backgroundColor:p.rK}})))}},988889:(e,t,n)=>{n.d(t,{a:()=>es,S:()=>eo});var a=n(411855),r=n(188507),i=n(587670),l=n(374626),o=n(119198),s=n(931828),c=n(456104),d=n(974105),u=n(335682),m=n(309798),p=n(99506),_=n(833629),g=n(945020),f=n(397065),h=n(319008),E=n(457261),y=n(222720),b=n(788256),v=n(463546),C=n(666258),w=n(168289),T=n(965626),S=n(881388),x=n(251960),k=n(860178),N=n(396021);let I=[w.wn.CREATE_FRAME,w.wn.FORMAT_FRAME,w.wn.CREATE_TEXT,w.wn.FORMAT_TEXT];var A=n(721047),O=n(302245),L=n(966712),D=n(939863),R=n(295463),M=n(925714),P=n(261503);function F(e,t){let n=w.wn.CREATE_FRAME,{tutorialPlayedUserFlag:r,stepCompletedUserFlag:l}=(0,N.Of)(n,t);return{name:n,tutorialPlayedUserFlag:r,stepCompletedUserFlag:l,duration:t?8900:5200,startingState:t?{centerNodeMatcher:M.C7,resetStartingState:{hubFileId:L.Ay()?.cursor_bot?.product_page_hub_file_id,nodeWidth:M.e7,nodeHeight:M.HX}}:void 0,steps:function(e,t){let n=[{type:w.HQ.SET_CHAT,message:"Just click and drag, like this.",additionalDelay:600},{type:w.HQ.CHANGE_TOOL,toolType:i.NLJ.FRAME}];return t?n.push({type:w.HQ.INSERT_NODE,payload:{nodeType:"FRAME",width:M.b7,height:M.mg},nodeName:M.Ur,locationType:w.bn.INSIDE_SCENE_NODE,location:{parentMatcher:M.C7,offsetX:523,offsetY:285},nodeNameForLogging:w.Le.PRODUCT_FRAME_CHERRIES_FRAME,additionalDelay:1200,cursorMovementAnimationDuration:600,nodeDrawingAnimationDuration:1500},{type:w.HQ.SET_CHAT,message:"Then add elements into frames, like images.",additionalDelay:700},{type:w.HQ.INSERT_NODE,locationType:w.bn.INSIDE_SCENE_NODE,location:{parentMatcher:e=>(0,M.xK)(e,0)},payload:{nodeType:"RECTANGLE",fillType:"image",imgSrc:"https://static.figma.com/uploads/eccc694a7069c9cafd11d1b91b27e0a5c5e7a394",width:M.b7,height:M.g1},nodeName:"Image",nodeNameForLogging:w.Le.CHERRIES_FRAME_CHERRIES_IMAGE,additionalDelay:1e3,cursorMovementAnimationDuration:600,cursorPosition:w.$2.BOTTOM_RIGHT},{type:w.HQ.SELECT_SCENE_NODE,meetsConditions:e=>(0,M.xK)(e,1),nodeNameForLogging:w.Le.PRODUCT_FRAME_CHERRIES_FRAME}):n.push({type:w.HQ.INSERT_NODE,payload:{nodeType:"FRAME",width:117,height:48},locationType:w.bn.DEFAULT,nodeName:"Frame 1",nodeNameForLogging:w.Le.NO_BASICS_FILE_FRAME,additionalDelay:1500,cursorMovementAnimationDuration:500,nodeDrawingAnimationDuration:1500}),n.push({type:w.HQ.CLEAR_CHAT}),n}(0,t),TooltipElement:t=>{let{primaryCtaProps:n,secondaryCtaProps:r,onPrimaryCtaClick:i,onSecondaryCtaClick:l}=(0,R.W)({isReplay:e,props:t});return a.createElement(P.e,{onPrimaryCtaClick:i,onSecondaryCtaClick:l,primaryCtaProps:n,secondaryCtaProps:r,onClose:t.onClickClose,bodyText:(0,D.t)("cursor_bot.a_frame_will_hold_the_rest_of_your_design"),fromCursorBot:!0})}}}var B=n(612028),U=n(901536),G=n(101505),K=n(672517),V=n(260833);function H(e){let t=(0,r.d4)(e=>e.isFullscreenDocumentLoaded);return a.useEffect(()=>{t&&i.glU.triggerAction("set-tool-type",null)},[t]),a.createElement(V.b,{dismissModal:e.onClose,disableHighlight:!0,targetKey:"tool-type-onboarding",title:(0,D.tx)("cursor_bot.add_words_where_needed"),trackingContextName:"Cursor Bot Create Text Step",lowerLeftText:a.createElement(K.$z,{onClick:e.onBackCtaClick,className:U.cx.textInherit.bgTransparent.$,trackingProperties:{ctaTrackingDescriptor:G.c.BACK}},(0,D.tx)("general.back")),onPrimaryCtaClick:e.onPrimaryCtaClick,primaryCtaProps:e.primaryCtaProps,onSecondaryCtaClick:e.onSecondaryCtaClick,secondaryCtaProps:e.secondaryCtaProps,pointsTo:"toolbar"},(0,D.tx)("cursor_bot.all_designs_need_words_so_create_a_text_layer_anywhere_and_start_typing_simple_as_that"))}function z(e,t,n){let r=w.wn.CREATE_TEXT,{tutorialPlayedUserFlag:l,stepCompletedUserFlag:o}=(0,N.Of)(r,t);return{name:r,tutorialPlayedUserFlag:l,stepCompletedUserFlag:o,duration:t?11400:6600,startingState:t?{centerNodeMatcher:e=>(0,M.xK)(e,M.$5),resetStartingState:{hubFileId:L.Ay()?.cursor_bot?.ginger_no_text_hub_file_id,nodeWidth:M.e7,nodeHeight:M.HX}}:{centerNodeMatcher:M.ok},steps:function({shouldSkipYup:e,isInBasicsFile:t}){let n=[];return t?n.push({type:w.HQ.SET_CHAT,message:(e?"":"Yup: ")+"Just click into your frame and type.",additionalDelay:500}):n.push({type:w.HQ.SET_CHAT,message:(e?"":"Yup: ")+"Just click into your frame and type.",additionalDelay:500,hasBackupMessage:!0,shouldShowBackupMessage:e=>void 0===(0,B.cy)(M.ok,e),backupMessage:(e?"":"Yup: ")+"Just click to add a text node and type."}),n.push({type:w.HQ.CHANGE_TOOL,toolType:i.NLJ.TYPE,additionalDelay:1200}),t?n.push({type:w.HQ.INSERT_NODE,nodeName:M.qw,payload:{nodeType:"TEXT",text:M.qw,height:16},locationType:w.bn.INSIDE_SCENE_NODE,location:{parentMatcher:e=>(0,M.xK)(e,1),offsetX:24,offsetY:334},cursorPosition:w.$2.BOTTOM_LEFT,nodeNameForLogging:w.Le.CHERRIES_FRAME_CHERRIES_TEXT,cursorMovementAnimationDuration:600,additionalDelay:400},{type:w.HQ.CHANGE_TOOL,toolType:i.NLJ.TYPE,additionalDelay:300},{type:w.HQ.INSERT_NODE,nodeName:M.A8,payload:{nodeType:"TEXT",text:M.A8,height:16},locationType:w.bn.INSIDE_SCENE_NODE,location:{parentMatcher:e=>(0,M.xK)(e,2),offsetX:316,offsetY:334},cursorPosition:w.$2.BOTTOM_LEFT,nodeNameForLogging:w.Le.CHERRIES_FRAME_PRICE_TEXT,additionalDelay:400},{type:w.HQ.CHANGE_TOOL,toolType:i.NLJ.TYPE,additionalDelay:300},{type:w.HQ.INSERT_NODE,nodeName:M.$j,payload:{nodeType:"TEXT",text:M.$j,height:16},locationType:w.bn.INSIDE_SCENE_NODE,location:{parentMatcher:e=>(0,M.xK)(e,3),offsetX:24,offsetY:368},cursorPosition:w.$2.BOTTOM_LEFT,nodeNameForLogging:w.Le.CHERRIES_FRAME_GROWN_TEXT,additionalDelay:1e3}):n.push({type:w.HQ.INSERT_NODE,nodeName:M.N1,payload:{nodeType:"TEXT",text:M.N1,width:29,height:16,shouldCenterAlign:!0,typingDurationPerCharMs:200},cursorPosition:w.$2.BOTTOM_LEFT,locationType:w.bn.INSIDE_SCENE_NODE,location:{parentMatcher:M.ok,offsetX:-14.5,offsetY:-7.5,shouldPositionRelativeToCenterOfParent:!0,useDefaultLocationIfParentNotFound:!0},nodeNameForLogging:w.Le.NO_BASICS_FILE_TEXT,cursorMovementAnimationDuration:600,additionalDelay:1500}),n}({shouldSkipYup:e||!n,isInBasicsFile:t}),TooltipElement:t=>{let{primaryCtaProps:n,secondaryCtaProps:r,onPrimaryCtaClick:i,onSecondaryCtaClick:l}=(0,R.W)({isReplay:e,props:t});return a.createElement(H,{onPrimaryCtaClick:i,onSecondaryCtaClick:l,primaryCtaProps:n,secondaryCtaProps:r,onClose:t.onClickClose,onBackCtaClick:t.onClickBack})}}}var W=n(425037),j=n(354537);let $=(0,O.Mz)([e=>e.userFlags,(e,t)=>t],(e,t)=>t.reduce((t,n)=>({...t,[n.name]:!!e[n.stepCompletedUserFlag]}),{}));var q=(e=>(e.PanAndZoom="pan_and_zoom",e.YoureAllSet="youre_all_set",e))(q||{}),Y=n(608936),X=n(629019),J=n.n(X),Z=n(776250),Q=n(946689),ee=n(457630),et=n(498606),en=n(917397),ea=n(450503);let er=a.memo(({currentTutorial:e,stateManager:t})=>{let n;let r=(0,l.md)(C.a8),i=(0,l.md)(C.jE),o=a.useCallback(()=>{let e=d.current;return e?Math.min(Math.round(e/i*100),100):0},[i]);a.useEffect(()=>{let n=n=>{n&&27===n.keyCode&&(0,N.XC)(r)&&((0,Z.sx)("Cursor Bot Tutorial Canceled via Escape",{tutorialName:e.name}),t.stopCurrentTutorial({timeElapsed:d.current,tutorialPercentageComplete:o(),tutorialName:e.name,stopTrigger:w.mf.ESC_KEY}))};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[r,t,o,e.name]);let[s,c]=(0,l.fp)(C.mH),d=a.useRef(0),u=a.useRef();if(a.useEffect(()=>{if(!(0,N.XC)(r)){d.current=0,clearInterval(u.current),u.current=void 0;return}let e=setInterval(()=>d.current+=17,17);return u.current=e,()=>clearInterval(e)},[r]),(0,N.XC)(r)){let e=o(),t=(0,Y.keyframes)({from:{backgroundPosition:`${100-e}% center`},to:{backgroundPosition:"left"}}),a=i-d.current;n={animation:`${t} ${a}ms linear`}}let m=(0,ee.ni)(),p=a.useMemo(()=>({top:m.y+h.hH+4}),[m.y]);return a.createElement("div",{className:ea.CL,style:p},a.createElement("div",{className:J()({[en.e]:s}),onAnimationEnd:()=>{c(!1)}},a.createElement("div",{className:ea.KB,style:n},a.createElement(Q.Kz,{multiple:1,direction:"x"}),a.createElement("div",null,e.name),a.createElement(Q.Kz,{multiple:1,direction:"x"}),a.createElement(K.$z,{className:ea.gd,onClick:()=>{t.stopCurrentTutorial({timeElapsed:d.current,tutorialPercentageComplete:o(),tutorialName:e.name,stopTrigger:w.mf.STOP_BTN})},"data-tooltip-type":et.Ib.TEXT,"data-tooltip":(0,D.t)("cursor_bot.stop_tutorial"),trackingProperties:{trackingDescriptor:G.c.STOP_TUTORIAL,tutorialName:e.name},"aria-label":(0,D.t)("cursor_bot.stop_tutorial")},(0,D.tx)("collaboration.spotlight.bell.presenter.stop")))))}),ei="create_frame_animation--frameCornerSquare--TEcO4";function el(){let e=(0,ee._X)({subscribeToUpdates_expensive:!1}),t=(0,l.md)(C.Dh);if(null==t)return null;let{x:n,y:r,width:i,height:o,duration:s}=t,c=(0,ee.Yb)(e,{x:n,y:r,width:i,height:o}),d=e.x+c.x,u=e.y+c.y;return a.createElement("div",{style:{top:u,left:d,width:`${c.width}px`,height:`${c.height}px`,position:"absolute"}},a.createElement("div",{style:{border:"1px solid #4497F7",animationDuration:`${s}ms`},className:"create_frame_animation--animationFrame--4fuzR"},a.createElement("div",{style:{top:-3,left:-3,background:"#ffffff"},className:ei}),a.createElement("div",{style:{top:-3,left:"calc(100% - 3px)",background:"#ffffff"},className:J()(ei)}),a.createElement("div",{style:{top:"calc(100% - 3px)",left:"calc(100% - 3px)",background:"#ffffff"},className:ei}),a.createElement("div",{style:{top:"calc(100% - 3px)",left:-3,background:"#ffffff"},className:ei})))}function eo(){let{isShowing:e,show:t,complete:n,uniqueId:h}=(0,c.e)({overlay:v.SyB,priority:f.N.OVERRIDING_MODAL}),O=(0,r.wA)(),L=(0,r.Pj)(),D=(0,r.d4)(e=>e.isFullscreenDocumentLoaded),R=(0,r.d4)(e=>e.mirror.appModel.multiplayerSessionState===i.kul.JOINED),M=(0,A.b)(),P=(0,l.md)(C.a8),B=(0,m.f)("has_cursor_bot_onboarding_v2");!function(e,t,n){let a=(0,k.iZ)(),i=(0,r.wA)(),l=(0,m.f)("has_cursor_bot_onboarding_v2"),o=(0,u.Cq)({useSinatraType:!0}),c=(0,_.WO)(a?.id,o,["exp_cursor_bot_onboarding"]),d=e=>{let a={...function(e){let t={format_text_step_shown:!1,design_panel_step_shown:!1};for(let n of(e?t.cursor_bot_v2__basics_onboarded=!1:(t.has_zoomed_in_design_file=!1,t.has_panned_in_design_file=!1,t.cursor_bot_v2__basics_onboarded=!1,t.cursor_bot_v2__no_basics_onboarded=!1),I)){let{tutorialPlayedUserFlag:a,stepCompletedUserFlag:r}=(0,N.Of)(n,e);t[a]=!1,t[r]=!1}return t}(c),cursor_bot_v2__basics_file__started_flow:!1,cursor_bot_v2_has_greeted_with_wave:!1};e&&(a.has_cursor_bot_onboarding_v2=!0),i(s.b(a)),t||n()};(0,x.E)(e,T.Wl,()=>{o?.editor_type===p._Y.DESIGN?d(!0):i(S.s.error("Cursor Bot can only be run in Figma design."))}),(0,x.E)(e,"Reset Onboarding",()=>{l&&o?.editor_type===p._Y.DESIGN&&d()})}(h,e,t);let[U,G]=a.useState(b.en.FORWARD),K=function(){let e=(0,m.f)("has_cursor_bot_onboarding_v2"),t=(0,m.f)("cursor_bot_v2__basics_file__started_flow"),n=(0,_.Ai)(["exp_cursor_bot_onboarding"]),i=(0,_.jm)(n),l=function(e){let t=!!(0,m.f)("cursor_bot_v2_has_greeted_with_wave"),n=!!(0,m.f)((0,N.Of)(w.wn.CREATE_FRAME,e).tutorialPlayedUserFlag),r=!!(0,m.f)((0,N.Of)(w.wn.FORMAT_FRAME,e).tutorialPlayedUserFlag),i=!!(0,m.f)((0,N.Of)(w.wn.CREATE_TEXT,e).tutorialPlayedUserFlag),l=!!(0,m.f)((0,N.Of)(w.wn.FORMAT_TEXT,e).tutorialPlayedUserFlag);return(0,a.useMemo)(()=>e?[F(n,e),z(i,e,t),(0,j.Z)(l,e),(0,W.p)(r,e)]:[F(n,e),(0,W.p)(r,e),z(i,e,t),(0,j.Z)(l,e)],[e,t,n,i,l,r])}(n),o=(0,r.d4)(e=>$(e,l));if(!e||i||!n&&t)return null;let s=0;if(l.forEach(e=>{o[e.name]&&(s+=1)}),s>=l.length)return n?"youre_all_set":"pan_and_zoom";let c={...l[s]};return s>0&&(c.previousTutorialCompleteUserFlag=l[s-1].stepCompletedUserFlag),c}(),V=(0,_.Ai)(["exp_cursor_bot_onboarding"]),H=(0,_.Y3)(),Y=(0,_.jm)(V),X=H||Y,J=u.q5()?.canEdit;a.useEffect(()=>{!X&&!e&&B&&K&&D&&R&&J&&t()},[X,e,t,B,K,D,R,J]),a.useEffect(()=>{e&&(Y||!K)&&n()},[e,n,Y,K]);let Z=(0,m.f)("cursor_bot_v2__basics_file__started_flow");if(a.useEffect(()=>{e&&V&&!Z&&O(s.b({cursor_bot_v2__basics_file__started_flow:!0}))},[O,V,e,Z]),!e||!K)return null;let Q=()=>{V?O(s.b({cursor_bot_v2__basics_onboarded:!0})):O(s.b({cursor_bot_v2__no_basics_onboarded:!0})),n()};if(K===q.YoureAllSet)return a.createElement(E.J,{onPrimaryCtaClick:()=>{let e=(0,d.xA)(L.getState(),g.ai.NEW_TAB,"drafts",{from:g.f6.CURSOR_BOT_END_MODAL,selectedView:L.getState().selectedView},p._Y.DESIGN,void 0);O(o.uM(e)),Q()},onSecondaryCtaClick:Q,onClose:Q});if(K===q.PanAndZoom)return a.createElement(y.iF,{markComplete:Q});if(P===w.h0.PLAYING)return a.createElement(es,{cursorBotStateManager:M,currentTutorial:K});let ee=()=>{K.previousTutorialCompleteUserFlag&&(G(b.en.BACKWARD),O(s.b({[K.previousTutorialCompleteUserFlag]:!1})))},et=()=>{G(b.en.FORWARD),O(s.b({[K.stepCompletedUserFlag]:!0}))};return a.createElement(K.TooltipElement,{onClickShowMe:()=>M.runTutorial(K),onClickNext:et,onClickClose:Q,onClickBack:ee,skip:U===b.en.BACKWARD?ee:et})}function es({cursorBotStateManager:e,currentTutorial:t}){return a.createElement(a.Fragment,null,a.createElement(T.Yh,null),a.createElement(er,{currentTutorial:t,stateManager:e}),a.createElement(el,null),a.createElement(h.Qe,null))}},721047:(e,t,n)=>{n.d(t,{b:()=>M});var a=n(411855),r=n(188507),i=n(587670),l=n(374626),o=n(646240),s=n(777078),c=n(862442),d=n(843495),u=n(309798),m=n(100197),p=n(433861),_=n(666258),g=n(86625),f=n(612028),h=n(776250),E=n(568214),y=n(776621),b=n(30637),v=n(672715),C=n(881388),w=n(410424),T=n(931828),S=n(83909),x=n(356390),k=n(457630),N=n(106112),I=n(279702),A=n(485861),O=n(168289),L=n(396021);let D=(0,b.Lg)()?0:300;class R{constructor(e,t,n,a,r,l,o,s,c,d,u,m,p,_,g,f,h,E,y,v,C){this.setCursorBotX=e,this.setCursorBotY=t,this.setCursorBotChat=n,this.setCursorBotAnimationDuration=a,this.setCursorBotTutorialPhase=r,this.setCursorType=l,this.setCursorDirection=o,this.setToolbarActionWithSimulatedHover=s,this.setCursorBotAnimationLayerPosition=c,this.setCursorBotOverlayType=d,this.setCursorBotTutorialDuration=u,this.hasWaved=m,this.cursorBotX=p,this.cursorBotY=_,this.getViewportInfo=g,this.navigate=f,this.sceneGraph=h,this.infoForSentry=E,this.dispatch=y,this.insertTemplate=v,this.appModel=C,this.waitForDuration=(e,t)=>new Promise(n=>{this.setTimeoutWrapper({callback:n,delay:(0,b.Lg)()&&!t?0:e,isBlockingTutorialExecution:!0})}),this.unblockUserEventsTimeout=null,this.blockUserEvents=()=>{i.Ez5.editorState().shouldBlockUserEvents.set(!0),S.wt.setIsCursorBotEditing(!0),(0,b.Lg)()||(this.unblockUserEventsTimeout=setTimeout(()=>{this.unblockUserEvents()},6e4))},this.unblockUserEvents=()=>{this.setCursorBotTutorialPhase(O.h0.AWAITING_PLAYBACK),i.Ez5.editorState().shouldBlockUserEvents.set(!1),this.unblockUserEventsTimeout&&clearTimeout(this.unblockUserEventsTimeout),this.unblockUserEventsTimeout=null,S.wt.setIsCursorBotEditing(!1)},this.animateChat=(e,t)=>{if(e>t.length||this.shouldStop)return;let n=t.slice(0,e);this.setCursorBotChat(n),this.setTimeoutWrapper({callback:()=>{this.animateChat(e+1,t)},delay:(0,b.Lg)()?0:35,isBlockingTutorialExecution:!1})},this.startingStateHubFiles={},this.shouldStop=!1,this.timeoutIds=[],this.pendingCallbacksToRun=[]}runTutorial(e,t){let n=async()=>{for(let t of(await this.setupStateAndCanvas(e),e.steps)){if(this.shouldStop)return;try{await this.transition(t,e.name)}catch(n){this.logErrorAndStopTutorial("Could not execute step",{step:t,err:n,tutorialName:e.name});return}}this.resetStateAndMarkTutorialComplete(e.tutorialPlayedUserFlag,t)};(0,v.Lk)(L.tF);let a=window.performance.now();return this.currentTutorialRunningPromise=n(),this.currentTutorialRunningPromise.finally(()=>{(0,v.Dz)(L.tF);let t=window.performance.now()-a;(0,y.Lo)(L.tF,"Tutorial completed or stopped",{elapsedDuration:t,tutorialName:e.name})}),this.currentTutorialRunningPromise}insertStartingStateFromHubFile({hubFileId:e,nodeWidth:t,nodeHeight:n,tutorialName:a}){if(!e)throw Error("Hub file ID is not provided");let r=async e=>{let r=i.qmM.findBoundsToCenterNewTopLevelNode(t+88,n),l=r.origin.x+88,o=r.origin.y;await this.centerViewportAroundCanvasRect({x:l,y:o,width:t,height:n}),await this.waitForDuration(this.moveCursorBot({x:l+t/2,y:o+n/2,coordinateType:"canvas",animationDuration:600})),await this.transition({type:O.HQ.SET_CHAT,message:"Here\u2019s another example..."},a),await this.insertTemplate({template:{type:N.n.HubFile,template:e},userTriggered:!1,editScopeType:i.zkO.ONBOARDING,triggeredFrom:"cursor-bot",templateInsertionDirection:i.hKj.CUSTOM_POSITION,templateCustomPosition:{x:l,y:o},selectTemplateAfterInsertion:!0}),await this.waitForDuration(500)};return this.startingStateHubFiles[e]?r(this.startingStateHubFiles[e]):new Promise((t,n)=>{this.dispatch(w.ts({hubFileId:e,callback:async e=>{try{this.startingStateHubFiles[e.id]=e,await r(e),t()}catch(e){n(e)}}}))})}logSentryError(e,t){(0,y.x1)(L.tF,e,t,{reportAsSentryError:!0})}logErrorAndStopTutorial(e,t){this.logSentryError(e,t),this.dispatch(C.s.error("Could not run tutorial. Please try again later.")),this.stopCurrentTutorial({tutorialName:t.tutorialName,stopTrigger:O.mf.STATE_MANAGER_ERROR,errorMessage:e,nodeName:t.name})}async stopCurrentTutorial(e){this.shouldStop=!0,this.timeoutIds.forEach(e=>clearTimeout(e)),this.pendingCallbacksToRun.forEach(e=>e()),await this.currentTutorialRunningPromise,this.resetCursorBotStateToDefaults(),this.unblockUserEvents(),e&&(0,h.sx)("Cursor Bot Tutorial Stopped",{...e})}updatePositionState(e,t){this.cursorBotX=e,this.cursorBotY=t}updateSceneGraphReference(e){this.sceneGraph=e}updateInfoForSentry(e){this.infoForSentry=e}updateAppModel(e){this.appModel=e}updateHasWaved(e){this.hasWaved=e}setTimeoutWrapper({callback:e,delay:t,isBlockingTutorialExecution:n}){this.timeoutIds.push(setTimeout(e,t)),n&&this.pendingCallbacksToRun.push(e)}resetCursorBotStateToDefaults(){this.tutorialParentNode=void 0,this.setCursorBotX(_.Lw),this.setCursorBotY(_.WW),this.setCursorBotChat(""),this.setCursorBotAnimationDuration(0),this.setCursorType(i.z7E.DEFAULT),this.setToolbarActionWithSimulatedHover(void 0),this.setCursorDirection(O.zu.DEFAULT),this.setCursorBotOverlayType(O.JJ.CANVAS),this.timeoutIds=[],this.pendingCallbacksToRun=[]}async navigateToPageNodesOrDefaultViewport(){let e=this.sceneGraph.getCurrentPage()?.childrenGuids;e&&e.length>0?i.NfO.scrollAndZoomIntoView(e):await this.navigate({centerX:0,centerY:0,scale:3})}getSelectedNodeIfMatches(e){if(""!==i.glU.getFirstSelectedNodeIdForCurrentPage()){let t=i.glU.getFirstSelectedNodeIdForCurrentPage(),n=this.sceneGraph.get(t);if(n&&e(n,this.sceneGraph))return n}}computeAndSetTutorialDuration(e){let t=e.duration;if(e.startingState){let{centerNodeMatcher:n,resetStartingState:a}=e.startingState;!(0,f.cy)(n,this.sceneGraph)&&a&&(t+=3e3)}this.hasWaved||(t+=L.Y4+L.YX),this.setCursorBotTutorialDuration(t),(0,y.Lo)(L.tF,"Estimated tutorial duration",{tutorialDuration:t,tutorialName:e.name})}async setupStateAndCanvas(e){if(this.blockUserEvents(),this.shouldStop=!1,this.timeoutIds=[],this.computeAndSetTutorialDuration(e),e.startingViewportFrameType&&this.setCursorBotOverlayType(e.startingViewportFrameType),this.setCursorBotTutorialPhase(O.h0.PLAYING),this.hasWaved||(this.setTimeoutWrapper({callback:()=>{this.hasWaved=!0,this.dispatch(T.b({cursor_bot_v2_has_greeted_with_wave:!0}))},delay:L.Y4,isBlockingTutorialExecution:!1}),await this.transition({type:O.HQ.SET_CHAT,message:"Certainly! Here\u2019s how...",additionalDelay:L.YX,preDelay:L.Y4},e.name)),void 0!==e.startingState){let t;let{centerNodeMatcher:n,prioritizeSelectedNode:a,resetStartingState:r}=e.startingState;if(a&&(t=this.getSelectedNodeIfMatches(n)),t||(t=(0,f.WY)(n,this.sceneGraph)),!t&&r)try{await this.insertStartingStateFromHubFile({...r,tutorialName:e.name}),t=(0,f.cy)(n,this.sceneGraph)}catch(t){this.logErrorAndStopTutorial("Could not insert starting state from hub file for tutorial",{err:t,tutorialName:e.name});return}if(t){this.tutorialParentNode=(0,f.E6)(this.sceneGraph,t.guid)??void 0;let e={centerX:t.absoluteBoundingBox.x+t.absoluteBoundingBox.w/2,centerY:t.absoluteBoundingBox.y+t.absoluteBoundingBox.h/2,scale:.2},n=i.NfO.getViewportBounds(),a=(0,L.dK)(t,{width:n.width,height:n.height,zoom:this.getViewportInfo().zoomScale});null==a||isNaN(a)||(e.scale=a),await this.navigate(e)}else await this.navigateToPageNodesOrDefaultViewport()}else await this.navigateToPageNodesOrDefaultViewport()}resetStateAndMarkTutorialComplete(e,t){setTimeout(()=>{this.dispatch(T.b({[e]:!0})),t?.(),this.resetCursorBotStateToDefaults(),this.unblockUserEvents()},D)}async centerViewportAroundCanvasRect(e,t=!1){let{x:n,y:a,width:r,height:i}=e,l=this.getViewportInfo();if(t&&(0,k.UN)(e,l))return;let o=l.zoomScale;(r*o>l.width||i*o>l.height)&&(o=Math.min(l.width/r,l.height/i)/1.1),await this.navigate({centerX:n+r/2,centerY:a+i/2,scale:o})}moveCursorBot({x:e,y:t,coordinateType:n,animationDuration:a}){if("canvas"===n){let n=this.getViewportInfo(),a=(0,k.Z0)(n,{x:e,y:t});e=a.x+n.x,t=a.y+n.y}return a=a||function(e,t,n,a){let r=Math.abs(e-t),i=Math.abs(n-a);return Math.min(Math.round(1.6*Math.sqrt(r*r+i*i)),3e3)}(this.cursorBotX,e,this.cursorBotY,t),this.setCursorBotAnimationDuration(a),this.setCursorBotX(e),this.setCursorBotY(t),a}repositionNode(e,t,n){g.l7.onboarding("reposition-node",()=>e.relativeTransform={...e.relativeTransform,m02:t,m12:n})}async insertNode(e,t,n,a,r){let l;if("RECTANGLE"===e.nodeType){let t=await (0,L.mF)({imgSrc:e.imgSrc,desiredWidth:e.width,desiredHeight:e.height});l=t?this.sceneGraph.get(t):null}else l=g.l7.onboarding("create-node",()=>this.sceneGraph.createNode(e.nodeType));if(!l)return null;if(g.l7.onboarding("size",()=>{l&&i.Egt.setSelectedNodeAndCanvas(l.guid,!1)}),r){let e=(0,f.cy)(r,this.sceneGraph,this.tutorialParentNode);g.l7.onboarding("append-child",()=>l&&e?.appendChild(l))}if(this.repositionNode(l,n,a),g.l7.onboarding("rename-node",()=>{l&&(l.name=t)}),"FRAME"===e.nodeType)g.l7.onboarding("resize-frame",()=>l?.resizeWithoutConstraints(e.width||100,e.height||100));else if("TEXT"===e.nodeType){i.glU.triggerAction("set-tool-default",null),this.setCursorType(i.z7E.DEFAULT);let t=l.parentNode;if(null!==t){let e="CANVAS"===t.type?t.backgroundColor:t.fills[0].color;g.l7.onboarding("set-text-color",()=>{l&&(l.fills=[{...l.fills[0],color:(0,E.HD)(e||E.UE)?E.UE:E.Uv}])})}let n=e.text.length,a=e.typingDurationPerCharMs||50,r=500;for(let t=0;t<n;t++)this.setTimeoutWrapper({callback:()=>{g.l7.onboarding("set-text",()=>{l?.spliceCharacters(l.textData?.characters?.length??t,l.textData?.characters?.length??t,e.text[t],"BEFORE")})},delay:r,isBlockingTutorialExecution:!1}),r+=Math.max(a-t,40);e.shouldCenterAlign&&this.setTimeoutWrapper({callback:()=>{g.l7.onboarding("set-text-horizontal-alignment",()=>{l&&(l.textAlignHorizontal="CENTER",l.textAlignVertical="CENTER")})},delay:r,isBlockingTutorialExecution:!1}),await this.waitForDuration(r)}return l}getCursorBotNodeInsertionLocation(e){let t;if(e.locationType===O.bn.INSIDE_SCENE_NODE){let{parentMatcher:n,useDefaultLocationIfParentNotFound:a}=e.location,r=(0,f.cy)(n,this.sceneGraph,this.tutorialParentNode);if(!r)return a?this.getCursorBotNodeInsertionLocation({...e,locationType:O.bn.DEFAULT}):void 0;let i=e.location?.offsetX??0,l=e.location?.offsetY??0,{absoluteBoundingBox:{x:o,y:s,w:c,h:d}}=r;e.location.shouldPositionRelativeToCenterOfParent&&(i+=c/2,l+=d/2),t={cursorBotX:o+i,cursorBotY:s+l,insertionX:i,insertionY:l}}else if(e.locationType===O.bn.CANVAS_COORDINATE)t={cursorBotX:e.location.x,cursorBotY:e.location.y,insertionX:e.location.x,insertionY:e.location.y};else{let n=i.qmM.findBoundsToCenterNewTopLevelNode(e.payload.width??100,e.payload.height??100);t={cursorBotX:n.origin.x,cursorBotY:n.origin.y,insertionX:n.origin.x,insertionY:n.origin.y}}if(void 0!==e.cursorPosition&&null==e.nodeDrawingAnimationDuration){let n=e.payload.width??100,a=e.payload.height??100;switch(e.cursorPosition){case O.$2.BOTTOM_LEFT:t.cursorBotY+=a;break;case O.$2.BOTTOM_RIGHT:t.cursorBotX+=n,t.cursorBotY+=a;case O.$2.TOP_LEFT:}}return t}async transition(e,t){if(this.shouldStop)return;let n=async()=>{switch(e.type){case O.HQ.SET_CHAT:{e.preDelay&&await this.waitForDuration(e.preDelay);let{message:t}=e;e.hasBackupMessage&&e.shouldShowBackupMessage(this.sceneGraph)&&(t=e.backupMessage),this.animateChat(1,t);return}case O.HQ.CLEAR_CHAT:this.setCursorBotChat("");return;case O.HQ.TARGET_DOM_NODE:{let n=(0,A.xT)(e.dataOnboardingKey);if(!n){let n={name:e.dataOnboardingKey,tutorialName:t,...this.infoForSentry};e.continueIfNotFound?this.logSentryError("Failed to find DOM node to target",n):this.logErrorAndStopTutorial("Failed to find DOM node to target",n);return}let{targetX:a,targetY:r}=(0,L.L7)(n,e.position,e.offset);await this.waitForDuration(this.moveCursorBot({x:a,y:r,coordinateType:"dom",animationDuration:e.cursorBotMovementAnimationDuration})),e.triggerHoverOfItemWithName&&this.setToolbarActionWithSimulatedHover(e.triggerHoverOfItemWithName);return}case O.HQ.TARGET_SCENE_NODE:{let n=(0,f.cy)(e.meetsConditions,this.sceneGraph,this.tutorialParentNode);if(e.prioritizeSelectedNode&&(n=this.getSelectedNodeIfMatches(e.meetsConditions)??n),!n){e.continueIfNotFound||this.logErrorAndStopTutorial("Failed to find scene node to target",{name:e.nodeNameForLogging,tutorialName:t});return}await this.centerViewportAroundCanvasRect({x:n.absoluteBoundingBox.x,y:n.absoluteBoundingBox.y,width:n.absoluteBoundingBox.w,height:n.absoluteBoundingBox.h},!0);let a=e.position||{x:O.GF.RIGHT,y:O.NI.BOTTOM},{targetX:r,targetY:l}=(0,L.L7)(n,a,e.offset);await this.waitForDuration(this.moveCursorBot({x:r,y:l,coordinateType:"canvas",animationDuration:e.cursorBotMovementAnimationDuration})),e.shouldSelect&&i.Egt.setSelectedNodeAndCanvas(n.guid,!1);return}case O.HQ.SELECT_SCENE_NODE:{let n;if(e.prioritizeSelectedNode&&(n=this.getSelectedNodeIfMatches(e.meetsConditions)),n||(n=(0,f.cy)(e.meetsConditions,this.sceneGraph,this.tutorialParentNode)),!n){this.logErrorAndStopTutorial("Failed to find scene node to select",{name:e.nodeNameForLogging,tutorialName:t});return}i.Egt.setSelectedNodeAndCanvas(n.guid,!1);return}case O.HQ.INSERT_NODE:{let n=this.getCursorBotNodeInsertionLocation(e);if(void 0===n){this.logErrorAndStopTutorial("Could not find parent scene node to insert node",{name:e.nodeNameForLogging,tutorialName:t});return}let a=e.payload.height??100,r=e.payload.width??100;await this.centerViewportAroundCanvasRect({x:n.cursorBotX,y:n.cursorBotY,width:r,height:a},!0),await this.waitForDuration(this.moveCursorBot({x:n.cursorBotX,y:n.cursorBotY,coordinateType:"canvas",animationDuration:e.cursorMovementAnimationDuration||600})),e.nodeDrawingAnimationDuration&&"FRAME"===e.payload.nodeType&&(this.setCursorBotAnimationLayerPosition({x:n.cursorBotX,y:n.cursorBotY,width:r,height:a,duration:e.nodeDrawingAnimationDuration}),await this.waitForDuration(this.moveCursorBot({x:n.cursorBotX+r,y:n.cursorBotY+a,coordinateType:"canvas",animationDuration:e.nodeDrawingAnimationDuration})));let i=n.insertionX??n.cursorBotX,l=n.insertionY??n.cursorBotY;await this.insertNode(e.payload,e.nodeName,i,l,e.locationType===O.bn.INSIDE_SCENE_NODE?e.location.parentMatcher:void 0),this.setCursorBotAnimationLayerPosition(null);return}case O.HQ.MOVE_CURSOR_TO_CENTER_SCREEN:return this.waitForDuration(this.moveCursorBot({x:this.getViewportInfo().offsetX,y:this.getViewportInfo().offsetY,coordinateType:"canvas",animationDuration:e.cursorBotMovementAnimationDuration}));case O.HQ.CHANGE_TOOL:[i.NLJ.FRAME,i.NLJ.TYPE].includes(e.toolType)?(e.toolType===i.NLJ.TYPE?i.glU.triggerAction("set-tool-type",null):e.toolType===i.NLJ.FRAME&&i.glU.triggerAction("set-tool-frame",null),this.setCursorType(i.z7E.CROSSHAIR)):e.toolType===i.NLJ.HAND?(i.glU.triggerAction("set-tool-hand",null),this.setCursorType(i.z7E.HAND)):e.toolType===i.NLJ.NONE&&(i.glU.triggerAction("set-tool-default",null),this.setCursorType(i.z7E.DEFAULT));return;case O.HQ.MOVE_VIEWPORT:if("displace"===e.movementType)return this.navigate({centerX:this.getViewportInfo().offsetX+e.xDisplacement,centerY:this.getViewportInfo().offsetY+e.yDisplacement,scale:this.getViewportInfo().zoomScale});return this.navigate({centerX:e.centerX,centerY:e.centerY,scale:e.scale||this.getViewportInfo().zoomScale});case O.HQ.ADJUST_ZOOM_LEVEL:return this.navigate({centerX:this.getViewportInfo().offsetX,centerY:this.getViewportInfo().offsetY,scale:e.scale});case O.HQ.SET_CURSOR_DIRECTION:this.setCursorDirection(e.direction);return;case O.HQ.SET_PROPERTIES_PANEL_TAB:(0,d.NT)(e.tab);return;case O.HQ.UPDATE_SELECTED_NODE_PROPERTIES:{let t=i.glU.getFirstSelectedNodeIdForCurrentPage(),n=this.sceneGraph.get(t);if(!n){(0,y.x1)(L.tF,"Failed to find selected node to update",void 0,{reportAsSentryError:!0});return}this.appModel.activeCanvasEditModeType===i.m1T.TEXT&&((0,d.wr)(),i.Egt.setSelectedNodeAndCanvas(t,!1)),x.Y5.updateSelectionProperties({..."function"==typeof e.properties?e.properties(n):e.properties},{shouldCommit:I.zk.YES,editScopeType:i.zkO.ONBOARDING});return}case O.HQ.SCROLL_PROPERTIES_PANEL:(0,L.$1)(e.value);return;case O.HQ.FOCUS_INPUT:{let t=document.querySelector(e.selector);t?t.focus():(0,y.x1)(L.tF,"Failed to find input to focus",{selector:e.selector},{reportAsSentryError:!0});return}case O.HQ.SET_VIEWPORT_FRAME_TYPE:this.setCursorBotOverlayType(e.viewportFrameType);return}};await n();let a=e.additionalDelay||0;e.type===O.HQ.SET_CHAT&&(a+=35*e.message.length),a>0&&await this.waitForDuration(a,e.type===O.HQ.SET_CHAT),await e.callback?.(this.dispatch)}}function M(){let[e,t]=(0,l.fp)(_.jr),[n,g]=(0,l.fp)(_.Sf),f=(0,o.Xr)(_.H7),h=(0,o.Xr)(_.nG),E=(0,o.Xr)(_.Ds),y=(0,o.Xr)(_.Dh),b=(0,o.Xr)(_.a8),v=(0,o.Xr)(_.iB),C=(0,o.Xr)(_.oO),w=(0,o.Xr)(_.$i),T=(0,o.Xr)(_.jE),S=!!(0,u.f)("cursor_bot_v2_has_greeted_with_wave"),x=a.useContext(p.kw),k=(0,c.Z)(),N=(0,r.d4)(e=>e.mirror.sceneGraph),I=(0,r.wA)(),{insertTemplate:A}=(0,s.Fz)(),O=(0,m.ut)((0,d.aY)(),i.FAf.DESIGN),L=(0,r.d4)(e=>e.mirror.appModel.showUi),D=(0,r.d4)(e=>e.mirror.appModel),M=a.useRef();return M.current||(M.current=new R(t,g,h,E,b,v,f,C,y,w,T,S,e,n,()=>x.getViewportInfo(),k,N,{isUiShown:L,propertiesPanelTab:O},I,A,D)),a.useEffect(()=>{M.current?.updatePositionState(e,n)},[e,n]),a.useEffect(()=>{M.current?.updateSceneGraphReference(N)},[N]),a.useEffect(()=>{M.current?.updateInfoForSentry({isUiShown:L,propertiesPanelTab:O})},[O,L]),a.useEffect(()=>{M.current?.updateAppModel(D)},[D]),a.useEffect(()=>{M.current?.updateHasWaved(S)},[S]),M.current}},295463:(e,t,n)=>{n.d(t,{W:()=>o});var a=n(587670),r=n(939863),i=n(101505),l=n(309798);function o({isReplay:e,props:t}){let n,o,s,c;let d=(0,l.f)("cursor_bot_v2_make_show_me_primary_cta"),u=()=>{t.onClickNext?.(),a.glU.triggerActionInUserEditScope("set-tool-default",null)},m=t.isFollowUp?(0,r.t)("cursor_bot.got_it"):(0,r.t)("tooltips_plus_onboarding.next"),p=t.isFollowUp?i.c.GOT_IT:i.c.NEXT;return d?(n={ctaText:e?(0,r.t)("cursor_bot.show_me_again"):(0,r.t)("cursor_bot.show_me"),ctaTrackingDescriptor:e?i.c.SHOW_ME_AGAIN:i.c.SHOW_ME},o={ctaText:m,ctaTrackingDescriptor:p},s=t.onClickShowMe,c=u):(n={ctaText:m,ctaTrackingDescriptor:p},o={ctaText:e?(0,r.t)("cursor_bot.show_me_again"):(0,r.t)("cursor_bot.show_me"),ctaTrackingDescriptor:e?i.c.SHOW_ME_AGAIN:i.c.SHOW_ME},s=u,c=t.onClickShowMe),{primaryCtaProps:n,secondaryCtaProps:o,onPrimaryCtaClick:s,onSecondaryCtaClick:c}}},925714:(e,t,n)=>{n.d(t,{$5:()=>p,$j:()=>C,A8:()=>v,AO:()=>D,C7:()=>A,Dl:()=>_,HX:()=>o,IM:()=>P,LW:()=>m,N1:()=>B,Q$:()=>M,TT:()=>O,U4:()=>I,Ui:()=>h,Ur:()=>c,Ut:()=>U,YH:()=>x,YI:()=>f,_q:()=>N,b7:()=>d,bO:()=>T,e7:()=>l,g1:()=>s,mg:()=>u,ok:()=>F,qw:()=>b,ro:()=>E,wG:()=>y,x0:()=>w,xK:()=>L,yz:()=>k,zk:()=>S});var a=n(612028),r=n(774191);let i="Watermelon",l=1440,o=900,s=310,c="Cherries",d=395,u=416,m=24,p=1,_=4,g={r:1,g:1,b:1,a:1},f={r:237/255,g:239/255,b:228/255,a:1};function h(){let e=["r","g","b"].map(e=>({c:e,sort:Math.random()})).sort((e,t)=>e.sort-t.sort).map(({c:e})=>e);return{r:0,g:86/255,b:65/255,[e[0]]:0,[e[1]]:86/255,[e[2]]:Math.floor(86*Math.random())/255,a:1}}let E={r:225/255,g:228/255,b:217/255,a:1},y={family:"Inter",style:"Regular",postscript:"Inter-Regular"},b="Rainier cherries",v="$3.99 / lb",C="Grown in Linden, CA",w="Semi Bold",T="Italic",S="Roboto Serif",x={r:71/255,g:103/255,b:48/255,a:1},k={r:116/255,g:121/255,b:109/255,a:1},N={value:130/1.21,units:"PERCENT"},I={value:150/1.21,units:"PERCENT"};function A(e,t){return!(!R(e)||!(0,a.cy)(e=>e.name===i,t,e)||(0,a.cy)(e=>e.name===c,t,e))}function O(e,t){return!!function(e){let t=e.parentNode;return"FRAME"===e.type&&e.name===c&&e.absoluteBoundingBox.w===d&&e.absoluteBoundingBox.h===u&&!!t&&R(t)}(e)&&(void 0===t||e.childrenGuids.length===t)}function L(e,t){return!!(O(e,t)&&0===e.cornerRadius&&e.strokePaints?.data?.length===0&&(0,r.Vm)(e.fills[0]?.color,g))}function D(e,t){if(!L(e,t))return!1;for(let t of e.childrenNodes)if("TEXT"===t.type&&!U(t))return!1;return!0}function R(e){return!!e&&"FRAME"===e.type&&"Products"===e.name&&e.absoluteBoundingBox.w===l&&e.absoluteBoundingBox.h===o}function M(e,t){let n=e.parentNode;return"FRAME"===e.type&&e.name===i&&!!n&&A(n,t)}function P(e){return[{type:"SOLID",color:e,blendMode:"NORMAL",opacity:1,visible:!0}]}function F(e){return"FRAME"===e.type&&e.absoluteBoundingBox.w>=90&&!!e.parentNode&&0===e.childrenGuids.length}let B="Hello";function U(e,t){if(void 0!==t&&e.name.toLowerCase()!==t.toLowerCase()||"TEXT"!==e.type||12!==e.fontSize||e.fontName.family!==y.family||e.fontName.style!==y.style)return!1;let n=e.parentNode;return!!n&&L(n,_)}},425037:(e,t,n)=>{n.d(t,{p:()=>E});var a=n(411855),r=n(587670),i=n(612028),l=n(966712),o=n(901536),s=n(939863),c=n(101505),d=n(672517),u=n(833629),m=n(168289),p=n(396021),_=n(295463),g=n(925714),f=n(460528),h=n(493168);function E(e,t){let n=m.wn.FORMAT_FRAME,{tutorialPlayedUserFlag:E,stepCompletedUserFlag:y}=(0,p.Of)(n,t);return{name:n,tutorialPlayedUserFlag:E,stepCompletedUserFlag:y,duration:t?17500:9400,steps:function(e){let t=[];return t.push({type:m.HQ.SET_PROPERTIES_PANEL_TAB,tab:r.FAf.DESIGN}),e?t.push({type:m.HQ.SELECT_SCENE_NODE,meetsConditions:e=>(0,g.xK)(e,g.Dl),nodeNameForLogging:m.Le.PRODUCT_FRAME_CHERRIES_FRAME,additionalDelay:400}):t.push({type:m.HQ.SELECT_SCENE_NODE,meetsConditions:e=>"FRAME"===e.type,nodeNameForLogging:m.Le.NO_BASICS_FILE_FRAME,additionalDelay:400,prioritizeSelectedNode:!0}),t.push({type:m.HQ.SET_CURSOR_DIRECTION,direction:m.zu.RIGHT},{type:m.HQ.SET_CHAT,message:"Change how your frames look here.",additionalDelay:500},{type:m.HQ.TARGET_DOM_NODE,dataOnboardingKey:f.W,offset:{x:-28,y:132},position:{x:m.GF.LEFT,y:m.NI.TOP},cursorBotMovementAnimationDuration:600},{type:m.HQ.SET_VIEWPORT_FRAME_TYPE,viewportFrameType:m.JJ.PROPERTIES_PANEL,additionalDelay:1500},{type:m.HQ.SET_CHAT,message:e?"For example: Add color...":"For example: Their color!",additionalDelay:1e3},{type:m.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,u.Lh)(u.D8.PROPERTIES_PANEL_TITLE,"fill"),position:{x:m.GF.LEFT,y:m.NI.CENTER},additionalDelay:500,cursorBotMovementAnimationDuration:1e3},{type:m.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:()=>({fillPaints:(0,g.IM)(e?g.YI:(0,g.Ui)())}),additionalDelay:0},{type:m.HQ.FOCUS_INPUT,selector:`[data-onboarding-key="${(0,u.Lh)(u.D8.PAINT_PANEL_ROW,"paint-1-0")}"] input`,additionalDelay:1500},{type:m.HQ.CLEAR_CHAT}),e&&t.push({type:m.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,u.Lh)(u.D8.PROPERTIES_PANEL_TITLE,"stroke"),position:{x:m.GF.LEFT,y:m.NI.CENTER},cursorBotMovementAnimationDuration:300,additionalDelay:300},{type:m.HQ.SET_CHAT,message:"A border...",additionalDelay:500},{type:m.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{strokePaints:(0,g.IM)(g.ro),strokeWeight:2},additionalDelay:10},{type:m.HQ.FOCUS_INPUT,selector:`[data-onboarding-key="${(0,u.Lh)(u.D8.PAINT_PANEL_ROW,"paint-2-0")}"] input`,additionalDelay:1500},{type:m.HQ.SCROLL_PROPERTIES_PANEL,value:0,additionalDelay:500},{type:m.HQ.CLEAR_CHAT},{type:m.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,u.Lh)(u.D8.SCRUBBABLE_CONTROL,"corner-radius"),offset:{x:-25,y:5},cursorBotMovementAnimationDuration:700,additionalDelay:300},{type:m.HQ.SET_CHAT,message:"Or rounded corners!",additionalDelay:500},{type:m.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{cornerRadius:g.LW},additionalDelay:10},{type:m.HQ.FOCUS_INPUT,selector:`[data-onboarding-key="${(0,u.Lh)(u.D8.SCRUBBABLE_CONTROL,"corner-radius")}"] input`,additionalDelay:2500},{type:m.HQ.CLEAR_CHAT}),t}(t),startingState:t?{centerNodeMatcher:e=>(0,g.xK)(e,g.Dl),resetStartingState:{hubFileId:l.Ay()?.cursor_bot?.ginger_formatted_text_hub_file_id,nodeHeight:g.HX,nodeWidth:g.e7}}:{centerNodeMatcher:e=>"FRAME"===e.type},TooltipElement:n=>{let{primaryCtaProps:r,secondaryCtaProps:l,onPrimaryCtaClick:u,onSecondaryCtaClick:m}=(0,_.W)({isReplay:e,props:n});return a.createElement(h.Z,{onPrimaryCtaClick:u,primaryCtaProps:r,secondaryCtaProps:l,onSecondaryCtaClick:m,lowerLeftText:n.onClickBack?a.createElement(d.$z,{onClick:n.onClickBack,className:o.cx.textInherit.bgTransparent.$,trackingProperties:{ctaTrackingDescriptor:c.c.BACK}},(0,s.tx)("cursor_bot.back")):void 0,onClose:n.onClickClose,skip:n.skip,frameNodeMatcher:t?e=>(0,i.WY)(e=>(0,g.TT)(e,g.Dl),e)||(0,i.cy)((e,t)=>(0,g.Q$)(e,t),e):void 0,title:(0,s.t)("cursor_bot.make_it_look_just_right"),bodyText:t?(0,s.t)("cursor_bot.design_panel_can_change_objects"):(0,s.t)("cursor_bot.design_panel_is_key"),fromCursorBot:!0,isFollowUp:n.isFollowUp})}}}},354537:(e,t,n)=>{n.d(t,{Z:()=>y});var a=n(411855),r=n(587670),i=n(612028),l=n(707458),o=n(966712),s=n(901536),c=n(939863),d=n(239349),u=n(101505),m=n(672517),p=n(833629),_=n(168289),g=n(396021),f=n(295463),h=n(925714),E=n(258525);function y(e,t){let n=_.wn.FORMAT_TEXT,{tutorialPlayedUserFlag:y,stepCompletedUserFlag:b}=(0,g.Of)(n,t);return{name:n,tutorialPlayedUserFlag:y,stepCompletedUserFlag:b,duration:t?10500:8500,steps:function(e){let t=[];return t.push({type:_.HQ.SET_PROPERTIES_PANEL_TAB,tab:r.FAf.DESIGN}),e&&t.push({type:_.HQ.SELECT_SCENE_NODE,meetsConditions:e=>(0,h.Ut)(e,h.$j),prioritizeSelectedNode:!0,nodeNameForLogging:_.Le.CHERRIES_FRAME_GROWN_TEXT,additionalDelay:1e3},{type:_.HQ.TARGET_DOM_NODE,dataOnboardingKey:E.B,offset:{x:-150,y:-50},cursorBotMovementAnimationDuration:800},{type:_.HQ.SET_CHAT,message:"Change how your text looks here.",additionalDelay:1500}),t.push({type:_.HQ.SET_CURSOR_DIRECTION,direction:_.zu.RIGHT},{type:_.HQ.SET_CHAT,message:"Pick your style, size, alignment, and more.",additionalDelay:1200}),e?t.push({type:_.HQ.SELECT_SCENE_NODE,meetsConditions:e=>(0,h.Ut)(e,h.qw),nodeNameForLogging:_.Le.CHERRIES_FRAME_CHERRIES_TEXT,prioritizeSelectedNode:!0},{type:_.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,p.Lh)(p.D8.TEXT_PANEL,"font-style-button"),position:{x:_.GF.LEFT,y:_.NI.CENTER},cursorBotMovementAnimationDuration:500,additionalDelay:1e3},{type:_.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{fontSize:20,fontStyle:h.x0,lineHeight:h._q}},{type:_.HQ.SELECT_SCENE_NODE,meetsConditions:e=>(0,h.Ut)(e,h.A8),nodeNameForLogging:_.Le.CHERRIES_FRAME_PRICE_TEXT},{type:_.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{fillPaints:(0,h.IM)(h.YH),fontSize:20,fontStyle:h.x0,lineHeight:h._q,textAlignHorizontal:"RIGHT"}},{type:_.HQ.SELECT_SCENE_NODE,meetsConditions:e=>(0,h.Ut)(e,h.$j),nodeNameForLogging:_.Le.CHERRIES_FRAME_GROWN_TEXT},{type:_.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:{fillPaints:(0,h.IM)(h.yz),fontSize:16,lineHeight:h.U4},additionalDelay:1500}):t.push({type:_.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,p.Lh)(p.D8.TEXT_PANEL,"font-picker-button"),position:{x:_.GF.LEFT,y:_.NI.CENTER},cursorBotMovementAnimationDuration:600,additionalDelay:500},{type:_.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:e=>({fontFamily:e.fontName.family===h.zk?h.wG.family:h.zk}),additionalDelay:300},{type:_.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,p.Lh)(p.D8.TEXT_PANEL,"font-style-button"),position:{x:_.GF.LEFT,y:_.NI.CENTER},cursorBotMovementAnimationDuration:600,additionalDelay:500},{type:_.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:e=>({fontStyle:e.fontName.style===h.bO?h.wG.style:h.bO}),additionalDelay:300},{type:_.HQ.TARGET_DOM_NODE,dataOnboardingKey:(0,p.Lh)(p.D8.SCRUBBABLE_CONTROL,"font-size"),position:{x:_.GF.LEFT,y:_.NI.CENTER},cursorBotMovementAnimationDuration:600},{type:_.HQ.FOCUS_INPUT,selector:`[data-onboarding-key="${(0,p.Lh)(p.D8.SCRUBBABLE_CONTROL,"font-size")}"] input`,additionalDelay:500},{type:_.HQ.UPDATE_SELECTED_NODE_PROPERTIES,properties:e=>({fontSize:16===e.fontSize?12:16}),additionalDelay:1500}),t.push({type:_.HQ.CLEAR_CHAT}),t}(t),startingViewportFrameType:t?_.JJ.TEXT_PANEL:_.JJ.PROPERTIES_PANEL,startingState:t?{centerNodeMatcher:e=>(0,h.AO)(e,4),resetStartingState:{hubFileId:o.Ay()?.cursor_bot?.ginger_hub_file_id,nodeHeight:h.HX,nodeWidth:h.e7}}:{centerNodeMatcher:e=>"TEXT"===e.type},TooltipElement:n=>{let r=(0,d.VW)(),{primaryCtaProps:o,secondaryCtaProps:p,onPrimaryCtaClick:_,onSecondaryCtaClick:g}=(0,f.W)({isReplay:e,props:n});return a.createElement(E.P,{onPrimaryCtaClick:_,primaryCtaProps:o,secondaryCtaProps:p,onSecondaryCtaClick:g,lowerLeftText:n.onClickBack?a.createElement(m.$z,{onClick:n.onClickBack,className:s.cx.textInherit.bgTransparent.$,trackingProperties:{ctaTrackingDescriptor:u.c.BACK}},(0,c.tx)("cursor_bot.back")):void 0,onClose:n.onClickClose,getNodeToSelect:t?()=>(0,i.WY)(e=>"TEXT"===e.type&&(e.name===h.$j||"Grown in Tracy, CA"===e.name),l.q.instance):()=>r?.type==="TEXT"?r:(0,i.WY)(e=>"TEXT"===e.type,l.q.instance),skip:n.skip,title:t?(0,c.t)("cursor_bot.pick_the_perfect_font"):(0,c.t)("cursor_bot.and_pick_the_perfect_font"),bodyText:(0,c.t)("cursor_bot.use_the_design_panel_to_turn_basic_text_into_titles"),fromCursorBot:!0,isFollowUp:n.isFollowUp})}}}},615018:(e,t,n)=>{n.d(t,{k_:()=>td,yL:()=>tg});var a={};n.r(a),n.d(a,{GLARE_ANIMATION:()=>eJ,GRAY_BACKGROUND:()=>eX,NONE:()=>eQ,ORANGE_GRADIENT:()=>eY,PINK_GRADIENT:()=>e$,animateBg:()=>eq,glareAnimation:()=>eZ});var r=n(411855),i=n(188507),l=n(587670),o=n(629019),s=n.n(o),c=n(344780),d=n(568214),u=n(22332),m=n(966712),p=n(192437),_=n(798099),g=n(809831),f=n(226055),h=n(949632),E=n(630331),y=n(457630),b=n(805286),v=n(460289),C=n(754209),w=n(100197),T=n(433861),S=n(593392),x=(e=>(e.PINK_GRADIENT="PINK_GRADIENT",e.ORANGE_GRADIENT="ORANGE_GRADIENT",e.GRAY_BACKGROUND="GRAY_BACKGROUND",e.GLARE_ANIMATION="GLARE_ANIMATION",e.NONE="NONE",e))(x||{});let k=new Map([["happy birthday","PINK_GRADIENT"],["bday","PINK_GRADIENT"],["hbd","PINK_GRADIENT"],["fire","ORANGE_GRADIENT"],["fiire","ORANGE_GRADIENT"],["fiiire","ORANGE_GRADIENT"],["fiiiire","ORANGE_GRADIENT"],["lit","ORANGE_GRADIENT"],["heat","ORANGE_GRADIENT"],["hot","ORANGE_GRADIENT"],["spicy","ORANGE_GRADIENT"],["lowkey","GRAY_BACKGROUND"],["slick","GLARE_ANIMATION"],["this is clean","GLARE_ANIMATION"],["this clean","GLARE_ANIMATION"],["cleann","GLARE_ANIMATION"],["sharp","GLARE_ANIMATION"],["immaculate","GLARE_ANIMATION"],["pristine","GLARE_ANIMATION"],["polished","GLARE_ANIMATION"],["spotless","GLARE_ANIMATION"],["shiny","GLARE_ANIMATION"]]);(0,m.kc)().figjam_latin_emote_easter_eggs&&(k.set("me encanta","PINK_GRADIENT"),k.set("hola","PINK_GRADIENT"),k.set("bienvenides","PINK_GRADIENT"));let N=new Map([["https://static.figma.com/uploads/a83de90bf34495081ce2e8bcaf28d1d2c16e5186",["lol","lmao","rofl","lmfao","hehe","haha","sksk","cryingg","dyingg","so funny","rotfl"]],["https://static.figma.com/uploads/d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2",["fire","fiire","fiiire","fiiiire","spicy","oh snap","dope","hot","heat","so good","siick","siiick","siiiick","on point","rad","sweeet","sweeeet","wagmi","wgmi","gmi"]],["https://static.figma.com/uploads/0606e9d967b5abb6d9a2853c2fff589f2ec2fc05",["hey","hiya","heyo","hello","howdy","whats up","what's up","good morning","gm","greetings","bye","later","ciao","see ya","cya","wave"]],["https://static.figma.com/uploads/ffd0635e8f9322352eff0c15411ac0b536b98d87",["taking a look","sus","let me look","let me see","lemme see","i see what you did there"]],["https://static.figma.com/uploads/ff5be810b821d264cc2c95f665d24a867c34e587",["gorgeous","stunning","love","loove","looove","loooove","looooove","luv","woww","awww","<3","yass","cute","amazingg","heart eyes","beautiful","my eyeballs are literally two giant hearts right now and i couldn't be happier","beautiful","adorable"]],["https://static.figma.com/uploads/78f60a21d2616c2a24c7645d8636dec855e48ffb",["ngmi","bummer","sad face","uh oh",":(","noo","oh no","sorry to hear that","rip","rats","big sad","tragic","fail","womp","that sucks"]],["https://static.figma.com/uploads/1429964104bceac90c5c8e731ce4cc50b27e2797",["wtf","whoa","no way",":O","woah","whaat","whaaat","shook","shooketh","omg","omfg","speechless","oh snap","surprised"]],["https://static.figma.com/uploads/e15fa4fbba4b88b4f1f04ba64bb12abf12bcbc6c",["gift","hbd","bday","birthday"]],["https://static.figma.com/uploads/778eea842ed4020f6209e97c77abcd84984e5c94",["cool","coool","swag","chill"]],["https://static.figma.com/emoji/5/noto/medium/1f410.png",["goat"]]]);(0,m.kc)().figjam_latin_emote_easter_eggs&&(N.set("https://static.figma.com/uploads/62f55b94bf05d9a49731714238dd5e6ce716225d",["me encanta","ole","vamos"]),N.set("https://static.figma.com/uploads/88ea7d675b3ebeebbd917bf6857afa502b51d928",["bienvenidos","bienvenides","bienvenidas"]),N.set("https://static.figma.com/uploads/89a607910c3edfcaf5efa1e19bc8b646f2e47a6a",["fuego","picante"]),N.set("https://static.figma.com/uploads/8b29bcdf89d32bafec42bee873327384b55eb54b",["hola","brillante","excelente","bien","muy bien","sol"]));var I=(e=>(e[e.Standard=0]="Standard",e))(I||{});let A=new Map;N.forEach((e,t)=>{!function(e,t,n){e.forEach(e=>n.set(e,t))}(e,t,A)});let O=(e,t)=>{let n=t.get(e);n&&b.R9.sendReaction(n)};var L=n(368588),D=n(50098),R=n(517333),M=n(313894);class P extends M.w{constructor(){super(),this.type="Particle",this.velocity={x:0,y:0},this.kick={x:0,y:0},this.kickDecay=1,this.gravity={x:0,y:0}}static fastVectorAddScaled(e,t,n){e.x+=t.x*n,e.y+=t.y*n}update(e){return P.fastVectorAddScaled(this.position,this.velocity,e),P.fastVectorAddScaled(this.position,this.kick,e),P.fastVectorAddScaled(this.kick,this.kick,Math.pow(this.kickDecay,e/.016)-1),P.fastVectorAddScaled(this.velocity,this.gravity,e),super.update(e)}}class F extends M.L{constructor(){super(...arguments),this.MAX_PARTICLES=512,this.addParticle=e=>{this.getParticles().length<this.MAX_PARTICLES&&this.addEntity(e)}}getParticles(){return this.getEntities().filter(e=>e instanceof P)}}var B=n(38329),U=n(737433),G=n(939683),K=n(374626),V=n(886653),H=n(617453),z=n(193212);let W=class e{constructor(){this.previouslyCollidingCursors=new Set}updateAndCheckCollisions(t){let n=new Set,a=[];for(let r=0;r<t.length;r++){let i=t[r],l=e.closestNonSelfCursor(i,t.slice(r+1));if(l&&e.distanceBetween(i.mouse?.canvasSpacePosition,l.mouse?.canvasSpacePosition)<e.CURSOR_COLLISION_RADIUS){let t=e.makeCursorProximityKey(i,l);this.previouslyCollidingCursors.has(t)||a.push([i,l]),n.add(t)}}return this.previouslyCollidingCursors=n,a}static makeCursorProximityKey(e,t){return[e.sessionId,t.sessionId].sort().join("+")}static distanceBetween(e,t){if(!e||!t)return 1/0;let n=e.x-t.x,a=e.y-t.y;return Math.sqrt(n*n+a*a)}static computeMidpoint(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}static closestNonSelfCursor(t,n){let a=1/0,r=null;return n.forEach(n=>{if(n.sessionId!==t.sessionId){let i=e.distanceBetween(t.mouse?.canvasSpacePosition,n.mouse?.canvasSpacePosition);i<a&&(a=i,r=n)}}),r}};W.CURSOR_COLLISION_RADIUS=80;let j=(0,n(38580).eU)(!1);class $ extends M.w{constructor(e){super(),this.position=e,this.type="BubblePopEntity",this.sortOrder=-2}}class q extends M.w{constructor(e){super(),this.position=e,this.type="SparkleEntity"}}class Y extends M.w{constructor(e){super(),this.position=e,this.type="StarParticle",this.scale=(1+Math.random())*.3,this.sortOrder=-.5,this.customData.emissionAngle=Math.random()*Math.PI*2}}class X extends M.w{constructor(e){super(),this.timedTriggers=e}update(e){return this.age+=e,this.timedTriggers=this.timedTriggers.filter(e=>!(this.age>=e.time)||(e.event(),!1)),this.timedTriggers.length>0}}let J=class e extends M.w{constructor({startingRelativePosition:t,startingRotation:n,position:a,viewportZoomScale:r,cursorOnRightForWindup:i,cursorOnRightForCollision:l,sessionId:o,getUserCursorTransform:s}){super(),this.type="AnimatedCursorEntity",this.lifetime=.85,l&&(this.sortOrder=-1),this.position=a,this.viewportZoomScale=r,this.cursorOnRightForWindup=i,this.cursorOnRightForCollision=l;let c={transform:`translate(${t.x}px, ${t.y}px) rotate(${n}rad)`},d={transform:`translate(${(this.cursorOnRightForWindup?1:-1)*90}px, 70px) rotate(${this.cursorOnRightForWindup?1:-1}rad) scale(0.9)`},u={transform:`translate(${(this.cursorOnRightForCollision?1:-1)*10}px, 0px) scale(2)`},m=e.RANDOM_VECTORS.map(e=>({transform:`translate(${10*e.x}px, ${10*e.y}px) ${u.transform}`})),p=1e3/60;this.customData={sessionId:o,animations:[{keyframes:[c,d],timing:{duration:12*p,easing:"cubic-bezier(.26,.32,.12,1)"}},{keyframes:[d,u],timing:{delay:12*p,duration:4*p,easing:"cubic-bezier(.16,.5,.47,1.25)"}},{keyframes:m,timing:{delay:16*p,duration:4*p,easing:`steps(${m.length})`}},{keyframes:[u,u],timing:{delay:20*p,duration:18*p}}],getReturnToCursorTransform:t=>{let n=(this.cursorOnRightForCollision?1:-1)*10,a=s(),i=(a.position.x-this.position.x)*r,l=(a.position.y-this.position.y)*r,o=a.rotation;return`translate(${e.lerp(n,i,t)}px,${e.lerp(0,l,t)}px) rotate(${e.lerp(0,o,t)}rad) scale(${e.lerp(2,1,t)})`}}}static lerp(e,t,n){return e*(1-n)+t*n}};J.RANDOM_VECTORS=[{x:.626086772987037,y:-.24715772511262912},{x:.16558013014491735,y:-.4962441097195551}];var Z=n(667867);let Q=class e{constructor(){this.wiggleMeter=0,this.wiggleMode=!1,this.lastUpdateTime=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.speedFactor=0,this.mouseX=0,this.mouseY=0,this.hasLastMousePosition=!1,this.lastMouseX=0,this.lastMouseY=0,this.lastDirectionX=0,this.lastDirectionY=0,this.subscriptions=[],this.mouseLeftCanvas=!1,this.highFiveKeyPressed=!1,this.mouseButtonHeld=!1}getWiggleMode(){return this.wiggleMode}getShakeFactor(){return this.shakeFactor}getAboutToHide(){return this.getWiggleMode()&&this.wiggleMeter<e.WIGGLE_MODE_ABOUT_TO_HIDE_TIME/e.WIGGLE_MODE_DEACTIVATION_TIME}onWiggleModeChange(e){return this.subscriptions.push(e),()=>{let t=this.subscriptions.indexOf(e);t>=0&&this.subscriptions.splice(t,1)}}setWiggleMode(e){if(e!==this.wiggleMode)for(let t of(this.wiggleMode=e,this.subscriptions))t(this.wiggleMode)}setMouseLeftCanvas(e){this.mouseLeftCanvas=e}getMouseLeftCanvas(){return this.mouseLeftCanvas}setHighFiveKeyPressed(e){this.highFiveKeyPressed=e}getHighFiveKeyPressed(){return this.highFiveKeyPressed}setMouseButtonHeld(e){this.mouseButtonHeld=e,this.update()}getMousePosition(){return{x:this.mouseX,y:this.mouseY,overCanvas:!this.mouseLeftCanvas}}stopWigglingNow(){this.speedFactor=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.wiggleMeter=0,this.hasLastMousePosition=!1,this.lastDirectionX=0,this.lastDirectionY=0,this.setWiggleMode(!1),this.update()}startOrRefreshWiggle(){this.setWiggleMode(!0),this.wiggleMeter=1}getDeltaTime(){let e=performance.now(),t=e-this.lastUpdateTime;return this.lastUpdateTime=e,t/1e3}update(e,t){e?this.setMousePositionAndUpdate(e,t):this.updateWiggleMeter(t)}setMousePositionAndUpdate(t,n){if(this.mouseLeftCanvas||this.mouseButtonHeld)return;let a="number"==typeof n?n:this.getDeltaTime();if(a<=0)return;this.mouseX=t.x,this.mouseY=t.y;let r=1,i=(this.mouseX-this.lastMouseX)/a,l=(this.mouseY-this.lastMouseY)/a;if(this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,!this.hasLastMousePosition){this.hasLastMousePosition=!0;return}let o=Math.sqrt(i*i+l*l);if(o>0){let e=i/o,t=l/o;r=e*this.lastDirectionX+t*this.lastDirectionY,this.lastDirectionX=e,this.lastDirectionY=t}let s=a/e.WIGGLE_MODE_MOVEMENT_DECAY_TIME,c=a/e.WIGGLE_MODE_MOVEMENT_MIN_TIME+s;this.speedFactor+=Math.min(o*e.WIGGLE_MODE_MOVEMENT_SENSITIVITY,c),this.speedFactor=Math.max(0,this.speedFactor-s),this.speedFactor=Math.min(1,this.speedFactor);let d=this.speedFactor>=.8,u=d&&r<0,m=Math.abs(this.lastDirectionX)>Math.abs(this.lastDirectionY);d&&u&&m&&(this.shakeFactor+=1/(this.wiggleMode?e.WIGGLE_MODE_REPLENISH_SHAKES:e.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER),this.shakeGracePeriod=1),this.shakeGracePeriod>0?this.shakeGracePeriod=Math.max(this.shakeGracePeriod-a/e.WIGGLE_MODE_SHAKE_GRACE_PERIOD,0):this.shakeFactor-=a/e.WIGGLE_MODE_SHAKE_RESET_TIME,this.shakeFactor=Math.min(Math.max(this.shakeFactor,0),1),d&&(Math.abs(this.shakeFactor)>=.8?this.wiggleMeter=1:this.wiggleMode&&Math.abs(this.shakeFactor)>=.3&&(this.wiggleMeter=Math.max(this.wiggleMeter,Math.abs(this.shakeFactor)))),this.updateWiggleMeter(a)}updateWiggleMeter(t){if((t="number"==typeof t?t:this.getDeltaTime())<=0)return;this.wiggleMeter<=0?this.setWiggleMode(!1):this.wiggleMeter>=1&&this.setWiggleMode(!0);let n=0;n=this.mouseLeftCanvas?-e.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD:this.highFiveKeyPressed?e.WIGGLE_MODE_HIGH_FIVE_KEY_TIME:this.wiggleMode?-e.WIGGLE_MODE_DEACTIVATION_TIME:-e.WIGGLE_MODE_MOUSE_RESET_TIME,this.wiggleMeter+=t/n,this.wiggleMeter=Math.min(Math.max(this.wiggleMeter,0),1)}};function ee(){return{cursorWiggleDetector:new Q,cursorEntitySystem:new F,cursorCollisionDetector:new W,cursorKinematics:new Z.p}}Q.WIGGLE_MODE_DEACTIVATION_TIME=6,Q.WIGGLE_MODE_ABOUT_TO_HIDE_TIME=3,Q.WIGGLE_MODE_HIGH_FIVE_KEY_TIME=.5,Q.WIGGLE_MODE_MOUSE_RESET_TIME=.6,Q.WIGGLE_MODE_MOVEMENT_SENSITIVITY=4e-5,Q.WIGGLE_MODE_MOVEMENT_MIN_TIME=.1,Q.WIGGLE_MODE_MOVEMENT_DECAY_TIME=1.5,Q.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER=6.5,Q.WIGGLE_MODE_REPLENISH_SHAKES=3.5,Q.WIGGLE_MODE_SHAKE_GRACE_PERIOD=.3,Q.WIGGLE_MODE_SHAKE_RESET_TIME=.5,Q.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD=.3;let et=(0,V.xx)(function(e){return e.reduce((e,t)=>(e[t.sessionID]=t,e),{})});function en(e,t,n,a,r){let i=((0,Z.I)(t.getHandsOnRight(),n)?1:-1)*(Math.PI/4),l=32/a,o={x:e.x+l*Math.sin(i),y:e.y-l*Math.cos(i)};return r||(o.x+=16/a,o.y+=16/a),{position:o,rotation:i}}function ea(e,t){return!!e.find(e=>"AnimatedCursorEntity"===e.type&&e.customData.sessionId===t)}function er(e,t,n,a,r){return!("editor"!==e.deviceName||t?.mouse?.canvasSpacePosition==null||isNaN(t?.mouse?.canvasSpacePosition.x)||t.mouse.pageId!==n||(-1===t.lastMouseMoveMs||window.performance.now()-t.lastMouseMoveMs>6e4)&&a!==e.sessionID)&&e.sessionID!==r}function ei(){let e=(0,g.lg)(),t=(0,v.XM)();return"whiteboard"===e&&!t}var el=n(134288),eo=n(323434),es=n(36127);function ec({viewportInfo:e,bb:t}){let{zoomScale:n}=e,a=t.w*n,i=t.h*n,l=(n-1)*t.x,o=(n-1)*t.y,s={transform:`translate(${t.x+l}px, ${t.y+o}px)`,width:`${a}px`,height:`${i}px`};return r.createElement(el.P.div,{className:"ai_animations--aiSelectionBox--vHELC",style:s,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1}})}function ed({viewportInfo:e}){let t=Object.values((0,K.md)(es.bu)),n=(0,K.md)(es.aG);return r.createElement(eo.N,null,n&&t.map(t=>r.createElement(ec,{key:t.guid,viewportInfo:e,bb:t.boundingBox})))}function eu(e,t){let n=3*e,a=3*e,r=1.7999999999999998*e,i=[];for(let e=0;e<=100;e+=2){if(0===e||100===e){i.push(em(0,0,0));continue}let t=Math.floor(Math.random()*n)-n/2,l=Math.floor(Math.random()*a)-a/2,o=Math.floor(Math.random()*r)-r/2;i.push(em(t,l,o))}return new Animation(new KeyframeEffect(t,i,{duration:100,easing:"ease-in-out",iterations:1/0}),document.timeline)}function em(e,t,n){return{transform:`translate(${e}px, ${t}px) rotate(${n}deg)`}}function ep(e){return!!e.length&&e.some(e=>"running"===e.playState)}function e_(e){let{content:t,children:n}=e,[a,i]=(0,r.useState)(0),l=(0,r.useRef)(0),o=(0,r.useRef)([]),s=r.useRef(null),[c,d]=(0,r.useState)([]),u=(0,G.am)(),m=(0,r.useMemo)(()=>0===t.length?0:((t.match(/\!+$/g)||[])[0]||"").length,[t]),p=(0,r.useCallback)(e=>{clearTimeout(l.current),l.current=setTimeout(()=>{i(e=>(e>0&&p(250),Math.max(e-1,0)))},e)},[]);return(0,r.useEffect)(()=>{i(m),p(1e3)},[m,p]),(0,r.useEffect)(()=>{if(!s.current)return;a>1&&!o.current.length&&(o.current=[eu(1,s.current),eu(1.5,s.current),eu(2,s.current),eu(2.5,s.current),eu(3,s.current)]);let e=ep(o.current);if(a>1){let e=Math.min(a-1-1,o.current.length-1);o.current.forEach((t,n)=>{n===e?t.play():t.cancel()})}else o.current.forEach(e=>e?.cancel());let t=ep(o.current);!e&&t&&u("cursor_chat_rumble_triggered"),d(o.current.map(e=>e?.playState))},[a,u]),r.createElement("div",{"data-testid":"chat-animation-wrapper","data-test-animation-state":c,ref:s},n)}let eg={HANDLE_KEYDOWN:"HANDLE_KEYDOWN",HANDLE_INPUT:"HANDLE_INPUT",STOP_CHATTING:"STOP_CHATTING",START_FADING_INACTIVE_CHAT:"START_FADING_INACTIVE_CHAT",STOP_FADING_INACTIVE_CHAT:"STOP_FADING_INACTIVE_CHAT",HANDLE_EMOTE_ANIMATION_END:"HANDLE_EMOTE_ANIMATION_END"},ef={currentUserInput:"",previousLine:"",fadingOutText:"",isWidthLocked:!1,isShowingEmptyNewline:!1,inputIsEmpty:!0,currentEmoteBackground:x.NONE,width:0,isFigJam:!1,isFadingInactiveChat:!1,shouldClose:!1,hasTypedAnything:!1},eh=e=>{let t=document.createElement("canvas").getContext("2d");if(!t)return e;t.font="14px Inter, sans-serif";let n=Math.max(t.measureText(e.currentUserInput).width,t.measureText(e.previousLine).width);return{...e,width:n}};function eE(e,t){var n;let a=e.toLocaleLowerCase(),r=!(1===(n=a.charAt(a.length-t.length-1)).length&&/[A-Za-z]/.test(n));return a.endsWith(t)&&r}let ey=(e,t,n)=>{for(let t of A.keys())eE(e,t)&&(!function(e,t){O(e,t),O(e,t),O(e,t),O(e,t),O(e,t),O(e,t)}(t,A),n("cursor_chat_emote_triggered",{keyword:t}))},eb=e=>{for(let[t,n]of k)if(n&&eE(e,t))return{key:t,background:n}};function ev(e,t){switch(t.type){case eg.HANDLE_INPUT:{let n={...e},{value:a}=t.payload;if(e.isShowingEmptyNewline&&(n.isShowingEmptyNewline=!1),a.length>n.currentUserInput.length&&n.isFigJam){let{key:e,background:r}=eb(a)??{};r&&(n.currentEmoteBackground=r,t.payload.trackEvent("cursor_chat_background_effect_triggered",{keyword:e})),ey(a,I.Standard,t.payload.trackEvent)}return n.fadingOutText=n.previousLine,n.previousLine="",n.currentUserInput=a,e.hasTypedAnything||t.payload.trackEvent("cursor_chat_typed_something"),n.hasTypedAnything=!0,n.inputIsEmpty=0===n.currentUserInput.length&&0===n.previousLine.length,eh(n)}case eg.HANDLE_KEYDOWN:{let n=t.payload;if("Enter"===n.key){if(!1===e.hasTypedAnything)return e;let t={...e};return t.isShowingEmptyNewline=!0,t.inputIsEmpty=!1,t.isWidthLocked=!0,t.fadingOutText=t.previousLine,t.previousLine=t.currentUserInput,t.currentUserInput="",eh(t)}if("Escape"===n.key)return{...e,shouldClose:!0};return e}case eg.HANDLE_EMOTE_ANIMATION_END:{let t={...e};return t.isWidthLocked=!1,t.currentEmoteBackground=x.NONE,eh(t)}case eg.STOP_CHATTING:return{...e,shouldClose:!0};case eg.START_FADING_INACTIVE_CHAT:return{...e,isFadingInactiveChat:!0};case eg.STOP_FADING_INACTIVE_CHAT:return{...e,isFadingInactiveChat:!1};default:return e}}var eC=n(301922),ew=n(634832),eT=n(330678),eS=n(277204);function ex({viewportInfo:e,cursorEntities:t}){let n=(0,C.KP)(),a=(0,i.d4)(({multiplayer:{allUsers:e}})=>e);return r.createElement(r.Fragment,null,t.map(t=>{let i;switch(t.type){case"StarParticle":i=r.createElement(eM,{emissionAngle:t.customData.emissionAngle});break;case"BubblePopEntity":i=r.createElement(eB,null);break;case"SparkleEntity":i=r.createElement(eU,null);break;case"AnimatedCursorEntity":let l=t.customData.sessionId,o=n.toString()===l,s=o?eO:a.find(e=>e.sessionID.toString()===l)?.color;i=r.createElement(eP,{customData:t.customData,color:s,isCurrentUser:o})}return i&&r.createElement(eN,{canvasPosition:t.position,viewportInfo:e,key:t.id,rotation:t.rotation,scale:t.scale},i)}))}function ek({cursorWiggleStatus:e,temporarilyHide:t,isCursorHandOnRight:n}){return r.createElement("div",{className:"cursor_high_five--highFiveCursorForSelf--cVByQ"},r.createElement(eA,{color:eO,isHighFiveHandOut:"HIDDEN"!==e,aboutToHide:"ABOUT_TO_HIDE"===e,temporarilyHide:t,isCursorHandOnRight:n}))}function eN({canvasPosition:e,viewportInfo:t,children:n,rotation:a=0,scale:i=1}){let l=(0,y.Z0)(t,e||{x:0,y:0});return r.createElement(eI,{viewportPosition:l,rotation:a,scale:i},n)}function eI({viewportPosition:e,children:t,rotation:n=0,scale:a=1}){let i={transform:`translate3D(${0|e.x}px, ${0|e.y}px, 0) translate(-50%, -50%) rotate(${n}rad) scale(${a})`};return r.createElement("div",{className:"cursor_high_five--highFiveAbsoluteContainer---G725",style:i},t)}function eA({color:e,isHighFiveHandOut:t,temporarilyHide:n,isCursorHandOnRight:a,aboutToHide:i=!1}){return r.createElement("div",{className:s()({"cursor_high_five--highFiveAnimationContainer--jWFVT":!0,"cursor_high_five--highFiveAnimHighFiveHandOut--6q5Bu":t,"cursor_high_five--highFiveAnimHighFiveHandAboutToHide--tFRSO":i})},r.createElement("div",{style:{opacity:n?"0":"1"},className:s()({"cursor_high_five--highFiveWaveContainer--M1fBF":!0,"cursor_high_five--cursorHandOnRight--wSZLI":a})},r.createElement(eR,{color:e})))}let eO="#FFFFFF",eL=new Set([eO,"#0FA958","#5551FF","#9747FF","#848484","#D27C2C","#F24E1E","#FFC700","#667799","#9747FF","#007BE5","#FF24BD","#F24822","#FFCD29","#14AE5C"]);function eD({color:e}){let[t,n]=r.useState(!1);if(!eL.has(e))return(0,ew.assertDev)(!!e,`Unknown color ${e} for Cursor High Fives`),r.createElement(r.Fragment,null);let a=(0,eS._)(t?eO:e,l.z7E.HIGH_FIVE,!1);return r.createElement("img",{className:"cursor_high_five--handImage--mJVid",src:a,alt:"",onError:()=>n(!0)})}function eR({color:e}){return r.createElement(eD,{key:e,color:e})}function eM({emissionAngle:e}){return r.createElement("div",{className:"cursor_high_five--fallingStar--Kx2fO"},r.createElement("div",{style:{transform:`rotate(${e}rad)`}},r.createElement("div",{className:"cursor_high_five--shootingStar--tyk8Z"},r.createElement(eF,null))))}function eP({customData:e,color:t,isCurrentUser:n}){let a=r.useRef(null);return r.useLayoutEffect(()=>{if(!(0,eT.x)())return;let t=-1;return e.animations.forEach((n,r)=>{let i=a.current?.animate(n.keyframes,n.timing);i&&r===e.animations.length-1&&(i.onfinish=()=>{let n=null,r=0,i=1e3/60*12,l=o=>{let s=null===n?0:o-n;if(n=o,r+=s,a.current&&r<i){let n=r/i,o=Math.sin(2.1*n)/.8632093666488737*(1-n)+n;a.current.style.transform=e.getReturnToCursorTransform(o),t=requestAnimationFrame(l)}};t=requestAnimationFrame(l)})}),()=>{t>=0&&cancelAnimationFrame(t)}},[e,a]),r.createElement("div",{ref:a},r.createElement(eR,{color:t}))}function eF(){return r.createElement("img",{className:"cursor_high_five--starImage--GqFaX",src:"https://static.figma.com/uploads/353e095c3f9c8488d9bb83dec3ce1d4c689f96db",alt:"star"})}function eB(){return r.createElement("div",{className:"cursor_high_five--bubble--9DVru"})}function eU(){return r.createElement("div",{className:"cursor_high_five--sparkle--hCRWw"})}var eG=n(563706),eK=n(939863),eV=n(145519),eH=n(501972),ez=n(330505);let eW=(e,t,n)=>{r.useEffect(()=>{if(e.current){if(t){e.current.style.width="initial";return}e.current.style.width=`${n+35}px`}},[n,e,t])},ej=(e,t,n,a)=>{r.useEffect(()=>{n.current&&a.current&&(n.current.value=e,a.current.dataset.value=e)},[e,t,n,a])},e$="cursor_chat_emotes--PINK_GRADIENT--1KQ3C",eq="cursor_chat_emotes--animateBg---meP2",eY="cursor_chat_emotes--ORANGE_GRADIENT--cC1fw",eX="cursor_chat_emotes--GRAY_BACKGROUND--DAHAE",eJ="cursor_chat_emotes--GLARE_ANIMATION--SuTBw",eZ="cursor_chat_emotes--glareAnimation--x1WJw",eQ="cursor_chat_emotes--NONE---FYHz";function e0(e){let{color:t}=e,n="whiteboard"===(0,g.lg)(),o=r.useRef(null),s=r.useRef(null),c=(0,i.wA)(),u=(0,G.am)(),[{currentUserInput:m,previousLine:p,fadingOutText:_,isFadingInactiveChat:f,isShowingEmptyNewline:h,inputIsEmpty:E,currentEmoteBackground:y,width:b,shouldClose:v,hasTypedAnything:C},w]=r.useReducer(ev,{...ef,isFigJam:n});eW(o,E,b),ej(m,p,o,s),function(e,t,n,a){r.useEffect(()=>{l.h3O?.sendChatMessage(e,t)},[e,t]);let i=r.useCallback(()=>{l.h3O?.sendChatMessage("",""),a(eV.Ho())},[a]);r.useEffect(()=>{n&&i()},[n,i]),r.useEffect(()=>()=>i(),[i])}(m,p,v,c);let T=r.useCallback(()=>{c(eV.Ho()),w({type:eg.STOP_CHATTING})},[c,w]);r.useEffect(()=>{w({type:eg.STOP_FADING_INACTIVE_CHAT});let e=setTimeout(()=>{w({type:eg.START_FADING_INACTIVE_CHAT})},5e3),t=setTimeout(()=>{w({type:eg.STOP_FADING_INACTIVE_CHAT}),T()},8e3);return()=>{clearTimeout(e),clearTimeout(t)}},[m,w,T]),r.useEffect(()=>{let e=e=>{w({type:eg.HANDLE_KEYDOWN,payload:e})},t=()=>{document.removeEventListener("keydown",e)},n=()=>{document.addEventListener("keydown",e)};return o.current&&(window.focus(),o.current.focus({preventScroll:!0})),document.addEventListener("keydown",e),document.addEventListener("compositionstart",t),document.addEventListener("compositionend",n),()=>{document.removeEventListener("keydown",e),document.removeEventListener("compositionstart",t),document.removeEventListener("compositionend",n)}},[w,o]);let S=r.useCallback(e=>{if((0,eH.n3)(e.relatedTarget,(0,eH.Tc)(ez.oP))){o.current?.focus();return}T()},[T]),x=(0,d.GL)(t),k=x===d.e3?"chat_input--lightPlaceholder--YGSmc":"chat_input--darkPlaceholder--BH5Qn",N=r.createElement("div",{className:`chat_input--mask--P6RFl ${f?"chat_input--fading--EBfYy":""} `,style:{boxShadow:`2px 4px 8px ${t}40`}},r.createElement("label",{ref:s,className:"chat_input--inputSizer--9JY00"},r.createElement("input",{className:`chat_input--input--2o9dx ${k} ${h?"chat_input--expanded--1W44Y":""}`,style:{color:x,backgroundColor:"transparent"},ref:o,type:"text",onChange:e=>w({type:eg.HANDLE_INPUT,payload:{value:e.currentTarget.value,trackEvent:u}}),onBlur:S,size:C?1:(0,eK.t)("whiteboard.cursor_chat.say_something").length,placeholder:C?"":(0,eK.t)("whiteboard.cursor_chat.say_something"),maxLength:50,dir:"auto",spellCheck:!1,value:m}),r.createElement("div",{className:`chat_input--chatBackground--Mdxwm ${a[y]}`,style:{background:t,color:x},onAnimationEnd:()=>w({type:eg.HANDLE_EMOTE_ANIMATION_END})}),r.createElement("div",{style:{color:x},className:"chat_input--previousChat--Y2u9G"},p),r.createElement("div",{key:_,style:{color:x},className:"chat_input--fadingOutLine--VF6ni chat_input--previousChat--Y2u9G chat_input--animated--ADHj-"},_)));return n?r.createElement(e_,{content:m},N):N}let e1="fake_cursor--selectCursor--1K-wG fake_cursor--cursor--xDDWs",e2="fake_cursor--hideCursor--CUrrB",e5={[l.NLJ.SELECT]:"f7ae268fa093b5f690abfe5cc56cccfa8c2d4734",[l.NLJ.HAND]:"aebe1073b0b9e7ca3907e21cc08ee416d86520c4"},e3={[l.NLJ.SELECT]:"aed6896e6ad35977610fc23bb6590c1484d3ee01",[l.NLJ.HAND]:"aebe1073b0b9e7ca3907e21cc08ee416d86520c4"};function e4(e){let t=ei(),{color:n,viewportInfo:a}=e,i=(0,C.KP)(),l="HIDDEN"!==e.cursorWiggleStatus,o=!e.isMouseOverCanvas,{showCursorChat:s,position:c}=e,d=c&&c.y>=a.y&&c.x>=a.x&&c.x<=a.x+a.width,u=s&&d,[m,p]=r.useState(u);r.useEffect(()=>{if(m)return document.body.classList.add(e2),()=>document.body.classList.remove(e2)},[m]),r.useEffect(()=>{if(u){p(!0);return}let e=()=>p(!1);if(!eG.Ay.isIpad&&!eG.Ay.isMeetDevice)return document.addEventListener("mousemove",e),()=>document.removeEventListener("mousemove",e);e()},[u]);let _=e8({shouldRenderFakeCursor:m,highFiveHandShowing:l}),g=e6({color:n,showingChat:d,shouldRenderCursorChat:s});if(!c)return r.createElement(r.Fragment,null);let f=c.x,h=c.y,E={willChange:"transform",transform:`translate3D(${f}px, ${h}px, 0)`};return r.createElement("div",{style:E,className:"fake_cursor--container--FpLnk"},_,t&&r.createElement(ek,{cursorWiggleStatus:e.cursorWiggleStatus,temporarilyHide:o||ea(e.cursorEntities,i.toString()),isCursorHandOnRight:(0,Z.I)(e.cursorHandsOnRight,i.toString())}),g)}let e6=({color:e,showingChat:t,shouldRenderCursorChat:n})=>{let a=(0,f.GS)(),i=(0,m.kc)().ui3_theme_cursors&&a;return n?r.createElement("div",{className:i?"fake_cursor--chatBoxUI3--X3gB4":"fake_cursor--chatBox--YabvX",style:{opacity:t?1:0}},r.createElement(e0,{color:e})):null},e8=({shouldRenderFakeCursor:e,highFiveHandShowing:t})=>{let n=(0,i.d4)(e=>e?.mirror?.appModel?.currentTool===l.NLJ.HAND)?l.NLJ.HAND:l.NLJ.SELECT,a=(0,f.GS)(),o=(0,m.kc)().ui3_theme_cursors&&a,s=n===l.NLJ.SELECT||t?o?"fake_cursor--selectCursorUI3--FjJsi fake_cursor--cursor--xDDWs":e1:"fake_cursor--handCursor--3jlcf fake_cursor--cursor--xDDWs",c=o?e3[t?l.NLJ.SELECT:n]:e5[t?l.NLJ.SELECT:n];return e?r.createElement("img",{className:s,src:`https://static.figma.com/uploads/${c}`,alt:`${s===e1?"select":"hand"} cursor`}):null};var e7=n(91408),e9=n(301462),te=n(601607),tt=n(676938),tn=n(837746);let ta="reactions--indicatorSolid--wjW1q",tr=(0,e7.hG)(tn.tui);function ti({viewportInfo:e,reactionInfo:t}){let n=(0,y.Z0)(e,t.canvasSpacePosition),[a]=(0,r.useState)(.5*Math.random()+2),[i]=(0,r.useState)(.4*Math.random()+.3),l={animationDuration:`${a.toFixed(1)}s`},o={animationDuration:`${i.toFixed(1)}s`},{x:s,y:c}=n;s-=5,c-=10;let[d]=(0,r.useState)(1*Math.random()+.5),u={willChange:"transform",transform:`translate3D(${0|s}px, ${0|c}px, 0) scale(${d})`},[m]=(0,r.useState)(Math.random()>.5?"reactions--forward--8SV6f":"reactions--backward--ZCNdY");return r.createElement("div",{className:"reactions--translationContainer--G9Mik",style:u,"data-testid":"reaction"},r.createElement("div",{className:"reactions--floatingEmojiContainer--olUKm",style:l},r.createElement("img",{src:t.reactionId,className:`reactions--floatingEmoji--IKqDo ${m}`,style:o,alt:""})))}function tl({viewportInfo:e,multiplayerCursorsEnabled:t}){let n=b.R9.useReactionsBySessionId(),a=Object.keys(n),i=(0,C.KP)(),l=(0,te.Fk)(e=>e.getCurrentPage()?.guid);return r.createElement(r.Fragment,null,a.map(a=>{let o=n[a],s=Object.keys(o).filter(e=>o[e].pageId===l);return a===`${i}`||t?r.createElement(r.Fragment,{key:a},s.map(t=>{let n=o[t];return r.createElement(ti,{key:t,viewportInfo:e,reactionInfo:n})})):null}))}function to({multiplayerEmoji:e,cursorPosition:t,viewportInfo:n}){let a=(0,r.useRef)(0),[o,s]=(0,r.useState)(ta),[c,d]=(0,r.useState)(!1),u=(0,i.wA)(),p=(0,r.useCallback)(()=>{u(eV.mu())},[u]);(0,tt.Y)(p,{closeOnEsc:!0,ignore:"allClicks"});let{reactImageUrl:g,reactName:f}="REACTING_OR_CHATTING"===e.type?{reactImageUrl:e.imageUrl,reactName:e.name}:{reactImageUrl:null,reactName:null};return(0,r.useEffect)(()=>{if(s(ta),!g)return;let e=null,t=null,n=()=>{b.R9.sendReaction(g),U.H.trigger(l.JA.GENERIC),s(ta),null!=e&&clearTimeout(e),e=setTimeout(()=>{s("reactions--indicatorFading--ZTyOt reactions--indicatorSolid--wjW1q")},300)},r=()=>{if(!(0,m.kc)().figjam_more_tracks||!f)return;let e=f.split("r-"),t=e[e.length-1];b.R9.startPlayingSoundEffect(t)},i=e=>{" "===e.key&&null!==t&&clearInterval(t)},o=e=>{"CANVAS"===e.target.tagName&&(a.current=Date.now(),n(),r(),t&&clearInterval(t),t=setInterval(()=>{n()},60),e.stopPropagation(),e.preventDefault())},c=e=>{if(null!=t){let e=t;if(a.current>0){let e=Date.now()-a.current;e9.F.trackFromFullscreen("emoji_reaction",{duration:e,image:g,name:f},!1),a.current=0}setTimeout(()=>{clearInterval(e)},70)}(0,m.kc)().figjam_more_tracks&&b.R9.stopPlayingSoundEffect(),e.stopPropagation(),e.preventDefault()},u=new Set,p=0,h=null,E=e=>{if("mouse"===e.pointerType){o(e);return}if("CANVAS"!==e.target.tagName||h&&e.pointerId===h.pointerId)return;u.add(e.pointerId);let n=u.size;if(p=Math.max(n,p),1===n){let t=new PointerEvent("pointermove",e);e.target?.dispatchEvent(t),h=new PointerEvent("pointerdown",e)}p<=1?o(e):(h&&(e.target?.dispatchEvent(h),h=null),t&&clearInterval(t),d(!0))},y=e=>{"mouse"!==e.pointerType&&h&&e.pointerId===h.pointerId&&(h=new PointerEvent("pointerdown",{bubbles:h.bubbles,cancelable:h.cancelable,composed:h.composed,detail:h.detail,view:h.view,altKey:h.altKey,ctrlKey:h.ctrlKey,metaKey:h.metaKey,shiftKey:h.shiftKey,button:h.button,buttons:h.buttons,clientX:e.clientX,clientY:e.clientY,movementX:e.movementX,movementY:e.movementY,relatedTarget:h.relatedTarget,screenX:e.screenX,screenY:e.screenY,isPrimary:h.isPrimary,pointerId:h.pointerId,pointerType:h.pointerType}))},v=e=>{if("mouse"===e.pointerType){c(e);return}if(!u.has(e.pointerId))return;u.delete(e.pointerId);let t=u.size;1===p&&c(e),0===t&&(p=0,h=null,d(!1))},C=(0,_.ft)();return C?(document.addEventListener("pointerdown",E,!0),document.addEventListener("pointermove",y,!0),document.addEventListener("pointerup",v,!0),document.addEventListener("pointercancel",v,!0)):(document.addEventListener("mousedown",o,!0),document.addEventListener("mouseup",c,!0),document.addEventListener("mouseleave",c,!0)),document.addEventListener("keydown",i),()=>{null!=t&&clearInterval(t),null!=e&&clearTimeout(e),C?(document.removeEventListener("pointerdown",E,!0),document.removeEventListener("pointermove",y,!0),document.removeEventListener("pointerup",v,!0),document.removeEventListener("pointercancel",v,!0)):(document.removeEventListener("mousedown",o,!0),document.removeEventListener("mouseup",c,!0),document.removeEventListener("mouseleave",c,!0)),document.removeEventListener("keydown",i)}},[g,f]),g&&t&&!c?r.createElement("div",{className:o,style:{willChange:"transform",transform:`translate3D(${t.x-n.x}px, ${t.y-tr}px, 0)`}},r.createElement("img",{src:g,alt:""})):null}var ts=n(616121),tc=n(170460);let td=(0,r.memo)(function({name:e,color:t,cursorType:n,chatMessage:i,isHighFiving:o,focusOnTextCursor:u,temporarilyHide:p,isCursorHandOnRight:_,isCursorPointingRight:g,editorType:h,isCursorAndChatAreaOffscreen:E,sessionId:y,prefersReducedMotion:b,isHighFivingSupported:v,useChatAnimation:C,disableMessageFade:w,isStaticView:T,isHoveringWidgetWithHiddenCursors:S}){let N=(0,f.GS)()&&!!(0,m.kc)().ui3_theme_cursors,[I,A]=(0,r.useState)(1),O=(0,r.useMemo)(()=>(0,d.GL)(t),[t]),[D,R]=(0,r.useState)(x.NONE),M=()=>R(x.NONE),[P,F]=(0,r.useState)(T),[B,U]=i||[];(0,r.useEffect)(()=>{let e,t;return B||U?(F(!0),A(1)):(F(!1),M()),w||(e=setTimeout(()=>{A(0)},5e3),t=setTimeout(()=>{F(!1),M()},8e3)),()=>{A(0),F(!1),M(),clearTimeout(e),clearTimeout(t)}},[B,U,w]);let G="whiteboard"===h;(0,r.useEffect)(()=>{if(G&&B&&!E)for(let e of k.keys()){let t=k.get(e);t&&eE(B,e)&&R(t)}},[B,E,G]);let K=r.useRef(null);(0,r.useEffect)(()=>{if(K.current&&K.current.innerText===B){let e=c.sn.tryStop(`view_cursor_chat_message_${y}_${B}`);e&&c.Vq.add("view_cursor_chat_message",e)}},[B,K,y]);let V=(0,m.kc)().cursor_bot&&g&&n===l.z7E.DEFAULT,H=n===l.z7E.PEN,z=r.createElement("div",{className:s()({[tc.iU]:P,[tc.VW]:!P,[tc.S8]:N&&!H,[tc.z8]:V}),style:{color:O}},r.createElement("div",{className:P?tc.bu:tc.iY,style:{opacity:P?O===d.e3?.8:.5:1},dir:"auto"},e),P&&r.createElement("div",{className:tc.Lo,style:{opacity:O===d.YN?.8*I:I,boxShadow:G?void 0:`2px 4px 8px ${t}40`},dir:"auto"},U&&r.createElement("div",{className:U.length>0&&(B?.length??0)>0?tc.vD:""},U),B&&r.createElement("div",{ref:K},B)),r.createElement("div",{className:`${tc.hD} ${a[D]}`,style:"NONE"!==D?{background:t,overflow:"hidden",borderRadius:"2px 20px 20px 20px"}:{background:t},onAnimationEnd:()=>M()}));return u?null:r.createElement("div",{className:tc.Dy,style:{opacity:S?0:1},"data-testid":`multiplayer-cursor-${y}`},r.createElement("div",{className:tc.or},v?r.createElement(r.Fragment,null,r.createElement("div",{className:tc.p},r.createElement(eA,{color:t,isHighFiveHandOut:o,temporarilyHide:p,isCursorHandOnRight:_})),r.createElement("img",{className:s()({[tc.u0]:!0,[tc.Bj]:!0,[tc.DE]:o,[tc.z8]:V}),src:(0,eS._)(t,o?l.z7E.DEFAULT:n,N),alt:`${o?"highfive cursor":"hand cursor"}`,onError:({currentTarget:e})=>{e.onerror=null,e.src=(0,eS.c)(t,N)}})):r.createElement("img",{className:s()({[tc.u0]:!0,[tc.z8]:V}),src:(0,eS._)(t,n,N),alt:"cursor",onError:({currentTarget:e})=>{e.onerror=null,e.src=(0,eS.c)(t,N)}}),y&&r.createElement(L.o,{sessionId:y})),(C||G)&&!b?r.createElement(e_,{content:B||""},z):z)}),tu=r.memo(function({isCursorAndChatAreaOffscreen:e,x:t,y:n,children:a}){let i={display:e?"none":"block",willChange:"transform",transform:e?"translate3D(-10000px, -10000px, 0)":`translate3D(${t}px, ${n}px, 0)`};return r.createElement("div",{style:i},a)});function tm(){let e=(0,i.d4)(({multiplayer:{observingSessionID:e}})=>-1!==e),t=(0,i.d4)(({multiplayer:{allUsers:e}})=>e),n=b.R9.useInfoBySessionId({updateSynchronously:e}),a=ei(),o=(0,u.j)(),[s,c,d,m]=function(){let[e]=(0,r.useState)(ee);!function(e){let t=(0,G.am)(),[n,a]=(0,K.fp)(j),o=ei(),s=function(){let e=(0,i.d4)(e=>{let t=e.mirror.appModel.currentTool;return t===l.NLJ.SELECT||t===l.NLJ.HAND}),t=(0,i.d4)(e=>e.multiplayerEmoji?.type==="WHEEL"||e.multiplayerEmoji?.type==="REACTING_OR_CHATTING"),n=(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);return e&&!t&&n!==l.m1T.TEXT}(),c=(0,w.J2)((0,H.UK)().cursorHighFiveWiggle),d=(0,r.useRef)(null),u=(0,r.useRef)(0);(0,r.useEffect)(()=>{s||e.stopWigglingNow()},[e,s]),(0,r.useEffect)(()=>{let n=e.onWiggleModeChange(n=>{b.R9.sendHighFiveStatus(n),a(n),n&&e.getHighFiveKeyPressed()?t("figjam_cursor_high_five_events",{type:"enter_hands_up",source:"keyboard"}):n&&t("figjam_cursor_high_five_events",{type:"enter_hands_up",source:"mouse"})});return()=>{n()}},[e,a,t]),(0,r.useEffect)(()=>{n?(e.startOrRefreshWiggle(),e.setMouseLeftCanvas(!1),e.update()):e.stopWigglingNow()},[e,n]);let m=(0,r.useCallback)(()=>{clearTimeout(u.current),u.current=setTimeout(()=>{e.getHighFiveKeyPressed()&&!e.getWiggleMode()&&(e.update(),m())},250)},[e]);(0,r.useEffect)(()=>()=>clearTimeout(u.current),[]);let p=(0,i.Pj)(),_=(0,r.useCallback)(t=>{let n=t.metaKey||t.ctrlKey||t.altKey||t.shiftKey;if("h"!==t.key||n)" "!==t.key&&"/"!==t.key&&!n&&e.getWiggleMode()&&(e.setHighFiveKeyPressed(!1),d.current=null,e.stopWigglingNow());else{if(!e.getHighFiveKeyPressed()){let e=p.getState().mirror.appModel.currentTool;d.current=e}e.setHighFiveKeyPressed(!0),e.update(),m()}},[e,m,p]),g=(0,r.useCallback)(t=>{"h"===t.key&&(e.getWiggleMode()&&null!==d.current&&d.current!==l.NLJ.HAND&&l.glU.triggerActionInUserEditScope("set-tool-default",{source:"cursor-high-fives"}),d.current=null,e.setHighFiveKeyPressed(!1),e.stopWigglingNow())},[e,d]),f=(0,r.useCallback)(t=>{e.getWiggleMode()&&(e.setHighFiveKeyPressed(!1),e.stopWigglingNow()),(0===t.button||1===t.button)&&e.setMouseButtonHeld(!0)},[e]),h=(0,r.useCallback)(()=>{e.setMouseButtonHeld(!1)},[e]),E=(0,r.useCallback)(t=>{let n=!(t.target instanceof Element&&t.target.closest("#fullscreen-root"));e.setMouseLeftCanvas(n),e.update({x:t.clientX,y:t.clientY})},[e]),y=o&&s;(0,z.Po)("keydown",_,y),(0,z.Po)("keyup",g,y),(0,z.Po)("pointerdown",f,y),(0,z.Po)("pointerup",h,y),(0,z.Po)("mousemove",E,y&&c)}(e.cursorWiggleDetector);let t=(0,G.am)(),[n,a]=(0,r.useState)([]),[o,s]=(0,r.useState)("HIDDEN"),[c,d]=(0,r.useState)(new Set),u=(0,y.bs)({subscribeToUpdates_expensive:!0}),m=(0,r.useRef)({oldEntitiesKey:"",oldHandsOnRightKey:"",oldWiggleMode:!1,oldWiggleStatus:"HIDDEN"});return b.R9.useInfoBySessionIdSubscription((0,r.useMemo)(()=>(0,D.n)(100,()=>{let n=u.current;if(!n)return;(function(e,t,n){if(!B.D||!l.h3O)return;let a=B.D.getState(),r=b.R9.infoBySessionId();if(!a.mirror||!a.mirror.appModel)return;let i=l.h3O.currentSessionID(),o=a.multiplayer,s=a.mirror.appModel.currentPage,c=o.observingSessionID,d=et(o.allUsers),u=Object.values(r).filter(e=>{if(!e.highFiveStatus||!e.mouse)return!1;let t=d[e.sessionId];return!!t&&(t.sessionID===i||er(t,e,s,c,i))});t.cursorKinematics.updateCursors(u,i,t.cursorWiggleDetector.getWiggleMode(),t.cursorWiggleDetector.getMousePosition());let m=e?.zoomScale||1;t.cursorCollisionDetector.updateAndCheckCollisions(u).forEach(e=>(function(e,t,n,a,r){let[i,o]=e,s=ea(a.cursorEntitySystem.getEntities(),i.sessionId),c=ea(a.cursorEntitySystem.getEntities(),o.sessionId);if(s&&c)return;let d=i.sessionId===n.toString(),u=o.sessionId===n.toString(),m=i.mouse.canvasSpacePosition,p=o.mouse.canvasSpacePosition,_=W.computeMidpoint(m,p);_.y-=38/t;let g=m.x>p.x,f=d||u?d:g;(d&&!s||u&&!c)&&a.cursorWiggleDetector.startOrRefreshWiggle(),e.forEach((e,n)=>{if(!ea(a.cursorEntitySystem.getEntities(),e.sessionId)&&e.mouse){let r=en(e.mouse.canvasSpacePosition,a.cursorKinematics,e.sessionId,t,d);R.eD&&setTimeout(()=>{U.H.trigger(l.JA.GENERIC)},400),a.cursorEntitySystem.addEntity(new J({startingRelativePosition:{x:(r.position.x-_.x)*t,y:(r.position.y-_.y)*t},startingRotation:r.rotation,position:_,viewportZoomScale:t,cursorOnRightForWindup:0===n?g:!g,cursorOnRightForCollision:0===n?f:!f,sessionId:e.sessionId,getUserCursorTransform:()=>en(b.R9.infoBySessionId()[e.sessionId]?.mouse?.canvasSpacePosition||{x:0,y:0},a.cursorKinematics,e.sessionId,t,0===n?d:u)}))}}),a.cursorEntitySystem.addEntity(new X([{time:.3,event:()=>{a.cursorEntitySystem.addEntity(new $(_)),a.cursorEntitySystem.addEntity(new q(_));for(let e=0;e<6;e++)a.cursorEntitySystem.addEntity(new Y(_))}}])),r("figjam_cursor_high_five_events",{type:"give_high_five"})})(e,m,i,t,n)),t.cursorEntitySystem.update()})(n,e,t);let r=e.cursorEntitySystem.getEntities(),i=r.map(e=>e.id).join(",");i!==m.current.oldEntitiesKey&&a(r);let o=e.cursorWiggleDetector.getWiggleMode(),c=e.cursorWiggleDetector.getAboutToHide()?"ABOUT_TO_HIDE":o?"SHOWN":"HIDDEN";c!==m.current.oldWiggleStatus&&s(c);let p=e.cursorKinematics.getHandsOnRight(),_=Array.from(p.keys()).join(",");_!==m.current.oldHandsOnRightKey&&d(new Set(p)),m.current.oldEntitiesKey=i,m.current.oldWiggleMode=o,m.current.oldWiggleStatus=c,m.current.oldHandsOnRightKey=_}),[u,t,e])),[n,o,!e.cursorWiggleDetector.getMouseLeftCanvas(),c]}(),p=(0,y._X)({subscribeToUpdates_expensive:!0}),f=(0,i.d4)(({multiplayer:{sessionID:e}})=>!!n[e]),E=(0,i.d4)(e=>e.multiplayerEmoji),C=(0,i.d4)(e=>e.mirror.appModel.currentPage),x=(0,i.d4)(e=>!e.mirror.appModel.hideMultiplayerCursors),k=(0,w.J2)((0,h.d)().showOutlines),N=(0,v.XM)(),I=function(e){let t=(0,_.ft)()?"pointermove":"mousemove",[n,a]=(0,r.useState)(e);return(0,r.useEffect)(()=>{let e=e=>{a({x:e.clientX,y:e.clientY})};return document.addEventListener(t,e),()=>{document.removeEventListener(t,e)}},[a,t]),n}("REACTING_OR_CHATTING"===E.type?E.viewportPosition:null),A=(0,g.lg)(),O=(0,r.useContext)(T.kw),L=(0,r.useMemo)(()=>O.getCommentsWrapperOffset(p),[O,p]);if(null==p)return null;let M={left:`${0|p.x}px`,top:`${0|p.y}px`,width:`${0|p.width}px`,height:`${0|p.height}px`},P=(0-p.offsetX)*p.zoomScale+L.x,F=(0-p.offsetY)*p.zoomScale+L.y,V={top:`${p.y+p.height/2}px`,left:`${p.x+p.width/2}px`,transform:`translate(${P}px, ${F}px)`},Z=t[0],Q=Z?Z.color:ts.w3;return r.createElement(r.Fragment,null,r.createElement(S.p,null,r.createElement("div",{"aria-hidden":!0,"data-forward-events-to-fullscreen":!0,className:tc.Lw,style:V},f&&x&&r.createElement("div",{className:N?tc.W7:tc.PT},r.createElement(ed,{viewportInfo:p}),t.map(e=>r.createElement(t_,{key:e.sessionID,user:e,viewportInfo:p,cursorEntities:s,cursorHandsOnRight:m,editorType:A,currentPageId:C,outlineModeEnabled:k,sessionInfo:n[e.sessionID],prefersReducedMotion:o,isHighFivingSupported:a}))))),r.createElement("div",{"aria-hidden":!0,"data-forward-events-to-fullscreen":!0,className:tc.zr,style:M},r.createElement(e4,{showCursorChat:!!I&&"REACTING_OR_CHATTING"===E.type&&E.isChatting,position:I,color:Q,viewportInfo:p,cursorWiggleStatus:c,cursorEntities:s,cursorHandsOnRight:m,isMouseOverCanvas:d}),a&&f&&x?r.createElement(ex,{viewportInfo:p,cursorEntities:s}):null,p?r.createElement(tl,{viewportInfo:p,multiplayerCursorsEnabled:x}):null,p?r.createElement(to,{multiplayerEmoji:E,cursorPosition:I,viewportInfo:p}):null))}let tp=(e,t,n)=>{let a=r.useRef(null);a.current=e?.sessionId??a.current,(0,r.useEffect)(()=>{a.current&&n&&E.zw?.setOtherUserChattingState(a.current,t)},[n,t]),(0,r.useEffect)(()=>(a.current&&E.zw?.setOtherUserChattingState(a.current,!1),()=>{a.current&&E.zw?.setOtherUserChattingState(a.current,!1)}),[])};function t_({user:e,viewportInfo:t,cursorEntities:n,cursorHandsOnRight:a,editorType:i,currentPageId:l,outlineModeEnabled:o,sessionInfo:s,prefersReducedMotion:c,isHighFivingSupported:d}){let u=!(0,eC.S)()&&s?s.chatMessage:[null],p=(0,C.KP)(),_=(0,C._E)(),g=!!(s?.mouse&&er(e,s,l,_,p));if(tp(s,!!(u&&u.length&&u[0]),g),!g||!s?.mouse)return null;let f=!!(0,m.kc)().ee_text_selection_in_mp&&s.focusOnTextCursor,h=o?"#848484":e.color,E=s.mouse.canvasSpacePosition,b=(0,y.Z0)(t,E),v=function({x:e,y:t},{width:n,height:a}){return e<0||t<0||e>n||t>a}(b,t)&&function({x:e,y:t}){return e<-400||t<-100}(b),w=t.zoomScale,T=(w-1)*E.x,S=(w-1)*E.y,x=e.sessionID.toString();return r.createElement(tu,{x:E.x+T,y:E.y+S,isCursorAndChatAreaOffscreen:v},r.createElement(td,{isCursorAndChatAreaOffscreen:v,cursorType:s.cursorType,name:e.name,chatMessage:u,color:h,sessionId:e.sessionID,isHighFiving:s.highFiveStatus,temporarilyHide:ea(n,x),isCursorHandOnRight:(0,Z.I)(a,x),isHoveringWidgetWithHiddenCursors:s.isHoveringWidgetWithHiddenCursors,editorType:i,focusOnTextCursor:f??!1,prefersReducedMotion:c,isHighFivingSupported:d}))}function tg(){return r.createElement(p.tH,{boundaryKey:"MultiplayerCursors",fallback:p.H4.NONE_I_KNOW_WHAT_IM_DOING},r.createElement(tm,null))}},774414:(e,t,n)=>{n.d(t,{X:()=>tw});var a=n(411855),r=n(109388),i=n(188507),l=n(634832),o=n(675678),s=n(587670),c=n(86625),d=n(612028),u=n(707458),m=n(629019),p=n.n(m),_=n(841563),g=n.n(_),f=n(126049),h=n(776250),E=n(737433),y=n(966712),b=n(374626),v=n(498750),C=n(668876),w=n(951158),T=n(563706),S=n(153234),x=n(776621),k=n(554322),N=n(572206),I=n(448169),A=n(355819),O=n(256975),L=n(738269),D=n(259927),R=n(13379),M=n(226055),P=n(83909),F=n(356390),B=n(617453),U=n(634480),G=n(843495),K=n(698993),V=n(860178),H=n(100197),z=n(939562),W=n(601607);class j{constructor(e,t,n,a,r={}){this.component=e,this.onMouseDown=t,this.onMouseMove=n,this.onMouseUp=a,this.options=r,this.oldTouch=null,this.draggingID=null,this.deferredDragStart=null,this.onTouchStart=e=>{if(e.stopPropagation(),null===this.draggingID&&e.touches.length>0&&this.shouldAdaptTouch(e.touches[0])){let t=e.touches[0];if(this.draggingID=t.identifier,document.addEventListener("touchmove",this.onTouchMove,{passive:!1}),document.addEventListener("touchend",this.onTouchEndOrCancel),document.addEventListener("touchcancel",this.onTouchEndOrCancel),this.options.delayInMS){let n=!1;if(this.deferredDragStart=a=>{if(n)return!1;let r=a.clientX-t.clientX,i=a.clientY-t.clientY;return!(10>Math.sqrt(r*r+i*i))&&(n=!0,!this.options.delayInMS&&(this.onMouseDown(this.mouseEvent("mousedown",e,t)),!0))},this.options.delayInMS){let a=this.deferredDragStart;setTimeout(()=>{this.deferredDragStart!==a||n||(this.deferredDragStart=null,this.onMouseDown(this.mouseEvent("mousedown",e,t)))},this.options.delayInMS)}}else this.deferredDragStart=null,this.onMouseDown(this.mouseEvent("mousedown",e,t))}},this.onTouchMove=e=>{if(e.stopPropagation(),null!==this.draggingID){for(let t of e.touches)if(t.identifier===this.draggingID){if(this.deferredDragStart){if(!this.deferredDragStart(t))break;this.deferredDragStart=null}e.preventDefault(),this.onMouseMove(this.mouseEvent("mousemove",e,t));break}}},this.onTouchEndOrCancel=e=>{e.stopPropagation(),null!==this.draggingID&&(this.draggingID=null,document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEndOrCancel),document.removeEventListener("touchcancel",this.onTouchEndOrCancel),this.deferredDragStart?this.deferredDragStart=null:this.onMouseUp(this.mouseEvent("mouseup",e,this.oldTouch)))}}mouseEvent(e,t,n){this.oldTouch=n;let a=new MouseEvent(e,{altKey:t.altKey,metaKey:t.metaKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY});return Object.defineProperty(a,"target",{value:t.target}),Object.defineProperty(a,"currentTarget",{value:t.currentTarget}),a}shouldAdaptTouch(e){if(!this.options.observeInsideOverflowScroll){let t=r.findDOMNode(this.component);for(let n=e.target;n;n=n.parentElement){let a=getComputedStyle(n).overflowY;if("scroll"===a||"auto"===a){let t=n.getBoundingClientRect();if(e.clientX>=t.left&&e.clientX<t.right&&e.clientY>=t.top&&e.clientY<t.bottom)return!1}if(n===t)break}}return!0}}var $=n(378762),q=n(273226),Y=n(402609),X=n(638889),J=n(939863),Z=n(101505),Q=n(251960),ee=n(456104),et=n(752353),en=n(126911),ea=n(397065),er=n(340514),ei=n(91408),el=n(163023),eo=n(901536),es=n(501114),ec=n(350428),ed=n(283942),eu=n(862442),em=n(869156),ep=n(457630),e_=n(678340),eg=n(301462),ef=n(498606),eh=n(219101),eE=n(36127),ey=n(739212),eb=n(716413),ev=n(7959),eC=n(96328),ew=n(921100),eT=n(484248);function eS({modeNames:e}){let t=(0,M.GS)();if(0===e.length)return null;let n=1===e.length?e[0]:e[0]+" + "+(e.length-1);return a.createElement("div",{className:ew.Io,"data-testid":"variable-mode-pill","data-tooltip-type":ef.Ib.TEXT,"data-tooltip":(0,J.t)("variables.mode_pill.tooltip",{listOfModes:(0,eC.Yx)(e)})},!t&&a.createElement(el.B,{className:ew.nW,svg:eT.A}),a.createElement("div",{className:ew.XW},n))}var ex=n(234587),ek=n(96796),eN=n(463420),eI=n(375597),eA=n(522739),eO=n(46481),eL=n(949207),eD=n(432023),eR=n(971068),eM=n(849295),eP=n(939967),eF=n(253099),eB=n(917925),eU=n(853993);function eG(){return a.createElement("div",{className:eo.cx.flex.itemsCenter.justifyCenter.$},a.createElement("div",{className:ew.xE}))}class eK extends a.PureComponent{constructor(){super(...arguments),this.expandMouseDown=e=>{this.props.expandMouseDown(this.props.guid,e)}}renderNodeIndents(){let e=[];for(let t=0;t<this.props.level+1;t++){let n=`[${t}]`,r=-1!==this.props.isLastMaskedAtLevels.indexOf(n),i=-1!==this.props.isMaskedAtLevels.indexOf(n),l=t===this.props.level&&this.props.mask,o=t===this.props.level&&this.props.hasChildren,s=p()(ew.dK,{[ew.TY]:this.props.displayOrder===eI.k.DOM,[ew.co]:this.props.horizontalScrollEnabled}),c=l||i||r;(this.props.horizontalScrollEnabled||!c)&&e.push(a.createElement("span",{key:t,className:ew.pZ})),r?e.push(a.createElement(el.B,{key:`${t}-mask`,svg:o?eB.A:eU.A,className:s})):i?e.push(a.createElement(el.B,{key:`${t}-mask`,svg:o?eF.A:eP.A,className:s})):l&&e.push(a.createElement(el.B,{key:`${t}-mask`,svg:o?eM.A:eR.A,className:s})),this.props.hasBullet&&t===this.props.level?e.push(a.createElement(eA.D8,{"data-testid":"new-frame-bullet",key:"expand-caret",recordingKey:S.Pt(this.props,"expandCaret"),className:ew.OI,onMouseDown:this.expandMouseDown,role:"presentation"},a.createElement(eG,null))):o&&e.push(a.createElement(eA.D8,{key:"expand-caret",recordingKey:S.Pt(this.props,"expandCaret"),className:p()(ew.GE,{[ew.Fq]:this.props.horizontalScrollEnabled}),onMouseDown:this.expandMouseDown,role:"presentation"},a.createElement(eO.U,{svg:this.props.isExpanded?eL.A:eD.A},this.props.isExpanded?a.createElement(ek.O,null):a.createElement(eN.k,null))))}return e}render(){return a.createElement("span",{className:ew.Wm},this.renderNodeIndents())}}eK.displayName="Indents";var eV=n(371591),eH=n(201140),ez=n(130735),eW=n(533228),ej=n(238472),e$=n(787337),eq=n(282046),eY=n(953696);class eX extends S.o6{constructor(){super(...arguments),this.stopPropagation=e=>e.stopPropagation(),this.onMouseDown=S.cZ(this,"mousedown",e=>{this.props.onMouseDown(e)})}render(){let e,t,n;return this.props.locked?(e=e$.A,t=eq.A,n=a.createElement(eH.s,null)):this.props.isAncestorLocked?(e=ej.A,n=eW.v):(e=eY.A,n=a.createElement(ez.r,null)),a.createElement("div",{className:ew.hz,onMouseDown:this.onMouseDown,onDoubleClick:this.stopPropagation,role:"presentation"},a.createElement(eO.U,{svg:e,fallbackSvg:t},n))}}eX.displayName="LockIcon";var eJ=n(741944),eZ=n(75395),eQ=n(667859),e0=n(895083);function e1(){return a.createElement(eZ.E,{className:ew.J0,onClick:()=>{(0,ec.Br)({source:e0.uQ.LAYERS_PANEL_ACTION_ROW,trackingDataSource:"layers_panel_action_row"})}},a.createElement(eQ._,null))}var e2=n(861726),e5=n(203910),e3=n(900607),e4=n(144919);class e6 extends S.o6{constructor(){super(...arguments),this.stopPropagation=e=>e.stopPropagation(),this.onMouseDown=S.cZ(this,"mousedown",e=>{this.props.onMouseDown(e)})}render(){let e,t;return this.props.isAncestorHidden&&this.props.visible?(e=ej.A,t=eW.v):(e=this.props.visible?e4.A:e3.A,t=this.props.visible?a.createElement(e2.l,null):a.createElement(e5.f,null)),a.createElement("div",{className:ew.yk,onMouseDown:this.onMouseDown,onDoubleClick:this.stopPropagation,role:"presentation"},a.createElement(eO.U,{svg:e},t))}}e6.displayName="VisibleIcon";var e8=n(837746),e7=n(930269),e9=n(211254);let te="layer-panel-onboarding-key";function tt(e){let t=(0,ex.cJ)(),n=(e.abbreviatedStateName||e.name).replace(/\n/," ");if(t&&e.isResponsiveSet&&e.isDefaultResponsiveSet&&(n=(0,J.t)("sites.panel.home")),e.shouldShowGuids){let t=s.Egt.getOverridePathForNode(e.guid);return`${n} (${e.guid}): [${t}]`}return n}function tn(e){let t=u.q.instance.get(e.guid),n=!!t&&t.isPrimaryResponsiveNode;return a.createElement("div",{className:eo.cx.flex.$},n&&a.createElement("span",{className:eo.cx.colorTextBrand.pr8.$},(0,J.t)("sites.panel.main")))}function ta(e){let[t,n]=(0,a.useState)(null),[i,l]=(0,a.useState)(!1),o=(0,ex.cJ)(),s=(0,b.md)(eE.bu)[e.guid];(0,a.useEffect)(()=>{n(e.isRenaming?e.name:null)},[e.name,e.isRenaming]);let c=tt({abbreviatedStateName:e.abbreviatedStateName,guid:e.guid,shouldShowGuids:e.shouldShowGuids,name:e.name,isDefaultResponsiveSet:e.isDefaultResponsiveSet,isResponsiveSet:e.isResponsiveSet}),d=S.rf(e.recordingKey,e.focusOnSingleClick?"click":"dblclick",()=>{eg.F.trackFromFullscreen("action_rename_selection",{source:"click"}),e.startRenaming(e.guid)}),u=(0,a.useRef)(null),m=(0,a.useCallback)(e=>{e&&(u.current=r.findDOMNode(e),u.current?.select())},[]),_=S.AF(e.recordingKey,"change",e=>{n(e.currentTarget?.value)}),g=S.v_(e.recordingKey,"keydown",t=>{if(!i){if(t.keyCode===v.Uz.ESCAPE)e.stopRenaming(!1);else if(t.keyCode===v.Uz.ENTER)e.stopRenaming(!0,u.current?.value,c);else{if(t.keyCode!==v.Uz.TAB)return(0,ed.jr)(t,ed.W0.NO),S.aH;t.preventDefault(),e.stopRenaming(!0,u.current?.value,c),t.shiftKey?e.prevNodeGuid&&e.startRenaming(e.prevNodeGuid):e.nextNodeGuid&&e.startRenaming(e.nextNodeGuid)}}}),f=S.iQ(e.recordingKey,"blur",()=>{e.stopRenaming(!0,u.current?.value,c)}),h=e.horizontalScrollEnabled;return a.createElement(a.Fragment,null,!e.hideSvg&&a.createElement(eV.Bf,{guid:e.guid,navigateAndPanTo:e.navigateAndPanTo,isDefaultResponsiveSet:e.isDefaultResponsiveSet,disabled:e.disabled,locked:e.locked,hovered:e.hovered,outOfView:e.outOfView,scrollLeft:e.scrollLeft,horizontalScrollEnabled:e.horizontalScrollEnabled,useUI3Icon:e.useUI3Icons}),(e.isThumbnail||e.isFavicon||e.isSocialImage)&&a.createElement(el.B,{"data-tooltip":e.isFavicon?(0,J.t)("fullscreen.object_row.favicon"):e.isSocialImage?(0,J.t)("fullscreen.object_row.social_image"):(0,J.t)("fullscreen.object_row.file_thumbnail"),"data-tooltip-show-above":!0,"data-tooltip-type":ef.Ib.TEXT,className:ew.V3,svg:e9.A}),e.isRenaming&&a.createElement(ev.ks,{className:p()(ew.hF,e.inputTextOverridesClassName),ref:m,value:null!==t?t:e.name,onChange:_,onKeyDown:g,onBlur:f,onCompositionStart:()=>l(!0),onCompositionEnd:()=>l(!1),spellCheck:!1,autoCorrect:"off",autoCapitalize:"off"}),!e.isRenaming&&a.createElement("span",{className:p()(ew.qg,e.staticTextOverridesClassName,{[eo.cx.justifyBetween.$]:o,[eo.cx.eventsAuto.$]:e.shouldExplicitlyReceivePointerEvents}),onDoubleClick:e.focusOnSingleClick?void 0:d,onClick:e.focusOnSingleClick?d:void 0,dir:"auto"},e.horizontalScrollEnabled&&a.createElement("div",{className:ew.Xv,ref:e.layerNamePlaceholderRef},c),a.createElement("div",{className:p()(ew._k,{[ew.r]:!h||e.isHovered}),ref:e.layerNameRef},s&&s.name,!s&&c),e.explicitVariableModeNames&&e.explicitVariableModeNames.length>0&&a.createElement("div",{className:ew.pS},a.createElement(eS,{modeNames:e.explicitVariableModeNames})),!e.isHovered&&o&&a.createElement(tn,{guid:e.guid})))}function tr(e){var t;let n=(0,a.useRef)(null),r=(0,a.useRef)(null),i=(0,a.useRef)(null),l=(0,b.md)(et.eC),o=(t=e.guid,(0,b.md)(et.Fj).has(t)),s=(0,M.GS)(),c=s&&(0,y.kc)().ui3_layers_panel,[m,_]=(0,a.useState)(!1),[g,f]=(0,a.useState)(!1),h=tt({abbreviatedStateName:e.abbreviatedStateName,name:e.name,shouldShowGuids:e.shouldShowGuids,guid:e.guid,isDefaultResponsiveSet:e.isDefaultResponsiveSet,isResponsiveSet:e.isResponsiveSet}),E=(0,a.useCallback)(()=>{let e=n.current;return!!e&&e.scrollWidth>e.offsetWidth},[]),v=(0,a.useCallback)(()=>{_(E())},[_,E]);(0,a.useEffect)(()=>{v()},[v]);let{onContextMenu:C}=e,w=(0,S.rf)(e.recordingKey,"contextmenu",(0,a.useCallback)(t=>{C&&C(e.guid,t)},[C,e.guid])),{onMouseEnter:T}=e,x=(0,a.useCallback)(t=>{v(),f(!0),T&&T(e.guid,t)},[T,e.guid,v]),k=(0,a.useCallback)(()=>{f(!1)},[]),{lockMouseDown:N}=e,I=(0,a.useCallback)(t=>{N&&N(e.guid,t)},[N,e.guid]),{visibleMouseDown:A}=e,O=(0,a.useCallback)(t=>{A&&A(e.guid,t)},[A,e.guid]),{onDragStartCallback:L}=e,D=(0,a.useCallback)(t=>{t.dataTransfer.effectAllowed="none",null!=L&&L(e.guid,t)},[L,e.guid]),{onDragOverCallback:R}=e,P=(0,a.useCallback)(t=>{null!=R&&R(e.guid,t)},[R,e.guid]),{onDragDropCallback:F}=e,B=(0,a.useCallback)(t=>{null!=F&&F(e.guid,t)},[F,e.guid]),{onDragEnterCallback:U}=e,G=(0,a.useCallback)(t=>{null!=U&&U(e.guid,t)},[U,e.guid]),{onDragLeaveCallback:K}=e,V=(0,a.useCallback)(t=>{null!=K&&K(e.guid,t)},[K,e.guid]),H=(0,a.useCallback)(()=>(0,e_.pr)(e.nodeMemoryUsage,e.rootMemoryUsage,!0),[e.nodeMemoryUsage,e.rootMemoryUsage]),z=!e.visible||e.isAncestorHidden,W=e.locked||e.isAncestorLocked,j=(e.level+3)*(0,ei.jz)(e7.indentWidthWithMargin)+((0,ei.jz)(e7.scrollBarYWidth)+(0,ei.jz)(e7.trackPadding))>e.panelWidth+e.scrollLeft,$=0===e.level,q=u.q.instance.get(e.guid),Y=$&&g&&q&&(0,ec.HI)(q)&&!!(0,y.kc)().aip_lpe,X={transform:`translate3d(0px, ${e.top}px, 0)`,height:eJ.FL,"--row-actions-width":Y?e8.gdM:e8.yj4},J=e.fixed&&0!==e.panelWidth,Z="FRAME"===e.nodeType,Q=p()({[ew.nM]:!0,[ew.M4]:$,[ew.Gt]:Z&&!(0,eW.R)(e)&&!e.resizeToFit&&!e.isStateGroup,[ew.Os]:Z&&!(0,eW.R)(e)&&e.resizeToFit,[ew.t$]:Z&&(0,eW.R)(e),[ew.DT]:e.isStateGroup,[ew.a6]:(0,d.MT)(e.nodeType),[ew.uW]:"SECTION"===e.nodeType,[ew.HR]:"SYMBOL"===e.nodeType,[ew.rS]:"CODE_COMPONENT"===e.nodeType,[ew.xG]:"MODULE"===e.nodeType,[ew.KJ]:"INSTANCE"===e.nodeType,[ew.iE]:e.isStamp,[ew.Zt]:"HIGHLIGHT"===e.nodeType,[ew.HL]:"WIDGET"===e.nodeType||e.isWidgetSublayer,[ew.j3]:e.isDescendantOfSymbol,[ew.cb]:e.isDescendantOfInstance,[ew.vp]:e.isDescendantOfModule,[ew.dK]:e.mask,[ew.i9]:(0,ey.qW)(e.panelType),[ew.Zu]:!!J,[ew.lh]:!!e.layerAbove,[ew.yo]:e.isHovered,[ew.wH]:e.isSelected,[ew.ct]:e.isAncestorSelected,[ew.r9]:z,[ew.xt]:W,[ew.sz]:e.hasChildren&&e.isExpanded}),ee=e.versionHistory?.activeId&&"current_version"===e.versionHistory.activeId,en=e.showMemoryUsage&&e.showInFileMemoryPercentage&&!e.isRenaming&&ee,{registerWidth:ea}=(0,eb.gz)();(0,a.useEffect)(()=>{if(c&&r.current&&i.current){let t=r.current.getBoundingClientRect().right-i.current.getBoundingClientRect().left+(0,ei.jz)(e7.rowActionsWidth);ea(e.guid,t)}});let er=a.createElement(a.Fragment,null,Y&&a.createElement(e1,null),a.createElement(eX,{recordingKey:S.Pt(e,"lockIcon"),locked:e.locked,isAncestorLocked:e.isAncestorLocked,onMouseDown:I}),a.createElement(e6,{recordingKey:S.Pt(e,"visibleIcon"),visible:e.visible,isAncestorHidden:e.isAncestorHidden,onMouseDown:O})),el=!e.hideRowActions&&!e.isRenaming&&!e.isReadOnly&&!e.isDragging&&!j,ed=!!c&&!!J,eu=a.createElement("div",{className:ew.u4,"data-tooltip-type":ef.Ib.TEXT,"data-tooltip":m?h:null,"data-tooltip-max-lines":4,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0,"data-tooltip-show-right":!0,"data-tooltip-text-left":!0,style:{width:ed?`${e.panelWidth}px`:`${e.panelWidth+e.scrollLeft}px`}},a.createElement(eK,{guid:e.guid,mask:e.mask,level:e.level,hasChildren:e.hasChildren,isExpanded:e.isExpanded,displayOrder:e.displayOrder,isMaskedAtLevels:e.isMaskedAtLevels,isLastMaskedAtLevels:e.isLastMaskedAtLevels,dispatch:e.dispatch,expandMouseDown:e.expandMouseDown,currentPage:e.currentPage,recordingKey:S.Pt(e,"indents"),hasBullet:o,disabled:z,locked:W,hovered:e.isHovered,outOfView:j,scrollLeft:e.scrollLeft,horizontalScrollEnabled:c}),a.createElement(ta,{...e,layerNameRef:n,layerNamePlaceholderRef:r,disabled:z,locked:W,hovered:e.isHovered,outOfView:j,scrollLeft:e.scrollLeft,horizontalScrollEnabled:c,shouldExplicitlyReceivePointerEvents:ed,useUI3Icons:s}),en&&a.createElement("span",{className:ew.HY,dir:"auto"},H()),el&&a.createElement("div",{className:ew.cm},c?null:er));return a.createElement("div",{ref:i,className:Q,style:X,onContextMenu:w,onMouseEnter:x,onMouseLeave:k,draggable:!1,onDragOver:P,onDrop:B,onDragStart:D,onDragEnter:G,onDragLeave:V,"data-testid":e.hasChildren?"layer-row-with-children":"layer-row","data-onboarding-key":e.guid===l&&e.isSelected&&(!e.isRowInView||e.isRowInView(i))?te:void 0},el&&c&&a.createElement("div",{className:ew.cm,style:es.sx.absolute.wFull.eventsNone.$},a.createElement("div",{className:eo.cx.wFull.$}),a.createElement("div",{className:ew.V0},a.createElement("div",{className:ew.Hz},er))),a.createElement(eh.e,{condition:ed,wrapper:e=>a.createElement("div",{style:es.sx.absolute.wFull.eventsNone.$},a.createElement("div",{className:ew.n4},a.createElement("div",null,e)))},eu))}function ti(e){let t=(0,eu.Z)("prototype_sections_zoom"),n=a.useCallback(e=>{t((0,ep.QZ)({nodeId:e,alwaysPan:!0}))},[t]),r=(0,em.o3)(e.guid);return a.createElement(tr,{...e,explicitVariableModeNames:r,navigateAndPanTo:n})}tr.displayName="ObjectRow";var tl=n(746806),to=n(463546);function ts(){let{show:e,isShowing:t,complete:n,uniqueId:r}=(0,ee.e)({overlay:to.xtb,priority:ea.N.SECONDARY_MODAL}),i=en.y.isApple(),l=a.useMemo(()=>a.createElement(X.S,{shortcut:i?"\u2303\u21E7A":"Ctrl+Alt+Shift+A"}),[i]);return(0,Q.E)(r,et.in,()=>{e({canShow:()=>!!(0,y.kc)().ce_al_show_msal_onboarding})}),a.createElement(er.rq,{isShowing:t,targetKey:te,arrowPosition:tl.F_.LEFT_TITLE,trackingContextName:"MSAL Onboarding Overlay",title:a.createElement("p",{"data-testid":"msal-onboarding-title"},(0,J.tx)("fullscreen.msal_onboarding.header_with_shortcut",{msalShortcut:l})),description:(0,J.tx)("fullscreen.msal_onboarding.body"),primaryCta:{label:(0,J.tx)("general.got_it"),type:"button",onClick:n,variantOverride:"primary",ctaTrackingDescriptor:Z.c.GOT_IT},secondaryCta:{label:(0,J.tx)("general.learn_more"),type:"link",href:"https://help.figma.com/hc/en-us/articles/5731482952599#suggest",ctaTrackingDescriptor:Z.c.LEARN_MORE},onClose:n,onTargetLost:n,emphasized:!0,disableHighlight:!0})}var tc=n(507956),td=n(187882),tu=n(38580);let tm=(0,n(940596).Wh)(()=>(0,tu.eU)(0));var tp=n(668092);function t_(e){let{top:t,width:n,guid:r,level:i,onMouseEnter:l,recordingKey:o}=e,s=S.rf(o,"click",e=>{G.bd([r])}),c={transform:`translate3d(0px, ${t}px, 0)`,width:n,height:eJ.FL},d={width:ey.iy*i*2,marginRight:1===i?ey.iy/2:0};return a.createElement("div",{className:"layer_expansion_row--layerExpansionRow--G8Twa object_row--row--HIYa5",style:c,onMouseDown:e=>e.stopPropagation(),onClick:s,onMouseEnter:l,role:"button",tabIndex:0},a.createElement("span",{className:"layer_expansion_row--layerExpansionIndent--Bg5Df object_row--indent--uZlad",style:d}),a.createElement("span",{className:"layer_expansion_row--iconWrapper--J3NJb object_row--iconWrapper--ivRSW"},a.createElement(el.B,{svg:tp.A})),a.createElement("span",{className:"layer_expansion_row--rowText--yhMnt object_row--rowText--3qo7Q ellipsis--ellipsis--Tjyfa"},(0,J.tx)("design_systems.component_properties.see_all_layers")))}class tg extends S.o6{renderPlainIndents(e){let t=[];for(let n=0;n<e+1;n++)t.push(a.createElement("span",{key:n,className:ew.pZ}));return a.createElement("span",{className:ew.Wm},t)}render(){let e={transform:`translate3d(0px, ${this.props.top}px, 0)`,width:this.props.width,height:eJ.nI},t=`${ew.nM} ${ew.bV}`;return this.props.isParentSelected&&(t+=" "+ew.ct),this.props.isDescendantOfSymbol&&(t+=" "+ew.j3),this.props.isDescendantOfInstance&&(t+=" "+ew.cb),a.createElement("div",{className:t,style:e},this.renderPlainIndents(this.props.level),this.props.sectionType===s.KjJ.FIXED?(0,J.t)("fullscreen.properties_panel.constraints_resizing_panel.fixed"):(0,J.t)("fullscreen.properties_panel.scrolls"))}}tg.displayName="SectionRow";var tf=n(357864),th=n(699670);let tE="objects_panel--dropTargetBox--4SX8i",ty=new C.V;function tb(e){return"object"===e.rowType?e.guid:"layer-expansion"===e.rowType?`expand-${e.containingPrimaryInstanceGUID}`:e.sectionId}class tv extends S.o6{constructor(e){super(e),this.state={scrollTop:0,scrollLeft:0,mouseDown:null,dropTarget:null,needsScrollLine:!1},this.cachedAllRowData=[],this.topByGuid=Object.create(null),this.leftByGuid=Object.create(null),this.totalHeight=0,this.setNeedsScrollLine=e=>{this.setState({needsScrollLine:e>0})},this.rangeSelectAnchorNodeId=null,this.getScene=()=>this.props.sceneGraph||u.q.instance,this.initializeRows=e=>{let t=this.getScene(),n=e.customRowBuilder?e.customRowBuilder():(0,tf.Sk)(t,e.topNodeFields,e.showImmutableFrameSublayers,e.temporarilyExpandedInstanceLayers,e.includeTopNode);this.topByGuid=n.topByGuid,this.leftByGuid=n.leftByGuid,this.sectionById=n.sectionById,this.totalHeight=n.totalHeight,this.cachedAllRowData=n.rowData},this.updateAllVisibleRowGuids=()=>{let e=[];for(let t of this.cachedAllRowData)(0,ey.N1)(t)&&e.push(t.guid);this.context.registerGuids(e)},this.justToggledExpandedGuid=null,this.anchorNodeId=null,this.topNodeDelta=0,this.lastCollapsedScrollPosition=null,this.scrollAfterNodeExpanded=!1,this.lastCollapsedGuid=null,this.hasCrossedDragThreshold=!1,this.onLeftPanelCollapsedChange=e=>{if(!e){let e=this.getTopSelectedNodeId();e&&this.scrollToNode({nodeId:e})}},this.scrollToNodeIdAfterUpdate=null,this.scrollToNode=({nodeId:e,forStackInsertion:t})=>{let n=this.topByGuid[e];if(null==n){let t=this.getScene().get(e);t&&t.parentGuid&&G.hq(t.parentGuid),this.scrollToNodeIdAfterUpdate=e;return}this.isVerticallyVisible(n,n+eJ.FL)||this.scrollNodeIntoView(e,{forStackInsertion:t}),this.props.horizontalScrollEnabled&&this.shouldHorizontallyAutoscroll(e)&&this.scrollNodeIntoView(e,{forStackInsertion:t})},this.recalculateLayout=()=>{this.windowInnerHeight=window.innerHeight,this.recalculateRequested=!1},this.recalculateRequested=!1,this.requestRecalculateLayout=()=>{this.recalculateRequested||requestAnimationFrame(this.recalculateLayout)},this.isScrolling=!1,this.scrollingTimeout=null,this.handleMouseEnterAfterScroll=null,this.onScroll=e=>{this.isScrolling=!0,this.nextScrollTop=e,null==this.frameRequestY&&(this.frameRequestY=requestAnimationFrame(this.setScrollTopState)),null!=this.scrollingTimeout&&clearTimeout(this.scrollingTimeout),this.scrollingTimeout=setTimeout(this.doneScrolling,50),this.props.onScroll(e),this.setNeedsScrollLine(e),b.zl.set(eE.uK,{autoScroll:!1})},this.onScrollLeftChanged=(e,t)=>{this.props.horizontalScrollEnabled&&(t||this.props.stopRenaming(!1),this.nextScrollLeft=e,null==this.frameRequestX&&(this.frameRequestX=requestAnimationFrame(this.setScrollLeftState)))},this.doneScrolling=()=>{this.isScrolling=!1,this.scrollingTimeout=null,this.handleMouseEnterAfterScroll&&(this.handleMouseEnterAfterScroll(),this.handleMouseEnterAfterScroll=null)},this.computeScrollDelta=e=>{let t=e/eJ.FL;return eJ.FL*t*t},this.frameRequestY=null,this.frameRequestX=null,this.nextScrollTop=0,this.nextScrollLeft=0,this.setScrollTopState=()=>{this.setState({scrollTop:this.nextScrollTop}),this.frameRequestY=null},this.setScrollLeftState=()=>{this.setState({scrollLeft:this.nextScrollLeft}),this.frameRequestX=null},this.isNodeSticky=e=>((0,x.xO)(o.FigmaTeam.FIGJAM,this.props),e.parentGuid===this.props.currentPage&&("SYMBOL"===e.type||"FRAME"===e.type&&!e.resizeToFit)),this.isAncestorSticky=e=>{let t=this.getScene(),n=e.parentGuid?t.get(e.parentGuid):null;for(;n&&n.guid!==this.props.currentPage;){if(this.isNodeSticky(n))return!0;n=n.parentGuid?t.get(n.parentGuid):null}return!1},this.stickyHeaderGuid=null,this.lastStickyHeaderGuid=null,this.lastExpansionTarget=null,this.findStickyHeaderRowAndReplaceInVisibleRows=e=>{if(this.stickyHeaderGuid=null,(this.state.scrollTop>0||this.scrollAfterNodeExpanded)&&e.length>0){let t;let n=this.state.scrollTop,a=(e,t,n)=>{if("object"!==e.rowType)return!1;let a=this.findStickyHeader(e,t,n);if(a){let t=this.renderedVisibleRowProps.indexOf(e);t>=0?this.renderedVisibleRowProps[t]=a:this.renderedVisibleRowProps.push(a)}return!!a},r=null;for(let i=0;i<e.length;i++)if(0===(t=e[i]).level){if(r&&a(r,r.top,t.top)||t.top>n)return;r=t}(0,l.assertDev)(!!r,"has at least one top level section"),a(r,r.top,Number.POSITIVE_INFINITY)}},this.scrollNodeIntoView=(e,t)=>{let n=t&&t.fromAIRename||!1,a=t&&t.forStackInsertion||!1;if(null==this.topByGuid[e]||!this.scrollContainerEl||!this.scrollContainer)return;let r=this.topByGuid[e],i=this.state.scrollTop,l=this.scrollContainerHeight();if(this.stickyHeaderGuid===e){a&&this.scrollContainer.scrollTo(r-1);return}let o=this.getScene().get(e);if(!o)return;n||b.zl.set(eE.uK,{autoScroll:!1});let s=this.isAncestorSticky(o);s&&r<i+eJ.FL?this.scrollContainer.scrollTo(r-eJ.FL):!s&&r<i?this.scrollContainer.scrollTo(r):r+eJ.FL>i+l&&this.scrollContainer.scrollTo(r-l/2);let c=this.leftByGuid[e];if(this.props.horizontalScrollEnabled&&this.shouldHorizontallyAutoscroll(e)&&void 0!==c){let e=Math.max(0,c-16);this.scrollContainer.scrollToLeft(e)}},this.rowContextMenu=(e,t)=>{if(this.props.onRowContextMenu){this.props.onRowContextMenu(e,t);return}let n=this.getScene().get(e);if(!n)return;(0,$.sp)(this.getScene(),this.props.sceneGraphSelection,n.guid)||this.updateSelection(n.guid);let{clientX:a,clientY:r}=t;this.props.dispatch(L.j7({type:D.Rb,data:{clientX:a,clientY:r}}))},this.rowContainerMouseDown=S.cZ(this,"mousedown",e=>{let t=this.guidAtMousePosition(e.clientY);if(!t)return;if(e.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&!this.props.renamingGuid&&document.activeElement.blur(),(this.props.allowToggleSelection??!0)&&(0,v.Fo)(e)){this.toggleSelected(t);return}(0,y.kc)().version_diffing&&this.props.editModeType===s.m1T.COMPARE_CHANGES&&s.glU.setActiveChange(t)&&this.props.showViewChangesNotification(t);let n=(0,w.IL)(this.props.sceneGraphSelection),a=null;if(n?a=n:this.rangeSelectAnchorNodeId&&(0,$.K3)(this.props.sceneGraphSelection,this.rangeSelectAnchorNodeId)&&(a=this.rangeSelectAnchorNodeId),(this.props.allowSelectRange??!0)&&e.shiftKey&&a){G.GL(a,t),F.Y5.commit();return}(0,$.sp)(this.getScene(),this.props.sceneGraphSelection,t)||(this.updateSelection(t),this.rangeSelectAnchorNodeId=t),(0,R.i)(e)||this.setState({mouseDown:new N.Mi(e.clientX,e.clientY)})},{recordMetadata:e=>{let t=this.guidAtMousePosition(e.clientY);return(0,l.assertDev)(!!t,"interaction test does not support rare case of no guid under mouse (empty layers panel?)"),{path:(0,ey.eT)(t,this.getScene()),clientX:e.clientX}},playbackMetadata:e=>{let t=this.topByGuid[(0,ey.g2)(e.path,this.getScene(),this.props.currentPage)]+eJ.FL/2;return{clientY:this.clientY(t),clientX:e.clientX}}}),this.onMouseMove=e=>{if(this.scrollContainer&&this.scrollContainerEl&&this.state.mouseDown&&!this.props.renamingGuid){this.state.mouseDown.distanceTo({x:e.clientX,y:e.clientY})>3&&(this.hasCrossedDragThreshold=!0);let t=this.relativeY(e.clientY),n=this.state.scrollTop,a=this.scrollContainerHeight();if(a>0){if(t<n){this.scrollContainer.scrollTo(n-this.computeScrollDelta(n-t));return}if(t>n+a){this.scrollContainer.scrollTo(n+this.computeScrollDelta(t-n-a));return}}let r=(0,ey.OL)(this.getScene(),this.props.sceneGraphSelection,this.topByGuid,this.sectionById,e.clientX-this.state.mouseDown.x,t,this.mouseOverStickyHeaderGuid(e.clientY),this.props.panelType??ey.g$.Object,this.props.topNodeFields);this.state.dropTarget&&r&&this.state.dropTarget.index!==r.index&&E.H.trigger(s.JA.SNAP),(this.hasCrossedDragThreshold||!r)&&(this.expandDropTargetIfNeeded(r,t),this.setState({dropTarget:r}))}},this.onMouseUp=S.cZ(this,"mouseup",e=>{let t=this.getScene(),n=!1;if(this.hasCrossedDragThreshold=!1,this.state.mouseDown&&!this.props.renamingGuid){if(n=!0,3>=this.state.mouseDown.distanceTo(new N.Mi(e.clientX,e.clientY))){if(!(0,R.i)(e)){let t=this.guidAtMousePosition(e.clientY);t?this.updateSelection(t):n=!1}}else if(!this.props.isReadOnly){let n=(0,ey.OL)(t,this.props.sceneGraphSelection,this.topByGuid,this.sectionById,e.clientX-this.state.mouseDown.x,this.relativeY(e.clientY),this.mouseOverStickyHeaderGuid(e.clientY),this.props.panelType??ey.g$.Object,this.props.topNodeFields);if(!n)return;let{parentGuid:a,index:r,section:i}=n,l=t.get(a);if(!l||void 0===r)return;let o=e.altKey,d=(0,ey.Lc)(l,r);o?c.l7.user("duplicate-selection",()=>G.kH(l.guid,d,i)):c.l7.user("reparent-selection",()=>G.Yu(l.guid,d,i)),G.hq(l.guid),s.Egt.clearTemporarilyExpanded(),F.Y5.commit()}}if(this.setState({mouseDown:null,dropTarget:null}),this.isDraggingToToggle&&(n=!0,this.isDraggingToToggle=null,F.Y5.commit()),!n)return S.aH},{recordMetadata:e=>{let t=this.getScene(),n=this.guidAtMousePosition(e.clientY),a=this.relativeY(e.clientY);(0,l.assertDev)(!!n,"interaction test does not support rare case of no guid under mouse (empty layers panel?)");let r=this.topByGuid[n];return{path:(0,ey.eT)(n,t),treatAsEndOfClick:!!(this.state.mouseDown&&5>this.state.mouseDown.distanceTo(new N.Mi(e.clientX,e.clientY))),belowAll:a>r+eJ.FL,clientX:e.clientX}},playbackMetadata:e=>{if(e.treatAsEndOfClick)return{clientX:this.state.mouseDown.x,clientY:this.state.mouseDown.y};{let t=this.topByGuid[(0,ey.g2)(e.path,this.getScene(),this.props.currentPage)]+eJ.FL/2;return e.belowAll&&(t+=eJ.FL),{clientY:this.clientY(t),clientX:e.clientX}}}}),this.onScrollContainerMouseDown=()=>{G.wr(),F.Y5.commit()},this.scrollContainerRef=e=>{this.scrollContainer=e,this.scrollContainerEl=r.findDOMNode(e)},this.containerMouseLeave=e=>{G.Uc(""),null!=this.hoverToExpandGroupTimeout&&clearTimeout(this.hoverToExpandGroupTimeout)},this.expandMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n)return;t.stopPropagation(),(0,h.sx)("objects_panel_expand",{nonInteraction:0});let a=!n.isExpanded;t.altKey?G.sK(n.guid,a):(0,v.Fo)(t)&&!(0,w.Im)(this.props.sceneGraphSelection)?G.yF(n.guid,a):G.sq(n.guid,a),this.justToggledExpandedGuid=n.guid},this.isDraggingToToggle=null,this.lockMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n||this.props.isReadOnly)return;t.stopPropagation();let a=!n.locked;this.isDraggingToToggle={locked:a},c.l7.user("set-locked",()=>{G.tU(n.guid,a,t.altKey)})},this.visibleMouseDown=(e,t)=>{let n=this.getScene().get(e);if(!n||this.props.isReadOnly)return;t.stopPropagation();let a=!n.visible;this.isDraggingToToggle={visible:a},c.l7.user("set-visible",()=>{G.pr(n.guid,a,t.altKey)})},this.hoverToExpandGroupTimeout=null,this.rowMouseEnter=(e,t)=>{let n=this.getScene().get(e);if(!n)return;let a=()=>{if(this.isDraggingToToggle){let{locked:e,visible:t}=this.isDraggingToToggle;null!=e&&c.l7.user("set-locked",()=>(function(e,t,n){if(!e)return;let a=!1;tT(e,n,e=>{a=a||e.locked!==t,e.locked=t}),a&&P.wt.reportAnyPropertyChange(["locked"])})(n,e,!1)),null!=t&&c.l7.user("set-visible",()=>(function(e,t,n){if(!e)return;let a=!1;tT(e,n,e=>{a=a||e.visible!==t,e.visible=t}),a&&P.wt.reportAnyPropertyChange(["visible"])})(n,t,!1))}this.state.mouseDown||G.Uc(n.guid)};T.Ay.firefox&&this.isScrolling?this.handleMouseEnterAfterScroll=a:a()},this.onDragDrop=(e,t)=>{this.onMouseUp(t.nativeEvent)},this.onDragOver=(e,t)=>{this.onMouseMove(t.nativeEvent)},this.onDragEnter=(e,t)=>{this.onMouseMove(t.nativeEvent),this.rowMouseEnter(e,t)},this.onDragLeave=(e,t)=>{this.onMouseMove(t.nativeEvent)},this.renderedVisibleRowProps=[],this.touchAdapter=new j(this,this.rowContainerMouseDown,this.onMouseMove,this.onMouseUp,{delayInMS:500,observeInsideOverflowScroll:!0}),this.recalculateLayout(),this.initializeRows(this.props)}componentDidMount(){super.componentDidMount(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onMouseUp),window.addEventListener("resize",this.requestRecalculateLayout),F.Y5.fromFullscreen.on("scrollToNode",this.scrollToNode);let e=s.glU&&s.glU.getFirstSelectedNodeIdForCurrentPage();e&&this.scrollToNode({nodeId:e}),this.updateAllVisibleRowGuids()}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("resize",this.requestRecalculateLayout),F.Y5.fromFullscreen.removeListener("scrollToNode",this.scrollToNode)}updateSelection(e){(0,K.S)("panel"),G.tJ([e]),F.Y5.commit(),this.props.onSelectionUpdated&&this.props.onSelectionUpdated(e)}UNSAFE_componentWillUpdate(e,t){e.renamingGuid&&e.renamingGuid!==this.props.renamingGuid&&(this.scrollToNodeIdAfterUpdate=e.renamingGuid);let n=this.props.objectsPanelRowRebuildCounter!==e.objectsPanelRowRebuildCounter,a=this.props.customRowBuilder!==e.customRowBuilder;if((n||a||this.props.currentPage!==e.currentPage||this.props.showImmutableFrameSublayers!==e.showImmutableFrameSublayers||!g()(this.props.temporarilyExpandedInstanceLayers,e.temporarilyExpandedInstanceLayers)||!g()(this.props.temporarilyHoveredNodes,e.temporarilyHoveredNodes))&&this.initializeRows(e),this.anchorNodeId=null,this.topNodeDelta=0,n){if(null!==this.justToggledExpandedGuid)this.justToggledExpandedGuid===this.stickyHeaderGuid?(this.lastCollapsedScrollPosition=this.state.scrollTop,this.lastCollapsedGuid=this.justToggledExpandedGuid,this.scrollToNodeIdAfterUpdate=this.stickyHeaderGuid):this.justToggledExpandedGuid===this.lastCollapsedGuid&&this.justToggledExpandedGuid===this.lastStickyHeaderGuid&&this.topByGuid[this.lastStickyHeaderGuid]===this.state.scrollTop&&(this.scrollAfterNodeExpanded=!0),this.justToggledExpandedGuid=null;else{let e=!1;for(let t of this.renderedVisibleRowProps)if("object"===t.rowType&&this.scrollContainer&&(0,ey.U$)(t,0,this.scrollContainer.getTrackHeight(),this.state.scrollTop)&&this.props.sceneGraphSelection[t.guid]){e=!0;break}let t=null,n=null;for(let a of this.renderedVisibleRowProps)"object"===a.rowType&&this.scrollContainer&&(0,ey.U$)(a,0,this.scrollContainer.getTrackHeight(),this.state.scrollTop)&&((!e||this.props.sceneGraphSelection[a.guid])&&(null===t||t>a.top)&&(t=a.top,this.anchorNodeId=a.guid),(null===n||n>a.top)&&(n=a.top,this.topNodeDelta=this.topByGuid[a.guid]-a.top))}}}componentDidUpdate(e,t){if(super.componentDidUpdate(e,t),this.scrollContainer){if(this.updateAllVisibleRowGuids(),this.scrollToNodeIdAfterUpdate)this.scrollNodeIntoView(this.scrollToNodeIdAfterUpdate),void 0!==this.topByGuid[this.scrollToNodeIdAfterUpdate]&&(this.scrollToNodeIdAfterUpdate=null);else if(this.scrollAfterNodeExpanded)null!=this.lastCollapsedScrollPosition&&this.scrollContainer.scrollTo(this.lastCollapsedScrollPosition),this.scrollAfterNodeExpanded=!1,this.lastCollapsedScrollPosition=null,this.lastCollapsedGuid=null;else{let e=this.scrollContainer.getScrollTop()+this.topNodeDelta,t=!1;for(let n of this.renderedVisibleRowProps)if("object"===n.rowType&&n.guid===this.anchorNodeId){t=(0,ey.U$)(n,0,this.scrollContainer.getTrackHeight(),e);break}t?this.scrollContainer.scrollTo(e):this.anchorNodeId&&this.scrollNodeIntoView(this.anchorNodeId)}}}getTopSelectedNodeId(){let e;let t=Object.keys(this.props.sceneGraphSelection),n=1/0;for(let a of t){let t=this.topByGuid[a];t<n&&(n=t,e=a)}return e}findStickyHeader(e,t,n){let a=this.state.scrollTop,r=this.getScene().get(e.guid);if(!r)return null;if(this.isNodeSticky(r)&&e.hasChildren&&(e.isExpanded||e.isTemporarilyExpanded)){if(t<=a&&n>a+eJ.FL)return this.stickyHeaderGuid=e.guid,this.lastStickyHeaderGuid=this.stickyHeaderGuid,{...e,fixed:!0};if(n>a&&n<=a+eJ.FL)return{...e,top:n-eJ.FL,layerAbove:!0};if(this.scrollAfterNodeExpanded&&e.guid===this.lastStickyHeaderGuid)return this.stickyHeaderGuid=e.guid,this.lastStickyHeaderGuid=this.stickyHeaderGuid,{...e,fixed:!0}}return null}expandDropTargetIfNeeded(e,t){let n=null;if(e&&"sticky"!==e.parentTop){let a=this.getScene().get(e.parentGuid);(0,l.assertDev)(!!a,"parentGuid should point to a valid node");let r=t>e.parentTop+eJ.FL/3&&t<e.parentTop+2*eJ.FL/3;a.uiOrderedChildren.length&&r&&(n=a.guid)}this.lastExpansionTarget!==n&&(this.lastExpansionTarget&&null!=this.hoverToExpandGroupTimeout&&clearTimeout(this.hoverToExpandGroupTimeout),n&&(this.hoverToExpandGroupTimeout=setTimeout(()=>{this.state.mouseDown&&G.Ir(n,!0)},1e3)),this.lastExpansionTarget=n)}toggleSelected(e){this.props.sceneGraphSelection[e]?G.D$([e]):(G.Dh([e]),this.rangeSelectAnchorNodeId=e),F.Y5.commit()}relativeY(e){let t=(0,k.bG)();return this.scrollContainerEl&&(t=this.scrollContainerEl.getBoundingClientRect().top),e-t+this.state.scrollTop}clientY(e){let t=(0,k.bG)();return this.scrollContainerEl&&(t=this.scrollContainerEl.getBoundingClientRect().top),e+t-this.state.scrollTop}isVerticallyVisible(e,t){if(!this.scrollContainerEl)return!0;let n=this.state.scrollTop,a=this.scrollContainerEl.getBoundingClientRect().height+this.state.scrollTop;return n<e&&t<a}shouldHorizontallyAutoscroll(e){let t=this.leftByGuid[e],n=this.props.renamingGuid===e;return void 0!==t&&!n&&t<this.state.scrollLeft-50}guidAtMousePosition(e){return this.mouseOverStickyHeaderGuid(e)||(0,ey.GN)(this.getScene(),this.props.sceneGraphSelection,this.topByGuid,this.relativeY(e))}mouseOverStickyHeaderGuid(e){return this.scrollContainerEl&&e-this.scrollContainerEl.getBoundingClientRect().top<eJ.FL?this.stickyHeaderGuid:null}computeStackOutlineHeight(e,t,n,a){return"sticky"===e?Math.min(t-n,a):Math.min(t-e,a-(e-n))}scrollContainerHeight(){return this.scrollContainerEl?this.scrollContainerEl.clientHeight:0}renderDropTarget(e){let t=null;if(null!=e.parentTop){let n=this.scrollContainerHeight(),r=e.bottomForCanvasStackReparenting,i=eJ.FL,l="sticky"===e.parentTop||this.stickyHeaderGuid===e.parentGuid;r&&n&&(i=this.computeStackOutlineHeight(l?"sticky":e.parentTop,r,this.state.scrollTop,n)),t=l?a.createElement("div",{key:"drop-target-box",className:tE,style:{position:"sticky",width:this.props.width,height:i,zIndex:th.Wb}}):a.createElement("div",{key:"drop-target-box",className:tE,style:{transform:`translate3d(0px, ${e.parentTop}px, 0)`,height:i}})}let n=null;return null!=e.lineTop&&(n=a.createElement("div",{key:"drop-target-line",className:"objects_panel--dropTargetLine--vmN9u",style:{marginLeft:`${e.lineIndent?e.lineIndent:0}px`,transform:`translate3d(0px, ${0===e.lineTop?0:e.lineTop-1}px, 0)`,transition:"margin-left 150ms 0ms"}})),[t,n]}onContextMenu(e){e.stopPropagation(),e.preventDefault()}hasAtLeastOneRefToHoveredDefId(e){if(!this.props.hoveredPropDef||!this.props.hoveredPropDef.nodeIDs?.length||!this.props.hoveredPropDef.defID)return!1;let t=e.containingSymbolId;if(!t||!this.props.hoveredPropDef.nodeIDs.includes(t))return!1;for(let t of Object.values(e.propRefs))if(t.isLinked&&t.explicitDefID===this.props.hoveredPropDef.defID)return!0;return!1}renderObjectRow(e,t,n){let r=t.getNode(e.guid);if(!r||!r.parentGuid)return null;let i=t.getAncestorInfo(r.parentGuid),l=t.getMaskInfo(e.guid),o=(0,$.K3)(this.props.sceneGraphSelection,e.guid);if(!i||!l)return null;let s=(i.isAncestorSelected||o)&&!i.isAncestorHidden&&this.hasAtLeastOneRefToHoveredDefId(r);return a.createElement(ti,{key:ty.getKeyForId(e.guid),isReadOnly:this.props.isReadOnly,...e,renderResourceUse:this.props.renderResourceUse,showMemoryUsage:this.props.showMemoryUsage,showInFileMemoryPercentage:this.props.showInFileMemoryPercentage,nodeMemoryUsage:r.nodeMemoryUsage,rootMemoryUsage:r.rootMemoryUsage,isAncestorHidden:i.isAncestorHidden,isAncestorLocked:i.isAncestorLocked,isAncestorSelected:i.isAncestorSelected,displayOrder:i.childrenDisplayOrder,isMaskedAtLevels:l.isMaskedAtLevels,isLastMaskedAtLevels:l.isLastMaskedAtLevels,panelWidth:this.props.width,scrollLeft:this.state.scrollLeft,name:r.name,abbreviatedStateName:r.isState?r.stateAbbreviatedName:null,nodeType:r.type,isStamp:(0,d.GI)(r),visible:r.visible,mask:r.mask,locked:r.locked,resizeToFit:r.resizeToFit,stackMode:r.stackMode,isStateGroup:r.isStateGroup,isState:r.isState,scrollDirection:r.scrollDirection,booleanOperation:r.booleanOperation,isStaticImage:r.hasEnabledStaticImagePaint,isGIF:r.hasEnabledAnimatedPaint,cornerRadius:r.cornerRadius,objectsPanelThumbnailId:r.objectsPanelThumbnailId,isWidgetSublayer:!!r.isInWidget,hasChildren:r.isExpandable||e.hasChildren||(0,q.vo)(r,this.getScene()),isExpanded:e.isExpanded||e.isTemporarilyExpanded,isHovered:this.props.hoveredNode===e.guid||this.props.temporarilyHoveredNodes.includes(e.guid)||s,isSelected:o,isRenaming:this.props.renamingGuid===e.guid,isDragging:!!this.state.dropTarget,startRenaming:this.props.startRenaming,stopRenaming:this.props.stopRenaming,onContextMenu:this.rowContextMenu,expandMouseDown:this.expandMouseDown,lockMouseDown:this.lockMouseDown,visibleMouseDown:this.visibleMouseDown,onMouseEnter:this.rowMouseEnter,dispatch:this.props.dispatch,shouldShowGuids:this.props.shouldShowGuids,currentPage:this.props.currentPage,onDragDropCallback:this.onDragDrop,onDragOverCallback:this.onDragOver,onDragEnterCallback:this.onDragEnter,onDragLeaveCallback:this.onDragLeave,isFavicon:this.props.faviconGuid===e.guid,isSocialImage:this.props.socialImageGuids?.split(",").includes(e.guid),isThumbnail:this.props.thumbnailGuid===e.guid,layerChangeStatus:r.nodeChangeStatus,versionHistory:this.props.versionHistory,userId:this.props.userId,hideRowActions:this.props.hideRowActions,isDefaultResponsiveSet:this.props.topNodeFields?.defaultResponsiveSetId===e.guid,isResponsiveSet:r.isResponsiveSet,panelType:this.props.panelType??ey.g$.Object,isRowInView:t=>{if(!n)return!0;let a=n.getClipContainer().getBoundingClientRect(),r=t.current;if(!r)return!0;let i=r.getBoundingClientRect();return e.fixed&&0!==this.props.width||i.top>=a.top&&i.bottom<=a.bottom}})}renderLayerExpansionRow(e){let t=ty.getKeyForId(tb(e)),n=this.props.width+(this.props.horizontalScrollEnabled?this.state.scrollLeft:0);return a.createElement(t_,{key:t,top:e.top,width:n,guid:e.containingPrimaryInstanceGUID,level:e.level,onMouseEnter:()=>G.Uc(""),dispatch:this.props.dispatch,recordingKey:S.Pt(this.props,"layerExpansion",e.containingPrimaryInstanceGUID)})}renderSectionHeader(e){let t=this.sectionById[e.sectionId]&&(0,$.sp)(this.getScene(),this.props.sceneGraphSelection,this.sectionById[e.sectionId].parentGuid);return a.createElement(tg,{key:ty.getKeyForId(e.sectionId),...e,width:this.props.width,isParentSelected:t,dispatch:this.props.dispatch})}render(){let e=this.renderedVisibleRowProps,t=this.cachedAllRowData||[];for(let n of(this.renderedVisibleRowProps=(0,ey.Uw)(t,this.windowInnerHeight,this.state.scrollTop),this.findStickyHeaderRowAndReplaceInVisibleRows(t),e))(0,ey.Mq)(n,this.windowInnerHeight,this.state.scrollTop)||ty.freeKeyForId(tb(n));this.renderedVisibleRowProps.sort((e,t)=>ty.getKeyForId(tb(e))-ty.getKeyForId(tb(t)));let n=new tf.nV(this.getScene(),this.props.sceneGraphSelection),r=[];for(let e of this.renderedVisibleRowProps)"object"===e.rowType?r.push(this.renderObjectRow(e,n,this.scrollContainer)):"layer-expansion"===e.rowType?r.push(this.renderLayerExpansionRow(e)):r.push(this.renderSectionHeader(e));if(this.props.reparentIntoStackInfo&&this.props.sceneGraph){let e=this.props.reparentIntoStackInfo.indexInParent,t=this.props.reparentIntoStackInfo.parentGuid,n=this.props.sceneGraph.get(t);n&&r.push(...this.renderDropTarget((0,ey.Gs)(n,this.topByGuid,this.props.sceneGraph,this.totalHeight,e)))}else!this.props.isReadOnly&&this.state.dropTarget&&r.push(...this.renderDropTarget(this.state.dropTarget));let i=this.stickyHeaderGuid||!this.state.needsScrollLine?"objects_panel--scrollContainer--h6khG":"objects_panel--scrollContainerWithBorder--SR2sm objects_panel--scrollContainer--h6khG";return a.createElement(a.Fragment,null,a.createElement(ey.M3,{selection:this.props.sceneGraphSelection,getNode:function(e){return n.getNode(e)??null}}),a.createElement(A.P,{enableOverscroll:!0,recordingKey:S.Pt(this.props,"scrollContainer"),className:p()(i,{"objects_panel--hasPending--0IO3j":this.props.hasPending}),width:this.props.width,onScroll:this.onScroll,onScrollLeftChanged:this.onScrollLeftChanged,initialScrollTop:this.props.initialScrollTop,onMouseDown:this.onScrollContainerMouseDown,onContextMenu:this.onContextMenu,ref:this.scrollContainerRef,horizontalScrollBarEnabled:this.props.horizontalScrollEnabled,minContentWidth:this.props.horizontalScrollEnabled?this.props.width:void 0},a.createElement(td.jq,{onLeftPanelCollapsedChange:this.onLeftPanelCollapsedChange}),a.createElement(I.V,null,a.createElement("div",{className:p()("objects_panel--rowContainer--03VQD",{"objects_panel--horizontalScrollBarPadding--JfnK4":this.props.horizontalScrollEnabled}),style:{width:Math.max(this.props.scrollWidth??0,this.props.width),height:this.totalHeight},onMouseDown:this.rowContainerMouseDown,onTouchStart:this.touchAdapter.onTouchStart,onMouseLeave:this.containerMouseLeave,"data-testid":"objects-panel"},r))))}}function tC(e){let t=(0,i.wA)(),n=(0,H.J2)((0,B.UK)().showImmutableFrameSublayers),r=(0,H.ut)(s.Ez5?.uiState().reparentIntoStackInfo,null),l=(0,H.J2)(s.Ez5.uiState().renderResourceUse),o=(0,H.J2)(s.Ez5.uiState().showMemoryUsage),c=(0,H.J2)(s.Ez5.uiState().hoveredComponentPropDef),d=(0,H.J2)(s.Ez5.uiState().showInFileMemoryPercentage),u=(0,H.J2)(s.Ez5.canvasViewState().temporarilyHoveredNodes),m=(0,V.TA)(),p=(0,i.d4)(e=>e.mirror.sceneGraphSelection),_=(0,i.d4)(e=>e.mirror.objectsPanelRowRebuildCounter),g=(0,i.d4)(e=>e.mirror.appModel.hoveredNode),h=(0,i.d4)(e=>e.mirror.appModel.temporarilyExpandedInstanceLayers),E=(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),y=(0,tc.ks)(),v=(0,O._I)(),C=(0,U.E)(),w=(0,z.H_)(),T=(0,W.Fk)((e,t)=>{let n=e.get(t);return n?{guid:n.guid,children:n.uiOrderedChildren,defaultResponsiveSetId:n.defaultResponsiveSetId}:null},e.currentPage),S=(0,eb.el)();(0,ey.SV)();let[x,k]=(0,b.fp)(tm),N=(0,f.A)(k,200);if(y&&!v)return null;let I=void 0===e.topNodeFields?T:e.topNodeFields;return a.createElement(a.Fragment,null,a.createElement(tv,{...e,currentPage:e.currentPage,sceneGraphSelection:p,objectsPanelRowRebuildCounter:_,hoveredNode:g,temporarilyExpandedInstanceLayers:h,editModeType:E,sceneGraph:w,topNodeFields:I,recordingKey:"objectsPanel",showViewChangesNotification:C,hoveredPropDef:c,showImmutableFrameSublayers:n,reparentIntoStackInfo:r,temporarilyHoveredNodes:u,dispatch:t,renderResourceUse:l,showMemoryUsage:o,showInFileMemoryPercentage:d,userId:m??void 0,horizontalScrollEnabled:e.horizontalScrollEnabled,scrollWidth:e.horizontalScrollEnabled?S:void 0,initialScrollTop:x,onScroll:N}),a.createElement(Y.p,{featureFlag:"auto_auto_layout"},a.createElement(ts,null)))}function tw(e){let t=(0,M.GS)()&&(0,y.kc)().ui3_layers_panel;return a.createElement(eb.Rp,null,a.createElement(tC,{...e,horizontalScrollEnabled:t}))}function tT(e,t,n){if(n(e),t)for(let t of e.uiOrderedChildren)tT(u.q.instance.get(t),!0,n)}tv.displayName="ObjectsPanelView",tv.contextType=eb.$V},980150:(e,t,n)=>{n.d(t,{MO:()=>T,Tq:()=>S,q5:()=>w});var a=n(411855),r=n(612028),i=n(629019),l=n.n(i),o=n(886653),s=n(163023),c=n(259927),d=n(457630),u=n(371591),m=n(982386),p=n(116198),_=n(462725),g=n(968109),f=n(251232),h=n(416014),E=n(348844),y=n(313888),b=n(531800),v=n(142284),C=n(660257);function w(e,t,n,a){let r=(0,d._X)({subscribeToUpdates_expensive:!0});if(!r)return null;let i={},l=(0,d.Yb)(r,{x:e.x,y:e.y,width:e.w,height:e.h});return i.left=l.x+r.x,i.top=l.y+r.y,t&&(i.left+=l.width/2),n&&(i.top=l.y+r.y+l.height),{containerStyle:i,pillStyle:a&&{maxWidth:a(l.width)},zoomScale:r.zoomScale}}let T=a.forwardRef(function(e,t){let{boundingBox:n,isFigmaPurple:r}=e.node,i=w(n,e.centered,e.bottom,e.maxWidth);if(!i)return null;let{containerStyle:o,pillStyle:s}=i;return a.createElement("div",{ref:t,className:l()(c.Dm,m.V_,{[m.F]:e.centered,[m.sQ]:e.bottom}),style:{...o,marginLeft:e.offsetX??0,marginTop:e.offsetY?.(i.zoomScale)??0},"data-testid":e.dataTestId},a.createElement("div",{className:l()(m.Io,r?m.HR:m.rH,e.largeBorderRadius&&m.Pn),style:s},e.children))});function S({node:e}){let t=(0,o.xx)((e,t)=>(0,u.D)(e,t)),n=e?t(e.guid,e.objectsPanelThumbnailId):"",i=n?(0,s.V)(n):function(e){let t=null;switch(e.type){case"TEXT":t=v.A;break;case"FRAME":t=e.isGroup?_.A:e.isStateGroup?y.A:(0,u.GN)({stackMode:e.stackMode,stackCounterAlignItems:e.stackCounterAlignItems});break;case"ROUNDED_RECTANGLE":t=h.A;break;case"ELLIPSE":t=p.A;break;case"STAR":t=E.A;break;case"VECTOR":t=C.A;break;case"GROUP":t=_.A;break;case"INSTANCE":t=g.A;break;case"SYMBOL":t=e.isState?b.A:y.A}return(0,r.oY)(e.type)&&e.hasEnabledStaticImagePaint&&(t=f.A),t}(e);return i?a.createElement(s.B,{className:m.ue,svg:i}):null}},650166:(e,t,n)=>{n.d(t,{e:()=>_});var a=n(411855),r=n(343887),i=n(397863),l=n(46481),o=n(939863),s=n(672517),c=n(177505),d=n(498606),u=n(501191),m=n(660164);let p=(0,s.tf)(r.K);function _({recordingKey:e}){let t=(0,c.rE)();return a.createElement(p,{recordingKey:e,"aria-label":(0,o.t)("fullscreen.pages_panel.add_new_page"),onClick:()=>t(null),trackingProperties:{text:"Add new page"},htmlAttributes:{"data-tooltip":(0,o.t)("fullscreen.pages_panel.add_new_page"),"data-tooltip-type":d.Ib.TEXT,"data-tooltip-show-above":!0}},a.createElement(l.U,{svg:u.A,fallbackSvg:m.A},a.createElement(i.x,null)))}},989954:(e,t,n)=>{n.d(t,{t:()=>x});var a=n(411855),r=n(308548),i=n(449486),l=n(397863),o=n(326331),s=n(587670),c=n(153234),d=n(163023),u=n(46481),m=n(901536),p=n(939863),_=n(809831),g=n(439384),f=n(177505),h=n(99506),E=n(498606),y=n(60088),b=n(227795);let v="new_page_dropdown--newPageIcon--R2RXS";var C=n(289298),w=n(501191),T=n(660164),S=n(561071);function x({recordingKey:e}){let{Dropdown:t,toggleDropdown:n,isDropdownShown:x,dropdownTargetRef:k}=(0,y.B)("newPageDropdown"),N=(0,_.lg)(),I=(0,g.Te)(),A=(0,f.rE)();if(!I)return null;let O=[{displayText:(0,p.t)("fullscreen.pages_panel.page_dropdown_new"),optionHeight:24,editorType:null,disabled:!0},{displayText:(0,p.t)("fullscreen.pages_panel.design_page"),optionHeight:24,editorType:h._Y.DESIGN,icon:a.createElement("div",{className:v},a.createElement(r.k,null)),callback:()=>A(s._YF.DESIGN)},{displayText:(0,p.t)("fullscreen.pages_panel.figjam_page"),optionHeight:24,editorType:h._Y.WHITEBOARD,icon:a.createElement("div",{className:v},a.createElement(d.B,{svg:S.A})),callback:()=>A(s._YF.WHITEBOARD)},{displayText:(0,p.t)("fullscreen.pages_panel.slide_deck"),optionHeight:24,editorType:h._Y.SLIDES,icon:a.createElement("div",{className:v},a.createElement(i.g,null)),callback:()=>A(s._YF.SLIDES)}],L=48;for(let e=0;e<O.length;e++)if(O[e].editorType===N){L+=24*e;break}return a.createElement(a.Fragment,null,a.createElement("div",{className:m.cx.absolute.w8.h8.$,ref:k,style:{bottom:`${L}px`,right:"42px"}}),a.createElement(b.K0,{className:"new_page_dropdown--newPageButton--sYJsl",recordingKey:c.Pt(e,"newPageDropdown"),"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,p.t)("fullscreen.pages_panel.add_new_page"),"data-tooltip-show-above":!0,onMouseDown:n},a.createElement("div",{className:"new_page_dropdown--newPageIconsContainer--pzY38"},a.createElement(u.U,{svg:w.A,fallbackSvg:T.A},a.createElement(l.x,null)),a.createElement("div",{className:"new_page_dropdown--newPageChevron--N0hv3"},a.createElement(u.U,{svg:C.A},a.createElement(o.r,null))))),x&&a.createElement(t,{minWidth:160,items:O,showPoint:!0}))}},875331:(e,t,n)=>{n.d(t,{bU:()=>et,bG:()=>ea,VS:()=>er});var a=n(411855),r=n(188507),i=n(587670),l=n(629019),o=n.n(l),s=n(939683),c=n(540721),d=n(358145),u=n(966712),m=n(374626),p=n(586459),_=n(316082),g=n(964881),f=n(13379),h=n(226055),E=n(929715),y=n(617453),b=n(634480),v=n(862442),C=n(177505),w=n(479118),T=n(335682),S=n(611978),x=n(99506),k=n(100197),N=n(675678),I=n(75395),A=n(523679),O=n(646240),L=n(915440),D=n(711525),R=n(391388),M=n(776621),P=n(330654),F=n(493323),B=n(331737),U=n(320733),G=n(939863),K=n(279453),V=n(754168),H=n(653671);function z({pageRowRef:e,pagesListRef:t,nodeId:n,nodeName:r,pageThumbnail:i,isLoading:l}){let c=(0,T.q5)(),d=(0,s.hC)(),u=(0,O.Xr)(H.qp);if(!c||!t.current||!e.current)return null;let m=t.current.getBoundingClientRect().left+t.current.getBoundingClientRect().width,_=m-16,g=`calc(${m}px + var(--spacer-2, 0.5rem))`,f=e.current.getBoundingClientRect().top,h=e.current.getBoundingClientRect().height;return a.createElement(a.Fragment,null,a.createElement("div",{style:{position:"fixed",zIndex:10,left:_+"px",top:f+"px",height:h+"px",width:"32px"}}),a.createElement("div",{"data-testid":"PageSummaryPreview",className:"page_summary_preview--previewContainer--kx2Uy",style:{left:g,top:f+h/2}},a.createElement("div",{className:"page_summary_preview--thumbnailContainer--a-jPQ"},a.createElement("div",{"data-testid":"FileThumbnail"},a.createElement(U.V,{thumbnailType:(0,B.lv)(c.editorType,!1),thumbnailUrl:i?.thumbnail_url??null,clientMeta:i?.thumbnail_meta??c.clientMeta,noBorder:!0})),a.createElement(I.E,{"aria-label":(0,G.t)("pages_panel.summary_preview.update_preview"),className:o()("page_summary_preview--refreshButton--XAvPe",{"page_summary_preview--alwaysShowRefreshButton--M3IDC":!i}),onClick:()=>{c&&!l&&(d("figjam_pages_summary.preview_refreshed",{previewPageId:n}),u(p.r.LOADING),V.S.updatePageCheckpointThumbnails({fileKey:c.key}).catch(()=>{d("figjam_summary_preview.page_thumbnails_request_failed_increment_metric",{})}))},htmlAttributes:{"data-tooltip":(0,G.t)("pages_panel.summary_preview.update_preview"),"data-tooltip-type":"text","data-testid":"RefreshPreviewButton"}},l?a.createElement(F.kt,{testId:"LoadingSpinner",size:"small",className:"page_summary_preview--loadingSpinner--FXocO"}):a.createElement(A.o,null))),a.createElement("div",{className:"page_summary_preview--pageTitleContainer--Yk-qK text--fontPos13--xW8hS text--_fontBase--QdLsd"},r)))}let W=P.record(P.object({thumbnail_url:P.string(),thumbnail_meta:P.object({}).passthrough().transform(e=>JSON.stringify(e)),created_at:P.string().optional()}));var j=n(445448),$=n(498750),q=n(356390),Y=n(843495),X=n(187882),J=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(J||{});function Z(e){return(0,$.Fo)(e)?"individual":e.shiftKey?"range":null}var Q=n(465702),ee=n(86625);function et({pages:e,isReadOnly:t,onContextMenu:n,isComparingChanges:l,onPageSwitch:o,pageToNumChanges:d,shouldHighlightActivePage:u=!0,activePageShouldUseBrandColor:p,scrollContainer:h}){let b=(0,k.ut)(i.Ez5?.currentPageState().requestedPageChange,""),v=(0,k.J2)(i.Ez5.uiState().showInFileMemoryPercentage),w=(0,C.dh)(),T=!(0,_.w)(),S=(0,s.U)(),x=(0,g.l7)(),N=(0,a.useRef)(null),I=(0,k.J2)(i.Ez5.uiState().showMemoryUsage),A=(0,r.d4)(e=>e.versionHistory),O=(0,k.J2)((0,y.UK)().showGuids),{selectedPageIds:L,handleMultiselectClick:D,cancelMultiselect:R}=function(e){let[t,n]=(0,m.fp)(H.cE),r=(0,C.dh)(),i=(0,a.useCallback)(()=>{n(e=>e.length?[]:e)},[n]),l=(0,a.useCallback)((a,l)=>{let o=Z(l);switch(o&&((0,Y.tJ)([]),q.Y5.commit()),o){case"individual":return n(t.includes(a)?t.filter(e=>e!==a):0===t.length&&r!==a?[r,a]:[...t,a]),!0;case"range":{let i=0===t.length?r:t[t.length-1],l=e.findIndex(e=>e.nodeId===i),o=e.findIndex(e=>e.nodeId===a),s=Math.min(l,o),c=Math.max(l,o),d=new Set(t),u=e.slice(s,c+1).map(e=>e.nodeId);return d.has(u[0])&&d.has(u[u.length-1])?n(t.filter(e=>!u.includes(e))):n([...t,...u.filter(e=>!d.has(e))]),!0}case null:return i(),!1}},[i,e,r,t,n]);return{selectedPageIds:t,handleMultiselectClick:l,cancelMultiselect:i}}(e),{isReordering:M,reorderingPageIds:P,startReordering:F,cancelReordering:B,commitReordering:U,draggingState:G,updateDraggingState:K}=function(e){let[t,n]=(0,a.useState)([]),r=(0,a.useRef)(null),[l,o]=(0,a.useState)(null),c=t.length>0,d=(0,s.U)(),u=(0,a.useCallback)(e=>{n(e),o(null),r.current=null},[]),m=(0,a.useCallback)(()=>{n(e=>e.length?[]:e),o(null),r.current=null},[]),p=(0,a.useCallback)((e,n)=>{if(t.includes(e)){o(null);return}let a=n.target;l&&l.dragOverPageId===e&&r.current||(r.current=a.getBoundingClientRect());let i=n.clientY-r.current.top<r.current.height/2?"before":"after";o(t=>t&&t.dragOverPageId===e&&t.insertPosition===i?t:{dragOverPageId:e,insertPosition:i})},[l,t]),_=(0,a.useCallback)(()=>!l||!c||t.includes(l.dragOverPageId)?(m(),!1):(ee.l7.user("reorder-pages",()=>{let n=(0,X.Pe)(e);"before"===l.insertPosition?[...t].sort((e,t)=>n[e]-n[t]).forEach(e=>{i.Egt.pageMoveBeforePage(e,l.dragOverPageId)}):[...t].sort((e,t)=>n[t]-n[e]).forEach(e=>{i.Egt.pageMoveAfterPage(e,l.dragOverPageId)})}),m(),d("page_reorder",{reorderedPageIds:t,dragOverPageId:l.dragOverPageId,insertPosition:l.insertPosition},{forwardToDatadog:!0}),!0),[e,c,t,m,l,d]);return{isReordering:c,reorderingPageIds:t,startReordering:u,cancelReordering:m,commitReordering:_,draggingState:l,updateDraggingState:p}}(e),{renamingPageId:V,startRenaming:z,cancelRenaming:W,commitRenaming:J,pendingPageName:et,setPendingPageName:er}=(0,Q.c)(e),ei=ea({pagesList:e,isComparingChanges:l});!function({pagesList:e,isDisabled:t,selectedPageIds:n,startRenaming:r,cancelMultiselect:i,cancelReordering:l}){(0,a.useEffect)(()=>{if(t)return;let a=t=>{let a=(0,X.Pe)(e),o=n.filter(t=>{let n=a[t];return void 0!==n&&!e[n].isDivider}).sort((e,t)=>a[e]-a[t]);if(0!==o.length)switch(t.keyCode){case $.Uz.ESCAPE:i(),l();break;case $.Uz.R:(0,$.Fo)(t)&&(1===o.length?r(o[0]):q.Y5.triggerActionInUserEditScope("batch-page-rename",{args:{nodeIds:o}}))}};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[t,e,n,i,l,r])}({pagesList:e,isDisabled:t,selectedPageIds:L,startRenaming:z,cancelMultiselect:R,cancelReordering:B}),(0,a.useEffect)(()=>{let e=()=>{R(),B()};return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[R,B]),(0,a.useEffect)(()=>{if(!M)return;let e=e=>{e.stopPropagation(),t?B():U()};return document.addEventListener("mouseup",e),()=>document.removeEventListener("mouseup",e)},[M,t,B,U]),(0,c.C)(h?.getScrollContainer(),M);let el=(e,n)=>{B(),t||(0,f.i)(n)||Z(n)||(L.includes(e)?F(L):(R(),F([e])))},eo=(e,n)=>{M&&!t&&(K(e,n),n.preventDefault(),n.stopPropagation())},es=(e,n)=>{if(t||Z(n)){B();return}U()&&(n.preventDefault(),n.stopPropagation())},ec=(e,n)=>{n.stopPropagation(),!t&&D(e,n)||(0,E.J)(()=>{x&&S("Dev Mode Overview Page Clicked",{pageId:e}),ei(e),o?.(e)})},ed=({nodeId:e,e:t,clientX:a,clientY:r})=>{t.preventDefault(),t.stopPropagation(),n({nodeId:e,clientX:a??t.clientX,clientY:r??t.clientY})},eu=e=>{t||z(e)},em=e=>{V&&(t||!e?W():J())},ep=e=>!!u&&(b?e===b:e===w),e_=(0,a.useMemo)(()=>e.some(t=>t.pageType!==e[0].pageType),[e]);return a.createElement("div",{ref:N},e.map((t,n)=>a.createElement("div",{key:t.nodeId},a.createElement(en,{nodeId:t.nodeId,nodeName:t.name,isDivider:t.isDivider,isFirstRow:0===n,isLastRow:n===e.length-1,draggingState:G,pagesListRef:N,previewSummaryEnabled:0===P.length&&!t.isDivider&&V!==t.nodeId},a.createElement(j.G,{nodeId:t.nodeId,nodeName:t.name,pageType:t.pageType,hasMultiplePageTypes:e_,shouldShowGuids:O,isRenaming:V===t.nodeId,renamingPagePendingName:V===t.nodeId?et:null,startRenaming:eu,stopRenaming:em,setRenamingPagePendingName:er,isActive:ep(t.nodeId),isDivider:t.isDivider,onMouseDownCallback:el,onMouseUpCallback:es,onMouseMoveCallback:eo,onClickCallback:ec,reorderingPageGuids:P,selectedPageGuids:L,onContextMenuCallback:ed,showMemoryUsage:I,showInFileMemoryPercentage:v,versionHistory:A,isComparingChanges:l,pageToNumChanges:d,index:n,isOffline:T,pagesList:e,activePageShouldUseBrandColor:p})))))}function en({nodeId:e,nodeName:t,isDivider:n,isFirstRow:l,isLastRow:c,children:_,draggingState:g,pagesListRef:f,previewSummaryEnabled:E}){let y=(0,a.useRef)(null),[b,v]=a.useState(!1),C=(0,r.d4)(e=>e.mirror.appModel.topLevelMode===i.lyf.HISTORY),w=g&&g.dragOverPageId===e?"before"===g.insertPosition?l?"pages_list--withInsertBeforeTop--IQT63":"pages_list--withInsertBefore---ui-o":c?"pages_list--withInsertAfterBottom--yG3xD":"pages_list--withInsertAfter--7QoMA":null,S=(0,h.GS)(),k=(0,T.q5)(),I=(0,u.kc)().figjam_pages_summary_preview,[A,O]=(0,m.fp)(H.qp),P=(0,a.useMemo)(()=>I&&S&&k?.editorType===x._Y.WHITEBOARD&&!C,[I,S,k?.editorType,C]),F=(0,a.useMemo)(()=>b&&E&&P,[b,E,P]),B=function(e){let t=(0,T.q5)(),n=(0,L.Rs)(K.SPC,{fileKey:t?.key??""},{enabled:!!(t?.key&&e)});return R.Qw.useTransform(n,e=>{if(e?.file?.pagesSignedThumbnailData.status!==D.tT.Loaded)return null;try{if(!e?.file?.pagesSignedThumbnailData.data)return null;let t=JSON.parse(e.file.pagesSignedThumbnailData.data);return W.parse(t)}catch(n){return(0,M.$D)(N.FigmaTeam.FIGJAM,Error(`PageSummaryPreview: Failed to parse page thumbnail data. Error: ${n.message}.`),{tags:{fileKey:t?.key},extra:{parsedPageThumbnails:e?.file?.pagesSignedThumbnailData.data}}),null}})}(P),U=(0,a.useMemo)(()=>B?.data?.[e],[e,B?.data]),G=(0,a.useMemo)(()=>A===p.r.LOADING||"loading"===B.status,[A,B.status]);(0,a.useEffect)(()=>{U?.created_at&&O(p.r.SUCCESS)},[O,U?.created_at]);let V=(0,s.hC)(),j=(0,d.ZC)(P);return(0,a.useEffect)(()=>{!j&&F&&V("figjam_summary_preview.preview_shown",{previewPageId:e})},[V,e,F,j]),a.createElement(a.Fragment,null,a.createElement("div",{className:o()("pages_list--pagesRowWrapper--Plig-",w,{"pages_list--divider--idUOu":n}),ref:y,onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),"data-testid":"PagesRowWrapper"},_,b&&E&&P&&a.createElement(z,{"data-testid":"PageSummaryPreview",pagesListRef:f,pageRowRef:y,nodeId:e,nodeName:t,pageThumbnail:U,isLoading:G})))}function ea({pagesList:e,isComparingChanges:t}){let n=(0,v.Z)("page_change_navigator_navigate"),l=(0,b.E)(),o=(0,s.U)(),c=(0,r.wA)(),d=(0,S._6)(),u=(0,C.dh)(),m=(0,r.d4)(e=>e.versionHistory);return(0,a.useCallback)(a=>(0,C.$P)(a,u,m,c,(0,w.Fy)(e,a)===i.xal.LOADED,o,n,l,t,d),[e,n,l,o,c,d,u,m,t])}function er({pagesList:e,isComparingChanges:t,enabled:n=!0}){let l=(0,v.Z)("page_change_navigator_navigate"),o=(0,b.E)(),c=(0,s.U)(),d=(0,r.wA)(),u=(0,S._6)(),m=(0,C.dh)(n),p=(0,r.d4)(e=>e.versionHistory);return(0,a.useCallback)(async a=>{n&&await (0,C.$P)(a,m,p,d,(0,w.Fy)(e,a)===i.xal.LOADED,c,l,o,t,u)},[e,l,o,c,d,u,m,p,t,n])}},453856:(e,t,n)=>{n.d(t,{yD:()=>oT});var a=n(411855),r=n(109388),i=n(188507),l=n(587670),o=n(86625),s=n(707458),c=n(629019),d=n.n(c),u=n(776250),m=n(91408),p=n(297666),_=n(38329),g=n(374626),f=n(153234),h=n(286640),E=n(554322),y=n(448169),b=n(192437),v=n(355819),C=n(206316),w=n(939863),T=n(392592),S=n(644106),x=n(331972),k=n(265911),N=n(798099),I=n(226055),A=n(83909),O=n(988022),L=n(356390),D=n(617453),R=n(843495),M=n(177505),P=n(441088),F=n(318812),B=n(479118),U=n(335682),G=n(611978),K=n(860178),V=n(100197),H=n(601607),z=n(507956),W=n(283978),j=n(662275),$=n(678340),q=n(21622),Y=n(265746),X=n(696808),J=n(634480),Z=n(862442),Q=n(457630),ee=n(498606),et=n(227795),en=n(286723),ea=n(370903),er=n(995382);function ei(){let e=(0,i.wA)(),t=(0,i.d4)(e=>!!e.modalShown),n=(0,i.d4)(e=>e.versionHistory.compareId),r=l.AWq.getChunkChangeCount(),o=(0,Z.Z)("chunk_change_navigator_navigate"),s=(0,J.E)(),c=a.useCallback(e=>{l.Egt.setSelectedNodeAndCanvas(e,!0),o((0,Q.QZ)({nodeId:e,...en.ob}),en.kh),s(e)},[o,s]),d=a.useCallback(e=>{t||0===r||("ArrowUp"===e.key||"ArrowLeft"===e.key||e.shiftKey&&"Tab"===e.key?c(l.glU.navigateToNextChange(-1)):("ArrowDown"===e.key||"ArrowRight"===e.key||"Tab"===e.key)&&c(l.glU.navigateToNextChange(1)))},[t,r,c]);return(a.useEffect(()=>{e(X.Q.dequeue({type:Y._.SEE_WHATS_CHANGED}))},[e]),a.useEffect(()=>{n&&0!==r&&c(l.glU.navigateToFirstVisibleOrClosestChange())},[r,n,c]),a.useLayoutEffect(()=>{if(0!==r)return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[r,d]),0===r)?null:a.createElement(a.Fragment,null,a.createElement("div",{className:"chunk_change_navigator--chunkChangeCount--ZFnfP"},(0,w.tx)("collaboration.feedback.change_count",{changeCount:r})),a.createElement("div",{className:"chunk_change_navigator--chunkChangeNavigator--82303"},a.createElement(et.K0,{svg:er.A,onClick:e=>{e.stopPropagation(),c(l.glU.navigateToNextChange(-1))},"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":(0,w.t)("collaboration.feedback.previous_change"),recordingKey:"change_stepper.previous",disabled:0===r}),a.createElement(et.K0,{svg:ea.A,onClick:e=>{e.stopPropagation(),c(l.glU.navigateToNextChange(1))},"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":(0,w.t)("collaboration.feedback.next_change"),recordingKey:"change_stepper.next",disabled:0===r})))}var el=n(415702),eo=n(126049),es=n(320063),ec=n(690260),ed=n(723325),eu=n(493323),em=n(395281),ep=n(140908),e_=n(358145),eg=n(632430),ef=n(999881),eh=n(279453),eE=n(790202),ey=n(298527);function eb(){let e=(0,i.wA)(),t=a.useRef(!1),n=(0,i.d4)(e=>e.loadingState),r=(0,i.d4)(e=>e.fileVersion),l=(0,ey.n1)(),o=(0,e_.qd)(l),s=(0,g.md)(eh.fy7.Query({group:(0,ef.M)()})),c=(0,eE.je)();a.useEffect(()=>{if(!t.current&&!0===l&&!1===o&&"loaded"===s.status){t.current=!0;let a=new Set(c?.data?.map(e=>e.fileKey)??[]);for(let t of s?.data?.libraryPresetSubscriptionsV2??[])a.has(t.hubFileId)&&eg.Fz(t.hubFileId,n,r,e)}},[e,l,r,o,n,s,c])}var ev=n(813648),eC=n(594901),ew=n(933342),eT=n(833629),eS=n(243987),ex=n(428467),ek=n(435011),eN=n(284321),eI=n(234945),eA=n(693223),eO=n(378762),eL=n(998109),eD=n(756159),eR=n(426046),eM=n(715762),eP=n(498750),eF=n(563706),eB=n(26328),eU=n(140796),eG=n(48515);function eK({searchOptions:e,keyboardNavigationPath:t,keyboardNavigationColumn:n}){let r=(0,i.wA)(),o=(0,i.d4)(eB.UQ),{activeTab:s,shouldFocusSearchBar:c}=(0,i.d4)(e=>e.leftPanel),u=s===l.xae.ASSETS,m=a.useRef(null),p=(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),_=(0,eU.vb)({isVisible:u,autofocus:!0,selectOnFocus:!0,ref:m});a.useEffect(()=>{let e=e=>{(eF.Ay.chromeos?e.altKey&&e.shiftKey&&e.keyCode===eP.Uz.KEY_2:e.altKey&&e.keyCode===eP.Uz.KEY_2)&&p!==l.m1T.TEXT&&(_(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[p,_]);let g=a.useCallback(t=>{let n;e&&((0,eB.eu)(e.type)?n=e.type:(n={type:eG.I.ALL},e.onSetAssetType(n))),r(em.ku({query:t,searchOptions:n,entryPoint:"asset_panel"}))},[r,e]),f=d()("component_sidebar_search--searchWithViewModeToggle--nKJ2-","component_sidebar_search--negMargin--QTfpB");return null!=t?a.createElement(eU.E1,{query:o.query,onChange:g,isVisible:u,className:f,recordingKey:"componentsLibrarySearch",placeholder:(0,w.t)("design_systems.assets_panel.search"),autofocus:c,selectOnFocus:!0,hideSearchIcon:!0,entryPointForTracking:"editor:assets_panel",path:t,column:n,forwardedRef:m}):a.createElement(eU.aU,{query:o.query,onChange:g,isVisible:u,className:f,recordingKey:"componentsLibrarySearch",placeholder:(0,w.t)("design_systems.assets_panel.search"),autofocus:c,selectOnFocus:!0,hideSearchIcon:!0,forwardedRef:m,entryPointForTracking:"editor:assets_panel"})}var eV=n(196367),eH=n(183686),ez=n(243742),eW=n(672517),ej=n(663767),e$=n(57392),eq=n(173454),eY=n(397065),eX=n(142232),eJ=n(951864),eZ=n(337987);function eQ({entrypoint:e,onSetKeyboardNavigationElement:t,hideIfNoUpdates:n,recordingKey:r}){let i="ui3"===(0,ez.DP)().version,l=(0,g.md)(e$.Lc),o=(0,g.md)((0,eN.Xh)(void 0)),{isLibraryModalShown:s,onToggleLibraryModal:c}=(0,ej.u)({entrypoint:e,modalType:"editor",initialTab:i&&l?eq.Wv.UPDATES:eq.Wv.LIBRARIES}),d=a.useMemo(()=>l?(0,w.t)("fullscreen.libraries_button.tooltip.updates_to_pull"):o?(0,w.t)("fullscreen.libraries_button.tooltip.updates_to_push"):(0,w.t)("fullscreen.libraries_button.tooltip.no_updates"),[l,o]),u=l||o;return((0,eX.Pf)({showBadge:u,hasChangesToPull:l,disabled:!i}),!n||l||o)?a.createElement("div",{className:"library_modal_button--teamLibraryIcon--EBc7q","data-onboarding-key":"library"},i?a.createElement(e0,{"aria-label":d,toggled:s,ref:t,recordingKey:f.Pt(r,"teamLibrary"),onClick:c,htmlAttributes:{"data-onboarding-key":eY.D}},a.createElement(eH.l,null),u&&a.createElement("div",{className:"library_modal_button--badgeContainer--ebOHQ"},a.createElement("span",{className:"library_modal_button--updatesBadge--B4nW-","data-testid":"library-button-badge"})," ")):a.createElement(et.o5,{ref:t,recordingKey:f.Pt(r,"teamLibrary"),selected:s,"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":(0,w.t)("fullscreen.libraries_button.tooltip.no_updates"),"data-onboarding-key":eY.D,svg:eJ.A,fallbackSvg:eZ.A,onClick:c,innerText:"Team Library"})):null}let e0=(0,eW.tf)(eV.d);var e1=n(35645),e2=n.n(e1),e5=n(966712),e3=n(708389),e4=n(696673),e6=n(788744),e8=n(756317),e7=n(680681),e9=n(957987),te=n(715173),tt=n(776018),tn=n(538697);function ta(e){let{assetType:t,libraryNameByFileKey:n,onSetAssetType:r,onSetKeyboardNavigationElement:l,validAssetTypeOptions:o}=e,s=(0,i.wA)(),c=(0,i.d4)(e=>e.modalShown),d=(0,i.d4)(e=>e.dropdownShown),m=(0,i.d4)(U.tB),p=t.type===eG.I.FILE?t.fileKey:void 0,_=(0,e6.Fl)(),g=a.useCallback(()=>{c?.type===tt.V&&s(j.AS()),u.az.trackDefinedEvent("assets_panel.asset_type_dropdown_opened",{fileKey:m?.key,assetsPanelVersion:2})},[s,c,m?.key]),f=a.useMemo(()=>{if((0,e7.NX)(_)){let e=Object.entries(n??{}).map(([e,t])=>({key:e,name:t}));return(0,e7.k9)({libraries:e,approvedLibraryKeysByResourceType:_}),e.map(({key:e})=>e)}return Object.keys(n??{}).sort((e,t)=>e3.f.LEXICOGRAPHICALLY(n[e],n[t]))},[n,_]),h=(0,ey.Ck)(),[E,y]=e2()(f,e=>!(0,e4.wJ)(e)),b=y.length>0&&h(),v=a.useMemo(()=>({format:e=>{switch(e.type){case eG.I.RECENT:return(0,w.t)("design_systems.assets_panel.dropdown_type_recents");case eG.I.ALL:return(0,w.t)("design_systems.assets_panel.dropdown_type_all_libraries");case eG.I.LOCAL:return(0,e5.kc)().dse_editor_templates_v1?(0,w.t)("design_systems.assets_panel.dropdown_type_local_assets"):(0,w.t)("design_systems.assets_panel.dropdown_type_local");case eG.I.FILE:return n[e.fileKey]}},isEqual:tr}),[n]);return a.createElement(tn.l6,{className:"sidebar_asset_type_select--select--PTmwH",id:"component-sidebar-asset-type-select",property:t,formatter:v,onChange:r,dropdownAlignment:"left",openOnKeyPressed:[eP.Uz.SPACE,eP.Uz.ENTER],inputRef:l,dispatch:s,chevronClassName:"sidebar_asset_type_select--chevron--xyZLx",inputClassName:"sidebar_asset_type_select--input--sSEn2",dropdownShown:e.useLocalState?e.dropdownShown:d,dropdownWidth:260,onShowDropdown:g,onShowDropdownOverride:e.useLocalState?e.onShowDropdownOverride:void 0,onHideDropdownOverride:e.useLocalState?e.onHideDropdownOverride:void 0,rightIcon:a.createElement(e9.P,{resourceId:p})},!!o[eG.I.ALL]&&a.createElement(tn.c$,{value:{type:eG.I.ALL}}),!!o[eG.I.RECENT]&&a.createElement(tn.c$,{value:{type:eG.I.RECENT}}),!!o[eG.I.LOCAL]&&a.createElement(tn.c$,{value:{type:eG.I.LOCAL}}),E.length>0?a.createElement(tn.sK,null):null,E.length>0&&!(0,e5.kc)().dse_preset_libraries?a.createElement(tn.c$,{isHeader:!0,formattedValue:m?.org?.name?(0,w.t)("design_systems.assets_panel.dropdown_org_libraries",{orgName:m.org.name}):(0,w.t)("design_systems.assets_panel.dropdown_libraries")}):null,E.map(e=>(0,e7.vR)(e)?a.createElement(tn.c$,{key:e,value:{type:eG.I.FILE,fileKey:e},removeTextRightPadding:!0,rightSettingsIcon:a.createElement(e8.FX,null)}):a.createElement(tn.c$,{key:e,value:{type:eG.I.FILE,fileKey:e},fullWidth:!0})),b&&!(0,e5.kc)().dse_preset_libraries?a.createElement(tn.sK,null):null,b&&!(0,e5.kc)().dse_preset_libraries?a.createElement(tn.c$,{isHeader:!0,formattedValue:(0,w.t)("design_systems.assets_panel.dropdown_curated_libraries")}):null,b&&y.map(e=>a.createElement(tn.c$,{key:e,value:{type:eG.I.FILE,fileKey:e},removeTextRightPadding:!0,rightSettingsIcon:a.createElement(te.t,null)})))}function tr(e,t){return e.type===eG.I.FILE&&t.type===eG.I.FILE?e.fileKey===t.fileKey:e.type===t.type}var ti=n(280999),tl=n(731719);function to({disabled:e,isList:t,onSetKeyboardNavigationElement:n,onToggleViewMode:r,recordingKey:i}){let l=t?(0,w.t)("design_systems.assets_panel.show_as_grid"):(0,w.t)("design_systems.assets_panel.show_as_list");return a.createElement(et.K0,{ref:n,recordingKey:f.Pt(i,"toggleComponentsSidebarViewMode"),"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":l,svg:t?ti.A:tl.A,onClick:r,disabled:e})}var ts=n(135076),tc=n(895235),td=n(646240),tu=n(572206),tm=n(901536),tp=n(154483),t_=n(175290),tg=n(286954),tf=n(452246),th=n(44892),tE=n(146817),ty=n(593779),tb=n(774442),tv=n(99506),tC=n(914214),tw=n(875387);function tT(e){let t=(0,tb.a)(tv._Y.DESIGN),n=(0,i.d4)(ex.getPermissionsState),r=(0,U.q5)(),l=i.d4(tC.x)?.id,{currentUserOrgId:o}=n,s=!!(o&&(0,ex.canGuestOrg)(o,n)),c=!!(l&&(0,ex.hasActiveEduTeam)(n,l));return(0,a.useMemo)(()=>t.transform(t=>(function({canGuestOrg:e,hasProTeamPaidStatus:t,openFile:n,userId:a,hasActiveEduTeam:r,assetResourceId:i}){return!!n&&!!a&&(!!e||!!t||!!r||!!((0,e5.kc)().dse_preset_libraries&&(0,e4.wJ)(i))&&g.zl.get(tw.q).has((0,ty.l)(i)))})({canGuestOrg:s,hasProTeamPaidStatus:t,openFile:r,hasActiveEduTeam:c,userId:l,assetResourceId:e})),[s,r,c,e,t,l])}var tS=n(473744),tx=n(151283),tk=n(534804),tN=n(575288),tI=n(416095),tA=n(267931),tO=n(809073),tL=n(237870),tD=n(743415),tR=n(239737),tM=n(746806),tP=n(511617),tF=n(915440),tB=n(976999),tU=n(447381),tG=n(837324),tK=n(733169),tV=n(830445),tH=n(694687),tz=n(132135),tW=n(321487),tj=n(540019),t$=n(984968),tq=n(421234);let tY="asset_file_path--path---PrgD text--fontPos11--2LvXf text--_fontBase--QdLsd",tX="asset_file_path--pathLink--lvFH3",tJ="asset_file_path--skeletonText--PIxni";function tZ({assetFileKey:e,assetNodeId:t}){let n=(0,t$.ol)(),r=(0,tH.sZ)(),l=!!r||(0,eS.w5)(n),o=r?.id,s=tj.M4.useFile(e),c=(0,tF.Rs)(eh.epW,{fileKey:e},{enabled:l}),d=c?.data?.file,u=function(e,t){let n=(0,i.d4)(e=>e.hubFiles)[e];return(0,e4.wJ)(e)&&n?(0,tG.qD)(n).name:t}(e,s?.data?.name),m=function(e,t){let n=(0,e4.wJ)(e),r=(0,tK.S)(e).unwrapOr(!1),l=(0,i.d4)(U.tB),o=tj.M4.useFile(e).data;return a.useMemo(()=>{if(!r||n||!o||!l||o.key===l.key)return null;let e=(0,tz.to)(o);return(0,tP.dR)(e,{"node-id":encodeURIComponent((0,tW.E)(t))})},[t,r,o,l,n])}(e,t),p=c?.status==="loading",_=(0,tV.E_)(e),g=d?.team?.id,f=g?function(e,t){let n=location.origin;return t?`${n}/files/${t}/team/${e}`:`${n}/files/team/${e}`}(g,o):void 0,h=d?.team?.name,E=g&&h&&l,y=d?.team?.workspace?.id,b=y&&o?tq.fO(y,o):void 0,v=d?.team?.workspace?.name,C=y&&v&&l;return l&&p?a.createElement("div",{className:tY,"data-testid":"asset-file-path-loader"},a.createElement(tB.Wi,{className:tJ,opacity:50}),"/",a.createElement(tB.Wi,{className:tJ,opacity:50})):a.createElement("div",{className:tY},C&&a.createElement(a.Fragment,null,a.createElement(tU.q,{tooltipText:v},a.createElement("a",{href:b,target:"_blank",className:tX},v)),"/"),E&&a.createElement(a.Fragment,null,a.createElement(tU.q,{tooltipText:h},a.createElement("a",{href:f,target:"_blank",className:tX},h)),"/"),a.createElement(tU.q,{tooltipText:u},m?a.createElement("a",{href:m,target:"_blank",className:tX},u):a.createElement("span",null,u)),(0,e5.kc)().dse_preset_libraries&&_&&a.createElement("div",{className:tm.cx.flex.alignCenter.justifyCenter.ml2.$},a.createElement(te.S,{hubFileId:e,showTooltip:!0})))}var tQ=n(103339),t0=n(504440),t1=n(343887),t2=n(470370),t5=n(950431),t3=n(946689),t4=n(449124),t6=n(163023),t8=n(46481),t7=n(722261),t9=n(220747),ne=n(29680),nt=n(237929),nn=n(273226),na=n(986231),nr=n(564577),ni=n(67294),nl=n(296045),no=n(371751);function ns({assetKey:e,type:t,updatedAt:n}){let r=(0,no.R8)({assetKey:e,type:t}),{avatar:i,authorName:l}=a.useMemo(()=>{if("loaded"!==r.status||!r.data)return{avatar:null,authorName:null};if("community"===r.data.type)return{avatar:a.createElement(nl.e,{entity:(0,no.M)(r.data.communityProfile),size:ni.Pf.SMALL}),authorName:r.data.communityProfile.name};let e=(0,no.G5)(r.data.user);return null!=e&&e.img_url&&(e.handle||e.name)?{avatar:a.createElement(ni.H8,{user:e,size:ni.Pf.SMALL}),authorName:e.handle}:{avatar:null,authorName:null}},[r]);return"loading"===r.status?a.createElement(tB.Wi,{className:tm.cx.h16.w100.$,animationType:tB.JR.LIGHT_SHIMMER}):i&&l?a.createElement("div",{className:"asset_updated_details--updatedAtAvatar--uf4Gy"},i,a.createElement("span",{className:"asset_updated_details--handle--63B8y"},l),n?a.createElement(a.Fragment,null,a.createElement("span",{className:"asset_updated_details--dot--SoliI"},"\xb7"),a.createElement(nr.h1,{date:n})):null):n?a.createElement("div",{className:"asset_updated_details--updatedAt--eam-d"},(0,w.tx)("design_systems.assets_panel.updated_at",{updatedAt:a.createElement(nr.h1,{date:n})})):null}var nc=n(790429),nd=n(534611);function nu({renderedAssetData:e}){let t=(0,i.wA)(),n=(0,i.d4)(e=>e.dropdownShown),r=a.useMemo(()=>{let t=e?.nodeData?.moduleFrameData?.selectedFrameGUID;return null==t||t===nd.AD?{type:"all"}:{type:"guid",guid:t}},[e?.nodeData?.moduleFrameData?.selectedFrameGUID]),o=a.useCallback(e=>{let t="all"===e.type?nd.AD:e.guid;l.glU.setPlaygroundSelectedNode(t)},[]),{nodeData:s}=e,c=a.useMemo(()=>({format:t=>{if("all"===t.type)return"All frames";let n=e?.nodeData?.moduleFrameData?.frames??{};return n[t.guid]?.name??""}}),[e?.nodeData?.moduleFrameData?.frames]);if(null==s)return null;let{playgroundGUID:d,moduleFrameData:u}=s;if(!d||null==u)return null;let m=Object.keys(u.frames??{});return m.length<2?null:a.createElement("div",{className:"playground_module_frame_section--wrapper--65QB6"},a.createElement("div",{className:"playground_module_frame_section--title--PCfEU"},(0,w.tx)("design_systems.assets_panel.frames")),a.createElement(tn.l6,{id:"playground-module-frame-select",property:r,formatter:c,dispatch:t,onChange:o,dropdownShown:n},a.createElement(tn.c$,{value:{type:"all"}}),a.createElement(tn.sK,null),m.map(e=>a.createElement(tn.c$,{key:e,value:{type:"guid",guid:e}}))))}var nm=n(812115),np=n(930269);let n_=(0,m.jz)(np.figmaComponentFlyoutTextMaxCollapsedHeight);function ng({description:e,description_rt:t}){let n=a.useRef(null),[r,i]=a.useState(!0),[l,o]=a.useState(!1),s=(0,e_.ZC)(e);a.useEffect(()=>{e&&n.current&&s!==e&&i(n.current.scrollHeight>n_)},[e,s]);let c=a.useCallback(()=>{r&&o(!0),i(!r)},[r]);if(!e&&!t)return null;let u=!!e&&(r||l);return a.createElement("div",{className:"truncated_component_description--documentationSection--87RCO"},t?a.createElement("div",null,a.createElement(nm.R,{fallback:a.createElement(eu.kt,null),errorFallback:null,value:t,quillClassName:d()("truncated_component_description--quill--yYiwV",{"truncated_component_description--quillCollapsed--3DiWp":r}),quillInnerRef:n})):a.createElement("div",{ref:n,className:d()({"truncated_component_description--collapsed--VXZTS ellipsis--ellipsisAfter6Lines--2UA7M ellipsis--_ellipsisAfterNLines--LzI7k":r},"truncated_component_description--documentationDescription--C090D text--fontPos11--2LvXf text--_fontBase--QdLsd"),dir:"auto"},e),u&&a.createElement("button",{className:"truncated_component_description--showMore--brfX6",onClick:c},r?(0,w.tx)("design_systems.assets_panel.show_more"):(0,w.tx)("design_systems.assets_panel.show_less")))}var nf=n(313888),nh=n(132208),nE=n(798415);let ny=(0,tp.fv)();function nb({renderedAssetData:e,errorType:t,canViewPlayground:n,onInsert:r,shouldHideError:i,onSetShouldHideError:l}){let o=(0,ne.T3)(),[s,c]=a.useState(!1),d=(0,I.GS)();a.useEffect(()=>{c(!1),l(!1)},[e.asset,l]);let u=(0,nc.S)(e.asset),m=(0,na.Y)(e.asset),p=a.useMemo(()=>(0,nt.kH)(e.asset.name??""),[e.asset.name]),_=a.useRef(null),g=(0,t5.NG)({text:p,textRef:_}),f=a.useMemo(()=>ny(e.asset),[e.asset]),h=(0,e4.wJ)(f),E=e.asset,y=a.useMemo(()=>{let t=e.nodeData?.playgroundGUID;if(!t)return"";let n=o.get(t);if(!n)return"";let a=o.get(n.symbolId??"");return a?(a.isState?a.parentGuid:a.guid)??"":""},[e,o]),b=a.useMemo(()=>{if(t)return{errorType:t,shouldHideError:i,setShouldHideError:l}},[t,i,l]),v=h&&(0,e5.kc)().presets_baseline?(0,w.tx)("design_systems.assets_panel.insert"):e.asset.type===eq.PW.MODULE&&(0,e5.kc)().dse_editor_templates_v1?(0,w.tx)("design_systems.assets_panel.insert_template"):(0,w.tx)("design_systems.assets_panel.insert_instance");return a.createElement("div",{className:"component_flyout_body--bodyWrapper--CoGX-"},u&&!s&&a.createElement("div",{className:"component_flyout_body--updateBanner--ETDK5 component_flyout_body--_bodyPadding--KrB6p text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement(t4.z,{orientation:"vertical",iconSrc:nh.A,onClose:()=>c(!0),variant:"design"},(0,w.tx)("design_systems.assets_panel.update_banner"))),a.createElement("div",{className:"component_flyout_body--headerFileNameWrapper--MH4jz component_flyout_body--_bodyPadding--KrB6p"},a.createElement("h2",{className:"component_flyout_body--header--3LXSQ text--fontPos14--OL9Hp text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa","data-tooltip":g?p:void 0,"data-tooltip-type":ee.Ib.TEXT,ref:_},p),!!m&&m>1&&a.createElement("div",{className:"component_flyout_body--numVariants--nureW"},(0,w.tx)("design_systems.assets_panel.variant_count",{numVariants:m}))),a.createElement("div",{className:"component_flyout_body--descriptionWrapper--wFyRa component_flyout_body--_bodyPadding--KrB6p"},a.createElement(ng,{description:E.description,description_rt:E.description_rt})),a.createElement("div",{className:"component_flyout_body--updatedWrapper--q4V48 component_flyout_body--_bodyPadding--KrB6p"},a.createElement(ns,{assetKey:(0,tI.Av)(E),type:E.type,updatedAt:E.updated_at})),a.createElement("div",{className:"component_flyout_body--buttonWrapper--Sb1Mq component_flyout_body--_bodyPadding--KrB6p"},(0,e5.kc)().dse_fpl_wave_1&&d?a.createElement(t0.IK,{onClick:r},v):a.createElement(t3.$$,{onClick:r,fullWidth:!0},v)),n&&!e?.nodeData&&!b&&a.createElement("div",{className:"component_flyout_body--skeletonWrapper--urKH5"},a.createElement(tB.Wi,{className:"component_flyout_body--skeletonHeader--VoEY3",opacity:50}),a.createElement(tB.Wi,{className:"component_flyout_body--skeletonBody--pINXr",opacity:50})),n&&(e?.nodeData||b)&&a.createElement(ne.q0.Provider,{value:o},(0,e5.kc)().dse_editor_templates_v1&&(0,e5.kc)().dse_editor_templates_frames&&a.createElement(nu,{renderedAssetData:e}),a.createElement("div",{className:"component_flyout_body--propsContainer--w8pmU"},a.createElement(t9.x,{componentProps:e.nodeData?.componentProps,moduleProps:e.nodeData?.moduleProps,moduleFrameData:e.nodeData?.moduleFrameData??void 0,label:a.createElement(nv,{renderedAssetData:e}),playgroundGUID:e.nodeData?.playgroundGUID,productComponentGUID:y,sceneGraph:o,instanceSwapPickerInitialHeight:200,instanceSwapPickerInitialPosition:"right-center",containerWidth:nn.O2.UNBOUNDED,errorData:b,shouldShowDividerAboveProps:!0})),a.createElement("div",{className:"component_flyout_body--modeContainer--8n5p5"},a.createElement(t7.b,{fill:!0,modes:e.nodeData?.modeData||{}}))))}function nv({renderedAssetData:e}){let t=a.useCallback(()=>{e.refetchAndResetScene()},[e]);return a.createElement("div",{className:"component_flyout_body--playgroundHeader--lQfDc"},a.createElement("div",{className:"component_flyout_body--flyoutLabel--6Y6lR text--fontPos11--2LvXf text--_fontBase--QdLsd"},a.createElement(t6.B,{className:"component_flyout_body--headerIcon--FHdrw",svg:nf.A}),(0,w.tx)("design_systems.assets_panel.playground_label")),(0,e5.kc)().dse_fpl_wave_1?a.createElement("span",{className:"component_flyout_body--resetButtonContainer--fCSjD"},a.createElement(t1.K,{"aria-label":(0,w.t)("design_systems.playground.reset_properties"),onClick:t,disabled:!e.hasChangesToReset,recordingKey:"resetPlaygroundProps",htmlAttributes:{"data-tooltip":(0,w.t)("design_systems.playground.reset_properties"),"data-tooltip-type":ee.Ib.TEXT}},a.createElement(t8.U,{svg:nE.A},a.createElement(t2.N,null)))):a.createElement(et.K0,{className:"component_flyout_body--resetButton--wVXDQ",svg:nE.A,onClick:t,"data-tooltip":(0,w.t)("design_systems.playground.reset_properties"),"data-tooltip-type":ee.Ib.TEXT,disabled:!e.hasChangesToReset,recordingKey:"resetPlaygroundProps"}))}var nC=n(428654),nw=n(141123),nT=n(232205),nS=n(186380);n(566418);let nx="component_flyout_thumbnail--thumbnail--p3jV2";function nk({canViewPlayground:e,renderedAssetData:t,onCloseIfHidden:n,setFlyoutHidden:r,sectionPosition:i,sectionNameForTracking:l,sectionDepth:o}){let s=a.useCallback(()=>{r(!0)},[r]),{onInsertableResourcePointerDown:c,dragState:d}=(0,nT.j)({resource:t.asset,isList:!1,clickToInsert:!1,sourceForTracking:"asset-description-preview",fromPlayground:e,recomputeCancelRectsOnPointerUp:!0,onDragStart:s,onPointerUpWithoutInsert:n,sectionPosition:i,sectionNameForTracking:l,sectionDepth:o}),u=a.useMemo(()=>{let e=(0,th.zR)(t.asset,null);if(null!=e)return nC.F.format(e)},[t.asset]);return a.createElement("div",{className:"component_flyout_thumbnail--thumbnailWrapper--P38Qq",onPointerDown:c,role:"button",style:u?{backgroundColor:u}:void 0},e&&t?.thumbnailData&&t.hasChangesToReset?a.createElement("img",{className:nx,src:t.thumbnailData.src,alt:(0,w.t)("design_systems.playground.thumbnail_alt"),draggable:!1}):a.createElement(nS.M,{className:nx,draggable:!1,key:(0,tE.V)(t.asset),item:t.asset,shouldGenerateLocalThumbnail:!1}),a.createElement(nw.q,{dragState:d,isList:!1,thumbnailOverrideSrc:e&&t?.thumbnailData?t.thumbnailData.src:void 0}))}let nN={maxWidth:640,maxHeight:480},nI=(0,tp.fv)();function nA({asset:e,onInsert:t,onLoaded:n,flyoutHidden:r,onCloseIfHidden:o,setFlyoutHidden:s,sectionPosition:c,sectionNameForTracking:d,sectionDepth:u}){let m=tT(nI(e)),[p,_]=a.useState(!1),g=a.useCallback(()=>_(!1),[]),f=(0,tQ.MO)({canvasAsset:e,canViewPlaygroundQueryResult:m,onLoaded:n,onError:g,thumbnailOptions:nN}),h=(0,tA.H)(),E=(0,i.d4)(e=>e.fileVersion),y=(0,e_.ZC)(E);if(a.useEffect(()=>{f?.state==="LOADED"&&f?.currentAssetData?.nodeData?.playgroundGUID&&null!=y&&y!==E&&(h(),l.glU.clearPlaygroundScene())},[E,y,h,e.type,f]),!f)return a.createElement(eu.kt,{className:"component_flyout--spinner--c-wap"});let b="LOADED"===f.state?f.currentAssetData:f.previousAssetData,v="ERROR"===f.state?f.errorType:void 0;return a.createElement("div",{className:"component_flyout--wrapper--96Jih"},a.createElement(nk,{renderedAssetData:b,canViewPlayground:m.unwrapOr(!1),onCloseIfHidden:o,setFlyoutHidden:s,sectionPosition:c,sectionNameForTracking:d,sectionDepth:u}),!r&&a.createElement(nb,{renderedAssetData:b,errorType:v,canViewPlayground:m.unwrapOr(!1),onInsert:t,onSetShouldHideError:_,shouldHideError:p}))}var nO=n(180715),nL=n(837746);let nD=(0,m.jz)(nL.LdP),nR=(0,m.jz)(nL.wkK),nM=(0,tp.fv)(),nP=(0,tL.Ju)(function({asset:e,searchSessionId:t,query:n,sectionPosition:l,sectionNameForTracking:o,assetTypeDropdownSelection:s,sectionDepth:c,containerWidth:d,onGetKeyboardNavigationItemById:m}){let p=a.useRef(null),_=(0,td.Xr)(nO.T),g=a.useMemo(()=>nM(e),[e]),f=tT(g),h=(0,e6.cm)(g),E=(0,U.q5)(),y=(0,i.wA)(),b=(0,i.d4)(e=>(0,eN.e_)(e).local.thumbnails),v=(0,tA.H)(),C=(0,i.d4)(e=>e.instanceSwapPickerShown),T=(0,tD.k)(),S=(0,ew.tM)();(0,es.h)(()=>{u.az.trackDefinedEvent("assets_panel.flyout_opened",{assetKey:(0,tE.V)(e),assetType:(0,tE.q)(e.type),fileKey:g,isLocal:e.isLocal,fileParentOrgId:E?.parentOrgId??void 0,fileTeamId:E?.teamId??void 0,assetsPanelVersion:T,partnerType:(0,tx.X)(g),queryId:S??void 0})}),(0,es.h)(()=>()=>{y((0,tg.vq)()),_(!1)}),a.useEffect(()=>{if(!(0,tI.dx)(e)||!e.isLocal)return;let t=e.node_id?b[e.node_id]:null,n=e.type===eq.PW.COMPONENT?e.content_hash:e.version;t?.content_hash!==n&&requestAnimationFrame(()=>{let t=(0,th.r2)(e.node_id);null!=t&&y(tf.T1({thumbnails:[{nodeId:e.node_id,url:t,type:e.type}],source:eq.$1.LOCAL}))})},[e,y,b]);let x=a.useCallback(()=>{requestAnimationFrame(()=>p?.current?.ensureModalOnScreen())},[]),k=a.useCallback(()=>{C?.isShown&&y((0,tg.vq)())},[y,C]),N=(0,tk.Hu)(g),I=(0,tR.Nv)(!0),A=a.useCallback(()=>{if("loaded"!==f.status)return;let a=L.Y5.getViewportInfo(),r={canvasPosition:{x:a.offsetX,y:a.offsetY},insertAsChildOfCanvas:!0,percentageOffset:new tu.Mi(.5,.5),storeInRecentsKey:tO.$A.Design,useSmartPositioning:!0,fromPlayground:f.data};e.type===eq.PW.COMPONENT?y((0,eg.Yf)({item:e,...r})):e.type===eq.PW.STATE_GROUP?y((0,eg.b$)({item:e,...r})):e.type===eq.PW.MODULE&&y((0,eg.Bs)({item:e,...r,afterModuleInsertion:()=>L.Y5.triggerAction("commit")}));let i={aiResultsEnabled:I,assetKey:(0,tI.Av)(e),assetType:(0,tE.q)(e.type),queryId:S??void 0,scoreAi:e.ai_score??void 0,scoreLexical:e.lexical_score??void 0,assetTypeDropdownSelection:s,assetsPanelVersion:T,fileKey:E?.key??void 0,fileParentOrgId:E?.parentOrgId??void 0,fileTeamId:E?.teamId??void 0,isExample:(0,tS.o)(e),libraryKey:e.library_key,partnerType:(0,tx.X)(g),sectionDepth:c,sourceSection:o??void 0};u.az.trackDefinedEvent("assets_panel.flyout_insert",{...i,libraryType:N,searchSessionId:t??void 0,searchQuery:n,sectionPosition:l}),u.az.trackDefinedEvent("asset_search.result_inserted",{...i,libraryType:N,position:l,query:n,sessionId:t??void 0,entryPoint:"assets-panel"})},[f,e,g,y,s,E?.key,E?.parentOrgId,E?.teamId,N,t,n,l,o,c,T,I,S]);a.useEffect(()=>{let e=e=>{let t=r.findDOMNode(p.current?.getEl());if(t){if(!t.contains(e.target)){if(_(!1),(0,tc.NX)(e.target,"data-does-not-dismiss-component-flyout"))return;y(j.ES({type:tt.V}));return}_(!0)}};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[y,_]);let O=a.useCallback(t=>{let n=t.event.code??t.event.key,a=(0,tE.V)(e),r=m?.(a);if(!r)return;let i=t.event.keyCode===eP.Uz.TAB,l=t.event.shiftKey;if((0,ed.c2)(t.event,!1)){r.getItemAbove()?.focus(),t.accept();return}if((0,ed.Nt)(t.event,!1)){r.getItemBelow()?.focus(),t.accept();return}if((0,ed.yn)(n,!1)||i&&l){r.getItemToTheLeft()?.focus(),t.accept();return}if((0,ed.lv)(n,!1)||i&&!l){r.getItemToTheRight()?.focus(),t.accept();return}if("Enter"===n){A(),t.accept();return}},[e,A,m]);var D=a.createElement("div",{className:tm.cx.minW0.flex1.$},a.createElement("div",null,(0,w.t)("design_systems.assets_panel.details")),a.createElement(t_.Y,{spacing:0,direction:"horizontal"},e&&a.createElement(tZ,{assetFileKey:g,assetNodeId:e.node_id}),h&&a.createElement("div",{className:tm.cx.pr4.$},a.createElement(e8.KP,{fileKey:g,variant:"secondary",tooltipLocation:"below"}))));let[R,M,P]=(0,tN.J)(!1),F=a.useCallback(()=>{R.current&&v()},[R,v]);return"loaded"!==f.status?null:a.createElement(tM.vx,{alwaysEnsureModalOnScreen:!0,allowAutoExpanding:!0,canRenderBelowViewport:!1,headerSize:"large",initialPosition:new tu.Mi(d+1,nD),onClick:k,onClose:v,onKeyDown:O,title:D,truncateTitleText:!0,initialWidth:nR,ref:p,dataTestId:"component-flyout-modal",hidden:M,noCancelDragAndDrop:!0},a.createElement("div",{"data-not-draggable":!0},a.createElement(nA,{asset:e,onLoaded:x,onInsert:A,flyoutHidden:M,onCloseIfHidden:F,setFlyoutHidden:P,sectionPosition:l,sectionNameForTracking:o,sectionDepth:c})))},tt.V);var nF=n(38580),nB=n(940596);let nU=(0,nB.Wh)(()=>(0,nF.eU)(0));var nG=n(811529),nK=n(669178);function nV(e,t,n){return null!=e&&(t[e.type]||e.type===eG.I.FILE&&n[e.fileKey])?e:{type:eG.I.ALL}}var nH=n(857766),nz=n(670494),nW=n(875847),nj=n(532888),n$=n(238837),nq=n(372291),nY=n(233333),nX=n(794272);let nJ="searchResults";function nZ(e,t){return`${t}:${e.key}`}function nQ(e){return`${e}:${nJ}:templates`}function n0(e){return`${e}:recentlyUsed`}function n1(e){return`${e}:stickySection`}var n2=n(734013),n5=n(634832),n3=n(607283),n4=n(30637),n6=n(801161),n8=n(274071),n7=n(603396),n9=n(969504),ae=n(488094),at=n(734017),an=n(739212),aa=n(448406),ar=n(486107),ai=n(408938);let al=(0,tp.fv)();function ao({asset:e,fileName:t,sourceForTracking:n,thumbHeight:r,thumbLayout:l,thumbWidth:o,viewMode:s,sectionNameForTracking:c,sectionPosition:m,noFlyout:p,preventDrag:_,disableContextMenu:f}){let h=(0,i.wA)(),E=(0,i.d4)(e=>e.dropdownShown),y=(0,i.d4)(eI.dK),b=(0,i.d4)(eN.F9),v=(0,i.d4)(eN.e_),C=(0,g.md)(nO.T),w=v.assetsPanelSearch.searchOptions?.type===eG.I.ALL,T=a.useMemo(()=>al(e),[e]),S=(0,e6.cm)(T),x=(0,tV.E_)(T),k=w&&(S||x),N=a.useRef(null),I=(0,nt.kH)(e.name),A=(0,t5.NG)({text:I,textRef:N}),O=a.useRef(null),L=(0,t5.NG)({text:t??"",textRef:O}),D=E?.type===at.K.ASSETS_PANEL?E?.data?.component:void 0,R=D?.node_id===e.node_id,M=s===nG.Bk.List,P=M?"list-no-padding":"grid",F=!!v.assetsPanelSearch.query,B=(0,n9.F)(e,at.K.ASSETS_PANEL,m,c),G=(0,n7.n)(e),K=(0,e_.ZC)(G),V=!p;a.useEffect(()=>{G&&!K&&h(n6.jD())},[G,h,K]);let H=e.isLocal&&(0,n4.PN)()?(0,an.eT)(e.node_id,y).join("-"):e.node_id,z="Local components"===c||"Local private components"===c||e.isLocal,{handleClick:W,handleDoubleClick:j}=function(e,t){let n=(0,U.q5)(),r=a.useRef(null),{searchSessionId:i}=(0,ew.Gq)(),l=(0,ew.tM)(),o=a.useCallback(a=>{u.az.trackDefinedEvent("assets_panel.component_clicked",{isDoubleClick:a,isLocalComponent:t,assetKey:(0,tE.V)(e),fileKey:n?.key,fileTeamId:n?.teamId??void 0,fileOrgId:n?.parentOrgId??void 0,searchSessionId:i??void 0,assetsPanelVersion:2,queryId:l??void 0})},[e,t,n?.key,n?.parentOrgId,n?.teamId,i,l]);return{handleClick:a.useCallback(()=>{r.current||(r.current=setTimeout(()=>{o(!1),r.current=null},500))},[o]),handleDoubleClick:a.useCallback(()=>{r.current&&(clearTimeout(r.current),r.current=null),o(!0)},[o])}}(e,z??!1),$=l!==aa.rp.SMALL&&!M,q=!M&&(0,e5.kc)().api_asset_search_with_scores,Y=(0,na.Y)(e),X=M?r:r-2,J=M?o:o-2,Z=a.useMemo(()=>_?void 0:{sourceForTracking:n,clickToInsert:!1,afterSuccessfulInsert:n8.$z,sectionNameForTracking:c},[_,c,n]),Q=z?a.createElement(ae.MT,{item:e,height:X,width:J,draggable:Z,onContextMenu:f?void 0:B,shouldHideTooltip:V||R||G,isFilePublished:b,recordingNodePath:H,isSearch:F,useBaseTile:!0,hideNameOverlay:$,numVariants:Y,displayType:P,sectionPosition:m,showTooltipImmediately:!1,fileName:A||L?t:void 0,alwaysShowBorder:!0}):a.createElement(ae.lX,{item:e,showName:!0,height:X,width:J,draggable:Z,onContextMenu:f?void 0:B,shouldHideTooltip:V||R||G,recordingNodePath:H,isSearch:F,useBaseTile:!0,hideNameOverlay:$,numVariants:Y,displayType:P,sectionPosition:m,showTooltipImmediately:!1,fileName:A||L?t:void 0,alwaysShowBorder:!0});return a.createElement("div",{className:M?ar.AD:ar.iE,onClick:W,onDoubleClick:j},M?Q:a.createElement("div",{className:d()(ar.QX,{[ar.Gr]:G,[ar.HR]:G&&C})},Q),$&&a.createElement("div",{role:"button",className:ar.Bm,style:{width:o}},a.createElement("span",{className:ar.UU,ref:N},I),V&&a.createElement(t6.B,{ariaHidden:!0,className:ar.OW,svg:ai.A})),$&&!!t&&a.createElement(t_.Y,{spacing:0,direction:"horizontal"},a.createElement("div",{className:d()(ar.Md,ar.Rm),ref:O,style:k?{maxWidth:o-e9.J}:{width:o}},t),k&&a.createElement(e9.P,{resourceId:T,showPresetTooltip:!0,tooltipDelay:500,tooltipLocation:"below",compact:!0})),q&&a.createElement(a.Fragment,null,a.createElement("div",{className:d()(ar.Md,ar.Rm),style:k?{maxWidth:o-e9.J}:{width:o}},"AI: "+(e.ai_score??"N/A")),a.createElement("div",{className:d()(ar.Md,ar.Rm),style:k?{maxWidth:o-e9.J}:{width:o}},"Lex: "+(e.lexical_score??"N/A"))),V&&M&&a.createElement(t6.B,{ariaHidden:!0,className:ar.Ki,svg:ai.A}))}var as=n(47506),ac=n(10648),ad=n(262311);let au="library_section_header--sectionHeaderH1--P70zQ ellipsis--ellipsis--Tjyfa",am="library_section_header--sectionHeader3_redesign--TGISe ellipsis--ellipsis--Tjyfa",ap="library_section_header--sectionHeaderH3--5VrMz ellipsis--ellipsis--Tjyfa";var a_=n(949207),ag=n(432023);let af=e=>"isExpandable"in e&&e.isExpandable,ah=(e,t)=>{switch(e){case au:return t?"library_section_header--sectionHeaderDivider--SdrS5 ellipsis--ellipsis--Tjyfa":"library_section_header--sectionHeader1_redesign--cWZaj ellipsis--ellipsis--Tjyfa";case ap:return am;default:return"library_section_header--sectionHeader3_normal--bf4ra"}},aE=e=>{let t=[];if(e&&e.length){t.push(a.createElement("div",{className:"library_section_header--sectionHeader1_sticky--mZ4QY ellipsis--ellipsis--Tjyfa",key:e[0]},e[0]+" / ","\xa0"));let n=e.slice(1).join(" / ");t.push(a.createElement("div",{className:am,key:n},n,"\xa0"))}return t};class ay extends a.Component{componentDidUpdate(e){af(this.props)&&af(e)&&e.isExpanded!==this.props.isExpanded&&"h1"===this.props.size&&(0,as.YQ)({id:"library_section_header_toggled"})}render(){let e="h1"===this.props.size?au:ap,t=af(this.props)?"library_section_header--sectionHeaderExpandable--hHEFq":"",n=ah(e,this.props.shouldShowDividerLine),r=af(this.props)&&this.props.isFixed?"library_section_header--isFixed--eVHns":"";return a.createElement(eW.fu,{name:"Section Header",properties:{title:this.props.title,isExpanded:!!af(this.props)&&this.props.isExpanded},trackingTargets:ac.K.RCS},a.createElement("div",{className:d()(n,e,t,r)},af(this.props)&&a.createElement(t6.B,{className:this.props.isExpanded?"library_section_header--expandCaretOpen--083vU library_section_header--expandCaret--20Tzs object_row--expandCaret--f1MjE object_row--indent--uZlad":"library_section_header--expandCaret--20Tzs object_row--expandCaret--f1MjE object_row--indent--uZlad",svg:this.props.isExpanded?a_.A:ag.A}),af(this.props)&&this.props.breadcrumbPath&&!this.props.isFixed&&a.createElement("div",{className:"library_section_header--breadcrumbPath--Jevbg"},this.props.breadcrumbPath,"\xa0"),af(this.props)&&this.props.isFixed&&this.props.stickyHeadertokens&&this.props.stickyHeadertokens.length?aE(this.props.stickyHeadertokens):a.createElement("div",{className:n},this.props.title),(0,e7.vR)(this.props.subscribedFileKey)&&a.createElement("div",{className:tm.cx.flex.alignCenter.justifyCenter.ml4.$},a.createElement(e8.KP,{fileKey:this.props.subscribedFileKey})),(0,e5.kc)().dse_preset_libraries&&(0,tV.TX)(this.props.subscribedFileKey)&&a.createElement("div",{className:tm.cx.flex.alignCenter.justifyCenter.ml4.$},a.createElement(te.S,{hubFileId:this.props.subscribedFileKey,showTooltip:!0,redirectToHubFile:!0}))))}}ay.H1_HEIGHT=(0,m.hG)(ad.BS),ay.H3_HEIGHT=(0,m.hG)(ad.T);class ab extends a.Component{render(){return a.createElement("div",{className:12===this.props.size?"library_section_header--spacer12--0h1Dt":"library_section_header--spacer16--iPkYc"})}}ab.HEIGHT=(0,m.hG)(ad.FX);let av="component_sidebar--stickyHeaderSpacer--SaKsM",aC=(0,m.hG)(ad.FX),aw=(0,m.hG)(ad.FX)/2,aT=(0,m.hG)(ad.Nz),aS=(0,m.hG)(ad.cP),ax=(0,tp.fv)();function ak({parent:e,outputElements:t,libraryNameByResourceId:n,items:r,keyPrefix:i,sharedOptions:l,sectionNameForTracking:o}){let s=(0,aa.PI)(r,!0),c={layout:s,...l},d=(0,aa.A5)(c),{width:u,height:p}=(0,aa.rj)(c,d),_=l.isList?1:0,g=l.isList?0:aT,f=l.isList||!n?0:aS,h=p+(l.isList?aw:aC)+g+f+_+(l.isList?0:-2);(0,e5.kc)().api_asset_search_with_scores&&(h+=2*(0,m.hG)(ad.uY));let E=u+(l.isList?aw:aC)+(l.isList?0:-2),y=0,b=n3.oz.getNextRenderedElementTop(t)+aw;for(let[c,m]of r.entries()){let r=l.isList?b+y*h:b+Math.floor(y/d)*h,_=l.isList?0:3+y%d*E,g=(0,tE.V)(m),f=ax(m);t.push({parent:e,type:n3.zq.TILE,top:r,left:_,height:h,key:`${i}:${g}`,element:function({item:e,fileName:t,sourceForTracking:n,sectionNameForTracking:r,thumbLayout:i,thumbHeight:l,thumbWidth:o,isList:s,sectionPosition:c}){return a.createElement(ao,{asset:e,fileName:t,sourceForTracking:n,sectionNameForTracking:r,thumbLayout:i,thumbHeight:l,thumbWidth:o,viewMode:s?nG.Bk.List:nG.Bk.Grid,sectionPosition:c})}({containerWidth:l.containerWidth,fileName:f?n?.[f]:void 0,sourceForTracking:l.sourceForTracking,sectionNameForTracking:o,thumbLayout:s,thumbHeight:p,thumbWidth:u,isList:l.isList,item:m,isExpanded:l.isExpanded,sectionPosition:c}),item:m,numCols:d,containerWidth:l.containerWidth,sectionNameForTracking:o,sectionPosition:c}),y+=1}}let aN=(e,t,n)=>{let r=n1(n.keyPrefix),i=n3.oz.getNextRenderedElementTop(t),l={parent:e,type:n3.zq.ROW,top:i,height:"h1"==n.size?ay.H1_HEIGHT:ay.H3_HEIGHT,key:r,element:a.createElement(ay,{size:n.size,isExpandable:!0,isExpanded:n.isExpanded,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,isFixed:!1,subscribedFileKey:n.subscribedFileKey}),isSticky:!0,isFixed:!1,children:[],isExpandable:!0,isExpanded:n.isExpanded,getExpandableElement:e=>a.createElement(ay,{size:n.size,isExpandable:!0,isExpanded:e,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,subscribedFileKey:n.subscribedFileKey}),sectionNameForTracking:n.sectionNameForTracking,rowType:n.rowType,fixedElement:a.createElement(a.Fragment,null,a.createElement("div",{className:av}),a.createElement(ay,{size:"h1",isExpandable:!0,isExpanded:n.isExpanded,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,isFixed:!0,subscribedFileKey:n.subscribedFileKey}))};return t.push(l),l};function aI({sectionHeaderText:e,isFixed:t}){return a.createElement("div",{className:d()("component_sidebar--sectionHeader--v0N1h",t?"component_sidebar--isFixed--orinE":"")},a.createElement("div",{className:"component_sidebar--sectionHeaderText--hDKu5"},e))}function aA(e,t,n){let r=n3.oz.getNextRenderedElementTop(e),i={key:`${n.keyPrefix}:sectionHeader:${t}`,isSticky:!0,parent:null,isFixed:!1,type:n3.zq.ROW,top:r,height:40,element:a.createElement(aI,{sectionHeaderText:t,isFixed:!1}),fixedElement:a.createElement(a.Fragment,null,a.createElement("div",{className:av}),a.createElement(aI,{sectionHeaderText:t,isFixed:!0})),isStaticRow:!0,sectionNameForTracking:n.sectionNameForTracking};return e.push(i),i}function aO({outputElements:e,results:t,moreResults:n,showMoreResults:r,keyPrefix:i,overallOptions:l,libraryNameByResourceId:o,toggleShowMoreResults:s,parent:c}){if(t.length>0&&ak({parent:c??null,outputElements:e,items:t,keyPrefix:`${i}:results`,sharedOptions:l,libraryNameByResourceId:o,sectionNameForTracking:"Primary search results"}),n.length>0){let t=n3.oz.getNextRenderedElementTop(e);e.push({parent:c??null,type:n3.zq.ROW,top:t,height:40,key:`${i}:moreResultsLink`,element:a.createElement("div",{className:"component_sidebar--text--g20jk"},r&&(0,w.tx)("design_systems.assets_panel.showing_results_from_all_libraries"),!r&&a.createElement("a",{className:"component_sidebar--link--I-ane blue_link--blueLink--9rlnd",onClick:s},(0,w.tx)("design_systems.assets_panel.more_results_in_all_libraries",{results:n.length}))),sectionNameForTracking:"More search results"}),r&&ak({parent:null,outputElements:e,items:n,keyPrefix:`${i}:moreResults`,sharedOptions:l,libraryNameByResourceId:o,sectionNameForTracking:"More search results"})}}function aL({prevParent:e,outputElements:t,inputSubtree:n,inputParentTree:r,keyPrefix:i,sharedOptions:l,sectionNameForTracking:o,hideTitle:s}){let c=nZ(n,i),d=!s&&function(e,t){switch(e.type){case"FILE":return""!==e.name;case"PAGE":return t.subtrees.length>1;case"NAME_GROUP":return!e.skipElementsInRendering;case"ASSET_TYPE":return e.items.length>0||e.subtrees.length>0}}(n,r),u=function(e,t,n,a,r,i){if(!e)return null;let l=nZ(a,r),o=n1(l),s=i.isExpanded(o,(0,n2.pR)(a.type,a.sectionNameForTracking));switch(a.type){case"FILE":return aN(null,n,{keyPrefix:l,size:"h1",title:a.name,isExpanded:s,stickyHeaderTokens:a.stickyHeaderTokens?a.stickyHeaderTokens:void 0,subscribedFileKey:a.subscribedFileKey,sectionNameForTracking:a.sectionNameForTracking,rowType:n3.l$.LIBRARY});case"PAGE":return aN(t,n,{keyPrefix:l,title:a.name,size:"h3",isExpanded:s,stickyHeaderTokens:a.stickyHeaderTokens?a.stickyHeaderTokens:void 0,sectionNameForTracking:a.sectionNameForTracking,rowType:n3.l$.PAGE});case"NAME_GROUP":return aN(t,n,{keyPrefix:l,size:"h3",title:a.flattenedPath?a.flattenedPath:a.name,isExpanded:s,breadcrumbPath:a.breadcrumbPath?a.breadcrumbPath:void 0,stickyHeaderTokens:a.stickyHeaderTokens?a.stickyHeaderTokens:void 0,sectionNameForTracking:a.sectionNameForTracking,rowType:n3.l$.NAME_GROUP});case"ASSET_TYPE":let c=aD(a.sectionNameForTracking);return aN(t,n,{keyPrefix:l,size:"h3",title:a.name,isExpanded:!0,sectionNameForTracking:a.sectionNameForTracking,rowType:c})}}(d,e,t,n,i,l),m=u?u.children:t,p=u||e;if((0,e5.kc)().dse_templates_proto){let e=n.subtrees.find(n$.Qe);null!=e&&aL({prevParent:null,outputElements:m,inputSubtree:e,inputParentTree:n,keyPrefix:i,sharedOptions:l,sectionNameForTracking:e.sectionNameForTracking})}switch(n.type){case"PAGE":case"ASSET_TYPE":case"FILE":ak({parent:p,outputElements:m,items:n.items,keyPrefix:c,sharedOptions:l,sectionNameForTracking:o});break;case"NAME_GROUP":n.skipElementsInRendering||ak({parent:p,outputElements:m,items:n.items,keyPrefix:c,sharedOptions:l,sectionNameForTracking:o});break;default:(0,n5.assertNever)(n.type)}for(let e of n.subtrees)(0,e5.kc)().dse_templates_proto&&(0,n$.Qe)(e)||aL({prevParent:p,outputElements:m,inputSubtree:e,inputParentTree:n,keyPrefix:c,sharedOptions:l,sectionNameForTracking:o});"FILE"===n.type&&d&&function(e,t,n){let r=n3.oz.getNextRenderedElementTop(t);t.push({parent:e,type:n3.zq.SEPARATOR,top:r,height:n.size,key:`${n.keyPrefix}:spacer${n.size}`,element:a.createElement(ab,{size:n.size})})}(p,m,{keyPrefix:c,size:16})}let aD=e=>{let t=e?.toLowerCase().includes("local");return e?.toLowerCase().includes("templates")?t?n3.l$.LOCAL_TEMPLATES:n3.l$.TEMPLATES:t?n3.l$.LOCAL_COMPONENTS:n3.l$.COMPONENTS},aR="root";var aM=n(545816);let aP=[];function aF(e,t,n){let a=[];return e&&aL({prevParent:null,outputElements:a,inputSubtree:e,inputParentTree:t,keyPrefix:aR,sharedOptions:n,sectionNameForTracking:e.sectionNameForTracking,hideTitle:!0}),a}let aB="library-section-asset-type";function aU(e){switch(e){case"all":return{type:eG.I.ALL};case"recent":return{type:eG.I.RECENT};case"local":return{type:eG.I.LOCAL};default:return{type:eG.I.FILE,fileKey:e}}}var aG=n(56063),aK=n(639318),aV=n(336599),aH=n(705129);function az(e){let t=(0,i.d4)(e=>e.loadingState),n=(0,i.d4)(e=>e.fileVersion),r=(0,U.q5)(),l=(0,tD.k)(),o=r&&null!=n&&(0,aH.yD)(r.key)||null,s=!(null!=o&&(0,aV.D2)(t,o));a.useEffect(()=>{s||function(e,t,n){if(aW)return;let{numLibraries:a,numComponents:r,numComponentsWithLimit:i}=e();(0,u.sx)("Assets Panel Initial Load",{numLibraries:a,numComponents:r,numComponentsWithLimit:i,assetsPanelVersion:t,fileKey:n?.key,fileTeamId:n?.teamId??void 0,fileOrgId:n?.parentOrgId??void 0}),aW=!0}(e,l,r)},[e,s,r,l])}let aW=!1;var aj=n(675678),a$=n(799569),aq=n(656107),aY=n(931828),aX=n(101505),aJ=n(206193);function aZ(){let e=(0,i.wA)(),t=(0,U.q5)(),n=(0,i.d4)(e=>e.user?.id);if(!t)return null;let r=t.teamId,l=a.createElement(t3.Us,{className:"library_upsell_banner--blueLink--bt6GX blue_link--blueLink--9rlnd",onClick:function(){(0,u.sx)("library_upsell_badge_clicked",{fileKey:t?.key,teamId:r,userId:n}),e((0,j.to)({type:aq.V,data:{upsellSource:aJ.b.LIBRARY_UPSELL_BADGE,teamId:r??void 0,openCheckoutInNewTab:!0}}))},trackingProperties:{trackingDescriptor:aX.c.UPGRADE_TO_PROFESSIONAL},trusted:!0,role:"button"},(0,w.tx)("design_systems.assets_panel.library_upsell_upgrade"));return a.createElement(b.tH,{boundaryKey:"LibraryUpsellBanner",fallback:b.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:aj.FigmaTeam.MONETIZATION_UPGRADES}},a.createElement(eW.fu,{name:"library upsell badge",properties:{fileKey:t?.key,teamId:t?.teamId}},a.createElement("div",{className:"library_upsell_banner--bannerBackground--WlTVY"},a.createElement("div",{className:"library_upsell_banner--bannerContainer--SqSHa"},a.createElement(a$.Jn,{className:"library_upsell_banner--closeButton--U1sPN",onClick:function(){(0,u.sx)("library_upsell_badge_dismissed",{fileKey:t?.key,teamId:r,userId:n}),e(aY.b({has_dismissed_component_sidebar_library_upsell_banner:!0}))}}),a.createElement("div",{className:"library_upsell_banner--bannerContent--SUcpT"},a.createElement("div",{className:"library_upsell_banner--bannerHeader--Lbg8d"},a.createElement(t8.U,{svg:eJ.A,className:"library_upsell_banner--bannerIcon--n5IGN"},a.createElement(eH.l,null))),a.createElement("p",{className:"library_upsell_banner--bannerTitle--AN3mP"},(0,w.tx)("design_systems.assets_panel.library_upsell_header")),a.createElement("p",{className:"library_upsell_banner--bannerBody--GSg3l"},(0,w.tx)("design_systems.assets_panel.library_upsell_body",{upgradeToProfessionalPlanLink:l})))))))}let aQ=(0,m.hG)(nL.gNA),a0={improved:{search:{path:[0,0],column:0},libraryModal:{path:[0,0],column:1},dropdown:{path:[0,1],column:0},viewToggle:{path:[0,1],column:1}}};function a1({viewMode:e,toggleViewMode:t,containerSizingOptions:n,recordingKey:r}){let i=(0,K.iZ)(),l=(0,U.q5)(),[o,s]=(0,g.fp)(nU),c=(0,eo.A)(e=>{s(e),i&&(0,O.uE)("action_left_panel_scroll",{user:i},{assetsPanelVersion:2,tab:"assets",fileKey:l?.key,fileTeamId:l?.teamId??void 0,fileOrgId:l?.parentOrgId??void 0})},500);return a.createElement(ed.dP,{recordingKey:"localComponents",className:"component_sidebar--container--Wxtr4",dataTestId:"component-sidebar","data-does-not-dismiss-component-flyout":!0},a.createElement(a2,{initialScrollTop:o,onScroll:c,viewMode:e,toggleViewMode:t,containerSizingOptions:n,recordingKey:r}))}function a2({initialScrollTop:e,onScroll:t,viewMode:n,toggleViewMode:r,containerSizingOptions:l,recordingKey:o}){let s=(0,i.wA)(),c=(0,i.d4)(e=>e.dropdownShown),d=(0,i.d4)(eN.e_),m=(0,i.d4)(ek.hK),p=(0,i.d4)(eI.dK),_=(0,i.d4)(eI.Xt),f=(0,i.d4)(eA.P),y=(0,i.d4)(e=>e.userFlags.has_dismissed_component_sidebar_library_upsell_banner),b=(0,i.d4)(e=>e.isFreeUser),v=(0,i.d4)(e=>e.user),C=(0,E.Av)(),T=(0,U.q5)(),S=(0,eC.FC)(),x=(0,nY.D)(),{query:k,searchSessionId:N}=(0,ew.Gq)();(0,aG.y)(),eb();let I=(0,ed.q_)();a.useEffect(()=>{s(em.cr({shouldSearchDefaultLibraries:!1}))},[s]);let{assetType:A,libraryNameByFileKey:O,onSetAssetType:L,scrollContent:D,validAssetTypeOptions:M}=function({containerSizingOptions:e,viewMode:t}){var n;let r=function(){let e=(0,i.d4)(eN.e_),t=(0,i.d4)(U.tB),n=(0,i.d4)(nj.t_),r=(0,i.d4)(e=>e.hubFiles),l=(0,i.d4)(eN.MH),o=(0,i.d4)(eN.dM),s=(0,i.d4)(eN.h3),c=(0,i.d4)(eA.P),d=(0,ey.Ck)(),u=(0,e6.Fl)(),m=t?.teamId?c[t.teamId]:null,p=!!m&&(0,eS.w5)(m),_=(0,nW.T9)(t?.project),g=a.useMemo(()=>(0,nG.Sg)(l,o),[l,o]),f=a.useMemo(()=>(0,nG.ND)(s),[s]),h=a.useMemo(()=>(0,nG.ff)(e,t,n,_),[e,t,n,_]),E=(0,nq.Lm)(),y=a.useMemo(()=>(0,nG.sJ)(E,n,t,e,_),[n,_,e,t,E]),b=a.useMemo(()=>d()?(0,nG.o6)(e,t,r,_):null,[d,e,t,r,_]);return(0,nz.jP)(b),a.useMemo(()=>(0,n$.Nx)({localLibraryItemsInfo:g,localTemplatesInfo:f,subscribedItemsInfo:h,subscribedTemplatesInfo:y,subscribedCommunityItemsInfo:b,defaultSubscribedItemsInfo:(0,nG.Mt)(),canPublish:p,currentFileKeyForPublish:t?(0,nH.Kz)(t)?t.sourceFileKey:t.key:null,approvedLibraryKeysByResourceType:u}),[g,f,h,y,b,p,t,u])}(),{productComponents:l,templates:o}=(0,nK.g5)(tO.$A.Design),s=(0,i.d4)(eB.q5),c=(0,nY.D)(),d=a.useMemo(()=>({productComponents:l,templates:(0,e5.u4)("dse_editor_templates_v1",o,[])}),[l,o]),m=a.useMemo(()=>s?eG.v:function(e,t,n,a=[]){let r=!!((0,e5.kc)().dse_editor_templates_v1&&n&&(n.items.length>0||t.subtrees.length>0));return{[eG.I.ALL]:!0,[eG.I.RECENT]:!!(e.length+(0,e5.u4)("dse_editor_templates_v1",a.length,0)),[eG.I.LOCAL]:t.items.length>0||t.subtrees.length>0||r,[eG.I.FILE]:!1}}(l,r.localSubtree,r.localTemplateSubtree,o),[s,l,o,r.localSubtree,r.localTemplateSubtree]),p=(n=r.subscribedFileSubtrees,a.useMemo(()=>{let e={};for(let[t,a]of Object.entries(n))a&&(e[t]=a.name);return e},[n])),{assetType:_,onSetAssetType:g}=function(e,t){let[n,r]=a.useState(!1),[l,o]=a.useState({type:eG.I.ALL}),s=(0,i.wA)(),c=(0,i.d4)(eB.q5),d=(0,U.q5)();a.useEffect(()=>{n||"loading"===e||(o(nV(function(){if(h.x4)try{let e=h.x4.getItem(aB);if(!e)return;return aU(e)}catch(e){return}}(),e,t)),r(!0))},[n,e,t]);let m=a.useCallback(e=>{(!c||(0,eB.eu)(e))&&(o(e),h.x4?.setItem(aB,function(e){switch(e.type){case eG.I.ALL:return"all";case eG.I.RECENT:return"recent";case eG.I.LOCAL:return"local";case eG.I.FILE:return e.fileKey}}(e)),c&&s(em.gP({searchOptions:e})),u.az.trackDefinedEvent("assets_panel.asset_type_changed",{assetType:e.type,isSearching:!!c,fileKey:e.type===eG.I.FILE?e.fileKey:void 0,openFileKey:d?.key,fileTeamId:d?.teamId??void 0,fileOrgId:d?.parentOrgId??void 0,assetsPanelVersion:2}))},[c,s,d?.key,d?.parentOrgId,d?.teamId]),p=a.useCallback(e=>e.key===aB&&null!=e.newValue,[]),_=a.useCallback(n=>{if(!n)return;let a=aU(n);"loading"!==e&&o(nV(a,e,t))},[e,t]);return(0,h.tl)({onSync:_,shouldSyncValue:p}),{assetType:l,onSetAssetType:m}}(c?"loading":m,p),f=function({assetType:e,containerSizingOptions:t,recentlyUsedItems:n,treeWithSubtrees:r,viewMode:i}){let{library:l}=(0,nX.R)(e=>({library:e.library})),o=(0,aM.O)(),[s,c]=a.useState(!1),d=i===nG.Bk.List,u=a.useMemo(()=>({isList:d,isExpanded:n2.xO,sourceForTracking:nG.mZ,...t}),[t,d]),m=a.useMemo(()=>{let e,t;let{query:n,normalizedSearchResults:a,unsubscribedSearchResults:r}=l.assetsPanelSearch;if(!n)return aP;(0,e5.kc)().dse_editor_templates_v1?[t,e]=(0,eB._2)(a):e=a;let i=e,d=i.length+r.length;if(0===d&&(!t||0===t.length))return aP;!s&&0===i.length&&r.length>0&&c(!0);let m=[];if(t&&t.length>0&&(0,e5.kc)().dse_editor_templates_v1){let e=aA(m,(0,w.t)("design_systems.assets_panel.templates"),{keyPrefix:nQ(aR),sectionNameForTracking:"Templates search results"});aO({outputElements:m,results:t,moreResults:[],showMoreResults:!1,keyPrefix:nQ(aR),overallOptions:u,libraryNameByResourceId:o,toggleShowMoreResults:()=>{},parent:e})}if(d>0){let e=(0,e5.kc)().dse_editor_templates_v1?aA(m,(0,w.t)("design_systems.assets_panel.components"),{keyPrefix:`${aR}:${nJ}`,sectionNameForTracking:"Primary search results"}):null;aO({outputElements:m,results:i,moreResults:r,showMoreResults:s,keyPrefix:`${aR}:${nJ}`+((0,e5.kc)().dse_editor_templates_v1?"1":""),overallOptions:u,libraryNameByResourceId:o,toggleShowMoreResults:()=>{c(e=>!e)},parent:e})}return m},[o,l.assetsPanelSearch,u,s]),{productComponents:p,templates:_}=n,g=a.useMemo(()=>{if(!p.length&&!_.length)return aP;let e=[];return(0,e5.kc)().dse_editor_templates_v1?(_.length>0&&ak({parent:aA(e,(0,w.t)("design_systems.assets_panel.templates"),{keyPrefix:n0(aR+":templates"),sectionNameForTracking:"Recently used templates"}),outputElements:e,items:_,keyPrefix:n0(aR+":templates"),sharedOptions:u}),p.length>0&&ak({parent:aA(e,(0,w.t)("design_systems.assets_panel.components"),{keyPrefix:n0(aR+":components"),sectionNameForTracking:"Recently used"}),outputElements:e,items:p,keyPrefix:n0(aR+":components"),sharedOptions:u})):ak({parent:null,outputElements:e,items:p,keyPrefix:n0(aR),sharedOptions:u}),e},[p,_,u]),f=a.useMemo(()=>(0,e5.kc)().dse_editor_templates_v1?function(e,t,n){let a=[];return e.forEach(e=>{e&&aL({prevParent:null,outputElements:a,inputSubtree:e,inputParentTree:t,keyPrefix:aR,sharedOptions:n,sectionNameForTracking:e.sectionNameForTracking,hideTitle:!1})}),a}([r.localTemplateSubtree,r.localSubtree],r.tree,u):aF(r.localSubtree,r.tree,u),[u,r.localSubtree,r.localTemplateSubtree,r.tree]),h=a.useMemo(()=>aF(e.type===eG.I.FILE?r.subscribedFileSubtrees[e.fileKey]:void 0,r.tree,u),[e,u,r.subscribedFileSubtrees,r.tree]),E=a.useMemo(()=>{let e=[];return!function(e,t,n,a){if((0,e5.kc)().dse_templates_proto){let r=t.subtrees.find(n$.Qe);null!=r&&aL({prevParent:null,outputElements:e,inputSubtree:r,inputParentTree:t,keyPrefix:n,sharedOptions:a,sectionNameForTracking:r.sectionNameForTracking})}for(let r of(t.items.length>0&&ak({parent:null,outputElements:e,items:t.items,keyPrefix:n,sharedOptions:a}),t.subtrees))(0,e5.kc)().dse_templates_proto&&(0,n$.Qe)(r)||aL({prevParent:null,outputElements:e,inputSubtree:r,inputParentTree:t,keyPrefix:n,sharedOptions:a,sectionNameForTracking:r.sectionNameForTracking})}(e,r.tree,aR,u),e},[u,r.tree]);return l.assetsPanelSearch.query?m:e.type===eG.I.RECENT?g:e.type===eG.I.LOCAL?f:e.type===eG.I.FILE?h:E}({assetType:_,containerSizingOptions:e,recentlyUsedItems:d,treeWithSubtrees:r,viewMode:t});return{assetType:_,libraryNameByFileKey:p,onSetAssetType:g,scrollContent:f,validAssetTypeOptions:m}}({viewMode:n,containerSizingOptions:l}),[P,F]=(0,g.fp)(eD.Cl);(0,es.h)(()=>{P&&(L({type:eG.I.FILE,fileKey:P}),F(null))});let B=(0,ev.LR)(),G=(0,i.d4)(e=>e.universalInsertModal.showing),K=a.useCallback(()=>{G&&B()},[B,G]),V=a.useCallback((e,t,n)=>{K(),s((0,j.to)({type:nP,data:{asset:e,searchSessionId:N??void 0,query:k??void 0,sectionPosition:t,sectionNameForTracking:n,assetTypeDropdownSelection:A?.type,containerWidth:l.containerWidth,onGetKeyboardNavigationItemById:I}}))},[A,l.containerWidth,s,K,I,N,k]),H=a.useMemo(()=>({onOpenFlyout:V,assetTypeDropdownSelection:A?.type}),[A,V]);!function({allElements:e}){az(a.useCallback(()=>{let t=e.length,n=0,a=0;for(let t of e)if(!t.key.includes("localComponents")){let e=function e(t){if(t.type===n3.zq.TILE)return 1;if(!(0,n3.We)(t)||!t.isExpanded)return 0;{let n=0;for(let a of t.children)n+=e(a);return n}}(t);n+=e,a+=Math.min(e,20)}return{numLibraries:t,numComponents:n,numComponentsWithLimit:a}},[e]))}({allElements:D});let z=n===nG.Bk.List,W=d.assetsPanelSearch,$=0===D.length,q=c?.type===at.K.ASSETS_PANEL,Y=q&&c?.data?.component||null,X=(0,aK.K)(!0),J=a.useCallback(()=>{q||(0,R.wr)()},[q]),[Z,Q]=(0,h.Vc)("has-auto-expanded-component-libraries-for-nux",!1),ee=(0,ey.Ck)(),et=a.useRef(null);a.useEffect(()=>{let e=et.current;e&&0!==D.length&&ee()&&!Z&&e.expandAllComponentLibraries(308)>0&&Q(!0)},[Z,ee,D.length,Q]);let en=a.useCallback(()=>{let e=!!d.assetsPanelSearch.query,t=0===D.length;return a.createElement("div",null,e&&t&&a.createElement(eR.Wq,null),!e&&t&&a.createElement(eR.od,null))},[d.assetsPanelSearch,D.length]),ea=x||W.isLoading,er=(0,eT.jO)(),ei=T?.teamId?f[T.teamId]:null,el=!y&&b&&(!ei||!(0,eS.w5)(ei)&&(0,ex.canEditTeam)(ei.id,S))&&T?.canEdit&&er&&Object.keys(d.local.components).length>0&&(0,ep.Hz)(v?.id),eo=function(e,t){let n=a.useMemo(()=>e.find(e=>e.key.includes("subscribedCommunityComponents")&&e.key.includes("stickySection")),[e]);return a.useCallback(()=>{n&&t.current?.scrollToElement(n.key)},[n,t])}(D,et);return a.createElement(ts.U.Provider,{value:H},a.createElement(a5,{assetType:A,componentsEmpty:$,isList:z,isSearching:!!W.query,isComponentSidebarInitialLoading:x,libraryNameByFileKey:O,onSetAssetType:L,onToggleViewMode:r,recordingKey:o,validAssetTypeOptions:M}),ea?a.createElement("div",{className:"component_sidebar--loadingSpinnerContainerWithDropdown--9b8ZI"},a.createElement(eu.kt,null)):a.createElement("div",{className:"component_sidebar--assetPanelSection--mYuo2"},a.createElement(ec.O,{ref:et,scrollContent:D,recordingKey:"componentsListContainer",isList:z,getViewportHeight:e=>e-2*C,topOffset:aQ,isTileSelected:e=>!!e.item.isLocal&&_&&(0,eO.sp)(p,_,e.item.node_id),onMouseUp:J,renderEmptyState:en,width:l.containerWidth,className:"component_sidebar--scrollContainerFullHeight---DTUM component_sidebar--_scrollContainerBase--1rakD",initialScrollTop:e,onScroll:t,enableKeyboardNavigation:!0,shouldRefocusAfterKeyboardInsert:A.type===eG.I.RECENT,fileKey:T?.key,teamId:T?.teamId??void 0,orgId:T?.parentOrgId??void 0}),!!Y&&a.createElement(at.h,{selectedView:m,dropdownShown:c,defaultFileKeys:d.defaultPublished.fileKeys,onJumpToLocalComponent:X,onOpenFlyout:V,usePortal:!0}),el&&a.createElement(aZ,null),a.createElement(eL.Mw,{width:l.containerWidth,scrollToPreset:eo})))}function a5({assetType:e,componentsEmpty:t,isList:n,isSearching:r,isComponentSidebarInitialLoading:i,libraryNameByFileKey:l,onSetAssetType:o,onToggleViewMode:s,validAssetTypeOptions:c,recordingKey:d}){let u=a0.improved,{setKeyboardNavigationElement:m}=(0,ed.M3)({path:u.libraryModal.path,column:u.libraryModal.column}),{setKeyboardNavigationElement:p}=(0,ed.M3)({path:a0.improved.dropdown.path,column:a0.improved.dropdown.column}),{setKeyboardNavigationElement:_}=(0,ed.M3)({path:u.viewToggle.path,column:u.viewToggle.column});return a.createElement("div",null,a.createElement("div",{className:"component_sidebar--searchHeader--yTD7D component_sidebar--_header--nHN39"},a.createElement(eK,{searchOptions:{type:e,onSetAssetType:o},keyboardNavigationPath:u.search.path,keyboardNavigationColumn:u.search.column}),a.createElement(eQ,{entrypoint:eM.r6.ASSETS_PANEL_BUTTON,onSetKeyboardNavigationElement:m,recordingKey:d})),i||t&&!r?null:a.createElement("div",{className:"component_sidebar--pageHeader--m9FWc component_sidebar--_header--nHN39"},a.createElement(ta,{assetType:e,libraryNameByFileKey:l,onSetAssetType:o,onSetKeyboardNavigationElement:p,validAssetTypeOptions:c}),a.createElement(to,{isList:n,onToggleViewMode:s,onSetKeyboardNavigationElement:_,recordingKey:d})))}var a3=n(44160),a4=n(622422),a6=n(819229),a8=n(721910),a7=n(75395),a9=n(163586),re=n(201325),rt=n(522739),rn=n(606576);let ra="asset_panel_folder--folderButton---mVgX";var rr=n(578482);let ri=(0,m.jz)(rr.CT),rl=(0,m.jz)(rr.qv),ro=a.forwardRef(function({keyPrefix:e,name:t,onClick:n,onContextMenu:r,previewAsset:i,recordingKey:l,disabled:o,isList:s,variant:c},u){let m=a.useMemo(()=>s?{height:rl,width:rl}:{height:ri,width:ri},[s]),p=a.createElement(a.Fragment,null,"preview"===c?a.createElement("div",{className:"asset_panel_folder--folderPreview--0ezgC"},i?a.createElement(rn.V,{keyPrefix:e,preview:i,...m}):a.createElement("div",{className:"asset_panel_folder--blankThumbnail--6v5uo",style:m})):a.createElement("div",{className:"asset_panel_folder--folderIcon--FnZdp"},a.createElement(a9.x,null)),a.createElement("div",{className:"asset_panel_folder--folderName--CPNC8 ellipsis--ellipsis--Tjyfa"},t),a.createElement("div",{className:d()("asset_panel_folder--folderNextIcon--ZYH9z",{"asset_panel_folder--adjustMargin--uitBT":"icon"===c})},a.createElement(re.n,null)));return a.createElement("div",{className:"asset_panel_folder--folderContainer--UPeR-"},(0,e5.kc)().dse_fpl_wave_1?a.createElement(a7.E,{"aria-label":t,className:ra,onClick:n,ref:u,recordingKey:l,disabled:o,htmlAttributes:{onContextMenu:r}},p):a.createElement(rt.GG,{"aria-label":t,className:ra,onClick:n,onContextMenu:r,forwardedRef:u,recordingKey:l,disabled:o},p))});var rs=n(718242),rc=n(836328),rd=n(623680),ru=n(799550);function rm({subtree:e,index:t,keyPrefix:n,depth:r}){let i=(0,rs.sN)(),{folderPath:l,currentView:o}=(0,rd.wV)(),[s]=(0,ru.MA)(),{previewAsset:c}=e,{navigateToFolder:d}=(0,rd.wV)(),u=a.useCallback(()=>{i("folderRow",d(e.name))},[i,d,e.name]),m=a.useMemo(()=>[a8.ON.CONTENTS,a8.lM.ASSETS+r,a8.tM.FOLDERS,t],[r,t]),{keyboardNavigationItem:p,setKeyboardNavigationElement:_}=(0,ed.M3)({path:m,id:e.key,disabled:(l?.length??0)>r}),{focusFirstItem:g,focusSearchBar:f}=(0,rc.rl)();(0,rc.C0)(p,0===t&&r===(l?.length??0)&&o===rd.S5.Assets);let h=(0,rc.MB)({onBoth:u,onKeyDown:g,onClick:f}),E=a.useMemo(()=>l&&l.length>r,[l,r]);return a.createElement(ro,{name:e.name,onClick:h,keyPrefix:`${n}${e.name}`,previewAsset:c,recordingKey:`assetsFolder.${e.name}`,ref:_,disabled:E,variant:"list"===s?"icon":"preview"})}var rp=n(905485),r_=n(26042),rg=n(179220),rf=n(453891);function rh(){let e=a.useContext(ts.U);return e?.isUi3?e:{...e,width:0}}function rE({width:e,children:t}){let n=function(e){let t=(0,i.wA)(),{query:n,searchSessionId:r}=(0,ew.Gq)(),l=(0,rs.ht)(),o=(0,ed.q_)(),s=(0,ev.LR)(),c=(0,i.d4)(e=>e.universalInsertModal.showing),d=a.useCallback(()=>{c&&s()},[s,c]),u=a.useCallback((a,i,s,c)=>{d(),t((0,j.to)({type:nP,data:{asset:a,searchSessionId:r??void 0,query:n??void 0,sectionPosition:i,sectionNameForTracking:s,assetTypeDropdownSelection:l,containerWidth:e,onGetKeyboardNavigationItemById:o,sectionDepth:c}}))},[d,t,r,n,l,e,o]);return a.useMemo(()=>({onOpenFlyout:u,assetTypeDropdownSelection:l,isUi3:!0,width:e}),[u,l,e])}(e);return a.createElement(ts.U.Provider,{value:n},t)}let ry=(0,m.jz)(ad.Nz),rb=(0,m.jz)(ad.cP),rv=(0,m.jz)(ad.FX),rC=(0,m.jz)(rr.$c),rw=(0,m.jz)(rr.d5),rT=(0,m.jz)(ad.ZI),rS=(0,nF.eU)(!1),rx=(e,t,n,a,r)=>{if("list"===r)return rT;let i=e+ry;return t&&(i+=rb),n&&(i+=rv),a&&(i+=2*(0,m.jz)(ad.uY)),i};function rk(e,t,n,r,i,l,o){let s=[];for(let c=0;c<e.length;c+=t){let d=e.slice(c,c+t),u=[];d.forEach((e,s)=>{if(e){let d=c+s;u.push(a.createElement(rf.z,{key:`${n}-${(0,tE.V)(e)}`,asset:e,fileName:o?.getFileName?.(e),sectionDepth:o?.depth,sectionNameForTracking:i,sectionPosition:c+s,keyboardPosition:(0,rc.pg)(l,d,t,o?.hasHeader),isFirstTile:o?.includesFirstTile&&0===d,keyboardPanelDepth:o?.keyboardPanelDepth,isExample:o?.isExample,...r}))}}),s.push({element:a.createElement("div",{className:"list"===r.displayType?"asset_panel_virtualization--virtualRowList--COnhA":0===c?"asset_panel_virtualization--virtualRowFirst--mdR2j asset_panel_virtualization--virtualRow--TxsS-":"asset_panel_virtualization--virtualRow--TxsS-",role:"row"},u),key:`${n}:row-${c/t}`,keys:d.map(e=>(0,tE.V)(e)),height:rx(r.thumbHeight,!!o?.getFileName,0!==c,!!(0,e5.kc)().api_asset_search_with_scores,r.displayType)})}return s.length>0&&(s.unshift({element:a.createElement(r_.hK,{height:rC}),key:`${n}:spacer-top`,height:rC}),s.push({element:a.createElement(r_.hK,{height:rw}),key:`${n}:spacer-bottom`,height:rw})),s}function rN({elements:e,hideScrollbar:t,initialScrollTop:n,onScroll:r,anchorScroll:i,role:l}){let o=a.useRef(null),s=(0,rg.Te)({count:e.length,getScrollElement:()=>o.current,estimateSize:t=>e[t].height,getItemKey:t=>e[t].key,paddingEnd:8,overscan:6,initialOffset:n}),c=function({scrollContainerRef:e,initialScrollTop:t,onScroll:n,enabled:r,virtualizer:i,getKeys:l}){let[o,s]=a.useState(t??e.current?.scrollTop),[c,d]=a.useState(e.current?.scrollHeight),{width:u}=rh(),m=(0,e_.ZC)(u),p=a.useCallback((e,t)=>{if(!t)return{keys:[],offset:void 0};let n=e.getVirtualItems().find(e=>e.start>=t);return n?{keys:l(n),offset:n.start-t}:{keys:[],offset:void 0}},[l]),[_,g]=a.useState(()=>p(i,t??e.current?.scrollTop)),f=a.useCallback((e,t)=>{n?.(e,t),r&&(s(e),g(p(i,e)))},[r,p,n,i]);return a.useEffect(()=>{let t=m&&u&&m!==u,n=e.current?.scrollHeight&&c&&e.current?.scrollHeight!==c;if(t&&d(e.current?.scrollHeight),void 0!==o&&void 0!==_.offset&&r&&t&&n){let t=i.getVirtualItems().find(e=>l(e).some(e=>_.keys.includes(e)));if(t)i.scrollToOffset(t.start-_.offset);else{let t=o/c,n=e.current.scrollHeight*t;i.scrollToOffset(n)}}},[_.keys,_.offset,r,l,m,e,c,o,i,u]),f}({enabled:i,scrollContainerRef:o,initialScrollTop:n,onScroll:r,virtualizer:s,getKeys:a.useCallback(t=>{let n=e[t.index];return n?n.keys??[n.key]:[]},[e])}),[d,u]=(0,g.fp)(rS);return a.useEffect(()=>{if(!d)return;let t=e.findIndex(e=>"preset_libraries_header"===e.key);-1!==t&&(s.scrollToIndex(t,{align:"start"}),u(!1))},[e,s,u,d]),a.createElement(r_.xU,{scrollContainerRef:o,hideScrollbar:t,initialScrollTop:n,onScroll:c},a.createElement("div",{style:{height:`${s.getTotalSize()}px`,width:"100%",position:"relative"},role:l},s.getVirtualItems().map(t=>a.createElement("div",{key:t.key,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${t.start}px)`}},e[t.index].element))))}var rI=n(366508),rA=n(606624);let rO=(0,g.Iz)(()=>(0,nB.rt)(0));function rL({libraryKey:e,pageId:t,folderPath:n}={}){let{lastNavAction:r}=(0,rA.ZX)(),i=r===rA.r6.Back||r===rA.r6.Mount||r===rA.r6.ToggleView&&!n,[l,o]=(0,g.fp)(rO("libraries")),[s,c]=(0,g.fp)(rO(`pages-${e}`)),[d,u]=(0,g.fp)(rO(`assets-${e}-${t}-${(n??[]).join("-")}`));return{librariesScrollTop:i?l:0,pagesScrollTop:i?s:0,assetsScrollTop:i?d:0,handleScrollLibraries:a.useCallback(e=>{o(e)},[o]),handleScrollPages:a.useCallback(t=>{e&&c(t)},[c,e]),handleScrollAssets:a.useCallback(n=>{e&&t&&u(n)},[u,e,t])}}var rD=n(187882),rR=n(900931);let rM=(0,m.jz)(rr.H0),rP=2*(0,m.jz)(rr.Mj),rF={NORMAL:115,WIDE:void 0,SMALL:72},rB={minColumns:2,maxColumns:3,aspectRatio:1,maxHeight:rF.NORMAL},rU={minColumns:1,maxColumns:1,aspectRatio:3.25,maxHeight:rF.WIDE},rG={minColumns:3,maxColumns:5,aspectRatio:1,maxHeight:rF.SMALL},rK=e=>{switch(e){case aa.rp.WIDE:return rU;case aa.rp.SMALL:return rG;default:return rB}};function rV(){let{componentLayouts:e,exampleLayout:t}=function({sidebarWidth:e}){let t=a.useMemo(()=>e-rP,[e]),n=a.useMemo(()=>{let e={};for(let n of[aa.rp.NORMAL,aa.rp.WIDE,aa.rp.SMALL]){let{minColumns:a,maxColumns:r,aspectRatio:i,maxHeight:l}=rK(n),o=Math.max(Math.min(r,(0,rR.BE)({elementMinSize:l??t,gap:rM,spaceAvailable:t})),a),s=(0,rR.y5)({numElements:o,gap:rM,spaceAvailable:t}),c=(0,rR.hg)({width:s,maxHeight:l,widthToHeightRatio:i});e[n]={width:s,height:c,columns:o}}return e},[t]),r=a.useMemo(()=>Math.max((0,rR.BE)({elementMinSize:200,gap:rM,spaceAvailable:t}),1),[t]),i=a.useMemo(()=>(0,rR.y5)({numElements:r,gap:rM,spaceAvailable:t}),[r,t]),l=a.useMemo(()=>(0,rR.hg)({width:i,widthToHeightRatio:1.5,maxHeight:200}),[i]);return a.useMemo(()=>({componentLayouts:n,exampleLayout:{width:i,height:l,columns:r}}),[n,r,i,l])}({sidebarWidth:(0,rD.GQ)()}),[n,r]=a.useMemo(()=>{let t={},n={};for(let[a,r]of Object.entries(e))t[a]={thumbHeight:r.height,thumbWidth:r.width,viewMode:nG.Bk.Grid,thumbLayout:a,sourceForTracking:nG.mZ,displayType:"grid"},n[a]=r.columns;return[t,n]},[e]),i=a.useMemo(()=>({thumbHeight:t.height,thumbWidth:t.width,viewMode:nG.Bk.Grid,thumbLayout:aa.rp.NORMAL,sourceForTracking:nG.mZ,displayType:"grid"}),[t.height,t.width]),l=a.useMemo(()=>({thumbHeight:40,thumbWidth:40,viewMode:nG.Bk.List,thumbLayout:aa.rp.NORMAL,sourceForTracking:nG.mZ,displayType:"list"}),[]);return a.useMemo(()=>({componentTilePropsByLayout:n,numColumnsByLayout:r,listProps:l,exampleTileProps:i,numExampleColumns:t.columns}),[n,r,l,i,t.columns])}function rH(e,t,n,a=!1){return"list"===t?{props:e.listProps,numColumns:1}:a?{props:e.exampleTileProps,numColumns:e.numExampleColumns}:{props:e.componentTilePropsByLayout[n],numColumns:e.numColumnsByLayout[n]}}function rz({children:e,index:t,width:n}){let r=(0,g.md)(rs.h),i=a.useMemo(()=>e.flat().filter(e=>!!e),[e]),l=a.useMemo(()=>{let e=rW(-Math.min(t,i.length-1)),n=`translateX(${e})`;return{transform:n,WebkitTransform:n}},[i.length,t]),o=d()("slide_carousel--container--1f4th",{"slide_carousel--noTransition--0heGr":r});return a.createElement("div",{style:l,"data-testid":"slide-carousel",className:o},i.map((e,r)=>a.createElement("div",{className:"slide_carousel--item--w20ND",style:{width:n},key:r,"data-testid":"slide-carousel-item","aria-hidden":r!==t},e)))}let rW=e=>`${100*e}%`,rj=(0,m.jz)(rr.HE),r$=(0,m.jz)(rr._q),rq=(0,m.jz)(rr.ce),rY=(0,m.jz)(rr.RQ);function rX({page:e,width:t}){let{libraryKey:n,currentView:r}=(0,rd.wV)(),{getPage:i}=(0,rp.G)(),[l]=(0,ru.ye)(),{previousPageId:o}=(0,rd.RR)(),s=a.useMemo(()=>r===rd.S5.Pages?i(n,o):e,[r,i,n,e,o]);return n&&s?l?a.createElement(rZ,{page:s,width:t}):a.createElement(rJ,{page:s,libraryKey:n}):a.createElement("div",{style:{width:t}})}function rJ({page:e,libraryKey:t}){let{assetsScrollTop:n,handleScrollAssets:r}=rL({libraryKey:t,pageId:e.id}),[i]=(0,ru.MA)(),l=rV(),{componentSectionNameForTracking:o,templateSectionNameForTracking:s}=(0,rs.zf)(),c=a.useMemo(()=>{let t=[];if(e.templates){let n=(0,rI.r)(e.templates),{props:r,numColumns:o}=rH(l,i,aa.rp.NORMAL,!0);t.push({element:a.createElement(r_.X3,{title:(0,w.t)("design_systems.assets_panel.templates")}),key:"templates:header",height:rq}),t.push(...rk(n,o,"templates",r,s,[a8.tM.TEMPLATES],{includesFirstTile:!0}))}if(e.examples){let n=(0,rI.r)(e.examples),{props:a,numColumns:r}=rH(l,i,aa.rp.NORMAL,!0);t.push(...rk(n,r,"examples",a,o,[a8.tM.EXAMPLES],{includesFirstTile:!0,isExample:!0}))}if(e.components){e.templates&&t.push({element:a.createElement(r_.X3,{title:(0,w.t)("design_systems.assets_panel.components")}),key:"components:header",height:rq});let n=(0,rI.r)(e.components),{props:r,numColumns:s}=rH(l,i,(0,aa.PI)(n,!0));t.push(...rk(n,s,"components",r,o,[a8.tM.COMPONENTS],{includesFirstTile:!e.templates&&!e.examples}))}return t},[e.templates,e.examples,e.components,l,i,s,o]);return a.createElement(rN,{elements:c,initialScrollTop:n,onScroll:r,anchorScroll:!0,role:i})}function rZ({page:e,width:t}){let{libraryKey:n,pageId:r,folderPath:i}=(0,rd.wV)(),{getFolder:l}=(0,rp.G)(),{previousFolderPath:o,previousPageId:s}=(0,rd.RR)(),[c,d]=a.useMemo(()=>{let t=[],c=o??i??[],d=0;for(let o=-1;o<c.length;o++){let u=c.slice(0,o+1),m=l(n,r??s,u);if(m){if((0,rd.xc)(m))continue;t.push(a.createElement(rQ,{parentSubtree:e.assets,currentFolderPath:u,key:`components-${u?u.join("/"):"root"}`})),o===(i??[]).length-1&&(d=t.length-1)}}return[t,d]},[i,l,n,e.assets,r,o,s]);return a.createElement(rz,{index:d,width:t},c)}function rQ({parentSubtree:e,currentFolderPath:t}){let[n]=(0,ru.MA)(),r=a.useMemo(()=>{let n=e;for(let e of t){let t=n.subtrees.get(e);if(!t)return null;n=t}return n},[e,t]),{folderPath:i,pageId:l,libraryKey:o}=(0,rd.wV)(),s=!!o&&(0,e4.wJ)(o),c=t.length,d=i?.length??0,{assetsScrollTop:u,handleScrollAssets:m}=rL({libraryKey:o,pageId:l,folderPath:t}),p=r0({subtree:r,currentFolderPath:t,isPreset:s});return a.createElement(rN,{elements:p,hideScrollbar:c<d,onScroll:m,initialScrollTop:u,role:n})}let r0=({subtree:e,currentFolderPath:t,isPreset:n})=>{let r=rV(),{componentSectionNameForTracking:i}=(0,rs.zf)(),{folderPath:l}=(0,rd.wV)(),[o]=(0,ru.MA)(),s=t.join("/"),c=t.length,d=l?.length??0,u=a.useMemo(()=>!!(n&&(0,e5.kc)().dse_preset_libraries&&e?.items)&&e?.items.every(e=>tS.Nz(e,{isPreset:n})),[n,e?.items]),m=a.useCallback(e=>{let t=e.subtrees.values().next().value;return t&&(0,tS.dS)(t.name,{isPreset:n})},[n]),p=a.useCallback(({subtree:e,elements:t})=>{let n=e.items.length>0,l=m(e);if(n){let n=[a8.tM.COMPONENTS],{props:a,numColumns:l}=rH(r,o,(0,aa.PI)(e.items,!0),u);t.push(...rk(e.items,l,e.key,a,i,n,{hasHeader:!1,includesFirstTile:c===d,keyboardPanelDepth:c,isExample:u}))}let p=Array.from(e.subtrees.values());n&&p.length>0&&!l&&t.push({element:a.createElement(r_.cG,null),key:"divider",height:rY}),p.forEach((n,r)=>{t.push({element:a.createElement(rm,{subtree:n,index:r+e.items.length,keyPrefix:s,depth:c}),key:n.key,height:"list"===o?rj:r$}),0===r&&l&&p.length>1&&t.push({element:a.createElement(r_.cG,null),key:"examples_divider",height:rY})})},[m,r,o,u,i,c,d,s]);return a.useMemo(()=>{let t=[];return e&&p({subtree:e,elements:t}),t},[p,e])};var r1=n(707440),r2=n(268537),r5=n(501114),r3=n(738269);let r4="asset-panel-page-context-menu",r6=f.Pt("assetsLibrary","contextMenu"),r8=r2.ms,r7=r2.c$,r9=a.memo(({dropdownShown:e,usePortal:t})=>{if(!e||e.type!==r4)return null;let{data:n}=e;if(!n)return null;let{libraryPageHref:i,position:l,isLocalLibrary:o,onClickLocalPage:s,onClickSubscribedPage:c}=n;if(!l)return null;let d=a.createElement(r8,{style:r5.sx.add({top:`${l.top}px`,right:`${l.right}px`,bottom:`${l.bottom}px`,left:`${l.left}px`}).add(r5.sx.fixed).$},o?a.createElement(r7,{recordingKey:f.Pt(r6,"goToLibrary"),onClick:s},(0,w.tx)("design_systems.assets_panel.go_to_page")):a.createElement(r7,{href:i,target:"_blank",recordingKey:f.Pt(r6,"goToLibrary"),onClick:c},(0,w.tx)("design_systems.assets_panel.go_to_page")));return t?r.createPortal(d,document.body):d});function ie(){let e=(0,i.d4)(e=>e.dropdownShown),t=(0,i.d4)(ek.hK),n=(0,i.d4)(eN.e_),r=e?.type===at.K.ASSETS_PANEL&&!!e?.data?.component,l=e?.type===r4&&!!e?.data?.pageId,o=e?.type===r1.Wk&&!!e?.data?.libraryHref,s=(0,aK.K)(!0),c=a.useContext(ts.U);return a.createElement(a.Fragment,null,r&&a.createElement(at.h,{selectedView:t,dropdownShown:e,defaultFileKeys:n.defaultPublished.fileKeys,onJumpToLocalComponent:s,onOpenFlyout:c?.onOpenFlyout,usePortal:!0}),l&&a.createElement(r9,{dropdownShown:e,usePortal:!0}),o&&a.createElement(r1.iN,{dropdownShown:e,usePortal:!0}))}var it=n(612776),ia=n(178543);function ir(){return a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"23",height:"23",viewBox:"0 0 23 23",fill:"none"},a.createElement("path",{opacity:"0.88",d:"M11.5 7.37441C9.58333 2.87557 2.875 3.35474 2.875 9.10477C2.875 14.8548 11.5 19.6466 11.5 19.6466C11.5 19.6466 20.125 14.8548 20.125 9.10477C20.125 3.35474 13.4167 2.87557 11.5 7.37441Z",fill:"#D9D9D9",stroke:"black",strokeOpacity:"0.9",strokeLinecap:"round",strokeLinejoin:"round"}))}function ii(){return a.createElement("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",transform:"rotate(-7)",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{id:"Frame",clipPath:"url(#clip0_4010_27038)"},a.createElement("path",{id:"Vector",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint0_radial_4010_27038)"}),a.createElement("path",{id:"Vector_2",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint1_radial_4010_27038)"}),a.createElement("path",{id:"Vector_3",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint2_radial_4010_27038)",fillOpacity:"0.6"}),a.createElement("path",{id:"Vector_4",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint3_radial_4010_27038)"}),a.createElement("path",{id:"Vector_5",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint4_radial_4010_27038)"}),a.createElement("path",{id:"Vector_6",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint5_radial_4010_27038)"}),a.createElement("path",{id:"Vector_7",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint6_radial_4010_27038)"}),a.createElement("path",{id:"Vector_8",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint7_radial_4010_27038)"}),a.createElement("path",{id:"Vector_9",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint8_radial_4010_27038)"}),a.createElement("path",{id:"Vector_10",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint9_radial_4010_27038)"}),a.createElement("path",{id:"Vector_11",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint10_radial_4010_27038)"}),a.createElement("path",{id:"Vector_12",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint11_radial_4010_27038)"}),a.createElement("path",{id:"Vector_13",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint12_radial_4010_27038)"}),a.createElement("path",{id:"Vector_14",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint13_radial_4010_27038)"}),a.createElement("path",{id:"Vector_15",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint14_radial_4010_27038)"}),a.createElement("path",{id:"Vector_16",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint15_radial_4010_27038)"}),a.createElement("path",{id:"Vector_17",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint16_radial_4010_27038)"}),a.createElement("path",{id:"Vector_18",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint17_radial_4010_27038)"}),a.createElement("path",{id:"Vector_19",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint18_radial_4010_27038)"}),a.createElement("path",{id:"Vector_20",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint19_radial_4010_27038)"}),a.createElement("path",{id:"Vector_21",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint20_radial_4010_27038)"}),a.createElement("path",{id:"Vector_22",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint21_radial_4010_27038)"}),a.createElement("path",{id:"Vector_23",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint22_radial_4010_27038)"}),a.createElement("path",{id:"Vector_24",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint23_radial_4010_27038)"}),a.createElement("path",{id:"Vector_25",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint24_radial_4010_27038)"}),a.createElement("path",{id:"Vector_26",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint25_radial_4010_27038)"}),a.createElement("path",{id:"Vector_27",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint26_radial_4010_27038)"}),a.createElement("path",{id:"Vector_28",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint27_radial_4010_27038)"}),a.createElement("path",{id:"Vector_29",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint28_radial_4010_27038)"}),a.createElement("path",{id:"Vector_30",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint29_radial_4010_27038)"}),a.createElement("path",{id:"Vector_31",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint30_radial_4010_27038)"}),a.createElement("path",{id:"Vector_32",d:"M13.9546 22.2228C20.4528 21.4235 23.1634 16.6609 22.5013 11.2786C21.8392 5.89628 18.0552 1.93253 11.557 2.73187C5.05872 3.53123 2.34824 8.29386 3.01031 13.6761C3.67239 19.0584 7.4563 23.0222 13.9546 22.2228Z",fill:"url(#paint31_radial_4010_27038)"}),a.createElement("path",{id:"Vector_33",fillRule:"evenodd",clipRule:"evenodd",d:"M8.08988 11.722C8.40649 11.4988 8.84405 11.5744 9.06729 11.891C9.32033 12.2498 10.4692 13.4657 12.8424 13.1737C15.2155 12.8818 16.0354 11.4238 16.194 11.0143C16.3338 10.6531 16.74 10.4737 17.1013 10.6135C17.4625 10.7534 17.642 11.1596 17.5021 11.5209C17.201 12.2987 16.0108 14.1974 13.0136 14.5661C10.0164 14.9348 8.40157 13.3811 7.92089 12.6994C7.69764 12.3828 7.7733 11.9453 8.08988 11.722Z",fill:"url(#paint32_radial_4010_27038)"}),a.createElement("path",{id:"Vector_34",d:"M7.45869 9.73034C7.47098 9.55406 7.52166 9.3337 7.64781 9.15705C7.75592 9.00567 7.95919 8.82721 8.41372 8.7713C8.86051 8.71634 9.107 8.84265 9.2561 8.97067C9.42844 9.11872 9.52776 9.32233 9.56854 9.45681C9.68093 9.82757 10.0725 10.037 10.4432 9.92461C10.814 9.81222 11.0234 9.4206 10.911 9.04991C10.8171 8.73992 10.6001 8.27578 10.17 7.90648C9.71672 7.51718 9.07478 7.27659 8.24245 7.37898C7.41801 7.48039 6.85419 7.85454 6.50624 8.34174C6.17633 8.80368 6.08194 9.30776 6.05928 9.63273C6.03231 10.0191 6.32373 10.3543 6.71016 10.3813C7.09661 10.4082 7.43173 10.1168 7.45869 9.73034Z",fill:"#583F51"}),a.createElement("path",{id:"Vector_35",d:"M7.45869 9.73034C7.47098 9.55406 7.52166 9.3337 7.64781 9.15705C7.75592 9.00567 7.95919 8.82721 8.41372 8.7713C8.86051 8.71634 9.107 8.84265 9.2561 8.97067C9.42844 9.11872 9.52776 9.32233 9.56854 9.45681C9.68093 9.82757 10.0725 10.037 10.4432 9.92461C10.814 9.81222 11.0234 9.4206 10.911 9.04991C10.8171 8.73992 10.6001 8.27578 10.17 7.90648C9.71672 7.51718 9.07478 7.27659 8.24245 7.37898C7.41801 7.48039 6.85419 7.85454 6.50624 8.34174C6.17633 8.80368 6.08194 9.30776 6.05928 9.63273C6.03231 10.0191 6.32373 10.3543 6.71016 10.3813C7.09661 10.4082 7.43173 10.1168 7.45869 9.73034Z",fill:"url(#paint33_radial_4010_27038)"}),a.createElement("path",{id:"Vector_36",d:"M7.45869 9.73034C7.47098 9.55406 7.52166 9.3337 7.64781 9.15705C7.75592 9.00567 7.95919 8.82721 8.41372 8.7713C8.86051 8.71634 9.107 8.84265 9.2561 8.97067C9.42844 9.11872 9.52776 9.32233 9.56854 9.45681C9.68093 9.82757 10.0725 10.037 10.4432 9.92461C10.814 9.81222 11.0234 9.4206 10.911 9.04991C10.8171 8.73992 10.6001 8.27578 10.17 7.90648C9.71672 7.51718 9.07478 7.27659 8.24245 7.37898C7.41801 7.48039 6.85419 7.85454 6.50624 8.34174C6.17633 8.80368 6.08194 9.30776 6.05928 9.63273C6.03231 10.0191 6.32373 10.3543 6.71016 10.3813C7.09661 10.4082 7.43173 10.1168 7.45869 9.73034Z",fill:"url(#paint34_radial_4010_27038)"}),a.createElement("path",{id:"Vector_37",d:"M7.45869 9.73034C7.47098 9.55406 7.52166 9.3337 7.64781 9.15705C7.75592 9.00567 7.95919 8.82721 8.41372 8.7713C8.86051 8.71634 9.107 8.84265 9.2561 8.97067C9.42844 9.11872 9.52776 9.32233 9.56854 9.45681C9.68093 9.82757 10.0725 10.037 10.4432 9.92461C10.814 9.81222 11.0234 9.4206 10.911 9.04991C10.8171 8.73992 10.6001 8.27578 10.17 7.90648C9.71672 7.51718 9.07478 7.27659 8.24245 7.37898C7.41801 7.48039 6.85419 7.85454 6.50624 8.34174C6.17633 8.80368 6.08194 9.30776 6.05928 9.63273C6.03231 10.0191 6.32373 10.3543 6.71016 10.3813C7.09661 10.4082 7.43173 10.1168 7.45869 9.73034Z",fill:"url(#paint35_radial_4010_27038)"}),a.createElement("path",{id:"Vector_38",d:"M15.1166 8.78795C15.1288 8.61168 15.1795 8.39131 15.3057 8.21466C15.4138 8.06328 15.617 7.88482 16.0716 7.82891C16.5184 7.77395 16.7649 7.90026 16.914 8.02828C17.0863 8.17633 17.1856 8.37994 17.2264 8.51443C17.3388 8.88518 17.7304 9.0946 18.1011 8.98222C18.4718 8.86983 18.6813 8.47821 18.5689 8.10753C18.4749 7.79754 18.2579 7.3334 17.8279 6.96409C17.3746 6.5748 16.7326 6.33421 15.9003 6.43659C15.0758 6.53801 14.5121 6.91215 14.1641 7.39935C13.8342 7.86129 13.7398 8.36538 13.7171 8.69035C13.6902 9.07677 13.9816 9.41193 14.368 9.43888C14.7545 9.46583 15.0896 9.17444 15.1166 8.78795Z",fill:"#583F51"}),a.createElement("path",{id:"Vector_39",d:"M15.1166 8.78795C15.1288 8.61168 15.1795 8.39131 15.3057 8.21466C15.4138 8.06328 15.617 7.88482 16.0716 7.82891C16.5184 7.77395 16.7649 7.90026 16.914 8.02828C17.0863 8.17633 17.1856 8.37994 17.2264 8.51443C17.3388 8.88518 17.7304 9.0946 18.1011 8.98222C18.4718 8.86983 18.6813 8.47821 18.5689 8.10753C18.4749 7.79754 18.2579 7.3334 17.8279 6.96409C17.3746 6.5748 16.7326 6.33421 15.9003 6.43659C15.0758 6.53801 14.5121 6.91215 14.1641 7.39935C13.8342 7.86129 13.7398 8.36538 13.7171 8.69035C13.6902 9.07677 13.9816 9.41193 14.368 9.43888C14.7545 9.46583 15.0896 9.17444 15.1166 8.78795Z",fill:"url(#paint36_radial_4010_27038)"}),a.createElement("path",{id:"Vector_40",d:"M15.1166 8.78795C15.1288 8.61168 15.1795 8.39131 15.3057 8.21466C15.4138 8.06328 15.617 7.88482 16.0716 7.82891C16.5184 7.77395 16.7649 7.90026 16.914 8.02828C17.0863 8.17633 17.1856 8.37994 17.2264 8.51443C17.3388 8.88518 17.7304 9.0946 18.1011 8.98222C18.4718 8.86983 18.6813 8.47821 18.5689 8.10753C18.4749 7.79754 18.2579 7.3334 17.8279 6.96409C17.3746 6.5748 16.7326 6.33421 15.9003 6.43659C15.0758 6.53801 14.5121 6.91215 14.1641 7.39935C13.8342 7.86129 13.7398 8.36538 13.7171 8.69035C13.6902 9.07677 13.9816 9.41193 14.368 9.43888C14.7545 9.46583 15.0896 9.17444 15.1166 8.78795Z",fill:"url(#paint37_radial_4010_27038)"}),a.createElement("path",{id:"Vector_41",d:"M15.1166 8.78795C15.1288 8.61168 15.1795 8.39131 15.3057 8.21466C15.4138 8.06328 15.617 7.88482 16.0716 7.82891C16.5184 7.77395 16.7649 7.90026 16.914 8.02828C17.0863 8.17633 17.1856 8.37994 17.2264 8.51443C17.3388 8.88518 17.7304 9.0946 18.1011 8.98222C18.4718 8.86983 18.6813 8.47821 18.5689 8.10753C18.4749 7.79754 18.2579 7.3334 17.8279 6.96409C17.3746 6.5748 16.7326 6.33421 15.9003 6.43659C15.0758 6.53801 14.5121 6.91215 14.1641 7.39935C13.8342 7.86129 13.7398 8.36538 13.7171 8.69035C13.6902 9.07677 13.9816 9.41193 14.368 9.43888C14.7545 9.46583 15.0896 9.17444 15.1166 8.78795Z",fill:"url(#paint38_radial_4010_27038)"}),a.createElement("path",{id:"Vector_42",d:"M4.75533 15.8388C4.99252 15.4734 5.48102 15.3694 5.84644 15.6066L8.12896 17.0881L7.87773 16.4851C7.7034 16.0666 7.9013 15.5861 8.31974 15.4118C8.74042 15.2365 9.22337 15.4376 9.39542 15.8596L10.0922 17.5687L10.8468 18.8978C10.8607 18.9223 10.8734 18.9472 10.8848 18.9726C11.1414 19.3473 11.315 19.7893 11.3746 20.2737C11.5695 21.8581 10.4709 23.2972 8.92072 23.4879C8.23879 23.5717 7.58308 23.4001 7.04589 23.0466L3.64291 21.1349C3.24381 20.9107 3.10672 20.4024 3.33897 20.0079C3.4401 19.8361 3.59427 19.7149 3.76843 19.6529L3.44127 19.4405C3.05886 19.1923 2.95008 18.6811 3.1983 18.2987C3.30376 18.1362 3.4567 18.0231 3.62707 17.9658L3.52658 17.9006C3.14418 17.6525 3.0354 17.1412 3.28361 16.7588C3.53183 16.3764 4.04305 16.2677 4.42545 16.5159L4.79822 16.7578C4.59397 16.4997 4.56621 16.1301 4.75533 15.8388Z",fill:"url(#paint39_radial_4010_27038)"}),a.createElement("path",{id:"Vector_43",d:"M4.75533 15.8388C4.99252 15.4734 5.48102 15.3694 5.84644 15.6066L8.12896 17.0881L7.87773 16.4851C7.7034 16.0666 7.9013 15.5861 8.31974 15.4118C8.74042 15.2365 9.22337 15.4376 9.39542 15.8596L10.0922 17.5687L10.8468 18.8978C10.8607 18.9223 10.8734 18.9472 10.8848 18.9726C11.1414 19.3473 11.315 19.7893 11.3746 20.2737C11.5695 21.8581 10.4709 23.2972 8.92072 23.4879C8.23879 23.5717 7.58308 23.4001 7.04589 23.0466L3.64291 21.1349C3.24381 20.9107 3.10672 20.4024 3.33897 20.0079C3.4401 19.8361 3.59427 19.7149 3.76843 19.6529L3.44127 19.4405C3.05886 19.1923 2.95008 18.6811 3.1983 18.2987C3.30376 18.1362 3.4567 18.0231 3.62707 17.9658L3.52658 17.9006C3.14418 17.6525 3.0354 17.1412 3.28361 16.7588C3.53183 16.3764 4.04305 16.2677 4.42545 16.5159L4.79822 16.7578C4.59397 16.4997 4.56621 16.1301 4.75533 15.8388Z",fill:"url(#paint40_radial_4010_27038)"}),a.createElement("path",{id:"Vector_44",d:"M4.75533 15.8388C4.99252 15.4734 5.48102 15.3694 5.84644 15.6066L8.12896 17.0881L7.87773 16.4851C7.7034 16.0666 7.9013 15.5861 8.31974 15.4118C8.74042 15.2365 9.22337 15.4376 9.39542 15.8596L10.0922 17.5687L10.8468 18.8978C10.8607 18.9223 10.8734 18.9472 10.8848 18.9726C11.1414 19.3473 11.315 19.7893 11.3746 20.2737C11.5695 21.8581 10.4709 23.2972 8.92072 23.4879C8.23879 23.5717 7.58308 23.4001 7.04589 23.0466L3.64291 21.1349C3.24381 20.9107 3.10672 20.4024 3.33897 20.0079C3.4401 19.8361 3.59427 19.7149 3.76843 19.6529L3.44127 19.4405C3.05886 19.1923 2.95008 18.6811 3.1983 18.2987C3.30376 18.1362 3.4567 18.0231 3.62707 17.9658L3.52658 17.9006C3.14418 17.6525 3.0354 17.1412 3.28361 16.7588C3.53183 16.3764 4.04305 16.2677 4.42545 16.5159L4.79822 16.7578C4.59397 16.4997 4.56621 16.1301 4.75533 15.8388Z",fill:"url(#paint41_radial_4010_27038)"}),a.createElement("path",{id:"Vector_45",d:"M4.75533 15.8388C4.99252 15.4734 5.48102 15.3694 5.84644 15.6066L8.12896 17.0881L7.87773 16.4851C7.7034 16.0666 7.9013 15.5861 8.31974 15.4118C8.74042 15.2365 9.22337 15.4376 9.39542 15.8596L10.0922 17.5687L10.8468 18.8978C10.8607 18.9223 10.8734 18.9472 10.8848 18.9726C11.1414 19.3473 11.315 19.7893 11.3746 20.2737C11.5695 21.8581 10.4709 23.2972 8.92072 23.4879C8.23879 23.5717 7.58308 23.4001 7.04589 23.0466L3.64291 21.1349C3.24381 20.9107 3.10672 20.4024 3.33897 20.0079C3.4401 19.8361 3.59427 19.7149 3.76843 19.6529L3.44127 19.4405C3.05886 19.1923 2.95008 18.6811 3.1983 18.2987C3.30376 18.1362 3.4567 18.0231 3.62707 17.9658L3.52658 17.9006C3.14418 17.6525 3.0354 17.1412 3.28361 16.7588C3.53183 16.3764 4.04305 16.2677 4.42545 16.5159L4.79822 16.7578C4.59397 16.4997 4.56621 16.1301 4.75533 15.8388Z",fill:"url(#paint42_radial_4010_27038)"}),a.createElement("path",{id:"Vector_46",d:"M4.75533 15.8388C4.99252 15.4734 5.48102 15.3694 5.84644 15.6066L8.12896 17.0881L7.87773 16.4851C7.7034 16.0666 7.9013 15.5861 8.31974 15.4118C8.74042 15.2365 9.22337 15.4376 9.39542 15.8596L10.0922 17.5687L10.8468 18.8978C10.8607 18.9223 10.8734 18.9472 10.8848 18.9726C11.1414 19.3473 11.315 19.7893 11.3746 20.2737C11.5695 21.8581 10.4709 23.2972 8.92072 23.4879C8.23879 23.5717 7.58308 23.4001 7.04589 23.0466L3.64291 21.1349C3.24381 20.9107 3.10672 20.4024 3.33897 20.0079C3.4401 19.8361 3.59427 19.7149 3.76843 19.6529L3.44127 19.4405C3.05886 19.1923 2.95008 18.6811 3.1983 18.2987C3.30376 18.1362 3.4567 18.0231 3.62707 17.9658L3.52658 17.9006C3.14418 17.6525 3.0354 17.1412 3.28361 16.7588C3.53183 16.3764 4.04305 16.2677 4.42545 16.5159L4.79822 16.7578C4.59397 16.4997 4.56621 16.1301 4.75533 15.8388Z",fill:"url(#paint43_radial_4010_27038)"}),a.createElement("path",{id:"Vector_47",d:"M4.75533 15.8388C4.99252 15.4734 5.48102 15.3694 5.84644 15.6066L8.12896 17.0881L7.87773 16.4851C7.7034 16.0666 7.9013 15.5861 8.31974 15.4118C8.74042 15.2365 9.22337 15.4376 9.39542 15.8596L10.0922 17.5687L10.8468 18.8978C10.8607 18.9223 10.8734 18.9472 10.8848 18.9726C11.1414 19.3473 11.315 19.7893 11.3746 20.2737C11.5695 21.8581 10.4709 23.2972 8.92072 23.4879C8.23879 23.5717 7.58308 23.4001 7.04589 23.0466L3.64291 21.1349C3.24381 20.9107 3.10672 20.4024 3.33897 20.0079C3.4401 19.8361 3.59427 19.7149 3.76843 19.6529L3.44127 19.4405C3.05886 19.1923 2.95008 18.6811 3.1983 18.2987C3.30376 18.1362 3.4567 18.0231 3.62707 17.9658L3.52658 17.9006C3.14418 17.6525 3.0354 17.1412 3.28361 16.7588C3.53183 16.3764 4.04305 16.2677 4.42545 16.5159L4.79822 16.7578C4.59397 16.4997 4.56621 16.1301 4.75533 15.8388Z",fill:"url(#paint44_radial_4010_27038)"}),a.createElement("path",{id:"Vector_48",d:"M3.7538 19.6497C3.7538 19.6497 3.40268 19.8137 3.28703 20.1166C3.07679 20.6672 3.55498 21.0849 3.55498 21.0849L4.55941 21.6469C5.35319 22.091 6.35528 21.8457 6.85401 21.085L3.7538 19.6497Z",fill:"url(#paint45_radial_4010_27038)"}),a.createElement("path",{id:"Vector_49",d:"M3.7538 19.6497C3.7538 19.6497 3.40268 19.8137 3.28703 20.1166C3.07679 20.6672 3.55498 21.0849 3.55498 21.0849L4.55941 21.6469C5.35319 22.091 6.35528 21.8457 6.85401 21.085L3.7538 19.6497Z",fill:"url(#paint46_radial_4010_27038)"}),a.createElement("path",{id:"Vector_50",d:"M6.33711 19.6863L6.0564 20.7151C6.0564 20.7151 4.25993 19.8899 3.76728 19.6551C3.6322 19.5668 3.6427 19.5849 3.38512 19.3985C3.12755 19.2121 2.93791 18.8012 3.16399 18.3569C3.26112 18.1659 3.46366 18.0155 3.63402 17.9582L6.33711 19.6863Z",fill:"url(#paint47_radial_4010_27038)"}),a.createElement("path",{id:"Vector_51",d:"M6.33711 19.6863L6.0564 20.7151C6.0564 20.7151 4.25993 19.8899 3.76728 19.6551C3.6322 19.5668 3.6427 19.5849 3.38512 19.3985C3.12755 19.2121 2.93791 18.8012 3.16399 18.3569C3.26112 18.1659 3.46366 18.0155 3.63402 17.9582L6.33711 19.6863Z",fill:"url(#paint48_radial_4010_27038)"}),a.createElement("path",{id:"Vector_52",d:"M7.41861 18.6345L6.32457 19.6803L3.54062 17.8992C3.15822 17.651 3.04943 17.1398 3.29765 16.7574C3.54586 16.375 4.05708 16.2662 4.43948 16.5144L4.79245 16.7535C5.33463 17.1943 6.62117 18.0716 7.41861 18.6345Z",fill:"url(#paint49_radial_4010_27038)"}),a.createElement("path",{id:"Vector_53",d:"M7.41861 18.6345L6.32457 19.6803L3.54062 17.8992C3.15822 17.651 3.04943 17.1398 3.29765 16.7574C3.54586 16.375 4.05708 16.2662 4.43948 16.5144L4.79245 16.7535C5.33463 17.1943 6.62117 18.0716 7.41861 18.6345Z",fill:"url(#paint50_radial_4010_27038)"}),a.createElement("path",{id:"Vector_54",d:"M7.41861 18.6345L6.32457 19.6803L3.54062 17.8992C3.15822 17.651 3.04943 17.1398 3.29765 16.7574C3.54586 16.375 4.05708 16.2662 4.43948 16.5144L4.79245 16.7535C5.33463 17.1943 6.62117 18.0716 7.41861 18.6345Z",fill:"url(#paint51_linear_4010_27038)"}),a.createElement("path",{id:"Vector_55",d:"M5.84503 15.6068C5.44549 15.3592 4.96925 15.4805 4.74618 15.8523C4.5263 16.219 4.64757 16.5486 4.80083 16.7677C5.39634 17.2327 7.33044 18.5696 7.33044 18.5696L8.71711 18.5965L8.12516 17.0875C8.12516 17.0875 6.75389 16.17 5.84503 15.6068Z",fill:"url(#paint52_radial_4010_27038)"}),a.createElement("path",{id:"Vector_56",d:"M5.84503 15.6068C5.44549 15.3592 4.96925 15.4805 4.74618 15.8523C4.5263 16.219 4.64757 16.5486 4.80083 16.7677C5.39634 17.2327 7.33044 18.5696 7.33044 18.5696L8.71711 18.5965L8.12516 17.0875C8.12516 17.0875 6.75389 16.17 5.84503 15.6068Z",fill:"url(#paint53_radial_4010_27038)"}),a.createElement("path",{id:"Vector_57",d:"M5.84503 15.6068C5.44549 15.3592 4.96925 15.4805 4.74618 15.8523C4.5263 16.219 4.64757 16.5486 4.80083 16.7677C5.39634 17.2327 7.33044 18.5696 7.33044 18.5696L8.71711 18.5965L8.12516 17.0875C8.12516 17.0875 6.75389 16.17 5.84503 15.6068Z",fill:"url(#paint54_linear_4010_27038)"}),a.createElement("path",{id:"Vector_58",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint55_radial_4010_27038)"}),a.createElement("path",{id:"Vector_59",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint56_radial_4010_27038)"}),a.createElement("path",{id:"Vector_60",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint57_radial_4010_27038)"}),a.createElement("path",{id:"Vector_61",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint58_radial_4010_27038)"}),a.createElement("path",{id:"Vector_62",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint59_radial_4010_27038)"}),a.createElement("path",{id:"Vector_63",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint60_linear_4010_27038)"}),a.createElement("path",{id:"Vector_64",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint61_linear_4010_27038)"}),a.createElement("path",{id:"Vector_65",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint62_linear_4010_27038)"}),a.createElement("path",{id:"Vector_66",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint63_radial_4010_27038)"}),a.createElement("path",{id:"Vector_67",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint64_radial_4010_27038)"}),a.createElement("path",{id:"Vector_68",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint65_radial_4010_27038)"}),a.createElement("path",{id:"Vector_69",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint66_radial_4010_27038)"}),a.createElement("path",{id:"Vector_70",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint67_radial_4010_27038)"}),a.createElement("path",{id:"Vector_71",d:"M21.3456 13.8054C21.027 13.5083 20.5278 13.5259 20.2308 13.8446L18.3754 15.8352L18.473 15.1892C18.5407 14.741 18.2322 14.3227 17.784 14.255C17.3334 14.1869 16.9135 14.499 16.8489 14.9502L16.5871 16.7772L16.1771 18.2496C16.1696 18.2767 16.1634 18.304 16.1584 18.3313C16.0003 18.7571 15.9389 19.2279 15.9985 19.7123C16.1934 21.2968 17.608 22.4267 19.1582 22.236C19.8401 22.1521 20.4347 21.8266 20.8702 21.3535L23.7084 18.674C24.0413 18.3598 24.0511 17.8335 23.7302 17.507C23.5904 17.3649 23.4115 17.2847 23.2275 17.2667L23.4934 16.9814C23.8043 16.6479 23.786 16.1256 23.4525 15.8147C23.3107 15.6826 23.1349 15.61 22.9558 15.5957L23.0374 15.508C23.3483 15.1745 23.33 14.6522 22.9965 14.3414C22.663 14.0305 22.1406 14.0489 21.8298 14.3824L21.5268 14.7075C21.6624 14.4076 21.5997 14.0423 21.3456 13.8054Z",fill:"url(#paint68_radial_4010_27038)"}),a.createElement("path",{id:"Vector_72",d:"M23.2327 17.2628C23.2327 17.2628 23.6485 17.3128 23.8424 17.6448C24.1574 18.1842 23.7548 18.6255 23.7548 18.6255L22.1582 20.1276L21.4366 19.0321L23.2327 17.2628Z",fill:"url(#paint69_radial_4010_27038)"}),a.createElement("path",{id:"Vector_73",d:"M23.2327 17.2628C23.2327 17.2628 23.6485 17.3128 23.8424 17.6448C24.1574 18.1842 23.7548 18.6255 23.7548 18.6255L22.1582 20.1276L21.4366 19.0321L23.2327 17.2628Z",fill:"url(#paint70_radial_4010_27038)"}),a.createElement("path",{id:"Vector_74",d:"M20.9924 17.7691C20.7913 17.9907 20.5829 18.4463 20.7246 18.5784C21.0581 18.8892 21.7719 18.7448 22.0828 18.4113L23.4537 17.0266C23.8336 16.6008 23.7647 16.117 23.4312 15.8062C23.2895 15.674 23.1319 15.612 22.9527 15.5977L20.9924 17.7691Z",fill:"url(#paint71_radial_4010_27038)"}),a.createElement("path",{id:"Vector_75",d:"M20.9924 17.7691C20.7913 17.9907 20.5829 18.4463 20.7246 18.5784C21.0581 18.8892 21.7719 18.7448 22.0828 18.4113L23.4537 17.0266C23.8336 16.6008 23.7647 16.117 23.4312 15.8062C23.2895 15.674 23.1319 15.612 22.9527 15.5977L20.9924 17.7691Z",fill:"url(#paint72_linear_4010_27038)"}),a.createElement("path",{id:"Vector_76",d:"M20.9924 17.7691C20.7913 17.9907 20.5829 18.4463 20.7246 18.5784C21.0581 18.8892 21.7719 18.7448 22.0828 18.4113L23.4537 17.0266C23.8336 16.6008 23.7647 16.117 23.4312 15.8062C23.2895 15.674 23.1319 15.612 22.9527 15.5977L20.9924 17.7691Z",fill:"url(#paint73_radial_4010_27038)"}),a.createElement("path",{id:"Vector_77",d:"M19.7581 16.7134C19.4456 17.0553 19.6183 17.5018 19.8858 17.7511C20.2193 18.0619 20.7416 18.0435 21.0524 17.71L23.0326 15.5124C23.3434 15.179 23.315 14.6464 22.9815 14.3356C22.648 14.0247 22.1257 14.0431 21.8149 14.3766L21.5118 14.7017C21.4773 14.7779 21.4301 14.8499 21.3699 14.9145L19.7581 16.7134Z",fill:"url(#paint74_radial_4010_27038)"}),a.createElement("path",{id:"Vector_78",d:"M19.7581 16.7134C19.4456 17.0553 19.6183 17.5018 19.8858 17.7511C20.2193 18.0619 20.7416 18.0435 21.0524 17.71L23.0326 15.5124C23.3434 15.179 23.315 14.6464 22.9815 14.3356C22.648 14.0247 22.1257 14.0431 21.8149 14.3766L21.5118 14.7017C21.4773 14.7779 21.4301 14.8499 21.3699 14.9145L19.7581 16.7134Z",fill:"url(#paint75_radial_4010_27038)"}),a.createElement("path",{id:"Vector_79",d:"M19.7581 16.7134C19.4456 17.0553 19.6183 17.5018 19.8858 17.7511C20.2193 18.0619 20.7416 18.0435 21.0524 17.71L23.0326 15.5124C23.3434 15.179 23.315 14.6464 22.9815 14.3356C22.648 14.0247 22.1257 14.0431 21.8149 14.3766L21.5118 14.7017C21.4773 14.7779 21.4301 14.8499 21.3699 14.9145L19.7581 16.7134Z",fill:"url(#paint76_linear_4010_27038)"}),a.createElement("path",{id:"Vector_80",d:"M20.2105 13.8448C20.5105 13.523 21.0145 13.5053 21.3363 13.8052C21.6537 14.1011 21.676 14.5965 21.3865 14.9196L20.0282 16.4354C19.4531 17.0773 18.3889 16.6901 18.3608 15.8286L20.2105 13.8448Z",fill:"url(#paint77_radial_4010_27038)"}),a.createElement("path",{id:"Vector_81",d:"M20.2105 13.8448C20.5105 13.523 21.0145 13.5053 21.3363 13.8052C21.6537 14.1011 21.676 14.5965 21.3865 14.9196L20.0282 16.4354C19.4531 17.0773 18.3889 16.6901 18.3608 15.8286L20.2105 13.8448Z",fill:"url(#paint78_linear_4010_27038)"}),a.createElement("path",{id:"Vector_82",d:"M20.2105 13.8448C20.5105 13.523 21.0145 13.5053 21.3363 13.8052C21.6537 14.1011 21.676 14.5965 21.3865 14.9196L20.0282 16.4354C19.4531 17.0773 18.3889 16.6901 18.3608 15.8286L20.2105 13.8448Z",fill:"url(#paint79_radial_4010_27038)"})),a.createElement("defs",null,a.createElement("radialGradient",{id:"paint0_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(18.7707 6.79137) rotate(124.865) scale(27.3189)"},a.createElement("stop",{stopColor:"#FFF478"}),a.createElement("stop",{offset:"0.474827",stopColor:"#FFB02E"}),a.createElement("stop",{offset:"1",stopColor:"#F70A8D"})),a.createElement("radialGradient",{id:"paint1_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(12.4569 10.0415) rotate(94.2973) scale(12.5177 16.0328)"},a.createElement("stop",{offset:"0.787821",stopColor:"#F59639",stopOpacity:"0"}),a.createElement("stop",{offset:"0.972509",stopColor:"#FF7DCE"})),a.createElement("radialGradient",{id:"paint2_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(13.9777 10.9144) rotate(127.987) scale(28.7663)"},a.createElement("stop",{offset:"0.314853",stopOpacity:"0"}),a.createElement("stop",{offset:"1"})),a.createElement("radialGradient",{id:"paint3_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(12.8423 13.1742) rotate(70.6793) scale(19.7425)"},a.createElement("stop",{offset:"0.507903",stopColor:"#7D6133",stopOpacity:"0"}),a.createElement("stop",{offset:"1",stopColor:"#715B32"})),a.createElement("radialGradient",{id:"paint4_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(13.1476 12.7833) rotate(48.7004) scale(9.33819 6.76881)"},a.createElement("stop",{stopColor:"#FFB849"}),a.createElement("stop",{offset:"1",stopColor:"#FFB847",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint5_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(16.0606 13.485) rotate(2.8531) scale(8.18725)"},a.createElement("stop",{stopColor:"#FFA64B"}),a.createElement("stop",{offset:"0.900412",stopColor:"#FFAE46",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint6_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(13.7153 11.6534) rotate(36.9581) scale(41.4202)"},a.createElement("stop",{offset:"0.185425",stopOpacity:"0"}),a.createElement("stop",{offset:"1",stopOpacity:"0.4"})),a.createElement("radialGradient",{id:"paint7_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(17.507 8.67576) rotate(32.8851) scale(1.15207 0.70516)"},a.createElement("stop",{stopColor:"#D27C1D"}),a.createElement("stop",{offset:"1",stopColor:"#CB7620",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint8_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(16.3555 7.57028) rotate(26.6774) scale(1.78515 0.806317)"},a.createElement("stop",{stopColor:"#D28118"}),a.createElement("stop",{offset:"1",stopColor:"#D68623",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint9_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(9.57459 9.19733) rotate(22.6704) scale(1.40243 1.13824)"},a.createElement("stop",{stopColor:"#BE7227"}),a.createElement("stop",{offset:"1",stopColor:"#C67A2A",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint10_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(8.50853 9.51263) rotate(-2.12431) scale(1.85873 1.37324)"},a.createElement("stop",{stopColor:"#D07E2D"}),a.createElement("stop",{offset:"1",stopColor:"#D98833",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint11_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(6.36487 10.6479) rotate(-37.7627) scale(1.12 0.906478)"},a.createElement("stop",{stopColor:"#DA8924"}),a.createElement("stop",{offset:"1",stopColor:"#DC8924",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint12_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(9.68677 9.67553) rotate(16.8555) scale(1.28609 0.811269)"},a.createElement("stop",{stopColor:"#D59A13"}),a.createElement("stop",{offset:"1",stopColor:"#D59A13",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint13_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.84354 11.0154) rotate(-17.4039) scale(4.95962 3.6604)"},a.createElement("stop",{stopColor:"#F1A227"}),a.createElement("stop",{offset:"1",stopColor:"#F5A72C",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint14_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(14.2038 8.61453) rotate(125.497) scale(1.24564)"},a.createElement("stop",{stopColor:"#E8942F"}),a.createElement("stop",{offset:"1",stopColor:"#FAAB4B",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint15_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(15.952 20.4434) rotate(32.9321) scale(4.56118)"},a.createElement("stop",{stopColor:"#F47360"}),a.createElement("stop",{offset:"1",stopColor:"#F47360",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint16_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(10.975 20.4139) rotate(112.432) scale(3.77889)"},a.createElement("stop",{stopColor:"#F47360"}),a.createElement("stop",{offset:"1",stopColor:"#F47360",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint17_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(20.4119 15.3168) rotate(121.791) scale(4.84174)"},a.createElement("stop",{stopColor:"#FF6501"}),a.createElement("stop",{offset:"1",stopColor:"#F9883A",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint18_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(4.73967 17.5445) rotate(41.0721) scale(6.27674)"},a.createElement("stop",{stopColor:"#BC6526"}),a.createElement("stop",{offset:"1",stopColor:"#CF7432",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint19_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(9.85793 19.7794) rotate(-26.4528) scale(1.92139 2.9534)"},a.createElement("stop",{offset:"0.31649",stopColor:"#F16E5C"}),a.createElement("stop",{offset:"1",stopColor:"#BC642E",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint20_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(9.06209 16.9778) rotate(62.7308) scale(2.26321 1.2633)"},a.createElement("stop",{offset:"0.297036",stopColor:"#BC642E"}),a.createElement("stop",{offset:"1",stopColor:"#BC642E",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint21_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(9.60959 17.7863) rotate(59.7887) scale(2.64333 0.916333)"},a.createElement("stop",{offset:"0.297036",stopColor:"#8C4A23"}),a.createElement("stop",{offset:"1",stopColor:"#BC642E",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint22_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.24507 16.665) rotate(34.8932) scale(2.53085 0.543537)"},a.createElement("stop",{offset:"0.297036",stopColor:"#8C4A23"}),a.createElement("stop",{offset:"1",stopColor:"#BC642E",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint23_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(6.34523 17.4869) rotate(23.5798) scale(4.61421 2.48589)"},a.createElement("stop",{offset:"0.297036",stopColor:"#BC5614"}),a.createElement("stop",{offset:"1",stopColor:"#BC642E",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint24_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(17.1366 18.7765) rotate(95.7083) scale(3.10833 2.58342)"},a.createElement("stop",{offset:"0.0677083",stopColor:"#7E281F"}),a.createElement("stop",{offset:"1",stopColor:"#E96C5E",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint25_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(16.9406 18.2419) rotate(101.146) scale(2.61412 1.35116)"},a.createElement("stop",{offset:"0.0677083",stopColor:"#B84D2D"}),a.createElement("stop",{offset:"0.598958",stopColor:"#D5613F"}),a.createElement("stop",{offset:"1",stopColor:"#D4613F",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint26_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(17.1642 16.8827) rotate(85.3876) scale(3.09307 1.78473)"},a.createElement("stop",{offset:"0.0677083",stopColor:"#B85B2C"}),a.createElement("stop",{offset:"1",stopColor:"#B85B2C",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint27_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(17.3423 17.0614) rotate(88.6069) scale(2.9052 1.10841)"},a.createElement("stop",{offset:"0.666667",stopColor:"#BB5029"}),a.createElement("stop",{offset:"1",stopColor:"#D4613F",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint28_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(19.1982 16.3954) rotate(106.305) scale(2.82696 1.63119)"},a.createElement("stop",{offset:"0.0677083",stopColor:"#B85B2C"}),a.createElement("stop",{offset:"1",stopColor:"#B85B2C",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint29_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(18.9254 16.7447) rotate(115.229) scale(3.43981 1.49368)"},a.createElement("stop",{offset:"0.666667",stopColor:"#BB5029"}),a.createElement("stop",{offset:"1",stopColor:"#D4613F",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint30_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(6.30941 12.1691) rotate(15.1561) scale(2.89658 3.00935)"},a.createElement("stop",{stopColor:"#F97660"}),a.createElement("stop",{offset:"1",stopColor:"#F97660",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint31_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(19.6321 11.0045) rotate(166.645) scale(5.63468)"},a.createElement("stop",{stopColor:"#FE9671"}),a.createElement("stop",{offset:"1",stopColor:"#FFD15A",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint32_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(12.4656 10.1106) rotate(82.9873) scale(5.05014 5.5214)"},a.createElement("stop",{offset:"0.517632",stopColor:"#4E2553"}),a.createElement("stop",{offset:"0.702876",stopColor:"#5B4852"}),a.createElement("stop",{offset:"1",stopColor:"#4E2553"})),a.createElement("radialGradient",{id:"paint33_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(8.51889 9.62628) rotate(82.9873) scale(1.95565)"},a.createElement("stop",{offset:"0.188596",stopColor:"#1D1019"}),a.createElement("stop",{offset:"1",stopColor:"#462B3F",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint34_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(8.51889 9.62628) rotate(82.9873) scale(2.53034 2.87184)"},a.createElement("stop",{offset:"0.718644",stopColor:"#462B3F",stopOpacity:"0"}),a.createElement("stop",{offset:"1",stopColor:"#1D1019"})),a.createElement("radialGradient",{id:"paint35_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(8.3602 8.3362) rotate(82.9873) scale(2.32341 4.88064)"},a.createElement("stop",{offset:"0.429103",stopColor:"#462B3F",stopOpacity:"0"}),a.createElement("stop",{offset:"1",stopColor:"#1D1019"})),a.createElement("radialGradient",{id:"paint36_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(16.1767 8.6839) rotate(82.9873) scale(1.95565)"},a.createElement("stop",{offset:"0.188596",stopColor:"#1D1019"}),a.createElement("stop",{offset:"1",stopColor:"#462B3F",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint37_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(16.1767 8.6839) rotate(82.9873) scale(2.53034 2.87184)"},a.createElement("stop",{offset:"0.718644",stopColor:"#462B3F",stopOpacity:"0"}),a.createElement("stop",{offset:"1",stopColor:"#1D1019"})),a.createElement("radialGradient",{id:"paint38_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(16.018 7.39381) rotate(82.9873) scale(2.32341 4.88064)"},a.createElement("stop",{offset:"0.429103",stopColor:"#462B3F",stopOpacity:"0"}),a.createElement("stop",{offset:"1",stopColor:"#1D1019"})),a.createElement("radialGradient",{id:"paint39_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(9.46128 15.331) rotate(110.573) scale(13.2032 13.1636)"},a.createElement("stop",{offset:"0.239583",stopColor:"#FFCC42"}),a.createElement("stop",{offset:"0.562377",stopColor:"#FFB02E"}),a.createElement("stop",{offset:"1",stopColor:"#F70A8D"})),a.createElement("radialGradient",{id:"paint40_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(9.18675 15.8005) rotate(117.333) scale(8.34107 11.2718)"},a.createElement("stop",{offset:"0.65203",stopColor:"#FFB745",stopOpacity:"0"}),a.createElement("stop",{offset:"0.855204",stopColor:"#F69044"}),a.createElement("stop",{offset:"0.930316",stopColor:"#DE6A63"})),a.createElement("radialGradient",{id:"paint41_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(8.01223 16.5183) rotate(63.3885) scale(1.90914 1.00843)"},a.createElement("stop",{stopColor:"#EE982C"}),a.createElement("stop",{offset:"1",stopColor:"#EEA02C",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint42_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(7.71273 15.6497) rotate(40.2779) scale(0.996238)"},a.createElement("stop",{stopColor:"#DA8C2B"}),a.createElement("stop",{offset:"1",stopColor:"#EEA02C",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint43_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(11.2324 19.1177) rotate(82.9873) scale(2.91329 1.31618)"},a.createElement("stop",{stopColor:"#FFDA3C"}),a.createElement("stop",{offset:"1",stopColor:"#FFDA3C",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint44_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(9.96501 17.5399) rotate(68.3061) scale(2.57116 1.03289)"},a.createElement("stop",{stopColor:"#FFD743"}),a.createElement("stop",{offset:"1",stopColor:"#FFD743",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint45_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(4.86142 20.6701) rotate(27.49) scale(1.66699 0.476379)"},a.createElement("stop",{stopColor:"#FFCE43"}),a.createElement("stop",{offset:"1",stopColor:"#FFCE43",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint46_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(4.13732 19.4367) rotate(31.4192) scale(2.50839 0.621242)"},a.createElement("stop",{offset:"0.385833",stopColor:"#83480A"}),a.createElement("stop",{offset:"0.609375",stopColor:"#CD7313"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint47_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(4.77975 18.7021) rotate(-150.935) scale(2.31666 0.470936)"},a.createElement("stop",{stopColor:"#A03B04"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint48_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(4.41702 19.1988) rotate(30.6654) scale(1.58874 0.416865)"},a.createElement("stop",{stopColor:"#FFCE43"}),a.createElement("stop",{offset:"1",stopColor:"#FFCE43",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint49_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(5.89252 17.435) rotate(-147.659) scale(2.65338 0.856419)"},a.createElement("stop",{stopColor:"#A03B04"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint50_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(5.28395 17.8839) rotate(33.8852) scale(2.07336 0.514037)"},a.createElement("stop",{stopColor:"#FFDB3F"}),a.createElement("stop",{offset:"1",stopColor:"#FFDB3F",stopOpacity:"0"})),a.createElement("linearGradient",{id:"paint51_linear_4010_27038",x1:"3.98556",y1:"19.0278",x2:"4.64887",y2:"18.0877",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#CD7313"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint52_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(6.59537 16.6794) rotate(32.4841) scale(2.34341 0.349955)"},a.createElement("stop",{stopColor:"#FFF478",stopOpacity:"0.3"}),a.createElement("stop",{offset:"1",stopColor:"#FFF478",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint53_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(8.21867 15.9472) rotate(139.297) scale(1.45272 2.83466)"},a.createElement("stop",{offset:"0.532661",stopColor:"#83480A"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("linearGradient",{id:"paint54_linear_4010_27038",x1:"4.98855",y1:"17.5405",x2:"5.89364",y2:"16.7322",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{offset:"0.173754",stopColor:"#CD7313"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint55_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(24.6125 12.6903) rotate(130.592) scale(19.5202 19.4617)"},a.createElement("stop",{offset:"0.239583",stopColor:"#FEB63A"}),a.createElement("stop",{offset:"0.537866",stopColor:"#FFB02E"}),a.createElement("stop",{offset:"1",stopColor:"#F70A8D"})),a.createElement("radialGradient",{id:"paint56_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(17.067 21.603) rotate(134.802) scale(8.97851 9.04921)"},a.createElement("stop",{offset:"0.239583",stopColor:"#FFB52F",stopOpacity:"0"}),a.createElement("stop",{offset:"0.526687",stopColor:"#FFD142"}),a.createElement("stop",{offset:"0.584428",stopColor:"#FFD142"}),a.createElement("stop",{offset:"1",stopColor:"#FFBB30",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint57_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(17.3912 16.6992) rotate(61.7113) scale(1.87543 1.83042)"},a.createElement("stop",{stopColor:"#FEB32F"}),a.createElement("stop",{offset:"1",stopColor:"#FEB32F",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint58_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(19.8711 16.9502) rotate(123.084) scale(1.70692 0.680449)"},a.createElement("stop",{stopColor:"#FFBB33"}),a.createElement("stop",{offset:"1",stopColor:"#FFBB33",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint59_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(21.0164 18.0113) rotate(129.022) scale(1.62474 0.583467)"},a.createElement("stop",{stopColor:"#FFBB33"}),a.createElement("stop",{offset:"1",stopColor:"#FFBB33",stopOpacity:"0"})),a.createElement("linearGradient",{id:"paint60_linear_4010_27038",x1:"15.8097",y1:"16.5292",x2:"17.5972",y2:"16.7662",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#D28B23"}),a.createElement("stop",{offset:"1",stopColor:"#D28B23",stopOpacity:"0"})),a.createElement("linearGradient",{id:"paint61_linear_4010_27038",x1:"13.2517",y1:"15.8555",x2:"15.8898",y2:"14.9766",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{offset:"0.328125",stopColor:"#EE891E"}),a.createElement("stop",{offset:"0.864583",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("linearGradient",{id:"paint62_linear_4010_27038",x1:"21.2812",y1:"19.3348",x2:"22.302",y2:"20.3548",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#FFBF45",stopOpacity:"0"}),a.createElement("stop",{offset:"1",stopColor:"#FFAF4A"})),a.createElement("radialGradient",{id:"paint63_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(20.1027 17.0822) rotate(89.2765) scale(5.57904 5.63802)"},a.createElement("stop",{offset:"0.65203",stopColor:"#FFB745",stopOpacity:"0"}),a.createElement("stop",{offset:"0.892907",stopColor:"#F69044"}),a.createElement("stop",{offset:"1",stopColor:"#DE6A63"})),a.createElement("radialGradient",{id:"paint64_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(18.017 15.4543) rotate(97.9033) scale(1.35624 0.556881)"},a.createElement("stop",{stopColor:"#FFD445"}),a.createElement("stop",{offset:"1",stopColor:"#FFD345",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint65_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(21.0367 14.2269) rotate(63.7378) scale(0.818683 0.586279)"},a.createElement("stop",{stopColor:"#FFDA43"}),a.createElement("stop",{offset:"1",stopColor:"#FFDA43",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint66_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(22.6949 14.7516) rotate(64.6785) scale(1.0259 0.734206)"},a.createElement("stop",{stopColor:"#FFDA43"}),a.createElement("stop",{offset:"1",stopColor:"#FFDA43",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint67_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(18.0666 14.7459) rotate(71.4295) scale(1.12743 0.815492)"},a.createElement("stop",{offset:"0.328125",stopColor:"#FFDA43"}),a.createElement("stop",{offset:"0.723958",stopColor:"#FFDA43",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint68_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(18.3835 15.8012) rotate(128.723) scale(0.921488 0.145237)"},a.createElement("stop",{stopColor:"#B9671B"}),a.createElement("stop",{offset:"0.849337",stopColor:"#B9671B",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint69_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(22.3907 17.891) rotate(-39.9041) scale(2.01148 0.789161)"},a.createElement("stop",{stopColor:"#A03B04"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint70_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(23.6111 17.984) rotate(74.2673) scale(0.562565 0.335288)"},a.createElement("stop",{stopColor:"#FFD943"}),a.createElement("stop",{offset:"1",stopColor:"#FFD943",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint71_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(22.0908 16.5712) rotate(-48.186) scale(2.42637 0.581818)"},a.createElement("stop",{stopColor:"#A03B04"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("linearGradient",{id:"paint72_linear_4010_27038",x1:"23.414",y1:"17.6561",x2:"22.7402",y2:"17.1222",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#CD7313"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint73_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(23.4023 16.2423) rotate(63.7296) scale(0.624798 0.488487)"},a.createElement("stop",{stopColor:"#FFDB3F"}),a.createElement("stop",{offset:"1",stopColor:"#FFDB3F",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint74_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(20.5493 15.7763) rotate(-46.745) scale(2.92234 0.62563)"},a.createElement("stop",{stopColor:"#A03B04"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint75_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(22.857 14.7031) rotate(58.9651) scale(0.587659 0.326814)"},a.createElement("stop",{stopColor:"#FFDB3F"}),a.createElement("stop",{offset:"1",stopColor:"#FFDB3F",stopOpacity:"0"})),a.createElement("linearGradient",{id:"paint76_linear_4010_27038",x1:"22.8928",y1:"16.7304",x2:"22.0138",y2:"16.008",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#CD7313"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint77_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(18.8243 14.3596) rotate(44.5005) scale(1.2129 2.56783)"},a.createElement("stop",{offset:"0.545035",stopColor:"#E1A21C"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("linearGradient",{id:"paint78_linear_4010_27038",x1:"20.9985",y1:"16.1708",x2:"20.2367",y2:"15.6983",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#CD7313"}),a.createElement("stop",{offset:"1",stopColor:"#FA9428",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint79_radial_4010_27038",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(21.1065 14.1572) rotate(65.882) scale(0.644581 0.333509)"},a.createElement("stop",{stopColor:"#FFDB3F"}),a.createElement("stop",{offset:"1",stopColor:"#FFDB3F",stopOpacity:"0"})),a.createElement("clipPath",{id:"clip0_4010_27038"},a.createElement("rect",{width:"22.445",height:"22.445",fill:"white",transform:"translate(0 2.74023) rotate(-7.01271)"}))))}function il({type:e}){let{navigateToVisualAssets:t}=(0,rd.wV)(),n=(0,rs.sN)(),{focusSearchBar:r}=(0,rc.rl)(),i=a.useCallback(e=>{n("settingsMenu",e)},[n]),l=a.useCallback(()=>{i(t(e)),r()},[r,t,i,e]);return a.createElement("button",{onClick:l,className:"asset_panel_visual_asset_packs--assetPacks--N99gD"},a.createElement(io,{type:e}))}function io({type:e}){let t=e===rd.G3.IconSets?a.createElement(ir,null):a.createElement(ii,null),n=e===rd.G3.IconSets?(0,w.t)("design_systems.assets_panel.icon_sets"):(0,w.t)("design_systems.assets_panel.illustrations");return a.createElement("div",{className:"asset_panel_visual_asset_packs--assetPacksCard--Rk2WH"},a.createElement("div",{className:"asset_panel_visual_asset_packs--assetPacksCardContent--Wqzwe"},a.createElement("div",{className:"asset_panel_visual_asset_packs--iconBackground--SdVHz"},t),a.createElement("h3",{className:"asset_panel_visual_asset_packs--title--NDdZn ellipsis--ellipsis--Tjyfa"},n)))}var is=n(832556),ic=n(287213);function id(){let e=(0,U.tS)(),{getLibrary:t}=(0,rp.G)(),[n,r]=(0,ic.g)(),i=a.useMemo(()=>t(e??""),[t,e]),l=!i||0===i.numComponents&&0===i.numTemplates,o=0===n.length,s=0===r.length;return a.useMemo(()=>l&&o&&s,[l,o,s])}let iu="asset_panel_libraries--row--nHi0j",im="asset_panel_libraries--libraryPrimaryButton--hs6a7",ip=(0,m.jz)(rr.YJ),i_=(0,m.jz)(rr.RQ),ig=(0,m.jz)(rr.ce),ih=(0,m.jz)(rr.Kv),iE=(0,m.jz)(rr.PK),iy=(0,m.jz)(rr.vr);function ib({width:e,hideScrollbar:t,assetPanelItems:n}){let r=n.localAssets,[i,l]=(0,ic.g)();return id()?a.createElement("div",{style:{width:e}},a.createElement(eR.od,null)):a.createElement(iv,{localAssets:r,subscribedLibraries:i,presetLibraries:l,hideScrollbar:t,width:e})}function iv({localAssets:e,subscribedLibraries:t,presetLibraries:n,width:r,hideScrollbar:i}){let{librariesScrollTop:l,handleScrollLibraries:o}=rL(),s=!!(0,it.GM)()(),{currentView:c}=(0,rd.wV)(),[d]=(0,ru.MA)(),u=s?ru.$H.LIST:d,{cardWidth:m,previewHeight:p,numColumns:_}=(0,is.v)({sidebarWidth:r}),g=u===ru.$H.GRID?_:1,f="grid"===u?ip+p+2:ih,h=t.length>0&&!(0,e5.kc)().dse_hide_local_and_subscribed_libraries,E=e.numComponents+e.numTemplates>0&&!(0,e5.kc)().dse_hide_local_and_subscribed_libraries,y=n.length>0&&(h||E),b=a.useMemo(()=>{let r=[],i=[];E&&i.push(e),h&&i.push(...t);for(let e=0;e<i.length;e+=g){let t=i.slice(e,e+g);r.push({element:a.createElement("div",{className:iu},t.map((t,n)=>a.createElement(ia.w,{key:t.fileKey,library:t,keyboardSection:a8.gP.LOCAL_AND_SUBSCRIBED,rowIndex:e,columnIndex:n,cardWidth:m,previewHeight:p}))),key:t.map(e=>e.fileKey).join("-"),keys:t.map(e=>e.fileKey),height:f})}y&&(r.push({element:a.createElement(r_.cG,null),key:"divider",height:i_}),r.push({element:a.createElement(r_.X3,{title:(0,e5.kc)().dse_preset_libraries?(0,w.t)("design_systems.assets_panel.ui_kits"):(0,w.t)("design_systems.assets_panel.curated_libraries")}),key:"preset_libraries_header",height:ig}));for(let e=0;e<n.length;e+=g){let t=n.slice(e,e+g);r.push({element:a.createElement("div",{className:iu},t.map((t,n)=>a.createElement(ia.w,{key:t.fileKey,library:t,keyboardSection:a8.gP.PRESETS,rowIndex:e,columnIndex:n,cardWidth:m,previewHeight:p}))),key:t.map(e=>e.fileKey).join("-"),keys:t.map(e=>e.fileKey),height:f})}return s&&(r.push({element:a.createElement(r_.cG,null),key:"divider",height:i_}),r.push({element:a.createElement(r_.X3,{title:(0,w.t)("design_systems.assets_panel.assets_from_community")}),key:"visual_assets_header",height:ig}),r.push({element:a.createElement(il,{type:rd.G3.IconSets}),key:"visual_assets_icon_sets",height:iy}),r.push({element:a.createElement(il,{type:rd.G3.Illustrations}),key:"visual_assets_illustrations",height:iy})),r.push(s?{element:a.createElement(iw,null),key:"browse_more_assets_button",height:iE}:{element:a.createElement(iC,null),key:"add_more_libraries_button",height:iE}),r},[g,m,p,E,t,y,n,f,e,h,s]);return a.createElement(rN,{elements:b,hideScrollbar:i,initialScrollTop:l,onScroll:o,anchorScroll:c===rd.S5.Libraries})}function iC(){let{onToggleLibraryModal:e}=(0,ej.u)({entrypoint:eM.r6.ASSETS_PANEL_ADD_MORE_LIBRARIES,modalType:"editor",initialTab:eq.Wv.RECOMMENDED});return a.createElement("div",{className:im},a.createElement(t0.$n,{variant:"secondary",onClick:e,recordingKey:"assetsLibrary.addMoreLibraries"},(0,w.tx)("design_systems.assets_panel.add_more_libraries")))}function iw(){return a.createElement("a",{className:im,href:"/community/visual-assets",target:"_blank"},a.createElement(t0.$n,{variant:"secondary",recordingKey:"assetsLibrary.browseMoreAssets"},(0,w.tx)("design_systems.assets_panel.browse_more_assets")))}function iT({page:e,index:t}){let n=(0,rs.sN)(),[r]=(0,ru.MA)(),{previewAsset:l}=e,{navigateToPage:o,libraryKey:c,currentView:d}=(0,rd.wV)(),m=a.useCallback(()=>{n("pageRow",o(e.id))},[n,o,e.id]),p=e.id,_=d!==rd.S5.Pages,{keyboardNavigationItem:g,setKeyboardNavigationElement:f}=(0,ed.M3)({path:[a8.ON.CONTENTS,a8.lM.PAGES,t],id:e.id,disabled:_}),{focusFirstItem:h,focusSearchBar:E}=(0,rc.rl)();(0,rc.C0)(g,d===rd.S5.Pages&&0===t);let y=(0,rc.MB)({onBoth:m,onKeyDown:h,onClick:E}),b=function(e,t){let n=(0,U.q5)(),r=(0,i.wA)(),l=e===n?.key,o=!!e&&!!t,c=a.useMemo(()=>(0,tz.jN)({file:{key:e??"",editor_type:tv._Y.DESIGN},nodeId:t}),[e,t]),d=a.useCallback(()=>s.q.instance.setCurrentPageAsync(t??""),[t]),m=a.useCallback(()=>{u.az.trackDefinedEvent("assets_panel.go_to_page",{libraryKey:e,pageId:t,fileKey:n?.key,fileTeamId:n?.teamId??void 0,fileOrgId:n?.parentOrgId??void 0,isLocal:l})},[l,e,n?.key,n?.parentOrgId,n?.teamId,t]),p=a.useCallback(()=>{d(),m()},[d,m]),_=a.useCallback(()=>{u.az.trackDefinedEvent("assets_panel.open_page_context_menu",{libraryKey:e,pageId:t,fileKey:n?.key,fileTeamId:n?.teamId??void 0,fileOrgId:n?.parentOrgId??void 0})},[e,n?.key,n?.parentOrgId,n?.teamId,t]);return a.useCallback(n=>{!o||(0,e4.wJ)(e)||(n.preventDefault(),n.stopPropagation(),r((0,r3.j7)({type:r4,data:{libraryPageHref:c,pageId:t,isLocalLibrary:l,onClickLocalPage:p,onClickSubscribedPage:m,position:{top:n.clientY,left:n.clientX}}})),_())},[e,o,r,c,t,l,p,m,_])}(c,e.id),v="list"===r;return a.createElement(ro,{keyPrefix:p,name:e.name,onClick:y,onContextMenu:b,previewAsset:l,recordingKey:`assetsPage.${e.id}`,ref:f,disabled:_,isList:v,variant:v?"icon":"preview"})}var iS=n(395900);let ix="performance.ds_eco.asset_panel_pages_view_loading",ik=new iS.jk(ix,{});function iN({didFinishLoading:e}){let t=ik.stop();(0,u.sx)(ix,{elapsedMs:t,isNewAssetPanelFetch:!0,didFinishLoading:e},{forwardToDatadog:!0})}let iI=(0,m.jz)(rr.RQ),iA=(0,m.jz)(rr._q),iO=(0,m.jz)(rr.HE);function iL({library:e,width:t,hideScrollbar:n,isLoading:r}){!function({isLoading:e}){let{currentView:t}=(0,rd.wV)(),n=(0,e_.ZC)(t);a.useEffect(()=>(n===rd.S5.Libraries&&t===rd.S5.Pages&&ik.start(),t===rd.S5.Pages&&!e&&ik.isRunning&&iN({didFinishLoading:!0}),()=>{n===rd.S5.Pages&&t!==rd.S5.Pages&&ik.isRunning&&iN({didFinishLoading:!1})}),[e,t,n])}({isLoading:r});let[i]=(0,ru.MA)(),{pagesScrollTop:l,handleScrollPages:o}=rL({libraryKey:e?.fileKey}),s=a.useMemo(()=>e?Array.from(e.pages):[],[e]),c=(0,tV.E_)(e?.fileKey??""),d=a.useMemo(()=>{let e=[];return s.forEach(([t,n],r)=>{e.push({element:a.createElement(iT,{page:n,index:r}),height:"list"===i?iO:iA,key:t}),0===r&&(0,tS.dS)(n.name,{isPreset:c})&&e.push({element:a.createElement(r_.cG,null),key:"examples_divider",height:iI})}),e},[i,s,c]);return r?a.createElement("div",{className:"asset_panel_pages--loadingContainer--fyofJ",style:{width:t},"data-testid":"asset-panel-pages-spinner"},a.createElement(eu.kt,null)):0===s.length?a.createElement("div",{style:{width:t}}):a.createElement(rN,{elements:d,hideScrollbar:n,initialScrollTop:l,onScroll:o})}let iD="asset_panel_recents--resultsWrapper--k79Vy",iR="asset_panel_recents--resultsWrapperList--peuzW",iM=(0,tp.fv)();function iP(){let{productComponents:e,templates:t}=(0,nK.g5)(tO.$A.Design),{getLibrary:n}=(0,rp.G)(),r=(0,e5.kc)().dse_editor_templates_v1,[i]=(0,ru.MA)(),l="list"===i,o=a.useCallback(e=>{let t=n(e);return t?.name||""},[n]),s=rV(),{props:c,numColumns:d}=a.useMemo(()=>rH(s,i,aa.rp.NORMAL),[s,i]),{props:u}=a.useMemo(()=>rH(s,i,aa.rp.NORMAL,!0),[s,i]),{componentSectionNameForTracking:m,templateSectionNameForTracking:p}=(0,rs.zf)(),_=e.length>0,g=t.length>0;return a.createElement(r_.xU,null,r&&g&&a.createElement(a.Fragment,null,a.createElement(r_.X3,{title:(0,w.t)("design_systems.assets_panel.templates")}),a.createElement("div",{className:l?iR:iD},t.map((e,t)=>a.createElement(rf.z,{key:`assetPanelRecents:template:${(0,tE.V)(e)}`,asset:e,fileName:o(iM(e)),sectionNameForTracking:p,sectionPosition:t,keyboardPosition:(0,rc.pg)([a8.tM.TEMPLATES],t,1),...u})))),r&&g&&_&&a.createElement("div",{className:"asset_panel_recents--buffer--URYGQ"}),_&&a.createElement(a.Fragment,null,r&&g&&a.createElement(r_.X3,{title:(0,w.t)("design_systems.assets_panel.components")}),a.createElement("div",{className:l?iR:iD},e.map((e,t)=>a.createElement(rf.z,{key:`assetPanelRecents:component:${(0,tE.V)(e)}`,asset:e,fileName:o(iM(e)),sectionNameForTracking:m,sectionPosition:t,keyboardPosition:(0,rc.pg)([a8.tM.COMPONENTS],t,d),...c})))),a.createElement("div",{className:"asset_panel_recents--bottomPadding--9BTkl"}))}var iF=n(860601),iB=n(271245),iU=n(453681),iG=n(27703),iK=n(396462),iV=n(858855),iH=n(527735);let iz=function({isLoading:e,children:t}){return e?a.createElement("div",{className:"maybe_loading--loadingContainer--Wfq03"},a.createElement(eu.kt,null)):a.createElement(a.Fragment,null,t)},iW="asset_panel_search_results--empty--72Hqc",ij=(0,m.jz)(rr.ce),i$=(0,m.jz)(rr.GH),iq=(0,tp.fv)(),iY=({moreResults:e,query:t,assetType:n,showMoreDefault:r})=>{let[i,l]=a.useState(!1),o=r||i,s=a.useCallback(()=>l(!0),[]);a.useEffect(()=>{l(!1)},[t]);let c=(0,iG.ud)(),d=(0,g.md)(iU.qp),u=a.useCallback(e=>((0,e5.kc)().ds_use_lib_keys?d[e.library_key]?.name:c[iq(e)]?.name)??"",[c,d]),[m]=(0,ru.MA)(),p=rV(),_="templates"===n,{props:f,numColumns:h}=a.useMemo(()=>rH(p,m,aa.rp.NORMAL,_),[p,m,_]),{componentSectionNameForTracking:E,templateSectionNameForTracking:y}=(0,rs.zf)({moreSearchResults:!0}),b=a.useMemo(()=>rk(e,h,`${n}:moreResults`,f,_?y:E,[_?a8.tM.TEMPLATES:a8.tM.COMPONENTS,1],{getFileName:u}),[e,h,n,f,_,y,E,u]);return a.useMemo(()=>{if(0===e.length)return[];let t=[];return t.push({element:a.createElement("div",{className:"asset_panel_search_results--showMoreText--mEcU5 asset_panel_search_results--showMore--yo9-j"},o&&(0,w.tx)("design_systems.assets_panel.showing_results_from_all_libraries"),!o&&a.createElement("button",{className:"asset_panel_search_results--showMoreLink--3-Ww3 asset_panel_search_results--showMore--yo9-j blue_link--blueLink--9rlnd",onClick:s},(0,w.tx)("design_systems.assets_panel.more_results_in_all_libraries",{results:e.length}))),key:`${n}:showMoreText`,height:i$}),o&&t.push(...b),t},[n,e.length,o,s,b])},iX=(0,tp.fv)();function iJ({components:e,moreComponents:t,templates:n,moreTemplates:r,query:i,getLibraryNameFromKey:l}){let o=(0,e5.kc)().dse_editor_templates_v1,s=e.length+t.length>0,c=n.length+r.length>0,d=a.useCallback(e=>l(iX(e)),[l]),[u]=(0,ru.MA)(),m=rV(),{props:p,numColumns:_}=a.useMemo(()=>rH(m,u,aa.rp.NORMAL),[m,u]),{componentSectionNameForTracking:g,templateSectionNameForTracking:f}=(0,rs.zf)(),h=a.useMemo(()=>rk(e,_,"components",p,g,[a8.tM.COMPONENTS,0],{getFileName:d}),[e,_,p,g,d]),{props:E,numColumns:y}=a.useMemo(()=>rH(m,u,aa.rp.NORMAL),[m,u]),b=a.useMemo(()=>rk(n,y,"templates",E,f,[a8.tM.TEMPLATES,0],{getFileName:d}),[n,y,E,f,d]),v=iY({moreResults:t,query:i,assetType:"components",showMoreDefault:0===e.length&&t.length>0}),C=iY({moreResults:r,query:i,assetType:"templates"}),T=a.useMemo(()=>{let e=[];return o&&c&&(e.push({element:a.createElement(r_.X3,{title:(0,w.t)("design_systems.assets_panel.templates")}),key:"templatesHeader",height:ij}),e.push(...b),e.push(...C)),s&&(c&&e.push({element:a.createElement(r_.X3,{title:(0,w.t)("design_systems.assets_panel.components")}),key:"componentsHeader",height:ij}),e.push(...h),e.push(...v)),e},[o,c,s,b,C,h,v]);return a.createElement(rN,{elements:T,anchorScroll:!0})}let iZ=(0,tp.fv)();function iQ(){let{query:e,normalizedSearchResults:t,unsubscribedSearchResults:n,isLoading:r}=(0,i.d4)(eB.UQ),l=(0,iV.U)(),{libraryKey:o}=(0,rd.wV)(),{getLibrary:s}=(0,rp.G)(),{isLoading:c,libraryNameByResourceId:d}=function(e){let{hubFileIds:t,fileKeys:n}=a.useMemo(()=>{let t=Array.from(e),{pass:n,fail:a}=(0,iH.j)(t,e4.wJ);return{hubFileIds:n,fileKeys:a}},[e]),r=a.useMemo(()=>n.map(e=>({fileKey:e})),[n]),i=a.useMemo(()=>t.map(e=>({hubFileId:e})),[t]),l=(0,tF.p)(eh.NSA,r,{enabled:r.length>0}),o=(0,tF.p)(eh.a9b,i,{enabled:i.length>0});return{isLoading:a.useMemo(()=>l.some(e=>"loading"===e.result.status)||o.some(e=>"loading"===e.result.status),[l,o]),libraryNameByResourceId:a.useMemo(()=>{let e={};for(let t of l)"loaded"===t.result.status&&t.result.data.file&&(e[t.args.fileKey]=t.result.data.file.name);for(let t of o)"loaded"===t.result.status&&t.result.data.hubFile?.currentHubFileVersion&&(e[t.args.hubFileId]=t.result.data.hubFile.currentHubFileVersion.name);return e},[l,o])}}(a.useMemo(()=>new Set(t.map(e=>iZ(e))),[t])),u=i0(e),m=c&&u,p=a.useCallback(e=>d[e]??s(e)?.name??"",[d,s]),_=a.useMemo(()=>o?s(o)?.name:void 0,[s,o]),[g,f]=a.useMemo(()=>(0,eB._2)(t.filter(e=>p(iZ(e)))),[t,p]),[h,E]=a.useMemo(()=>(0,eB._2)(n),[n]),y=f.length+E.length>0,b=g.length+h.length>0,v=m||r||l;return i1({query:e,isLoading:v,isLoadingBreakdown:{isLibraryNamesLoadingWithTimeout:m,isSearchLoading:r,isSubscribedComponentsLoading:l},additionalLogData:{isLibraryNamesLoading:c,isLibraryNamesLoadingTimerActive:u}}),e?a.createElement(iz,{isLoading:v},y||b?a.createElement(iJ,{components:f,moreComponents:E,templates:g,moreTemplates:h,query:e,getLibraryNameFromKey:p}):a.createElement("div",{className:iW},_?(0,w.tx)("design_systems.assets_panel.no_results_for_query_in_library",{searchQuery:e,libraryName:_}):(0,w.tx)("design_systems.assets_panel.no_results_for_query",{searchQuery:e}))):a.createElement("div",{className:iW},"Search keywords and filter results by specific libraries, templates, and components.")}let i0=e=>{let t=(0,e_.ZC)(e),{isActive:n,start:r}=(0,iK.Z)(iF.lQ);return a.useEffect(()=>{e!==t&&r(1e4)},[e,t,r]),n},i1=({isLoading:e,isLoadingBreakdown:t,additionalLogData:n,query:r})=>{let l=(0,e_.ZC)(e),o=(0,e_.ZC)(r),[s,c]=a.useState(null),d=(0,K.iZ)(),m=(0,ez.DP)().version,p=(0,ew.tM)(),_=(0,e_.ZC)(p),g=(0,eE.je)(),f=(0,i.d4)(e=>e.fileVersion),h=(0,i.d4)(e=>e.loadingState),E=(0,U.q5)(),y=E?.key,b=(0,aV.oh)(iB.fi),v=a.useCallback(a=>{if(!s)return;let r=Date.now()-s;if(r<5e3)return;let i=g.data?.map(e=>{if(!f)return null;let t=tI.Mb(e.fileKey,f);return{libraryKey:e.libraryKey,isLoading:!aV.D2(h,t)}}),l=E&&null!=f&&(0,aH.yD)(E.key)||null,o=!(null!=l&&(0,aV.D2)(h,l));u.az.trackDefinedEvent("assets_panel.search_long_loading",{...t,...n,fileKey:y,userId:d?.id,uiThemeVersion:m,queryId:p??_??void 0,loadingTimeMS:r,isLoading:e,queryCancelled:a,isLoadingSubscribedComponentsAndStateGroups:o,isLoadingRecentlyUsedItems:b,subscribedLibariesLoading:JSON.stringify(i)})},[g,f,h,E,s,e,t,b,y,n,d?.id,m,p,_]),C=(0,eo.A)(v,100,{leading:!0,trailing:!1}),w=a.useRef(v);a.useEffect(()=>{w.current=v},[v]);let{start:T,cancel:S}=(0,iK.Z)(()=>C(!1)),x=a.useCallback(()=>{v(!0),c(Date.now()),T(5e3)},[v,T]);a.useEffect(()=>{e&&!l?x():!e&&l&&(S(),v(!1),c(null))},[e,l,x,v,S]),a.useEffect(()=>{r!==o&&x()},[r,o,x]),a.useEffect(()=>()=>{w.current(!0)},[])};var i2=n(642465);let i5=(e,t)=>e===rd.S5.Libraries?0:e===rd.S5.Pages||e===rd.S5.VisualAssets||t?1:2;function i3({assetPanelItems:e,width:t}){let{libraryKey:n,pageId:r,currentView:i}=(0,rd.wV)(),{previousLibraryKey:l}=(0,rd.RR)(),o=i4(),{getPage:s,getLibrary:c}=(0,rp.G)(),d=(0,iV.q)()(n);az(a.useCallback(()=>{let t=0,n=0,a=0;for(let[r,i]of e.allLibrariesUnsorted){if(r===e.localAssets.fileKey){i.numComponents>=0&&(t+=1);continue}t+=1,n+=i.numComponents,a+=Math.min(i.numComponents,20)}return{numLibraries:t,numComponents:n,numComponentsWithLimit:a}},[e])),i6(),eb();let m=a.useMemo(()=>c(n??l),[c,n,l]),p=a.useMemo(()=>s(n,r),[s,n,r]),_=i5(i,o),[f,h]=(0,ic.g)();return!function(e,t,n){let r=(0,U.q5)(),[i,l]=(0,g.fp)(a3.GT),o=t.length+n.length;e.numComponents+e.numTemplates>0&&(o+=1),a.useEffect(()=>{if(!i){l(!0);let e=a3._o.stop();e&&(0,u.sx)(a3.YS,{elapsedMs:e,fileKey:r?.key,teamId:r?.teamId,orgId:r?.parentOrgId,isUi3RedesignedAssetPanel:!0,numLibraries:o,numComponents:0,numComponentsShown:0,numSectionsShown:o},{forwardToDatadog:!0})}},[i,l,o,r])}(e.localAssets,f,h),a.createElement(a.Fragment,null,a.createElement(ie,null),i===rd.S5.Search?a.createElement(iQ,null):i===rd.S5.Recents?a.createElement(iP,null):i===rd.S5.VisualAssets?a.createElement(i2.G,{width:t}):a.createElement(rz,{index:_,width:t},a.createElement(ib,{width:t,hideScrollbar:0!==_,assetPanelItems:e}),!o&&a.createElement(iL,{library:m,width:t,isLoading:d,hideScrollbar:1!==_}),a.createElement(rX,{page:p,width:t})))}let i4=()=>{let{getLibrary:e}=(0,rp.G)(),{libraryKey:t}=(0,rd.wV)(),n=(0,iV.q)()(t),a=e(t);return!!a&&!n&&!!(0,rd.Cg)(a)},i6=()=>{let{libraryKey:e}=(0,rd.wV)(),t=(0,a6.R)(),n=(0,a4.$)(e);a.useEffect(()=>{e&&(0,e4.wJ)(e)&&n&&t({updateSource:"ui3_library_expand"})},[n,e,t])};var i8=n(755020),i7=n(900956),i9=n.n(i7),le=n(259927);let lt="asset_panel_collapsible_breadcrumb--buttonStub--4S8VP asset_panel_collapsible_breadcrumb--_buttonStubBase--aj18P",ln="asset_panel_collapsible_breadcrumb--libraryStubStatic--VAyz1 asset_panel_collapsible_breadcrumb--_buttonStubBase--aj18P asset_panel_collapsible_breadcrumb--_libraryStubBase--y4862";function la({stubs:e}){let{collapsibleStubs:t,lastStub:n,numHiddenStubs:r,breadcrumbRef:i,ellipsisRef:l,stubRefs:o}=lr(e),s=a.useCallback(()=>l.current?{top:l.current.getBoundingClientRect().bottom,left:l.current.getBoundingClientRect().left}:{top:0,left:0},[l]),c=r===t.length;return a.createElement("div",{className:tm.cx.flex.itemsCenter.overflowHidden.flexShrink1.flexGrow1.$,style:r5.sx.add({flexBasis:"content"}).$,ref:i,role:"navigation"},a.createElement(lo,{shouldEllipsize:c}),r>0&&a.createElement(ll,{allStubs:t,numHiddenStubs:r,getDropdownTarget:s,ref:l}),t.map((e,t)=>t<r?null:a.createElement(ls,{key:t,i:t,name:e,ref:e=>o.current[t]=e})),e.length>0?a.createElement(lc,{name:n,firstSlash:0===t.length,shouldEllipsize:c}):null)}let lr=e=>{let[t,n]=a.useMemo(()=>0===e.length?[[],void 0]:[e.slice(0,-1),e[e.length-1]],[e]),[r,i]=a.useState([]),l=a.useRef([]);a.useEffect(function(){l.current.length>t.length&&(l.current=l.current.slice(0,t.length)),r.length>t.length&&i(e=>e.slice(0,t.length))},[t,r.length,e.length]);let o=a.useRef(null),s=a.useRef(null),{width:c}=rh();return a.useLayoutEffect(function(){let e=o.current;if(!e)return;let t=e.children,n=e.offsetWidth-i9()(Array.from(t).map(e=>e.scrollWidth));if(n<0){let e=l.current[r.length];e&&i(t=>[...t,e.scrollWidth])}else if(0===n)return;else if(r.length>0){let e=r.length-1;n>r[e]-(s.current&&1===r.length?s.current.scrollWidth:0)&&i(e=>e.slice(0,-1))}},[r,l,e,c]),{collapsibleStubs:t,lastStub:n,numHiddenStubs:r.length,breadcrumbRef:o,ellipsisRef:s,stubRefs:l}},li="asset-panel-ellipsis-menu",ll=a.forwardRef(({numHiddenStubs:e,allStubs:t,getDropdownTarget:n},l)=>{let o=(0,rs.sN)(),s=(0,F.Um)(),c=s?.type===li,u=(0,i.wA)(),m=a.useCallback(()=>u((0,r3.oB)()),[u]),p=a.useCallback(()=>u((0,r3.j7)({type:li,data:{position:n()}})),[u,n]),{isCurrentlySkippingPage:_,isCurrentlySkippingFirstFolder:g,navigateBackToPathIndex:f}=(0,rd.wV)(),h=a.useMemo(()=>t.slice(0,e),[t,e]),E=a.useMemo(()=>h.join(" / "),[h]),y=a.useMemo(()=>{if(c)return s.data?.position},[s?.data?.position,c]),b=a.useCallback(e=>{o("breadcrumb",f(lu(e,_,g)))},[g,_,o,f]),{focusBackButton:v,focusSearchBar:C}=(0,rc.rl)(),w=(0,rc.NR)({onBoth:e=>()=>{b(e)},onKeyDown:()=>()=>{setTimeout(()=>v(),0)},onClick:()=>C}),{setKeyboardNavigationElement:T}=(0,ed.M3)({path:[a8.ON.BREADCRUMB],column:a8.Yv.ELLIPSIS}),S=d()(lt,{"asset_panel_collapsible_breadcrumb--dropdownOpen--YMRPh":c});return a.createElement("div",null,a.createElement("div",{ref:l,className:tm.cx.flex.itemsCenter.$},a.createElement(ld,null),a.createElement("button",{ref:T,className:S,onClick:p,"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":E,"aria-label":E,"aria-haspopup":"listbox","aria-expanded":c},"\u2026")),c&&r.createPortal(a.createElement(r2.X3,{className:le.Dm,positionAbsolute:!0,style:y,id:"asset-panel-ellipsis-menu",hideDropdown:m,autofocusPrevElementOnEsc:!0},h.map((e,t)=>a.createElement(r2.c$,{key:e,onClick:w(t)},e))),document.body))});function lo({shouldEllipsize:e}){let t=(0,U.tS)(),[,,n]=(0,ic.g)(),{currentView:r,libraryKey:i,navigateToLibrary:l,isCurrentlySkippingPage:o,isCurrentlySkippingFirstFolder:s,folderPath:c}=(0,rd.wV)(),{setLastNavAction:u}=(0,rA.ZX)(),{focusBackButton:m,focusSearchBar:p}=(0,rc.rl)(),_=a.useMemo(()=>i?i===t?(0,w.t)("design_systems.assets_panel.local_assets"):n.get(i)?.name:void 0,[n,i,t]),g=(0,rs.sN)(),f=r===rd.S5.Libraries,h=r===rd.S5.Pages,E=r===rd.S5.Recents,y=a.useMemo(()=>!!h||!!o&&(!c||!!s&&1===c.length),[c,s,o,h]),b=a.useCallback(e=>{let t=l(e);u(rA.r6.Back),g("breadcrumb",t)},[g,l,u]),v=(0,rc.MB)({onBoth:()=>b(i??""),onKeyDown:m,onClick:p}),{setKeyboardNavigationElement:C}=(0,ed.M3)({path:[a8.ON.BREADCRUMB],column:a8.Yv.LIBRARY}),T=d()(h?ln:"asset_panel_collapsible_breadcrumb--libraryStub--PU1iu asset_panel_collapsible_breadcrumb--buttonStub--4S8VP asset_panel_collapsible_breadcrumb--_buttonStubBase--aj18P asset_panel_collapsible_breadcrumb--_libraryStubBase--y4862",{"asset_panel_collapsible_breadcrumb--ellipsized--vFJ6x ellipsis--ellipsis--Tjyfa":e});return f?a.createElement("div",{className:"asset_panel_collapsible_breadcrumb--allLibraries--6vL0- asset_panel_collapsible_breadcrumb--libraryStubStatic--VAyz1 asset_panel_collapsible_breadcrumb--_buttonStubBase--aj18P asset_panel_collapsible_breadcrumb--_libraryStubBase--y4862",style:{marginLeft:3}},(0,e5.kc)().dse_hide_local_and_subscribed_libraries?(0,w.tx)("design_systems.assets_panel.ui_kits"):(0,w.tx)("design_systems.assets_panel.dropdown_type_all_libraries")):E?a.createElement("div",{className:ln,style:{marginLeft:3}},(0,w.tx)("design_systems.assets_panel.dropdown_type_recents")):a.createElement("div",{className:tm.cx.flex.overflowHidden.$},a.createElement("button",{onClick:v,className:T,disabled:y,ref:C,type:"button"},_))}let ls=a.forwardRef(({name:e,i:t},n)=>{let{isCurrentlySkippingPage:r,isCurrentlySkippingFirstFolder:i,navigateBackToPathIndex:l}=(0,rd.wV)(),o=(0,rs.sN)(),s=a.useCallback(e=>{o("breadcrumb",l(e))},[o,l]),c=a.useMemo(()=>lu(t,r,i),[t,i,r]),{setKeyboardNavigationElement:d}=(0,ed.M3)({path:[a8.ON.BREADCRUMB],column:a8.Yv.STUBS+t}),{focusBackButton:u,focusSearchBar:m}=(0,rc.rl)(),p=(0,rc.MB)({onBoth:()=>s(c),onKeyDown:u,onClick:m});return e?a.createElement("div",{ref:n,className:tm.cx.flex.itemsCenter.$},a.createElement(ld,null),a.createElement("button",{ref:d,onClick:p,className:lt},e)):null});function lc({name:e,shouldEllipsize:t}){let n=a.useRef(null),{pageId:r,folderPath:i}=(0,rd.wV)(),{width:l}=rh(),[o,s]=a.useState(!1);return(a.useEffect(()=>{s(!!(0,t5._C)({text:e??"",textRef:n}))},[e,l]),a.useEffect(()=>{setTimeout(()=>s(!!(0,t5._C)({text:"",textRef:n})),0)},[r,i]),e)?a.createElement("div",{className:tm.cx.noWrap.flex.itemsCenter.if(t,tm.cx.overflowHidden).$},a.createElement(ld,null),a.createElement("div",{"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":o?e:void 0,ref:n,className:tm.cx.mx4.px2.if(t,tm.cx.overflowHidden.pre.ellipsis).$,"aria-current":"location"},e)):null}function ld(){return a.createElement("div",{className:"asset_panel_collapsible_breadcrumb--breadcrumbSlash--XWfHn","aria-hidden":!0}," / ")}let lu=(e,t,n)=>{let a=e;return t&&a++,n&&a++,a-1};var lm=n(782683),lp=n(882316),l_=n(132572);let lg="asset_panel_search--libraryChipRemove--kJiJn";function lf({libraryName:e}){let t=(0,i.wA)(),{currentView:n,startSearch:r,onBack:o,libraryKey:s}=(0,rd.wV)(),c=n===rd.S5.Search,{inputRef:d,focusSearchBar:u}=(0,rc.rl)(),m=(0,i.d4)(e=>e.leftPanel.shouldFocusSearchBar),{query:p}=(0,i.d4)(eB.UQ),_=(0,U.tS)(),g=a.useCallback(()=>{c&&o()},[c,o]),f=a.useMemo(()=>s?s===_?{type:eG.I.LOCAL}:{type:eG.I.FILE,fileKey:s}:{type:eG.I.ALL},[s,_]),h=a.useCallback(e=>{t(em.ku({query:e,searchOptions:f,entryPoint:"asset_panel"})),""===e?g():c||r()},[t,c,g,f,r]),E=a.useRef(void 0);a.useEffect(()=>{c&&(p&&E.current!==s&&t(em.gP({searchOptions:f})),E.current=s)},[t,c,s,p,f]);let y=a.useCallback(()=>{""===p&&g()},[g,p]),b=a.useCallback(()=>{h(""),u(),g()},[h,u,g]),v=(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType);a.useEffect(()=>{let e=e=>{let t=eF.Ay.chromeos?e.altKey&&e.shiftKey&&e.keyCode===eP.Uz.KEY_2:e.altKey&&e.keyCode===eP.Uz.KEY_2,n=!(0,l_.AL)()&&e.shiftKey&&e.keyCode===eP.Uz.I&&!(0,rs.Qk)(e.target);(t||n)&&v!==l.m1T.TEXT&&(u(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[v,u]);let C=a.useMemo(()=>e?(0,w.t)("design_systems.assets_panel.search_library"):(0,w.t)("design_systems.assets_panel.search_all_libraries"),[e]);return a.createElement("div",{className:"asset_panel_search--container--u0qoH asset_panel_search--horizontalFlex---CG1k"},a.createElement(lm.h,null),a.createElement(eU.E1,{path:[a8.ON.HEADER,a8.my.SEARCH_AND_FILTER],column:a8.Wy.SEARCH,isNewAssetsPanel:!0,query:p,onChange:h,onFocus:iF.lQ,onBlur:y,onClearSearch:b,forwardedRef:d,isVisible:!0,entryPointForTracking:"editor:assets_panel",autofocus:m,recordingKey:"componentsLibrarySearch",placeholder:C,selectOnFocus:!0}))}function lh({library:e}){let{navigateToTop:t}=(0,rd.wV)(),{focusSearchBar:n}=(0,rc.rl)(),r=(0,rs.sN)(),i=a.useCallback(()=>{r("searchFilterChip",t()),n()},[n,r,t]),{setKeyboardNavigationElement:l}=(0,ed.M3)({path:[a8.ON.HEADER,a8.my.LIBRARY_SEARCH_CHIP]});return e?a.createElement("div",{className:"asset_panel_search--libraryChip--1nfYR asset_panel_search--horizontalFlex---CG1k","data-testid":"asset-panel-search-chip"},a.createElement("span",{className:"asset_panel_search--libraryChipText--3TsfE ellipsis--ellipsis--Tjyfa"},e.name),(0,e5.kc)().dse_fpl_wave_1?a.createElement(a7.E,{className:lg,onClick:i,recordingKey:"asset-panel-search-chip","aria-label":(0,w.t)("design_systems.assets_panel.search_chip_label"),ref:l},a.createElement(lp.f,null)):a.createElement(rt.GG,{className:lg,onClick:i,recordingKey:"asset-panel-search-chip","aria-label":(0,w.t)("design_systems.assets_panel.search_chip_label"),forwardedRef:l},a.createElement(lp.f,null))):null}var lE=n(221768),ly=n(18991),lb=n(343427),lv=n(270133),lC=n(255942);let lw="assets-panel-settings";function lT({includeFolderSetting:e=!0}){let t=a.useRef(null),{setKeyboardNavigationElement:n}=(0,ed.M3)({path:[a8.ON.HEADER,a8.my.SEARCH_AND_FILTER],column:a8.Wy.SETTINGS}),r=(0,U.tS)(),l=(0,F.Um)(),o=l?.type===lw,s=(0,i.wA)(),c=a.useCallback(()=>{o?s((0,r3.oB)()):(s((0,r3.j7)({type:lw,data:{position:{top:t.current?.getBoundingClientRect().bottom,left:t.current?.getBoundingClientRect().left}}})),u.az.trackDefinedEvent("assets_panel.asset_type_dropdown_opened",{fileKey:r??void 0,assetsPanelVersion:3}))},[s,r,o]),d=a.useMemo(()=>{if(o)return l.data?.position},[l?.data?.position,o]),m=a.useCallback(e=>{o&&e.stopPropagation()},[o]);return a.createElement(a.Fragment,null,a.createElement("div",{onMouseDown:m},a.createElement(eV.d,{onClick:c,toggled:o,ref:(0,lC.A)(t,n),"aria-label":(0,w.t)("design_systems.assets_panel.settings_label"),htmlAttributes:{"aria-expanded":o,"aria-haspopup":"listbox","data-testid":"asset-panel-settings-button"}},a.createElement(lE.A,null))),o&&a.createElement(lS,{position:d,includeFolderSetting:e,buttonRef:t}))}function lS({position:e,includeFolderSetting:t,buttonRef:n}){let l=(0,i.wA)(),o=a.useCallback(()=>{l((0,r3.oB)())},[l]),s=(0,rs.R2)("number"==typeof e?.top?e.top:void 0),{productComponents:c,templates:m}=(0,nK.g5)(tO.$A.Design),[p]=(0,ru.ye)(),{currentView:_,libraryKey:g}=(0,rd.wV)(),{getLibrary:f}=(0,rp.G)(),h=(0,U.tS)(),[E]=(0,ru.MA)(),y=!!(0,it.GM)()()&&_===rd.S5.Libraries,b=y?ru.$H.LIST:E,v=a.useMemo(()=>_!==rd.S5.Search&&(c.length>0||m.length>0),[_,c.length,m.length]),C=a.useMemo(()=>h?f(h):void 0,[f,h]),T=!!C&&(C.numComponents>0||C.numTemplates>0),[S,x]=(0,ic.g)(),{goToLibrary:k,goToAll:N,goToRecents:I,changeAssetsView:A,toggleShowFolders:O}=function(e){let t=(0,U.q5)(),n=(0,rs.sN)(),{navigateToLibrary:r,navigateToTop:i,navigateToRecents:l}=(0,rd.wV)(),{setLastNavAction:o}=(0,rA.ZX)(),[,s]=(0,ru.MA)(),[,c]=(0,ru.ye)(),{focusSearchBar:d}=(0,rc.rl)(),m=a.useCallback(e=>{n("settingsMenu",e)},[n]),p=a.useCallback(e=>{m(r(e)),d()},[d,r,m]),_=a.useCallback(()=>{m(i()),d()},[d,i,m]),g=a.useCallback(()=>{m(l()),d()},[d,l,m]),f=a.useCallback(()=>e.current?.focus(),[e]),h=a.useCallback(e=>{u.az.trackDefinedEvent("assets_panel.view_mode_changed",{viewMode:e,fileKey:t?.key,fileTeamId:t?.teamId??void 0,fileOrgId:t?.parentOrgId??void 0}),s(e),o(rA.r6.ToggleView)},[t?.key,t?.parentOrgId,t?.teamId,s,o]),E=(0,rc.NR)({onBoth:e=>()=>h(e),onKeyDown:()=>f}),y=a.useCallback(e=>{u.az.trackDefinedEvent("assets_panel.folder_toggle",{showFolders:e,fileKey:t?.key,fileTeamId:t?.teamId??void 0,fileOrgId:t?.parentOrgId??void 0}),c(e)},[t?.key,t?.parentOrgId,t?.teamId,c]);return{goToLibrary:p,goToAll:_,goToRecents:g,changeAssetsView:E,toggleShowFolders:(0,rc.NR)({onBoth:e=>()=>y(e),onKeyDown:()=>f})}}(n),L=a.useMemo(()=>{let e=[];return e.push(lx({text:(0,w.t)("design_systems.assets_panel.dropdown_type_all_libraries"),checked:_===rd.S5.Libraries||_===rd.S5.Search&&!g,onClick:N})),v&&e.push(lx({text:(0,w.t)("design_systems.assets_panel.dropdown_type_recents"),checked:_===rd.S5.Recents&&c.length>0,onClick:I})),T&&e.push(lx({text:C.name,checked:_!==rd.S5.Recents&&g===C.fileKey,onClick:()=>k(C.fileKey)})),(S.length>0||x.length>0)&&e.push(a.createElement(r2.wv,null)),e.push(...S.map(({name:e,fileKey:t})=>lx({text:e,isApproved:(0,e7.vR)(t),checked:_!==rd.S5.Recents&&g===t,onClick:()=>k(t)}))),e.push(...x.map(({name:e,fileKey:t})=>lx({text:e,isApproved:(0,e7.vR)(t),isPreset:!0,checked:_!==rd.S5.Recents&&g===t,onClick:()=>k(t)}))),e.push(a.createElement(r2.wv,null)),y||e.push(lx({text:(0,w.t)("design_systems.assets_panel.view_toggle_grid"),checked:b===ru.$H.GRID,onClick:A(ru.$H.GRID),icon:a.createElement(ly.t,null)})),e.push(lx({text:(0,w.t)("design_systems.assets_panel.view_toggle_list"),checked:b===ru.$H.LIST,onClick:A(ru.$H.LIST),icon:a.createElement(lb.Z,null)})),t&&e.push(lx({text:(0,w.t)("design_systems.assets_panel.view_toggle_show_folders"),checked:p,onClick:O(!p),icon:a.createElement(lv.e,null)})),e},[b,A,g,_,y,N,k,I,T,v,t,C?.fileKey,C?.name,x,c.length,p,S,O]),D=a.useMemo(()=>({...e,maxHeight:s}),[s,e]);return r.createPortal(a.createElement(r2.X3,{className:d()(le.Dm,"asset_panel_settings--dropdown--gs7K3"),positionAbsolute:!0,style:D,id:lw,hideDropdown:o,autofocusPrevElementOnEsc:!0},L),document.body)}function lx({text:e,isApproved:t,isPreset:n,checked:r,onClick:i,icon:l}){return a.createElement(r2.MM,{className:"asset_panel_settings--dropdownOption--kJ-6M",checked:!!r,onClick:i,key:e},a.createElement("div",{className:"asset_panel_settings--optionContentContainer--iAJ6X"},a.createElement("div",{className:"asset_panel_settings--optionContent---2nCX ellipsis--ellipsis--Tjyfa"},l?a.createElement("div",{className:"asset_panel_settings--optionWithLeftIconContainer--QP3Gm"},l,a.createElement("span",null,e)):e),a.createElement("div",{className:"asset_panel_settings--optionRightIcon--zi-2v"},t?a.createElement(e8.FX,null):n?a.createElement("div",{className:tm.cx.ml2.$},a.createElement(te.S,{hubFileId:void 0})):null)))}function lk(){let{getPage:e,getLibrary:t}=(0,rp.G)(),{libraryKey:n,pageId:r}=(0,rd.wV)(),i=a.useMemo(()=>e(n,r),[e,n,r]),l=a.useMemo(()=>t(n),[t,n]);return a.createElement("div",{className:"asset_panel_header--assetPanelHeader--ZWb-Q"},a.createElement(lN,{library:l}),a.createElement(lI,{page:i}))}function lN({library:e}){let{currentView:t}=(0,rd.wV)();return a.createElement("div",{className:tm.cx.grid.gap4.itemsCenter.ml8.$,style:r5.sx.add({gridTemplateColumns:"1fr auto",gridTemplateRows:"32px",gridAutoRows:"auto"}).$},a.createElement("div",{style:r5.sx.add({gridRow:1,gridColumn:1}).$},a.createElement(lf,{libraryName:e?.name})),a.createElement("div",{style:r5.sx.flex.itemsCenter.add({gridRow:1,gridColumn:2}).$},a.createElement(lT,{includeFolderSetting:[rd.S5.Libraries,rd.S5.Pages,rd.S5.Assets].includes(t)})),t===rd.S5.Search&&e&&a.createElement("div",{style:r5.sx.flex.minW0.add({gridRow:2,gridColumn:1}).$},a.createElement(lh,{library:e})))}function lI({page:e}){let{currentView:t,folderPath:n,onBack:r,libraryKey:l,isCurrentlySkippingPage:o,isCurrentlySkippingFirstFolder:s}=(0,rd.wV)(),c=(0,rs.sN)(),d=(0,i.d4)(e=>e.modalShown),u=(0,i.wA)(),{setBackButtonKeyboardItem:m,focusSearchBar:p}=(0,rc.rl)(),_=a.useCallback(()=>{c("backButton",r()),d?.type===tt.V&&u(j.AS())},[r,c,d?.type,u]),g=a.useCallback(()=>{t===rd.S5.Recents?l||p():t===rd.S5.Pages?p():t===rd.S5.Assets&&o&&!n&&p()},[t,p,n,o,l]),f=(0,rc.MB)({onBoth:_,onKeyDown:g,onClick:p}),h=a.useMemo(()=>{if(t===rd.S5.Search||t===rd.S5.Recents)return[];let a=e?.name&&!o?[e.name]:[],r=n??[];return[...a,...s?r.slice(1):r]},[t,n,o,s,e?.name]),E=id(),y=t!==rd.S5.Libraries&&t!==rd.S5.Search;return E?null:a.createElement(a.Fragment,null,t!==rd.S5.Search&&a.createElement("div",{className:"asset_panel_header--breadcrumbWrapper--NC2Ps asset_panel_header--horizontalFlex--k99PA"},y&&a.createElement(t1.K,{"aria-label":(0,w.t)("design_systems.assets_panel.back"),onClick:f,ref:m,recordingKey:"assetsPanelBack"},a.createElement(i8.C,null)),a.createElement(la,{stubs:h})))}var lA=n(514526);let lO=e=>a.useCallback(t=>{t()||e()},[e]);var lL=n(309798),lD=n(243074);function lR({width:e}){let t=(0,lA.j)(),n=function(e){let t=(0,K.iZ)(),n=(0,U.q5)(),r=(0,eT.jO)(),l=(0,lL.f)("has_dismissed_component_sidebar_library_upsell_banner"),o=(0,i.d4)(e=>e.isFreeUser),s=(0,i.d4)(eA.P),c=n?.teamId?s[n.teamId]:null,d=(0,tF.Rs)(eh.GyZ,{teamId:n?.teamId??""},{enabled:!!n?.teamId}),u=n?.canEdit??!1,m=d?.data?.team?.canEdit??!1,p=e.numComponents>0||e.numTemplates>0;return a.useMemo(()=>!l&&o&&(!c||!(0,eS.w5)(c)&&m)&&u&&r&&p&&(0,ep.Hz)(t?.id),[l,o,c,m,u,r,p,t])}(t.localAssets),r="loading"===(0,eE.je)().status,l=(0,td.Xr)(rS),o=a.useCallback(()=>l(!0),[l]);return a.createElement(lM,{assetPanelItems:t,width:e},a.createElement("div",{className:lD.k,"data-testid":"component-sidebar",translate:"no"},a.createElement(lk,null),a.createElement(iz,{isLoading:r},a.createElement(i3,{assetPanelItems:t,width:e})),n&&a.createElement(aZ,null),a.createElement(eL.Mw,{width:e,scrollToPreset:o})))}function lM({children:e,width:t,assetPanelItems:n}){return a.createElement(rA.P3,null,a.createElement(rp.K,{assetPanelItems:n},a.createElement(rc.tM,{className:lD.k},a.createElement(lP,null,a.createElement(rE,{width:t},e)))))}function lP({children:e}){return!function(){let{libraryKey:e,pageId:t,folderPath:n,navigateToTop:r,navigateToPage:i,navigateToPath:l,navigateToLibrary:o,currentView:s,onBack:c}=(0,rd.wV)(),d=(0,iV.q)(),u=d(e),{getLibrary:m,getPage:p,getFolder:_}=(0,rp.G)(),{setLastNavAction:f}=(0,rA.ZX)(),h=lO(r),[,,E]=(0,ic.g)(),[y,b]=(0,g.fp)(eD.Cl);a.useEffect(()=>{y&&E.size>0&&((0,rs.hB)(()=>o(y)),b(null))},[y,o,b,E]),(0,rd.sH)(),a.useEffect(function(){if(s!==rd.S5.Assets&&s!==rd.S5.Pages)return;let a=m(e),o=E.get(e);if(!a){if(d(e)&&o&&s!==rd.S5.Assets)return;h(r);return}if(t){if(!a?.pages.get(t)){let e=(0,rd.Cg)(a);e?h(()=>i(e.id)):h(c);return}if(n&&!_(e,t,n)){let a=n.slice(0,-1),r=_(e,t,a);for(;!r&&a.length>0;)r=_(e,t,a=a.slice(0,-1));if(!r)return h(()=>i(t));let o=parent?(0,rd.xc)(r):void 0;return void(o?h(()=>l([...a,o.name])):(h(()=>l(a)),f(rA.r6.Back)))}}},[c,u,e,s,t,n,r,i,m,_,l,f,h,E,d]),a.useEffect(function(){let a=m(e);if(!a||u)return;let r=(0,rd.Cg)(a);if(s===rd.S5.Pages&&r)i(r.id);else if(s===rd.S5.Assets){let a=_(e,t,n);if(!a)return;let r=(0,rd.xc)(a);r&&l([...n??[],r.name])}},[u,s,n,_,m,p,e,i,l,c,t])}(),a.createElement(a.Fragment,null,e)}function lF(){return a.createElement("div",{className:tm.cx.colorTextSecondary.my8.mx16.$},(0,w.tx)("design_systems.assets_panel.error"))}var lB=n(774414),lU=n(544403),lG=n(975216),lK=n(870232),lV=n(20484),lH=n(234587),lz=n(139055),lW=n(656147),lj=n(349410),l$=n(385111);function lq(e){let t=(0,i.wA)(),n=(0,U.q5)(),r=(0,eC.FC)(),l=(0,ne.p8)("pagesList").length,o=a.useRef(),s=(0,z.ks)(),c=(0,lj.Fr)(),u=l$.h.useTrackingContext({trigger:aJ.b.PAGE_TRACKER_UPSELL});o.current=e.setUpsellHeightCallback;let m=a.useCallback(e=>{o.current&&o.current(e?.getBoundingClientRect().height||0)},[l]);if(l<=0||!n||s)return null;let p=n.team;if(!(p&&(0,ex.canEditTeam)(p.id,r)&&!(0,eS.XX)(p)))return null;let _=(0,eS.Lj)(n);if((_<=1||_>=1/0)&&!c(n))return null;let g=()=>{let e=aJ.b.PAGE_TRACKER_UPSELL;t((0,j.to)({type:aq.V,data:{upsellSource:e,teamId:p.id,openCheckoutInNewTab:!0}}))},f=a.createElement(t3.Us,{onClick:g,trusted:!0,"data-testid":"page_tracker_upsell_link"},(0,w.tx)("fullscreen.pages_panel.see_plans_that_offer_more")),h=a.createElement(t3.Us,{onClick:g,trusted:!0,"data-testid":"page_tracker_upsell_link"},(0,w.tx)("fullscreen.pages_panel.get_unlimited_pages_and_more")),E=l/eS.LF[n.editorType??tv._Y.DESIGN],y=d()({"page_tracker_upsell--progressPartial--guOiP":E<1,"page_tracker_upsell--progressCompleteWarning--06IlO page_tracker_upsell--progressComplete--ilmev":1===E,"page_tracker_upsell--progressCompleteDanger--lCunz page_tracker_upsell--progressComplete--ilmev":E>1}),b=`${Math.trunc(100*Math.min(E,1))}%`,v={fileTeamId:p.id,numPages:l,...u};return a.createElement(eW.fu,{name:"Page Tracker Upsell",properties:v},a.createElement("div",{className:"page_tracker_upsell--upsellContainer--ZEwXz",ref:m,"data-testid":"page_tracker_upsell"},a.createElement("div",{className:"page_tracker_upsell--upsellBody--yUAjd"},a.createElement("div",{className:"page_tracker_upsell--progressBar--fDCBY"},a.createElement("div",{className:y,style:{width:b},"data-testid":"page_tracker_progress_bar"})),a.createElement("p",{className:"page_tracker_upsell--upsellText--Ng-u0"},(()=>{let e=eS.LF[n.editorType??tv._Y.DESIGN]-l;return e>=2?a.createElement(a.Fragment,null,(0,w.tx)("fullscreen.pages_panel.n_free_pages_left",{numPagesRemaining:e}),a.createElement("br",null),f):1===e?a.createElement(a.Fragment,null,(0,w.tx)("fullscreen.pages_panel.n_free_pages_left",{numPagesRemaining:e}),a.createElement("br",null),h):0===e?a.createElement(a.Fragment,null,(0,w.tx)("fullscreen.pages_panel.all_n_free_pages_used",{maxFreePages:eS.LF[n.editorType??tv._Y.DESIGN]}),a.createElement("br",null),h):a.createElement(a.Fragment,null,(0,w.tx)("fullscreen.pages_panel.all_free_pages_used"),a.createElement("br",null),h)})()))))}var lY=n(875331),lX=n(653671),lJ=n(359108),lZ=n(735056),lQ=n(137345);function l0(e){let t=(0,i.wA)(),n=(0,i.d4)(e=>e.selectedView);return a.createElement(lZ.y,{withBorder:!0},a.createElement(lQ.Y,{onFocus:()=>{(0,x._$)(t,n,"overview_search_clicked"),L.Y5.triggerAction("canvas-search",{source:"toolbar"})}}),!e.isOverview&&a.createElement(a7.E,{className:"ui2_dev_handoff_header_row--toggleButton--LW2BM",onClick:e.togglePagesExpanded,htmlAttributes:{onContextMenu:e.onPageContextMenu}},a.createElement("span",{className:"ui2_dev_handoff_header_row--pageTitle--lcNMS ellipsis--ellipsis--Tjyfa"},e.currentPageName||""),a.createElement(t6.B,{className:"ui2_dev_handoff_header_row--chevron--wHgKd",svg:e.pageTabChevron})))}function l1({children:e,hasScrollLine:t,onClick:n}){return a.createElement("div",{className:d()("header_container--container--aPIhG",{"header_container--withShadow---XYxm":t}),onClick:n},e)}function l2({children:e}){return a.createElement("div",{className:"header_text--headerText--ZXIeN",onContextMenu:N.jo},e)}var l5=n(650166);function l3({isReadOnly:e,hasScrollLine:t,onTogglePages:n,recordingKey:r}){return a.createElement(l1,{onClick:e?n:void 0,hasScrollLine:t},a.createElement(l2,null,(0,w.tx)("fullscreen.pages_panel.pages")),!e&&a.createElement("div",{className:tm.cx.flex.mx8.itemsCenter.$},a.createElement(l5.e,{recordingKey:f.Pt(r,"newPage")})))}var l4=n(332721),l6=n(601538),l8=n(16633),l7=n(455263),l9=n(893606);function oe(){let{hasAnyUiKit:e}=(0,e4.I7)(),t=(0,lL.f)("ui_kits_assets_title_blue_dot_dismissed"),n=(0,eT.jO)(),r=(0,l7.t)(),o=U.q5()?.canEdit,s=(0,i.d4)(e=>e.leftPanel.activeTab===l.xae.ASSETS),c=(0,i.wA)(),d=(0,l9.R)();return(a.useEffect(()=>{e&&!t&&s&&c(aY.b({ui_kits_assets_title_blue_dot_dismissed:!0}))},[s,t,c,e]),n&&!r&&o&&e&&!t)?d?a.createElement(l8.C,{"data-testid":"assets-panel-blue-dot",className:"assets_panel_blue_dot--blueDotUi3--VR9bW"}):a.createElement("span",{"data-testid":"assets-panel-blue-dot",className:"assets_panel_blue_dot--blueDot--s7hOi"}):null}var ot=n(376600);function on({showTabs:e,activeTab:t,isComparingChanges:n,pageTabChevron:r,currentPageName:i,onCanvasSearch:o,onPageContextMenu:s,onTogglePages:c,recordingKey:u}){let m=(0,lJ.U)(),p=(0,f.rf)(f.Pt(u,"collapsedRow"),"contextmenu",e=>{s(e)});return a.createElement(lZ.y,{withBorder:!0},e&&a.createElement(a.Fragment,null,a.createElement(l4._,{onClick:o}),a.createElement(rt.Bx,{className:t===l.xae.LAYERS?ot.yR:ot.Mf,onMouseDown:m.showLayersPanel,onContextMenu:N.jo,"data-label":(0,w.t)("fullscreen.pages_panel.layers_tab"),recordingKey:f.Pt(u,"tab","layers"),innerText:"Layers"},(0,w.tx)("fullscreen.pages_panel.layers_tab")),a.createElement(rt.Bx,{className:ot.dB,onMouseDown:m.showPublish,onContextMenu:N.jo,recordingKey:f.Pt(u,"tab","assets"),innerText:"Assets","data-onboarding-key":l6.Qr},a.createElement("div",{className:t===l.xae.ASSETS?ot.yR:ot.Mf,"data-label":(0,w.t)("fullscreen.pages_panel.assets_tab")},a.createElement("div",null,(0,w.tx)("fullscreen.pages_panel.assets_tab"),a.createElement(oe,null))))),!e&&a.createElement("div",{className:d()("ui2_tabs_row--viewOnlySearchRow--lXeEC",{"ui2_tabs_row--hidden--H29bc":n})},a.createElement(lQ.Y,{onFocus:o})),a.createElement(a7.E,{className:d()("ui2_tabs_row--toggleButton--3lJw1",{"ui2_tabs_row--viewOnly--crQc4":!e}),onClick:c,htmlAttributes:{onContextMenu:p},recordingKey:f.Pt(u,"collapsedRow")},a.createElement("span",{className:"ui2_tabs_row--pageTitle--PPrKt ellipsis--ellipsis--Tjyfa","data-onboarding-key":"pages-panel-toggle"},i||""),a.createElement(t6.B,{className:"ui2_tabs_row--chevron--GSVx7",svg:r})))}var oa=n(964881),or=n(989954),oi=n(652649);let ol="ui3_header_row--toggleButton--hYOqV",oo="ui3_header_row--isHidden--IIOWY";function os({isReadOnly:e,isPagesOpen:t,isComparingChanges:n,hasMultiplePageTypes:r,hasScrollLine:i,currentPageName:l,onTogglePages:o,onCanvasSearch:s,onPageContextMenu:c,recordingKey:u}){let m=(0,z.ks)(),p=(0,oa.l7)(),_=m||p,g=r||(0,e5.kc)().interop_pages;return a.createElement(l1,{onClick:e?o:void 0,hasScrollLine:i},e||_?a.createElement(l2,null,a.createElement(a7.E,{onClick:o,className:d()(ol),htmlAttributes:{onContextMenu:c},recordingKey:f.Pt(u,"collapsedRow")},a.createElement("span",{className:d()("ui3_header_row--pageExpandToggle--jZKwE",{[oo]:p})},a.createElement(oi.g,{isExpanded:t})),a.createElement("span",{className:"ui3_header_row--pageTitle--N3-To ellipsis--ellipsis--Tjyfa","data-onboarding-key":"pages-panel-toggle"},t?(0,w.tx)("fullscreen.pages_panel.pages"):l||"")),a.createElement("div",{className:d()("ui3_header_row--searchButtonContainer--U--jv",{[oo]:n})},a.createElement(l4._,{onClick:s}))):a.createElement(l2,null,a.createElement(a7.E,{onClick:o,className:ol,recordingKey:f.Pt(u,"collapsedRow")},a.createElement(oi.g,{isExpanded:t}),(0,w.tx)("fullscreen.pages_panel.pages"))),!e&&a.createElement("div",{className:tm.cx.flex.relative.mr8.justifyEnd.itemsCenter.$},g?a.createElement(or.t,{recordingKey:u}):a.createElement(l5.e,{recordingKey:f.Pt(u,"newPage")})))}var oc=n(693394),od=n(895083),ou=n(350428);function om({isReadOnly:e,renamingGuid:t,isLayersOpen:n,onToggleLayers:r,currentPageGuid:i,width:l,shouldShowGuids:o,startRenamingNode:s,stopRenamingNode:c,faviconGuid:d,socialImageGuids:u,versionHistory:m,recordingKey:p}){let _=(0,B._Z)().isLoading,g=(0,U.q5)(),h=g?.thumbnailGuid||null,E=(0,H.Fk)(e=>{let t=e.getCurrentPage();return t&&(0,ou.HI)(t)})&&(0,e5.kc)().aip_lpe_overflow;return a.createElement(a.Fragment,null,a.createElement(l1,null,a.createElement(l2,null,a.createElement(a7.E,{onClick:r,className:"ui3_objects_panel--toggleButton--A3BEZ",recordingKey:f.Pt(p,"layersCollapsedRow")},a.createElement(oi.g,{isExpanded:n}),(0,w.tx)("fullscreen.pages_panel.layers_tab")),E&&a.createElement(op,null))),n&&a.createElement(lB.X,{hasPending:_,isReadOnly:e,currentPage:i,width:l,shouldShowGuids:o,renamingGuid:t,startRenaming:s,stopRenaming:c,faviconGuid:d,socialImageGuids:u,thumbnailGuid:h,versionHistory:m}))}function op(){let e=(0,a.useMemo)(()=>[{displayText:(0,w.t)("fullscreen.pages_panel.rename_all_layers_menu_item"),callback:()=>{(0,ou.vm)(),(0,ou.Br)({source:od.uQ.LAYERS_PANEL_OVERFLOW_MENU,trackingDataSource:"layers_panel_overflow_menu"})}}],[]);return a.createElement(oc.kB,{dropdownItems:e})}var o_=n(809831),og=n(535758);function of({activeTab:e,onCanvasSearch:t,recordingKey:n}){let r=(0,tD.M)(),i=(0,o_.Em)(),o=(0,o_.cJ)(),s=r&&(i||o)&&(e===l.xae.ASSETS||e===l.xae.LAYERS);return a.createElement(lZ.y,{withBorder:!0},a.createElement(og.e,{activeTab:e,recordingKey:n}),a.createElement("div",{className:"ui3_tabs_row--iconContainer--a0sRl"},e===l.xae.LAYERS&&a.createElement(l4._,{onClick:t}),s&&a.createElement(eQ,{recordingKey:n,entrypoint:e===l.xae.ASSETS?eM.r6.ASSETS_PANEL_BUTTON:eM.r6.LAYERS_TAB_BUTTON,hideIfNoUpdates:e===l.xae.LAYERS})))}var oh=n(173521),oE=n(783423),oy=n(560560);let ob=(0,m.jz)(nL.xM9),ov=(0,m.jz)(nL.Nqv),oC=(0,m.jz)(nL.M$q);class ow extends f.o6{constructor(e){super(e),this.scrollContainerRef=a.createRef(),this.scrollContainerInnerRef=a.createRef(),this.shouldScrollToPage=null,this.updateLocalStorageSettings=(e,t,n,a)=>{if(h.x4){let r=JSON.parse(h.x4.getItem("pages-panel")||"{}");r[e]={height:t,isOpen:n,devHandoffShowAllPages:a},h.x4.setItem("pages-panel",JSON.stringify(r))}},this.getLocalStorageSettings=e=>{if(h.x4)return JSON.parse(h.x4.getItem("pages-panel")||"{}")[e]},this.setIsScrolledPastTop=e=>{this.setState({isScrolledPastTop:e>0})},this.scrollViewToPage=e=>{if(!this.scrollContainerRef.current){this.shouldScrollToPage=e;return}let t=this.positionOfPageInList(e),n=t+ob,a=this.scrollContainerRef.current.getScrollTop(),r=a+this.scrollContainerRef.current.getTrackHeight();t<a?this.scrollContainerRef.current.scrollTo(t-ob/2):n>r&&this.scrollContainerRef.current.scrollTo(a+(n-r)+ob/2),this.shouldScrollToPage=null},this.onContextClick=f.cZ(this,"contextmenu",e=>{(0,N.jo)(e),this.props.onPageContextMenu({nodeId:this.props.currentPageGuid,clientX:e.clientX,clientY:e.clientY})}),this.forcePagesExpanded=()=>{this.props.tabActions.showLayersPanel(),this.state.isPagesOpen||(this.setState({isPagesOpen:!0}),(0,O.ds)("pages_panel_open_toggle",this.props.openFile?.key,_.D.getState(),{isPagesOpen:!0},{forwardToDatadog:!0}))},this.togglePagesExpanded=()=>{this.props.isDevHandoffOverview||((0,O.ds)("pages_panel_open_toggle",this.props.openFile?.key,_.D.getState(),{isPagesOpen:!this.state.isPagesOpen},{forwardToDatadog:!0}),this.setState({isPagesOpen:!this.state.isPagesOpen}))},this.toggleLayersExpanded=()=>{(0,u.sx)("objects_panel_open_toggle",{isLayersOpen:!this.state.isLayersOpen}),this.setState({isLayersOpen:!this.state.isLayersOpen})},this.onFullscreenStartRenamingNode=({nodeId:e})=>{this.startRenamingNode(e)},this.startRenamingNode=e=>{if(this.props.isReadOnly)return;let t=s.q.instance.get(e);if(t?.isResponsiveSet&&t.parentNode?.defaultResponsiveSetId===e){this.props.dispatch(T.F.enqueue({message:(0,w.t)("sites.panel.pages_panel.cannot_rename_default_responsive_set")}));return}this.props.activeTab!==l.xae.LAYERS&&this.props.tabActions.showLayersPanel(),this.setState({renamingNodeGuid:e}),t?.parentGuid&&R.hq(t.parentGuid)},this.stopRenamingNode=(e,t,n)=>{if(this.props.isReadOnly)return;let a=this.state.renamingNodeGuid;if(a&&e){let e=s.q.instance.get(a),r=t||"",i=l.Ez5.uiState().focusModeState.getCopy();e?.isResponsiveSet||e?.isResponsiveNode?(r||=e?.name,o.l7.user("set-node-name",()=>R.i(a,r))):l.xc1.RESPONSIVE_SET===i||l.xc1.COMPONENT_SET===i?o.l7.user("set-node-name",()=>R.BH(r)):o.l7.user("set-node-name",()=>R.i(a,r)),L.Y5.commit(),A.wt.reportEditActionIf(r!==n,"rename-node")}this.setState({renamingNodeGuid:null})},this.clampValidHeight=e=>{let t=this.scrollContainerInnerRef.current?.getBoundingClientRect().top??175,n=1.5*ov+(this.props.isUI3?40+oC:0);return Math.max(1.5*ob,Math.min(e,this.state.cachedInnerHeight-t-n))},this.onWindowSize=e=>{this.windowResizeHandler()},this.windowResizeHandler=(0,p.s)(()=>{this.setState({cachedInnerHeight:window.innerHeight})},45),this.toggleViewMode=()=>{this.setState({viewMode:this.state.viewMode===nG.Bk.Grid?nG.Bk.List:nG.Bk.Grid})},this.setUpsellHeight=e=>{this.setState({upsellHeight:e})},this.setShowAllPages=e=>{let t=this.computedHeight(),n=this.getPagesInfo(e),a=this.heightForPages(n.pages.length,!!n.showAllButton),r=e?Math.max(t,a):Math.min(t,a);this.setState({devHandoffShowAllPages:e,height:r})},this.getPagesInfo=e=>{let{pagesList:t}=this.props;if(!this.props.isDevHandoff||this.props.disableCollapsing)return{pages:t};let n=!1,r=t.filter(e=>{let t=l.glU.nodeStatusesOnPage(e.nodeId).length>0;return t&&(n=!0),t||e.nodeId===this.props.currentPageGuid});return n&&r.length!==t.length?e?{pages:t,showAllButton:a.createElement(C.d,{label:(0,w.t)("dev_handoff.pages.hide_other"),onClick:()=>this.setShowAllPages(!1)})}:{pages:r,showAllButton:a.createElement(C.d,{label:(0,w.t)("dev_handoff.pages.show_all"),onClick:()=>this.setShowAllPages(!0)})}:{pages:t}},this.openCanvasSearch=()=>{(0,x._$)(this.props.dispatch,this.props.selectedView,"overview_search_clicked"),this.props.tabActions.showLayersPanel(),L.Y5.triggerAction("canvas-search",{source:"toolbar"})},this.state={renamingNodeGuid:null,isScrolledPastTop:!1,height:null,cachedInnerHeight:window.innerHeight,isPagesOpen:this.props.isUI3&&!this.props.isDevHandoff,isLayersOpen:!this.props.isUI3,pagesListInitialScrollTop:null,viewMode:nG.Bk.Grid,upsellHeight:0,devHandoffShowAllPages:!1,webpagesListHeight:null}}componentDidMount(){super.componentDidMount(),L.Y5.fromFullscreen.on("startRenamingNode",this.onFullscreenStartRenamingNode),window.addEventListener("resize",this.onWindowSize),null!=this.props.currentPageGuid&&this.scrollViewToPage(this.props.currentPageGuid),this.props.openFile&&this.initializePagesPanelSettings(this.props.openFile.key),this.props.isDevHandoffOverview&&!this.state.isPagesOpen&&this.setState({isPagesOpen:!0})}componentWillUnmount(){super.componentWillUnmount(),window.removeEventListener("resize",this.onWindowSize),L.Y5.fromFullscreen.removeListener("startRenamingNode",this.onFullscreenStartRenamingNode)}UNSAFE_componentWillUpdate(e,t){e.renamingPageId&&this.props.renamingPageId!==e.renamingPageId&&!this.scrollContainerRef.current&&this.setState({pagesListInitialScrollTop:this.positionOfPageInList(e.renamingPageId)-ob/2}),this.shouldScrollToPage&&this.scrollContainerRef.current&&this.scrollViewToPage(this.shouldScrollToPage)}componentDidUpdate(e,t){super.componentDidUpdate(e,t),e.isUI3!==this.props.isUI3&&this.setState({isPagesOpen:this.props.pagesList.length>1||this.props.isUI3&&!this.props.isDevHandoff}),this.props.isDevHandoffOverview&&!this.state.isPagesOpen&&this.setState({isPagesOpen:!0}),e.currentPageGuid!==this.props.currentPageGuid&&this.scrollViewToPage(this.props.currentPageGuid);let n=e.activeTab!==this.props.activeTab&&this.props.activeTab===l.xae.ASSETS,a=t.viewMode!==this.state.viewMode;if(n||a){let e=(0,h.TQ)(),t=this.props.showRedesignedAssetsPanel?ru.Pv:(0,nG.RN)(this.state.viewMode);if(this.props.showRedesignedAssetsPanel&&e)try{let n=e.getItem(ru.Zi);if(n){let e=JSON.parse(n);(e===ru.$H.LIST||e===ru.$H.GRID)&&(t=e)}}catch{}(0,u.sx)("Component Sidebar Viewed",{viewMode:t,assetsPanelVersion:this.props.showRedesignedAssetsPanel?3:2,fileKey:this.props.openFile?.key,fileTeamId:this.props.openFile?.teamId??void 0,fileOrgId:this.props.openFile?.parentOrgId??void 0})}if(this.scrollContainerRef.current&&this.setIsScrolledPastTop(this.scrollContainerRef.current.getScrollTop()),this.props.openFile){e.openFile?.key!==this.props.openFile.key&&this.initializePagesPanelSettings(this.props.openFile.key);let n=t.isPagesOpen!==this.state.isPagesOpen,a=this.state.height&&t.height!==this.state.height,r=this.state.devHandoffShowAllPages!==t.devHandoffShowAllPages;e.openFile?.key===this.props.openFile.key&&(n||a||r)&&this.updateLocalStorageSettings(this.props.openFile.key,this.state.height,this.state.isPagesOpen,this.state.devHandoffShowAllPages)}null!==this.props.isPagesOpenOverride&&this.props.isPagesOpenOverride!==e.isPagesOpenOverride&&(g.zl.set(lX.aN,null),this.setState({isPagesOpen:this.props.isPagesOpenOverride})),null!==this.props.isLayersOpenOverride&&this.props.isLayersOpenOverride!==e.isLayersOpenOverride&&this.setState({isLayersOpen:this.props.isLayersOpenOverride}),this.props.renamingPageId&&this.props.renamingPageId!==e.renamingPageId&&!this.props.isReadOnly&&(this.forcePagesExpanded(),this.scrollViewToPage(this.props.renamingPageId))}heightForPages(e,t){let n=e*ob;n=Math.ceil(n/ob)*ob+this.state.upsellHeight+(this.props.isUI3?8:ob/2),t&&(n+=ob);let a=this.props.isDevHandoff?144:40;return Math.min(n,Math.round(.25*(this.state.cachedInnerHeight-(0,E.bG)()-(0,m.hG)(nL.MGP)-a)))}defaultHeight(e){if(e){let e=this.props.publishableCanvasId?(0,lz.Vl)(s.q.instance.get(this.props.publishableCanvasId)):[];return this.heightForPages(e.length,!1)}let{pages:t,showAllButton:n}=this.getPagesInfo(this.state.devHandoffShowAllPages);return this.heightForPages(t.length,!!n)}async initializePagesPanelSettings(e){let t=await this.getLocalStorageSettings(e);(0,r.flushSync)(()=>{t?this.setState({height:t.height,isPagesOpen:t.isOpen,devHandoffShowAllPages:t.devHandoffShowAllPages}):this.setState({isPagesOpen:this.props.pagesList.length>1||this.props.isUI3&&!this.props.isDevHandoff})})}indexOfPageInList(e){return this.props.pagesList.findIndex(t=>t.nodeId===e)}positionOfPageInList(e){let t=this.indexOfPageInList(e);return -1!==t?t*ob:0}renderAssetPanelUi2(){return a.createElement(a1,{recordingKey:"componentsSidebar",viewMode:this.state.viewMode,toggleViewMode:this.toggleViewMode,containerSizingOptions:{containerWidth:this.props.width,maxSmallThumbSize:40,maxWideColWidth:300}})}renderAssetPanelUi3(){return a.createElement(b.tH,{boundaryKey:"AssetPanelUI3",fallback:a.createElement(lF,null)},a.createElement(lR,{width:this.props.width}))}computedHeight(){return this.state.height?this.clampValidHeight(this.state.height):this.defaultHeight()}renderPagesList(e){if(!this.props.pagesList)return null;let{pages:t,showAllButton:n}=this.getPagesInfo(this.state.devHandoffShowAllPages);return a.createElement(y.V,null,a.createElement(lU.wV,{size:this.computedHeight(),defaultSize:this.defaultHeight(),onResize:e=>{this.setState({height:e}),R.Uc("")},side:"bottom",className:e?ot.aY:ot.l$},a.createElement(v.P,{scrollBarAlways:!1,ref:this.scrollContainerRef,scrollContainerRef:this.scrollContainerInnerRef,className:ot.jG,width:this.props.width,onScroll:this.setIsScrolledPastTop,initialScrollTop:this.state.pagesListInitialScrollTop||void 0},a.createElement(lY.bU,{pages:t,scrollContainer:this.scrollContainerRef.current??void 0,shouldHighlightActivePage:!this.props.isDevHandoffOverview,isComparingChanges:this.props.isComparingChanges,pageToNumChanges:this.props.pageToNumChanges,isReadOnly:this.props.isReadOnly,onContextMenu:this.props.onPageContextMenu}),n&&a.createElement("div",{className:ot.Gr},n),a.createElement(lq,{setUpsellHeightCallback:this.setUpsellHeight}))))}render(){let e=this.props.openFile?this.props.activeTab:l.xae.LAYERS,t=this.props.openFile,n=this.props.isLoadingPage,r=this.props.isUI3,i=e===l.xae.LAYERS||this.props.isReadOnly,o=e===l.xae.CODE,c=(0,lH.Vj)(this.props.selectedView),u=(0,z.$A)(this.props.selectedView)||this.props.isDevHandoffOverview,m=(0,lW.P)(this.props.selectedView),p=this.state.isPagesOpen,_=!c&&i&&(!!r||p),g=c&&(i||o),f=(i||o)&&!this.props.isDevHandoff&&!this.props.isDevHandoffOverview,h=this.state.isPagesOpen&&this.props.activeTab===l.xae.LAYERS?oy.A:oE.A,E=this.props.pagesList.some(e=>e.pageType!==this.props.pagesList[0].pageType),y=l.AWq.getChunkChangeCount(),b=this.state.renamingNodeGuid;if(c&&this.props.isSitesWebpagesOpen){let e=s.q.instance.get(this.state.renamingNodeGuid||"");e?.isResponsiveSet&&(b=null)}let v=r?p&&this.state.isScrolledPastTop:this.state.isScrolledPastTop;return a.createElement("div",{className:d()(ot.N1,{pagesPanel:!n,[ot.$U]:!this.props.isShowingSlidesCarousel&&!this.props.ignoreVerticalFlex,[ot.NM]:this.props.isShowingSlidesCarousel})},this.props.isUI3?a.createElement(a.Fragment,null,a.createElement(k.$,null),this.props.showTabs&&!u&&a.createElement(of,{recordingKey:this.props.recordingKey,activeTab:e,onCanvasSearch:this.openCanvasSearch})):a.createElement(a.Fragment,null,u?a.createElement(l0,{togglePagesExpanded:this.togglePagesExpanded,onPageContextMenu:this.onContextClick,currentPageName:this.props.currentPageName,currentPageGuid:this.props.currentPageGuid,pageTabChevron:h,isOverview:this.props.isDevHandoffOverview}):a.createElement(on,{recordingKey:this.props.recordingKey,showTabs:this.props.showTabs,activeTab:e,pageTabChevron:h,isComparingChanges:this.props.isComparingChanges,currentPageName:this.props.currentPageName,onCanvasSearch:this.openCanvasSearch,onTogglePages:e===l.xae.ASSETS?this.forcePagesExpanded:this.togglePagesExpanded,onPageContextMenu:this.onContextClick}),e===l.xae.LAYERS&&a.createElement(k.$,null)),this.props.isComparingChanges&&i&&a.createElement(a.Fragment,null,this.props.versionHistory.compareId&&a.createElement(el.ZI,{compareId:this.props.versionHistory.compareId,versions:this.props.versionHistory.versions}),y>0&&a.createElement(lZ.y,{withBorder:!0},a.createElement(ei,null))),t&&a.createElement(W.QU,{fileKey:t.key,toggleManageMemoryModal:this.props.toggleManageMemoryModal,closeManageMemoryModal:this.props.closeManageMemoryModal}),g&&a.createElement(lK.j8,{scrollContainerRef:this.scrollContainerRef,width:this.props.width,height:this.state.webpagesListHeight,defaultHeight:this.defaultHeight(!0),onResize:e=>{this.setState({webpagesListHeight:e}),R.Uc("")},currentPageGuid:this.props.currentPageGuid,isComparingChanges:this.props.isComparingChanges,needsScrollLine:this.state.isScrolledPastTop,renamingNodeGuid:this.state.renamingNodeGuid,startRenamingNode:this.startRenamingNode,stopRenamingNode:this.stopRenamingNode}),_&&a.createElement("div",{onClick:e=>e.stopPropagation(),role:"none"},a.createElement("div",{className:d()(ot.Ed,this.props.menuMode?void 0:ot.P5)},this.props.menuMode?null:r?a.createElement(os,{isReadOnly:this.props.isReadOnly,onTogglePages:this.togglePagesExpanded,hasScrollLine:v,recordingKey:this.props.recordingKey,hasMultiplePageTypes:E,isPagesOpen:this.state.isPagesOpen,currentPageName:this.props.currentPageName,isComparingChanges:this.props.isComparingChanges,onCanvasSearch:this.openCanvasSearch,onPageContextMenu:u?this.onContextClick:N.jo}):a.createElement(l3,{isReadOnly:this.props.isReadOnly,onTogglePages:this.togglePagesExpanded,hasScrollLine:v,recordingKey:this.props.recordingKey}),p&&this.renderPagesList(n))),f&&a.createElement("div",{className:ot.LZ},r?!m&&a.createElement(om,{isReadOnly:this.props.isReadOnly,isLayersOpen:this.state.isLayersOpen,onToggleLayers:this.toggleLayersExpanded,currentPageGuid:this.props.currentPageGuid,width:this.props.width,shouldShowGuids:this.props.shouldShowGuids,renamingGuid:b,startRenamingNode:this.startRenamingNode,stopRenamingNode:this.stopRenamingNode,faviconGuid:this.props.faviconGuid,socialImageGuids:this.props.socialImageGuids,versionHistory:this.props.versionHistory,recordingKey:this.props.recordingKey}):a.createElement(lB.X,{hasPending:this.props.isLoadingPage,isReadOnly:this.props.isReadOnly,currentPage:this.props.currentPageGuid,width:this.props.width,shouldShowGuids:this.props.shouldShowGuids,renamingGuid:this.state.renamingNodeGuid,startRenaming:this.startRenamingNode,stopRenaming:this.stopRenamingNode,thumbnailGuid:this.props.openFile?.thumbnailGuid||null,versionHistory:this.props.versionHistory})),e===l.xae.KITS_SITES&&a.createElement(lK.oT,null),e===l.xae.DAKOTA&&a.createElement("div",{className:ot._s},a.createElement(S.Wr,{width:this.props.width})),e===l.xae.ASSETS&&!this.props.isReadOnly&&a.createElement(a.Fragment,null,this.props.showRedesignedAssetsPanel?this.renderAssetPanelUi3():this.renderAssetPanelUi2()))}}function oT({width:e,isReadOnly:t,pagesList:n,activeTab:r,showTabs:o,hasTeamLibraryUpdates:s,isDevHandoff:c,isShowingSlidesCarousel:d,isDevHandoffOverview:m,onPageContextMenu:p,disableCollapsing:_,isComparingChanges:f,pageToNumChanges:h,recordingKey:E,ignoreVerticalFlex:y}){let b=(0,V.J2)((0,D.UK)().showGuids),v=(0,i.wA)(),C=(0,B._Z)(),w=(0,g.md)(lX.aN),T=(0,I.GS)(),S=(0,tD.M)()&&T,x=(0,V.J2)(l.Ez5.editorState().selectionEmpty),k=(0,K.iZ)(),N=(0,a3.lV)(),A=(0,U.q5)(),O=(0,i.d4)(e=>e.versionHistory),R=(0,G._6)(),z=(0,i.d4)(e=>e.fileVersion),W=(0,i.d4)(e=>e.teams),Y=(0,i.d4)(e=>e.loadingState),X=(0,i.d4)(e=>e.modalShown),J=(0,H.Fk)(e=>e.getCurrentPage()?.responsiveSetSettings?.faviconID),Z=(0,H.Fk)(e=>[e.getCurrentPage()?.responsiveSetSettings?.socialImageID,...e.getCurrentPage()?.childrenNodes.map(e=>"RESPONSIVE_SET"===e.type&&e.responsiveSetSettings?.socialImageID)||[]].filter(e=>"string"==typeof e).join(",")),Q=(0,F.Um)(),ee=(0,M.dh)(),et=(0,M.nn)(),en=(0,lV.OT)(),ea=(0,g.md)(lG.h0),[er]=(0,g.fp)(lX.l7),ei=(0,lJ.U)(),{toggleManageMemoryModal:el,closeManageMemoryModal:eo}=function({sidebarWidth:e}){let t=(0,i.d4)(e=>e.modalShown?.type===q.gG.type),n=(0,i.wA)(),r=(0,a.useCallback)(()=>{let a=(0,$.P3)();(0,u.sx)("toggle_manage_memory_modal",{memoryUsedPercent:a,totalLayers:l.CeL?.getFileNodeCount(),pageContentPct:a-(0,$.Zz)()}),t?n(j.Ce()):n(j.to({type:q.gG,data:{sidePanelWidth:e,markModalClosed:()=>{}}}))},[n,t,e]),o=(0,a.useCallback)(()=>{t&&n(j.Ce())},[n,t]),s=(0,V.J2)(l.Ez5.uiState().isRecovery),c=(0,a.useRef)(!1);return(0,a.useEffect)(()=>{!s||t||c.current||(c.current=!0,r(),l.Ez5?.uiState().showMemoryUsage.set(!0))},[s,t,r]),{toggleManageMemoryModal:r,closeManageMemoryModal:o}}({sidebarWidth:e}),es=(0,P.T)();(0,oh.U)();let[ec,ed]=a.useState(!1);return a.useEffect(()=>{T&&!x&&ed(!0)},[x,T]),a.createElement(ow,{versionHistory:O,user:k,width:e,isReadOnly:t,currentPageGuid:ee,currentPageName:et,pagesList:n,activeTab:r,showTabs:o,faviconGuid:J,socialImageGuids:Z,hasTeamLibraryUpdates:s,isDevHandoff:c,isDevHandoffOverview:m,disableCollapsing:_,isComparingChanges:f,isShowingSlidesCarousel:d,pageToNumChanges:h,openFile:A,selectedView:R,fileVersion:z,teams:W,loadingState:Y,modalShown:X,dropdownShown:Q,recordingKey:E,shouldShowGuids:b,dispatch:v,isLoadingPage:C.isLoading,isPagesOpenOverride:w,isLayersOpenOverride:ec,isUI3:T,toggleIsCollapsed:()=>L.Y5.triggerAction("toggle-sidebar",{source:"pages-panel"}),showRedesignedAssetsPanel:S,markAssetPanelLoadingStart:N,publishableCanvasId:en,isSitesWebpagesOpen:ea,onPageContextMenu:p,renamingPageId:er,ignoreVerticalFlex:y,tabActions:ei,toggleManageMemoryModal:el,closeManageMemoryModal:eo,menuMode:es})}ow.displayName="PagesPanelView"},652649:(e,t,n)=>{n.d(t,{g:()=>l});var a=n(411855),r=n(96796),i=n(463420);function l(e){return a.createElement("div",{className:"pages_panel_chevron--chevron--3E6os","data-show-on-hover":!0},e.isExpanded?a.createElement(r.O,null):a.createElement(i.k,null))}},445448:(e,t,n)=>{n.d(t,{v:()=>K,G:()=>G});var a=n(411855),r=n(188507),i=n(752795),l=n(308548),o=n(449486),s=n(135317),c=n(380595),d=n(841368),u=n(587670),m=n(629019),p=n.n(m),_=n(966712),g=n(374626),f=n(153234),h=n(163023),E=n(939863),y=n(392592),b=n(809831),v=n(226055),C=n(177505),w=n(678340),T=n(479118),S=n(100197),x=n(601607),k=n(498606),N=n(815549),I=n(498750),A=n(283942),O=n(7959);function L({value:e,setValue:t,recordingKey:n,isDisabled:r,stopRenaming:i}){let l=(0,a.useRef)(null);(0,a.useEffect)(()=>{l.current?.select()},[]);let o=f.v_(n,"keydown",e=>{if(e.keyCode===I.Uz.ESCAPE)i(!1);else if(e.keyCode===I.Uz.ENTER)i(!0);else{if(e.keyCode!==I.Uz.TAB)return(0,A.jr)(e,A.W0.NO),f.aH;e.preventDefault(),i(!0)}}),s=f.AF(n,"change",e=>{r||t(e.currentTarget.value)}),c=f.iQ(n,"blur",()=>{i(!0)});return a.createElement(O.ks,{className:"page_rename_input--input--s2o7Q",innerRef:l,value:e,onChange:s,onKeyDown:o,onBlur:c,spellCheck:!1,autoCorrect:"off",autoCapitalize:"off",autoFocus:!0})}var D=n(376600),R=n(247245),M=n(761070),P=n(873619),F=n(561071);function B({editorType:e}){switch(e){case u._YF.DESIGN:return a.createElement(l.k,null);case u._YF.WHITEBOARD:return a.createElement(h.B,{svg:F.A});case u._YF.SLIDES:return a.createElement(o.g,null);default:return null}}function U(e){let{isActive:t,isDivider:n,pageType:r,hasMultiplePageTypes:i}=e;return n||!i?null:a.createElement("div",{className:p()(D.n6,{[D.vu]:t})},a.createElement(B,{editorType:r}))}function G({pageType:e,hasMultiplePageTypes:t,nodeId:n,nodeName:l,isRenaming:o,startRenaming:s,stopRenaming:c,renamingPagePendingName:d,setRenamingPagePendingName:m,isActive:S,shouldShowGuids:I,onMouseDownCallback:A,onMouseUpCallback:O,onMouseMoveCallback:P,onClickCallback:F,reorderingPageGuids:B,selectedPageGuids:G,onContextMenuCallback:H,showMemoryUsage:z,showInFileMemoryPercentage:W,isOffline:j,isComparingChanges:$,pageToNumChanges:q,versionHistory:Y,isDivider:X,pagesList:J,index:Z,activePageShouldUseBrandColor:Q}){let ee=(0,r.wA)(),et=(0,v.GS)(),en="whiteboard"===(0,b.lg)(),[ea,er]=a.useState(!1),ei=(0,g.md)(N.l),el=(0,x.Fk)((e,t)=>e.get(t)?.nodeMemoryUsage,n),eo=(0,x.Fk)((e,t)=>e.get(t)?.rootMemoryUsage,n),es=a.useMemo(()=>(0,T.Fy)(J,n)===u.xal.LOADED,[n,J]),ec=a.useMemo(()=>J.slice(0,Z).reverse().find(e=>e.isDivider),[Z,J]),ed=u.h3O.getSessionState()===u.kul.JOINED,eu=a.useMemo(()=>j&&!ed&&!es&&u.h3O.isIncrementalSession(),[j,es,ed]),em=f.Pt("pagesPanel","row",Z)||"",ep=f.rf(em,"contextmenu",e=>{e.preventDefault(),!eu&&H&&H({nodeId:n,e})}),e_=f.rf(em,"dblclick",()=>{eu||o||s(n)}),eg=f.rf(em,"click",e=>{if(!X&&!o){if(eu){ee(y.F.enqueue({type:"offline-page-switch",message:(0,E.t)("fullscreen.pages_panel.unavailable_offline")}));return}F(n,e)}}),ef=a.useCallback(e=>{eu||o||A(n,e)},[o,n,A,eu]),eh=a.useCallback(e=>{o||P(n,e)},[o,n,P]),eE=a.useCallback(e=>{o||O(n,e)},[o,n,O]),ey=a.useCallback(()=>(0,i.isNullish)(el)||(0,i.isNullish)(eo)?"":(0,w.pr)(el,eo,!0),[el,eo]),eb=$&&q?.get(n)||0,ev=Y?.activeId&&"current_version"===Y.activeId,eC=z&&W&&!o&&ev,ew=!$&&!o,eT=X&&!S&&!o,eS=en&&!o&&S&&G?.length===0,ex=eS&&ea&&ei,ek=!X&&void 0!==ec&&!ec.name.match(/^(-+|\u2013+|\u2014+|\*+|\s+)$/);return a.createElement("div",{className:p()({[D.mB]:eT,[D.oG]:!eT,[D.sl]:S,[D.sR]:ex,[D.Pl]:Q,[D.Dq]:0===B.length&&0===G.length,[D.vy]:ek},0!==B.length||0!==G.length?G.includes(n)?D.wH:B.includes(n)?D.iB:0===B.length?D.Dq:"":""),onContextMenu:ep,onClick:eg,draggable:!1,onMouseDown:ef,onMouseMove:eh,onMouseUp:eE,onDoubleClick:e_},!eT&&!et&&a.createElement(h.B,{className:p()(S?D.Mp:D._J,{[D.Vt]:!1}),svg:R.A}),o&&a.createElement(L,{value:d||"",setValue:m,stopRenaming:c,recordingKey:em,isDisabled:eu}),eT?(e=>{let t=!!e.match(/^(-+|\u2013+|\u2014+|\*+|\s+)$/),n=(0,C.Bc)(e);return!t&&n?a.createElement("span",{className:D.O0},n[1]):a.createElement("span",{className:D.jE,"data-testid":"pageDivider"})})(l):!o&&a.createElement("div",{className:D.Nz},a.createElement("span",{className:eu?D.YW:D.KE},I?`${l} (${n})`:l)),a.createElement("div",{className:D.q8},ew&&a.createElement(K,{pageGuid:n,fallback:a.createElement(U,{isActive:S,isDivider:X,pageType:e,hasMultiplePageTypes:t}),hideBackground:!0}),eu&&!eT&&a.createElement("div",{className:D.Nr,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,E.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"},a.createElement(h.B,{className:D.VQ,svg:M.A,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,E.t)("fullscreen.pages_panel.unavailable_offline"),"data-onboarding-key":"page-unavailable-offline"})),eC&&a.createElement("span",{className:eu?D.hi:D.VC,dir:"auto"},ey()),(0,_.kc)().version_diffing&&$&&eb>0&&a.createElement("div",{className:D.Sp},eb),(0,_.kc)().piper_present_summary&&eS&&!t?a.createElement(V,{onContextMenuCallback:H,nodeId:n,isMoreActionsActive:ea,setIsMoreActionsActive:er,isPageContextMenuOpen:ei,isUI3:et}):null))}function K({pageGuid:e,margin:t,fallback:n=null,hideBackground:r=!1}){let i=(0,S.J2)(u.Ez5.currentSceneState().numReadyNodesByPage),l=(0,S.J2)(u.Ez5.currentSceneState().numCompletedNodesByPage),o=(0,v.GS)(),c=i.has(e)?i.get(e)>0:u.glU.nodeStatusesOnPage(e).includes(u.zIx.BUILD),d=l.has(e)?l.get(e)>0:u.glU.nodeStatusesOnPage(e).includes(u.zIx.COMPLETED);return d&&!c&&o?a.createElement(s.g,{className:"pages_panel_row--pageCompleted--gzdWd","data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,E.t)("dev_handoff.status.completed"),"data-testid":"pageCompletedIndicator"}):c||d?a.createElement(h.B,{className:p()("pages_panel_row--pageReady--XaDiG",{"pages_panel_row--hideBackground--22Ike":r}),svg:P.A,style:t?{[t]:"8px"}:void 0,"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,E.t)("dev_handoff.tag.ready_to_build"),"data-testid":"pageReadyIndicator"}):n}function V({onContextMenuCallback:e,nodeId:t,isMoreActionsActive:n,isPageContextMenuOpen:r,setIsMoreActionsActive:i,isUI3:l}){let o=a.useRef(null),s=l?-4:-15,u=l?10:9;return a.useEffect(()=>{r||i(!1)},[r,i]),a.createElement("div",{ref:o,onDoubleClick:e=>e.stopPropagation(),onClick:n=>{i(!0);let a=o.current?.getBoundingClientRect();a&&e({nodeId:t,e:n,clientX:a.x+s,clientY:a.y+a.height+u})},role:"button",tabIndex:0,className:p()("pages_panel_row--pageMoreActionsButton--5Rty9",{"pages_panel_row--pageMoreActionsButtonActive--2dmC-":n&&r}),"data-tooltip-type":k.Ib.TEXT,"data-tooltip":(0,E.t)("fullscreen.pages_panel.more_pages_actions"),"data-tooltip-show-above":!0},l?a.createElement(c.A,{className:"pages_panel_row--pageMoreActionsIcon--kzZVn"}):a.createElement(d.J,null))}},359108:(e,t,n)=>{n.d(t,{U:()=>d});var a=n(411855),r=n(188507),i=n(587670),l=n(776250),o=n(293017),s=n(335682),c=n(44160);function d(){let e=(0,r.wA)(),t=(0,s.q5)(),n=(0,c.lV)(),d=(0,a.useCallback)(()=>{t&&((0,l.sx)("left_panel_set_tab",{value:"Components"}),n(),e(o.FP({tab:i.xae.ASSETS,persist:!0,shouldFocusSearchBar:!0})))},[e,t,n]),u=(0,a.useCallback)(()=>{(0,l.sx)("left_panel_set_tab",{value:"Layers"}),e(o.FP({tab:i.xae.LAYERS,persist:!0}))},[e]),m=(0,a.useCallback)(()=>{(0,l.sx)("left_panel_set_tab",{value:"KitsSites"}),e(o.FP({tab:i.xae.KITS_SITES}))},[e]),p=(0,a.useCallback)(()=>{(0,l.sx)("left_panel_set_tab",{value:"Code"}),e(o.FP({tab:i.xae.CODE}))},[e]),_=(0,a.useCallback)(()=>{(0,l.sx)("left_panel_set_tab",{value:"Dakota"}),e(o.FP({tab:i.xae.DAKOTA}))},[e]);return(0,a.useMemo)(()=>({showPublish:d,showLayersPanel:u,showSitesBlocksPanel:m,showCodePanel:p,showDakotaPanel:_}),[d,u,m,p,_])}},735056:(e,t,n)=>{n.d(t,{y:()=>l});var a=n(411855),r=n(629019),i=n.n(r);function l({children:e,withBorder:t,autoHeight:n=!1}){return a.createElement("div",{className:i()("tabs_header--tabsHeader--8rHi8",{"tabs_header--autoHeight--eXDMV":n,"tabs_header--withBorder--jZYSF":t})},e)}},535758:(e,t,n)=>{n.d(t,{e:()=>g});var a=n(411855),r=n(602354),i=n(587670),l=n(153234),o=n(939863),s=n(952593),c=n(809831),d=n(283942),u=n(611978),m=n(601538),p=n(234587),_=n(359108);function g({activeTab:e,recordingKey:t}){let n=(0,u._6)(),{showPublish:g,showLayersPanel:f,showSitesBlocksPanel:h,showCodePanel:E,showDakotaPanel:y}=(0,_.U)(),b=(0,p.Vj)(n),v=(0,s.U9)()&&b,C=(0,c.ow)(),w=i.xae.LAYERS.toString(),T=i.xae.KITS_SITES.toString(),S=i.xae.CODE.toString(),x=i.xae.ASSETS.toString(),k=i.xae.DAKOTA.toString(),[N,I]=r.tU.useManagedTabs({[w]:!0,[T]:b,[S]:b,[x]:!C,[k]:v},e.toString(),e=>{switch(parseInt(e)){case i.xae.LAYERS:f();break;case i.xae.KITS_SITES:h();break;case i.xae.CODE:E();break;case i.xae.ASSETS:g();break;case i.xae.DAKOTA:y();break;default:(t=>{throw Error("Unhandled tab behavior: "+e)})(0)}},{recordingKey:l.Pt(t,"tabs")});return a.createElement("div",{role:"presentation",className:"ui3_tabs--tabStrip--zypFK",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()},onKeyDown:e=>{e.defaultPrevented||(0,d.f7)(e)}},a.createElement(r.tU.TabStrip,{manager:I},a.createElement(r.tU.Tab,{...N[w]},(0,o.tx)("fullscreen.pages_panel.file_tab")),a.createElement(r.tU.Tab,{...N[T],htmlAttributes:{"data-testid":"kitsSitesTab"}},(0,o.tx)("fullscreen.pages_panel.resources_tab")),a.createElement(r.tU.Tab,{...N[S]},(0,o.tx)("fullscreen.pages_panel.code_tab")),a.createElement(r.tU.Tab,{...N[x],onboardingKey:m.Qr},(0,o.tx)("fullscreen.pages_panel.assets_tab")),a.createElement(r.tU.Tab,{...N[k]},(0,o.tx)("fullscreen.pages_panel.dakota_tab"))))}},412371:(e,t,n)=>{n.d(t,{K:()=>d,g:()=>u});var a=n(411855),r=n(188507),i=n(374626),l=n(738269),o=n(259927),s=n(187882),c=n(653671);function d(){let e=(0,r.wA)();return(0,a.useCallback)(({nodeId:t,clientX:n,clientY:a})=>{e((0,l.j7)({type:o.SA,data:{clientX:n,clientY:a,pageId:t}}))},[e])}function u({pagesList:e,shouldShowDuplicateOption:t=!0}){let n=(0,r.wA)(),[d,u]=(0,i.fp)(c.cE);return(0,a.useCallback)(({nodeId:a,clientX:r,clientY:i})=>{let c=new Set(e.map(e=>e.nodeId)),m=d.filter(e=>c.has(e));m.length>0&&!m.includes(a)&&c.has(a)&&(m.push(a),u(m));let p=(()=>{if(m.length>0){let t=(0,s.Pe)(e);return[...m].sort((e,n)=>t[e]-t[n])}return[a]})();0!==p.length&&n((0,l.j7)({type:o.d2,data:{clientX:r,clientY:i,pageIds:p,shouldShowDuplicateOption:t}}))},[d,n,e,u,t])}},465702:(e,t,n)=>{n.d(t,{c:()=>_});var a=n(411855),r=n(188507),i=n(587670),l=n(707458),o=n(939683),s=n(374626),c=n(929715),d=n(177505),u=n(479118),m=n(335682),p=n(653671);function _(e){let t=(0,d.dh)(),[n,_]=(0,s.fp)(p.l7),[g,f]=(0,s.fp)(p.oZ),h=(0,m.q5)(),E=(0,r.wA)(),y=(0,d.rE)(),b=(0,r.d4)(e=>e.versionHistory),v=(0,o.am)(),C=(0,a.useCallback)(e=>{_(e),i.glU.triggerActionInUserEditScope("track-page-rename",{args:{nodeId:e}})},[_]),w=(0,a.useCallback)(()=>_(null),[_]),T=(0,a.useCallback)(async()=>{if(!n)return;let a=l.q.instance.get(n),r=a?.name,o=g||"",s=await (0,d.zO)({openFile:h,pageNode:a,pageName:o});if((0,d.CQ)({openFile:h,pageId:n,newName:o,oldName:r,trackRenamePage:()=>v("page_commit_rename",{nodeId:t,isDivider:s},{forwardToDatadog:!0})}),s&&t===n){let n=e.findIndex(e=>e.nodeId===t),a=n+1,r=e[a];for(;r&&r.isDivider;)a+=1,r=e[a];if(r)(0,c.J)(()=>(0,d.$P)(r.nodeId,t,b,E,(0,u.Fy)(e,r.nodeId)===i.xal.LOADED,v));else{let a=n-1,r=e[a];for(;r&&r.isDivider;)a-=1,r=e[a];r?(0,c.J)(()=>(0,d.$P)(r.nodeId,t,b,E,(0,u.Fy)(e,r.nodeId)===i.xal.LOADED,v)):y(null)}}_(e=>e===n?null:e)},[e,y,n,_,g,h,t,b,v,E]);return{renamingPageId:n,startRenaming:C,cancelRenaming:w,commitRenaming:T,pendingPageName:g,setPendingPageName:f}}},173521:(e,t,n)=>{n.d(t,{U:()=>p});var a=n(411855),r=n(188507),i=n(707458),l=n(866206),o=n(939683),s=n(625651),c=n(356390),d=n(177505),u=n(335682),m=n(140871);function p(){let e=(0,u.q5)(),t=window.FigmaMobile,n=(0,d.rE)(),p=(0,m.C3)(),_=(0,r.wA)(),g=(0,o.am)(),f=p?(0,l.oA)(p.pageNodeId):void 0;(0,a.useEffect)(()=>{t&&(t._select_page=async e=>{f===e&&_(s.au({})),await i.q.instance.setCurrentPageAsync(e)})},[_,t,f]),(0,a.useEffect)(()=>{t&&(t._rename_page=(t,n)=>{(0,d.CQ)({openFile:e,pageId:t,newName:n,trackRenamePage:()=>g("page_commit_rename",{nodeId:t},{forwardToDatadog:!0})})})},[t,e,g]),(0,a.useEffect)(()=>{t&&(t._delete_page=e=>{c.Y5.triggerActionInUserEditScope("page-delete",{args:{nodeId:e}}),c.Y5.commit()})},[t]),(0,a.useEffect)(()=>{t&&(t._create_page=()=>{n(null)})},[t,n])}},690122:(e,t,n)=>{n.d(t,{p:()=>o});var a=n(411855),r=n(848661),i=n(29680),l=n(754369);function o(e){let t=(0,i.B9)(),{backingSymbolGUID:n,backingStateGroupGUID:o}=(0,l.$)(e),s=a.useMemo(()=>{let n=[];for(let a of e){let e=t.get(a);if(e&&"INSTANCE"!==e.type){for(;e?.isInstanceSublayer;)e=e.parentNode;e?.type==="INSTANCE"&&n.push(e)}}return n},[e,t]),c=a.useMemo(()=>{let e=null;for(let n of s){if(!n.symbolId)continue;let a=t.get(n.symbolId);if(a){if(e){if(e.guid!==a.guid)return r.oV}else e=a}}return e?.isState&&e.parentGuid&&(e=e.parentNode),e},[s,t]),d=a.useMemo(()=>{let n=[];for(let a of e){let e=t.get(a);e&&"INSTANCE"===e.type&&e.isInstanceSublayer&&n.push(e)}return n},[e,t]),u=a.useMemo(()=>!!(null==c&&(n||o)),[c,n,o]),m=a.useMemo(()=>!!(null==n&&null==o&&c),[c,n,o]);return a.useMemo(()=>({backingSymbolOrStateGroupOfContainingInstances:c,containingInstancesOfSublayers:s,onlyInstances:u,onlyInstanceSublayers:m,nestedInstances:d}),[c,s,u,m,d])}},412297:(e,t,n)=>{n.d(t,{PM:()=>V,h_:()=>K,iT:()=>j,sQ:()=>W,vr:()=>z});var a=n(411855),r=n(188507),i=n(587670),l=n(86625),o=n(841563),s=n.n(o),c=n(776250),d=n(794272),u=n(374626),m=n(153234),p=n(268537),_=n(939863),g=n(738269),f=n(662275),h=n(106757),E=n(356390),y=n(844053),b=n(335682),v=n(416095),C=n(57392),w=n(113916),T=n(498606),S=n(279145),x=n(224690),k=n(715762),N=n(782555),I=n(616900),A=n(142232),O=n(298543),L=n(227795),D=n(958568),R=n(754369),M=n(690122),P=n(501891),F=n(258376),B=n(362679);let U="instance-option-dropdown";function G(e){e.stopPropagation()}function K(e){let{instanceAndSublayerGUIDs:t,resettableInstanceOverrides:n,showAllInstanceOptions:o}=e,{appModel:s,detachInstanceShortcut:c}=(0,d.R)(e=>({appModel:e.mirror.appModel,detachInstanceShortcut:(0,S.c1)(e.mirror.appModel.keyboardShortcuts,"detach-instance")})),u=a.useMemo(x.$H,[]),p=(0,r.d4)(e=>u(e,t)),{isBackingSymbolSoftDeleted:g,restoreType:f}=(0,R.$)(t),{onlyInstances:h,nestedInstances:y}=(0,M.p)(t),b=a.useRef(null),{needsUpdate:v}=z(t),C=W(t),w=a.useMemo(()=>{let e=[...C];if(!o)return e;if(o&&C.length>0&&e.push({type:"separator"}),"SYMBOL_AS_STATE"===f&&e.push({type:"option",value:"restore-symbol-or-state-group",displayText:(0,_.t)("design_systems.instance_panel.restore_variant"),callback:()=>{E.Y5.triggerActionInUserEditScope("restore-symbol-or-state-group")}}),h&&e.push({type:"option",value:"detach-instance",displayText:(0,_.t)("fullscreen_actions.detach-instance"),shortcut:c,callback:()=>{l.l7.user("detach-instances",()=>i.glU.detachInstances(t))}}),(0,S.Yh)(s,"push-changes-to-main")&&0===y.length&&!g&&(e.length>0&&e.push({type:"separator"}),e.push({type:"option",value:"push-changes-to-main",displayText:(0,_.t)("fullscreen_actions.push-changes-to-main"),callback:()=>{E.Y5.triggerActionInUserEditScope("push-changes-to-main")}})),n&&Object.values(n).some(e=>e)){if(Object.keys(n).forEach(a=>{let r=parseInt(a);n?.[r]&&(e.length>0&&r===i.YnC.OVERRIDES_FOR_LAYER_AND_SUBLAYERS&&e.push({type:"separator"}),e.push({type:"option",value:r,displayText:function(e){switch(e){case i.YnC.OVERRIDES_FOR_LAYER_AND_SUBLAYERS:return(0,_.t)("design_systems.instance_panel.reset_all_changes");case i.YnC.EXPORTS:return(0,_.t)("design_systems.instance_panel.reset_exports");case i.YnC.EFFECTS:return(0,_.t)("design_systems.instance_panel.reset_effects");case i.YnC.LAYER:return(0,_.t)("design_systems.instance_panel.reset_others");case i.YnC.VISIBLE:return(0,_.t)("design_systems.instance_panel.reset_visibility");case i.YnC.NAME:return(0,_.t)("design_systems.instance_panel.reset_name");case i.YnC.FILL:return(0,_.t)("design_systems.instance_panel.reset_fill");case i.YnC.STROKE:return(0,_.t)("design_systems.instance_panel.reset_stroke");case i.YnC.TEXT:return(0,_.t)("design_systems.instance_panel.reset_text");case i.YnC.TEXT_STYLE:return(0,_.t)("design_systems.instance_panel.reset_text_style");case i.YnC.SIZE:return(0,_.t)("design_systems.instance_panel.reset_size");case i.YnC.PROTOTYPE_INTERACTIONS:return(0,_.t)("design_systems.instance_panel.reset_interactions");case i.YnC.OVERLAY:return(0,_.t)("design_systems.instance_panel.reset_overlay");case i.YnC.NUM_VALUES:}return""}(r),callback:()=>{l.l7.user("reset-overrides",()=>i.glU.resetSymbolOverridesForNodes(t,r))}}))}),p)for(let t in p)for(let n in p[t]){let a=p[t][n];e.push({type:"option",value:"reset-component-prop-assignment",displayText:(0,_.t)("design_systems.instance_panel.reset_property_assignment",{assignmentName:a.name}),callback:()=>{l.l7.user("reset-prop-assignments",()=>i.glU.resetComponentPropAssignmentForInstances(a.instanceGUIDs,n))}})}}else e.length>0&&e.push({type:"separator"}),e.push({type:"option",value:i.YnC.OVERRIDES_FOR_LAYER_AND_SUBLAYERS,displayText:(0,_.t)("design_systems.instance_panel.no_changes_to_reset"),callback:()=>{},disabled:!0});return e},[C,o,f,h,s,y.length,g,n,c,t,p]),{toggleDropdown:k,dropdownShown:N}=j(t),I=m.Pt(e,"toggleInstanceOptionDropdown",t.join("-"));return o||v?a.createElement("span",null,a.createElement("div",{ref:b},v?a.createElement(L.YW,{className:P.l_,onClick:k,selected:N,onMouseDown:G,svg:F.A,"data-tooltip-type":T.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.instance_panel.update_available"),recordingKey:I}):a.createElement(L.YW,{onClick:k,selected:N,onMouseDown:G,"data-tooltip-type":T.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.instance_panel.instance_options"),svg:B.A,recordingKey:I,disabled:0===w.length})),a.createElement(V,{targetRef:b,instanceDropdownOptions:w,recordingKey:e.recordingKey,dropdownShown:N})):null}function V({targetRef:e,instanceDropdownOptions:t,recordingKey:n,dropdownShown:r}){return null!=e.current&&r?a.createElement(O.Cf,{targetRect:e.current.getBoundingClientRect(),propagateCloseClick:!0},t.map((e,t)=>"option"===e.type?a.createElement(p.c$,{className:P.VM,onClick:e.callback,recordingKey:m.Pt(n,e.displayText),key:"reset-component-prop-assignment"===e.value?m.Pt(e.value,t):e.value,disabled:e.disabled},e.displayText,e.shortcut&&a.createElement("span",null,e.shortcut)):a.createElement(p.wv,{key:t}))):null}function H(){let e=(0,r.d4)(y.c),t=(0,u.md)(b.yV),n=(0,u.md)(h.p9);return{fileKey:e.file_key,fileParentOrgId:t?.parentOrgId?.toString(),fileTeamId:e.file_team_id?.toString(),userId:n?.id}}function z(e){let{componentUpdatesForAllPages:t,stateGroupUpdatesForAllPages:n}=(0,r.d4)(C.ij),i=a.useMemo(w.bd,[]),l=(0,r.d4)(t=>i(t,e)),{componentInstanceUpdateInfo:o,stateInstanceUpdateInfo:s}=(0,D.cB)(t,n,l),c=(0,D.jR)(o,s);return{needsUpdate:c>0&&c===l.length,numSelectedInstancesToUpdate:c,componentInstanceUpdateInfo:o,stateInstanceUpdateInfo:s}}function W(e){let{needsUpdate:t,numSelectedInstancesToUpdate:n,componentInstanceUpdateInfo:i,stateInstanceUpdateInfo:l}=z(e),o=(0,v.eS)(v.aD.ALL),{updateIndividualInstances:s}=(0,A.TM)(o,k.AX.DROPDOWN_UPDATE_SELECTED_INSTANCE),d=(0,r.wA)(),u=a.useMemo(()=>({source:"INSTANCE_PANEL",instanceAndSublayerGUIDs:e}),[e]),m=(0,I.jX)(u),p=a.useCallback(()=>{d((0,f.to)({type:N.F,data:u}))},[d,u]),g=H();return a.useMemo(()=>{let e=[];return t&&(e.push({type:"option",value:"update-selected-instance",displayText:(0,_.t)("design_systems.instance_panel.update_selected",{numSelectedInstancesToUpdate:n}),callback:()=>s(i,l)}),m&&e.push({type:"option",value:"review-instance-update",displayText:(0,_.t)("design_systems.instance_panel.review_update"),callback:()=>{c.az.trackDefinedEvent("design_systems_analytics.instance_review_update_click",g),p()}})),e},[i,t,n,m,l,p,g,s])}function j(e){let t=(0,r.wA)(),n=(0,r.d4)(t=>t.dropdownShown?.type===U&&s()(t.dropdownShown.data?.guids,e)),i=H();return{dropdownShown:n,toggleDropdown:a.useCallback(a=>{a.stopPropagation(),n?t(g.oB()):(t(g.j7({type:U,data:{guids:e}})),c.az.trackDefinedEvent("design_systems_analytics.instance_update_available_button_click",i))},[n,t,e,i])}}},721478:(e,t,n)=>{n.d(t,{NA:()=>W,_B:()=>$,bj:()=>Y,iN:()=>q});var a=n(411855),r=n(109388),i=n(188507),l=n(201706),o=n(587670),s=n(629019),c=n.n(s),d=n(44948),u=n(794272),m=n(153234),p=n(520581),_=n(667167),g=n(163023),f=n(736242),h=n(939863),E=n(286954),y=n(843495),b=n(848661),v=n(29680),C=n(237929),w=n(496470),T=n(532888),S=n(498606),x=n(420186),k=n(386976),N=n(371686),I=n(567488),A=n(494057),O=n(224690),L=n(7959),D=n(893606),R=n(939791),M=n(754369),P=n(690122),F=n(412297),B=n(225373),U=n(371623),G=n(151575),K=n(501891),V=n(968109),H=n(405622),z=n(289298),W=(e=>(e[e.NAME_ONLY=0]="NAME_ONLY",e[e.INSTANCE_SWAP_PICKER=1]="INSTANCE_SWAP_PICKER",e))(W||{});function j(e){e.stopPropagation()}function $(e){let t=(0,v.B9)();return a.useMemo(()=>{if(0===e.length)return null;let n=t.get(e[0]);return n?.symbolId},[e,t])}function q(e){let{canCollapse:t,resettableInstanceOverrides:n,instanceAndSublayerGUIDs:r,shouldHideButtons:i,isInComponentPlayground:o}=e,s=(0,a.useRef)(null),{onlyInstances:d,onlyInstanceSublayers:u}=(0,P.p)(r),m=$(r),p=(0,D.R)();if(!d&&!u)return null;let _=p&&!o&&0===e.instanceNameDisplayOverride,g=a.createElement(a.Fragment,null,a.createElement(Y,{...e,panelTitleRef:s,dropdownIdPrefix:"instance-panel-instance-swap-picker",shouldUseUI3RowCompatibleStyles:_}),!i&&a.createElement("span",{className:K.MC},a.createElement(I.yQ,{nodeField:l.R.OVERRIDDEN_SYMBOL_ID,defaultValue:m,guids:r}),a.createElement(G.F,{instanceAndSublayerGUIDs:r,recordingKey:e.recordingKey}),a.createElement(F.h_,{resettableInstanceOverrides:n,instanceAndSublayerGUIDs:r,recordingKey:e.recordingKey,showAllInstanceOptions:!0})));return _?a.createElement(R.DE,{label:null,input:g,icon:null}):a.createElement(L.fI,{className:c()(K.LO,{[K.Z0]:t,[K.YF]:o}),ref:s},g)}function Y({panelTitleRef:e,panelTitleOverridesClassName:t,pickerButtonTextOverridesClassName:n,flushLeft:s,dropdownIdPrefix:I,shouldHideInstanceIcon:D=!1,chevronOverride:R,shouldUseUI3RowCompatibleStyles:F,...G}){let{instanceNameDisplayOverride:W,containerWide:$,instanceAndSublayerGUIDs:q,shouldHideButtons:Y,highlightNodesOnHover:X}=G,J=`${I}-${q.join("-")}`,Z=(0,v.B9)(),Q=a.useMemo(O.en,[]),{propDef:ee,instanceSwapPickerShown:et}=(0,u.R)(e=>({propDef:Q(e,q,l.R.OVERRIDDEN_SYMBOL_ID),instanceSwapPickerShown:e.instanceSwapPickerShown})),{preferredValues:en,preferredValuesFetchError:ea,retryPreferredValuesFetch:er}=(0,k.xP)(ee??void 0),ei=a.useMemo(()=>ea?a.createElement(N.u,{onRetry:er,recordingKey:"instancePropAssignment"}):void 0,[ea,er]),el=(0,i.wA)(),{backingSymbolGUID:eo,backingStateGroupGUID:es,affiliatedStateGroupId:ec}=(0,M.$)(q),{backingSymbolOrStateGroupOfContainingInstances:ed,containingInstancesOfSublayers:eu,onlyInstances:em,onlyInstanceSublayers:ep}=(0,P.p)(q),e_=(0,i.d4)(T.t_),eg=(0,i.d4)(e=>e.library),ef=(0,d.k9)(()=>{let e=es??eo;if(!e||(0,b.gl)(e))return[];let{selectedItem:t}=(0,w.XV)(e,e_,eg,Z);return t?[t]:[]},[es,eo,e_,eg,Z]),eh=a.useMemo(()=>!!ep&&!!ed&&ed!==b.oV,[ep,ed]),eE=m.rf(m.Pt(G.recordingKey,"instanceName",q.join("-")),"mouseenter",()=>{X&&o.Ez5.canvasViewState().temporarilyHoveredNodes.set(q)}),ey=m.rf(m.Pt(G.recordingKey,"instanceName",q.join("-")),"mouseleave",()=>{X&&o.Ez5.canvasViewState().temporarilyHoveredNodes.set([])}),eb="";if(null!=es||ec){if((0,b.gl)(es))eb=(0,h.t)("design_systems.instance_panel.mixed");else{let e=es?Z.get(es):null,t=ec?Z.get(ec):null;eb=(0,C.kH)(t?.name||e?.name||"")}}else null!=eo?eb=(0,b.gl)(eo)?(0,h.t)("design_systems.instance_panel.mixed"):(0,C.kH)(Z.get(eo)?.name||""):null!=ed&&(eb=(0,b.gl)(ed)?(0,h.t)("design_systems.instance_panel.mixed"):(0,C.kH)(ed.name||""));let ev="";if(em){let e=Z.get(q[0])?.name;q.every(t=>Z.get(t)?.name===e)&&e&&(ev=e)}let{modalWidth:eC}=(0,_.TQ)(_.Zl.INSTANCE_SWAP_PICKER),ew=(0,_.qc)(),eT=a.useCallback(()=>{if(Y)return;let t=e.current?(0,x.VZ)(r.findDOMNode(e.current),eC,!ew):void 0;el((0,E.zE)({initialPosition:t,id:J,modal:!0}))},[Y,e,eC,ew,el,J]),eS=a.useCallback(()=>{eh&&y.tJ(eu.map(e=>e.guid))},[eh,eu]),ex="";em?ex=et.isShown&&et.id===J?K.sK:Y?K.qw:K.vS:ep&&(ex=eh?K.EA:K.me);let ek=R??a.createElement(g.B,{className:K.t4,svg:z.A});return a.createElement(p.E,{name:"instance_title_control"},0===W?a.createElement("div",{className:F?K.Bt:K.Qp,onMouseEnter:eE,onMouseLeave:ey},a.createElement(f.o,{className:F?K.iB:$?K.u$:K.vF,text:ev??eb})):1!==W&&ee?a.createElement("div",{className:K.I0},a.createElement(A.L,{nodeField:l.R.OVERRIDDEN_SYMBOL_ID,currentValue:ee.defaultValue,instanceGUIDs:q})):a.createElement(L.xw,{className:c()(ex,t),recordingKey:m.Pt(G,"panelTitle",q.join("-")),onClick:ep?eS:eT,onMouseDown:j,doNotReserveSpaceForChevron:s},!D&&a.createElement(g.B,{className:K.$C,svg:V.A}),a.createElement("div",{"data-testid":"instance-panel-title-component-name",className:n||K.We},eb),!Y&&a.createElement(a.Fragment,null,!ep&&ek,eh&&a.createElement(g.B,{className:K.N1,width:"24px",height:"24px",svg:H.A,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,h.t)("design_systems.instance_panel.select_instance")}))),et.isShown&&et.id===J&&a.createElement(B.T,{selectedItems:ef,title:(0,h.t)("design_systems.instance_panel.swap_instance"),itemsToSwap:q,recordingKey:m.Pt(G,"instanceSwapPicker"),pickerType:_.Zl.INSTANCE_SWAP_PICKER,preferredItems:en,preferredValuesErrorComponent:ei,entrypointForLogging:U.S.InstancePickerEntrypoint.SELECTED_INSTANCE_SWAP}))}},914905:(e,t,n)=>{n.d(t,{b:()=>l,h:()=>i});var a=n(38580),r=n(766022);let i=(0,a.eU)(null),l=(0,a.eU)(r.GR.DEFAULT_EXPANDED)},270296:(e,t,n)=>{n.d(t,{GG:()=>f,IY:()=>m,M0:()=>v,NR:()=>g,P1:()=>E,RB:()=>T,S4:()=>y,aW:()=>p,d6:()=>u,fI:()=>_,iP:()=>d,ji:()=>C,tV:()=>b,ww:()=>w,zp:()=>h});var a=n(587670),r=n(91408),i=n(966712),l=n(369870),o=n(848661),s=n(147206),c=n(837746);let d=(0,r.jz)(c.uj0);function u(e){return e[a.ibQ.TRANSFORM_ITEM]||e[a.ibQ.VECTOR_ITEM]}function m(e,t,n,r,i){return!n.containsResponsiveSets&&(p(e,t,n,r)||i&&e[a.ibQ.TRANSFORM_ITEM])}function p(e,t,n,r){let i=n.numSelectedByType&&!!n.numSelectedByType.SLIDE;return!!(!t&&!i&&(n.propertiesPanelShouldShowAddAutoLayout||r?.propertiesPanelShouldShowAddAutoLayout||e[a.ibQ.STACK_ITEM]))}function _(e,t,n){return!!(!t&&e[a.ibQ.SELECTION_COLORS]&&(n.styles.length>0||n.paints.length>0||n.emptyDueToLimitExceeded))}function g(e){return!!e[a.ibQ.SCALE_ITEM]&&!(0,i.kc)().ee_scale_tool_show_all_panels}function f(e){return!g(e)&&!!e[a.ibQ.CONSTRAINTS_ITEM]}function h(e,t,n,a){return m(e,g(e),t,T(n)?n:void 0,a)}function E(e,t){return!!e[a.ibQ.EXPORT_ITEM]&&null!==t&&!(0,s.Pe)(t)&&!(0,l.MP)()}function y(e,t){return e.showUi&&!!t&&e.isReadOnly}function b(e,t){return!!e[a.ibQ.COMPONENT_ITEM]&&!(!(!t||(0,o.gl)(t))&&t.mode===a.iCO.STATE)}function v(e,t){return!!e[a.ibQ.INSTANCE_ITEM]&&!t}function C(e,t,n,r){return!g(e)&&!t.isReadOnly&&0===Object.keys(n).length&&!e[a.ibQ.FRAME_PRESETS]&&!r}function w(e,t,n){return!g(e)&&0===Object.keys(t).length&&!e[a.ibQ.FRAME_PRESETS]&&!n}function T(e){return e&&!!e.guid}},830002:(e,t,n)=>{n.d(t,{D5:()=>v,Tj:()=>b,lS:()=>C});var a=n(411855),r=n(188507),i=n(794272),l=n(153234),o=n(522739),s=n(236478),c=n(226055),d=n(848661),u=n(498606),m=n(538697),p=n(347495),_=n(994481),g=n(45148),f=n(731262),h=n(759209);let E={format:e=>e||f.xJ};function y(e){let{propertyValueEntries:t,selectedStatesPropertyValues:n,stateGroupPropertyValues:r,onSelectProperty:i,dropdownShown:f,hideErrorsPanel:y,dispatch:b,shouldIndent:v,extended:C}=e,w=(0,c.GS)(),T=a.useRef([]),S=a.useCallback(e=>{if(!T.current)return!1;let t=T.current[e];return!!t&&t.offsetWidth<t.scrollWidth},[]);return a.createElement(o.D8,{className:h.wG,"data-non-interactive":!0},t.length>0&&a.createElement("div",{className:w?void 0:h.em},t.map((t,o)=>{let{property:c,label:g}=t,y=n[c],x=r[c],k=h.Aq;v&&(k=C?h.aM:h.L8);let N=a.createElement("p",{ref:e=>T.current?.push(e),className:w?void 0:k,"data-tooltip-type":u.Ib.TEXT,"data-tooltip":S(o)?c:null},g),I="TOGGLE"===t.type?a.createElement(p.l,{toggleClassName:C?h.lV:h.E3,on:(0,d.hS)(y)?y===t.toggleTokenPair[0]:d.oV,onChange:e=>{i(c,t.toggleTokenPair[e?0:1])},recordingKey:l.Pt(e,`toggle-${c}`),forwardEventsToFullscreen:!0}):a.createElement(m.l6,{id:`states-property-select-${c}-${e.recordingKey}`,className:w?void 0:C?h.mi:h.ZE,property:y,formatter:E,onChange:e=>{i(c,e)},dispatch:b,dropdownShown:f,onMouseDown:()=>b(s.r),recordingKey:l.Pt(e,`select-${c}`)},[...x].map(t=>a.createElement(m.c$,{key:t,value:t,truncateInMiddle:!0,recordingKey:l.Pt(e,`select-${c}-option-${t}`)})));return w?a.createElement(_.cS,{key:c,label:N,input:I}):a.createElement(a.Fragment,{key:c},N,I)})),!y&&a.createElement(g.aq,null))}function b(e,t,n){let a=[{property:t,value:n}];for(let n of e)n.property!==t&&a.push({...n});return a}function v(e,t){let n=t.map(e=>e.toLowerCase()),a=null;if(2===t.length)for(let e of f.NE){let r=n.indexOf(e[0]),i=n.indexOf(e[1]);-1!==r&&-1!==i&&(a=[t[r],t[i]])}return a?{property:e,type:"TOGGLE",label:e,toggleTokenPair:a}:{property:e,type:"SELECT",label:e}}let C=a.memo(function(e){let{sortedProperties:t,stateGroupPropertyValues:n,selectedStatesPropertyValues:l,selectedStates:o,allStates:s,onSelectProperty:c,recordingKey:d,hideErrorsPanel:u,shouldIndent:m,extended:p}=e,_=(0,r.wA)(),{dropdownShown:g,sceneGraphSelection:h}=(0,i.R)(e=>({dropdownShown:e.dropdownShown,sceneGraphSelection:e.mirror.sceneGraphSelection})),[E,C]=a.useState([]);a.useEffect(()=>{C([])},[h]);let w=n?t.map(e=>v(e,n[e])):[];return a.createElement(y,{propertyValueEntries:w,selectedStatesPropertyValues:l,stateGroupPropertyValues:n,onSelectProperty:function(e,t){let n=b(E,e,t),a={};for(let r of o){let{propertyValues:i}=r.stateInfo,l={...i,[e]:t},o=(0,f.kz)(l,n,s);null!==o&&(a[r.symbol.node_id]=o)}c(a),C(n)},dropdownShown:g,recordingKey:d,hideErrorsPanel:u,dispatch:_,shouldIndent:m,extended:p})})},56315:(e,t,n)=>{n.d(t,{g:()=>c});var a=n(411855),r=n(629019),i=n.n(r),l=n(617453),o=n(100197),s=n(939791);let c=(0,a.forwardRef)(function({leftLabel:e,leftInput:t,rightLabel:n,rightInput:r,appendedClassName:l,...o},s){return a.createElement("div",{className:i()("ui3_slides_rows--ui3SlidesTwoInputRow--z1gLz ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",l),ref:s,...o,"data-non-interactive":!0},null!=e?a.createElement(d,null,e):null,a.createElement("div",{className:"ui3_slides_rows--ui3SlidesRowInput1--w4RUc","data-non-interactive":!0},t),null!=n?a.createElement(u,null,n):null,a.createElement("div",{className:"ui3_slides_rows--ui3SlidesRowInput2--YL2N7","data-non-interactive":!0},r))});function d({children:e,alwaysShowLabel:t}){return(0,o.J2)((0,l.UK)().showPropertyLabels)||t?a.createElement("span",{"aria-hidden":"true",className:"ui3_slides_rows--ui3SlidesRowLabelFirst--XzGgY ui3_rows--_ui3OrderedRowLabel--zh7nh ui3_rows--_ui3RowLabelBase--wNPq0","data-non-interactive":!0},e):a.createElement(s.my,null)}function u({children:e}){return(0,o.J2)((0,l.UK)().showPropertyLabels)?a.createElement("span",{"aria-hidden":"true",className:"ui3_slides_rows--ui3SlidesRowLabelSecond--AtE-a ui3_rows--_ui3OrderedRowLabel--zh7nh ui3_rows--_ui3RowLabelBase--wNPq0","data-non-interactive":!0},e):a.createElement(s.my,null)}},962264:(e,t,n)=>{n.d(t,{wu:()=>V,yj:()=>H});var a=n(411855),r=n(188507),i=n(730371),l=n(343887),o=n(404095),s=n(636149),c=n.n(s),d=n(737947),u=n(966712),m=n(153234),p=n(776621),_=n(163023),g=n(939863),f=n(632430),h=n(662275),E=n(617453),y=n(100197),b=n(234945),v=n(173454),C=n(498606),w=n(715762),T=n(507662),S=n(7959),x=n(538697),k=n(893606),N=n(901536),I=n(939791);let A=a.forwardRef(function({labelTx:e,input:t,icon:n},r){return a.createElement(I.fn,{ref:r,leftInput:a.createElement("span",{className:N.cx.textBodyMedium.pl1.flex.$},e),rightInput:t,icon:n,leftLabel:null,rightLabel:null})});var O=n(629019),L=n.n(O);let D=(0,a.forwardRef)(function({label:e,input:t,...n},r){return a.createElement(R,{label:e,input:t,inputSize:"normal",...n,ref:r})});(0,a.forwardRef)(function({label:e,input:t,...n},r){return a.createElement(R,{label:e,input:t,inputSize:"small",...n,ref:r})}),(0,a.forwardRef)(function({label:e,input:t,...n},r){return a.createElement(R,{label:e,input:t,inputSize:"large",...n,ref:r})});let R=(0,a.forwardRef)(function({label:e,input:t,inputSize:n,...r},i){let l=L()({"ui3_inline_label_input_rows--ui3LabelInputRow--5r770 ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu":!0,"ui3_inline_label_input_rows--ui3LabelInputSmall--s82mn":"small"===n,"ui3_inline_label_input_rows--ui3LabelInputNormal--dBjze":"normal"===n,"ui3_inline_label_input_rows--ui3LabelInputLarge--GYw7P":"large"===n});return a.createElement("div",{className:l,ref:i,...r,"data-non-interactive":!0},a.createElement("div",{className:"ui3_inline_label_input_rows--ui3RowInlineLabel--UavwX","data-non-interactive":!0},e),a.createElement("div",{className:"ui3_inline_label_input_rows--ui3RowInput--E7ksx","data-non-interactive":!0},t))});var M=n(564092),P=n(918061),F=n(261579),B=n(132208);class U extends x.l6{}class G extends x.c${}function K({modeOptions:e,inheritedModeID:t,isShowingGuids:n}){return{format:a=>{if(a===M.iw.LEARN_MORE)return(0,g.t)("variables.modes.option.learn_more");if(a===M.iw.REVIEW_UPDATES)return(0,g.t)("variables.modes.option.review_updates");if(a===M.UE){if(t===M.Mo)return(0,g.t)("variables.mode_properties_panel.select.option.auto_with_name",{modeName:(0,g.t)("variables.mode_properties_panel.select.option.mixed")});let n=e.find(e=>i.deepEquals(e.modeId,t))?.name;return n?(0,g.t)("variables.mode_properties_panel.select.option.auto_with_name",{modeName:n}):(0,g.t)("variables.mode_properties_panel.select.option.auto")}{if(a===M.Ws)return 0===e.length&&(0,p.x1)("variables","No mode options available"),(0,g.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:e[0].name??""});if(a===M.Mo)return(0,g.t)("variables.mode_properties_panel.select.option.mixed");if(a===M.Yn)return(0,g.t)("variables.mode_properties_panel.select.option.deleted");let t=e.find(e=>(0,i.deepEquals)(e.modeId,a));return t?n?`${t.name} (${t.modeId.guid})`:t.name:((0,p.x1)("variables","Option does not exist in modeOptions"),(0,g.t)("variables.mode_properties_panel.select.option.deleted"))}},isEqual:(e,t)=>(0,i.deepEquals)(e,t)}}function V({fill:e,showExplicitOnly:t,showInheritedModeOption:n,recordingKey:i}){let l=(0,r.wA)(),o=(0,M.kN)(),s=(0,M.iR)(),c=(0,M.d2)(),d=(0,y.J2)((0,E.UK)().showGuids),u=(0,r.d4)(b.qd),p=a.useMemo(()=>JSON.stringify(u),[u]),_=(0,M.hZ)(),g=Object.entries(o),h=a.useMemo(()=>g.sort(([e,t],[n,a])=>t.fileKey!==a.fileKey?t.fileKey?a.fileKey?t.fileKey.localeCompare(a.fileKey):1:-1:t.collectionName.localeCompare(a.collectionName)),[g]);return a.createElement(a.Fragment,null,h.map(([r,o])=>{let u=o.inheritMode,g=o.explicitMode;return a.createElement(H,{key:`variable-mode-entry-${r}-${t}-${p}`,fill:e,showExplicitOnly:t,variableSetName:o.collectionName,variableSetKey:r,modeOptions:o.modeOptions,inheritedModeID:u,explicitModeID:g,showInheritedModeOption:void 0===n||n,onChange:(e,t)=>{c[r]&&s[r]?l((0,f.Wo)({item:s[r],callback:t=>{_(r,e)}})):_(r,e,t)},isShowingGuids:d,recordingKey:m.Pt(i,`variableModeEntry-${t}`)})}))}function H(e){let{fill:t,showExplicitOnly:n,variableSetName:s,variableSetKey:p,modeOptions:f,explicitModeID:E,inheritedModeID:y,isShowingGuids:b,recordingKey:N,showInheritedModeOption:I,onChange:O}=e,L=(0,r.wA)(),R=(0,r.d4)(e=>e.dropdownShown),V=(0,M.ZP)(),H=(0,k.R)(),z=E&&E!==M.Mo&&f.every(e=>!(0,i.deepEquals)(e.modeId,E)),W=M.Ws;z?W=M.Yn:E?W=E:y&&(W=I?M.UE:y);let j=K({modeOptions:f,inheritedModeID:y,isShowingGuids:b}).format(W),[$,q]=a.useState(n),Y=a.useCallback((e,t,n)=>{O(e,n),void 0!==t&&q(t)},[O]),X=a.useMemo(()=>(function(e,t,n,r){let i=[];if(0===t.length)return i;let l=c()(t,e=>e.modeId.collectionKey),o=!!(0,u.kc)().ds_variables_relax_modes,s=a.createElement("div",{className:F.Z7},a.createElement(_.B,{className:F.G,svg:B.A}));return Object.entries(l).map(([t,r])=>{for(let l of(i.length>0&&r.length>0&&i.push(a.createElement(x.sK,null)),r))i.push(a.createElement(G,{key:`mode-option-${t}-${l.modeId.guid}-${n}`,value:l.modeId,recordingKey:m.Pt(e,`varSetSelect=${t}`,`value=${l.modeId.guid}`,`varSetKey=${t}`),disabled:!o&&!l.isCompatible,fullWidth:!0,rightSettingsIcon:o&&!l.isCompatible?s:void 0}))}),o&&t.some(e=>!e.isCompatible)&&(i.push(a.createElement(x.sK,null)),r===M.iw.REVIEW_UPDATES?i.push(a.createElement(G,{key:"incompatible-modes-updates",value:M.iw.REVIEW_UPDATES,iconToReplaceCheck:s,recordingKey:m.Pt(e,"incompatible-modes-review-updates"),additionalStylesClassName:F.cF})):r===M.iw.LEARN_MORE&&i.push(a.createElement(G,{key:"incompatible-modes-learn-more",value:M.iw.LEARN_MORE,iconToReplaceCheck:s,recordingKey:m.Pt(e,"incompatible-modes-learn-more"),additionalStylesClassName:F.cF}))),i})(N,f,n,V),[N,f,n,V]);if(f.length<2||$&&!E)return null;let J=W===M.Mo,Z=function(e,t,n,r,i,l){let o=[];return n&&o.push(a.createElement(G,{key:M.Mo,value:M.Mo,recordingKey:m.Pt(e,"value:MIXED"),selected:!0}),a.createElement(x.sK,null)),r?i&&o.push(a.createElement(G,{key:M.UE,value:M.UE,recordingKey:m.Pt(e,"value:INHERIT")}),a.createElement(x.sK,null)):l.length>0&&o.push(a.createElement(G,{key:M.Ws,value:M.Ws,recordingKey:m.Pt(e,"value:DEFAULT"),disabled:!l[0].isCompatible,selected:t===M.Ws}),a.createElement(x.sK,null)),t===M.Yn&&o.push(a.createElement(G,{key:M.Yn,value:M.Yn,recordingKey:m.Pt(e,"value:DELETED"),disabled:!0,selected:!0})),o}(N,W,J,!!y,I,f),Q=a.createElement(U,{fill:t,id:`var-set-mode-${p}-${n}`,dropdownWidth:200,dropdownAlignment:"right",dispatch:L,inputClassName:H?P.UZ:void 0,chevronClassName:H?P.ai:void 0,dropdownShown:R,formatter:K({modeOptions:f,inheritedModeID:y,isShowingGuids:b}),property:W,recordingKey:m.Pt(N,`varSetSelect=${p}`),onChange:e=>{e===M.iw.LEARN_MORE?d.Ay.unsafeRedirect(M.Yc,"_blank"):e===M.iw.REVIEW_UPDATES?L(h.to({type:T.T,data:{initialTab:v.Wv.UPDATES,entrypoint:w.r6.VARIABLE_MODE_INCOMPATIBLE_REVIEW_UPDATES_DROPDOWN_OPTION}})):Y(e,!1,K({modeOptions:f,inheritedModeID:y,isShowingGuids:b}).format(e))},tooltip:j},...Z,...X);if(H){let e=a.createElement("span",{className:F.$6,"data-testid":"variableModeEntry"},s);return I?a.createElement(A,{labelTx:e,input:Q,icon:a.createElement(l.K,{"aria-label":(0,g.t)("general.remove"),onClick:()=>Y("INHERIT",!0),actionOnPointerDown:!0,htmlAttributes:{"data-tooltip":(0,g.t)("general.remove"),"data-tooltip-type":C.Ib.TEXT}},a.createElement(o.f,null))}):a.createElement(D,{label:e,input:Q})}return a.createElement(S.fI,{className:F.nM,dataTestId:"variableModeEntry"},a.createElement("div",{className:F.o3},s),a.createElement("div",{className:F.mq},Q))}},25397:(e,t,n)=>{n.d(t,{Hj:()=>z,W$:()=>H,ry:()=>V});var a=n(411855),r=n(188507),i=n(459401),l=n(634832),o=n(851061),s=n(675678),c=n(629019),d=n.n(c),u=n(776250),m=n(966712),p=n(498750),_=n(563706),g=n(153234),f=n(776621),h=n(163023),E=n(939863),y=n(738269),b=n(293017),v=n(697551),C=n(356390),w=n(147206),T=n(215822),S=n(384792),x=n(227712),k=n(829632),N=n(947087),I=n(561004),A=n(978527),O=n(99888),L=n(236373),D=n(720756),R=n(193990),M=n(722511),P=n(125906),F=n(774419),B=n(377849);let U="Loading suggestions...";function G(e){(0,l.assert)(null!==e,"We should never be in the middle state if there are no optional parameters")}class K extends g.o6{constructor(e){let t;if(super(e),this.searchInputRef=a.createRef(),this.scrollContainerRef=a.createRef(),this.searchBarRef=a.createRef(),this.primaryPlaceholderTextRef=a.createRef(),this.ranWithParameters=!1,this.runArgs=null,this.loadingTimerID=null,this.pendingLoadingMessage=null,this.firstOptionalIndex=null,this.eventID=0,this.onSuggestions=e=>{switch(e.type){case"SUGGESTIONS":{let t=this.getDropdownItems(e.suggestions,this.state.searchQuery,this.state.activeParameterIndex),n=t.findIndex(e=>(function(e){return"freeform"!==e&&"skip"!==e})(e)),a=n>=0?n:this.state.activeItemIndex,r=t.length||!this.state.searchQuery?null:(0,E.t)("fullscreen_actions.no_matches");this.clearLoadingMessage(),this.setState({activeItemIndex:a,items:t,errorMessage:r});break}case"ERROR":this.clearLoadingMessage(),this.setState({items:this.getDropdownItems([],this.state.searchQuery,this.state.activeParameterIndex),errorMessage:e.message||(0,E.t)("fullscreen_actions.no_matches")});break;case"LOADING":this.setLoadingMessage(e.message)}},this.onBackspace=()=>{let e=this.state.activeParameterIndex,t=null;if("middle"===e){if(G(this.firstOptionalIndex),0===this.firstOptionalIndex){this.props.onExitParameterEntry();return}t=this.firstOptionalIndex-1}else if("final"===e)t=this.props.parameters.length-1;else{if(0===e){this.props.onExitParameterEntry();return}t=e-1}let n={...this.state.parameterValues},a=this.getParameterForIndex(t)?.key;a&&delete n[a],this.setParameterIndex(t,n)},this.onTextChange=e=>{let t;let n=this.state.activeParameterIndex;if("middle"===n)G(this.firstOptionalIndex),t=this.firstOptionalIndex;else{if("final"===n)return;t=n}let a=this.props.parameters[t];this.triggerInputEvent({parameterValues:this.state.parameterValues,currentParameter:a,currentSearchQuery:e}),this.setLoadingMessage(U),this.setState({searchQuery:e,items:this.getDropdownItems([],e,t),activeItemIndex:0,activeParameterIndex:t,mouseMoved:!1,errorMessage:""})},this.onSelectItem=(e,t)=>{let n;let a=this.state.activeParameterIndex;if("final"===a){"enter"===t&&this.launchPluginWithParameters(this.state.parameterValues);return}let r={...this.state.parameterValues};if("middle"!==a){if(0===this.state.items.length)return;let n=this.props.parameters[a];if(e<0||e>=this.state.items.length){let r="Trying to select suggestion at invalid index";console.error(r),(0,f.Lo)("PluginParameterEntry","invalid index",{index:e,items:this.state.items.length,currentIndex:a,parameter:n.name,keyPress:t}),(0,f.$D)(s.FigmaTeam.EXTENSIBILITY,Error(r));return}let i=this.state.items[e];"skip"===i||("freeform"===i?r[n.key]={name:this.state.searchQuery}:((0,l.assertDev)(!this.state.loadingMessage,"Selected item while loading"),r[n.key]=i))}let i=this.firstOptionalIndex;if("middle"===a){if(G(this.firstOptionalIndex),"enter"===t){this.launchPluginWithParameters(r);return}n=this.firstOptionalIndex}else if(a===this.props.parameters.length-1){if("enter"===t){this.launchPluginWithParameters(r);return}n="final"}else n=null!==i&&a===i-1?"tab"===t?i:"middle":a+1;this.setParameterIndex(n,r),this.searchInputRef.current.focus()},this.onKeyDown=g.C0(this,"keydown",e=>{let t=e=>{let t=this.state.activeItemIndex+e;return t<0?this.state.items.length-1:t%this.state.items.length},n=_.Ay.mac?(0,p.vN)(e,p.xH.META):(0,p.vN)(e,p.xH.CONTROL);switch(e.keyCode){case p.Uz.ENTER:e.preventDefault(),this.onSelectItem(this.state.activeItemIndex,"enter");break;case p.Uz.TAB:e.preventDefault(),this.onSelectItem(this.state.activeItemIndex,"tab");break;case p.Uz.DOWN_ARROW:if(e.preventDefault(),this.state.items.length>0){let e=t(1);this.setState({activeItemIndex:e}),this.scrollContainerRef.current?.scrollElementAtIndexIntoView(e)}break;case p.Uz.UP_ARROW:if(e.preventDefault(),this.state.items.length>0){let e=t(-1);this.setState({activeItemIndex:e}),this.scrollContainerRef.current?.scrollElementAtIndexIntoView(e)}break;case p.Uz.BACKSPACE:0===this.state.searchQuery.length?(e.preventDefault(),this.onBackspace(),e.stopPropagation()):("final"===this.state.activeParameterIndex||"middle"===this.state.activeParameterIndex)&&e.preventDefault();break;case p.Uz.ESCAPE:e.preventDefault(),this.props.dispatch(y.oB());break;case p.Uz.P:case p.Uz.FORWARD_SLASH:n&&(e.preventDefault(),this.props.dispatch(y.oB()));break;case p.Uz.EQUALS:case p.Uz.DASH:n&&(e.preventDefault(),"-"===e.key?C.Y5.triggerAction("zoom-out"):C.Y5.triggerAction("zoom-in"));break;case p.Uz.R:case p.Uz.S:case p.Uz.D:case p.Uz.E:case p.Uz.F:case p.Uz.O:if(n){e.preventDefault();let t=this.state.searchQuery+e.key;this.onTextChange(t)}}}),this.onSearchChange=g.Z7(this,"change",e=>{let t=e.currentTarget.value;this.onTextChange(t)}),this.renderResult=(e,t,n)=>{let r,i="",l="";return"skip"===t?(i=`Skip "${e.name}"`,l="skip"):"freeform"===t?(i=this.state.searchQuery,l="skip"):(i=t.name,l=t.name,r=j(t,P.ZR)),a.createElement(W,{recordingKey:g.Pt(this.props,"suggestion",l),active:n===this.state.activeItemIndex,key:n,suggestion:i,onClick:e=>this.onSelectItem(n,"enter"),onMouseMove:()=>{this.state.mouseMoved||this.setState({mouseMoved:!0,activeItemIndex:n})},icon:r,onMouseEnter:()=>{this.state.mouseMoved&&this.setState({activeItemIndex:n})}})},(0,f.Lo)("PluginParameterEntry","Starting parameter entry for plugin",{parameters:e.parameters,displayName:e.displayName,parameterOnly:e.parameterOnly,pluginId:e.pluginId,pluginLocalFileId:e.pluginLocalFileId,command:e.command}),0===e.parameters.length)throw Error("Must specify at least one parameter");let n=e.parameters.findIndex(e=>e.optional);this.firstOptionalIndex=n<0?null:n,t=e.initialParameterValues?"final":e.parameters[0].optional?"middle":0,this.handler=this.runPlugin();let r=this.getParameterForIndex(t);r&&this.triggerInputEvent({parameterValues:{},currentParameter:r,currentSearchQuery:""}),this.setLoadingMessage("Loading plugin..."),this.state={searchQuery:"",items:[],errorMessage:null,loadingMessage:null,activeItemIndex:0,parameterValues:e.initialParameterValues||{},activeParameterIndex:t,mouseMoved:!1,hidePluginName:!1}}getParameterForIndex(e){return"middle"===e||"final"===e?null:this.props.parameters[e]}getCurrentParameter(){return this.getParameterForIndex(this.state.activeParameterIndex)}runPlugin(){let e=null;if(this.props.pluginId?this.props.allSavedPlugins[this.props.pluginId]?e=this.props.allSavedPlugins[this.props.pluginId]:this.props.publishedPlugins[this.props.pluginId]&&(e=(0,T.uF)(this.props.publishedPlugins[this.props.pluginId])):this.props.pluginLocalFileId&&(e=this.props.localExtensions[this.props.pluginLocalFileId]),!e)throw Error("Plugin not runnable");let{canRun:t}=(0,T.JT)({plugin:e,editorType:this.props.editorType});if(!t)throw Error("Plugin not runnable");this.runArgs={plugin:e,command:this.props.command||"",queryMode:!0,runMode:"default",triggeredFrom:"parameter-entry",openFileKey:this.props.openFile?.key||"",deferRunEvent:!0,isWidget:!1};let n=(0,x.D)();return k.R.instance.enqueue({mode:"run-forever",runPluginArgs:this.runArgs}),n}async triggerInputEvent(e){this.eventID++;let t=this.eventID,n=await this.handler;this.eventID===t&&n.triggerParameterInputEvent({...e,onSuggestions:e=>{this.eventID===t&&this.onSuggestions(e)}})}updateLayout(){let e=0===this.state.activeParameterIndex&&!this.props.parameters[0].optional;if(void 0===this.state.placeholderWidth&&!e){if(this.primaryPlaceholderTextRef.current){let e=Math.min(250,Math.max(this.primaryPlaceholderTextRef.current.offsetWidth,120));this.setState({placeholderWidth:e})}else this.setState({placeholderWidth:0})}let t=this.searchBarRef.current,n=t.offsetWidth<t.scrollWidth;e||!n||this.state.hidePluginName||this.setState({hidePluginName:!0}),t.scrollLeft=t.scrollWidth}componentDidMount(){super.componentDidMount(),(0,u.sx)(D.yh,(0,D.ov)({...this.props,qaVersion:O.U3})),this.searchInputRef.current.focus(),this.updateLayout()}componentDidUpdate(e,t){super.componentDidUpdate(e,t),this.updateLayout()}componentWillUnmount(){super.componentWillUnmount(),this.ranWithParameters||(0,I.wY)();let e=(0,D.O8)(this.props.parameters,this.state.parameterValues);this.ranWithParameters&&e.requiredEntered!==e.requiredCount&&((0,f.Lo)("PluginParameterEntry","Parameter entry mismatch",{requiredParameters:this.props.parameters,parameterValues:this.state.parameterValues}),(0,f.$D)(s.FigmaTeam.EXTENSIBILITY,Error("Plugin ran successfully with parameters, but not all parameters were recorded")));let t=(0,D.ov)({...this.props,qaVersion:O.U3});(0,u.sx)(D.rj,{...t,success:this.ranWithParameters,parametersEntered:e.entered,requiredParametersEntered:e.requiredEntered,optionalParametersEntered:e.optionalEntered})}getDropdownItems(e,t,n){if("middle"===n||"final"===n)return[];let a=e.slice(),r=this.props.parameters[n];t.length>0&&r.allowFreeform&&a.unshift("freeform");let i=this.props.parameters[n];return 0===t.length&&i.optional&&a.unshift("skip"),a}setLoadingMessage(e){if(this.loadingTimerID){this.pendingLoadingMessage=e;return}this.pendingLoadingMessage=e,this.loadingTimerID=setTimeout(()=>{this.setState({loadingMessage:this.pendingLoadingMessage}),this.loadingTimerID=null,this.pendingLoadingMessage=null},300)}clearLoadingMessage(){this.loadingTimerID&&(clearTimeout(this.loadingTimerID),this.loadingTimerID=null),this.setState({loadingMessage:null})}setParameterIndex(e,t){let n=this.getParameterForIndex(e);n&&((0,f.Lo)("PluginParameterEntry","setParameterIndex",{nextParameter:n.name}),this.triggerInputEvent({parameterValues:t,currentParameter:n,currentSearchQuery:""}));let a=!(0===e&&!this.props.parameters[0].optional)&&this.state.hidePluginName;this.searchInputRef.current.focus(),this.setLoadingMessage(U),this.setState({searchQuery:"",items:this.getDropdownItems([],"",e),activeItemIndex:0,activeParameterIndex:e,parameterValues:t,mouseMoved:!1,errorMessage:null,placeholderWidth:void 0,hidePluginName:a})}launchPluginWithParameters(e){if(this.setState({parameterValues:e}),this.handler.then(async t=>{let{isCancelled:n}=await (0,N.y)(this.runArgs);n||t.triggerRunEvent({command:"parameters",parameters:e})}),this.runArgs){let t=this.runArgs;if(this.runArgs=null,t.queryMode=!1,t.deferRunEvent=!1,t.parameterValues=e,this.props.recentlyUsedCommandName){let e=this.props.recentlyUsedCommandName;this.props.dispatch(b.Rw({currentDisplayName:e,newCommand:{displayName:e,runPluginArgs:t}})),(0,m.kc)().qa_frecency_recents_sync&&(0,L.s)({recentlyUsedQuickCommandsDB:this.props.recentlyUsedQuickCommandsDB,displayText:e,runPluginArgs:t})}(0,S.C3)(t)}this.ranWithParameters=!0,this.props.dispatch(y.oB())}renderResults(){if("middle"===this.state.activeParameterIndex)return a.createElement("div",{className:M.wM},a.createElement("div",{className:M.FV},a.createElement("div",{className:M.h8},(0,E.tx)("fullscreen_actions.plugin_parameters.tab")),a.createElement("div",{className:M.w8},(0,E.tx)("fullscreen_actions.plugin_parameters.to_enter_optional_parameters"))),a.createElement("div",{className:M.FV},a.createElement("div",{className:M.h8},(0,E.tx)("fullscreen_actions.plugin_parameters.enter")),a.createElement("div",{className:M.w8},(0,E.tx)("fullscreen_actions.plugin_parameters.to_run_plugin"))));if("final"===this.state.activeParameterIndex)return null;let e=this.props.parameters[this.state.activeParameterIndex],t=null;if(this.state.errorMessage?t=a.createElement("div",{className:P.Tk},this.state.errorMessage):this.state.loadingMessage&&(t=a.createElement("div",{className:P.Tk},this.state.loadingMessage)),0===this.state.items.length)return t;let n=t?this.state.items.length+1:this.state.items.length;return a.createElement(R.h,{ref:this.scrollContainerRef,resultCount:n},this.state.items.map((t,n)=>this.renderResult(e,t,n)),t)}renderCurrentParameters(){let e=this.getCurrentParameter()?.key,t=z(this.props.parameters,this.state.parameterValues,e);return a.createElement(a.Fragment,null,a.createElement(H,{key:"plugin-name",value:this.state.hidePluginName?void 0:this.props.displayName,icon:function(e,t,n){if(!n)return a.createElement(h.B,{className:M.nW,svg:F.A,ariaLabel:"plugin icon"});{let r=e[n];return r||(r=t[n]&&(0,T.uF)(t[n])),a.createElement(A.V,{className:M.nW,plugin:r,alt:"plugin icon"})}}(this.props.allSavedPlugins,this.props.publishedPlugins,this.props.pluginId)}),t)}placeholderElement(){let e=this.state.activeParameterIndex,t=this.state.searchQuery.length>0;if("final"===e)return a.createElement(a.Fragment,null);if("middle"===e){let e=(0,i.removeNullish)(this.props.parameters.map(e=>e.optional?e.name:null)).join(", ");return a.createElement("span",{ref:this.primaryPlaceholderTextRef},(0,E.tx)("fullscreen_actions.plugin_parameters.optional_optional_names",{optionalNames:e}))}{let n=this.props.parameters[e],r=this.props.parameters.slice(e);if(n.optional){let e=r.map(e=>e.name);return t&&(e[0]=""),a.createElement("span",{ref:this.primaryPlaceholderTextRef},e.join(", "))}{let e=(0,i.removeNullish)(r.map(e=>e.optional?null:e.name)),n=(0,i.removeNullish)(r.map(e=>e.optional?e.name:null));return t&&(e[0]=""),a.createElement("span",null,a.createElement("span",{ref:this.primaryPlaceholderTextRef},e.join(", ")),n.length>0&&a.createElement(a.Fragment,null,a.createElement("span",{className:M.yL,key:"divider"},"|"),a.createElement("span",{key:"optionalParams"},(0,E.tx)("fullscreen_actions.plugin_parameters.optional_optional_names",{optionalNames:n.join(", ")}))))}}}render(){let e=this.getCurrentParameter(),t=e?.description,n=this.placeholderElement(),r="final"===this.state.activeParameterIndex?M.ed:M.Kf,i={minWidth:this.state.placeholderWidth?`${this.state.placeholderWidth}px`:void 0},l=this.renderResults();return a.createElement(R.H,{recordingKey:this.props.recordingKey||"",onKeyDown:this.onKeyDown},a.createElement("div",{className:P.$P},a.createElement(h.B,{svg:B.A,className:P.qc}),a.createElement("div",{className:M.ON,ref:this.searchBarRef},this.renderCurrentParameters(),a.createElement("div",{className:r},a.createElement("input",{ref:this.searchInputRef,className:M.t6,onChange:this.onSearchChange,value:this.state.searchQuery,maxLength:150,spellCheck:!1,style:i}),a.createElement("div",{className:M.l4},a.createElement("div",{className:M.qf},a.createElement("span",{className:M.CZ},this.state.searchQuery),n))))),!!t&&a.createElement("div",{className:d()({[M.WL]:!0,[M.$8]:!l})},t),l)}}K.displayName="PluginParameterEntry";let V=(0,r.Ng)(function(e){let t=e.selectedView.editorType;return{openFile:e.openFile,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets,allSavedPlugins:e.installedPluginVersions.plugins,localExtensions:e.localPlugins,orgEntity:(0,v.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,editorType:t,userCanRunPlugins:(0,w.GP)(e),activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin}},function(e){return{dispatch:e}})(K);function H(e){return a.createElement("div",{className:M.Io},e.icon&&a.createElement("span",null,e.icon),e.value&&a.createElement("span",null,e.value))}function z(e,t,n){return e.filter(e=>t[e.key]&&e.key!==n).map(e=>t[e.key]&&t[e.key].name&&a.createElement(H,{icon:j(t[e.key],M.nW),key:e.key,value:t[e.key].name}))}class W extends g.o6{constructor(){super(...arguments),this.onClick=g.cZ(this,"click",e=>{if(!this.props.onClick)return g.aH;this.props.onClick(e)})}render(){let e=`${this.props.active?P.ix:P.Ke}`;return a.createElement("div",{className:e,onClick:this.onClick,onMouseMove:this.props.onMouseMove,onMouseEnter:this.props.onMouseEnter},a.createElement("div",{className:P.EA},this.props.icon),a.createElement("div",{className:M.iu},a.createElement("div",{className:P.D6},this.props.suggestion)))}}function j(e,t){let n="";if(e.iconUrl)n=e.iconUrl;else if(e.icon&&"string"==typeof e.icon)n="data:image/svg+xml;base64,"+o.encodeString(e.icon);else{if(!e.icon||"string"==typeof e.icon)return;n="data:application/octet-stream;base64,"+o.encode(e.icon)}return a.createElement($,{className:t,src:n})}W.displayName="ParameterSuggestion";class $ extends g.o6{render(){let e=new URL(this.props.src);return e.hostname===window.location.hostname?((0,f.$D)(s.FigmaTeam.EXTENSIBILITY,Error("same-origin URL blocked in UntrustedImage")),a.createElement(a.Fragment,null)):["https:","http:","data:","blob:"].includes(e.protocol)?a.createElement("img",{src:this.props.src,className:this.props.className,crossOrigin:"anonymous",alt:""}):((0,f.$D)(s.FigmaTeam.EXTENSIBILITY,Error("Unexpected protocol blocked in UntrustedImage")),a.createElement(a.Fragment,null))}}$.displayName="UntrustedImage"},860809:(e,t,n)=>{n.d(t,{_:()=>m,h:()=>u});var a=n(411855),r=n(730371),i=n(358145),l=n(163023),o=n(25397),s=n(722511),c=n(125906),d=n(553551);function u({itemPath:e}){let t=a.useRef(null),n=a.useRef(null),o=a.useRef(null),s=a.useRef(null),[u,m]=a.useState("full"),p=(0,i.ZC)(e);a.useLayoutEffect(()=>{(0,r.deepEquals)(e,p)||"full"===u||m("full"),"full"===u&&_()},[p,e,u]);let _=()=>{let e=n.current?.offsetWidth,a=s.current?.offsetWidth,r=o.current?.offsetWidth,i=t.current?.scrollWidth,l=t.current?.clientWidth;void 0!==e&&void 0!==a&&void 0!==r&&i&&l&&l<i&&(e+a>l?m("plugin"):m("path"))};if(1===e.length)return a.createElement("span",{ref:s},e[0]);let g=e.slice(1,e.length-1),f=a.createElement(l.B,{svg:d.A,className:c.VU,dataTestId:"rightChevron"}),h=a.createElement("span",{ref:n},"plugin"===u?"...":e[0],f),E=a.createElement("span",{ref:o},"plugin"!==u&&a.createElement(a.Fragment,null,"path"===u?a.createElement(a.Fragment,null,"...",f):g.map((e,t)=>a.createElement("span",{key:t},e," ",f))));return a.createElement("div",{ref:t,className:c.D6},h,E,a.createElement("span",{ref:s},e[e.length-1]))}function m({runPluginArgs:e,itemParameterArgs:t}){let[n,r]=a.useState(!1),i=a.useRef(null);a.useEffect(()=>{let e=i.current;e&&e.offsetWidth<e.scrollWidth&&!n&&r(!0)},[n]);let l=e.parameterValues;if(l){let e=t.parameters,r=(0,o.Hj)(e,l);return a.createElement("div",{className:s.ON,ref:i,"data-testid":"parameter-display"},a.createElement(o.W$,{key:"plugin-name",value:n?void 0:t.displayName}),r)}return a.createElement(a.Fragment,null)}},193990:(e,t,n)=>{n.d(t,{H:()=>d,h:()=>u});var a=n(411855),r=n(153234),i=n(268537),l=n(355819),o=n(259927),s=n(233890),c=n(125906);class d extends r.o6{constructor(e){super(e),this.onKeyDownFromFullscreen=e=>{e.accept(),this.props.onKeyDown(e.event)},this.onContainerClick=e=>{e.stopPropagation()}}componentDidMount(){super.componentDidMount(),document.addEventListener("keydown",this.props.onKeyDown)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("keydown",this.props.onKeyDown)}render(){let e={left:window.innerWidth/2-200,top:window.innerHeight/8,width:400};return a.createElement(s.vL,{name:this.props.recordingKey||"",handleKeyDown:this.onKeyDownFromFullscreen,focusOnMount:!0},a.createElement(i.ms,{className:`${c.DU} ${o.Dm}`,style:e,"data-testid":this.props["data-testid"],onClick:this.onContainerClick},a.createElement("div",null,this.props.children)))}}class u extends r.o6{constructor(e){super(e),this.scrollContainerRef=a.createRef()}scrollElementAtIndexIntoView(e){if(this.props.resultCount>=10){let t=this.scrollContainerRef.current.getScrollTop(),n=32*e,a=32*e+32;n<t?this.scrollContainerRef.current.scrollTo(n):a>t+304&&this.scrollContainerRef.current.scrollTo(a-304)}}render(){let e=this.props.resultCount,t=Math.min(Math.max(e,1),10);return a.createElement(l.P,{ref:this.scrollContainerRef,width:400,height:32*t+(e>=10?-16:8),hideScrollbar:!0,role:this.props.role,contentId:this.props.id},this.props.children,a.createElement("div",{style:{height:8}}))}}},213690:(e,t,n)=>{n.d(t,{X:()=>o});var a=n(169006),r=n(99888),i=n(999140);function l(e){return{key:(0,a.ee)(e),isDisabled:!!e.disabled,resultType:e.pluginId||e.pluginLocalFileId?r.l4.EXTENSION:r.l4.ACTION}}function o(e){let t=new Map;e.forEach(e=>{let n=e.category??"";t.has(n)||t.set(n,[]),t.get(n)?.push(e)});let n=[];for(let[e,a]of t.entries())n.push({name:e,actions:a.map(l)});return(0,i.i6)(n)}},79284:(e,t,n)=>{n.d(t,{l:()=>db});var a={};n.r(a),n.d(a,{button:()=>cC,buttonContent:()=>cS,buttonText:()=>cT,destructive:()=>cP,destructiveLink:()=>cG,destructiveSecondary:()=>cF,fauxFocus:()=>cL,icon:()=>cw,largeSize:()=>cN,largeWideSize:()=>cA,link:()=>cU,outlineStyle:()=>cO,primary:()=>cR,regularSize:()=>ck,secondary:()=>cM,shortcut:()=>cx,signup:()=>cB,solidStyle:()=>cD,wideSize:()=>cI});var r=n(411855),i=n(188507),l=n(675678),o=n(69814),s=n(374626),c=n(192437),d=n(392592),u=n(706966),m=n(222478);function p(e={}){return{defaultViewModuleHeight:e.defaultViewModuleHeight??m.wC,defaultViewTabsAvailable:e.defaultViewTabsAvailable??!1,defaultViewAssetsTabVisible:e.defaultViewAssetsTabVisible??!1}}let _=(0,r.createContext)(p()),g=_.Provider;var f=n(384775),h=n(587670),E=n(344780),y=n(320063),b=n(358145),v=n(646240),C=n(635897),w=n(69961),T=n(432704),S=n(756085),x=n(886119),k=n(719624),N=n(315964),I=n(486788),A=n(562432),O=n(99888),L=n(65633),D=n(999140),R=n(891487),M=n(629019),P=n.n(M),F=n(91408),B=n(560945),U=n(259927),G=n(726864),K=n(724790),V=n(371325),H=n(837746),z=n(125476);let W=(0,F.jz)(H.j4N);function j(e){let t=r.useRef(null),n=(0,v.Xr)(k.fq),a=(0,B.w)(t),i=(0,G.xn)();(0,r.useEffect)(()=>(a?.height&&n(a.height),()=>{n(0)}),[a,n]);let[l]=(0,s.fp)(k.Sf),o=l?.current?.getBoundingClientRect(),c=!!(o&&o.height>0),d=(0,r.useMemo)(()=>c?{bottom:W+i+(o?.height||0)+8}:null,[i,c,o?.height]);return r.createElement(r.Fragment,null,r.createElement("div",{ref:t,style:{bottom:72,...d},className:P()([V.tT,U.Dm]),"data-testid":"quick-actions-v2"},r.createElement(q,null,e.children)))}function $(e){return r.createElement(j,null,e.children)}function q(e){let t=(0,K.x)(),n=r.useRef(null),a=(0,v.Xr)(k.IH);(0,r.useEffect)(()=>(n.current&&a(n),()=>{a(null)}),[a]);let i=Math.max(t??0,396);return r.createElement("div",{ref:n,style:{maxWidth:z.X,minWidth:i},className:P()([V.N8,U.Dm]),"data-cancel-insertable-resource-drag-and-drop":"true"},e.children)}var Y=n(634832),X=n(966712),J=n(498750),Z=n(860601),Q=n(153234),ee=n(743282),et=n(901536),en=n(939863),ea=n(743905),er=n(225266),ei=n(335682),el=n(147206),eo=n(48515),es=n(56063),ec=n(132572),ed=n(38329),eu=n(54025),em=n(30075),ep=n(695426),e_=n(959686),eg=n(849232),ef=n(570428),eh=n(954244),eE=n(927457),ey=n(434228);function eb(e){return(0,ey.O)()?r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9.722 7.5h.414l.293-.293.935-.935a.9.9 0 0 1 1.272 0l.935.935.293.293H15.6a.9.9 0 0 1 .9.9v1.736l.293.293.935.935a.9.9 0 0 1 0 1.272l-.935.935-.293.293V15.6a.9.9 0 0 1-.9.9h-1.736l-.293.293-.935.934a.9.9 0 0 1-1.272 0l-.935-.934-.293-.293H8.4a.9.9 0 0 1-.9-.9v-1.736l-.293-.293-.935-.935-.707.708.707-.708a.9.9 0 0 1 0-1.272l.935-.935.293-.293V8.4a.9.9 0 0 1 .9-.9zm-4.157 3.156a1.9 1.9 0 0 0 0 2.688l.935.934V15.6c0 1.05.85 1.9 1.9 1.9h1.322l.934.935a1.9 1.9 0 0 0 2.688 0l.934-.935H15.6a1.9 1.9 0 0 0 1.9-1.9v-1.322l.935-.934a1.9 1.9 0 0 0 0-2.687l-.935-.935V8.4a1.9 1.9 0 0 0-1.9-1.9h-1.322l-.934-.935a1.9 1.9 0 0 0-2.687 0l-.935.935H8.4a1.9 1.9 0 0 0-1.9 1.9v1.322zm7.351-1.379a.5.5 0 1 0-.832-.554l-2 3a.5.5 0 0 0 .416.777h2.066l-1.482 2.223a.5.5 0 0 0 .832.554l2-3a.5.5 0 0 0-.416-.777h-2.066z",clipRule:"evenodd"})):r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9.22 6.997h.413l.293-.293.934-.935a.9.9 0 0 1 1.273 0l.935.935.292.293h1.737a.9.9 0 0 1 .9.9v1.736l.293.293.934.935a.9.9 0 0 1 0 1.272l-.934.935-.293.293v1.736a.9.9 0 0 1-.9.9H13.36l-.293.293-.935.935a.9.9 0 0 1-1.272 0l-.936-.936-.293-.292H7.897a.9.9 0 0 1-.9-.9V13.36l-.293-.293-.935-.935a.9.9 0 0 1 0-1.272l.935-.935.293-.293V7.897a.9.9 0 0 1 .9-.9zm0-1 .933-.935a1.9 1.9 0 0 1 2.687 0l.935.935h1.322c1.05 0 1.9.85 1.9 1.9v1.322l.934.934a1.9 1.9 0 0 1 0 2.688l-.934.934v1.322a1.9 1.9 0 0 1-1.9 1.9h-1.322l-.935.935a1.9 1.9 0 0 1-2.687 0l-.935-.935H7.897a1.9 1.9 0 0 1-1.9-1.9v-1.322l-.935-.934a1.9 1.9 0 0 1 0-2.687l.935-.935V7.897c0-1.05.85-1.9 1.9-1.9zm3.193 2.78a.5.5 0 1 0-.832-.554l-2 3a.5.5 0 0 0 .416.777h2.066l-1.482 2.223a.5.5 0 1 0 .832.554l2-3a.5.5 0 0 0-.416-.777H10.93z",clipRule:"evenodd"}))}var ev=n(137035),eC=n(126049),ew=n(776621),eT=n(30637),eS=n(638889),ex=n(163023),ek=n(501114),eN=n(324597),eI=n(419527),eA=n(921472),eO=n(124271),eL=n(728325),eD=n(617453),eR=n(29680),eM=n(694687),eP=n(100197),eF=n(215822),eB=n(829632),eU=n(516703),eG=n(376485),eK=n(498606),eV=n(978527),eH=n(279145),ez=n(824767),eW=n(860809),ej=n(169006),e$=n(901304),eq=n(794272);function eY(){return(0,eq.R)(e=>{let t={};for(let n in e.mirror.appModel)(0,eH.vg)(n)&&(t[n]=e.mirror.appModel[n]),"isReadOnly"===n&&(t.isReadOnly=e.mirror.appModel.isReadOnly);return t})}var eX=n(459401),eJ=n(328849),eZ=n(340860),eQ=n(143984);function e0(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 14a2 2 0 1 0 0-4V9h3.25v-.96c0-.198-.072-.385-.142-.571l-.05-.131a1 1 0 1 1 1.883 0q-.023.065-.049.131c-.07.186-.142.373-.142.57V9H16v1a2 2 0 1 0 0 4v1h-3.25v.961c0 .197.072.385.142.57l.05.132a1 1 0 1 1-1.883 0q.023-.066.049-.131c.07-.186.142-.374.142-.57V15H8zm2.3 1.95H8a.95.95 0 0 1-.95-.95v-1a.95.95 0 0 1 .95-.95 1.05 1.05 0 1 0 0-2.1.95.95 0 0 1-.95-.95V9A.95.95 0 0 1 8 8.05h2.3v-.005l-.009-.037a3 3 0 0 0-.071-.2m.08 8.142v.004l-.009.038c-.013.046-.033.1-.071.2l.888.339-.888-.339-.001.003-.055.146.895.32-.895-.32a1.95 1.95 0 1 0 3.672 0l-.055-.146-.001-.003a3 3 0 0 1-.08-.238v-.004H16a.95.95 0 0 0 .95-.95v-1a.95.95 0 0 0-.95-.95 1.05 1.05 0 1 1 0-2.1.95.95 0 0 0 .95-.95V9a.95.95 0 0 0-.95-.95h-2.3v-.005l.009-.037c.013-.047.033-.1.071-.2l.001-.004.055-.145A1.95 1.95 0 0 0 12 5.049a1.95 1.95 0 0 0-1.836 2.61l.055.145.001.004",clipRule:"evenodd"}))}var e1=n(758271),e2=n.n(e1),e5=n(809840),e3=n(809831),e4=n(707458),e6=n(574724);async function e8(e,t,n){let a;return(await e6.Ay.shared.assistantChat({messages:[...t,e]})).pipeThrough((a={},new TransformStream({async transform(e,t){if(e.choices.length&&(a=function(e,t){let n=(e,t)=>{for(let[a,r]of(e={...e},Object.entries(t)))if(void 0===e[a]||null===e[a]){if(e[a]=r,Array.isArray(e[a]))for(let t of e[a])delete t.index}else if("string"==typeof e[a]&&"string"==typeof r)e[a]+=r;else if("number"==typeof e[a]&&"number"==typeof r)e[a]=r;else if(Array.isArray(e[a])&&Array.isArray(r)){let t=e[a];for(let e=0;e<r.length;e++){let{index:a,...i}=r[e];if(a-t.length>1)throw Error(`Error: An array has an empty value when tool_calls are constructed. tool_calls: ${t}; tool: ${r}`);t[a]=n(t[a],i)}}else"object"==typeof e[a]&&"object"==typeof r&&(e[a]=n(e[a],r));return e};return n(e,t.choices[0].delta)}(a,e),t.enqueue({...a,role:"assistant"}),a.tool_calls&&a.tool_calls.length>0&&"tool_calls"===e.choices[0].finish_reason))for(let e of a.tool_calls){let a=await n(e),r={tool_call_id:e.id,role:"tool",name:e.function.name,content:JSON.stringify(a)};t.enqueue(r)}}})))}var e7=n(330654),e9=n(453681),te=n(416095),tt=n(933342),tn=n(50335),ta=n(262151),tr=n(561004),ti=n(435011),tl=n(532888),to=n(239671),ts=n(707033),tc=n(176626),td=n(22631),tu=n(547807),tm=n(27087);let tp=new class{sendFeatureRequest(e){return tm.Ay.post("/api/ask_figma/request_feature",tu.td.toAPIParameters(e))}};var t_=n(38580),tg=(e=>(e.Idle="idle",e.Loading="loading",e.Error="error",e))(tg||{});let tf=(0,t_.eU)({status:"idle",messages:[]}),th=e7.object({node_id:e7.string(),score:e7.number(),file_name:e7.string(),editor_name:e7.string(),editor_img_url:e7.string(),last_edited_at:e7.string(),url:e7.string(),thumbnail_url:e7.string(),edit_info:e7.object({created_at:e7.string(),last_modified:e7.string(),last_modified_user:e7.string()}).optional(),containing_page_name:e7.string(),containing_frame_name:e7.string().optional(),fragment_name:e7.string(),width:e7.number(),height:e7.number()}),tE=e7.object({type:e7.literal("fragments"),status:e7.literal("success"),fragments:e7.array(th)}),ty=e7.object({type:e7.literal("fragments"),status:e7.literal("success"),fragments:e7.array(th.pick({score:!0,file_name:!0,editor_name:!0,last_edited_at:!0,containing_page_name:!0,containing_frame_name:!0,fragment_name:!0})),images:e7.array(e7.string())}),tb=e7.object({type:e7.literal("selection"),status:e7.literal("success"),selectionLength:e7.number()}),tv=e7.object({type:e7.literal("selection"),status:e7.literal("success"),selectionLength:e7.number(),images:e7.array(e7.string()),jsx:e7.array(e7.string())}),tC=e7.object({type:e7.literal("plugin"),status:e7.literal("success")}),tw=e7.object({type:e7.literal("plugin"),status:e7.literal("success")}),tT=e7.object({type:e7.literal("assets"),queries:e7.array(e7.string()),status:e7.literal("success"),assets:e7.any().array()}),tS=e7.object({type:e7.literal("assets"),status:e7.literal("success"),assets:e7.array(e7.object({name:e7.string(),description:e7.string().optional()})),images:e7.array(e7.string())}),tx=e7.object({type:e7.literal("request-feature"),status:e7.literal("success"),title:e7.string(),description:e7.string()}),tk=e7.object({type:e7.literal("request-feature"),status:e7.literal("success"),images:e7.undefined()}),tN=e7.object({userFacing:e7.union([tE,tb,tC,tT,tx]),assistantFacing:e7.union([ty,tv,tw,tS,tk])});async function tI(e){if("function"!==e.type)throw Error("Unexpected tool_call type:"+e.type);let t=JSON.parse(e.function.arguments),n=s.zl.get(ei.ze);if(!n)throw Error("No file key found");switch(e.function.name){case"autocomplete":case"view_user_selection":{let e=e4.q.instance.getCurrentPage()?.directlySelectedNodes??[],t=e?.slice(0,10),n=t.map(e=>{let t=(0,ea.T1)(e,ea.UF.GPT);if(!t)throw Error("Failed to export thumbnail");return t}),a=t.map(e=>"");return{userFacing:{type:"selection",status:"success",selectionLength:e.length},assistantFacing:{type:"selection",status:"success",selectionLength:e.length,images:n,jsx:a}}}case"visual_search_with_selection":case"search_designs_by_text":{let a=[];if("visual_search_with_selection"===e.function.name){let e=e4.q.instance.getCurrentPage()?.directlySelectedNodes;if(!e||0===e.length)throw Error("No selection found");a=(await (0,ea.lc)({type:"input-selection",node:e[0],file_key:n,name:e[0].name})).slice(0,3)}else a=(await (0,ea.c)({type:"input-text",value:t.query,file_key:n})).slice(0,3);return{userFacing:{type:"fragments",status:"success",fragments:a},assistantFacing:{type:"fragments",status:"success",fragments:a.map(e=>({score:e.score,file_name:e.file_name,editor_name:e.editor_name,last_edited_at:e.last_edited_at,containing_page_name:e.containing_page_name,containing_frame_name:e.containing_frame_name,fragment_name:e.fragment_name})),images:a.map(e=>e.thumbnail_url)}}}case"search_components_by_text":{let e=t.queries.slice(0,3);if(0===e.length)throw Error("No queries provided");let n=(await Promise.all(e.map(e=>tO(e)))).map(e=>e.slice(0,3)).flat(),a=[],r=[];return n.map(e=>{if(!e.thumbnail_url)return;let t=e.thumbnail_url.startsWith("/")?`${window.location.origin}${e.thumbnail_url}`:e.thumbnail_url;a.push(e),r.push(t)}),{userFacing:{type:"assets",status:"success",queries:t.queries,assets:a},assistantFacing:{type:"assets",status:"success",assets:a.map(e=>({name:e.name,description:e.description})),images:r}}}case"create_figma_plugin":let a=e7.object({plugin_code:e7.string(),ui_code:e7.string().optional()}).safeParse(t);if(!a.success)throw Error("Invalid args: "+a.error.toString());let{plugin_code:r,ui_code:i}=a.data;return tA(r,i);case"edit_file":{let e=e7.object({code:e7.string()}).safeParse(t);if(!e.success)throw Error("Invalid args: "+e.error.toString());let{code:n}=e.data;return tA(n)}case"request_feature":let l=e7.object({title:e7.string(),description:e7.string()}).safeParse(t);if(!l.success)throw Error("Invalid args: "+l.error.toString());let{title:o,description:c}=l.data,d={title:o,description:c,chatHistory:s.zl.get(tf).messages};return await tp.sendFeatureRequest(d),{userFacing:{type:"request-feature",status:"success",title:o,description:c},assistantFacing:{type:"request-feature",status:"success"}};default:throw Error(`No function found for ${e.function.name}`)}}async function tA(e,t){let n=s.zl.get(ei.ze),a=(0,ts.o8)();if(!a)throw Error("Cannot run plugin while logged out");if(!n)throw Error("No file key found");await (0,tr.wY)();let r=`
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
    ${t}
    </script>
    <div id="root"></div>
    `,i=t?(0,eF.nx)(e,r):e,l=(0,tr.mv)();return tr.iu.currentPluginRunID=l,(0,ta.E9)({allowedDomains:tc.gH,apiVersion:tn.pS,capabilities:[],stats:new td.P,checkSyntax:!0,code:i,command:"",disableSilenceConsole:!0,enablePrivatePluginApi:!1,enableProposedApi:!1,errorHandler:Z.lQ,isLocal:!0,isWidget:!1,name:"Assistant plugin",openFileKey:n,permissions:eF.qH.forFirstPartyPlugin(),pluginID:"",pluginRunID:l,pluginVersionID:"0",queryMode:!1,showLaunchErrors:!0,showRuntimeErrors:!0,titleIconURL:"",userID:a,vmType:"cppvm",editorType:[eG.FW.FIGMA],incrementalSafeApi:!1,enableNativeJsx:!1}),{userFacing:{type:"plugin",status:"success"},assistantFacing:{type:"plugin",status:"success"}}}async function tO(e){let t=ed.D.getState(),n=(0,ei.tB)(t),a=(0,tl.vx)(t);if(!n||null==a)throw Error("No open file or file version found");let r=1;for(;!(0,tt.Wg)(ed.D.getState())&&r<=50;)await new Promise(e=>setTimeout(e,200*r)),r++;if(!(0,tt.Wg)(ed.D.getState()))throw Error("Failed to initialize assets");let i={type:eo.I.ALL};t=ed.D.getState();let l={type:"input-text",query:e,assetTypeOption:i,isKnownLibrary:e=>!0,openFile:(0,ei.tB)(t),selectedView:(0,ti.hK)(t),inDesignEditor:(0,e3.XE)((0,ti.hK)(t))===to.nT.Design,fileVersion:a,currentOrgId:(0,te.eD)(t),fileByKey:(0,tl.t_)(t),libraryByLibraryKey:s.zl.get(e9.qp)},o=(await (0,eu.C8)(l,s.zl.get(k.dd))).normalizedSearchResults.filter(e=>l.isKnownLibrary(e));return(0,tt.Ow)(o)}async function tL(e,t,n,a){try{let r;let i=e4.q.instance.getCurrentPage()?.directlySelectedNodes,l="string"==typeof e?{role:"user",content:[{type:"text",text:`<user_message><user_input>${e}</user_input><selected_layer_ids>${i&&JSON.stringify(i.map(e=>e.guid))}</selected_layer_ids></user_message>`}]}:e;n(e=>({...e,status:tg.Loading,messages:[...e.messages,l]}));let o=[];for(let e of t){let t=function(e){if("tool"!==e.role)return e;let t=e.content,n="string"==typeof t?JSON.parse(t):t,a=tN.parse(n).assistantFacing,r=a.type;switch(r){case"selection":case"assets":case"fragments":let{images:i,...l}=a;return{...e,content:JSON.stringify(l)};case"plugin":case"request-feature":return e;default:(0,Y.assertNever)(r)}}(e);o.push(t)}let c=(await e8(l,o,a)).getReader();for(;;){let{done:e,value:t}=await c.read();if(e){n(e=>({...e,status:tg.Idle}));break}let{sendFollowup:a,newMessages:i}=function(e){if("tool"!==e.role)return{sendFollowup:!1,newMessages:[]};let t=e.content,n="string"==typeof t?JSON.parse(t):t,a=tN.parse(n),r=a.assistantFacing.type;switch(r){case"selection":case"assets":case"fragments":return{sendFollowup:!0,newMessages:[{role:"user",content:[{type:"text",text:"<!-- The tool call showed me the following images: -->"},...a.assistantFacing.images.map(e=>({type:"image_url",image_url:{url:e.startsWith("http")?e:`data:image/jpeg;base64,${e}`,detail:"high"}}))]}]};case"plugin":case"request-feature":return{sendFollowup:!1,newMessages:[]};default:(0,Y.assertNever)(r)}}(t);i.length>0&&a&&(r=i[i.length-1]),n(e=>"string"==typeof t.content&&0===t.content.length||t.role!==e.messages[e.messages.length-1]?.role?{status:tg.Loading,messages:[...e.messages,t,...i]}:{status:tg.Loading,messages:[...e.messages.slice(0,-1),t,...i]})}r&&tL(r,s.zl.get(tf).messages,n,a)}catch(e){(0,ew.Lo)("Send chat message failed: ",e.message),n(e=>({...e,status:tg.Error}))}}var tD=n(1688),tR=n(652875),tM=n(935871),tP=n(124008),tF=n(57860),tB=n(963757);function tU(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10.5 16a5.5 5.5 0 1 0 0-11 5.5 5.5 0 0 0 0 11m0 1a6.48 6.48 0 0 0 4.23-1.564l4.416 4.418a.5.5 0 0 0 .708-.708l-4.418-4.417A6.5 6.5 0 1 0 10.5 17m-.485-9.56L9.5 9.5l-2.06.515c-.505.126-.505.844 0 .97l2.06.515.515 2.06c.126.505.844.505.97 0l.515-2.06 2.06-.515c.505-.126.505-.844 0-.97L11.5 9.5l-.515-2.06c-.126-.505-.844-.505-.97 0",clipRule:"evenodd"}))}var tG=n(339350);function tK(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 9.764a2.3 2.3 0 0 0-1 .114V8h4v-.935q0-.033-.002-.065c-.02-.26-.146-.5-.282-.725a1.5 1.5 0 1 1 2.569 0c-.137.225-.264.466-.283.725L13 7.065V8h4v1.878a2.25 2.25 0 0 0-1-.114 2.25 2.25 0 1 0 1 4.358V16h-4v.935l.002.065c.02.26.146.5.282.725a1.5 1.5 0 1 1-2.569 0c.137-.225.264-.466.283-.725l.002-.065V16H7v-1.878a2.25 2.25 0 0 0 1 .114 2.25 2.25 0 0 0 0-4.472M9.973 17H7a1 1 0 0 1-1-1v-1.878a1 1 0 0 1 1.333-.943q.196.07.417.071a1.25 1.25 0 1 0-.417-2.43A1 1 0 0 1 6 9.879V8a1 1 0 0 1 1-1h2.973a2 2 0 0 0-.113-.207 2.5 2.5 0 1 1 4.28 0l-.794-.48.794.48c-.056.092-.09.156-.113.207H17a1 1 0 0 1 1 1v1.878a1 1 0 0 1-1.333.943 1.25 1.25 0 1 0 0 2.358 1 1 0 0 1 1.333.943V16a1 1 0 0 1-1 1h-2.973c.022.05.058.115.113.207a2.5 2.5 0 1 1-4.28 0c.056-.092.09-.156.113-.207",clipRule:"evenodd"}))}var tV=n(293775),tH=n(45623),tz=n(523047),tW=n(135317),tj=n(339502),t$=n(323434),tq=n(134288),tY=n(662275),tX=n(860178),tJ=n(620722),tZ=n(545816),tQ=n(289375),t0=n(750600),t1=n(268645),t2=n(276060),t5=n(699306),t3=n(547583);function t4(){let[e,t]=r.useState(""),[n,a]=(0,s.fp)(tf),l=(0,i.wA)(),o=(0,i.d4)(e=>e.modalShown);(0,es.b)();let c=r.useCallback(()=>{if(o&&o.type===t3.z.type){l(tY.AS());return}l(tY.to({type:t3.z,data:{messages:n.messages}}))},[n.messages,l,o]);r.useEffect(()=>{o?.type!==t3.z.type||l(tY.hm({type:t3.z.type,data:{messages:n.messages}}))},[n.messages,l,o]);let d=r.useCallback(()=>{"/debug"===e?c():tL(e,n.messages,a,tI),t("")},[e,n.messages,a,c]);return r.createElement(e_.n,{height:m.wC,hideActionPanel:!0},r.createElement(e_.n.Body,null,0===n.messages.length?r.createElement(t6,null):r.createElement(t1.q,{stretchContent:!1,useBottomPinning:!0,enableScrollShadow:!0},r.createElement("div",{className:et.cx.py8.flex.flexColumn.gap4.$},n.messages.map((e,t)=>r.createElement(nt,{key:`msg-${t}`,message:e})),r.createElement("div",{style:{marginLeft:"44px",marginRight:"12px"}},r.createElement(t9,{status:n.status}))))),r.createElement(e_.n.Footer,null,r.createElement(eg.v,{placeholder:(0,en.t)("fullscreen_actions.assistant-chat"),searchQuery:e,onSearchChange:t,endEnhancer:r.createElement(tQ.r,{shortcuts:[{key:J.Uz.ENTER}],onAction:d,disabled:0===e.length||n.status===tg.Loading},(0,en.t)("assistant.chat.send_message"))})))}function t6(){return r.createElement("div",{className:et.cx.flex.flexColumn.itemsCenter.justifyEnd.hFull.gap8.$},r.createElement(tB.m,null),r.createElement("div",{className:et.cx.flex.flexRow.gap16.$},r.createElement("div",{className:et.cx.flex.flexColumn.itemsCenter.flexGrow1.gap8.$},r.createElement(t8,{inputToSend:"Find similar designs to my selection"},r.createElement(tU,null),"Find designs"),r.createElement(t8,{inputToSend:"I want to request a feature."},r.createElement(tG.V,null),(0,en.t)("assistant.chat.suggestion.request_feature"))),r.createElement("div",{className:et.cx.flex.flexColumn.itemsCenter.flexGrow1.gap8.$},r.createElement(t8,{inputToSend:"Make a plugin that creates rectangles in a grid"},r.createElement(tK,null),(0,en.t)("assistant.chat.suggestion.make_tool")),r.createElement(t8,{inputToSend:"",disabled:!0},r.createElement(tV.C,null),(0,en.t)("assistant.chat.suggestion.coming_soon")))))}function t8({children:e,inputToSend:t,disabled:n}){let[a,i]=(0,s.fp)(tf),l=r.useCallback(()=>{tL(t,a.messages,i,tI)},[t,a.messages,i]);return r.createElement("button",{className:et.cx.flex.flexColumn.justifyEnd.wFull.b1.colorBorder.gap8.textBodyLargeStrong.p12.if(n,et.cx.colorTextSecondary).$,style:{borderRadius:13,minWidth:150,...n&&{"--color-icon":"var(--color-text-secondary)"}},onClick:l,disabled:n},e)}function t7({children:e}){return r.createElement("div",{className:et.cx.flex.flexRow.itemsCenter.wFull.b1.colorBorder.gap8.h40.textBodyLargeStrong.px4.mr12.$,style:{borderRadius:13}},e)}function t9({status:e}){let t;switch(e){case tg.Idle:t=null;break;case tg.Loading:t=r.createElement(t7,null,r.createElement("div",{className:et.cx.pl4.flex.itemsCenter.justifyCenter.$},r.createElement(tF.k,null)),r.createElement("div",{className:et.cx.colorTextSecondary.$},(0,en.t)("assistant.chat.status.loading")));break;case tg.Error:t=r.createElement(t7,null,r.createElement(tH.Z,null),(0,en.t)("assistant.chat.status.error"));break;default:(0,Y.assertNever)(e)}return r.createElement(t$.N,{mode:"popLayout",initial:!1},r.createElement(tq.P.div,{key:e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},t))}function ne(e){let t=r.useRef(null),n=(0,i.d4)(ei.tB),a=(0,tZ.O)(),l=(0,s.md)(e9.oE);try{let i=e.content,o="string"==typeof i?JSON.parse(i):i,{userFacing:c}=tN.parse(o);if("fragments"===c.type){let e=c.fragments.map(e=>({...e,type:"fig-file-fragment"}));return r.createElement(t5.U,{fragments:e,focusHandle:t,numberOfGridColumns:3,maxResults:3,entryPoint:ea.G4.ACTIONS_LIST,disableActionShortcuts:!0})}if("assets"===c.type)return r.createElement(t0.x,{primary:!0,columns:3,padding:8,gap:12},c.assets.map((e,t)=>r.createElement(t2.a,{key:t,asset:e,libraryNameByResourceId:a,fileNameByLibraryKey:l,assetTypeDropdownSelection:eo.I.ALL,searchQuery:c.queries[0],queryId:"",searchSessionId:s.zl.get(k.dd)??"",openFileKey:n?.key??"",sectionPosition:t,disableActionShortcuts:!0})));if("selection"===c.type)return r.createElement(t7,null,r.createElement(tz.W,null),(0,en.t)("assistant.chat.tool_result.selection.success"));if("request-feature"===c.type)return r.createElement(t7,null,r.createElement(tz.W,null),(0,en.t)("assistant.chat.tool_result.feature_request"));return r.createElement(t7,null,r.createElement(tW.g,null),(0,en.t)("assistant.chat.tool_result.success"))}catch(e){return r.createElement(t7,null,r.createElement(tH.Z,null),(0,en.t)("assistant.chat.tool_result.error"))}}function nt({message:e}){let t=(0,tX.iZ)();return"user"===e.role&&"string"!=typeof e.content&&e.content?.length&&e.content[0]?.type==="text"&&e.content[0].text.startsWith("<!--")||"assistant"===e.role&&!e.content||"tool"===e.role&&!e.content?null:r.createElement("div",{className:et.cx.px12.py4.flex.wFull.$},r.createElement("div",{className:et.cx.gap8.flex.wFull.$},r.createElement("div",{className:et.cx.w24.h24.flexShrink0.flex.itemsCenter.justifyCenter.$},"assistant"===e.role||"tool"===e.role?r.createElement(tB.m,null):t?.img_url?r.createElement(tJ.J,{src:t.img_url,className:et.cx.w16.h16.radiusFull.$}):r.createElement(tj._,null)),r.createElement("div",{className:et.cx.flex.flexColumn.wFull.pt2.$},r.createElement("span",{className:et.cx.textBodyLargeStrong.$},"assistant"===e.role||"tool"===e.role?"Figma":"You"),"tool"===e.role?r.createElement("div",{className:et.cx.wFull.pt4.$},r.createElement(ne,{...e})):"string"==typeof e.content?r.createElement(nn,{text:e.content}):r.createElement("div",null,null===e.content?null:e.content.map((e,t)=>"text"===e.type?r.createElement(nn,{key:`sub-t-${t}`,text:e.text}):null)))))}function nn({text:e}){let t=e;try{let n=new DOMParser().parseFromString(e,"text/xml").getElementsByTagName("user_input");n.length>0&&(t=n[0].textContent||"")}catch{}return r.createElement("div",null,t.split("\n").map((e,t)=>r.createElement("span",{key:`l-${t}`},e,r.createElement("br",null))))}var na=n(853284),nr=n(239349),ni=n(507956),nl=n(32067),no=n(239737),ns=n(13894);function nc(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M16 17.5a.5.5 0 0 1-.5.5h-7a.5.5 0 0 1-.5-.5V14H7v3.5A1.5 1.5 0 0 0 8.5 19h7a1.5 1.5 0 0 0 1.5-1.5V9.414a1 1 0 0 0-.293-.707l-3.414-3.414A1 1 0 0 0 12.586 5H8.5A1.5 1.5 0 0 0 7 6.5V11h1V6.5a.5.5 0 0 1 .5-.5H12v2.5a1.5 1.5 0 0 0 1.5 1.5H16zM13 6.414V8.5a.5.5 0 0 0 .5.5h2.086zm-2.146 3.732a.5.5 0 0 0-.708.708L11.293 12H5.5a.5.5 0 0 0 0 1h5.793l-1.147 1.146a.5.5 0 0 0 .708.708l2-2a.5.5 0 0 0 0-.708z",clipRule:"evenodd"}))}var nd=n(636149),nu=n.n(nd),nm=n(199629),np=n.n(nm);function n_(){let e=(0,i.d4)(e=>e.mirror?.appModel);return(t,n,a=!1)=>{let r=t[n];if(r&&(a||!r.disabled&&(!r.action||(0,eH.Yh)(e,n))))return r}}function ng(e){switch(e){case ns.b.RECENTS:return 0;case ns.b.DESIGN_TOOLS:return 1;case ns.b.RIFFING_AND_WRITING:return 2;case ns.b.IMAGE_EDITING:return 3;case ns.b.COLLABORATION_TOOLS:return 4;case ns.b.HANDOFF_TOOLS:return 5;case ns.b.VIEWER_TOOLS:return 6;case ns.b.SUGGESTIONS:return 7;case ns.b.COMMON_SETTINGS:return 8;case null:return 100;default:return(0,Y.assertNever)(e)}}var nf=n(636227),nh=n(335218),nE=n(260726),ny=n(176857),nb=n(631378);let nv=new Map([[m.JT.FIRST_DRAFT,ns.b.DESIGN_TOOLS],[m.JT.MAKE_EDITS,ns.b.DESIGN_TOOLS],[m.JT.MAGIC_LINK,ns.b.DESIGN_TOOLS],[m.JT.AUTO_RENAME_LAYERS,ns.b.DESIGN_TOOLS],[m.JT.CONTENT_FILL,ns.b.DESIGN_TOOLS],[m.JT.FIND_INSPIRATION,ns.b.DESIGN_TOOLS],[m.JT.REWRITE_TEXT,ns.b.RIFFING_AND_WRITING],[m.JT.SLIDES_GENERATE_SPEAKER_NOTES,ns.b.RIFFING_AND_WRITING],[m.JT.SLIDES_REWRITE_TEXT,ns.b.RIFFING_AND_WRITING],[m.JT.SHORTEN_TEXT,ns.b.RIFFING_AND_WRITING],[m.JT.TRANSLATE_TEXT,ns.b.RIFFING_AND_WRITING],[m.JT.GENERATE_IMAGE,ns.b.IMAGE_EDITING],[m.JT.REMOVE_BACKGROUND,ns.b.IMAGE_EDITING],[m.OZ,ns.b.DESIGN_TOOLS]]),nC=[["set-tool-comments",ns.b.COLLABORATION_TOOLS],["present-as-prototype",ns.b.COLLABORATION_TOOLS],["set-tool-measure",ns.b.HANDOFF_TOOLS],["set-tool-annotate",ns.b.HANDOFF_TOOLS],["zoom-to-fit",ns.b.VIEWER_TOOLS],["export-selected-exportables",ns.b.VIEWER_TOOLS],["copy-as-png",ns.b.VIEWER_TOOLS]],nw=[["request-to-edit",ns.b.COLLABORATION_TOOLS],["set-tool-comments",ns.b.COLLABORATION_TOOLS],["present-as-prototype",ns.b.COLLABORATION_TOOLS],["zoom-to-fit",ns.b.VIEWER_TOOLS],["page-next",ns.b.VIEWER_TOOLS],["export-selected-exportables",ns.b.VIEWER_TOOLS],["toggle-rulers",ns.b.VIEWER_TOOLS]];var nT=(e=>(e.DESIGN_EDITOR_AI="DESIGN_EDITOR_AI",e.DESIGN_EDITOR_NO_AI="DESIGN_EDITOR_NO_AI",e.DESIGN_VIEWER="DESIGN_VIEWER",e.DEV_MODE="DEV",e.NONE="NONE",e))(nT||{});function nS(){let e=(0,nr.VW)();return null!==e&&!e.isSlide()}function nx(e,t){let n=(0,i.d4)(e=>e.selectedView);return r.useMemo(()=>new nb.x(e,n,t,{includeDisabled:!0,acceptsUnicode:(0,ny.LN)()}),[e,n,t])}var nk=n(480952),nN=n(875331);function nI(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",d:"m16.7 7.7.315-1.26c.126-.505.844-.505.97 0L18.3 7.7l1.26.315c.505.126.505.844 0 .97L18.3 9.3l-.315 1.26c-.126.505-.844.505-.97 0L16.7 9.3l-1.26-.315c-.505-.126-.505-.844 0-.97z"}),r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M9 5.5a.5.5 0 0 1 1 0V7h3.5a.5.5 0 0 1 0 1h-1.282l-.054.16c-.503 1.488-1.086 2.54-2.03 3.708l1.527 1.907a.5.5 0 1 1-.781.625l-1.407-1.758c-.689.77-1.54 1.63-2.62 2.711a.5.5 0 1 1-.707-.706c1.146-1.148 2.013-2.028 2.693-2.798L7.21 9.812a.5.5 0 0 1 .781-.624l1.504 1.879c.773-.986 1.248-1.869 1.668-3.067H5.5a.5.5 0 0 1 0-1H9zm5.039 5.808A.5.5 0 0 1 14.5 11h.5a.5.5 0 0 1 .461.308l1.667 4 .834 2a.5.5 0 1 1-.924.384L16.334 16h-3.166l-.706 1.692a.5.5 0 1 1-.922-.384l.833-2zM15.917 15l-1.167-2.8-1.167 2.8z",clipRule:"evenodd"}))}var nA=n(52339),nO=n(292317),nL=n(503429);function nD(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",d:"m9.4 16.5.28-1.12c.083-.333.557-.333.64 0l.28 1.12 1.12.28c.333.082.333.556 0 .64l-1.12.28-.28 1.119c-.083.333-.557.333-.64 0l-.28-1.12-1.12-.28c-.333-.083-.333-.557 0-.64z"}),r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6.224 15.447a.5.5 0 0 1-.448-.894l4-2a.5.5 0 1 1 .448.894zM12 11.441 6.224 8.553a.5.5 0 0 0-.448.894l5.995 2.998.01.005 1.673.836-.25 1.753a2.45 2.45 0 0 0 1.329 2.537l.243.121a2.177 2.177 0 1 0 1.948-3.894l-2.49-1.245-.02-.01L13.117 12l1.095-.548.021-.01 2.49-1.245a2.177 2.177 0 0 0-1.947-3.893l-.244.121a2.45 2.45 0 0 0-1.33 2.538l.251 1.751zm2.194-2.62.203 1.422 1.88-.94a1.177 1.177 0 1 0-1.053-2.105l-.244.122a1.45 1.45 0 0 0-.786 1.501m0 6.359.203-1.422 1.88.94a1.177 1.177 0 0 1-1.053 2.105l-.244-.122a1.45 1.45 0 0 1-.786-1.501",clipRule:"evenodd"}))}function nR(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M16.5 6A1.5 1.5 0 0 1 18 7.5v6a.5.5 0 0 1-1 0V10h-6v7h2.5a.5.5 0 0 1 0 1h-6A1.5 1.5 0 0 1 6 16.5v-9A1.5 1.5 0 0 1 7.5 6zM10 17v-7H7v6.5a.5.5 0 0 0 .5.5zM7 9h10V7.5a.5.5 0 0 0-.5-.5h-9a.5.5 0 0 0-.5.5zm9.7 7.7.315-1.26c.126-.505.844-.505.97 0l.315 1.26 1.26.315c.505.126.505.844 0 .97l-1.26.315-.315 1.26c-.126.505-.844.505-.97 0L16.7 18.3l-1.26-.315c-.505-.126-.505-.844 0-.97z",clipRule:"evenodd"}))}var nM=n(258316),nP=n(202512),nF=n(667859),nB=n(869452),nU=n(908946),nG=n(341831),nK=n(664406),nV=n(895083),nH=n(94500),nz=n(86625),nW=(e=>(e[e.Break=0]="Break",e[e.SkipChildren=1]="SkipChildren",e))(nW||{});function nj(e,t){if(!e)return;let n=[e];for(;;){let e=n.pop();if(!e)return;let a=t(e);if(0===a)break;if(1!==a&&Array.isArray(e.childrenNodes))for(let t of e.childrenNodes)n.push(t)}}var n$=(e=>(e.NO_HALF_PIXELS="no_half_pixels",e.REQUIRE_COLOR_TOKENS="require_color_tokens",e.NO_ABSOLUTE_POSITIONING="no_absolute_positioning",e.USE_ELLIPSES="use_ellipses",e))(n$||{}),nq=(e=>(e.DESIGN_HEURISTICS="design_heuristics",e.DESIGN_SYSTEMS="design_systems",e))(nq||{});let nY={id:n$.NO_ABSOLUTE_POSITIONING,name:(0,en.tx)("design_linter.rules.no_absolute_positioning.name"),warningLabel:(0,en.tx)("design_linter.rules.no_absolute_positioning.warning_label"),description:"Detects absolute positioning (a node that ignores autolayout) and applies a fix to have it not ignore autolayout.",group:nq.DESIGN_HEURISTICS,enabled:()=>!0,detect:e=>{let t=[];return nj(e,e=>{"ABSOLUTE"===e.stackPositioning&&t.push(e.guid)}),Promise.resolve({passedDetection:0===t.length,failedGuids:t})},fix:e=>(e.stackPositioning="AUTO",Promise.resolve(!0))};var nX=n(118615),nJ=n(597616),nZ=n(568214),nQ=n(693601);let n0=`You are a programmatic designer.  You manipulate visual designs with nodes represented in JSX.
You will look at a source JSX and apply changes to it based on a users instructions. Always follow good design principles.

Available Node Types: Frame, Ellipse, Text, Rectangle
Available Props:
- id: a string that uniquely identifies the node
- x,y: number, position relative to parent node
- width,height: number, size of node
- cornerRadius: number, roundness of corners
- fills: Comma separated string of fills of format "solid #ffffff" or "image <hash-of-image>"
- strokes: Comma separated string of strokes of format "1px solid inside #ffffff
- fontName: string of font name. Only use fonts available in google fonts.
- fontSize: number, font size in pixels
- effects: Comma separated string of effects.  "drop_shadow|inner_shadow <x-offset>px <y-offset>px <spread>px <radius>px #000000" or "layer_blur|background_blur <radius>px"
- text: The of a text node. This is an attribute, not text inside the node.

Respond with only JSX. If you include anything other than the JSX I will lose my job.
`,n1=`Your task is to identify and replace hard coded colors with color tokens.
  
  First, find the element corresponding to the ID and the corresponding hard coded color.
  
  Then return both the ID of the element, and the name of the color token that should replace it.

  Your response should have the following JSON sturcture :
  {
    "id": <element ID>,
    "tokenName": <token name>
  }

  For example, if you have the following JSX, ID, and local variables:

  <Frame id="408:2" x={-1087} y={806} width={128} height={64} fills="solid #8DF" cornerRadius={64}>
    <Text id="408:3" x={{type:"center",offset:0}} y={{type:"center",offset:-0.5}}>
      WARNING
    </Text>
  </Frame>

  ID: "408:3"

  button-primary (color): rgba(0.2, 0.2, 0.8, 1)
  botton-alert (color): rgba(0.8, 0.2, 0.2, 1)
  background-primary (color): rgba(0.95, 0.95, 0.95, 1)
  background-secondary (color): rgba(0.85, 0.85, 0.85, 1)
  text-primary (color): rgba(0.2, 0.2, 0.2, 1)
  text-alert (color): rgba(0.95, 0.95, 0.95, 1)

  You could suggest:

  [
    {
      "id": "408:3",
      "tokenName": "text-alert"
    },
  ]
`;async function n2(e,t){var n,a;let r=await (0,nQ.o)(e,{includeIDs:!0,filterFunction:e=>e.visible}),i=n0+"\n\n"+(t.sort((e,t)=>e.type.localeCompare(t.type)),"These are variables you can use in your JSX. They are formatted as <NAME> (<TYPE>): <VALUE> \n"+t.map(t=>(function(e,t){let n=t.name,a=function(e){switch(e){case h.rXF.BOOLEAN:return"boolean";case h.rXF.FLOAT:return"number";case h.rXF.STRING:return"string";case h.rXF.COLOR:return"color";case h.rXF.MAP:return"map";case h.rXF.SYMBOL_ID:return"symbol_id";case h.rXF.FONT_STYLE:return"font_style";case h.rXF.TEXT_DATA:return"text_data"}}(t.resolvedType),r=e.resolveVariable(t.node_id);if(!r||r.resolvedType!==h.rXF.COLOR)return"";let i=`rgba(${r.value.r.toFixed(3)}, ${r.value.g.toFixed(3)}, ${r.value.b.toFixed(3)}, ${r.value.a.toFixed(3)})`;return`${n} (${a}): ${i}`})(e,t)).join("\n")),l=(n=r.jsxStr,a=e.guid,n1+`This is the input JSX:

  ${n}
  
  This is the ID of the element to find:

  ${a}`),o=await e6.Ay.openai.completeChat({model:"gpt-4o-2024-08-06",temperature:.8,n:1,messages:[{role:"system",content:i},{role:"user",content:l}],use_cache:!1});if(!o.choices[0]?.message?.content)throw Error("Invalid response from Cortex");let s=JSON.parse(o.choices[0].message.content.replace("```json","").replace("```",""));if(s.id!==e.guid)throw Error("AI hallucinated incorrect fix");return s.tokenName}var n5=n(533573),n3=n(859703);function n4(){return s.zl.get(n3.uk).filter(e=>!(0,n5.eF)(e)).filter(e=>e.resolvedType===h.rXF.COLOR)}async function n6(e){let t=n4();try{let n=await n2(e,t),a=t.filter(e=>e.name===n);if(0===a.length)return!1;let r=a[0];if(!r)return!1;let i=nJ.sH(r.node_id),l=e.fills[0];if(!l)return!1;let o={...l,colorVar:i?{resolvedDataType:"COLOR",dataType:"ALIAS",value:{alias:i}}:void 0},s=(0,nX.GP)(l),c=(0,nX.GP)(o);nz.l7.ai("design-linter-color-tokens",()=>{h.Osy.updatePaint(s,c,!0,null)})}catch(e){throw e}return Promise.resolve(!0)}let n8={id:n$.REQUIRE_COLOR_TOKENS,name:(0,en.tx)("design_linter.rules.color_tokens.name"),warningLabel:(0,en.tx)("design_linter.rules.color_tokens.warning_label"),description:"Detects missing color tokens in the design applies a fix to use the most appropriate token.",group:nq.DESIGN_SYSTEMS,enabled:()=>!0,detect:function(e){let t=function e(t,n){let a=[];return t.forEach(t=>{if("INSTANCE"===t.type)return;let r=t.fills.filter(e=>!!e.visible&&"SOLID"===e.type)[0];if(r&&r.color&&(!r.colorVar||"ALIAS"!==r.colorVar.dataType)&&a.push({guid:t.guid,hexColor:(0,nZ.F_)(r.color),name:t.name}),t.childrenNodes?.length>0){let r=(function(e){let t=e.childrenNodes;return e.uiOrderedChildren.map(e=>t.find(t=>t.guid===e)).filter(e=>void 0!==e)})(t).filter(e=>e.visible&&e.opacity>0);a.push(...e(r,n))}}),a}([e],n4());return Promise.resolve({passedDetection:0===t.length,failedGuids:t.map(e=>e.guid)})},fix:n6},n7={id:n$.NO_HALF_PIXELS,name:(0,en.tx)("design_linter.rules.no_half_pixels.name"),warningLabel:(0,en.tx)("design_linter.rules.no_half_pixels.warning_label"),description:"Detects half pixels in the width and height and applies a fix to round them to the nearest whole number.",group:nq.DESIGN_HEURISTICS,enabled:()=>!0,detect:e=>{let t=[];return nj(e,e=>{(e.size.x%1!=0||e.size.y%1!=0)&&t.push(e.guid)}),Promise.resolve({passedDetection:0===t.length,failedGuids:t})},fix:e=>(e.size={x:Math.round(e.size.x),y:Math.round(e.size.y)},Promise.resolve(!0))},n9=/\.{3,}/g;function ae(e){return null!==e.match(n9)}let at=[n7,n8,nY,{id:n$.USE_ELLIPSES,name:(0,en.tx)("design_linter.rules.use_ellipses.name"),warningLabel:(0,en.tx)("design_linter.rules.use_ellipses.warning_label"),description:"Replace period ellipses with the ellipsis character.",group:nq.DESIGN_HEURISTICS,enabled:()=>!0,detect:e=>{let t=[];return nj(e,e=>{"TEXT"===e.type&&ae(e.characters)&&t.push(e.guid)}),Promise.resolve({passedDetection:0===t.length,failedGuids:t})},fix:e=>{if("TEXT"===e.type){let t=e.characters;if(ae(t)&&e.textData){let n=t.replace(n9,"\u2026");e.spliceCharacters(0,e.characters.length,n,"BEFORE")}}return Promise.resolve(!0)}}];var an=(e=>(e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.IDLE=1]="IDLE",e[e.DETECTING=2]="DETECTING",e[e.FIXING=3]="FIXING",e))(an||{});let aa=new class{constructor(){this.status=0,this.ruleIdToEnabledRule={}}initialize(){0===this.status&&(this.refreshEnabledRules(),this.status=1)}refreshEnabledRules(){this.ruleIdToEnabledRule=Object.fromEntries(at.filter(e=>e.enabled()).map(e=>[e.id,e]))}getEnabledRules(){return Object.values(this.ruleIdToEnabledRule)}getSelectedNodes(){let e=e4.q.instance;return e.getCurrentPage()?.directlySelectedNodes??[]}async runDetectionOnSelection(){let e=this.getSelectedNodes();return await this.runDetectionOnNodes(e)}async runDetectionOnNodes(e){if(this.isLinterRunning())throw Error("Linter is already running");this.status=2;let t=[];try{for(let n of e)for(let e of this.getEnabledRules()){let{passedDetection:a,failedGuids:r}=await e.detect(n);if(!a)for(let n of r||[])t.push({ruleId:e.id,guid:n})}}catch(e){throw Error("Error detecting violations: "+e)}finally{this.status=1}return t}async fixViolations(e){if(this.isLinterRunning())throw Error("Linter is already running");this.status=3;let t=[],n=[];try{let a=e4.q.instance,r=[];for(let i of e){let e=this.ruleIdToEnabledRule[i.ruleId];if(!e){console.warn("Rule not found for violation",i);continue}let l=a.get(i.guid);if(!l){console.warn("Node not found for violation",i);continue}nz.l7.user("suggest_actions_linter_fix_violations",()=>{r.push(new Promise(async(a,r)=>{try{await e.fix(l)?t.push(i):n.push(i),a()}catch(e){n.push(i),r();return}}))})}await Promise.allSettled(r)}catch(e){throw Error("Error fixing violations: "+e)}finally{this.status=1}return{fixedViolations:t,failedViolations:n}}async fixSingleViolation(e){let{fixedViolations:t}=await this.fixViolations([e]);return 1===t.length}isLinterRunning(){return[2,3].includes(this.status)}getRuleById(e){return this.ruleIdToEnabledRule[e]||null}};function ar(){return(0,X.kc)().aip_flower_garden?(aa.initialize(),aa):null}let ai=async()=>{let e=ar();if(!e)return{error:"Linter not available`",violations:[]};try{return{violations:await e.runDetectionOnSelection()}}catch(e){return{error:e.message,violations:[]}}};var al=n(296799),ao=n(623590),as=n(776250),ac=n(709731),ad=n(343090),au=n(326186),am=n(166689),ap=n(293871),a_=n(118377),ag=n(670652),af=n(677074),ah=n(232309),aE=n(686589),ay=n(883216),ab=n(726710),av=n(118567),aC=n(573591),aw=n(446888);function aT({items:e,onSelectItem:t,placeholder:n}){(0,R.If)(!1);let[a,i]=r.useState(""),[l,o]=r.useState([]);r.useEffect(()=>{o(e),i("")},[e]);let s=r.createElement(aw.B,{resultCount:l.length},l.map(e=>r.createElement(aw.B.Item,{key:e.label,primaryAction:{onAction:()=>t(e),shortcuts:[{key:J.Uz.ENTER}]},actionLabel:!1,recordingKey:e.label},r.createElement("div",{className:et.cx.flex.justifyBetween.wFull.$},r.createElement("div",{className:et.cx.ml28.$},e.label))))),c=t=>{i(t),o(e.filter(e=>e.label.toLowerCase().includes(t.toLowerCase())))};return r.createElement(e_.n,{height:m.wC,recordingKey:"parameterLikeList"},r.createElement(eg.v,{searchQuery:a,onSearchChange:c,onClear:()=>{c("")},placeholder:n}),r.createElement(e_.n.Body,null,s))}var aS=n(504440),ax=n(934533),ak=n(843059),aN=n(596378);let aI={[nq.DESIGN_HEURISTICS]:(0,en.tx)("design_linter.group_names.design_heuristics"),[nq.DESIGN_SYSTEMS]:(0,en.tx)("design_linter.group_names.design_systems")};function aA(e,t,n){ed.D.dispatch(d.F.enqueue({message:e,type:n,icon:t,timeoutOverride:3e3}))}function aO({detectedViolations:e}){let[t,n]=(0,r.useState)(e),a=ar(),i=(0,r.useCallback)(async e=>{if(a)try{await a.fixSingleViolation(e)?n(t=>t.filter(t=>t.guid!==e.guid)):aA((0,en.t)("design_linter.penalty_box.fix_failed_bell"),ax.zX.EXCLAMATION,"error")}catch(e){aA((0,en.t)("design_linter.penalty_box.fix_failed_bell"),ax.zX.EXCLAMATION,"error")}},[a]);return a?r.createElement("div",{className:et.cx.flex.flexColumn.gap16.$},t.map(e=>r.createElement(aL,{key:`${e.ruleId}-${e.guid}`,violation:e,rule:a.getRuleById(e.ruleId),onFix:i})),0===t.length?r.createElement(r.Fragment,null,(0,en.tx)("design_linter.penalty_box.no_violations")):null):null}function aL({violation:e,rule:t,onFix:n}){if(!t)return null;let a=e4.q.instance.get(e.guid);return r.createElement("div",{className:et.cx.flex.flexRow.itemsStart.gap8.$},r.createElement("div",null," ",e.guid),r.createElement("div",null,aI[t.group]),a&&r.createElement("div",null,a.name),r.createElement("div",null,t.warningLabel),r.createElement(aS.$n,{variant:"secondary",onClick:()=>n(e)},(0,en.tx)("design_linter.penalty_box.fix")))}var aD=n(140686),aR=n(256296),aM=n(175290),aP=n(207204),aF=n(599280),aB=n(801886),aU=n(809058),aG=n(277080),aK=n(763764);let aV={[aB.GS.DEFAULT]:[{"font/title/bold":{fontName:{family:"Plus Jakarta Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Plus Jakarta Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Plus Jakarta Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/medium":{fontName:{family:"Plus Jakarta Sans",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Plus Jakarta Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/label/medium":{fontName:{family:"Plus Jakarta Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Plus Jakarta Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Outfit",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/title/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/body/bold":{fontName:{family:"Outfit",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/label/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Inter",style:"Semi Bold"},letterSpacing:{units:"PERCENT",value:-2.5}},"font/title/regular":{fontName:{family:"Inter",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2.5}},"font/body/bold":{fontName:{family:"Inter",style:"Semi Bold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/medium":{fontName:{family:"Inter",style:"Medium"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/regular":{fontName:{family:"Inter",style:"Regular"},letterSpacing:{units:"PERCENT",value:-.5}},"font/label/medium":{fontName:{family:"Inter",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Inter",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Public Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Public Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/medium":{fontName:{family:"Public Sans",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-.5}},"font/label/medium":{fontName:{family:"Public Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}}],[aB.GS.SERIF]:[{"font/title/bold":{fontName:{family:"Domine",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Domine",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Outfit",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}},"font/label/medium":{fontName:{family:"Outfit",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Outfit",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}},{"font/title/bold":{fontName:{family:"Roboto Serif",style:"Bold"},letterSpacing:{units:"PERCENT",value:-2}},"font/title/regular":{fontName:{family:"Roboto Serif",style:"Regular"},letterSpacing:{units:"PERCENT",value:-2}},"font/body/bold":{fontName:{family:"Public Sans",style:"Bold"},letterSpacing:{units:"PERCENT",value:-.5}},"font/body/medium":{fontName:{family:"Public Sans",style:"SemiBold"},letterSpacing:{units:"PERCENT",value:0}},"font/body/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:-.5}},"font/label/medium":{fontName:{family:"Public Sans",style:"Medium"},letterSpacing:{units:"PERCENT",value:0}},"font/label/regular":{fontName:{family:"Public Sans",style:"Regular"},letterSpacing:{units:"PERCENT",value:0}}}]};function aH(e){return e[Math.floor(Math.random()*e.length)]}function az(e){let t={numberVariableMap:{},colorVariableMap:{}},n="true"===e[aB.u7.DARK_MODE];for(let[a,r]of Object.entries(e||{}))switch(a.split("/")[0]){case aB.u7.COLOR:let e=(0,nZ.tK)(r);if(!e)continue;t.colorVariableMap[a]=(0,aK.qO)(e,n?aG.lH.DARK:aG.lH.LIGHT);break;case aB.u7.CORNER_RADIUS:case aB.u7.SPACING:let i=parseFloat(r);!isNaN(i)&&i>=aU.Xy&&i<=aU.Ne&&(t.numberVariableMap[a]=i);break;case aB.u7.FONT:switch(r){case aB.GS.SERIF:case aB.GS.DEFAULT:t.fontVariableMap=aH(aV[r]);break;default:t.fontVariableMap=aH(aV[aB.GS.DEFAULT])}}return{darkMode:n,variableMaps:t}}var aW=n(112825),aj=n(894443),a$=n(356390),aq=n(843495),aY=n(698993),aX=n(234587),aJ=n(341092),aZ=n(592917),aQ=n(841563),a0=n.n(aQ);async function a1(e){try{let{parseJSX:t}=await Promise.all([n.e(5352),n.e(2192)]).then(n.t.bind(n,942192,23));return t(e)}catch{return null}}var a2=n(612028),a5=n(477047),a3=n(198868),a4=n(785398),a6=n(247368),a8=n(202655),a7=n(853069);function a9(e,t){if("string"==typeof e&&1===t.parsedDefs.length){let n=t.parsedDefs[0].devFriendlyProp;if("key"in n)return{[n.key]:e}}return e}function re(e,t){if("object"==typeof e){if(t in e)return e[t];for(let[n,a]of Object.entries(e))if(n.toLowerCase()===t.toLowerCase())return a}}async function rt(e,t,n){let a=e4.q.instance,r={componentProps:{},componentPropsNested:{},nestedInstancesVisibility:{},sharedPluginData:{...e?.sharedPluginData}},i={};for(let l of t.parsedDefs){let o=function e(t,n){let a;if("object"==typeof t){switch(n.type){case"SIMPLE":case"IMAGE":case"GROUPED_INSTANCE_SWAP":t&&(a=re(t,n.key));break;case"SIMPLE_CHOICE":if(t&&n.key in t){let e=re(t,n.key);n.validOptions.includes(e)?a=e:(0,ew.xi)("first-draft",`Expected ${n.key} to be oneOf: ${JSON.stringify(n.validOptions)} but got: ${e}`,{componentProps:t,devFriendlyProp:n})}break;case"DERIVED_BOOLEAN":a=!!e(t,n.devFriendlyProp);break;case"ARRAY":if(t){let e=re(t,n.key);Array.isArray(e)&&(a=e[n.index]),void 0===a&&(a=re(t,n.nonArrayKey)),void 0===a&&0===n.index&&n.originalKey&&(a=re(t,n.originalKey))}break;default:(0,Y.assertNever)(n)}if(void 0===a)return a;switch(n.valueType){case"BOOLEAN":if("boolean"==typeof a)break;return;case"STRING":if("string"==typeof a)break;return}return a}}(e,l.devFriendlyProp),s=void 0===o;if("ARRAY"===l.devFriendlyProp.type||"GROUPED_INSTANCE_SWAP"===l.def.type)for(let e of(0,a8.wn)(t.componentId,l))r.nestedInstancesVisibility[e]=!s;if(!s)switch(l.def.type){case"NESTED_INSTANCE":{let e=(0,a6.Ye)(l.def.componentId);if(e){if(o=a9(o,e),"ARRAY"===l.devFriendlyProp.type){let e=l.devFriendlyProp.key;if(0===l.devFriendlyProp.index){i[e]={};let t=new Set;for(let e of Object.values(l.def.tagsByParentComponentId))for(let n of Object.keys(e.fixedVariantProperties??{}))t.add(n);for(let n of t)i[e][n]=re(o,n)}else o={...o,...i[e]}}let a=await rt(o,e,n);for(let e of(0,a8.wn)(t.componentId,l))r.componentPropsNested[e]=a}break}case"BOOLEAN":case"VARIANT":case"TEXT":r.componentProps[l.rawProp]=o;break;case"INSTANCE_SWAP":{if((0,aZ.isJSXElement)(o)){let e=n.getCustomJSXElementOrNull(o.type);if(e?.type==="SIMPLE"){let a=e.typeInfo,i=a.defaultNodeId,s=await rt({...o.props,children:o.children},a,n);for(let e of(0,a8.wn)(t.componentId,l))r.componentProps[l.rawProp]=i,r.componentPropsNested[e]=s;break}}let e=(0,a4.c)(l.def.defaultValue),a=(0,a6.Ye)(l.def.defaultValue);if(e&&a){let i=a9(o,a),s=[];if(e.parentNode?.isStateGroup){for(let t of e.parentNode.reversedChildrenNodes)if("SYMBOL"===t.type){let e=t.variantProperties();if(e&&Object.entries(e).some(([e,t])=>i[e]===t)&&Object.entries(e).every(([e,t])=>!(e in i)||i[e]===t)){s=Object.keys(e),r.componentProps[l.rawProp]=t.guid;break}}}let c=Object.fromEntries(Object.entries(i).filter(([e,t])=>!s.includes(e)));if(0!==Object.keys(c).length){let e=await rt(c,a,n);for(let n of(0,a8.wn)(t.componentId,l))r.componentPropsNested[n]=e}}break}case"GROUPED_INSTANCE_SWAP":{let e=(0,a4.c)(l.def.defaultValue);if(e&&"SYMBOL"===e.type){let t=!1,n="object"==typeof o?o?.type??o?.description:"";if(n){let a=(0,a7.Lq)(l.def.groupName,e,n);if(a){t=!0,r.componentProps[l.rawProp]=a;break}}if(!t){let e=o?.description??o?.type??"";e&&(r.sharedPluginData[l.rawProp]=e)}}break}case"IMAGE":r.sharedPluginData[l.rawProp]=o?.id??o?.description??o?.alt??"";break;case"SLOT":{let e=Array.isArray(o)?o[0]:o;if(!e)break;let i=n.getCustomJSXElementOrNull(e.type);if(i?.type==="SIMPLE"){let a=i.typeInfo;r.componentProps[l.rawProp]=a.defaultNodeId;let o=await rt(e.props,a,n);for(let e of(0,a8.wn)(t.componentId,l))r.componentPropsNested[e]=o}else{let t=await n.createNodeFromJSX(e),i=nz.l7.ai("first-draft-setup-slot-node",()=>{let e=a.get(h.CUU.createSymbolFromNode(t.guid,h.Sie.PLUGIN));return e&&(e.name=`Slot for ${l.rawProp}`),e});if(i){let e=await n.getOrCreateSlotParent(n);nz.l7.ai("first-draft-setup-slot-node",()=>{e.appendChild(i)}),r.componentProps[l.rawProp]=i.guid}}break}default:(0,Y.assertNever)(l.def)}}return r}class rn{constructor({dsKitKey:e,reuseCache:t,publishedComponentToInsertResult:n,customJSXElementByName:a}){this.dsKitKey=e,this.reuseCache=t,this.publishedComponentToInsertResult=n,this.customJSXElementByName=a??{}}getComponentTypeSortOrder(e){switch(e){case"BUILDING_BLOCK":return 0;case"NONE":return 1;case"GROUPED_COMPONENT":return 2;default:return 3}}getCustomJSXElementOrNull(e){let t=e.toLowerCase();if(!t.startsWith(a8.FE.toLowerCase()))return null;if(t in this.customJSXElementByName)return this.customJSXElementByName[t];for(let[e,n]of Object.entries(this.publishedComponentToInsertResult))if("error"!==n.status&&e.toLowerCase()===t){let e=(0,a6.Ye)(n.guid);if(e){let n=ra(e,{});if(n)return this.customJSXElementByName[t]=n,n}}let n=(0,a6.DY)(t,{rootNodes:{dsKitKey:this.dsKitKey}});for(let e of(0===Object.keys(this.publishedComponentToInsertResult).length&&n.sort((e,t)=>this.getComponentTypeSortOrder(e.componentType)-this.getComponentTypeSortOrder(t.componentType)),n)){let n=ra(e,this.publishedComponentToInsertResult);if(n)return this.customJSXElementByName[t]=n,n}return this.customJSXElementByName[t]=null,null}async renderCustomJSXElementOrNull(e,t){let n=this.getCustomJSXElementOrNull(e.type);return n?await rr(n,e,t):null}}function ra(e,t){if((0,a7.vR)(e))return null;if(Object.entries(t).length>0){let n=t[e.jsxName];if(!n||"error"===n.status||!(n.key===e.key&&n.version===e.version))return null}return{type:"SIMPLE",name:e.jsxName,typeInfo:e}}async function rr(e,t,n){if(!e)return null;let{type:a,props:r,children:i}=t;try{switch(e.type){case"SIMPLE":{let t=e.typeInfo,a=t.defaultNodeId,l=await rt({...r,children:i},t,n);return{type:"Instance",props:{componentId:a,componentProps:l.componentProps,componentPropsNested:l.componentPropsNested,nestedInstancesVisibility:l.nestedInstancesVisibility,sharedPluginData:Object.fromEntries(Object.entries({...l.sharedPluginData,type:t.jsxName}).map(([e,t])=>"string"!=typeof t?[e,JSON.stringify(t)]:[e,t]))},children:[]}}case"GROUP":throw Error("Not implemented");default:(0,Y.assertNever)(e)}}catch(e){(0,ew.$D)(l.FigmaTeam.AI_GENERATION,e,{extra:{type:a,props:r}})}return null}var ri=n(881773),rl=n(897459);function ro(e){let t;switch(e?.toLowerCase()){case"small":t="w-60";break;case"medium":t="w-80";break;default:t="w-100"}return`flex flex-col ${t}`}function rs(e){return(0,aZ.isJSXElement)(e)?e:{type:"AutoLayout",props:{className:"w-1 h-1"},children:[]}}function rc(e){return e&&Array.isArray(e)?e.map(rs):[]}function rd(...e){return(0,rl.QP)(e.join(" "))}let ru={Unhandled:function({className:e,msg:t=""}){return{type:"AutoLayout",props:{className:rd("flex justify-center items-center",e??"","border bg-red-100 border-red-100")},children:[{type:"Text",props:{},children:[t]}]}},VStack:function({children:e,...t}){return rE({...t,direction:"vertical",children:e})},HStack:function({children:e,...t}){return rE({...t,direction:"horizontal",children:e})},Box:rb,Image:function({description:e,w:t,aspect:n,className:a="",sharedPluginData:r}){let i=[],l=36;return"small"===t?(l=12,i.push(rh("w",12))):"regular"===t?i.push(rh("w",36)):"large"===t?(l=85.5,i.push("w-[342px]")):(l=t,i.push(rh("w",t))),"video"===n?i.push(rh("h",9*l/16)):i.push(rh("h",l)),{type:"AutoLayout",props:{sharedPluginData:{...r,isImage:"true",description:e},className:rd("flex p-2 bg-[#eee]",...i,a)},children:[{type:"Text",props:{className:"text-sm opacity-50 w-full h-full"},children:[e??"Image description"]}]}},DummyBlock:function({text:e}){return{type:"AutoLayout",props:{direction:"vertical",className:"w-full h-fit p-4 min-h-[100px] border-[#eee]"},children:[{type:"Text",props:{},children:[e]}]}},MobileSingleCol:({header:e,mainContent:t,footer:n})=>({type:"AutoLayout",props:{className:"w-[393px] min-h-[852px] flex flex-col",sharedPluginData:{type:"VStack",isLayoutNode:"true"}},children:[rs(e),{type:"AutoLayout",props:{className:"w-full flex flex-col",sharedPluginData:{type:"VStack",fillContainerHeight:"true"},overflow:"visible",name:"Main Content"},children:rc(t)},rs(n)]}),DesktopSingleCol:({header:e,mainContent:t,footer:n})=>({type:"AutoLayout",props:{className:"w-[1440px] min-h-[900px] px-12 flex flex-col",sharedPluginData:{type:"VStack",isLayoutNode:"true"}},children:[rs(e),{type:"AutoLayout",props:{className:"w-full flex py-12",sharedPluginData:{type:"HStack"},overflow:"visible",name:"Container"},children:[{type:"AutoLayout",props:{className:"w-full flex flex-col",sharedPluginData:{type:"VStack"},overflow:"visible",name:"Main Content"},children:rc(t)}]},rs(n)]}),DesktopTwoColWithLeftSidebar:({header:e,sidebarContent:t,sidebarWidth:n,mainContent:a,footer:r})=>{let i=ro(n);return{type:"AutoLayout",props:{className:"w-[1440px] min-h-[900px] px-12 flex flex-col",sharedPluginData:{type:"VStack",isLayoutNode:"true"}},children:[rs(e),{type:"AutoLayout",props:{className:"w-full flex gap-12",sharedPluginData:{type:"HStack"},name:"Container"},children:[{type:"AutoLayout",props:{className:i,sharedPluginData:{type:"VStack"},overflow:"hidden",name:"Sidebar"},children:rc(t)},{type:"AutoLayout",props:{className:"w-full flex flex-col",sharedPluginData:{type:"VStack"},overflow:"hidden",name:"Main Content"},children:rc(a)}]},rs(r)]}},DesktopTwoColWithRightSidebar:({header:e,mainContent:t,sidebarContent:n,sidebarWidth:a,footer:r})=>{let i=ro(a);return{type:"AutoLayout",props:{className:"w-[1440px] min-h-[900px] px-12 flex flex-col",sharedPluginData:{type:"VStack",isLayoutNode:"true"}},children:[rs(e),{type:"AutoLayout",props:{className:"w-full flex gap-12",sharedPluginData:{type:"HStack"},name:"Container"},children:[{type:"AutoLayout",props:{className:"w-full flex flex-col",sharedPluginData:{type:"VStack"},name:"Main Content"},children:rc(t),overflow:"hidden"},{type:"AutoLayout",props:{className:i,sharedPluginData:{type:"VStack"},overflow:"hidden",name:"Sidebar"},children:rc(n)}]},rs(r)]}},div:rb,p:({children:e,...t})=>({type:"Text",props:{width:"fill-parent",...t},children:e})},rm=new Set(["AutoLayout","Frame","Rectangle","Ellipse","Text","SVG","Image","Line","Fragment","Span","Instance"]);async function rp(e,t,n){if(t?.type==="Text"||t?.type==="Span")return e.trim();let a=t?.props??{};return await rf({type:"Text",props:{width:"hug-contents",height:"hug-contents",...a},children:[e]},t,n)}async function r_(e,t,n){if(!(0,aZ.isJSXElement)(e))return null;let{type:a,props:r,children:i}=e;if(r&&"class"in r&&!("className"in r)&&(r.className=r.class,delete r.class),(""===a||"React.Fragment"===a)&&(a="Fragment"),r?.children&&(i=Array.isArray(r?.children)?r?.children:[r?.children],delete r.children),i=(i??[]).flat(10),a in ru){let e=ru[a]({...r,children:i});return await rf(e,t,n)}let l=(await Promise.all((i??[]).flat(10).map(t=>rf(t,e,n)))).filter(Boolean);"Instance"===a&&n.getCustomJSXElementOrNull(r.component)&&(a=r.component,delete r.component);let o=await n.renderCustomJSXElementOrNull({type:a,props:r,children:l});if(o)return n.instrumentation?.trackComponentLookupSuccess(),o;if((0,X.kc)().first_draft_generate_v3&&"Placeholder"===a)return{type:"AutoLayout",props:{name:r.name,className:"w-full h-full",sharedPluginData:{...r.sharedPluginData,isPlaceholder:"true"}},children:[{type:"Text",props:{className:"text-sm text-gray-400"},children:[r.name??"Placeholder"]}]};if(!rm.has(a))return(n.instrumentation?.trackComponentLookupFailure(),(0,X.kc)().first_draft_debug)?await rf({type:"Unhandled",props:{msg:`Unknown node type: ${a}`,className:r?.className??""},children:[]},t,n):null;let{className:s,margin:c,...d}=r??{};if(s)for(let[e,t]of Object.entries((0,ri.Pr)(s,a)))d[e]=t;return n.instrumentation?.trackPrimitiveUsage(),{type:a,props:d,children:l}}async function rg(e,t){return(await Promise.all(e.map(e=>rf(e,null,t)))).filter(e=>!!e)}function rf(e,t,n){return"string"==typeof e?rp(e,t,n):(0,aZ.isJSXElement)(e)?r_(e,t,n):Promise.resolve(null)}function rh(e,t){return"mobile-screen-width"===t?`${e}-96`:"mobile-screen-height"===t?`${e}-[568px]`:"hug"===t?`${e}-fit`:"full"===t?`${e}-full`:`${e}-[${Math.round(4*t)}px]`}function rE({direction:e,children:t,className:n=""}){let a="vertical"===e;return{type:"AutoLayout",props:{sharedPluginData:{type:a?"VStack":"HStack"},className:rd("flex items-start w-fit h-fit",a?"flex-col":"flex-row",n)},children:t}}let ry=["flex","justify","items","content","gap","grow","shrink","p-","m-","w-","h-"];function rb(e){if((0,X.kc)().first_draft_direct_gen){let{children:t,name:n,className:a=""}=e,r={className:rd("gap-4",!function(e){if(e.includes("flex-col"));else if(e.includes("flex"))return!1;return!0}(a)?"flex":"flex flex-col",a.split(" ").filter(e=>(function(e){for(let t of ry)if(e.startsWith(t))return!0;return!1})(e)).join(" "))};return n&&(r.name=n),{type:"AutoLayout",props:r,children:t}}return rE({...e,direction:"vertical"})}var rv=n(850213),rC=n(346124),rw=n(774191);function rT(e){let t=new Set,n=new Set;return e.forEach(e=>{7===e.length?t.add(e):n.add(e)}),[Array.from(t),Array.from(n)]}function rS(e,t){let{bg:n,content:a}=t,r=(0,nZ.HD)(e)?aG.lH.DARK:aG.lH.LIGHT,i=(0,nZ.F_)(e),l=(0,rw.oB)(e),o=n.filter(e=>e!==i),[s,c]=rT(o),d=function(e){let t={};return e.forEach(e=>{t[e]=(t[e]||0)+1}),t}(o),u=s.sort((e,t)=>d[t]-d[e]),m=u.find(e=>{let t=(0,nZ.tK)(e);if(!t)return!1;let n=(0,rw.oB)(t);return(0,aK.x)(n.l,r)&&!(0,rC.areClose)(n.l,l.l,.12)});if(m)return m;let[p,_]=rT(a),g=p.find(e=>{let t=(0,nZ.tK)(e);return t&&(0,aG.Yx)((0,rw.oB)(t).l,aG.lg.CONTENT)});if(g)return g;if((0,aK.x)(l.l,r)&&!(0,aK.c4)(l.l))return i;let f=c.sort((e,t)=>d[t]-d[e]).find(e=>{let t=(0,nZ.tK)(e);if(!t)return!1;let n=(0,rw.oB)(t);return(0,aK.x)(n.l,r)});return f?f:_.find(e=>{let t=(0,nZ.tK)(e);return t&&(0,aG.Yx)((0,rw.oB)(t).l,aG.lg.CONTENT)})||(u.length?u[0]:p.length?p[0]:i)}function rx(e,t,n,a,r,i){e&&function e(t,n,a,r){if(t.name.toLowerCase().includes("swatch"))return;let i=a[t.guid];if((0,aK.oR)({node:t,getNewColor:n,options:{...r,modeChanged:!1,role:(0,aG.Dk)(t),originalSL:i}}),t.childrenNodes.length){let i=t.fills.some(e=>"IMAGE"===e.type),l=(0,aK.gU)(t.fills,i?void 0:r.parentFillColor);t.childrenNodes.forEach(t=>{e(t,n,a,{...r,parentFillColor:l})})}}(e,(e,n)=>(0,aK.Jv)(e,{...n,brandColor:t}),a,{mode:n,currentBrandHex:r,parentFillColor:i})}function rk(e){let t=(0,aK.X6)(e);if(t)return(0,nZ.HD)(t)?aG.lH.DARK:aG.lH.LIGHT}function rN(e,t,n){e&&function e(t,n,a){let r=t.fills.some(e=>"IMAGE"===e.type),i=!r&&a.modeChanged;if((0,aK.oR)({node:t,getNewColor:n,options:{...a,modeChanged:i,role:(0,aG.Dk)(t)}}),t.childrenNodes){let l=(0,aK.gU)(t.fills,r?void 0:a.parentFillColor);t.childrenNodes.forEach(t=>{e(t,n,{...a,modeChanged:i,parentFillColor:l})})}}(e,(e,t)=>(0,aK.Jv)(e,{...t,brandColor:void 0}),{mode:t,modeChanged:!0,currentBrandHex:n})}var rI=n(656020),rA=n(747202),rO=n(104064),rL=n(405551);function rD(e,t,n){let a=h.XJn.getCustomizableVariableName(n.guid,e);if(!a)return;let r=(0,rL.tm)(a);if(r)return t[r]}let rR={bottomLeftRadius:"rectangleBottomLeftCornerRadius",bottomRightRadius:"rectangleBottomRightCornerRadius",topLeftRadius:"rectangleTopLeftCornerRadius",topRightRadius:"rectangleTopRightCornerRadius"},rM={itemSpacing:"stackSpacing",paddingTop:"stackTopPadding",paddingBottom:"stackBottomPadding",paddingLeft:"stackLeftPadding",paddingRight:"stackRightPadding"};async function rP(e,t,n){let a=h.XJn.inheritedTextStyleGuid(e.guid);if(null===a)return;let r=e4.q.instance.get(a);if(r&&n.variableMaps?.fontVariableMap&&"fontFamily"in r.boundVariablesForStyle){let a=r.boundVariablesForStyle.fontFamily,i=function(e,t,n){let a=h.XJn.getCustomizableVariableName(t.guid,e);if(!a)return null;let r=(0,rL.tm)(a);return r?n[r]??null:null}(a.id,e,n.variableMaps.fontVariableMap);if(i)try{await (0,rI.uW)(i.fontName),nz.l7.ai("first-draft-set-font-name",()=>{e.fontName=i.fontName,i.letterSpacing&&(e.letterSpacing=i.letterSpacing)}),t[a.id]=i.fontName.family}catch(e){(0,ew.$D)(l.FigmaTeam.AI_GENERATION,e)}}}async function rF(e){await Promise.all(e.node.childrenNodes.map(t=>rB({...e,node:t}))),(0,rv.V5)(e.node)}async function rB(e){var t;let{node:n,variableOverrideMap:a,theme:r,colorOptions:i}=e;!function(e,t){if("HORIZONTAL"===e.stackMode||"VERTICAL"===e.stackMode)for(let[n,a]of Object.entries(rM)){let r=e.boundVariables&&e.boundVariables[n];r&&nz.l7.ai("first-draft-override-spacing",()=>{if(t.variableMaps){let n=rD(r.id,t.variableMaps.numberVariableMap,e)??void 0;void 0!==n&&(e[a]=(0,rO.nV)(e[a],n,1))}})}}(n,r),function(e,t,n){if(e.boundVariables)for(let[a,r]of Object.entries(rR)){let i=e.boundVariables&&e.boundVariables[a];i&&nz.l7.ai("first-draft-override-radius",()=>{if(n?.variableMaps){let a=rD(i.id,n.variableMaps.numberVariableMap,e)??void 0;if(void 0!==a){let n=(0,rO.UO)(e,e[r],a,1);e[r]=n,t[i.id]=n}}})}}(n,a,r),"TEXT"===n.type&&await rP(n,a,r);let l=n.fills.some(e=>"IMAGE"===e.type),o=!l&&i.modeChanged;if(t={node:n,getNewColor:(e,t)=>{let a=t.varId&&r?function(e,t,n){if(!t.variableMaps)return;let a=h.XJn.getCustomizableVariableName(n.guid,e);if(!a)return;let r=(0,rL.tm)(a);if(r)return t.variableMaps.colorVariableMap[r]}(t.varId,r,n):void 0;return(0,aK.Jv)(e,{...t,brandColor:a})},variableOverrideMap:a,options:{...i,modeChanged:o,role:(0,aG.Dk)(n)}},nz.l7.ai("first-draft-override-paints",()=>{(0,aK.oR)(t)}),n.childrenNodes.length){let e=(0,aK.gU)(n.fills,l?void 0:i.parentFillColor);await rF({node:n,variableOverrideMap:a,theme:r,colorOptions:{...i,modeChanged:o,parentFillColor:e}})}}async function rU(e,t,n){let a=Object.keys(n?.variableMaps?.colorVariableMap??{}).length>0||Object.keys(n?.variableMaps?.numberVariableMap??{}).length>0;if(!n||!a){(0,rv.OH)(e);return}await rB({node:e,variableOverrideMap:t,theme:n,colorOptions:{mode:n.darkMode?aG.lH.DARK:aG.lH.LIGHT,modeChanged:!!n.darkMode}})}async function rG(e){for(let t of(0,rA._F)(e,["INSTANCE","FRAME"],{sharedPluginData:{namespace:"jsx",keys:["theme"]}})){(0,aP.xF)(t.guid);let e=t.getSharedPluginData("jsx","theme");if(e)try{let n=JSON.parse(e),a=az(n);await rU(t,{},a)}catch(t){(0,ew.x1)("First Draft theming","Failed to parse theme",{themeStr:e,e:t})}}}var rK=n(33604);let rV="Slot Parent";async function rH(e){let t=e4.q.instance;for(let e of t.getCurrentPage()?.reversedChildrenNodes??[])if(e.name===rV)return e;return await e.createNodeFromJSX({type:"AutoLayout",props:{name:rV,className:"flex flex-col w-fit h-fit"},children:[]})}async function rz(e,t){return await rg(e,t)}async function rW(e){let t=(0,a3.D)({enableNativeJsx:!0});t.skipInvisibleInstanceChildren=!0;let n=e4.q.instance;return await Promise.all(e.map(async(e,a)=>{let r=await t.createNodeFromJSXAsync(e),i=n.get(r.id);return 0===a&&(i.localOpacity=0),i}))}async function rj(e,t,n){let a=(0,rK.uP)(e,{ignoreOpacity:!0}),r=(0,rK.rO)(e,a);nz.l7.ai("first-draft-override-paints",()=>{let n=t.darkMode?aG.lH.DARK:aG.lH.LIGHT;n!==rk(e)&&rN(e,n);let a=(0,nZ.tK)(t.brandColor);if(a){let t=(0,aK.gU)(e.fills);t&&e.childrenNodes.forEach(e=>{rx(e,a,n,{},"",t)})}}),nz.l7.ai("first-draft-remove-fill",()=>{e.fills=[]});try{await (0,rK.jR)(e,(0,rK.k5)({fontFamilies:r.fontFamilies},{fontFamilies:t.fontFamilies}),n)}catch(e){(0,ew.$D)(l.FigmaTeam.AI_GENERATION,Error("first-draft: applyThemeProperties font failed to load"))}}async function r$(e,t,n){let a={};for(let r of e){if(nz.l7.ai("first-draft-set-plugin-data",()=>{if(n.frameName&&r.name!==n.frameName&&(r.name=n.frameName),t&&r.setSharedPluginData(aj.SV,"jsx",t),n.theme&&r.setSharedPluginData(aj.SV,"theme",JSON.stringify(n.theme)),n.sharedPluginData)for(let[e,t]of Object.entries(n.sharedPluginData))r.setSharedPluginData(aj.SV,e,t)}),n.addWireframeBorder&&nz.l7.ai("first-draft-set-wireframe-border",()=>{(0,aP._Y)(r)}),(0,aP.jZ)(r,n.dsKitKey,n.clientLifecycleId),(0,X.kc)().first_draft_direct_gen?(0===r.fills.length&&(r.fills=[{type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1}]),(0,aP.k$)(r)):n.autoFillParent&&r&&(0,aP.tG)(r),n.theme?await rU(r,a,n.theme):(0,rv.OH)(r),n.themeProperties){if(!n.deviceType)throw Error("deviceType must be provided if themeProperties is provided");await rj(r,n.themeProperties,n.deviceType)}n.isEval&&await rG(r),(0,X.kc)().first_draft_generate_v3&&n.registerV3Components&&n.v3ComponentLocations&&(0===r.fills.length&&(r.fills=[{type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1}]),(0,a2.hV)(e4.q.instance,r,e=>{if("true"===e.getSharedPluginData("jsx","isPlaceholder")){let t=e.guid,a=e.name;n.v3ComponentLocations[a]=t}}))}return{themeOverrideMap:a}}async function rq({prevJsxJSON:e,jsxStr:t,jsxJSON:n,prevExpandedJsx:a,options:r},i){let l=function(e,t){let n=new rn({dsKitKey:e.dsKitKey,reuseCache:!!e.prevNodeId,publishedComponentToInsertResult:e.componentNameToInsertResult??{},customJSXElementByName:e.componentNameToCustomJSXElement??{}}),a={getCustomJSXElementOrNull:e=>n.getCustomJSXElementOrNull(e),renderCustomJSXElementOrNull:async e=>await n.renderCustomJSXElementOrNull(e,a),getOrCreateSlotParent:rH,createNodeFromJSX:async e=>{let t=await rz([e],a),[n]=await rW(t);return n.removeLocalOpacity(),n},instrumentation:t};return a}(r,i),o=e4.q.instance,s=(0,a3.D)({enableNativeJsx:!0});if(s.skipInvisibleInstanceChildren=!0,i?.resetComponentStats(),r.nodeToReplace&&!r.prevNodeId){let e=await rz(n,l);if(e.length>1)throw Error("Not implemented");let a=await s.createNodeFromJSXAsync(e[0]),i=o.get(a.id);if(!i)throw Error("Could not find new node");let c=o.get(r.nodeToReplace);if(!c)throw(0,ew.x1)("first-draft","Could not find node to replace",{nodeToReplace:r.nodeToReplace}),Error("Could not find node to replace");nz.l7.ai("first-draft-insert-jsx-replace-nodes",()=>{c.childrenNodes.forEach(e=>{e.removeSelfAndChildren()}),c.insertChild(i,0)}),i.materializeDescendants(),(0,aP.k$)(c);let d=await r$([i],t,r);return{insertNodeIds:[i.guid],expandedJsx:e,customizationResult:d}}if(!r.prevNodeId){if(0!==e.length)throw Error("prevJsxJSON should be null");let a=await rz(n,l);if(a.length>1)throw Error("Not implemented");let[i]=await rW(a);nz.l7.ai("first-draft-insert-jsx",()=>{if(r.parentNodeId){let e=o.get(r.parentNodeId);if(!e)throw(0,ew.x1)("first-draft","Could not find parent node with parentNodeId",{parentNodeId:r.parentNodeId}),Error("Could not find parent node with parentNodeId");let t=[i];for(let n of(t.reverse(),t))r.insertAtIndex?r.insertAtIndex===e.childrenGuids.length?e.appendChild(n):e.insertChild(n,r.insertAtIndex):e.appendChild(n)}}),i?.materializeDescendants();let s=await r$([i],t,r);return await (0,aP.U_)(i,r),i.removeLocalOpacity(),{insertNodeIds:[i.guid],expandedJsx:a,customizationResult:s}}let c=o.get(r.prevNodeId);if(!c)throw(0,ew.x1)("first-draft","Could not find node with prevNodeId",{prevNodeId:r.prevNodeId}),Error("Could not find node with prevNodeId");let d=await rz(n,l);if(1!==a.length||1!==d.length)throw Error("Not implemented");let u=await s.reconcileNodeFromJSXAsync({id:c.guid},a[0],d[0]),m=o.get(u.id);m?.materializeDescendants();let p=await r$([m],t,r);return r.shouldAnimateLoading&&r.doneTextLayerIds&&function(e,t,n){let a=[];for(let r of((0,a2.hV)(e,t,e=>{"TEXT"===e.type&&a.push(e)}),a))n.has(r.guid)||((0,aP.us)(r)?(h.zuo.cancelAllAnimationsForNode(r.guid),n.add(r.guid)):h.zuo.isAnimating(r.guid)||r.setOpacityWithAnimation(1,a5._E.forOpacityOscillation(45,.25,.8,60),"first-draft-text-layer-opacity"))}(o,m,r.doneTextLayerIds),m.guid!==r.prevNodeId&&await (0,aP.U_)(m,r),{insertNodeIds:[m.guid],expandedJsx:d,customizationResult:p}}var rY=n(172601),rX=n(742808);e7.object({runtimeDuration:e7.number(),firstByteReceivedAtOffset:e7.number(),jsxStreamDuration:e7.number(),numComponents:e7.number(),componentLookupSuccesses:e7.number(),primitiveComponents:e7.number(),componentLookupFailures:e7.number(),numImages:e7.number(),imageFailures:e7.number(),imageSuccesses:e7.number(),imageBlocked:e7.number(),firstImageLoadedAtOffset:e7.number(),lastStreamByteReceivedAtOffset:e7.number(),imageDurations:e7.array(e7.object({start:e7.number(),end:e7.number(),duration:e7.number(),status:e7.enum(["success","failure","blocked"])}))});class rJ{constructor(e){this.type=e,this.startTime=0,this.instrumentationData={runtimeDuration:-1,firstByteReceivedAtOffset:-1,jsxStreamDuration:-1,numComponents:0,primitiveComponents:0,componentLookupSuccesses:0,componentLookupFailures:0,numImages:0,imageFailures:0,imageSuccesses:0,imageBlocked:0,firstImageLoadedAtOffset:-1,lastStreamByteReceivedAtOffset:-1,imageDurations:[]},this.imageProgressEmitter=new rY.b("imageProgressEmitter")}start(){this.startTime=Date.now()}trackFirstByteReceived(){-1===this.instrumentationData.firstByteReceivedAtOffset&&(this.instrumentationData.firstByteReceivedAtOffset=Date.now()-this.startTime)}resetComponentStats(){this.instrumentationData.numComponents=0,this.instrumentationData.componentLookupSuccesses=0,this.instrumentationData.componentLookupFailures=0,this.instrumentationData.primitiveComponents=0,this.imageProgressEmitter.trigger("statusChanged")}trackComponentLookup(){this.instrumentationData.jsxStreamDuration=Date.now()-this.instrumentationData.firstByteReceivedAtOffset-this.startTime,this.instrumentationData.numComponents+=1}trackPrimitiveUsage(){this.instrumentationData.primitiveComponents+=1,this.instrumentationData.jsxStreamDuration=Date.now()-this.instrumentationData.firstByteReceivedAtOffset-this.startTime}trackComponentLookupSuccess(){this.trackComponentLookup(),this.instrumentationData.componentLookupSuccesses+=1}trackComponentLookupFailure(){this.trackComponentLookup(),this.instrumentationData.componentLookupFailures+=1}trackLastStreamByteReceived(){this.instrumentationData.lastStreamByteReceivedAtOffset=Date.now()-this.startTime,this.instrumentationData.jsxStreamDuration=this.instrumentationData.lastStreamByteReceivedAtOffset-this.instrumentationData.firstByteReceivedAtOffset}trackFinished(e){this.instrumentationData.runtimeDuration=Date.now()-this.startTime;let t={type:this.type,status:e},n=[{metric:"first_draft.client.runtime_duration",value:this.instrumentationData.runtimeDuration,tags:t}];-1!==this.instrumentationData.firstByteReceivedAtOffset&&(n.push({metric:"first_draft.client.num_components",value:this.instrumentationData.numComponents,tags:t},{metric:"first_draft.client.component_lookup_failures",value:this.instrumentationData.componentLookupFailures,tags:t},{metric:"first_draft.client.first_byte_received_at_offset",value:this.instrumentationData.firstByteReceivedAtOffset,tags:t},{metric:"first_draft.client.jsx_stream_duration",value:this.instrumentationData.jsxStreamDuration,tags:t},{metric:"first_draft.client.num_images",value:this.instrumentationData.numImages,tags:t},{metric:"first_draft.client.last_stream_byte_received_at_offset",value:this.instrumentationData.lastStreamByteReceivedAtOffset,tags:t}),this.instrumentationData.numImages>0&&n.push({metric:"first_draft.client.image_failures",value:this.instrumentationData.imageFailures,tags:t},{metric:"first_draft.client.image_successes",value:this.instrumentationData.imageSuccesses,tags:t},{metric:"first_draft.client.image_blocked",value:this.instrumentationData.imageBlocked,tags:t},{metric:"first_draft.client.first_image_loaded_at_offset",value:this.instrumentationData.firstImageLoadedAtOffset,tags:t})),(0,rX.rI)(n)}logImageLoadBlocked(){let e=Date.now();this.instrumentationData.numImages++,this.instrumentationData.imageBlocked++,this.imageProgressEmitter.trigger("statusChanged"),this.instrumentationData.imageDurations.push({start:this.startTime,end:e,duration:e-this.startTime,status:"blocked"})}async logImageLoad(e){let t="success",n=Date.now()-this.startTime;try{this.instrumentationData.numImages++,this.imageProgressEmitter.trigger("statusChanged"),await e()}catch(e){throw t="failure",e}finally{let e=Date.now()-this.startTime;this.instrumentationData.imageDurations.push({start:n,end:e,duration:e-n,status:t}),-1===this.instrumentationData.firstImageLoadedAtOffset&&(this.instrumentationData.firstImageLoadedAtOffset=e),"success"===t?this.instrumentationData.imageSuccesses++:this.instrumentationData.imageFailures++,this.imageProgressEmitter.trigger("statusChanged")}}}var rZ=n(707465),rQ=n(479296);function r0(e){let t=new Set([]),n=[...e];for(;n.length;){let e=n.pop();if(e){for(let a of(e.type.startsWith(a8.FE)&&t.add(e.type),e.children))"string"!=typeof a&&n.push(a);for(let t of Object.values(e.props))if("string"!=typeof t){if((0,aZ.isJSXElement)(t))n.push(t);else if(Array.isArray(t))for(let e of t)(0,aZ.isJSXElement)(e)&&n.push(e)}}}return t}async function r1(e,t,n){if(t?.type!=="LIBRARY")throw Error("Can only insert library components");if(!n)return(0,ew.$D)(l.FigmaTeam.AI_GENERATION,Error("[First Draft] Attempted to insert component without kitContents")),{status:"error"};let a=function(e,t){let n=t.toLowerCase();if(e.components[n]){let t=e.components[n];return{assetType:"component",key:t.key,version:t.version}}if(e.state_groups[n]){let t=e.state_groups[n];return{assetType:"state_group",key:t.key,version:t.version}}return null}(n,e);if(!a)return{status:"error"};let{assetType:r,key:i,version:o}=a;if("component"===r){let t=h.XJn.getComponentByKeyAndVersion(i,o);if(t)return{status:"success",key:i,version:o,jsxName:(0,a8.WG)(e),guid:t}}if("state_group"===r){let t=h.XJn.getStateGroupByKeyAndVersion(i,o);if(t)return{status:"success",key:i,version:o,jsxName:(0,a8.WG)(e),guid:t}}try{let e=ed.D?.getState().fileVersion||0,t=await (0,tm.GD)(`/api/file_proxy/${r}/${i}/version/${o}/canvas`,{fv:e.toString()},{responseType:"arraybuffer"}),n=new Uint8Array(t.response),a=h.NfO.deserializeProductComponentFromBuffer(i,n),l=e4.q.instance.get(a);if(!l)throw Error("Deserialized component not found in scene graph");return{status:"success",key:i,version:o,jsxName:(0,a8.WG)(l.name),guid:a}}catch(e){if(e instanceof tm.Dr&&e.status>=400)return{status:"error"};throw e}}let r2=(0,rQ.n)(async function(e,t){let n=(0,rZ.U2)(ed.D?.getState().selectedView),a=await tm.Ay.post(`/api/first_draft/kit_contents/${e.key}`,{jsx_names:t,file_key:n});return a?.data?.meta??null});async function r5({dsKitKey:e,jsxJSON:t,componentNameToInsertResult:n}){if("LIBRARY"!==e.type)return;let a=r0(t),r=new Set;for(let e of a)e in n||r.add(e);if(0===r.size)return;let i=await r2(e,Array.from(r)),l=i?.components??{},o=(0,aj.Q$)(l),s=i?.state_groups??{},c={components:o,state_groups:(0,aj.Q$)(s)};await Promise.all(Array.from(r).map(async t=>{let a=await r1(t,e,c);return"success"===a.status&&(n[a.jsxName]=a),a}))}var r3=n(55069);let r4=e=>Object.keys(e).includes("id");async function r6(e){let t=await a1(e);if(!t||0===t.length)return t;let n=function(e){let t=e.lastIndexOf(">");return -1!==t?e.substring(0,t+1):e}(e);if(!n||!n.endsWith(">"))return t;let a=await a1(n);if(!a||0===a.length)return t;let r=1,i=e=>{if(e&&"object"==typeof e)for(let[t,n]of Object.entries(e))t.startsWith("image")?Array.isArray(n)?n.every(r4)&&(e[t]=n.map(()=>{let e={id:r.toString()};return r++,e})):r4(n)?(e[t]={id:r.toString()},r++):i(n):i(n)};return function e(t,n,a){let r=!0;for(let i=0;i<t.length;i++){let l=t[i],o=n[i];if(!o||!l){r=!1;break}if("string"==typeof o){"string"!=typeof l&&(r=!1),r=l===o;continue}if("string"!=typeof l){if(l.type!==o.type){r=!1;continue}for(let[t,n]of(e(l.children,o.children,a)||(r=!1),Object.entries(o.props))){let i=l.props[t];if((0,aZ.isJSXElement)(n)&&(0,aZ.isJSXElement)(i))e([i],[n],a)||(r=!1);else if(Array.isArray(n)&&Array.isArray(i))for(let t=0;t<n.length;t++)t>=i.length&&(r=!1),(0,aZ.isJSXElement)(n[t])&&(0,aZ.isJSXElement)(i[t])?e([i[t]],[n[t]],a)||(r=!1):a0()(i[t],n[t])||(r=!1);else"isPartial"===t?r=i===n:a0()(i,n)||(r=!1)}r&&a(o)}}return r}(a,t,e=>{("Image"===e.type||"Instance"===e.type||e.type.startsWith("Component"))&&(i(e.props),e.props={...e.props,sharedPluginData:{...e.props.sharedPluginData,isDone:"true"}})}),t}async function r8(e,t,n={}){var a;let r=(0,aj.Z$)(e.jsxStr),i=r&&""!==r?r:e.jsxStr,l=await r6(i);if(!l||0===l.length||l.some(e=>!e)||!(void 0!==(a=l[0]).type&&""!==a.type)||(n.prevJsxStr??"")===i)return{};await n.onBeforeInsertJSX?.(l);let o={prevNodeId:n.prevNodeId,isIncomplete:!function(e){let t=e.match(/<([^\/\s>]+)[^>]*>/),n=e.match(/<\/([^>]+)>/g)?.pop();return!!t&&!!n&&t[1]===n.replace("</","").replace(">","")}(i),autoFillParent:!0,insertBehavior:"viewport-ease",shouldGenerateImages:!0,...e.options},{insertNodeIds:s,customizationResult:c,expandedJsx:d}=await rq({jsxStr:i,jsxJSON:l,prevJsxJSON:n.prevJsxJSON??[],prevExpandedJsx:n.prevExpandedJsx??[],options:o},t);return{insertNodeIds:s,customizationResult:c,jsxStr:i,jsxJSON:l,expandedJsx:d}}function r7({onAfterInsertPartialJsx:e,onReset:t,onImageProgress:n,shouldContinueStream:a,clientLifecycleId:i,insertType:o}){let s=(0,r.useRef)({}),c=(0,r.useRef)(null),d=(0,r.useRef)({}),u=(0,r.useRef)({}),m=(0,r.useRef)({}),p=(0,r.useRef)(new rJ(o||"generate")),_=(0,r.useRef)({}),g=(0,r.useCallback)(async t=>{try{s.current.isRunning=!0,s.current.donePromise=(async()=>{try{let e={jsxStrLength:t.jsxStr?.length,options:{parentNodeId:t.options.parentNodeId,isIncomplete:t.options.isIncomplete,prevNodeId:t.options.prevNodeId},clientLifecycleId:i},n={...e,jsxStr:t.jsxStr};(0,ew.ED)("first-draft","Inserting Streamed JSX Updates",e,{createSentryBreadcrumb:!0,logToConsole:ew.NU.NEVER}),(0,ew.ED)("first-draft","Inserting Streamed JSX Updates",n,{createSentryBreadcrumb:!1}),s.current.doneTextLayerIds=s.current.doneTextLayerIds||new Set,s.current.componentNameToCustomJSXElement=s.current.componentNameToCustomJSXElement||{},s.current.componentNameToInsertResult=s.current.componentNameToInsertResult||{};let{insertNodeIds:a,customizationResult:l,jsxJSON:o,jsxStr:u,expandedJsx:m}=await r8({...t,options:{...t.options,componentNameToInsertResult:s.current.componentNameToInsertResult,componentNameToCustomJSXElement:s.current.componentNameToCustomJSXElement,shouldAnimateLoading:(0,X.kc)().first_draft_animations,doneTextLayerIds:s.current.doneTextLayerIds,clientLifecycleId:i}},p.current,{prevNodeId:c.current,prevJsxStr:s.current.jsxStr,prevJsxJSON:s.current.jsxJSON,prevExpandedJsx:s.current.expandedJsx,onBeforeInsertJSX:async e=>{await r5({jsxJSON:e,dsKitKey:t.options.dsKitKey,componentNameToInsertResult:s.current.componentNameToInsertResult??{}})}});if(!a){if(void 0===o)return;throw Error("Failed to insert any nodes")}if(a.length>1)throw Error("Expected at most one node to be inserted");(0,aP.OJ)(a[0]),c.current!==a[0]&&(c.current&&(0,r3.ks)(c.current),(0,r3.Vm)(a[0],r.createElement(r.Fragment,null),{overflowHidden:!0})),c.current=a[0],d.current={...d.current,...l?.themeOverrideMap??{}},s.current.jsxStr=u,s.current.jsxJSON=o,s.current.expandedJsx=m,s.current.queuedEffects=s.current.queuedEffects||{}}catch(e){(0,ew.$D)(l.FigmaTeam.AI_GENERATION,e instanceof Error?e:Error(e)),c.current&&!e4.q.instance.get(c.current)&&(c.current=null,s.current.jsxStr=void 0,s.current.jsxJSON=void 0,s.current.expandedJsx=void 0,_.current={})}try{if(c.current){if(t.options?.shouldGenerateImages){if(t.options.imageArgs)(0,aP.Ms)({containingNodeId:c.current,queuedEffects:s.current.queuedEffects,shouldContinueStream:a,imagesTrace:m.current,jsxJSON:s.current.jsxJSON,initialUserPrompt:t.options.imageArgs?.initialUserPrompt||"",clientLifecycleId:i,instrumentationRef:p});else throw Error("Tried to generate images without image args")}(0,aP.D9)(c.current,s.current.queuedEffects,t.options),(0,aP.fE)({containingNodeId:c.current}),e?.(c.current)}}catch(e){(0,ew.$D)(l.FigmaTeam.AI_GENERATION,e instanceof Error?e:Error(e))}})(),await s.current.donePromise,s.current.insertAgainWhenDone&&((0,ew.ED)("first-draft","Re-Inserting JSX Updates (Immediate)",{jsxStrLength:s.current.lastArgs?.jsxStr?.length,options:{parentNodeId:s.current.lastArgs?.options.parentNodeId,isIncomplete:s.current.lastArgs?.options.isIncomplete,prevNodeId:s.current.lastArgs?.options.prevNodeId}}),s.current.insertAgainWhenDone=!1,await g(s.current.lastArgs))}finally{s.current.isRunning=!1}},[e,a,i]),f=(0,eC.A)(g,500,{leading:!0,maxWait:1e3}),E=(0,r.useCallback)(async()=>{for(f.isPending()&&await f.flush();s.current.isRunning;)s.current.donePromise&&await s.current.donePromise,await (0,aj.Mb)(10);let e=s.current.queuedEffects??{};(await Promise.allSettled(Array.from(Object.values(e)))).forEach(e=>{"rejected"!==e.status||e.reason instanceof aJ.G1&&500>(0,aJ.Iu)(e.reason)||(0,ew.$D)(l.FigmaTeam.AI_GENERATION,e.reason)})},[f]),y=(0,r.useCallback)(async()=>{try{await E()}finally{if(t?.(),c.current&&((0,r3.ks)(c.current),(0,aP.RY)(c.current)),s.current.lastArgs){let e=Object.keys(d.current).length>0;await (0,aP.oT)(s.current.lastArgs.options?.dsKitKey,c.current,h.oVz.CURRENT,{detachVariables:e})}c.current=null,s.current={},u.current={},m.current={}}},[E,t]),b=(0,r.useCallback)(e=>(s.current.lastArgs=e,s.current.isRunning)?(s.current.insertAgainWhenDone=!0,Promise.resolve()):f?.(e)||Promise.resolve(),[f]);return(0,r.useEffect)(()=>{let e=p.current;if(!n)return;let t=()=>n(e.instrumentationData.imageSuccesses,e.instrumentationData.numImages);return e.imageProgressEmitter.on("statusChanged",t),()=>{e.imageProgressEmitter.removeListener("statusChanged",t)}},[p,n]),{insertJSX:b,resetAsync:y,flushPending:E,nodeIdRef:c,imagesTraceRef:m,themeOverrideMapRef:d,instrumentationRef:p,v3ComponentLocationsRef:_}}let r9=(0,rQ.n)(async function(e,t,n=()=>!0,a){let r=(await e6.Ay.design.firstDraftGenerateV3SectionsAndLayoutStream(e,(0,rA.Lp)({clientLifecycleId:a}))).getReader(),i={};try{for(;;){let e=r.read(),{done:a,value:l}=await e;if(a||(l.sections&&(i.sections=l.sections),l.theme&&(i.theme=l.theme),l.presets&&(i.presets=l.presets),l.dsKit&&(i.dsKit=l.dsKit),l.layoutJsx&&(i.layoutJsx?i.layoutJsx+=l.layoutJsx:i.layoutJsx=l.layoutJsx),l.trace&&(i.trace=l.trace),t(i),!n()))break}}finally{r.releaseLock()}}),ie=(0,rQ.n)(async function(e,t,n=()=>!0,a){let r=(await e6.Ay.design.firstDraftGenerateV3SectionsStream(e,(0,rA.Lp)({clientLifecycleId:a}))).getReader(),i={};try{for(;;){let e=r.read(),{done:t,value:a}=await e;if(t||(a.sections&&(i.sections=a.sections),!n()))break}}finally{r.releaseLock()}let l=i.sections??[];if(0===l.length)throw Error("Could not get sections");let o=await e6.Ay.design.firstDraftGenerateV3LayoutStream({...e,sections:l},(0,rA.Lp)({clientLifecycleId:a})),s={},c=o.getReader();try{for(;;){let e=c.read(),{done:a,value:r}=await e;if(a||(r&&(r.theme&&(s.theme=r.theme),r.presets&&(s.presets=r.presets),r.dsKit&&(s.dsKit=r.dsKit),r.layoutJsx&&(s.layoutJsx?s.layoutJsx=r.layoutJsx:s.layoutJsx+=r.layoutJsx),r.sections&&(s.sections=r.sections),r.trace&&(s.trace=r.trace),t(s)),!n()))break}}finally{c.releaseLock()}}),it=(0,rQ.n)(async function(e,t,n=()=>!0,a){let r=(await e6.Ay.design.firstDraftGenerateV3ComponentsStream({userPrompt:e.userPrompt,kitKey:e.kitKey,isLocal:e.isLocal,componentNames:[e.componentName]},(0,rA.Lp)({clientLifecycleId:a}))).getReader(),i={};try{for(;;){let e=r.read(),{done:a,value:l}=await e;if(a)break;if(l.jsx&&(i.jsx+=l.jsx),l.trace&&(i.trace=l.trace),l.dsKit&&(i.dsKit=l.dsKit),l.v3Components)for(let[e,t]of Object.entries(l.v3Components))t&&(i.v3Components||(i.v3Components={}),e in i.v3Components?i.v3Components[e]+=t:i.v3Components[e]=t);if(t(i),!n())break}}finally{r.releaseLock()}});async function ia(e={}){let{sleepTime:t=100}=e;await new Promise(e=>setTimeout(e,t))}async function*ir(e,t={}){let{chunksPerYield:n=20,useWords:a=!0}=t;if(a){let a=e.split(" "),r=[];for(let e=0;e<a.length;e+=n)r.push(...a.slice(e,e+n)),await ia(t),yield r.join(" ")}else{let a=e.split(""),r=[];for(let e=0;e<a.length;e+=n)r.push(...a.slice(e,e+n)),await ia(t),yield r.join("")}}function ii(e,t){if(!t)return{userPrompt:e};if("LOCAL"!==t.dsKitKey.type)return{userPrompt:e,kitKey:t.dsKitKey.key,isLocal:!1,isDirectGenerationCompatible:t.metadata?.direct_generation};let n=h.XJn.getKitKey(t.dsKitKey.pageId);if(!n)throw Error("Failed to get a kitKey for local kit");return{userPrompt:e,kitKey:n,isLocal:!0,isDirectGenerationCompatible:t.metadata?.direct_generation}}function il(){return{loadingComponentType:"ComponentLoading",shouldGenerateImages:!0}}function io({mockStreamOptions:e,onInsertJSXDone:t,onAfterInsertPartialJsx:n,shouldContinueStream:a,clientLifecycleId:i,insertType:o}){let s=(0,ei.tS)(),c=(0,aX.cJ)(),d=(0,r.useRef)(null),u=(0,r.useRef)(void 0),m=(0,r.useRef)(void 0),p=(0,r.useRef)(null),_=(0,r.useRef)(null),[g,f]=(0,r.useState)({loaded:0,total:0}),{insertJSX:E,resetAsync:y,flushPending:b,nodeIdRef:v,imagesTraceRef:C,instrumentationRef:w,themeOverrideMapRef:T,v3ComponentLocationsRef:S}=r7({onAfterInsertPartialJsx:e=>{if(c&&e){let t=e4.q.instance.get(e);t?.isResponsiveNode&&(t?.parentNode?.childrenNodes??[]).length>1&&(nz.l7.ai("first-draft-sites-page-remove",()=>{t.parentNode?.childrenNodes.filter(e=>e.guid!==t.guid).forEach(e=>e.removeSelfAndChildren())}),setTimeout(()=>{h.glU.triggerAction("goto-layer",{args:{nodeId:e}})},200))}n?.(e)},onReset:()=>{u.current=void 0,f({loaded:0,total:0})},onImageProgress:(e,t)=>{f({loaded:e,total:t})},shouldContinueStream:a,clientLifecycleId:i,insertType:o}),{isRunning:x,runPrompt:k,runPromptMocked:N,runV3LayoutPrompt:I,runV3ComponentPrompt:A}=function({onPromptOutput:e,onBeforeRunPrompt:t,onRunPromptSuccess:n,onRunPromptError:a,shouldContinueStream:i,mockStreamOptions:l,clientLifecycleId:o}){let[s,c]=(0,r.useState)(!1),d=(0,r.useRef)({}),u=(0,r.useCallback)(async(r,l)=>{if(!s)try{d.current={},c(!0),t?.(l),await r(t=>{e?.(t,l),d.current=t},i),await n?.(d.current,l)}catch(e){throw await a?.(e,d.current,l),e}finally{c(!1)}},[s,t,e,a,n,i]),m=(0,r.useCallback)(async(e,t)=>await u(async(t,n)=>{await (0,aj._J)(e,t,n,o)},t),[o,u]);return{isRunning:s,runPrompt:m,runPromptMocked:(0,r.useCallback)(async(e,t)=>await u(async t=>{if(await ia(l),!e.dsKit)throw Error("dsKit is required in mockedResponse");let n=e.dsKit,a=e.theme??{},r=e.jsx??"";for await(let e of(t({theme:a}),await ia(l),ir(r,l)))t({dsKit:n,theme:a,jsx:e});t({dsKit:n,theme:a,jsx:r})},t),[u,l]),runV3LayoutPrompt:(0,r.useCallback)(async(e,t)=>await u(async(t,n)=>{(0,X.kc)().first_draft_v3_combined_sections_and_layout?await r9(e,t,n,o):await ie(e,t,n,o)},t),[o,u]),runV3ComponentPrompt:(0,r.useCallback)(async(e,t)=>await u(async(t,n)=>{await it(e,t,n,o)},t),[o,u])}}({mockStreamOptions:e,shouldContinueStream:a,clientLifecycleId:i,onBeforeRunPrompt:e=>{if(e.analyticsOptions){let{dsKitType:t,isLocal:n,kitKey:a}=is(null,e.insertJSXOptions);(0,as.sx)("First Draft: Layout Generation Started",{file_key:s,generateId:i,clientLifecycleId:i,dsKitType:t,isLocal:n,kitKey:a,kitIdentifier:_.current?.metadata.identifier??null},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})}},onRunPromptSuccess:async(e,n)=>{if(w.current.trackLastStreamByteReceived(),await b(),e.trace){let t={...d.current,...e.trace,children:[...d.current?.children??[],...e.trace.children,...Object.values(C.current)]};d.current=t}if(a()){let n=(0,aj.Z$)(e.jsx??"");if(!e.dsKit&&!v.current)throw Error("No dsKit in prompt output");if(n&&!v.current)throw Error("JSX was present in the prompt output but no node was inserted");try{await t?.(v.current,T.current,p.current,m.current??[])}catch(e){(0,ew.$D)(l.FigmaTeam.AI_GENERATION,e,{extra:{nodeId:v.current,themeOverrideMap:T.current,dsKitKey:p.current,presets:m.current}})}}if(n.analyticsOptions){let{dsKitType:t,isLocal:r,kitKey:l}=is(e,n.insertJSXOptions),o={promptOutput:JSON.stringify({dsKit:e.dsKit,theme:e.theme,presets:e.presets}),timeElapsedMs:Date.now()-n.analyticsOptions.startTime,dsKitType:t,isLocal:r,kitKey:l,file_key:s,generateId:i,clientLifecycleId:i,kitIdentifier:_.current?.metadata.identifier??null};a()?v.current?(w.current.trackFinished("success"),(0,as.sx)("First Draft: Layout Generation Ended",{...o,nodeId:v.current,status:"completed",instrumentationData:JSON.stringify(w.current.instrumentationData)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})):(w.current.trackFinished("failure"),(0,as.sx)("First Draft: Layout Generation Ended",{...o,status:"failed",reason:"empty generation",instrumentationData:JSON.stringify(w.current.instrumentationData)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})):(w.current.trackFinished("stopped"),(0,as.sx)("First Draft: Layout Generation Ended",{...o,nodeId:v.current,status:"failed",reason:"stopped",instrumentationData:JSON.stringify(w.current.instrumentationData)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}))}},onRunPromptError:(e,t,n)=>{w.current.trackFinished("failure"),t.trace&&(d.current={...d.current,...t.trace});let{dsKitType:a,isLocal:r,kitKey:o}=is(t,n.insertJSXOptions),c={promptOutput:JSON.stringify({dsKit:t.dsKit??{},jsx:t.jsx??"",theme:t.theme??{}}),error:e.toString(),timeElapsedMs:Date.now()-(n.analyticsOptions?.startTime??0),dsKitType:a,isLocal:r,kitKey:o,file_key:s,clientLifecycleId:i,kitIdentifier:_.current?.metadata.identifier??null},u=(0,ew.$D)(l.FigmaTeam.AI_GENERATION,e,{extra:c});(0,as.sx)("First Draft: Layout Generation Ended",{...c,status:"failed",reason:"error",nodeId:v.current,sentryEventId:u,instrumentationData:JSON.stringify(w.current.instrumentationData)})},onPromptOutput:(e,t)=>{if(w.current.trackFirstByteReceived(),e.dsKit){if(e.dsKit.isLocal){let e=t.insertJSXOptions.dsKitKey.pageId;if(!e)throw Error("No pageId in insertJSXOptions");p.current={type:"LOCAL",pageId:e}}else p.current={type:"LIBRARY",key:e.dsKit.kitKey};if(!u.current&&e.theme&&(u.current=function(e,t){try{return az(e)}catch(n){return n instanceof Error&&(0,ew.$D)(l.FigmaTeam.AI_GENERATION,Error(`[First Draft theme] Error parsing theme from output: ${n.message}`),{extra:{...t,theme:JSON.stringify(e),error:n}}),{}}}(e.theme,{generateId:i})),!m.current&&e.presets&&(m.current=e.presets),(0,X.kc)().first_draft_generate_v3&&e.layoutJsx)return E({jsxStr:e.layoutJsx,options:{...t.insertJSXOptions,theme:u.current,dsKitKey:p.current,registerV3Components:!0,v3ComponentLocations:S.current}});if((0,X.kc)().first_draft_generate_v3&&e.v3Components){if(1!==Array.from(Object.keys(e.v3Components)).length)throw Error("Expected only one component to be returned");let n=Object.keys(e.v3Components)[0];if(!n)throw Error("Could not find key for component");let a=e.v3Components[n];if(!a)throw Error("No JSX for component");let r=S.current[n];if(!r)throw Error("No guid for component");return E({jsxStr:a,options:{...t.insertJSXOptions,theme:u.current,dsKitKey:p.current,nodeToReplace:r}})}if(e.jsx)return E({jsxStr:e.jsx,options:{...t.insertJSXOptions,theme:u.current,dsKitKey:p.current}})}}}),O=(0,aW.B)(),L=(0,r.useCallback)(async e=>{"LOCAL"===e.dsKitKey.type&&s&&await (0,aF.p4)(s,e,O)},[s,O]),D=(0,r.useCallback)(async(e,t,n)=>{let a;if(x)return{nodeId:null,success:!0};await y();let{designSystem:r}=t;_.current=r;try{r&&await L(r)}catch(e){return(0,ew.$D)(l.FigmaTeam.AI_GENERATION,e),{nodeId:null,success:!1,error:e}}let o=ii(e,r),s={};if(c){let e=e4.q.instance.getCurrentPage();if(e){let t=1===e.childrenNodes.length&&e.childrenNodes[0].isResponsiveSet&&1===e.childrenNodes[0].childrenNodes.length&&e.childrenNodes[0].childrenNodes[0].isResponsiveNode&&0===e.childrenNodes[0].childrenNodes[0].childrenNodes.length,n=null;t?(aq.wr(),(0,aY.S)("panel"),aq.Dh([e.childrenGuids[0]])):nz.l7.ai("first-draft-sites-page-create",()=>{h.glU.createResponsiveSet(null)}),n=e4.q.instance.get(h.glU.getFirstSelectedNodeIdForCurrentPage()),s.parentNodeId=n?.guid,s.createNewSitesWebpage=!0,s.frameName="Primary"}}try{w.current.start(),await k(o,{insertJSXOptions:{frameName:e,imageArgs:{initialUserPrompt:e},...il(),...n,...s,sharedPluginData:{userPrompt:e,...n.sharedPluginData},dsKitKey:r?.dsKitKey},analyticsOptions:{startTime:w.current.startTime,clientLifecycleId:i}})}catch(e){a=e}let d=v.current;if(await y(),d&&!e4.q.instance.get(d))throw Error("Failed to insert node");return a$.Y5.commit(),{nodeId:d,success:!a,error:a}},[x,y,k,v,i,L,c,w]);return{submitPromptMocked:(0,r.useCallback)(async(e,t)=>{if(x)return{nodeId:null,success:!0};await y(),await N(e,{insertJSXOptions:{...il(),...t,imageArgs:{initialUserPrompt:"website"}},analyticsOptions:null});let n=v.current;return await y(),{nodeId:n,success:!0}},[x,y,N,v]),submitPrompt:D,submitV3Prompt:(0,r.useCallback)(async(e,t,n)=>{if(x)return{nodeId:null,success:!0};await y();let{designSystem:a}=t;_.current=a;try{a&&await L(a)}catch(e){return(0,ew.$D)(l.FigmaTeam.FEEDBACK,e),{nodeId:null,success:!1,error:e}}let r=ii(e,a);await I(r,{insertJSXOptions:{frameName:e,imageArgs:{initialUserPrompt:e},...il(),...n,sharedPluginData:{userPrompt:e,...n.sharedPluginData},dsKitKey:a?.dsKitKey},analyticsOptions:{startTime:w.current.startTime,clientLifecycleId:i}});let o=v.current,s=S.current,c=u.current;for(let t of(await y(),Object.keys(s))){let l={...r,componentName:t};u.current=c,await A(l,{insertJSXOptions:{imageArgs:{initialUserPrompt:e},...il(),...n,sharedPluginData:{userPrompt:e,...n.sharedPluginData},dsKitKey:a?.dsKitKey},analyticsOptions:{startTime:w.current.startTime,clientLifecycleId:i}}),await y()}return{nodeId:o,success:!0,error:null}},[x,y,I,w,i,v,S,L,A]),isRunning:x,executionTrace:d.current,imageProgress:g}}function is(e,t){let n=t.dsKitKey,a=n?.type??"AUTO",r=n?.type==="LOCAL",i=n?"key"in n?n.key:n.pageId:e?.dsKit?.kitKey??null;return{dsKitOption:n,dsKitType:a,isLocal:r,kitKey:i}}var ic=n(425411),id=n(46481),iu=n(103907),im=n(540019),ip=n(284321),i_=n(640209),ig=n(45141),ih=n(302442),iE=n.n(ih),iy=n(96328),ib=n(106757);function iv(e){return"SYMBOL"===e.type?{symbolId:h.Egt.getAssetKeyForPublish(e.guid),version:e.sharedSymbolVersion}:"INSTANCE"===e.type&&e.symbolId?iv(e4.q.instance.get(e.symbolId)):{symbolId:"",version:null}}function iC(e,t,n){t&&e.forEach(e=>{if(e.result.conflictScore>=.5){let{symbolId:a,version:r}=iv(e.node);!function(e,t,n){if(!e)return;let a=s.zl.get(ei.ze);if(!a)return;let r=e.data?.file?.comments.find(e=>e.clientMeta?.nodeId===t.guid&&e.clientMeta?.nodeOffset?.x===0&&e.clientMeta?.nodeOffset?.y===0),i=e4.q.instance.getCurrentPage().guid,l=(0,ee.g)();r?e.api.writeAPI?.reply({messageMeta:[{t:n}],attachments:[],threadId:r.id,threadUuid:r.uuid||void 0,uuid:l},{}):e.api.writeAPI?.create({fileKey:a,messageMeta:[{t:n}],attachments:[],pageId:i,uuid:l,clientMeta:{x:t.x,y:t.y,node_offset:{x:0,y:0},node_id:t.guid}},{onValidationError:null})}(t,e.node,(n?` Run ID: ${n}
`:"")+("SYMBOL"===e.node.type||"INSTANCE"===e.node.type?`Symbol ID: ${a} 
Symbol Version: ${r}
`:"")+`Conflict Score: ${e.result.conflictScore} 
 ${e.result.reasoning}`)}})}async function iw(e,t,n){"FRAME"===e.type&&"HORIZONTAL"===e.stackMode&&e.childrenNodes.length&&"FRAME"===e.childrenNodes[0].type&&"VERTICAL"===e.childrenNodes[0].stackMode||t(d.F.enqueue({message:"Please select eval output/eval output not in the correct format",error:!0}));let a=e.childrenNodes.map(e=>e.childrenNodes[1]),r=await iN(a,t);iC(r,n),iT("IP Conflict eval results",`You have ${r.reduce((e,t)=>e+Math.round(t.result.conflictScore),0)} conflicts: 
 ${JSON.stringify(r)}`,e)}function iT(e,t,n){nz.l7.user("Create sticky note with IP Conflict eval results",()=>{let a=e4.q.instance.createNode("FRAME"),r=e4.q.instance.createNode("TEXT");a.appendChild(r),r.name=e,a.x=n.x+n.size.x+10,a.y=n.y,a.size={x:200,y:200},r.size={x:a.size.x,y:a.size.y},h.biQ.setTextContentOnTextNode(r.guid,t),e4.q.instance.getCurrentPage().appendChild(a)})}let iS=["Mobile App Kit","Website Kit"];function ix(e,t,n){return async()=>{let a=e4.q.instance.getCurrentPage();if(!iS.includes(a.name)){t(d.F.enqueue({message:"Can only run this action on a kit page",error:!0}));return}let r=a.childrenNodes.find(t=>t.name===e);if(!r){t(d.F.enqueue({message:'No "Building Blocks" section found',error:!0}));return}let i=[],l=[r];for(;l.length>0;){let e=l.pop();"SECTION"===e.type?l.push(...e.childrenNodes):e.isStateGroup?l.push(...e.childrenNodes):i.push(e)}let o=await iN(i,t),c=Math.random().toString(36).substring(7);if(iC(o,n,c),iT("IP Conflict eval results",`Run Guid: ${c} 
 You have ${o.reduce((e,t)=>e+Math.round(t.result.conflictScore),0)} conflicts 
 ${JSON.stringify(o)}`,r),"Building Blocks"===e){let{symbolId:t,version:n}=iv(r),a=o.map(e=>({score:e.result.conflictScore,symbolKey:t,symbolVersion:n}));(0,as.sx)("FirstDraftIpConflictBuildingBlockEval",{runGuid:c,section:e,fileKey:s.zl.get(ei.ze)||"",buildingBlockScores:a.map(e=>JSON.stringify(e))})}else if("Examples"===e){let t=o.map(e=>({score:e.result.conflictScore,exampleName:e.node.name}));(0,as.sx)("FirstDraftIpConflictExamplesEval",{runGuid:c,section:e,fileKey:s.zl.get(ei.ze)||"",exampleScores:t.map(e=>JSON.stringify(e))})}}}let ik="FIRST_DRAFT_IP_CONFLICT";async function iN(e,t){t(d.F.enqueue({message:`Running IP Conflict eval on ${e.length} nodes`,type:ik,error:!1}));let n=[];try{let a=iE()(e,30),r=0;for(let i of a){t(d.F.enqueue({message:`Running IP conflict eval on ${e.length} nodes: batch ${r+1}/${a.length}`,type:ik,error:!1})),r+=1;let l=i.map(async e=>({b64:"data:image/jpeg;base64,"+(0,iy.H9)(await e.loadImagesAndExport([{imageType:"JPEG"}])),node:e})).map(async e=>{let t=async()=>e6.Ay.design.firstDraftIpConflict({imageB64:(await e).b64},{orgId:null,teamId:null,fileKey:s.zl.get(ei.ze)||null,userId:s.zl.get(ib.kS)||null,trackingSessionId:null,clientLifecycleId:""});return{result:await t().catch(e=>t()),node:(await e).node}}),o=await Promise.all(l);n=n.concat(o)}}catch(e){throw t(d.F.enqueue({message:`IP Conflict eval failed: ${e.message}`,type:ik,error:!0})),e}return t(d.F.enqueue({message:"IP Conflict eval completed",type:ik,error:!1})),n}function iI(){let e=(0,i.wA)(),t=(0,iu._9)(),n=[{label:"Eval kit Examples",function:ix("Examples",e,t)},{label:"Eval kit Building blocks",function:ix("Building Blocks",e,t)},{label:"Eval selected nodes",function:async()=>{let n=e4.q.instance.getCurrentPage().directlySelectedNodes;if(!n.length){e(d.F.enqueue({message:"Please select some nodes",error:!0}));return}let a=await iN(n,e);iC(a,t),iT("IP Conflict eval results",`You have ${a.reduce((e,t)=>e+Math.round(t.result.conflictScore),0)} conflicts: 
 ${JSON.stringify(a)}`,n[n.length-1])}},{label:"Eval selected generations",function:async()=>{let n=e4.q.instance.getCurrentPage().directlySelectedNodes;if(!n.length||"FRAME"!==n[0].type){e(d.F.enqueue({message:"Please select a single parent node of all the generation outputs",error:!0}));return}let a=n[0];await iw(a,e,t)}}],[a,l]=r.useState(n[0]);return r.createElement(aM.Y,{direction:"horizontal"},r.createElement("div",{className:et.cx.cursorPointer.flex.itemsCenter.wFull.$},r.createElement(e5.E,{fontSize:11,fontWeight:"medium"},"IP Conflict")),r.createElement(ig.m,{selected:a,onSelectedChange:e=>l(e),placeholder:"Select eval set",labelForSelectedItem:e=>e.label,displayAboveTarget:!0,lean:"right",items:n.map(e=>({type:"option",text:e.label,value:e}))}),r.createElement(aS.$n,{variant:"secondary",onClick:()=>{a.function()}},"Run"))}var iA=n(501191);let iO={"gpt-4-turbo-2024-04-09":{name:"GPT-4 Turbo",model:"gpt-4-turbo-2024-04-09"},"gpt-4o-2024-05-13":{name:"GPT-4o",model:"gpt-4o-2024-05-13"}},iL="Custom prompts",iD={type:"checkableOption",value:iL,text:iL};async function iR({model:e,selectedEval:t,kit:n,customEvalPrompts:a,promptVersion:r}){let i="LIBRARY"===n.dsKitKey.type?n.dsKitKey.key:h.XJn.getKitKey(n.dsKitKey.pageId)??"",l="LOCAL"===n.dsKitKey.type,{data:{meta:{s3_key:o}}}=await i_.Gh.postFirstDraftRunEvals({model:e,kitKey:i,selectedEval:t,isLocal:l,evalPrompts:a,promptVersion:r});return new Promise(e=>{let t=0,n=setInterval(async()=>{t+=1;try{let a=await i_.Gh.getFirstDraftsEvalStatus({s3Key:o}),r=a.data.meta.status;"success"===r?(clearInterval(n),e(a.data.meta)):("failed"===r||t>=9)&&(clearInterval(n),e(null))}catch{}},2e4)})}function iM({selectedKitOption:e,clientLifecycleId:t}){let n=(0,i.wA)(),{evalSetsQueryStatus:a,evalSets:l}=function(){let[e]=(0,im.IT)(iP(null));return{evalSetsQueryStatus:e.status,evalSets:e.data??[]}}(),[o,c]=(0,r.useState)(!1),[u,m]=r.useState(""),[p,_]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1),[h,E]=(0,r.useState)(!1),[y,b]=r.useState(null),[v,C]=r.useState(null),[w,T]=r.useState(null),S=(0,s.md)((0,ip.Xh)(void 0)),[x,k]=(0,r.useState)(!1),N=(0,iu._9)();(0,r.useEffect)(()=>{l.length&&null==y&&b(l[0])},[l,y]);let I=(0,r.useMemo)(()=>e?.type==="KIT"&&"LOCAL"===e.kit.dsKitKey.type,[e]),A=(0,r.useCallback)(()=>{try{let e=JSON.parse(u);if(!Array.isArray(e))return;return e.map(e=>e.trim()).filter(e=>e.length>0)??void 0}catch(e){return}},[u]),O=(0,r.useCallback)(()=>e&&"AUTO"!==e.type?I&&h?(0,rA.Ol)(e.kit)??e.kit:e.kit:null,[e,I,h]),L=(0,r.useCallback)(e=>{n(d.F.enqueue({type:"FIRST_DRAFT_EVAL",message:e,error:!0}))},[n]),D=(0,r.useCallback)(async()=>{if(x||!y)return;let e=O();if(!e)return;if(!v){L("Select a model");return}if(!w){L("Select a prompt version");return}let a=A();if(y===iL&&!a){L("Failed to parse custom prompt array");return}try{k(!0);let r=a?`Running evals with ${a.length} custom prompts...`:`Running evals for ${y}...`;n(d.F.enqueue({type:"FIRST_DRAFT_EVAL",timeoutOverride:1/0,message:r}));let i=await iR({kit:e,model:v.model,selectedEval:y,customEvalPrompts:a,promptVersion:w});if(!i){L("Evals failed. Please try again.");return}let l=await iB({kit:e,batch:i,shouldGenerateImages:o,shouldDetachComponentsSelected:p,clientLifecycleId:t});if(l&&g){let e=e4.q.instance.get(l);e&&await iw(e,n,N)}}catch(e){(0,ew.x1)("first-draft","Error running evals",{error:e}),n(d.F.enqueue({type:"FIRST_DRAFT_EVAL",message:"Eval failed. Please check the console for more information.",error:!0}))}finally{k(!1)}},[x,y,O,v,w,A,n,o,t,g,p,L,N]),R=l.map(e=>({type:"checkableOption",value:e,text:e})).concat(iD);return r.createElement(aM.Y,{padding:{vertical:12},direction:"vertical"},r.createElement(e5.E,{fontSize:11,fontWeight:"medium"},"Evals"),r.createElement(ig.m,{selected:y,onSelectedChange:e=>b(e),placeholder:"Select eval set",labelForSelectedItem:e=>e,displayAboveTarget:!0,lean:"right",items:R,disabled:"loaded"!==a}),y===iL&&r.createElement("textarea",{className:et.cx.resizeNone.wFull.colorBgSecondary.px12.py8.bRadius5.$,rows:3,value:u,placeholder:'Enter custom eval prompts as JSON array. E.g. ["prompt1", "prompt2"]',onChange:e=>m(e.target.value)}),r.createElement(aM.Y,null,r.createElement(ig.m,{selected:v,onSelectedChange:e=>C(e),placeholder:"Model",labelForSelectedItem:e=>e.name,displayAboveTarget:!0,lean:"right",items:Object.values(iO).map(e=>({type:"option",value:e,text:e.name}))}),r.createElement(ig.m,{selected:w,onSelectedChange:e=>T(e),placeholder:"Prompt version",labelForSelectedItem:e=>e,displayAboveTarget:!0,lean:"right",items:rA.fX.map(e=>({type:"option",value:e,text:e}))}),r.createElement(aS.$n,{variant:"secondary",onClick:D},"Run evals"),r.createElement(iF,{disabled:x,onUpload:e=>{let n=O();n&&iB({kit:n,batch:e,shouldGenerateImages:o,shouldDetachComponentsSelected:p,clientLifecycleId:t})}})),r.createElement(aM.Y,null,r.createElement(aD.S,{checked:o,disabled:x,onChange:()=>c(e=>!e),label:r.createElement(aR.J,null,"Gen images")}),r.createElement(aD.S,{checked:p,disabled:x,onChange:()=>_(e=>!e),label:r.createElement(aR.J,null,"Detach")}),r.createElement(aD.S,{checked:g,disabled:x,onChange:()=>f(e=>!e),label:r.createElement(aR.J,null,"Ip conflict")}),I&&r.createElement(aD.S,{checked:h,disabled:x,onChange:()=>E(e=>!e),label:r.createElement(aR.J,null,"Use published kit version")}),I&&S&&r.createElement(tH.Z,{"data-tooltip-type":eK.Ib.TEXT,"data-tooltip":"You currently have unpublished changes to your library kit.\nPublish library updates before running evals to ensure the current kit version is used."})))}let iP=im.M4.Query({fetch:async()=>(await i_.Gh.getFirstDraftAllEvalSets()).data.meta.eval_sets});function iF({disabled:e,onUpload:t}){let n=r.useRef(null);return r.createElement(ic.n,{acceptedFileTypes:"json",singleFile:!0,isDisabled:e,svgAltText:"Upload eval",inputId:"first-draft-eval-upload",inputRef:n,"data-tooltip-type":eK.Ib.TEXT,"data-tooltip":"Upload eval",onFileInputChange:e=>()=>{let n=e.current?.files?.[0];if(n){let a=new FileReader;a.onload=n=>{let a=n.target?.result;if(a)try{let e=JSON.parse(a),n=i_.Xs.parse(e);t(n)}catch(e){console.error("Error uploading eval",e)}finally{e.current&&(e.current.value="")}},a.readAsText(n)}}},r.createElement(id.U,{svg:iA.A},r.createElement(eE.e,null)))}async function iB({batch:e,kit:t,shouldGenerateImages:n,shouldDetachComponentsSelected:a,clientLifecycleId:r}){try{ed.D.dispatch(d.F.enqueue({type:"FIRST_DRAFT_EVAL",timeoutOverride:1/0,message:"Inserting evals..."}));let i=[],l=[];for(let t of e.eval_results){let n=t.userPromptRaw??"",a=[iG({title:"User Prompt",metadata:n})];if("v3"===e.prompt_version){let e=null,r="";try{r=(0,aj.Z$)(t.layoutJsx??""),e=await r6(r)}catch(t){e=[iK(String(t))]}l.push({userPrompt:n,jsxJSON:e||[]});let i=[];if(!t.v3Components)continue;for(let[n,a]of Object.entries(t.v3Components)){let t=(0,aj.Z$)(a);i.push(iG({title:n,metadata:t}));let r=null;try{r=await r6(t)}catch(e){r=[iK(String(e))]}if(e&&r){let t=r[0];t&&(e=function(e,t,n){let a=e=>{if(e)return"Placeholder"===e.type&&e.props.name===t?n:{...e,children:e.children?.map(a).filter(Boolean)}};return e.map(a).filter(Boolean)}(e,n,t))}}a.push({type:"AutoLayout",props:{className:"w-fit bg-white",sharedPluginData:{isDone:"true",theme:JSON.stringify(t.theme??{})}},children:e??[]},iG({title:"Extracted Layout JSX",metadata:r}),...i)}else{let e="",r=null;try{e=(0,aj.Z$)(t.jsx??""),r=await r6(e)}catch(e){r=[iK(String(e))]}l.push({userPrompt:n,jsxJSON:r||[]}),a.push({type:"AutoLayout",props:{name:"Result",className:"w-fit  bg-white",sharedPluginData:{isDone:"true",theme:JSON.stringify(t.theme??{})}},children:r??[]},iG({title:"Extracted JSX",metadata:e}))}if(t.theme&&a.push(iG({title:"Theme",metadata:JSON.stringify(t.theme,null,2)})),t.trace){let e=iU(t.trace);e&&a.push(iG({title:"Examples in prompt",metadata:e})),a.push(iG({title:"Trace",metadata:JSON.stringify(t.trace),storeInPluginData:!0}))}i.push({type:"VStack",props:{className:"flex flex-col w-fit items-center gap-[48px] p-4",name:"Eval Result"},children:a})}let o=[{type:"HStack",props:{name:"Eval Run Set",className:"flex flex-row w-fit h-fit p-4 gap-4 bg-slate-50"},children:i}],s={};"LIBRARY"===t.dsKitKey.type&&await r5({jsxJSON:o,dsKitKey:t.dsKitKey,componentNameToInsertResult:s});let{insertNodeIds:c}=await rq({jsxJSON:o,jsxStr:"",prevJsxJSON:[],prevExpandedJsx:[],options:{isEval:!0,dsKitKey:t.dsKitKey,autoFillParent:!0,componentNameToInsertResult:s,shouldAnimateLoading:!1,clientLifecycleId:r}},null);if(!c.length)return;let u=c[0];ed.D.dispatch(d.F.enqueue({type:"FIRST_DRAFT_EVAL",timeoutOverride:1/0,message:"Populating icons & images..."}));let m=e4.q.instance.get(u),p=(m?.childrenGuids||[]).map((e,t)=>({id:e,...l[t]}));for(let e of m.childrenNodes)e.stackHorizontalLayoutSize=h.mKm.HUG_CONTENT;let _=[];return _.push((0,aP.qV)({containingNodeId:u,options:{dsKitKey:t.dsKitKey},batchSize:15})),n&&_.push((async()=>{let e={};await (0,aP.nY)({containingNodeArgs:p,batchSize:20,imagesTrace:e,clientLifecycleId:r}),await Promise.all(p.map(async({id:n})=>{e[n]&&await rq({jsxJSON:[iG({title:"Images Trace",metadata:JSON.stringify(e[n]),storeInPluginData:!0})],jsxStr:"",prevJsxJSON:[],prevExpandedJsx:[],options:{isEval:!0,dsKitKey:t.dsKitKey,autoFillParent:!0,componentNameToInsertResult:s,parentNodeId:n,insertBehavior:"inline",clientLifecycleId:r}},null)}))})()),await Promise.all(_),a&&await (0,aP.oT)(t.dsKitKey,u,h.oVz.CURRENT,{detachVariables:!0}),ed.D.dispatch(d.F.enqueue({type:"FIRST_DRAFT_EVAL",message:"Eval Completed"})),u}catch(e){(0,ew.x1)("first-draft","Error running evals",{error:e}),ed.D.dispatch(d.F.enqueue({type:"FIRST_DRAFT_EVAL",message:"Eval failed. Please check the console for more information.",error:!0}))}}let iU=e=>{let t=e.jsx_messages;if(!t)return null;let n=null;for(let e of t){let t="system"===e.role;if(e.content){let a=e.content.indexOf("examples of good outputs");if(-1!==a){let r=e.content.substring(a);if(!t)return r;n=r}}}return n??null},iG=({metadata:e,title:t,storeInPluginData:n})=>{let a=[{type:"Text",props:{className:"w-full text-xs text-slate-500 text-left",sharedPluginData:{value:n?e:""}},children:[n?`${t.toUpperCase()} (Stored in pluginData)`:t.toUpperCase()]}];return n||a.push({type:"Text",props:{className:"w-full text-xs text-left"},children:[e]}),{type:"AutoLayout",props:{name:t,className:"p-4 gap-2 bg-white w-[300px] flex-col"},children:a}},iK=e=>({type:"Text",props:{className:"text-red-500 w-[300px]"},children:[e]});async function iV({kit:e,inputPrompt:t,openFileKey:n,customizableVariables:a}){let r="LIBRARY"===e.dsKitKey.type?e.dsKitKey.key:h.XJn.getKitKey(e.dsKitKey.pageId)??"",i="LOCAL"===e.dsKitKey.type;i&&n&&await (0,aF.p4)(n,e,a);let{data:{meta:{examples:l}}}=await i_.Gh.getFirstDraftRetrievedExamples({kitKey:r,isLocal:i,prompt:t});return l}function iH({selectedKit:e}){let t=(0,i.wA)(),n=(0,ei.tS)(),[a,l]=r.useState(""),[o,s]=r.useState([]),c=(0,aW.B)(),u=o.length>0;return r.createElement(aM.Y,{padding:{vertical:12},direction:"vertical"},r.createElement("button",{className:et.cx.cursorPointer.flex.itemsCenter.wFull.$},r.createElement(e5.E,{fontSize:11,fontWeight:"medium"},"Examples Debug")),r.createElement("textarea",{className:et.cx.resizeNone.wFull.colorBgSecondary.px12.py8.bRadius5.$,rows:1,value:a,placeholder:"Enter a prompt to retrieve examples",onChange:e=>l(e.target.value)}),r.createElement(aS.$n,{variant:"secondary",onClick:async()=>{try{let t=await iV({kit:e,inputPrompt:a,openFileKey:n,customizableVariables:c});s(t)}catch(e){t(d.F.enqueue({type:"FIRST_DRAFT_EXAMPLES_DEBUG",message:"Fetching examples failed. Please make sure you're using a published kit with examples.",error:!0}))}}},"Get examples"),u&&r.createElement("div",{style:{height:"300px",overflowY:"scroll"}},o.map((e,t)=>r.createElement(aM.Y,{direction:"horizontal",key:t,width:"fill-parent"},r.createElement("img",{src:e.thumbnail_url??void 0,alt:"No thumbnail",style:{height:"auto",width:"auto",maxHeight:"300px",maxWidth:"250px"}}),r.createElement("div",{style:{width:"200px",wordWrap:"break-word"}}," ",e.name)))))}var iz=n(137819),iW=n(25108);let ij=(0,s.E3)("first_draft_last_used_kit","");function i$({text:e}){return r.createElement("div",{className:P()(et.cx.flex.flexRow.$)},r.createElement(iz.i,{style:{marginLeft:-2}})," ",r.createElement("span",{className:P()(et.cx.pl4.$)},e))}function iq(e=!1){let{libraryKitsQueryStatus:t,localKits:n,libraryKits:a}=(0,iW.Ml)(),[i,l]=(0,s.fp)(ij),[o,c]=(0,r.useState)(null),d="loaded"===t;(0,r.useEffect)(()=>{if(d&&null===o){if(e){let e=n[0]??a[0]??null;e&&c({type:"KIT",kit:e})}else if((0,X.kc)().first_draft_auto_select_kits&&a.length>1)c({type:"AUTO"});else{let e=a[0]??n[0]??null;e&&c({type:"KIT",kit:e})}}},[n,a,d,o,c,e]);let u=(0,r.useMemo)(()=>[...a,...n],[a,n]),m=(0,r.useMemo)(()=>{let e=u.find(e=>e.metadata?.identifier&&e.metadata.identifier===i);return e??=u.find(e=>e.name===i),d&&!e&&l(""),e??null},[i,u,l,d]);return{kitsAreLoaded:d,kitOptionDropdownItems:(0,r.useMemo)(()=>{let e=[];return a.length>0&&(e.push({type:"header",text:(0,en.t)("first_draft.made_by_figma")}),(0,X.kc)().first_draft_auto_select_kits&&a.length>1&&e.push({type:"checkableOption",value:{type:"AUTO"},text:(0,en.t)("first_draft.detect_via_prompt")}),e.push(...a.map(e=>({type:"checkableOption",value:{type:"KIT",kit:e},text:e.name})))),(0,X.kc)().first_draft_local_kits&&n.length>0&&(e.push({type:"separator"}),e.push({type:"header",text:(0,en.t)("first_draft.current_file")}),e.push(...n.map(e=>({type:"checkableOption",value:{type:"KIT",kit:e},text:e.name})))),e},[a,n]),hasLastSelectedKit:d?!!m:!!i,selectedKit:m,setSelectedKit:r.useCallback(e=>{l(e.metadata?.identifier||e.name)},[l]),selectedKitOption:o,setSelectedKitOption:c,allUsableKitEntries:u}}function iY({items:e,kitsAreLoaded:t,selectedKitOption:n,setSelectedKitOption:a,recordingKey:i}){return r.createElement(ig.m,{selected:n,onSelectedChange:a,placeholder:r.createElement(i$,{text:t?(0,en.t)("first_draft.library_placeholder"):(0,en.t)("first_draft.kits_loading")}),labelForSelectedItem:e=>"AUTO"===e.type?r.createElement(i$,{text:(0,en.t)("first_draft.library_placeholder")}):r.createElement(i$,{text:e.kit.name}),displayAboveTarget:!0,lean:"right",items:e,recordingKey:Q.Pt(i,"kitPicker"),disabled:!t})}function iX({selectedKitOption:e,clientLifecycleId:t}){let n=(0,i.wA)(),[a,l]=r.useState(!1),[o,s]=r.useState(""),c=r.useCallback(async e=>{e&&((0,aP.xF)(e),await Promise.resolve())},[]),{submitPromptMocked:u}=io({onInsertJSXDone:c,mockStreamOptions:{sleepTime:100,chunksPerYield:1e6,useWords:!1},clientLifecycleId:t,shouldContinueStream:()=>!0}),{submitPromptMocked:m}=io({onInsertJSXDone:c,mockStreamOptions:{sleepTime:100,chunksPerYield:10,useWords:!1},clientLifecycleId:t,shouldContinueStream:()=>!0}),p=r.useCallback(async()=>{if(!e){(0,ew.xi)("first-draft","insert called without a selected kit");return}if("AUTO"===e.type){(0,ew.xi)("first-draft","insert called without an invalid kit option");return}let t=iJ(e);if(!t){(0,ew.xi)("first-draft","insert called without a valid dsKit");return}await m({dsKit:t,theme:{},jsx:"```jsx\n"+o},{dsKitKey:e.kit.dsKitKey,shouldGenerateImages:a})},[o,m,e,a]),_=r.useCallback(async()=>{if(!e){(0,ew.xi)("first-draft","insert called without a selected kit");return}if("AUTO"===e.type){(0,ew.xi)("first-draft","insert called without an invalid kit option");return}let t=iJ(e);if(!t){(0,ew.xi)("first-draft","insert called without a valid dsKit");return}await u({dsKit:t,theme:{},jsx:"```jsx\n"+o},{dsKitKey:e.kit.dsKitKey,shouldGenerateImages:a})},[o,u,e,a]);return r.createElement(aM.Y,{padding:{vertical:12},direction:"vertical"},r.createElement("button",{className:et.cx.cursorPointer.flex.itemsCenter.wFull.$},r.createElement(e5.E,{fontSize:11,fontWeight:"medium"},"Debug")),r.createElement("textarea",{className:et.cx.resizeNone.wFull.colorBgSecondary.px12.py8.bRadius5.$,rows:3,value:o,placeholder:"Enter JSX to insert directly",onChange:e=>s(e.target.value)}),r.createElement(aM.Y,null,r.createElement(aD.S,{checked:a,onChange:()=>l(e=>!e),label:r.createElement(aR.J,null,"Gen images")})),r.createElement(aM.Y,null,r.createElement(aS.$n,{variant:"secondary",onClick:async()=>{await p(),n(d.F.enqueue({message:"Finished insert"}))}},"Insert streaming"),r.createElement(aS.$n,{variant:"secondary",onClick:async()=>{await _(),n(d.F.enqueue({message:"Finished insert"}))}},"Insert all")))}function iJ(e){if("AUTO"===e.type)return null;let t=e.kit.dsKitKey,n="LOCAL"===t.type?h.XJn.getKitKey(t.pageId):t.key;return n?{kitKey:n,isLocal:"LOCAL"===t.type}:null}var iZ=n(128247),iQ=n(602354),i0=n(203264),i1=n(368832),i2=n(44948),i5=n(286374);function i3(e,t){return(0,i5.YJ)({nodeIds:Object.keys(e),options:{skipNodeIds:!1,detachInstances:!0,includeType:!0,skipNodeIdsWithoutType:t,classPropName:"class",autoLayoutTagName:"div",frameTagName:"div"}})}var i4=n(213376),i6=n(286640);let i8="first_draft_prompt_history_";var i7=n(749401);async function i9(e,t,n){let a=e4.q.instance;for(let r of n.flatMap(e=>e.nodeWeightInfos)){let n=a.get(r.nodeId);if(!n)continue;let i=function(e,t,n,a){if(!i7.z[t])return;let r=i7.z[e];if(r)return r[n][a]}(t,n.fontName.family,e,r.weight),l=i?.style??n.fontName.style;try{let e={family:t,style:l};await (0,rI.uW)(e),nz.l7.user("first-draft-theme-modal-adjust-font-family",()=>{n.fontName=e})}catch(a){let e={family:t,style:"Regular"};await (0,rI.uW)(e),nz.l7.user("first-draft-theme-modal-adjust-font-family",()=>{n.fontName=e})}nz.l7.user("first-draft-theme-modal-adjust-font-family",()=>{i?.letterSpacing!==void 0&&(n.letterSpacing=i.letterSpacing)})}}var le=n(218549),lt=n(503796);let ln=new le.q(40);async function la({changes:e,makeChangesSessionId:t,clientLifecycleId:n,containingNodeId:a,instrumentationRef:r}){let i=e4.q.instance.get(e.affectedId);if(!i)return!1;let o=`${t}:${e.affectedId}`;if(ln.has(o))return(0,ew.$D)(l.FigmaTeam.AI_GENERATION,Error("first-draft: Attempted to apply content changes twice"),{extra:{clientLifecycleId:n}}),!1;if(ln.set(o,!0),!i.getSharedPluginData("jsx","isImage"))return nz.l7.ai("first-draft-iterate-text-content",()=>(function({node:e,textContent:t}){return"TEXT"!==e.type?((0,ew.xi)("first-draft","Update text called on a non-text node",{nodeId:e.guid,nodeType:e.type}),!1):(e.spliceCharacters(0,e.characters.length,t,"BEFORE"),!0)})({node:i,textContent:e.content})),!0;{let t=i.getSharedPluginData("jsx","background");return await r.current.logImageLoad(()=>(0,lt.Og)({node:i,description:e.content,background:t,clientLifecycleId:n,containingNodeId:a})),!0}}async function lr({action:e,insertJSX:t,options:{dsKitKey:n,currentTheme:a,imageArgs:r,rootNodeId:i}}){try{let{affectedId:l,jsxToInsert:o}=e,s=e4.q.instance.get(l);if(!s)throw Error("Could not find affected node in the scene");let c=e4.q.instance.get(i);if(!c)throw Error("Could not find root node in the scene");let d=(0,rK.BY)(c),u=s.parentNode;if(!u)throw Error("Could not find affected node in the scene");let m=u.childrenGuids.indexOf(l);if(-1===m)throw Error("Could not find affected node in the scene");let p="below";"insert"===e.type&&(p=e.insertBehavior);let _=await a1(o);if(!_||0===_.length)throw Error("Failed to parse JSX");let g=r0(_);if(0===g.size)throw Error("Only building blocks can be inserted or replaced");await t({jsxStr:"```jsx\n"+o+"\n```",options:{...il(),insertBehavior:"inline",dsKitKey:n,themeProperties:a,deviceType:d,parentNodeId:u.guid,insertAtIndex:"above"===p?m:m+1,imageArgs:r}}),"replace"===e.type&&nz.l7.ai("first-draft-make-changes-remove",()=>{s.removeSelfAndChildren()})}catch(t){throw(0,ew.$D)(l.FigmaTeam.AI_GENERATION,t,{extra:{action:e,dsKitKey:n}}),t}}function li(){let e=(0,eR.eY)(),t=Object.entries((0,eR.KH)()).filter(([e,t])=>t).map(([e])=>e),n=null;for(let a of t)if(n=function(t){let n="",a=t;for(;!n&&a;){let t=e.get(a);if(!t)break;t.getSharedPluginData(aj.SV,"userPrompt")&&(n=a),a=t.parentGuid||""}return n||null}(a))break;return n}var ll=n(946465),lo=n(481210),ls=n(395966),lc=n(169566),ld=n.n(lc),lu=(e=>(e.mobile="MOBILE",e.web="WEB",e))(lu||{});function lm(e=1){let t=[{label:(0,en.t)("first_draft.make_changes.prompt_labels.change_font"),prompt:(0,en.t)("first_draft.make_changes.prompts.futuristic_font")},{label:(0,en.t)("first_draft.make_changes.prompt_labels.colors"),prompt:(0,en.t)("first_draft.make_changes.prompts.calming_colors")},{label:(0,en.t)("first_draft.make_changes.prompts.make_it_pop"),prompt:(0,en.t)("first_draft.make_changes.prompts.make_it_pop")},{label:(0,en.t)("first_draft.make_changes.prompt_labels.round_corners"),prompt:(0,en.t)("first_draft.make_changes.prompts.round_corners")},{label:(0,en.t)("first_draft.make_changes.prompt_labels.colors"),prompt:(0,en.t)("first_draft.make_changes.prompts.watermelon_theme")},{label:(0,en.t)("first_draft.make_changes.prompt_labels.rewrite"),prompt:(0,en.t)("first_draft.make_changes.prompts.punchier_text")},{label:(0,en.t)("first_draft.make_changes.prompt_labels.imagery"),prompt:(0,en.t)("first_draft.make_changes.prompts.vibrant_images")},{label:(0,en.t)("first_draft.make_changes.prompt_labels.add"),prompt:(0,en.t)("first_draft.make_changes.prompts.add_another_section")},{label:(0,en.t)("first_draft.make_changes.prompt_labels.replace"),prompt:(0,en.t)("first_draft.make_changes.prompts.replace_hero_image")}];return e2()(ld()(t.filter(e=>""!==lp(e.label))),e=>e.label).slice(0,e)}function lp(e){return e.trim().toLowerCase()}var l_=n(720245),lg=n(902237),lf=n(113675),lh=n(75395),lE=n(343887),ly=n(497189),lb=n(11190),lv=n(755020),lC=n(168039),lw=n(522739),lT=n(24191),lS=n(420586),lx=n(387193),lk=n(187703),lN=n(664414);function lI({children:e}){let t=(0,r.useRef)(null),{tracker:n,index:a}=(0,lx.L0)(t),i=r.useMemo(()=>({trackerRef:n,layoutIndex:a}),[a,n]);return r.createElement(lx.MQ.Provider,{value:i},e)}let lA=r.createContext(!1);function lO({children:e,defaultActiveIndex:t=0}){let n=(0,r.useRef)(null),[a,i]=r.useState(!1);return r.useEffect(()=>{let e=()=>n.current?.blur();return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),r.useEffect(()=>{let e=n.current;if(!e)return;let t=()=>i(!0),a=()=>i(!1);return e.addEventListener("focus",t),e.addEventListener("blur",a),()=>{e.removeEventListener("focus",t),e.removeEventListener("blur",a)}},[]),r.createElement(lS._,{fillWidth:!0},r.createElement("div",{className:"keyboard_navigation_on_focus--parent--XamDV",tabIndex:0,ref:n},r.createElement(lI,null,r.createElement(lN.A.Provider,{value:t},r.createElement(lA.Provider,{value:a},e)))))}function lL({children:e,primaryAction:t,className:n,htmlAttributes:a,...i}){let l=(0,r.useRef)(null),{active:o,target:s}=(0,lT.H)({ref:l}),c=r.useContext(lA),d=r.useCallback(()=>{c&&t()},[c,t]),u=(0,r.useMemo)(()=>({shortcuts:[{key:J.Uz.ENTER}],onAction:d,allowDefault:!0}),[d]);return(0,lk.k)({primaryAction:u,active:o,actionLabel:!1,target:s}),r.createElement(lw.D8,{forwardedRef:l,className:P()(n,{"keyboard_navigation_on_focus--active--vGhwX":o}),...a,...i},e)}var lD=n(428654),lR=n(948529),lM=n(616121);let lP=[lM.jR,lM.N0,lM.k0,lM.RO,lM.Sb].map(e=>({string:e,color:lD.F.parse(e)}));function lF({theme:e,onChangeColor:t,activeColorIdx:n,activeColorOutline:a,idx:i,colorSwatch:l}){let o=r.useCallback(()=>{t(l.color),a$.Y5.triggerAction("commit")},[l.color,t]);return r.createElement(lL,{primaryAction:o},r.createElement(lR.cd,{key:l.string,size:"medium",value:l.color,background:"dark"===e?"dark":"light",onClick:o,paletteType:"base",swatchStyle:{...n===i&&{outline:a,outlineOffset:"2px"},boxSizing:"border-box",boxShadow:"none"}}))}function lB(e){return r.createElement(lL,{primaryAction:e.onClick},r.createElement("div",{className:et.cx.radiusFull.$},-1===e.activeColorIdx?r.createElement(lR.cd,{size:"medium",value:e.value,paletteType:"base",selectionState:"selected_custom",background:"dark"===e.theme?"dark":"light",onClick:e.onClick,swatchStyle:{boxSizing:"border-box",boxShadow:"none"}}):r.createElement(lR.ZI,{size:"medium",onClick:e.onClick,swatchStyle:{boxSizing:"border-box",boxShadow:"none"}})))}function lU({theme:e,onChangeColor:t,setShowCustomColorPicker:n,value:a}){let i=r.useCallback(()=>{n(!0)},[n]),l=(0,i2.zN)(a,nZ.DA),{activeColorIdx:o,activeColorOutline:s}=r.useMemo(()=>({activeColorIdx:lP.findIndex(e=>(0,nZ.DA)(e.color,l)),activeColorOutline:`2px solid ${lD.F.format(l)}`,value:l}),[l]),c=Math.max(o,0);return r.createElement(lO,{defaultActiveIndex:c},r.createElement("div",{className:et.cx.flex.flexGrow1.justifyBetween.$,style:{boxSizing:"content-box"}},r.createElement(r.Fragment,null,lP.map((n,a)=>r.createElement(lF,{key:n.string,theme:e,onChangeColor:t,activeColorIdx:o,activeColorOutline:s,idx:a,colorSwatch:n})),r.createElement(lB,{activeColorIdx:o,value:l,theme:e,onClick:i}))))}var lG=(e=>(e.COLOR="color",e.RADIUS="radius",e.SPACING="spacing",e.FONT="font",e))(lG||{}),lK=(e=>(e.TITLE="title",e.BODY="body",e.LABLE="label",e))(lK||{});let lV="theme_editor--svgText--yyKtR",lH=r.createContext({activeTab:lG.COLOR,onTabChange:()=>{},recordingKey:void 0});function lz({label:e,children:t,tab:n}){let{onTabChange:a,activeTab:i,recordingKey:l}=r.useContext(lH),o=r.useCallback(()=>{a(n)},[a,n]);return r.createElement(lL,{"aria-label":e,primaryAction:o,className:P()("theme_editor--iconButton--SYPlk theme_editor--baseIconButton--15rMM",i===n&&"theme_editor--iconActive--8Nsgk"),onClick:o,recordingKey:Q.Pt(l,n),htmlAttributes:r.useMemo(()=>({"data-tooltip":e,"data-tooltip-type":eK.Ib.TEXT,"data-tooltip-show-above":!0,"data-clickable":!0}),[e])},t)}var lW=n(318812),lj=n(846848),l$=n(116416),lq=n(581135);function lY(e,t){return t===h.NVY.HSL?(0,rw.oB)(e):(0,rw.qN)(e)}function lX({brandColor:e,absoluteContainerId:t,onChangeColor:n,onHide:a}){let l=(0,i.wA)(),o=(0,lW.Um)(),s=r.useRef(document.getElementById(t||"fullscreen-root"));(0,R.kz)(J.Uz.ESCAPE,a),(0,R.kz)(J.Uz.BACKSPACE,a,document.activeElement?.tagName.toLowerCase()!=="input");let[c,d]=r.useState(h.NVY.HEX),[u,m]=r.useState(lY(e,c)),[p,_]=r.useState({left:0,top:0}),g=r.useRef(),f=()=>{let e=g.current?.getBoundingClientRect();e&&_({left:e.left,top:e.bottom-120})},E=r.useCallback(e=>{e&&(g.current=e,f())},[]);(0,B.w)(g,()=>f()),(0,B.w)(s,()=>f());let y=(0,i1.A)(async(e,t)=>{await n(e),t&&a$.Y5.triggerAction("commit")},100),b=r.useCallback((e,t)=>{m(e),y((0,rw.w_)(e),t)},[y]),v=r.useCallback(e=>{e.a=1,y(e,!0),m((0,lj.QS)(u,lY(e,c),e))},[u,c,y]),C={color:e,value:u,changeCallback:b,hideOpacity:!0,colorFormat:c,dispatch:l,currentTool:h.NLJ.CODE_BLOCK,dropdownShown:o,onColorChange:v,canAcceptStyles:!1,canAcceptVariables:!1};return r.createElement("div",{className:et.cx.flex.pr16.pl16.pt8.pb4.flexRow.justifyCenter.itemsEnd.flexGrow1.gap16.$},r.createElement("div",{className:et.cx.flex.flexRow.justifyCenter.itemsCenter.flexGrow1.gap8.$},r.createElement(lE.K,{"aria-label":(0,en.t)("first_draft.theme_tool.close_panel"),onClick:()=>a(),recordingKey:"closeSectionEditor"},r.createElement(lv.C,null)),r.createElement("div",{className:et.cx.flex.flexColumn.justifyBetween.wFull.itemsEnd.gap4.$},r.createElement("div",{className:et.cx.flex.justifyBetween.itemsCenter.wFull.$},r.createElement(l$.e,{width:168,color:u,changeCallback:b})),r.createElement("div",{className:et.cx.flex.justifyBetween.itemsCenter.wFull.gap8.$,style:{maxWidth:210}},r.createElement(lj.bO,{id:"color-input-type-select-make-changes-ai",className:P()(et.cx.flexShrink1.flexGrow0.flex.$,"theme_editor--colorSelect--wIbMH","theme_editor--precedence--lvYGC"),property:c,formatter:lj.Fr,onChange:e=>{d(e),"l"in u&&e!==h.NVY.HSL?m((0,rw.qN)((0,rw.w_)(u))):e!==h.NVY.HSL||"l"in u||m((0,rw.oB)((0,rw.w_)(u)))},dispatch:l,dropdownShown:o},r.createElement(lj.ef,{value:h.NVY.HEX}),r.createElement(lj.ef,{value:h.NVY.RGB}),r.createElement(lj.ef,{value:h.NVY.CSS}),r.createElement(lj.ef,{value:h.NVY.HSL}),r.createElement(lj.ef,{value:h.NVY.HSB})),c===h.NVY.HEX&&r.createElement(lj.dt,{...C}),c===h.NVY.RGB&&r.createElement(lj.VA,{...C}),c===h.NVY.CSS&&r.createElement(lj.he,{...C}),(c===h.NVY.HSL||c===h.NVY.HSB)&&r.createElement(lj.fC,{...C})))),r.createElement("div",{className:et.cx.flex.justifyCenter.itemsCenter.relative.mr8.$,ref:E},r.createElement("div",{style:{width:115}},r.createElement("div",{style:{position:"fixed",width:115,height:115,...p}},r.createElement("div",{className:P()("theme_editor--pickerUnderlay--gfCHS",et.cx.colorBg.elevation200.absolute.p2.$),style:{width:115,height:115,borderRadius:14}}),r.createElement("div",{className:P()("theme_editor--pickerOverlay--Ykwy9",et.cx.flex.colorBg.absolute.p2.overflowHidden.justifyCenter.alignCenter.$),style:{width:115,height:115,borderRadius:14}},r.createElement(lq.T,{containerClass:"theme_editor--pickerWrapper--fs-6V",size:115,color:u,changeCallback:b,canvasWrapperStyles:{outlineWidth:0,borderRadius:"13px"},ghostStyles:{boxShadow:"none"}}))))))}var lJ=n(599936);function lZ(e){let t=(0,lC.DP)(),n=e.brandColor,a=aU.ER.get(Math.round(2*e.cornerRadiusStop)/2),i=aU.NT.get(Math.round(2*e.spacingStop)/2),l=r.useMemo(()=>({activeTab:e.activeTab,onTabChange:e.onTabChange,recordingKey:e.recordingKey}),[e.activeTab,e.onTabChange,e.recordingKey]);return r.createElement(lH.Provider,{value:l},r.createElement(lO,{defaultActiveIndex:function(e){switch(e){case lG.COLOR:return 0;case lG.RADIUS:return 1;case lG.SPACING:return 2;case lG.FONT:return 3}}(e.activeTab)},r.createElement(ep.B,{fullWidth:!0,justify:"space-between"},r.createElement(lz,{tab:lG.COLOR,label:(0,en.t)("first_draft.theme_panel.color")},r.createElement(lR.cd,{size:"medium",value:n,paletteType:"base",background:"dark"===t?"dark":"light",swatchStyle:{boxSizing:"border-box",boxShadow:"none"}})),r.createElement(lz,{tab:lG.RADIUS,label:(0,en.t)("first_draft.theme_panel.radius")},r.createElement(ex.B,{svg:a,className:"theme_editor--svgIcon--ongu6"})),r.createElement(lz,{tab:lG.SPACING,label:(0,en.t)("first_draft.theme_panel.spacing")},r.createElement(ex.B,{svg:i,className:lV})),r.createElement(lz,{tab:lG.FONT,label:(0,en.t)("first_draft.theme_panel.font")},r.createElement(ex.B,{svg:lJ.A,className:lV})))))}let lQ={[lG.COLOR]:function(e){let t=(0,lC.DP)(),[n,a]=r.useState(!1),{focusParent:i}=e,l=r.useCallback(()=>{a(!1),i?.()},[i]);return n?r.createElement(lX,{onHide:l,...e}):r.createElement("div",{className:et.cx.flex.flexRow.flexGrow1.p16.pt12.pb12.gap16.itemsCenter.$},r.createElement(l4,{recordingKey:e.recordingKey}),r.createElement(l_.b,{onChange:e.onChangeColorMode,value:e.colorMode,recordingKey:Q.Pt(e,"colorModePicker"),legend:r.createElement(lg.q,null,(0,en.tx)("first_draft.theme_tool.color.mode_picker"))},r.createElement(l_.c,{value:"light","aria-label":(0,en.t)("first_draft.theme_tool.color.light_mode"),icon:r.createElement("div",{className:et.cx.flex.w44.itemsCenter.justifyCenter.$},r.createElement(ly.Z,null))}),r.createElement(l_.c,{value:"dark","aria-label":(0,en.t)("first_draft.theme_tool.color.dark_mode"),icon:r.createElement("div",{className:et.cx.flex.w44.itemsCenter.justifyCenter.$},r.createElement(lb.a,null))})),r.createElement(lU,{value:e.brandColor,onChangeColor:e.onChangeColor,theme:t,setShowCustomColorPicker:a}))},[lG.RADIUS]:function(e){let[t,n]=r.useState(e.cornerRadiusStop);return r.createElement("div",{className:et.cx.flex.flexRow.flexGrow1.itemsCenter.p16.gap16.$},r.createElement(l4,{recordingKey:e.recordingKey}),r.createElement(aR.J,{className:et.cx.opacity0_5.$},(0,en.tx)("first_draft.theme_panel.radius")),r.createElement(lf.A,{"aria-label":(0,en.t)("first_draft.theme_panel.radius"),min:aU.Xy,max:aU.Ne,step:.1,bigStep:.2,recordingKey:Q.Pt(e,"cornerRadiusSlider"),value:e.cornerRadiusStop,rangeAnchor:aU.Xy,defaultValue:t,onChange:e.onChangeCornerRadiusStop}))},[lG.SPACING]:function(e){let[t,n]=r.useState(e.spacingStop);return r.createElement("div",{className:et.cx.flex.flexRow.flexGrow1.itemsCenter.p16.gap16.$},r.createElement(l4,{recordingKey:e.recordingKey}),r.createElement(aR.J,{className:et.cx.opacity0_5.$},(0,en.tx)("first_draft.theme_panel.spacing")),r.createElement(lf.A,{"aria-label":(0,en.t)("first_draft.theme_panel.spacing"),min:aU.Xy,max:aU.Ne,step:aU.jF,bigStep:.2,recordingKey:Q.Pt(e,"spacingSizeSlider"),value:e.spacingStop,rangeAnchor:aU.Xy,defaultValue:t,onChange:e.onChangeSpacingStop}))},[lG.FONT]:function(e){let[t,n]=iQ.tU.useTabs({[lK.TITLE]:null!==e.titleFont,[lK.BODY]:null!==e.bodyFont,[lK.LABLE]:null!==e.labelFont},{recordingKey:Q.Pt(e,"fontEditor")});return r.createElement("div",{className:et.cx.flex.flex1.flexColumn.$},r.createElement("div",{className:et.cx.flex.flex1.flexRow.gap8.p8.$},r.createElement(l4,{recordingKey:e.recordingKey}),r.createElement(iQ.tU.TabStrip,{manager:n},r.createElement(iQ.tU.Tab,{...t.title},(0,en.tx)("first_draft.theme_panel.label.fontTitle")),r.createElement(iQ.tU.Tab,{...t.body},(0,en.tx)("first_draft.theme_panel.label.fontBody")),r.createElement(iQ.tU.Tab,{...t.label},(0,en.tx)("first_draft.theme_panel.label.fontLabel")))),r.createElement("div",{className:et.cx.wFull.colorBgTertiary.h1.$}),r.createElement("div",{className:et.cx.flex.flex1.flexColumn.gap8.p8.$},r.createElement(iQ.tU.TabPanel,{...t.title},r.createElement(l2,{...e})),r.createElement(iQ.tU.TabPanel,{...t.body},r.createElement(l5,{...e})),r.createElement(iQ.tU.TabPanel,{...t.label},r.createElement(l3,{...e}))))}};function l0(e){let t=r.useRef(null),n=r.useCallback(()=>{t.current?.focus()},[]);if(r.useLayoutEffect(n,[n]),!e.section)return null;let a=lQ[e.section];return r.createElement("div",{ref:t,tabIndex:-1,className:P()("theme_editor--boxInherit--BjYCO",et.cx.flex.relative.wFull.$)},r.createElement(a,{focusParent:n,...e}))}function l1({selectedKey:e,items:t,recordingKey:n}){return r.createElement("div",{className:et.cx.flex.flex1.flexWrap.itemsCenter.rowGap8.justifyBetween.$},t.map(({key:t,name:a,svg:i,onClick:l})=>r.createElement(lh.E,{"aria-label":a,recordingKey:Q.Pt(n,t),className:P()("theme_editor--fontIconButton--Vc-KE theme_editor--iconButton--SYPlk theme_editor--baseIconButton--15rMM",lV,e===t&&"theme_editor--selected--2BGbx"),key:t,onClick:l,htmlAttributes:{"data-tooltip":a,"data-tooltip-show-above":!0,"data-tooltip-type":eK.Ib.TEXT}},r.createElement(ex.B,{svg:i}))))}function l2(e){let t=`FontTitle_${e.titleFont}`,n=Array.from(aU.X4).map(([t,n])=>({key:`FontTitle_${t}`,name:t,svg:n,onClick:()=>e.onChangeTitleFont(t)}));return null===e.titleFont?null:r.createElement(l1,{selectedKey:t,items:n,recordingKey:e.recordingKey})}function l5(e){let t=`FontBody_${e.bodyFont}`,n=Array.from(aU.K4).map(([t,n])=>({key:`FontBody_${t}`,name:t,svg:n,onClick:()=>e.onChangeBodyFont(t)}));return null===e.bodyFont?null:r.createElement(l1,{selectedKey:t,items:n,recordingKey:e.recordingKey})}function l3(e){let t=`FontLabel_${e.labelFont}`,n=Array.from(aU.pz).map(([t,n])=>({key:`FontLabel_${t}`,name:t,svg:n,onClick:()=>e.onChangeLabelFont(t)}));return null===e.labelFont?null:r.createElement(l1,{selectedKey:t,items:n,recordingKey:e.recordingKey})}function l4({recordingKey:e}){let{pop:t}=(0,A.cq)();return(0,R.kz)(J.Uz.ESCAPE,t),(0,R.kz)(J.Uz.BACKSPACE,t),r.createElement("div",{className:et.cx.h24.$},r.createElement(lE.K,{recordingKey:Q.Pt(e,"backButton"),onClick:t,"aria-label":(0,en.t)("qa.go_back")},r.createElement(lv.C,null)))}var l6=n(294454);function l8(e){let{close:t}=(0,A.cq)();(0,eR.f4)(n=>{if(e)for(let e of Object.keys(n.mirror.sceneGraphSelection)){let n=e4.q.instance.get(e);if(n&&!n.isOrInFirstDraft){t();return}}})}var l7=(e=>(e[e.READY_FOR_PROMPT=0]="READY_FOR_PROMPT",e[e.RUNNING=1]="RUNNING",e[e.FINISHED=2]="FINISHED",e[e.ERROR=3]="ERROR",e[e.ICANTDOTHIS=4]="ICANTDOTHIS",e))(l7||{}),l9=(e=>(e.PROMPT="prompt",e.THEME="theme",e))(l9||{});let oe={brandColor:nZ.UE,displayBrandColor:nZ.UE,colorMode:aG.lH.LIGHT,spacing:1,radius:1,titleFonts:[],bodyFonts:[],labelFonts:[]};function ot(e){let t=e4.q.instance.get(e);if(!t)return oe;let n=(0,rK.BY)(t),a=(0,rK.uP)(t),r=(0,rK.Mz)(t,n),i=(0,aK.X6)(t)??nZ.UE,l=(0,nZ.tK)(rS(i,a.colors))??nZ.UE;return{brandColor:l,displayBrandColor:l,colorMode:rk(t)??aG.lH.LIGHT,spacing:(0,rO.YB)(a.spacingValues),radius:(0,rO.nd)(a.radiusValues),titleFonts:r.title,bodyFonts:r.body,labelFonts:r.label}}function on({initialRootGuid:e}){let t=(0,ll._M)({action:m.JT.FIRST_DRAFT_MAKE_CHANGES,clientLifecycleId:void 0}),n=t.clientLifecycleId,a=(0,ei.tS)(),i=r.useCallback(()=>{(0,as.sx)("First Draft: Error",{file_key:a,clientLifecycleId:n,view:"firstDraftMakeChanges"},{forwardToDatadog:!0,sendAsBeacon:!0,mlEvent:!0})},[a,n]);return r.createElement(c.tH,{boundaryKey:"FirstDraftMakeChanges",fallback:c.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{clientLifecycleId:n,area:l.FigmaTeam.AI_GENERATION},onError:i},r.createElement(oa,{recordingKey:"firstDraftMakeChangesView",initialRootGuid:e,aiTrackingContext:t}))}function oa(e){let t=e.aiTrackingContext,n=t.clientLifecycleId,[a,o]=r.useState(""),s=(0,ei.tS)(),c=(0,eR.eY)(),{allUsableKitEntries:d}=iq(),u=li()||e.initialRootGuid,m=(0,eR.KH)(),p=(0,r.useMemo)(()=>u?c.get(u):null,[c,u]),{applyMakeChanges:_,resetMakeChanges:g,instrumentationRef:f}=function({clientLifecycleId:e}){let[t]=(0,r.useState)({current:(0,ee.g)()}),{insertJSX:n,resetAsync:a,instrumentationRef:i}=r7({clientLifecycleId:e,insertType:"makeChanges"});return{applyMakeChanges:(0,r.useCallback)(async(r,o)=>{let s=[];for(let e of("affectedId"in r&&s.push(r.affectedId),"destinationId"in r&&s.push(r.destinationId),s)){if(!function e(t,n,a){let r=t.get(n);return!!r&&(r.guid===a||!!r.parentGuid&&e(t,r.parentGuid,a))}(e4.q.instance,e,o.rootNodeId)){(0,ew.$D)(l.FigmaTeam.AI_GENERATION,Error("first-draft: Node does not have root node as ancestor"),{extra:{nodeId:e,action:r,...o}});return}if(e===o.rootNodeId){(0,ew.$D)(l.FigmaTeam.AI_GENERATION,Error("first-draft: Tried to mutate root node"),{extra:{nodeId:e,action:r,...o}});return}}switch(await a(),r.type){case"theme":{let{content:e}=r;e&&function(e,t,n){let a=e4.q.instance.get(e);if(!a)return;let r=(0,rK.BY)(a);if(["borderRadii","spacing","colors","fontFamilies"].some(e=>e in n)){let e=(0,rK.k5)(t,n);(0,rK.jR)(a,e,r)}let i=t.darkMode?aG.lH.DARK:aG.lH.LIGHT,l=t.brandColor??function(e){let t=(0,rK.uP)(e,{ignoreOpacity:!0});return rS((0,aK.X6)(e)??nZ.UE,t.colors)}(a),o="darkMode"in n?n.darkMode?aG.lH.DARK:aG.lH.LIGHT:void 0;if(o&&i!==o&&nz.l7.ai("first-draft-make-changes-theme-switch-mode",()=>{rN(a,o,l)}),"brandColor"in n&&n.brandColor){let e=(0,nZ.tK)(n.brandColor);if(e){let t=(0,aK.qO)(e,o??i);nz.l7.ai("first-draft-make-changes-theme-brand-color",()=>{rx(a,t,o??i??aG.lH.LIGHT,{},l)})}}}(o.rootNodeId,o.currentTheme,e);break}case"text_or_image":await la({changes:r,makeChangesSessionId:t.current,clientLifecycleId:e,containingNodeId:o.rootNodeId,instrumentationRef:i});break;case"insert":case"replace":await lr({action:r,options:o,insertJSX:n}),await a();break;case"remove":nz.l7.ai("first-draft-make-changes-remove",()=>{let e=e4.q.instance.get(r.affectedId);e&&e.removeSelfAndChildren()});break;case"move":{let{affectedId:e,destinationId:t,insertBehavior:n}=r;nz.l7.ai("first-draft-make-changes-move",()=>{let a=e4.q.instance,r=a.get(e),i=a.get(t),l=i?.parentNode,o=l?.childrenGuids.indexOf(t)??-1;r&&l&&("above"===n?l.insertChild(r,o):"below"===n&&(o<l.childrenGuids.length-1?l.insertChild(r,o+1):l.appendChild(r)))});break}case"replaceClasses":{let{affectedId:e,classes:t}=r,n=e4.q.instance.get(e),a=n?.isIconLike&&(0,aG.Dk)(n)===aG.lg.CONTENT?"Icon":void 0;nz.l7.ai("first-draft-make-changes-replace-classes",()=>{for(let n of t)(0,ri.w)(e,n,a)})}}},[e,t,n,i,a]),resetMakeChanges:(0,r.useCallback)(()=>{t.current=(0,ee.g)()},[t]),instrumentationRef:i}}({clientLifecycleId:n}),[E,y]=r.useState(0),[b,v]=r.useState(Error((0,en.t)("first_draft.something_went_wrong"))),[C,w]=r.useState(null),[T,S]=iQ.tU.useTabs({prompt:!0,theme:!0},{defaultActive:"theme",recordingKey:Q.Pt(e,"tabs")});l8(2===E||3===E||4===E);let x=r.useRef(1),k=r.useRef(null);(0,r.useEffect)(()=>{k.current=a},[a]);let[N,I]=r.useState(Date.now()),A=(0,i.wA)(),O=r.useCallback(()=>{x.current+=1,f.current.trackFinished("stopped"),ol(t,"stopped"),y(0)},[y,t,x,f]),L=r.useCallback(async()=>{g();let e=x.current,a={file_key:s,clientLifecycleId:n,generation_id:p?.firstDraftData?.generationId};try{if(f.current.start(),y(1),w(null),I(Date.now()),!p)throw Error("Root node not found");let r=p&&p.getSharedPluginData(aj.SV,"userPrompt")||"",i=oi(p),l="LOCAL"===i.type,o=l?h.XJn.getKitKey(i.pageId):i.key,s=d.find(e=>"key"in e.dsKitKey&&e.dsKitKey.key===o);Object.assign(a,{dsKitType:i.type,isLocal:l,kitKey:o,kitIdentifier:s?.metadata?.identifier??null}),(0,as.sx)("First Draft: Make Changes Started",{...a,hasNonRootNodeSelected:!(p.guid in m)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),(0,ll.Dl)(t);let{jsxStr:c}=i3({[p.guid]:!0},!1),{jsxStr:u}=i3({[p.guid]:!0},!0);if(!c||!u){(0,as.sx)("First Draft: Make Changes Ended",{...a,timeElapsedMs:Date.now()-N,status:"failed",reason:"infer-jsx-failed",hasNonRootNodeSelected:!(p.guid in m)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),ol(t,"error"),y(2);return}let g=k.current||"",E=function(e){if(!(0,X.kc)().first_draft_prompt_history||!(0,X.kc)().first_draft_make_changes_history)return[];let t=(0,i6.Q_)();if(!t)return[];let n=`${i8}${e}`,a=t.getItem(n);if(!a)return[];try{return e7.array(i4.Db).parse(JSON.parse(a))}catch{}return[]}(p.guid),b=function(e){let t=(0,rK.uP)(e,{ignoreOpacity:!0}),n=rS((0,aK.X6)(e)??nZ.UE,t.colors),a=rk(e)??aG.lH.LIGHT;return{...(0,rK.rO)(e,t),version:2,brandColor:n,darkMode:"dark"===a}}(p),v=await e6.Ay.design.firstDraftMakeChanges({userPrompt:g,promptHistory:E,storedInitialPrompt:r,kitKey:o??"",isLocal:l,currentTheme:b,jsx:c,jsxInsertReplace:u},(0,rA.Lp)({clientLifecycleId:n}));E.push({prompt:g}),function(e,t){let n=(0,i6.Q_)();if(!n)return;let a=`${i8}${e}`;n.setItem(a,JSON.stringify(t))}(p.guid,E);let C=v.getReader(),T=[];for(;;){let{done:n,value:l}=await C.read();if(e!==x.current){C.cancel();break}if(f.current.trackFirstByteReceived(),n&&f.current.trackLastStreamByteReceived(),(0,ew.Lo)("makeChanges","Response message",{message:l}),l?.trace&&w(l.trace),l?.action){if("replaceClasses"===l.action.type&&!(0,X.kc)().first_draft_surgical_edits){(0,ew.xi)("makeChanges","Unsupported action",{action:l.action.type}),(0,rX.Rh)("first_draft.client.make_changes.unsupported_action",{action:l.action.type}),T.push(Promise.reject(new aJ.G1("make_changes_unsupported",{})));continue}(0,as.sx)("First Draft: Make Changes Prompt Action",{...a,action:l.action.type},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),T.push(_(l.action,{dsKitKey:i,rootNodeId:p.guid,currentTheme:b,imageArgs:{initialUserPrompt:r}}))}if(n){let e=await Promise.allSettled(T);if(!T.length)throw(0,ew.xi)("makeChanges","No actions were applied from the prompt response"),(0,rX.Rh)("first_draft.client.make_changes.no_actions_applied"),new aJ.G1("make_changes_unsupported",{});if(e.every(e=>"rejected"===e.status)){for(let t of e)if("rejected"===t.status)throw t.reason}(0,as.sx)("First Draft: Make Changes Ended",{...a,status:"completed",timeElapsedMs:Date.now()-N,hasNonRootNodeSelected:!(p.guid in m)},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),ol(t,"success"),f.current.trackFinished("success"),y(2),a$.Y5.triggerAction("commit");break}}}catch(i){(0,ew.xi)("makeChanges","Error",{error:i});let e=i instanceof aJ.G1,n={...a,timeElapsedMs:Date.now()-N,error:i.toString(),status:"failed",reason:"error"},r=e?"handled_internally":(0,ew.$D)(l.FigmaTeam.AI_GENERATION,i,{extra:n});(0,as.sx)("First Draft: Make Changes Ended",{...n,sentryEventId:r},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),ol(t,"error"),f.current.trackFinished("failure"),e&&("make_changes_unsupported"===i.type||"make_changes_moderated"===i.type)?((0,as.sx)("First Draft: Make Changes Prompt Action",{...a,action:"make_changes_unsupported"===i.type?"iCantDoThis":"blocked"},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),y(4)):y(3),v(i instanceof Error?i:Error("Unknown error"))}finally{e===x.current&&(x.current+=1)}},[s,n,x,f,p,m,t,N,_,g,d]),D=()=>{y(0),(0,ls.k)()},R=C&&(0,X.kc)().cortex_execution_tracing;switch(E){case 1:return r.createElement(av.F,{onStop:O,aiTrackingContext:t,recordingKey:Q.Pt(e,"running")},(0,en.tx)("first_draft.making_changes"));case 3:return R&&(0,l6.A)(A,C),r.createElement(aE.E,{error:b,customMessage:(0,en.t)("first_draft.something_went_wrong"),recordingKey:Q.Pt(e,"error"),buttons:[{type:aE.f.GO_BACK,callback:D}],aiTrackingContext:t});case 4:return R&&(0,l6.A)(A,C),r.createElement(aE.E,{error:b,customMessage:(e=>{let t=(0,en.t)("first_draft.make_changes.i_cant_do_this");if(e instanceof aJ.G1){if("make_changes_moderated"===e.type)return(0,en.t)("ai.error.unsafe_or_harmful");if(!(0,X.kc)().first_draft_make_changes_errors)return t;if("make_changes_unsupported"===e.type&&e.data?.rationaleCategory){let t=e.data.rationaleCategory;switch(t){case"component":return(0,en.t)("first_draft.make_changes.i_cant_do_this_component");case"font":return(0,en.t)("first_draft.make_changes.i_cant_do_this_font");case"layout":return(0,en.t)("first_draft.make_changes.i_cant_do_this_layout");case"other":break;default:return(0,Y.assertNever)(t)}}}return t})(b),recordingKey:Q.Pt(e,"unsupported"),buttons:[{type:aE.f.GO_BACK,callback:D}],aiTrackingContext:t});case 2:let M=[];return(0,ec.KK)()&&!(0,X.kc)().first_draft_use_gemini&&(M.push({type:ab.i.UNDO_MAKE_CHANGES,callback:()=>{y(0),a$.Y5.triggerAction("undo"),(0,as.sx)("First Draft: Make Changes Undo",{file_key:s,clientLifecycleId:n},{forwardToDatadog:!0,sendAsBeacon:!0,mlEvent:!0}),(0,ls.k)()}}),M.push({type:ab.i.MAKE_CHANGES,callback:D})),R&&(0,l6.A)(A,C),r.createElement(ab.O,{recordingKey:Q.Pt(e,"iterate"),iterateOptions:M,aiTrackingContext:{...t,iteration_view_type:ah.$J.SUCCESS_WITH_ITERATION},stayOpen:!0});case 0:return r.createElement(or,{promptValue:a,setPromptValue:o,rootNode:p,tabManager:S,tabPropsMap:T,handleSubmit:L,recordingKey:e.recordingKey,aiTrackingContext:t});default:(0,Y.assertNever)(E)}}function or({promptValue:e,setPromptValue:t,rootNode:n,tabManager:a,tabPropsMap:i,handleSubmit:l,recordingKey:o,aiTrackingContext:s}){let c=s.clientLifecycleId,[d,u]=r.useState(lm(1)[0].prompt),[m,p]=r.useState(lm(3)),[_,g]=r.useState(ot(n?.guid??"")),f=r.useRef((0,rO.$L)(n)),h=r.useRef((0,rO.uq)(n)),E=r.useRef(_.radius),y=r.useRef(_.spacing);(0,r.useEffect)(()=>{f.current=(0,rO.$L)(n),h.current=(0,rO.uq)(n);let e=ot(n?.guid??"");E.current=e.radius,y.current=e.spacing},[n]);let{close:b}=(0,A.cq)(),v=(0,ei.tS)(),C=r.useMemo(()=>{let e,t;let a={file_key:v,clientLifecycleId:c,generation_id:n?.firstDraftData?.generationId};return n&&(t="LOCAL"===(e=oi(n)).type?e.pageId:e.key),Object.assign(a,{dsKitType:null!=e?e.type:null,kitKey:t}),a},[n,v,c]),w=_.colorMode,T=_.brandColor,S=_.displayBrandColor,x=_.radius,k=_.spacing,N=_.titleFonts,I=_.bodyFonts,O=_.labelFonts,L=(0,i0.ei)(n?.guid),D=(0,i2.k9)(()=>L,[L]);r.useEffect(()=>{let e=ot(n?.guid??"");g(t=>(0,rC.areClose)((0,rw.oB)(t.brandColor).h,(0,rw.oB)(e.brandColor).h,.01)?{...e,displayBrandColor:t.brandColor}:e)},[D,n?.guid]);let R=(0,i1.A)(e=>{(0,as.sx)("First Draft: Make Changes Color Change",{...C,color:e},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},5e3),M=r.useCallback(e=>{e!==w&&(nz.l7.user("first-draft-switch-color-mode",()=>{rN(n,e,(0,nZ.F_)(_.brandColor))}),R(w),a$.Y5.triggerAction("commit"),g({..._,colorMode:e}))},[_,n,w,R]),F=r.useMemo(()=>(function(e){let t={};if(!e)return t;let n=[e];for(;n.length>0;){let e=n.pop();if(e){if(e.fills.length>0){let n=(0,aK.gU)(e.fills);if(n){let a=(0,rw.oB)(n);t[e.guid]={s:a.s,l:a.l}}}else if(e.strokePaints.data.length>0){let n=(0,aK.gU)(e.strokePaints.data);if(n){let a=(0,rw.oB)(n);t[e.guid]={s:a.s,l:a.l}}}"childrenNodes"in e&&n.push(...e.childrenNodes)}}return t})(n),[n]),B=r.useRef(null),U=r.useRef(null),G=r.useCallback((e,t)=>{if(U.current)B.current=[e,U.current];else{U.current=e;let a=(0,nZ.F_)(t);nz.l7.user("first-draft-apply-brand-color",()=>{rx(n,e,w,F,a)}),g({..._,brandColor:e,displayBrandColor:e}),setTimeout(()=>{if(U.current=null,B.current){let[e,t]=B.current;B.current=null,G(e,t)}},30)}},[n,w,F,_]),K=r.useCallback(e=>{R((0,nZ.F_)(e)),G({...(0,aK.qO)(e,w),a:1},T)},[R,w,G,T]),V=(0,i1.A)(e=>{(0,as.sx)("First Draft: Make Changes Radius Change",{...C,radius:e},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},1e3),H=(0,i1.A)(e=>{V(e),(0,rO.oP)(f.current,e,E.current)},100),z=r.useCallback((e,t)=>{t.commit&&a$.Y5.triggerAction("commit"),e!==x&&(H(e),g({..._,radius:e}))},[x,_,H]),W=(0,i1.A)(e=>{(0,as.sx)("First Draft: Make Changes Spacing Change",{...C,spacing:e},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},1e3),j=(0,i1.A)(e=>{W(e),(0,rO.HS)(h.current,e,y.current)},100),$=r.useCallback((e,t)=>{t.commit&&a$.Y5.triggerAction("commit"),e!==k&&(j(e),g({..._,spacing:e}))},[k,_,j]),q=(0,i1.A)((e,t)=>{(0,as.sx)("First Draft: Make Changes Font Change",{...C,font_location:e,font_type:t},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0})},1e3),Y=r.useCallback(e=>0===e.length?null:e[0].family,[]),Z=r.useCallback(async e=>{await i9(aB.lu.TITLE,e,N),q("title",e),a$.Y5.triggerAction("commit"),n?.guid&&g(ot(n.guid))},[N,q,n?.guid]),ee=r.useCallback(async e=>{await i9(aB.lu.BODY,e,_.bodyFonts),q("body",e),a$.Y5.triggerAction("commit"),n?.guid&&g(ot(n.guid))},[_.bodyFonts,q,n?.guid]),ea=r.useCallback(async e=>{await i9(aB.lu.LABEL,e,_.labelFonts),q("label",e),a$.Y5.triggerAction("commit"),n?.guid&&g(ot(n.guid))},[_.labelFonts,q,n?.guid]),er=(0,r.useCallback)(e=>{(0,ll.SX)({...s,...(0,ll.Q0)(e),interaction:ah.NI.GENERATE}),l()},[s,l]),[el,eo]=r.useState(lG.COLOR),es=r.createElement(tQ.r,{shortcuts:[{key:J.Uz.ENTER,modifier:[J.xH.META]}],onAction:er,disabled:!n||0===e.length,recordingKey:Q.Pt(o,"submit")},(0,en.tx)("first_draft.make_changes")),ec=r.createElement(tQ.r,{shortcuts:[{key:J.Uz.ENTER,modifier:[J.xH.META]}],onAction:b,recordingKey:Q.Pt(o,"doneTheming")},(0,en.tx)("first_draft.done_theming"));return r.createElement(r.Fragment,null,r.createElement(ep.B,{fullWidth:!0,align:"center",justify:"space-between",gap:0},"theme"===a.activeTab&&r.createElement(l0,{section:el,colorMode:w,onChangeColorMode:M,brandColor:S,onChangeColor:K,cornerRadiusStop:x,onChangeCornerRadiusStop:z,spacingStop:k,onChangeSpacingStop:$,titleFont:Y(N),onChangeTitleFont:Z,bodyFont:Y(I),onChangeBodyFont:ee,labelFont:Y(O),onChangeLabelFont:ea,recordingKey:Q.Pt(o,"themeEditorDrawer")})),r.createElement("div",{className:P()(et.cx.p8.relative.$,"theme"===a.activeTab&&"first_draft_make_changes_view--contentBoxed--L-H0e",el&&et.cx.elevation500.radiusLarge.$),"data-testid":"readyForPromptView"},r.createElement(iQ.tU.TabPanel,{...i.prompt},r.createElement(lo.X,{value:e,onChange:t,recordingKey:Q.Pt(o,"prompt"),suggestion:d,suggestionPills:(0,X.kc)().first_draft_new_prompt_pills?m:void 0})),r.createElement(iQ.tU.TabPanel,{...i.theme},r.createElement(lZ,{activeTab:el,onTabChange:eo,brandColor:S,cornerRadiusStop:x,spacingStop:k,titleFont:Y(N),bodyFont:Y(I),labelFont:Y(O),recordingKey:Q.Pt(o,"themeEditor")})),r.createElement(ep.B,{fullWidth:!0,justify:"space-between"},r.createElement(iQ.tU.TabStrip,{manager:a},r.createElement(iQ.tU.Tab,{...i.theme},(0,en.tx)("first_draft.style")),r.createElement(iQ.tU.Tab,{...i.prompt},r.createElement("span",{"data-testid":"promptTabLabel"},(0,en.tx)("first_draft.prompt")))),"prompt"===a.activeTab?es:ec)))}function oi(e){let t=e.firstDraftData;if(t){if(t.kit.type===h.AZ4.LOCAL)return{type:"LOCAL",pageId:h.XJn.getPageIdFromKitKey(t.kit.key)??""};if(t.kit.type===h.AZ4.LIBRARY)return{type:"LIBRARY",key:t.kit.key}}return JSON.parse(e.getSharedPluginData(aj.SV,"dsKitKey"))}function ol(e,t){switch(t){case"success":(0,ll.as)({...e,status:ah.dM.COMPLETED,reason:ah.F9.SUCCESS});break;case"error":(0,ll.as)({...e,status:ah.dM.FAILED,reason:ah.F9.ERROR});break;case"stopped":(0,ll.as)({...e,status:ah.dM.FAILED,reason:ah.F9.STOPPED})}}var oo=n(47706),os=n(852438),oc=n(284538);function od({node:e,tree:t,parentComponent:n,descendantComponentGuids:a},r){if(!t[e.guid]){if(t[e.guid]={isBuildingBlock:r.isBuildingBlock,name:r.name,parentGuid:n?.guid??null,isListItem:r.isListItem,inferReason:r.inferReason,children:[]},n){let a=t[n.guid];a&&a.children.push(e.guid)}for(let r of a){let a=t[r];a&&(!a.parentGuid||a.parentGuid===n?.guid)&&(a.parentGuid=e.guid)}}}function ou({node:e,tree:t,parentComponent:n,descendantComponentGuids:a}){t[e.guid]&&delete t[e.guid];let r=n?t[n.guid]:null;for(let i of(r&&(r.children=r.children.filter(t=>t!==e.guid)),a)){let a=t[i];a&&a.parentGuid===e.guid&&(a.parentGuid=n?.guid??null,r&&r.children.push(i))}}function om(){let[e,t]=r.useState({loaded:0,total:0});return{submit:r.useCallback(async(e,n,a,r)=>{let i=e.filter(e=>"FRAME"===e.type&&!e.isStateGroup),l=(0,oc.Y6)(),{nodes:o,nodeMappings:s}=nz.l7.user("clone-nodes",()=>(function(e,t){let n=[],a={x:(0,oc.NY)(t.copiedDesigns).right()+oc.CN,y:oc.CN},r=new Map;for(let i of e){let e=h.XJn.cloneAndDeepDetachNodeForComponentize(i.guid),l=e.get(i.guid);if(!l)continue;let o=e4.q.instance.get(l);o&&(t.copiedDesigns.appendChild(o),n.push(o),o.relativeTransform={...o.relativeTransform,m02:a.x,m12:a.y},a.x+=o.size.x+oc.FL,r=new Map([...r,...e]))}return(0,oc.Vl)(t),{nodes:n,nodeMappings:r}})(i,l));for(let e of(t({loaded:1,total:o.length}),iE()(o,10))){let i=await (0,oo.Z)(op(e,n),a);if(a.aborted)return{};for(let e of i)if(e){if(r?.remapNodeIdsForTest)for(let[t,n]of s.entries()){let a=e.components[t];a&&(e.components[n]=a,delete e.components[t])}nz.l7.user("componentize",()=>{!function(e,t){let n=e.frame,a=e4.q.instance;if(!a.getCurrentPage())return;let r=(0,oc.NY)(t.buildingBlocks),i=(0,oc.NY)(t.atoms),l=function(e,t){let n={};for(let a of e.childrenNodes)!function e(t,n,a,r,i=null){var l;let o=a.components[t.guid],s=(l=a.isMobileDesign,"FRAME"===t.type&&(!l||function(e,t,n=.1){return Math.abs(e-t)<n}(t.size.x,n.size.x-n.stackLeftPadding-n.stackLeftPadding))),c=[];if(o&&(r[t.guid]={isBuildingBlock:s,name:o,parentGuid:i?.guid??null,isListItem:!1,children:[]},i&&r[i.guid])){let e=r[i.guid];e&&e.children.push(t.guid)}for(let l of t.childrenNodes)c=c.concat(e(l,n,a,r,o?t:i));let d={node:t,designNode:n,tree:r,nodeCanBeBuildingBlock:s,descendantComponentGuids:c,parentComponent:i};(function(e){let{node:t,tree:n,nodeCanBeBuildingBlock:a,parentComponent:r}=e,i={};for(let e of t.childrenNodes){let t=n[e.guid];t&&(i[t.name]||(i[t.name]=[]),i[t.name].push(e.guid))}let l=Object.entries(i).filter(([e,t])=>t.length>1);if(1!==l.length)return;let o=l[0][1],s=o[0];for(let i of(n[t.guid]||r||!s||od(e,{name:`${n[s].name}List`,isBuildingBlock:a,isListItem:!1,inferReason:"list-view"}),o)){let e=n[i];e&&(e.isListItem=!0,e.isBuildingBlock=!1)}})(d),function(e){let{node:t,tree:n,nodeCanBeBuildingBlock:a,parentComponent:r,descendantComponentGuids:i}=e;!n[t.guid]&&!r&&a&&i.filter(e=>!n[e]?.isBuildingBlock&&!n[e]?.parentGuid).length>0&&od(e,{name:`Component:${t.guid}`,isBuildingBlock:!0,isListItem:!1,inferReason:"component-for-orphaned-atoms"})}(d),function(e){let{node:t,tree:n,designNode:a,descendantComponentGuids:r,nodeCanBeBuildingBlock:i}=e;!n[t.guid]&&0===r.length&&t.parentGuid===a.guid&&i&&od(e,{name:`Component:${t.guid}`,isBuildingBlock:!0,isListItem:!1,inferReason:"component-for-uncomponentized-element"})}(d),function(e){let{node:t,designNode:n,tree:a}=e,r=a[t.guid];if(r&&r.isBuildingBlock&&t.size.y>.66*n.size.y&&r.children.length>1&&r.children.every(e=>a[e]?.isBuildingBlock)){for(let e of r.children){let t=a[e];t&&(t.parentGuid=null)}ou(e)}}(d),function({node:e,tree:t,parentComponent:n,nodeCanBeBuildingBlock:a,descendantComponentGuids:r,designNode:i}){let l=e.childrenNodes[0];if(a&&1===e.childrenGuids.length&&l&&t[l.guid]?.isBuildingBlock){let a=t[l.guid];a&&!t[e.guid]&&(t[e.guid]={isBuildingBlock:!0,name:a.name,parentGuid:n?.guid??null,isListItem:!1,inferReason:"hoisted-singleton-building-block",children:a.children}),ou({node:l,designNode:i,tree:t,parentComponent:e,descendantComponentGuids:r,nodeCanBeBuildingBlock:!0})}}(d);let u=function({node:e,designNode:t,tree:n,parentComponent:a,descendantComponentGuids:r}){if(e.size.x<100||e.size.y<20||r.length>0||"NONE"===e.stackMode||e.childrenGuids.length<=1)return[];let i=e.childrenNodes[0],l=e.childrenNodes[e.childrenNodes.length-1],o=[];for(let s of[i,l]){if(s?.type!=="FRAME"||s.size.x<100||s.size.y<20)continue;let i=h.XJn.findSimilarNodes(s.guid,e.guid,!1,!1,!0),l=[s,...i.map(e=>e4.q.instance.get(e)).filter(e=>!!e)],c=Array.from((0,os._i)(new Set(e.childrenGuids),new Set([s.guid,...i])));if(l.length>=2&&l.length>=e.childrenGuids.length-1&&c.length<=1){let i=c[0];if(i){let t=e.childrenGuids.indexOf(i);if(t>0&&t<e.childrenGuids.length-1)return[]}for(let i of l)n[i.guid]||(od({node:i,designNode:t,tree:n,parentComponent:n[e.guid]?e:a,descendantComponentGuids:r,nodeCanBeBuildingBlock:!1},{isBuildingBlock:!1,name:`Component:${i.guid}`,isListItem:!0,inferReason:"similar-sublayers"}),o.push(i.guid))}}return o}(d);return r[t.guid]?[t.guid,...c,...u]:[...c,...u]}(a,e,t,n);return n}(n,e),o={x:r.right()+oc.CN,y:oc.CN},s={x:i.right()+oc.CN,y:oc.CN},c={};for(let e in l){let r=l[e].name,i=a.get(function(e,t){for(;t[e];)e=t[e];return e}(e,c));if(!i||"FRAME"!==i.type||e===n.guid||((0,oc.MR)(i,t.icons),!i.isAlive()))continue;let d=h.XJn.findSimilarNodes(i.guid,t.buildingBlocks.guid,!1,!0,!0).concat(h.XJn.findSimilarNodes(i.guid,t.atoms.guid,!1,!0,!0)),u=d[0]?a.get(d[0]):null;u||((u=a.createComponentFromNode(i.clone())).name=r,l[e]?.isBuildingBlock?(t.buildingBlocks.appendChild(u),u.relativeTransform={...u.relativeTransform,m02:o.x,m12:o.y},o.y+=u.size.y+oc.FL):(t.atoms.appendChild(u),u.relativeTransform={...u.relativeTransform,m02:s.x,m12:s.y},s.y+=u.size.y+oc.FL));let m=(0,oc.w8)(i,u);if(m)for(let[e,t]of m?.entries()){let n=a.get(t),r=n?.overrideKey;r&&(c[e]=r)}}(0,oc.Vl)(t)}(e,l)})}t(t=>({loaded:Math.min(t.loaded+e.length,t.total),total:t.total}))}return a$.Y5.commit(),{}},[]),progress:e}}async function op(e,t){let n=await Promise.all(e.map(async e=>{let t=await (0,aj.gC)(e);return{imageB64:t.base64,jsx:t.jsx}}));return(await e6.Ay.design.firstDraftComponentize({requests:n},(0,rA.Lp)({clientLifecycleId:t}))).responses.map((t,n)=>{let a=e[n];return t&&a?{frame:a,isMobileDesign:t.isMobileDesign,components:t.components.reduce((e,t)=>(e[t.guid]=t.name,e),{})}:null})}var o_=n(582626),og=(e=>(e[e.COMPONENTIZE=0]="COMPONENTIZE",e[e.ADD_PROPS=1]="ADD_PROPS",e[e.LINT=2]="LINT",e[e.ALL=3]="ALL",e))(og||{}),of=(e=>(e.INITIAL="initial",e.COMPONENTIZE="componentize",e.ADD_PROPS="add_props",e.LINT="lint",e.ALL="all",e))(of||{});function oh(e){return e.filter(e=>"FRAME"===e.type).length}function oE(e){let[t,n]=r.useState("initial"),a=[{step:3,title:(0,en.t)("first_draft.make_kit.all_steps.title"),description:(0,en.t)("first_draft.make_kit.all_steps.description")},{step:0,title:(0,en.t)("first_draft.make_kit.componentize_step.title"),description:(0,en.t)("first_draft.make_kit.componentize_step.description")},{step:1,title:(0,en.t)("first_draft.make_kit.add_props_step.title"),description:(0,en.t)("first_draft.make_kit.add_props_step.description")},{step:2,title:(0,en.t)("first_draft.make_kit.lint_step.title"),description:(0,en.t)("first_draft.make_kit.lint_step.description")}],i=(0,r.useCallback)(e=>{switch(e){case 0:n("componentize");break;case 1:n("add_props");break;case 2:n("lint");break;case 3:n("all")}},[]),l=e=>r.createElement(aw.B.Item,{key:e.step,primaryAction:{onAction:()=>{i(e.step)}}},r.createElement("div",{className:et.cx.flex.flexColumn.p4.wFull.$},r.createElement("div",{className:et.cx.font13.wFitContent.$},e.title),r.createElement("div",{className:et.cx.font11.colorTextSecondary.lh16.wFitContent.$},e.description)));switch(t){case"initial":return r.createElement(e_.n,{hideActionPanel:!0},r.createElement(e_.n.Header,null,r.createElement("div",{className:et.cx.wFull.flex.flexColumn.p8.$},r.createElement("div",{className:et.cx.wFull.flex.gap4.$},r.createElement("div",{className:et.cx.h24.$},r.createElement(lE.K,{recordingKey:Q.Pt(e.recordingKey,"backButton"),onClick:e.onBack,"aria-label":(0,en.t)("qa.go_back")},r.createElement(lv.C,null))),r.createElement("div",{className:et.cx.colorText.textBodyLarge.$},(0,en.tx)("fullscreen_actions.quick_actions.first-draft-make-kit"))),r.createElement("div",{className:et.cx.wFull.flex.font11.$},(0,en.tx)("first_draft.make_kit.description")))),r.createElement(e_.n.Body,null,r.createElement(aw.B,{resultCount:a.length,maxVisibleResults:a.length},l(a[0]),r.createElement(aw.B.Section,{header:"Individual steps"},a.slice(1).map(l)))));case"componentize":return r.createElement(ob,null);case"add_props":return r.createElement(oC,null);case"lint":return r.createElement(iZ.zY,null);case"all":return r.createElement(ow,null)}}let oy=async({params:{submit:e,selectedNodes:t},abortController:n,clientLifecycleId:a})=>{await e(t,a,n.signal)};function ob(e){let{close:t}=(0,A.cq)(),n=(0,ac.RL)(m.JT.FIRST_DRAFT_COMPONENTIZE,oy),{start:a,stop:i,state:l,aiTrackingContext:o}=n,{submit:s,progress:c}=om(),d=(0,r.useCallback)(async()=>{let e=e4.q.instance.getCurrentPage();if(!e)return;let t=e.directlySelectedNodes;0!==t.length&&await a({selectedNodes:t,submit:s})},[a,s]),u=r.useCallback(()=>{i(),t()},[t,i]),p=r.useCallback(()=>{h.glU.triggerActionInUserEditScope("undo",{}),t()},[t]),_=e.overrides?.state??l,g=e.overrides?.progress??c;switch(_){case ac.qy.INITIAL:return r.createElement(ay.A,{action:m.JT.FIRST_DRAFT_COMPONENTIZE,actionLabel:(0,en.tx)("first_draft.make_kit.componentize_step.title"),actionIcon:r.createElement(eQ.K,null),onPerform:e.overrides?.perform??d,instructionAction:{type:"learn_more",url:"https://figma.com"},aiTrackingContext:o,getCustomSelectedNodesAmount:oh},(0,en.tx)("first_draft.make_kit.componentize_step.instructions"));case ac.qy.RUNNING:return r.createElement(av.F,{recordingKey:Q.Pt(e.recordingKey,"componentizeRunning"),aiTrackingContext:o,onStop:u,secondaryMessage:g.total?(0,en.t)("first_draft.make_kit.x_of_y_frames",{loaded:g.loaded,total:g.total}):void 0},(0,en.tx)("first_draft.make_kit.componentize_step.running"));case ac.qy.DONE:return r.createElement(ab.O,{iterateOptions:[{type:ab.i.UNDO,callback:p}],aiTrackingContext:{...o,iteration_view_type:ah.$J.DEFAULT_SUCCESS}});case ac.qy.CANCELLED:return null;case ac.qy.ERROR:return r.createElement(aE.E,{error:"error"in n?n.error:Error(),recordingKey:Q.Pt(e.recordingKey,"error"),buttons:[{type:aE.f.OK,callback:t}],aiTrackingContext:o});default:(0,Y.assertNever)(_)}}let ov=async({params:{submit:e,selectedNodes:t},abortController:n,clientLifecycleId:a})=>{await e(a,n.signal,t)};function oC(e){let{close:t}=(0,A.cq)(),{submit:n,progress:a}=(0,o_.iK)(),i=(0,ac.RL)(m.JT.FIRST_DRAFT_SUGGEST_PROPS,ov),{start:l,stop:o,state:s,aiTrackingContext:c}=i,d=(0,r.useCallback)(async()=>{let e=e4.q.instance.getCurrentPage();if(!e)return;let t=e.directlySelectedNodes;0!==t.length&&await l({selectedNodes:t,submit:n})},[l,n]),u=r.useCallback(()=>{o(),t()},[t,o]),p=r.useCallback(()=>{h.glU.triggerActionInUserEditScope("undo",{}),t()},[t]),_=e.overrides?.state??s,g=e.overrides?.progress??a;switch(_){case ac.qy.INITIAL:return r.createElement(ay.A,{action:m.JT.FIRST_DRAFT_SUGGEST_PROPS,actionLabel:(0,en.tx)("first_draft.make_kit.add_props_step.add_props_button"),actionIcon:r.createElement(eQ.K,null),onPerform:d,instructionAction:{type:"learn_more",url:"https://figma.com"},aiTrackingContext:c},(0,en.tx)("first_draft.make_kit.add_props_step.instructions"));case ac.qy.RUNNING:return r.createElement(av.F,{recordingKey:Q.Pt(e.recordingKey,"suggestPropsRunning"),aiTrackingContext:c,onStop:u,secondaryMessage:g.total?(0,en.t)("first_draft.make_kit.x_of_y_components",{loaded:g.loaded,total:g.total}):void 0},(0,en.tx)("first_draft.make_kit.add_props_step.running"));case ac.qy.DONE:return r.createElement(ab.O,{iterateOptions:[{type:ab.i.UNDO,callback:p}],aiTrackingContext:{...c,iteration_view_type:ah.$J.DEFAULT_SUCCESS}});case ac.qy.CANCELLED:return null;case ac.qy.ERROR:return r.createElement(aE.E,{error:"error"in i?i.error:Error(),recordingKey:Q.Pt(e.recordingKey,"error"),buttons:[{type:aE.f.OK,callback:t}],aiTrackingContext:c});default:(0,Y.assertNever)(_)}}function ow(e){let{submit:t,progress:n}=om(),{start:a,state:i}=(0,ac.RL)(m.JT.FIRST_DRAFT_COMPONENTIZE,oy),{submit:l,progress:o}=(0,o_.iK)(),{start:s,state:c}=(0,ac.RL)(m.JT.FIRST_DRAFT_SUGGEST_PROPS,ov),d=(0,r.useCallback)(async()=>{let e=e4.q.instance.getCurrentPage();if(!e)return;let n=e.directlySelectedNodes;0!==n.length&&(await a({selectedNodes:n,submit:t}),await s({submit:l}))},[a,t,s,l]);switch(i){case ac.qy.INITIAL:case ac.qy.RUNNING:case ac.qy.CANCELLED:case ac.qy.ERROR:return r.createElement(ob,{overrides:{state:i,progress:n,perform:d}});case ac.qy.DONE:switch(c){case ac.qy.INITIAL:case ac.qy.RUNNING:case ac.qy.CANCELLED:case ac.qy.ERROR:return r.createElement(oC,{overrides:{state:c,progress:o}});case ac.qy.DONE:return r.createElement(iZ.zY,null);default:(0,Y.assertNever)(c)}default:(0,Y.assertNever)(i)}}class oT{constructor(e=1){this.queue=[],this.queue=[],this.concurrencyLimit=e,this.activeCount=0}postTask(e,t){return new Promise((n,a)=>{let r=async()=>{try{n(await e())}catch(e){a(e)}};this.queue.push([r,t]),this.doNextTask()})}async doNextTask(){if(0===this.queue.length||this.activeCount>=this.concurrencyLimit)return;let e=this.queue.shift();if(!e)return;let[t,n]=e;this.activeCount++;try{await scheduler.postTask(t,n)}catch(e){throw e}finally{this.activeCount--,this.doNextTask()}}}var oS=n(601607),ox=n(438773),ok=n(946689),oN=n(723325),oI=n(660510),oA=n(72211),oO=n(606432);let oL=m.wC+76+16;function oD({aiTrackingContext:e,ParentComponent:t}){let{allUsableKitEntries:n,hasLastSelectedKit:a,setSelectedKit:i}=iq(),[l,o]=r.useState(""),s=r.useRef(null);(0,oA.y)(l,s),(0,oI.z)();let{pop:c,push:d}=(0,A.cq)(),u=(0,r.useCallback)(n=>{i(n),(0,ll.SX)({...e,interaction:ah.NI.SELECT_KIT,interaction_type:ah.bp.BUTTON_CLICK}),a?c():d({name:em.Sn.FIRST_DRAFT,module:r.createElement(t,null)})},[t,e,i,a,c,d]),[m,p]=r.useState(null);return r.useEffect(()=>{s.current?.focus()},[s]),r.createElement(R.s3,{name:"firstDraftKitPicker",recordingKey:"firstDraftKitPicker"},r.createElement(oN.dP,null,r.createElement("div",{className:et.cx.flex.flexColumn.$,style:{height:oL},"data-testid":"kitSelectionListContainer"},r.createElement("div",{className:P()("kit_picker_view--navContainer--JHIEY",U.Dm)},r.createElement("div",{className:et.cx.h24.$},r.createElement(lE.K,{recordingKey:Q.Pt("firstDraftKitSelection","backButton"),onClick:c,"aria-label":(0,en.t)("qa.go_back")},r.createElement(lv.C,null))),r.createElement("input",{ref:s,className:P()("kit_picker_view--searchInput--Yj6zW",U.Dm),placeholder:(0,en.t)("first_draft.kits.search_placeholder"),onChange:e=>{!function(e){if(o(e),0===e.length)p(null);else{let t=e.toLowerCase();p(n.filter(e=>e.name.toLowerCase().includes(t)))}}(e.target.value)},value:l,maxLength:100,spellCheck:!1,dir:"auto","aria-autocomplete":"list"}),r.createElement(oO.W,null)),r.createElement("div",{className:et.cx.p8.relative.flex.justifyCenter.flexGrow1.$,"data-testid":"kitSelectionListView"},r.createElement(oR,{kitsToShow:m||n,searchQuery:l,onKitOptionSelected:u})))))}function oR({kitsToShow:e,searchQuery:t,onKitOptionSelected:n}){if(t&&0===e.length){let e=t.length>20?`${t.slice(0,20)}\u2026`:t;return r.createElement("div",{className:et.cx.p8.selfCenter.justifyCenter.flex.flexGrow0.$},(0,en.tx)("first_draft.kits.no_results",{searchQuery:e}))}return r.createElement(ad.T.Provider,{value:{recordingKey:"firstDraftView"}},r.createElement(aw.B,{primary:!0,resultCount:e.length},e.map((e,t)=>r.createElement(aw.B.Item,{key:t,primaryAction:{text:"Perform",shortcuts:[{key:J.Uz.ENTER}],onAction:()=>n(e)},actionLabel:!1,recordingKey:Q.Pt("firstDraftKitSelection",t,"list-item")},r.createElement("div",{className:et.cx.p4.gap8.flexRow.flex.itemsCenter.$,"data-testid":"fd-kit-item"},r.createElement("div",{className:"kit_picker_view--fileThumbnail--aGgkC",style:{backgroundImage:`url(${e.thumbnailUrl})`}}),r.createElement("div",{className:"kit_picker_view--kitDisplayInformation--Ypl2p utilities--bodyMedium--7-YGK"},r.createElement("div",null,oM(e)),r.createElement("div",{className:"kit_picker_view--componentCountText--bBnSq"},(0,en.tx)("first_draft.kits.components_count",{count:e.numComponents})))))),r.createElement(oP,null)))}function oM(e){switch(e.dsKitKey.type){case"LOCAL":return e.name;case"LIBRARY":if(e.metadata.identifier)return(0,en.t)(`first_draft.kits.${e.metadata.identifier}`)||e.name;return e.name;default:return(0,Y.assertNever)(e.dsKitKey)}}function oP(){return r.createElement("div",{className:"kit_picker_view--tempGettingStartedNotice--ADe-Q utilities--bodyMedium--7-YGK"},r.createElement("div",{className:et.cx.fontBold.$},(0,en.tx)("first_draft.getting_started.heading")),r.createElement("div",{className:et.cx.inline.colorTextSecondary.$},(0,en.tx)("first_draft.getting_started.notice")," ",r.createElement(ok.N_,{className:et.cx.inline.colorTextSecondary.underline.hAuto.$,trusted:!0,href:"https://www.figma.com/blog/figma-ai-first-draft/",target:"_blank",onClick:e=>e.stopPropagation(),"data-tooltip":(0,en.t)("qa.learn_more"),"data-tooltip-type":eK.Ib.TEXT,"data-tooltip-show-above":!0},(0,en.tx)("qa.learn_more"))))}function oF({promptValue:e,setPromptValue:t,onShowKitPicker:n,selectedKit:a,handleSubmit:i,promptHistory:o,recordingKey:s,aiTrackingContext:c}){let[d]=r.useState(function(e=3,t){let n=(0,X.kc)().first_draft_new_prompt_pills,a=[{label:(0,en.t)("first_draft.prompts.pricing_page.label"),prompt:(0,en.t)("first_draft.prompts.pricing_page.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.sign_in_screen.label"),prompt:(0,en.t)("first_draft.prompts.sign_in_screen.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.blog_post.label"),prompt:(0,en.t)("first_draft.prompts.blog_post.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.portfolio.label"),prompt:(0,en.t)("first_draft.prompts.portfolio.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.news_site.label"),prompt:(0,en.t)("first_draft.prompts.news_site.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.onboarding.label"),prompt:(0,en.t)("first_draft.prompts.onboarding.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.sign_in_screen.label"),prompt:(0,en.t)("first_draft.prompts.sign_in_screen.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.blog_post.label"),prompt:(0,en.t)("first_draft.prompts.blog_post.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.map_app_mobile.label"),prompt:(0,en.t)("first_draft.prompts.map_app_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.messaging_mobile.label"),prompt:(0,en.t)("first_draft.prompts.messaging_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.profile.label"),prompt:(0,en.t)("first_draft.prompts.profile_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.travel_app_mobile.label"),prompt:(0,en.t)("first_draft.prompts.travel_app_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.social_feed_mobile.label"),prompt:(0,en.t)("first_draft.prompts.social_feed_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.ticketing_app.label"),prompt:(0,en.t)("first_draft.prompts.ticketing_app.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.ride_sharing_mobile.label"),prompt:(0,en.t)("first_draft.prompts.ride_sharing_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.to_dos_mobile.label"),prompt:(0,en.t)("first_draft.prompts.to_dos_mobile.prompt"),type:"MOBILE"}];n&&a.push({label:(0,en.t)("first_draft.prompts.homepage.label"),prompt:(0,en.t)("first_draft.prompts.homepage.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.homepage.label"),prompt:(0,en.t)("first_draft.prompts.homepage_2.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.video_player_streaming.label"),prompt:(0,en.t)("first_draft.prompts.video_player_streaming.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.video_page_with_comments.label"),prompt:(0,en.t)("first_draft.prompts.video_page_with_comments.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.search_results_travel.label"),prompt:(0,en.t)("first_draft.prompts.search_results_travel.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.social_feed_text_heavy.label"),prompt:(0,en.t)("first_draft.prompts.social_feed_text_heavy.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.profile.label"),prompt:(0,en.t)("first_draft.prompts.profile_social_media.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.news_article.label"),prompt:(0,en.t)("first_draft.prompts.news_article.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.landing_page.label"),prompt:(0,en.t)("first_draft.prompts.landing_page_beauty.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.landing_page.label"),prompt:(0,en.t)("first_draft.prompts.landing_page_tech.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.marketing_page_football.label"),prompt:(0,en.t)("first_draft.prompts.marketing_page_football.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.shopping.label"),prompt:(0,en.t)("first_draft.prompts.shopping_hifi.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.shopping.label"),prompt:(0,en.t)("first_draft.prompts.product_details_shoes.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.admin_dashboard_saas.label"),prompt:(0,en.t)("first_draft.prompts.admin_dashboard_saas.prompt"),type:"WEB"},{label:(0,en.t)("first_draft.prompts.settings_mobile.label"),prompt:(0,en.t)("first_draft.prompts.settings_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.video_player_comments_mobile.label"),prompt:(0,en.t)("first_draft.prompts.video_player_comments_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.checkout_mobile.label"),prompt:(0,en.t)("first_draft.prompts.checkout_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.reviews_mobile.label"),prompt:(0,en.t)("first_draft.prompts.reviews_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.audio_player_mobile.label"),prompt:(0,en.t)("first_draft.prompts.audio_player_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.investing_mobile.label"),prompt:(0,en.t)("first_draft.prompts.investing_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.app_browsing_mobile.label"),prompt:(0,en.t)("first_draft.prompts.app_browsing_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.reservations_mobile.label"),prompt:(0,en.t)("first_draft.prompts.reservations_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.fitness_mobile.label"),prompt:(0,en.t)("first_draft.prompts.fitness_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.subscriptions_mobile.label"),prompt:(0,en.t)("first_draft.prompts.subscriptions_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.recipes_mobile.label"),prompt:(0,en.t)("first_draft.prompts.recipes_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.sports_mobile.label"),prompt:(0,en.t)("first_draft.prompts.sports_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.delivery_app_mobile.label"),prompt:(0,en.t)("first_draft.prompts.delivery_app_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.calendar_mobile.label"),prompt:(0,en.t)("first_draft.prompts.calendar_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.email_mobile.label"),prompt:(0,en.t)("first_draft.prompts.email_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.file_browser_mobile.label"),prompt:(0,en.t)("first_draft.prompts.file_browser_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.education_mobile.label"),prompt:(0,en.t)("first_draft.prompts.education_mobile.prompt"),type:"MOBILE"},{label:(0,en.t)("first_draft.prompts.shopping_mobile.label"),prompt:(0,en.t)("first_draft.prompts.shopping_mobile.prompt"),type:"MOBILE"});let r=a;if(t){let e=t.toLowerCase();e.includes("mobile")?r=r.filter(e=>"MOBILE"===e.type):e.includes("web")&&(r=r.filter(e=>"WEB"===e.type))}let i=ld()(r),o={};for(let t of i){if(Object.keys(o).length>=e)break;let n=lp(t.label);o[n]||(o[n]=t)}let s=Object.values(o).slice(0,e);return s.length<e?((0,ew.$D)(l.FigmaTeam.AI_GENERATION,Error(`Unable to generate ${e} unique presets`),{extra:{count:e,generatedCount:s.length,selectedPresetsObj:o,shuffledPresets:i}}),[]):s}(4,a?.name)),u=(0,r.useCallback)(e=>{(0,ll.SX)({...c,...(0,ll.Q0)(e),interaction:ah.NI.GENERATE}),i()},[c,i]);return r.createElement("div",{className:et.cx.p8.borderBox.$,"data-testid":"readyForPromptView"},r.createElement(lo.X,{value:e,onChange:t,suggestion:d[0].prompt,suggestionPills:d.slice(1),promptHistory:o,recordingKey:Q.Pt(s,"generate"),featureNameForInstrumentation:"first_draft",refocusToInput:!1,topNavContent:r.createElement("div",{className:"first_draft_prompt_view_v2--libraryButtonContainer--P-Bye"},a&&r.createElement(aS.$n,{"aria-label":oM(a),iconPrefix:r.createElement(iz.i,{style:{marginLeft:2,marginRight:4}}),onClick:n,recordingKey:Q.Pt(s,"changeKit"),variant:"secondary"},oM(a)))}),r.createElement(ep.B,{fullWidth:!0,justify:"end"},r.createElement(tQ.r,{shortcuts:[{key:J.Uz.ENTER,modifier:[J.xH.META]}],onAction:u,recordingKey:Q.Pt(s,"generate"),disabled:0===e.length},(0,en.tx)("first_draft.generate"))))}var oB=n(821597);function oU({options:e,onSelect:t}){let[n,a]=r.useState(),i=r.useCallback((e,r)=>{t(e,{ev:r,prevOption:n}),a(e)},[t,n]);return r.createElement(lS._,null,r.createElement(oB.t,null),r.createElement(t0.x,{columns:6,gap:13.9,padding:0},e.map((e,t)=>r.createElement(oG,{key:t,column:t,presetOption:e,onSelect:i}))))}function oG({column:e,presetOption:t,onSelect:n}){let a={onAction:e=>n(t,e)};return r.createElement(t0.x.Item,{recordingKey:`previewTileItem-${e}`,focusAction:a,primaryAction:a,enableFauxFocus:!1},r.createElement(t0.x.GridItemHighlight,null,r.createElement("div",{className:et.cx.colorBgSecondary.b1.colorBorder.wFull.flex.alignCenter.justifyCenter.$,style:{aspectRatio:"1/1",height:"56px",overflow:"hidden",borderRadius:"8px",alignItems:"flex-start"}},r.createElement("img",{alt:"Preview of generation",src:t.dataURI,className:et.cx.maxWFull.$,draggable:!1}))))}let oK=(0,s.E3)("draft_prompt_history",[]),oV=(0,s.Iz)(()=>(0,t_.eU)("")),oH=async({params:{selectedKit:e,promptValue:t,submitPrompt:n,shouldContinueStreamRef:a},abortController:r})=>{r.signal.addEventListener("abort",()=>{a.current=!1});let i=await n(t,{designSystem:e},{shouldGenerateImages:!0,addWireframeBorder:e?.metadata.needs_border});if(i.error)throw h.XJn.clearFDScene(),i.error;if(i?.success&&!i?.nodeId)throw Error((0,en.t)("first_draft.no_design_generated"));return{result:i}};function oz(){let e=(0,ei.tS)(),{aiTrackingContext:t}=(0,ac.wj)(m.JT.FIRST_DRAFT),n=t.clientLifecycleId,a=r.useCallback(()=>{(0,as.sx)("First Draft: Error",{file_key:e,clientLifecycleId:n,view:"firstDraftGenerate"},{forwardToDatadog:!0,sendAsBeacon:!0,mlEvent:!0})},[n,e]);return r.createElement(c.tH,{boundaryKey:"FirstDraft",fallback:c.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{clientLifecycleId:n,area:l.FigmaTeam.AI_GENERATION},onError:a},r.createElement(ad.T.Provider,{value:{recordingKey:"firstDraftView"}},r.createElement(oW,{recordingKey:"firstDraftView"})))}function oW({recordingKey:e}){let t=(0,ac.RL)(m.JT.FIRST_DRAFT,oH),{start:n,stop:a,state:l,aiTrackingContext:o}=t,c=o.clientLifecycleId,d=(0,eR.eY)(),u=(0,ei.tS)(),p=oV(c),[_,g]=(0,s.fp)(p),[f,E]=r.useState([]),y=r.useRef(!0),b=r.useRef(null),v=r.useRef(null),C=r.useRef(new oT(1)),[w,T]=r.useState(new Set),S=r.useRef({}),{kitsAreLoaded:x,kitOptionDropdownItems:k,hasLastSelectedKit:N,selectedKit:I}=iq(),{close:O,push:L,replace:D}=(0,A.cq)(),[R,M]=r.useState(!1===N);(0,r.useEffect)(()=>{if(R||!N)return(N?L:D)({name:em.Sn.FIRST_DRAFT_KIT_PICKER,module:r.createElement(oD,{aiTrackingContext:o,ParentComponent:oz})})},[o,R,N,e,L,D]);let{promptHistory:P,addPromptToHistory:F}=(0,ox.a)(oK,e=>e),[B,U]=(0,r.useState)(!1),[G,K]=(0,r.useState)(!1),V=(0,i.wA)();l8(l===ac.qy.DONE||l===ac.qy.ERROR),r.useEffect(()=>()=>{h.XJn.clearFDScene()},[]);let{submitPrompt:H,submitV3Prompt:z,executionTrace:W,imageProgress:j}=io({shouldContinueStream:r.useCallback(()=>y.current,[y]),onInsertJSXDone:r.useCallback(async(e,t,n,a)=>{if(!e||!n)return;(0,aP.xF)(e);let r=!0;I&&!1===I.metadata.has_theme&&(r=!1),0===a.length&&0===Object.keys(t).length&&(r=!1),r&&E(await (0,rv.xk)(n,e,a,t))},[I]),clientLifecycleId:c}),$=r.useCallback(async()=>{if(l===ac.qy.RUNNING){(0,ew.xi)("first-draft","handleSubmit called while already running");return}if(!I){(0,ew.xi)("first-draft","handleSubmit called without a selected kit");return}F(_);let e=(0,X.kc)().first_draft_direct_gen&&(0,X.kc)().first_draft_generate_v3&&("LOCAL"===I.dsKitKey.type||I.metadata.direct_generation),t=await n({selectedKit:I,promptValue:_,submitPrompt:e?z:H,shouldContinueStreamRef:y});t?.result?.nodeId&&(b.current=t.result.nodeId),K(!1)},[l,I,F,_,n,z,H]),q=r.useCallback(()=>{a(),O()},[O,a]),J=(0,r.useCallback)(async(e,t)=>{void 0!==t.prevOption&&e!==t.prevOption&&(0,ll.hm)({...o,...(0,ll.zQ)(t.ev),iteration_view_type:ah.$J.SUCCESS_WITH_ITERATION,interaction:ah.sd.GALLERY_SELECT,status:ah.o2.COMPLETED,value:e.modeId||"null"}),t.ev.target?.item&&(S.current[t.ev.target.index]=t.ev.target.item),await C.current.postTask(()=>{if(b.current&&(v.current?.modeId??null)!==e.modeId){let t=(0,rv.DP)(e,b.current,w),n=d.get(t),a=n?.firstDraftData,r=a?.kit?.type??null;(0,as.sx)("First Draft: Multiple Options Selected",{preset_name:e.modeId,clientLifecycleId:c,isLocal:r===h.AZ4.LOCAL||null,dsKitType:null!==r?r===h.AZ4.LOCAL?"LOCAL":"LIBRARY":null,kitKey:a?.kit?.key??null,file_key:u},{forwardToDatadog:!0,batchRequest:!0,mlEvent:!0}),T(new Set([b.current,...w])),b.current=t,v.current=e}},{})},[o,w,c,d,u]),Z=(0,oS.Fk)((e,t)=>{for(let n of t)if(n){let t=e.get(n);if(t)return Object.values(t.explicitVariableModes())[0]??null}},[b.current,...w]);r.useEffect(()=>{if(v.current&&void 0!==Z&&v.current.modeId!==Z){let e=f.findIndex(e=>e.modeId===Z);S.current[e]&&(v.current=f[e],S.current[e].fauxFocus())}},[Z,f]);let ee=()=>0===f.length?null:r.createElement(oU,{options:f,onSelect:J});switch(l){case ac.qy.INITIAL:return r.createElement(oF,{promptValue:_,setPromptValue:g,handleSubmit:$,promptHistory:P,kitOptionDropdownItems:k,onShowKitPicker:()=>{M(!0)},selectedKit:I,kitsAreLoaded:x,recordingKey:e,aiTrackingContext:o});case ac.qy.RUNNING:return r.createElement(av.F,{recordingKey:Q.Pt(e,"running"),onStop:q,aiTrackingContext:o,secondaryMessage:j.total&&j.loaded?(0,en.t)("first_draft.x_of_y_images",{loaded:j.loaded,total:j.total}):void 0},(0,en.tx)("first_draft.running"));case ac.qy.DONE:{let n=t.result;if(B)return r.createElement(on,{initialRootGuid:n.result?.nodeId});if(G)return r.createElement(oF,{promptValue:_,setPromptValue:g,handleSubmit:$,promptHistory:P,kitOptionDropdownItems:k,onShowKitPicker:()=>{M(!0)},selectedKit:I,kitsAreLoaded:x,recordingKey:e,aiTrackingContext:o});let a=[];return(0,ec.KK)()&&!(0,X.kc)().first_draft_use_gemini&&a.push({type:ab.i.MAKE_CHANGES,callback:()=>{h.XJn.clearFDScene(),U(!0)}}),W&&(0,X.kc)().cortex_execution_tracing&&(0,l6.A)(V,W,()=>K(!0)),r.createElement(ab.O,{content:(()=>{let e=[],t=ee();return(t&&e.push(t),0===e.length)?null:r.createElement(aM.Y,{direction:"vertical",spacing:8},e)})(),iterateOptions:a,recordingKey:Q.Pt(e,"iterate"),aiTrackingContext:{...o,iteration_view_type:ah.$J.SUCCESS_WITH_ITERATION},stayOpen:!0})}case ac.qy.ERROR:{let{error:n}=t;return W&&(0,X.kc)().cortex_execution_tracing&&(0,l6.A)(V,W,()=>K(!0)),r.createElement(aE.E,{error:n,recordingKey:Q.Pt(e,"error"),buttons:[{type:aE.f.OK,callback:O}],aiTrackingContext:o})}case ac.qy.CANCELLED:return null;default:(0,Y.assertNever)(l)}}var oj=n(233387),o$=n(803038),oq=n(572206),oY=n(15859),oX=n(931770),oJ=n(28588);function oZ(){return r.createElement("div",{className:"image_to_design_animation_overlay--Sweep--RCkNg"})}let oQ=(0,t_.eU)("");function o0(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}let o1=async({params:e})=>{let t,n,a;if("node"in e&&e.node){let a=function(e){let t=e.size,n=(0,oX._G)(new oq.Mi(t.x,t.y),e.guid,!0,void 0,!1,!0);return n&&n.pixels&&n.pixelSize&&n.displaySize?(0,oX.Pv)(n.pixels,n.pixelSize):null}(e.node);if(!a)throw Error("Cannot process image");t=a.split(";base64,").pop(),n=a}else if("image"in e&&e.image)t=e.image,n=e.dataUrl;else throw Error("Invalid input");if("node"in e&&e.node){let t=(e.width+e.height)/2;a=new oq.Mi(e.node.x+e.width+.15*t,e.node.y)}else{let t=a$.Y5.getViewportInfo(),n=t.offsetX-e.width/2,r=t.offsetY-e.height/2;a=new oq.Mi(n,r)}let r=e4.q.instance,i=r.getCurrentPage();if(!i)throw Error("Cannot get current page from scene");let l=await o2(r,i,e.width,e.height,n,a);!function(e,t,n,a){nz.l7.user("create-node",()=>{let r=h.glU.applyBufferToScene(a);if(!r)throw n.removeSelfAndChildren(),Error("Couldn't apply buffer to scene");let i=e.get(r);i.visible=!1,i.x=n.x,i.y=n.y,i.rescale(n.size.y/i.size.y),t.appendChild(i),n.removeSelfAndChildren(),i.visible=!0,t.setSelectionToSingleNode(i.guid),h.glU.showSelectionOverlayImmediately()})}(r,i,l,o0(await o5(t)))};async function o2(e,t,n,a,i,l){let o;let s=o0(i.split(";base64,").pop()),c=function(e){if(!e.startsWith("data:"))throw Error("Invalid data URI");return e.substring(5,e.indexOf(";"))}(i),d=await (0,oY.UD)(s,c,"image");if(nz.l7.user("generate placeholder node",()=>{(o=e.createNode("RECTANGLE")).size={x:n,y:a},o.insertImageInFillPaint(d),o.x=l.x,o.y=l.y,t.appendChild(o),(0,r3.Vm)(o.guid,r.createElement(oZ,null))}),!o)throw Error("Failed to create target node");return o}async function o5(e){let t=(await e6.Ay.design.imageToJsx({input:{image:e}})).kiwi;if(!t)throw Error("Cannot get design from server");return t}var o3=n(601902),o4=n(880173),o6=n(406385),o8=n(41398);let o7=[{callback:Z.lQ,action:m.JT.TRANSLATE_TEXT,flags:o9(["edit","design"]),featureFlags:["qa_v2","qa_text_features"],tags:[eI.$.AI],quickAction:{beforeModuleOpen:()=>{(0,ac.B3)(m.JT.TRANSLATE_TEXT)},alwaysEnabled:!0,module:{name:em.Sn.TRANSLATE,module:r.createElement(function(){let e=[{name:"Arabic",label:(0,en.t)("ai_text_tools.translate.language.arabic")},{name:"Chinese (Simplified)",label:(0,en.t)("ai_text_tools.translate.language.chinese_simplified")},{name:"Chinese (Traditional)",label:(0,en.t)("ai_text_tools.translate.language.chinese_traditional")},{name:"Dutch",label:(0,en.t)("ai_text_tools.translate.language.dutch")},{name:"English (United Kingdom)",label:(0,en.t)("ai_text_tools.translate.language.english_uk")},{name:"English (United States)",label:(0,en.t)("ai_text_tools.translate.language.english_us")},{name:"Tagalog",label:(0,en.t)("ai_text_tools.translate.language.tagalog")},{name:"French",label:(0,en.t)("ai_text_tools.translate.language.french")},{name:"German",label:(0,en.t)("ai_text_tools.translate.language.german")},{name:"Hindi",label:(0,en.t)("ai_text_tools.translate.language.hindi")},{name:"Indonesian",label:(0,en.t)("ai_text_tools.translate.language.indonesian")},{name:"Italian",label:(0,en.t)("ai_text_tools.translate.language.italian")},{name:"Japanese",label:(0,en.t)("ai_text_tools.translate.language.japanese")},{name:"Korean",label:(0,en.t)("ai_text_tools.translate.language.korean")},{name:"Malay",label:(0,en.t)("ai_text_tools.translate.language.malay")},{name:"Polish",label:(0,en.t)("ai_text_tools.translate.language.polish")},{name:"Portuguese (Brazil)",label:(0,en.t)("ai_text_tools.translate.language.portuguese_brazil")},{name:"Portuguese (Portugal)",label:(0,en.t)("ai_text_tools.translate.language.portuguese_portugal")},{name:"Russian",label:(0,en.t)("ai_text_tools.translate.language.russian")},{name:"Spanish (Latin America)",label:(0,en.t)("ai_text_tools.translate.language.spanish_latin_america")},{name:"Spanish (Spain)",label:(0,en.t)("ai_text_tools.translate.language.spanish_spain")},{name:"Swedish",label:(0,en.t)("ai_text_tools.translate.language.swedish")},{name:"Tamil",label:(0,en.t)("ai_text_tools.translate.language.tamil")},{name:"Thai",label:(0,en.t)("ai_text_tools.translate.language.thai")},{name:"Turkish",label:(0,en.t)("ai_text_tools.translate.language.turkish")},{name:"Ukrainian",label:(0,en.t)("ai_text_tools.translate.language.ukrainian")},{name:"Urdu",label:(0,en.t)("ai_text_tools.translate.language.urdu")},{name:"Vietnamese",label:(0,en.t)("ai_text_tools.translate.language.vietnamese")}],t=(0,en.t)("ai_text_tools.translate.running"),n=r.useRef(null),{onRun:a,resetText:l,cancel:o,longRunningAction:s,lastRun:c}=(0,aC.Hd)({makeCortexRequest:({texts:e,parameters:t,authInfo:n})=>e6.Ay.shared.adjustText({texts:e,action:{type:"TRANSLATE",language:t.language},jsonMode:e.length>1},n),featureType:m.JT.TRANSLATE_TEXT}),{state:d,aiTrackingContext:u,tasks:p}=s,{close:_}=(0,A.cq)(),g=(0,i.d4)(e=>(0,eH.Yh)(e.mirror.appModel,m.JT.TRANSLATE_TEXT)),[f,h]=r.useState(g),E=p.length,y=p.filter(e=>e.state===ac.z8.FAILED).length;switch(d){case ac.qy.RUNNING:return r.createElement(av.F,{onCancel:()=>{o(),_()},aiTrackingContext:u},t);case ac.qy.INITIAL:if(!f||!g)return r.createElement(ay.A,{action:m.JT.TRANSLATE_TEXT,actionLabel:(0,en.tx)("fullscreen_actions.quick_actions.translate-text"),actionIcon:r.createElement(nI,null),onPerform:()=>h(!0),getCustomDisabledTextFromSelectedNodes:e=>(0,aC.bu)(e,{}),aiTrackingContext:u,instructionAction:{type:"learn_more",url:m.Xi}},(0,en.tx)("ai_text_tools.selection_instruction"));return r.createElement(aT,{items:e,onSelectItem:e=>{let t={language:e.name};a(t),n.current=t},placeholder:(0,en.t)("ai_text_tools.translate.language")});case ac.qy.ERROR:let b;let{error:v}=s,C=null,w=[{type:aE.f.TRY_AGAIN,callback:()=>{if(n.current)a(n.current);else throw new aC.ay("Last parameters is null")}}];return v instanceof aC.Vz&&(b=(0,en.tx)("ai_text_tools.content_length_exceeded"),w=[]),v instanceof aC.Jd&&(b=(0,en.tx)("ai_text_tools.missing_fonts"),w=[]),E>0&&y>0&&y<E&&(C=(0,en.tx)("ai_text_tools.translate.couldnt_count",{failed:y,total:E})),(0,af.sZ)(v)===af.BQ.CONTENT_LENGTH_LIMIT&&(b=(0,en.tx)("ai_text_tools.content_length_exceeded")),r.createElement(aE.E,{buttons:w,error:s.error,aiTrackingContext:u,customMessage:b,secondaryMessage:C});case ac.qy.DONE:return r.createElement(ab.O,{iterateOptions:[{type:ab.i.UNDO,callback:()=>{l(),_()}}],recordingKey:"translateText",aiTrackingContext:{...u,iteration_view_type:ah.$J.DEFAULT_SUCCESS},targets:c?c.targets.map(e=>e.node.guid):[]});case ac.qy.CANCELLED:return null;default:(0,Y.assertNever)(d)}},null)}},iconType:r.createElement(nI,null),searchSynonyms:["change language"]},{callback:Z.lQ,action:m.JT.REWRITE_TEXT,flags:o9(["edit","design"]),featureFlags:["qa_v2","qa_text_features"],quickAction:{beforeModuleOpen:()=>{(0,ac.B3)(m.JT.REWRITE_TEXT)},module:{name:em.Sn.REWRITE,module:r.createElement(ag.w,null)},alwaysEnabled:!0},iconType:r.createElement(nA.T,null),tags:[eI.$.AI],searchSynonyms:["revise this","modify this","adjust tone"]},{callback:()=>{(0,ac.B3)(m.JT.SLIDES_GENERATE_SPEAKER_NOTES),(0,ac.Ag)(m.JT.SLIDES_GENERATE_SPEAKER_NOTES,am.O,{source:ap.f.QUICK_ACTIONS})},action:m.JT.SLIDES_GENERATE_SPEAKER_NOTES,flags:o9(),featureFlags:["qa_v2","figjam_ai_piper_speaker_notes"],iconType:r.createElement(nO.B,null),tags:[eI.$.AI],searchSynonyms:["presenter notes","speaker notes","notes","draft presenter notes","draft speaker notes","draft notes"]},{callback:()=>(0,au.mD)(ed.D.dispatch,{source:"quick_actions",toggle:!0}),action:m.JT.SLIDES_REWRITE_TEXT,flags:o9(),featureFlags:["qa_v2","figjam_ai_piper_text_manipulation","slides_10_launch_tone_dial_update"],iconType:r.createElement(nL.s,null),tags:[eI.$.AI],searchSynonyms:["adjust tone","tone dial","professional","casual","concise","expanded"]},{callback:()=>(0,au.mD)(ed.D.dispatch,{source:"quick_actions",toggle:!0}),action:m.JT.SLIDES_REWRITE_TEXT,flags:["edit","design"],featureFlags:["qa_v2","figjam_ai_piper_text_manipulation","slides_10_launch_tone_dial_update","aip_tone_dial_fd"],iconType:r.createElement(nL.s,null),tags:[eI.$.AI],searchSynonyms:["adjust tone","tone dial","professional","casual","concise","expanded"]},{callback:Z.lQ,action:m.JT.SHORTEN_TEXT,flags:o9(["edit","design"]),featureFlags:["qa_v2","qa_text_features"],quickAction:{module:{name:em.Sn.SHORTEN,module:r.createElement(function(){let[e,t]=r.useState(!1),{longRunningAction:n,lastParameters:a,onRun:l,cancel:o,lastRun:s}=(0,aC.Hd)({makeCortexRequest:({texts:e,authInfo:t})=>e6.Ay.shared.adjustText({texts:e,action:{type:"SHORTEN"},jsonMode:e.length>1},t),featureType:m.JT.SHORTEN_TEXT}),{state:c,aiTrackingContext:d,tasks:u}=n,p=(0,i.d4)(e=>(0,eH.Yh)(e.mirror.appModel,m.JT.SHORTEN_TEXT)),[_]=r.useState(p);(0,r.useEffect)(()=>{!e&&_&&(t(!0),l(null))},[e,l,p,_]);let g=u.length,f=u.filter(e=>e.state===ac.z8.FAILED).length;switch(c){case ac.qy.INITIAL:return r.createElement(ay.A,{action:m.JT.SHORTEN_TEXT,actionIcon:r.createElement(nD,null),actionLabel:(0,en.tx)("fullscreen_actions.quick_actions.shorten-text"),onPerform:()=>{t(!0),l(null)},aiTrackingContext:d,getCustomDisabledTextFromSelectedNodes:e=>(0,aC.bu)(e,{onlyAllowSingular:!0,instruction:(0,en.tx)("ai_text_tools.select_text_singular")}),instructionAction:{type:"learn_more",url:m.sH}},(0,en.tx)("ai_text_tools.select_text_singular"));case ac.qy.RUNNING:return r.createElement(av.F,{onCancel:()=>{o(),close()},aiTrackingContext:d},(0,en.tx)("ai_text_tools.shorten.running"));case ac.qy.ERROR:let h;let{error:E}=n,y=[{type:aE.f.TRY_AGAIN,callback:()=>l(a)}],b=null;return E instanceof aC.Vz&&(h=(0,en.tx)("ai_text_tools.content_length_exceeded"),y=[]),E instanceof aC.Jd&&(h=(0,en.tx)("ai_text_tools.missing_fonts"),y=[]),g>0&&f>0&&f<g&&(b=(0,en.tx)("ai_text_tools.shorten.couldnt_count",{failed:f,total:g})),(0,af.sZ)(E)===af.BQ.CONTENT_LENGTH_LIMIT&&(h=(0,en.tx)("ai_text_tools.content_length_exceeded")),r.createElement(aE.E,{buttons:y,error:n.error,aiTrackingContext:d,customMessage:h,secondaryMessage:b});case ac.qy.DONE:return r.createElement(ab.O,{recordingKey:"shortenText",iterateOptions:[{type:ab.i.TRY_AGAIN,callback:()=>{l(a)}}],aiTrackingContext:{...d,iteration_view_type:ah.$J.SUCCESS_WITH_ITERATION},targets:s?s.targets.map(e=>e.node.guid):void 0});case ac.qy.CANCELLED:return null;default:(0,Y.assertNever)(c)}},null)},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ac.B3)(m.JT.SHORTEN_TEXT)}},iconType:r.createElement(nD,null),tags:[eI.$.AI],searchSynonyms:["make concise","condense","reduce","abbreviate","shorter"]},{callback:Z.lQ,action:m.JT.FIRST_DRAFT,flags:["edit","design"],featureFlags:["qa_v2"],quickAction:{module:{module:r.createElement(oz,null),name:em.Sn.FIRST_DRAFT},beforeModuleOpen:()=>{(0,ac.B3)(m.JT.FIRST_DRAFT)}},iconType:r.createElement(nR,null),tags:[eI.$.AI],searchSynonyms:["first draft","make designs","generate design","create design","let's design"]},{callback:Z.lQ,action:m.JT.MAKE_EDITS,flags:["edit","design"],featureFlags:["first_draft_make_edits"],quickAction:{module:{module:r.createElement(function(){let e=(0,r.lazy)(()=>Promise.all([n.e(5352),n.e(2192),n.e(2928),n.e(8336)]).then(n.bind(n,348336))),t=(0,ei.tS)(),{aiTrackingContext:a}=(0,ac.wj)(m.JT.MAKE_EDITS),i=a.clientLifecycleId,o=r.useCallback(()=>{(0,as.sx)("Make Edits: Error",{file_key:t,clientLifecycleId:i,view:"firstDraftGenerate"},{forwardToDatadog:!0,sendAsBeacon:!0,mlEvent:!0})},[i,t]);return r.createElement(c.tH,{boundaryKey:"MakeEdits",fallback:c.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{clientLifecycleId:i,area:l.FigmaTeam.AI_GENERATION},onError:o},r.createElement(ad.T.Provider,{value:{recordingKey:"makeEditsView"}},r.createElement(r.Suspense,{fallback:r.createElement("div",null,(0,en.t)("first_draft.make_edits.loading"))},r.createElement(e,{recordingKey:"makeEditsView"}))))},null),name:em.Sn.MAKE_EDITS},beforeModuleOpen:()=>{(0,ac.B3)(m.JT.MAKE_EDITS)}},iconType:r.createElement(nR,null),tags:[eI.$.AI],searchSynonyms:["make edit","edit design"]},{callback:Z.lQ,action:m.JT.FIRST_DRAFT_MAKE_CHANGES,flags:["edit","design"],featureFlags:["qa_v2","first_draft_native","first_draft_make_changes","first_draft_make_changes_reopen"],notFeatureFlags:["first_draft_use_gemini"],quickAction:{module:{module:r.createElement(function(){let e=li(),[t]=r.useState(e);return r.createElement(on,{initialRootGuid:t||null})},null),name:em.Sn.FIRST_DRAFT_MAKE_CHANGES}},iconType:r.createElement(nR,null),tags:[eI.$.AI],searchSynonyms:["make changes","adjust design","modify design","edit design"]},{callback:Z.lQ,action:m.JT.FIRST_DRAFT_MAKE_KIT,flags:["edit","design"],featureFlags:["qa_v2","first_draft_native","first_draft_make_kit"],quickAction:{module:{module:r.createElement(function(){let{pop:e}=(0,A.cq)();return r.createElement(c.tH,{boundaryKey:"FirstDraftMakeKitView",fallback:c.H4.NONE_I_KNOW_WHAT_IM_DOING,sentryTags:{area:l.FigmaTeam.AI_GENERATION}},r.createElement(oE,{recordingKey:"firstDraftMakeKitView",onBack:e}))},null),name:em.Sn.FIRST_DRAFT_MAKE_KIT},beforeModuleOpen:()=>{(0,ac.B3)(m.JT.FIRST_DRAFT_MAKE_KIT),(0,ac.B3)(m.JT.FIRST_DRAFT_COMPONENTIZE),(0,ac.B3)(m.JT.FIRST_DRAFT_SUGGEST_PROPS)}},iconType:r.createElement(nR,null),tags:[eI.$.AI],searchSynonyms:["make kit","create kit","generate kit","design kit"]},{callback:Z.lQ,action:m.JT.FIRST_DRAFT_LINTING,flags:["edit","design"],featureFlags:["qa_v2","first_draft_native","first_draft_publish_ux"],quickAction:{module:{module:r.createElement(iZ.S6,null),name:em.Sn.FIRST_DRAFT_LINT}},tags:[eI.$.AI]},{callback:Z.lQ,action:m.JT.FIRST_DRAFT_DEBUG,flags:["edit","design"],featureFlags:["qa_v2","first_draft_native","first_draft_debug"],quickAction:{module:{module:r.createElement(function(){let{kitsAreLoaded:e,kitOptionDropdownItems:t,selectedKitOption:n,setSelectedKitOption:a}=iq(!0),i=r.useRef((0,ee.g)()).current,l=n?.type==="KIT";return r.createElement("div",{className:et.cx.p8.borderBox.$},r.createElement(iX,{selectedKitOption:n,clientLifecycleId:i}),r.createElement(iM,{selectedKitOption:n,clientLifecycleId:i}),r.createElement(iI,null),l&&r.createElement(iH,{selectedKit:n.kit}),r.createElement(ep.B,{fullWidth:!0,justify:"space-between"},r.createElement(iY,{items:t,kitsAreLoaded:e,selectedKitOption:n,setSelectedKitOption:a})))},null),name:em.Sn.FIRST_DRAFT_DEBUG}},tags:[eI.$.AI]},{name:m.JT.FIND_INSPIRATION,action:m.JT.FIND_INSPIRATION,args:{},tags:[eI.$.AI],flags:o9(["design"]),featureFlags:["qa_v2","asset_suggestions"],callback:Z.lQ,quickAction:{module:{module:r.createElement(oj.WS,null),name:em.Sn.VISUAL_SEARCH},beforeModuleOpen:()=>(0,oj.jp)(ea.G4.ACTIONS_LIST)},iconType:r.createElement(nM.T,null),searchSynonyms:["visual search","image search","selection search","visual lookup","find matching"]},{action:m.JT.REMOVE_BACKGROUND,featureFlags:["qa_v2","eai_image_tools"],tags:[eI.$.AI],flags:o9(["edit","design"]),iconType:r.createElement(nP.$,null),quickAction:{module:{module:r.createElement(o3.A,null),name:em.Sn.BACKGROUND_REMOVE_TOAST},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ac.B3)(m.JT.REMOVE_BACKGROUND),(0,eH.Yh)(ed.D.getState().mirror.appModel,m.JT.REMOVE_BACKGROUND)&&(0,ac.Ag)(m.JT.REMOVE_BACKGROUND,al.JY,{source:"quick-actions"})}},callback:Z.lQ,searchSynonyms:["clean up image","clean up picture","make transparent","delete background","erase background","eliminate background","isolate subject"]},{callback:Z.lQ,action:m.JT.AUTO_RENAME_LAYERS,featureFlags:["qa_v2","eai_auto_rename_layers"],tags:[eI.$.AI],flags:["edit","design"],iconType:r.createElement(nF._,null),quickAction:{module:{module:r.createElement(o8.A,{source:nV.uQ.QUICK_ACTIONS}),name:em.Sn.RENAME_LAYERS_TOAST},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ac.B3)(m.JT.AUTO_RENAME_LAYERS),(0,eH.Yh)(ed.D.getState().mirror.appModel,m.JT.AUTO_RENAME_LAYERS)&&(0,ac.Ag)(m.JT.AUTO_RENAME_LAYERS,nV.Ay,{source:nV.uQ.QUICK_ACTIONS,overwriteNames:!1})}},searchSynonyms:["rename all layers","name layers"]},{callback:Z.lQ,action:m.JT.GENERATE_IMAGE,featureFlags:["qa_v2","eai_generate_image"],tags:[eI.$.AI],flags:o9(["edit","design"]),iconType:r.createElement(nB.T,null),quickAction:{module:{module:r.createElement(o4.A,null),name:em.Sn.GENERATE_IMAGE},beforeModuleOpen:()=>{(0,ac.B3)(m.JT.GENERATE_IMAGE)}},searchSynonyms:["generate image","make a picture","generate graphic","generate picture","generate illustration","create image"]},{action:m.JT.MAGIC_LINK,flags:["edit","design"],featureFlags:["qa_v2","prototype_ai_magic_link"],tags:[eI.$.AI],quickAction:{module:{module:r.createElement(o6.p,null),name:em.Sn.MAGIC_LINK},alwaysEnabled:!0,beforeModuleOpen:()=>{ed.D.dispatch((0,nH.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"quick_actions"}})),(0,ac.B3)(m.JT.MAGIC_LINK),(0,eH.Yh)(ed.D.getState().mirror.appModel,m.JT.MAGIC_LINK)&&(0,ac.Ag)(m.JT.MAGIC_LINK,ao.e,{})}},iconType:r.createElement(nU.B,null),searchSynonyms:["magic link","add prototype links","add prototype connections","connect prototype","add interactions"]},{action:m.JT.CONTENT_FILL,featureFlags:["qa_v2","ce_auto_content"],tags:[eI.$.AI],flags:["edit","design"],iconType:r.createElement(nG.c,null),quickAction:{module:{module:r.createElement(a_.X,null),name:em.Sn.REGENERATE_TEXT_TOAST},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ac.B3)(m.JT.CONTENT_FILL),(0,eH.Yh)(ed.D.getState().mirror.appModel,m.JT.CONTENT_FILL)&&(0,ac.Ag)(m.JT.CONTENT_FILL,nK.c,{guids:[],numExampleRows:1,source:"ACTIONS_MENU"})}},searchSynonyms:["fill content","content fill","lorem ipsum","rewrite placeholder text","replace duplicates","rewrite duplicates"]},{action:m.JT.ASSISTANT_CHAT,featureFlags:["qa_v2","prt_legacy_v3"],flags:o9(["design"]),tags:[eI.$.AI],iconType:r.createElement(eJ.V,null),quickAction:{module:{module:r.createElement(t4,null),name:em.Sn.ASSISTANT_CHAT},beforeModuleOpen:()=>{s.zl.set(tf,{status:tg.Idle,messages:[]})}},searchSynonyms:["chat"]},{action:m.JT.IMAGE_TO_DESIGN,featureFlags:["qa_v2","gen_llava_lamp"],flags:["edit","design"],tags:[eI.$.AI],iconType:r.createElement(eJ.V,null),quickAction:{module:{module:r.createElement(function(){let{close:e}=(0,A.cq)(),t=(0,ac.RL)(m.JT.IMAGE_TO_DESIGN,o1),{state:n,start:a,stop:i,aiTrackingContext:l}=t,o=()=>{c(""),(0,ac.B3)(m.JT.IMAGE_TO_DESIGN)},s=r.useRef(null),c=(0,v.Xr)(oQ);switch(n){case ac.qy.INITIAL:return r.createElement(r.Fragment,null,r.createElement("input",{type:"file",ref:s,accept:oJ.xp.join(","),onChange:e=>{let t=e.target?.files;if(t&&t[0]){let e=t[0],n=new FileReader;n.onloadend=()=>{if(n.result){let e=n.result.toString(),t=new Image;t.onload=()=>{let n=t.width,r=t.height,i=e.split(";base64,").pop();c(i),a({image:i,width:n,height:r,dataUrl:e})},t.src=e}},n.readAsDataURL(e)}},multiple:!1,className:et.cx.hidden.$}),r.createElement(ay.A,{action:m.JT.IMAGE_TO_DESIGN,actionLabel:(0,en.tx)("image_to_design.action"),actionIcon:r.createElement(eJ.V,null),instructionAction:{type:"custom",label:(0,en.tx)("asset_suggestions.visual_search_image_upload_button"),iconPrefix:r.createElement(o$.s,null),onPerform:()=>s.current?.click()},aiTrackingContext:void 0,onPerform:()=>{let e=e4.q.instance.getCurrentPage()?.directlySelectedNodes;if(!e||1!==e.length||void 0===e[0])return;let t=e[0];a({node:t,width:t.size.x,height:t.size.y})}},(0,en.tx)("image_to_design.instruction")));case ac.qy.RUNNING:return r.createElement(av.F,{onCancel:()=>{i(),o(),e()},aiTrackingContext:l},(0,en.tx)("ai.working"));case ac.qy.DONE:return r.createElement(aN.u,null,(0,en.tx)("ai.done"));case ac.qy.ERROR:return r.createElement(aE.E,{error:t.error,buttons:[{type:aE.f.OK,callback:o}],aiTrackingContext:l});case ac.qy.CANCELLED:return null}},null),name:em.Sn.IMAGE_TO_DESIGN},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ac.B3)(m.JT.IMAGE_TO_DESIGN)}},searchSynonyms:["convert image to design","generate design from image","screenshot to design","picture to design"]},{callback:Z.lQ,action:m.JT.DETECT_VIOLATIONS,featureFlags:["qa_v2","aip_flower_garden"],tags:[eI.$.AI],flags:["edit","design"],iconType:r.createElement(nF._,null),quickAction:{module:{module:r.createElement(function(){let e=(0,ac.RL)(m.JT.DETECT_VIOLATIONS,ai),{state:t}=e;if([ac.qy.RUNNING,ac.qy.INITIAL].includes(t))return r.createElement(ak.y,null,(0,en.tx)("fullscreen_actions.quick_actions.detect-violations"));if(t===ac.qy.DONE){let{violations:t,error:n}=e.result;return n?(aA((0,en.t)("design_linter.penalty_box.detection_failed_bell"),ax.zX.EXCLAMATION,"error"),null):r.createElement(aN.u,null,r.createElement(aO,{detectedViolations:t}))}return null},null),name:em.Sn.DETECT_VIOLATIONS},alwaysEnabled:!0,beforeModuleOpen:()=>{(0,ac.B3)(m.JT.DETECT_VIOLATIONS),(0,eH.Yh)(ed.D.getState().mirror.appModel,m.JT.DETECT_VIOLATIONS)&&(0,ac.Ag)(m.JT.DETECT_VIOLATIONS,ai,{})}},searchSynonyms:["detect violations","detect","suggested actions","suggestions"]}];function o9(e=[]){return(0,X.kc)().piper_actions?[...e,"slides"]:e}function se(){let e=(0,no.PE)(),t=(0,no.LC)();return(0,r.useMemo)(()=>o7.filter(n=>{for(let e of n.featureFlags||[])if(!(0,X.kc)()[e])return!1;return n.action===m.JT.FIND_INSPIRATION?t:e}),[e,t])}var st=n(586281),sn=n(261607),sa=n(213690),sr=n(266173),si=n(342691);function sl(e){let{submenuItem:t,path:n}=e,{push:a,close:i}=(0,A.cq)();if(!t||!t.itemPath||t.submenu&&0===t.submenu.length)return null;let l=(0,eA.TW)(t);return r.createElement(aw.B.Item,{key:l,primaryAction:{onAction:()=>{if(t.submenu){a({name:em.Sn.PLUGIN_SUBMENU_ENTRY,module:r.createElement(so,{item:t,path:n.concat(l)})},{shouldResetSearchQuery:!0});return}let e=!t.itemParameterArgs;t.callback&&(t.callback(),e&&i())},shortcuts:[{key:J.Uz.ENTER},{key:J.Uz.TAB}]},actionLabel:!1},r.createElement("div",{className:et.cx.flex.justifyBetween.wFull.$},r.createElement("div",{className:et.cx.ml28.$},l),t.submenu&&r.createElement(si.a,null)))}function so(e){let[t,n]=r.useState(""),[a,i]=r.useState([]),{item:l,path:o}=e;if(r.useEffect(()=>{l.submenu&&(i(l.submenu),n(""))},[l]),!l.submenu)return null;let s=r.createElement(aw.B,{resultCount:a.length},a.map(e=>r.createElement(sl,{submenuItem:e,key:e.extensionSearchString||"",path:o}))),c=e=>{n(e),l.submenu&&i(l.submenu.filter(t=>(0,eA.TW)(t).toLowerCase().includes(e.toLowerCase())))},d=o.join(" > ");return r.createElement(e_.n,{height:m.wC},r.createElement(eg.v,{searchQuery:t,onSearchChange:c,onClear:()=>{c("")},placeholder:d}),r.createElement(e_.n.Body,null,s))}var ss=n(610043),sc=n(266468),sd=n(931828),su=n(963067),sm=n(309798),sp=n(139689);function s_({title:e,subTitle:t,icon:n,onClose:a,dataTestId:i}){return r.createElement("div",{"data-testid":i,className:et.cx.colorBgBrandTertiary.p8.bRadius8.$},r.createElement("div",{className:et.cx.flex.gap8.$},n,r.createElement("div",{className:et.cx.flex.flexColumn.flexGrow1.$},r.createElement("span",{className:"banner--title--gNQoq"},e),r.createElement("span",{className:"banner--subtitle--8K4pM"},t)),a?r.createElement(lE.K,{onClick:a,"aria-label":(0,en.t)("qa.dismiss"),htmlAttributes:{"data-testid":"banner-close-icon"}},r.createElement(sp.A,{style:{"--color-icon":"var(--color-icon-secondary)"}})):null))}function sg(){let e;let{reason:t,dismissKey:n}=function(){let e=(0,no.nu)().sort((e,t)=>sf(e)-sf(t)),t={seen_no_ai_org_disabled:(0,sm.f)("seen_no_ai_org_disabled"),seen_no_ai_team_or_org_user:(0,sm.f)("seen_no_ai_team_or_org_user"),seen_no_ai_rolling_out:(0,sm.f)("seen_no_ai_rolling_out")};return(0,r.useMemo)(()=>{for(let n of e){let e=function(e){switch(e){case no.ze.ROLLING_OUT:return"seen_no_ai_rolling_out";case no.ze.TEAM_OR_ORG_DISABLED:return"seen_no_ai_org_disabled";case no.ze.NON_PAID_SEAT:case no.ze.NO_ORG_OR_TEAM_USER:case no.ze.ORG_GUEST:return"seen_no_ai_team_or_org_user";case no.ze.PERSONAL_DRAFT:case null:return null;default:(0,Y.assertNever)(e)}}(n);if(!e)return{reason:n};if(!t[e])return{reason:n,dismissKey:e}}return{reason:null}},[e,t])}(),a=(0,i.wA)(),l=(0,su.yy)(),o=(0,s.md)(ei.Hu),c=(0,en.t)("qa.no_ai.title");switch(t){case no.ze.ROLLING_OUT:case null:return null;case no.ze.PERSONAL_DRAFT:c=(0,en.t)("qa.no_ai.title.personal_draft"),e=(0,en.t)("qa.no_ai.subtitle.personal_draft");break;case no.ze.TEAM_OR_ORG_DISABLED:c=(0,en.t)("qa.no_ai.title.org_disabled"),e=(0,en.t)("qa.no_ai.subtitle.org_disabled");break;case no.ze.NON_PAID_SEAT:case no.ze.NO_ORG_OR_TEAM_USER:case no.ze.ORG_GUEST:c=(0,en.t)("qa.no_ai.title.not_available_here"),e=(0,en.t)("qa.no_ai.subtitle.team_or_org_user_no_access",{orgOrTeamName:l?.name||o?.name||""});break;default:(0,Y.assertNever)(t)}return r.createElement("div",{className:et.cx.mx8.mb8.$},r.createElement(s_,{title:c,subTitle:e,icon:r.createElement(tV.C,null),dataTestId:"no-ai-banner",onClose:n?()=>a(sd.b({[n]:!0})):void 0}))}function sf(e){switch(e){case no.ze.ROLLING_OUT:return 0;case no.ze.PERSONAL_DRAFT:return 1;case no.ze.NON_PAID_SEAT:case no.ze.NO_ORG_OR_TEAM_USER:case no.ze.ORG_GUEST:return 2;case no.ze.TEAM_OR_ORG_DISABLED:return 3;case null:return 1e3;default:(0,Y.assertNever)(e)}}var sh=n(185997),sE=n(307292),sy=n(752207),sb=n(545941),sv=n(964197),sC=n(641638);function sw(e){let{extension:t,publishedExtension:n,canRequest:a,canRun:r}=e,i=(0,eM.sZ)(),l=(0,sC.RW)(),o=(0,sv.a)(i?.id,t.plugin_id,l.loaded?l.data?.workspaceId:void 0);if((0,eG.bH)(t)&&i&&i.name)return{text:i.name};if((0,eG.ZQ)(t)&&n&&(0,sb.AC)(n))return{text:(0,en.t)("qa.extensions.in_review"),variant:ss.x.BRAND};if((0,eG.ZQ)(t))return{text:(0,en.t)("qa.extensions.development")};if(r);else if(o)return{text:(0,en.t)("qa.extensions.approval_pending")};else if(a)return{text:(0,en.t)("qa.extensions.needs_approval")};return null}function sT({text:e,variant:t}){return r.createElement(ss.E,{variant:t},r.createElement(sy.G,{text:e}))}function sS(e){let{searchQuery:t,fullscreenMenuAction:n}=e,a="";if(n.searchSynonyms&&(a+=`Synonyms: ${n.searchSynonyms.join(", ")}`),!(0,ec.h8)())return null;let{details:i,score:l}=(0,ny.ou)((0,ez.x0)()).debugData(t,(0,nb._)(n).searchItem),o=`Score:${l.toFixed(2)}`;return r.createElement("div",{className:et.cx.ml8.colorTextSecondary.noWrap.$,"data-tooltip":[i,a].filter(Boolean).join("\n"),"data-tooltip-type":eK.Ib.TEXT,"data-tooltip-max-width":300,"data-testid":"search-debug-info"},o)}var sx=n(816679),sk=n(575126),sN=n(111431);let sI=e=>(0,eN.Zj)(e)&&!e.hideCheckForQuickCommand,sA=()=>{};function sO({item:e,searchQuery:t,createCommonMetrics:n}){let{push:a}=(0,A.cq)(),{addFrecencyUsage:o}=(0,ez.fJ)(),s=(0,eN.Dz)(e),c=(0,i.d4)(e=>e.mirror.appModel),d=(0,i.wA)(),{close:u}=(0,A.cq)(),p=(0,eP.J2)((0,eD.UK)().showQuickCommandRankDebug),_=(0,eR.p8)("keyboardShortcuts"),g=(0,r.useCallback)(()=>{u()},[u]),h=(0,eC.A)(g,300);(0,r.useEffect)(()=>()=>{h.cancel()},[h]);let E=(0,sE.r7)(),y=r.useRef(!1),b=(0,r.useCallback)(a=>{let r=a?(0,sh.OZ)(a):"",i={...n(),shortcutText:r};(0,e$.kp)(i),E(e),o(e,t)},[o,E,n,e,t]),v=(0,r.useCallback)((e,n)=>{if(y.current)return;y.current=!0;let i=n?.key===J.Uz.TAB?"tab":"enter";if(h.isPending()&&h.cancel(),e.disabled)return;let o=!!e.itemParameterArgs,s=(0,eO.YT)(e);if(!(o||s||"enter"===i))return;let c=null;if(e.quickAction){let t={};if(("find-assets-matching"===e.name||"find-community-matching"===e.name)&&(t.shouldResetSearchQuery=!1),e.quickAction.beforeModuleOpen){let t=(0,f._V)();e.quickAction.beforeModuleOpen(t)}a(e.quickAction.module,t),b(n);return}if(o)switch(i){case"enter":if(e.runPluginArgs&&!t)c=async()=>{await eB.R.instance.enqueue({mode:"run-forever",runPluginArgs:e.runPluginArgs})};else if(e.parametersRequired){let t=e.itemParameterArgs;a({name:em.Sn.PLUGIN_PARAMETER_ENTRY,module:r.createElement(sr.r,{onExitParameterEntry:Z.lQ,triggeredFrom:"quick-actions",parameters:t.parameters,displayName:t.displayName,parameterOnly:t.parameterOnly,pluginId:t.pluginId,pluginLocalFileId:t.pluginLocalFileId,command:t.command,initialParameterValues:e.runPluginArgs?.parameterValues,recentlyUsedCommandName:(0,ej.EG)(e)})}),b(n);return}break;case"tab":if(e.itemParameterArgs){let t=e.itemParameterArgs;a({name:em.Sn.PLUGIN_PARAMETER_ENTRY,module:r.createElement(sr.r,{onExitParameterEntry:Z.lQ,triggeredFrom:"quick-actions",parameters:t.parameters,displayName:t.displayName,parameterOnly:t.parameterOnly,pluginId:t.pluginId,pluginLocalFileId:t.pluginLocalFileId,command:t.command,initialParameterValues:e.runPluginArgs?.parameterValues,recentlyUsedCommandName:(0,ej.EG)(e)})}),b(n);return}break;default:(0,Y.assertNever)(i)}if(s){a({name:em.Sn.PLUGIN_SUBMENU_ENTRY,module:r.createElement(so,{item:e,path:[(0,eA.TW)(e)]})}),b(n);return}e.callback&&!c?c=async()=>{e.callback&&await e.callback((0,eN.Dz)(e),e.args,d)}:e.action&&(c=async()=>{if(!e.action)return;let t=sA();if(t)return await t();eL.VU.get(e.action,"quick-actions",e.args)()}),b(n),sI(e)&&!(0,eT.PN)()?h():e.keepMenuOpen||g(),c?c().catch(t=>{(0,ew.$D)(l.FigmaTeam.AI_FOR_PRODUCTION,t,{extra:{item:e}})}):(0,ew.$D)(l.FigmaTeam.AI_FOR_PRODUCTION,Error("No valid action triggered from quick actions"),{extra:{item:e}})},[y,g,h,d,a,t,b]),C=e.shortcutText||(0,eH.c1)(_,s),w="plugins-menu-item"===e.name&&!!e.itemParameterArgs&&e.itemParameterArgs.parameters.length>0,T=(0,eO.YT)(e),k=(0,S.cW)(),N=(0,S.ZT)(),I=(()=>{if(e.itemParameterArgs&&e.runPluginArgs&&!t)return r.createElement(eW._,{runPluginArgs:e.runPluginArgs,itemParameterArgs:e.itemParameterArgs});if(e.itemPath){let t=e.itemPath;return r.createElement(eW.h,{itemPath:t})}return e.displayNode?r.createElement(r.Fragment,null,e.displayNode):r.createElement(r.Fragment,null,(0,ej.EG)(e))})(),O=sI(e)?(0,eN.WJ)(c,e):void 0,L=(0,x.h)("plugin"),D=(0,x.h)("widget"),R=(0,eM.sZ)(),M="go-to-page"===e.name?`go-to-page-${e.args?.pageName}`:e.name||e.action;return r.createElement(aw.B.Item,{primaryAction:{text:"Perform",shortcuts:[{key:J.Uz.ENTER},{key:J.Uz.TAB}],onAction:({shortcut:t})=>v(e,t)},actionLabel:!1,recordingKey:M,scrollMargin:"32px 0 16px 0"},r.createElement(sc._,{checked:O,disabled:e.disabled,displayNode:I,label:(0,ej.EG)(e),icon:function(e){if("plugins-menu-item"===e.name){let t;return(e.pluginId&&(t=(0,eF.DM)({idToSearch:e.pluginId,localExtensionsByFileId:void 0,publishedExtensions:{...k,...N}})),t&&!(0,eG.ZQ)(t))?r.createElement(eV.V,{className:et.cx.colorIcon.w20.h20.m2.bRadius4.$,plugin:t,role:"presentation"}):r.createElement(ex.B,{className:et.cx.colorIcon.w20.h20.bRadius4.$,svg:sN.A,ariaLabel:`${e.name} icon`,autosize:!0})}if(e.iconType&&"string"==typeof e.iconType){var t;return"external_link"===(t=e.iconType)?r.createElement(ex.B,{svg:sk.A,className:et.cx.colorIcon.$}):"import"===t?r.createElement(eh.R,null):"plus"===t?r.createElement(eE.e,null):"widget"===t?r.createElement(eb,null):void 0}if(e.iconType&&"string"!=typeof e.iconType)return e.iconType}(e),badge:"run-local-plugin"===e.menuActionType||"insert-local-widget"===e.menuActionType?r.createElement("div",{style:ek.sx.add({maxWidth:"110px"}).$},r.createElement(sT,{text:(0,en.t)("fullscreen_actions.development")})):R&&(L.some(t=>t.plugin_id===e.pluginId)||D.some(t=>t.plugin_id===e.pluginId))?r.createElement("div",{style:ek.sx.add({maxWidth:"110px"}).$},r.createElement(sT,{text:R.name})):p?r.createElement(sS,{searchQuery:t,fullscreenMenuAction:e}):e.isRepairCommand&&(0,X.kc)().internal_only_debug_tools?r.createElement(ss.E,null,"REPAIR"):e.action===m.JT.FIRST_DRAFT&&e.disabled?r.createElement("div",{"data-tooltip":(0,en.t)("qa.unavailable"),"data-tooltip-type":eK.Ib.TEXT,style:{"--color-icon":"var(--color-icon-disabled)"}},r.createElement(ev.b,null)):void 0,hoverBadges:(()=>{if(e.tags?.includes(eI.$.AI))return[r.createElement(oO.W,{key:"ai"})]})(),keyboardShortcut:C?r.createElement(eS.S,{shortcut:C}):w||T?r.createElement(r.Fragment,null,r.createElement("div",{className:et.cx.colorBgTertiary.bRadius5.font11.h16.fontMedium.flex.itemsCenter.px4.mr8.$},(0,en.tx)("whiteboard.ai_modal.hint_tab")),r.createElement(ex.B,{svg:sx.A,className:et.cx.colorIcon.$})):void 0,dataTestId:M}))}function sL({setActiveTab:e}){let t=(0,D.Ev)(),n=(0,s.md)(k.Lk),a=(0,s.md)(k.dd),l=(0,i.d4)(eU.l),o=(0,s.md)(k.Rt),c=(0,r.useRef)(o),d=(0,s.md)(k.Q8),u=(0,r.useDeferredValue)(d);(0,r.useEffect)(()=>{c.current=o},[o]);let p=function(){let e=(0,nk.u)(),t=se(),n=function(){let e=(0,i.d4)(e=>e.mirror.appModel.isReadOnly),t=(0,sn.c)();return(0,r.useMemo)(()=>(0,st.M)({isReadOnly:e,extensionMenuProps:t,includeDisabled:!0,filters:{showUnpurchased:!1}}),[e,t])}(),a=function(){let e=(0,eR.p8)("pagesList"),t=(0,nN.bG)({pagesList:e,isComparingChanges:!1});return(0,r.useMemo)(()=>(0,X.kc)().qa_go_to_page?e.map(e=>({name:"go-to-page",args:{pageName:e.name},callback:()=>{t(e.nodeId)},iconType:r.createElement(nc,null),displayNode:r.createElement(r.Fragment,null,(0,en.tx)("fullscreen_actions.quick_actions.go-to-page",{pageName:r.createElement(e5.E,{color:"secondary"},e.name)}))})):[],[e,t])}();return(0,r.useMemo)(()=>[...e,...n,{name:"wand-menu",callback:Z.lQ,children:t},...a],[e,t,n,a])}(),_=eY(),g=nx(_,p),f=function(e,t,n,a){let l=(0,i.d4)(e=>e.recentlyUsedQuickCommands),o=(0,tD.W)(),c=(0,X.kc)().qa_recently_used_db_read?o:l,d=(0,eX.removeNullish)(c.map(n=>{let a=t.getItem(e,n.displayName);return a&&n.runPluginArgs&&(a.runPluginArgs=n.runPluginArgs),a})).slice(0,3),{items:u}=function(e,t,n){let a=(0,no.PE)(),l=(0,b.ZC)(a),o=function(e,t,n){let a=n_(),l=t.map(e),o=function(){let e=(0,ni.ks)(),t=ei.q5()?.canEdit,n=(0,no.PE)();return e?"DEV":!1===t?"DESIGN_VIEWER":t&&n?"DESIGN_EDITOR_AI":t&&!n?"DESIGN_EDITOR_NO_AI":"NONE"}(),s=function(e,t){let n=function(){let e=(0,i.d4)(e=>e.mirror?.appModel),t=n_(),{frecencyByAction:n,frecencyByQuery:a}=(0,ez.fJ)(),l=(0,nr.Tv)(),o=(0,nf.CP)();return(0,r.useCallback)((r,i)=>{if(i)return[];let s=r.map(e),c=[],d=(0,ny.ou)({actions:n}),u=l.filter(e=>{let t=e4.q.instance.get(e);return t?.isSlide()}).length>0;if(0===l.length||u)return c=[m.JT.MAGIC_LINK,m.JT.AUTO_RENAME_LAYERS,m.JT.FIRST_DRAFT,m.JT.MAKE_EDITS,m.JT.FIND_INSPIRATION,m.JT.CONTENT_FILL,m.JT.SLIDES_GENERATE_SPEAKER_NOTES,m.JT.SLIDES_REWRITE_TEXT,m.JT.REWRITE_TEXT,m.JT.SHORTEN_TEXT,m.JT.TRANSLATE_TEXT,m.JT.GENERATE_IMAGE,m.JT.REMOVE_BACKGROUND],o&&c.push(m.OZ),[...c].map(e=>t(s,e,!0)).filter(e=>!!e).sort((e,t)=>d.sort("",(0,nb._)(e).searchItem,(0,nb._)(t).searchItem));{let r,i;c.push(m.JT.CONTENT_FILL,m.JT.TRANSLATE_TEXT,m.JT.REWRITE_TEXT,m.JT.SHORTEN_TEXT,m.JT.SLIDES_GENERATE_SPEAKER_NOTES,m.JT.SLIDES_REWRITE_TEXT,m.JT.REMOVE_BACKGROUND,m.JT.FIRST_DRAFT_MAKE_CHANGES,m.JT.AUTO_RENAME_LAYERS,m.JT.MAGIC_LINK,m.JT.FIND_INSPIRATION,m.JT.GENERATE_IMAGE,m.JT.FIRST_DRAFT,m.JT.MAKE_EDITS),o&&c.push(m.OZ);let l=[...c].map(e=>t(s,e)).filter(e=>!!e),u=l.sort((e,t)=>d.sort("",(0,nb._)(e).searchItem,(0,nb._)(t).searchItem)),p=Object.values(s).filter(t=>(0,eH.Yh)(e,t.name||t.action||"")&&!l.includes(t)&&!t.searchOnly&&!(t.featureFlags&&t.featureFlags.includes("internal_only_debug_tools"))&&(0,nE.y)("",(0,nh.n)(t),{actions:n,queries:a})>0).sort((e,t)=>d.sort("",(0,nb._)(e).searchItem,(0,nb._)(t).searchItem));return p.length<4?(r=8-p.length,i=p.length):u.length<4?(r=u.length,i=8-u.length):(r=4,i=4),[...u.slice(0,r),...p.slice(0,i)]}},[e,t,n,a,l,o])}(),[a]=(0,r.useState)(()=>n(e,""));return a}(t,0),c=function(e,t){let n=!nS();return(0,r.useCallback)(()=>{if(n){let e=[];for(let n of t){if(!n.action||n.disabled)continue;let t=nv.get(n.action);t&&e.push([n.action,t])}return e}let a=[];for(let n of((0,eH.Yh)(e,m.JT.FIRST_DRAFT_MAKE_CHANGES)&&a.push([m.JT.FIRST_DRAFT_MAKE_CHANGES,ns.b.SUGGESTIONS]),t))n.action&&!n.disabled&&a.push([n.action,ns.b.SUGGESTIONS]);return a},[e,t,n])}(e,s),d=function(){let e=(0,nl.O1)(),t=(0,eR.p8)("activeCanvasEditModeType"),n=(0,nf.CP)();return(0,r.useCallback)(()=>{if(!e?.length){let e=[["canvas-search-replace",ns.b.SUGGESTIONS],["select-all",ns.b.SUGGESTIONS],["undo",ns.b.SUGGESTIONS],["toggle-rulers",ns.b.COMMON_SETTINGS],["toggle-snapping-to-pixels",ns.b.COMMON_SETTINGS],["toggle-sidebar",ns.b.COMMON_SETTINGS],["toggle-ui",ns.b.COMMON_SETTINGS],["toggle-multiplayer-cursors",ns.b.COMMON_SETTINGS],["show-nudge-amount-picker",ns.b.COMMON_SETTINGS],["open-shortcuts",ns.b.COMMON_SETTINGS],["open-account-settings",ns.b.COMMON_SETTINGS]];return n&&e.push(["copy-to-figma-slides",ns.b.SUGGESTIONS]),e}if(1===e.length){let a=e[0],r=[["add-selection-ready-status",ns.b.SUGGESTIONS],["republish-selected-components",ns.b.SUGGESTIONS],["publish-changes-to-library",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS]],i=[["select-matching",ns.b.SUGGESTIONS],["outline-stroke",ns.b.SUGGESTIONS],["mask-selection",ns.b.SUGGESTIONS],["flatten-selection",ns.b.SUGGESTIONS],["unlock-all",ns.b.SUGGESTIONS],["convert-to-raster",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS]];if(t===h.m1T.VECTOR)return[["flip-horizontal",ns.b.SUGGESTIONS],["flip-vertical",ns.b.SUGGESTIONS],["align-horizontal-center",ns.b.SUGGESTIONS],["align-vertical-center",ns.b.SUGGESTIONS]];switch(a.type){case"SYMBOL":return r;case"FRAME":if(a.isStateGroup)return r;if(a.isGroup)return i;let l=[["add-selection-ready-status",ns.b.SUGGESTIONS],["select-matching",ns.b.SUGGESTIONS],["stack-selection",ns.b.SUGGESTIONS],["run-multi-stack-auto-layout",ns.b.SUGGESTIONS],["copy-properties",ns.b.SUGGESTIONS],["unlock-all",ns.b.SUGGESTIONS],["convert-to-raster",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS],["replace-selected-frame-with-section",ns.b.SUGGESTIONS]];return n&&l.push(["copy-to-figma-slides",ns.b.SUGGESTIONS]),l;case"INSTANCE":return[["select-matching",ns.b.SUGGESTIONS],["detach-instance",ns.b.SUGGESTIONS],["reset-symbol",ns.b.SUGGESTIONS],["convert-to-raster",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS]];case"SLICE":return[["export-selected-exportables",ns.b.SUGGESTIONS],["convert-to-raster",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS]];case"WIDGET":return[["select-all-widgets",ns.b.SUGGESTIONS],["convert-to-raster",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS]];case"SECTION":return[["add-selection-ready-status",ns.b.SUGGESTIONS],["select-matching",ns.b.SUGGESTIONS],["unlock-all",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS],["replace-selected-section-with-frame",ns.b.SUGGESTIONS]];case"GROUP":return i;case"ELLIPSE":case"BOOLEAN_OPERATION":case"LINE":case"REGULAR_POLYGON":case"RECTANGLE":case"ROUNDED_RECTANGLE":case"STAR":case"VECTOR":return[["select-matching",ns.b.SUGGESTIONS],["flip-horizontal",ns.b.SUGGESTIONS],["mask-selection",ns.b.SUGGESTIONS],["flatten-selection",ns.b.SUGGESTIONS],["copy-properties",ns.b.SUGGESTIONS],["convert-to-raster",ns.b.SUGGESTIONS],["toggle-shown-for-selected-nodes",ns.b.SUGGESTIONS]];case"TEXT":return[["text-edit-hyperlink",ns.b.SUGGESTIONS],["text-toggle-strikethrough",ns.b.SUGGESTIONS],["copy-properties",ns.b.SUGGESTIONS],["paste-properties",ns.b.SUGGESTIONS],["text-font-size-increase",ns.b.SUGGESTIONS],["text-font-size-decrease",ns.b.SUGGESTIONS],["text-bold-increase",ns.b.SUGGESTIONS],["text-bold-decrease",ns.b.SUGGESTIONS]]}}let a=[["select-matching",ns.b.SUGGESTIONS],["frame-selection",ns.b.SUGGESTIONS],["create-symbol",ns.b.SUGGESTIONS],["create-multiple-symbols",ns.b.SUGGESTIONS],["toggle-locked-for-selected-nodes",ns.b.SUGGESTIONS],["export-selected-exportables",ns.b.SUGGESTIONS],["align-horizontal-center",ns.b.SUGGESTIONS],["align-vertical-center",ns.b.SUGGESTIONS]];return n&&a.push(["copy-to-figma-slides",ns.b.SUGGESTIONS]),a},[e,n,t])}(),u=(0,r.useCallback)((e,t)=>{let n=a(l,e,!0);if(n)return{...n,category:t}},[a,l]),p=n.map(e=>({...e,category:ns.b.RECENTS})).filter(t=>void 0===t.action||(0,eH.Yh)(e,t.action)),_=(0,r.useCallback)(e=>{let t=e.map(([e,t])=>u(e,t));return e2()((0,eX.removeNullish)([...p,...t]),ej.EG)},[p,u]),g=nS(),f=(0,r.useMemo)(()=>{if(g&&!["DESIGN_EDITOR_NO_AI","DESIGN_EDITOR_AI","DEV"].includes(o)){var e;let t=(e=ns.b.SUGGESTIONS,s.map(t=>({...t,category:e})));return e2()((0,eX.removeNullish)([...p,...t]),ej.EG)}switch(o){case"DESIGN_EDITOR_AI":return _(c());case"DEV":return _(nC);case"DESIGN_VIEWER":return _(nw);case"DESIGN_EDITOR_NO_AI":return _(d());case"NONE":return[];default:(0,Y.assertNever)(o)}},[g,o,s,p,_,c,d]);return{suggestionMode:o,items:f}}(e,t,n),[s,c]=(0,r.useState)(o);return(0,r.useEffect)(()=>{(a!==l||0===s.items.length&&o.items.length>0||o.suggestionMode!==s.suggestionMode)&&c(o)},[a,l,s.items.length,s.suggestionMode,o]),s}(e,t,d),p=""!==n,_=(0,r.useMemo)(()=>""===n?[]:t.search(e,n).slice(0,25),[e,t,n]),g=function(e,t){let n=(0,e3.my)()===to.nT.Design,a=(0,ei.q5)(),l=(0,na.V)(),o=(0,tP.s)(),c=!!(0,X.kc)().prt_legacy_v3,[d,u]=(0,s.fp)(tf),m=(0,i.d4)(el.GP);return(0,r.useMemo)(()=>""!==e?[{name:"assistant-chat-query",args:{searchQuery:e},callback:()=>{},displayNode:(0,en.tx)("fullscreen_actions.assistant-chat-query",{query:r.createElement(e5.E,{color:"secondary"},e)}),iconType:r.createElement(eJ.V,null),quickAction:{module:{module:r.createElement(t4,null),name:em.Sn.ASSISTANT_CHAT},beforeModuleOpen:e=>{s.zl.set(tf,{status:tg.Idle,messages:[]}),tL(e.searchQuery,d.messages,u,tI)}},disabled:!c},{name:"find-community-matching",args:{searchQuery:e},callback:()=>{},displayNode:(0,en.tx)("fullscreen_actions.quick_actions.find-community-matching",{searchQuery:r.createElement(e5.E,{color:"secondary"},e)}),iconType:r.createElement(eZ.N,null),quickAction:{module:{module:r.createElement(tM.B$,{initialTab:tR.x.COMMUNITY}),name:em.Sn.ASSETS_TAB_DETAIL_VIEW},beforeModuleOpen:()=>{a?.key&&(0,ea.Hl)({type:"input-text",value:e,file_key:a.key},ea.G4.ACTIONS_LIST,void 0,void 0,void 0,!0)}},disabled:!(0,ec.Xk)()},{name:"find-assets-matching",args:{searchQuery:e},callback:()=>{},displayNode:l||(0,ec.Xk)()?(0,en.tx)("fullscreen_actions.quick_actions.find-components-matching",{searchQuery:r.createElement(e5.E,{color:"secondary"},e)}):(0,en.tx)("fullscreen_actions.quick_actions.find-assets-matching",{searchQuery:r.createElement(e5.E,{color:"secondary"},e)}),iconType:r.createElement(eQ.K,null),quickAction:{module:{module:r.createElement(tM.B$,null),name:em.Sn.ASSETS_TAB_DETAIL_VIEW},beforeModuleOpen:e=>{(0,eu.ES)({type:"input-text",query:e.searchQuery,assetTypeOption:{type:eo.I.ALL},isKnownLibrary:o})}},disabled:!n||!a?.canEdit},{name:"find-extensions-matching",args:{searchQuery:e},displayNode:(0,en.tx)("fullscreen_actions.quick_actions.find-extensions-matching",{searchQuery:r.createElement(e5.E,{color:"secondary"},e)}),iconType:r.createElement(e0,null),callback:()=>{t.setActiveTab(em.Jc.EXTENSIONS)},keepMenuOpen:!0,disabled:!n||!m}].filter(e=>!e.disabled):[],[e,l,n,a?.canEdit,a?.key,o,t,c,d,u,m])}(n,a);return p?e2()([..._,...g],ej.EG):u}(_,g,u,{setActiveTab:e}),E=(0,sa.X)(f),y=f.length,v=function(e){let t=np()(nu()(e,e=>e.category),(e,t)=>({category:Object.values(ns.b).find(e=>t===e)||null,items:e})).sort((e,t)=>ng(e.category)-ng(t.category)),n=[],a=0;for(let{category:e,items:r}of t)n.push({category:e,items:r,globalIdxOfFirstItem:a}),a+=r.length;return n}(f);(0,r.useEffect)(()=>{n===em.Jc.ALL&&a&&t({quickActionsSessionId:a,quickActionsQueryId:c.current,searchQuery:u,numSearchResults:y,currentSelection:l,module:n,moduleFilters:null,qaVersion:O.$L,searchQueryResults:E})},[t,n,a,u,y,l,E]);let{createMetrics:C}=(0,e$.Sk)();return r.createElement(r.Fragment,null,r.createElement(aw.B,{primary:!0,resultCount:y},r.createElement(sg,null),v.map(({category:e,items:t,globalIdxOfFirstItem:n})=>null!==e&&t.length>0&&v.length>1?r.createElement(aw.B.Section,{key:e,header:function(e){switch(e){case ns.b.RECENTS:return(0,en.t)("qa.category.recents");case ns.b.DESIGN_TOOLS:return(0,en.t)("qa.category.design_tools");case ns.b.RIFFING_AND_WRITING:return(0,en.t)("qa.category.riffing_and_writing");case ns.b.IMAGE_EDITING:return(0,en.t)("qa.category.image_editing");case ns.b.COLLABORATION_TOOLS:return(0,en.t)("qa.category.collaboration_tools");case ns.b.HANDOFF_TOOLS:return(0,en.t)("qa.category.handoff_tools");case ns.b.VIEWER_TOOLS:return(0,en.t)("qa.category.viewer_tools");case ns.b.SUGGESTIONS:return(0,en.t)("qa.category.suggestions");case ns.b.COMMON_SETTINGS:return(0,en.t)("qa.category.common_settings");default:return(0,Y.assertNever)(e)}}(e)},t.map((e,t)=>r.createElement(sO,{key:(0,ej.EG)(e),item:e,searchQuery:u,createCommonMetrics:()=>({numSearchResults:y,qaVersion:O.$L,searchQuery:u,searchPosition:n+t,item:e,moduleFilters:null,...C()})}))):t.map((e,t)=>r.createElement(sO,{key:(0,ej.EG)(e),item:e,searchQuery:u,createCommonMetrics:()=>({numSearchResults:y,qaVersion:O.$L,searchQuery:u,searchPosition:n+t,item:e,moduleFilters:null,...C()})})))))}var sD=n(173842),sR=n(837144),sM=n(28298),sP=n(517333);function sF({extensionFilter:e,setExtensionFilter:t,canRunWidgets:n}){let a=(0,eM.sZ)(),i=(0,su.Cb)(),l={label:(0,en.t)("qa.filter.all"),value:em.BY.ALL},o={label:(0,en.t)("qa.filter.plugins"),value:em.BY.PLUGINS},s={label:(0,en.t)("qa.filter.widgets"),value:em.BY.WIDGETS},c={label:(0,en.t)("qa.filter.from_org_name",{org_name:a?.name||""}),value:em.BY.FROM_ORG},d={label:(0,en.t)("qa.filter.development"),value:em.BY.DEVELOPMENT},u=[l,o,s,c,d].find(t=>t.value===e)||l,m=!!a&&!i,p=sP.y3(),_=[];return n&&_.push({type:"checkableOption",value:l,text:l.label}),_.push({type:"checkableOption",value:o,text:o.label}),n&&_.push({type:"checkableOption",value:s,text:s.label}),(m||p)&&_.push({type:"separator"}),m&&_.push({type:"checkableOption",value:c,text:c.label}),p&&_.push({type:"checkableOption",value:d,text:d.label}),r.createElement(ef.c0,{selected:u,placeholder:"Filter",onSelectedChange:e=>{t(e.value)},labelForSelectedItem:e=>e.label,displayAboveTarget:!1,items:_,id:sB,recordingKey:sB})}let sB="extensions-filter-dropdown";var sU=n(877822),sG=n(34762),sK=n(792199),sV=n(357611),sH=n(971120),sz=n(941381),sW=n(107877),sj=n(752795),s$=n(395771),sq=n(71425),sY=n(738269),sX=n(884484),sJ=n(555328),sZ=n(574056),sQ=n(780700),s0=n(170786),s1=n(436318),s2=n(16366);let s5=e=>{(0,s0.j)({pluginID:e.plugin_id,widgetName:e.name,pluginVersionID:"",triggeredFrom:"quick-actions"})};var s3=n(341255);function s4({augmentedExtension:e}){let{extension:t,publishedExtension:n}=e;if(!(0,eG.ZQ)(t))return r.createElement(eV.V,{plugin:t,className:et.cx.colorIcon.w20.h20.m2.bRadius4.$});let a=n&&(0,eF.Ar)(n);return a&&a.redirect_icon_url?r.createElement(eV.V,{plugin:a,className:et.cx.colorIcon.w20.h20.m2.bRadius4.$}):r.createElement(ex.B,{svg:sN.A,className:et.cx.colorIcon.w20.h20.m2.bRadius4.$,dataTestId:"qa2-dev-plugin-icon",autosize:!0})}var s6=n(145755),s8=n(60418),s7=n(841368),s9=n(795621),ce=n(727749),ct=n(986270),cn=n(697551),ca=n(258237),cr=n(782501),ci=n(331626),cl=n(632788),co=n(520103),cs=n(507847);let cc="EXTENSION_OPTIONS_DROPDOWN";function cd(e){let t=(0,lW.Um)();return(0,eG.ZQ)(e)?t?.type===cc&&t?.data.extensionId===e.plugin_id&&t?.data.localFileId===e.localFileId:t?.type===cc&&t?.data.extensionId===e.plugin_id&&t?.data.localFileId===null}function cu(e){return e.types.has(N.Ag.RECENT)||e.types.has(N.Ag.USER_SAVED)||e.types.has(N.Ag.LOCAL)}function cm({extension:e}){let t=(0,i.wA)(),n=cd(e),a=r.useCallback(a=>{if(n)t(sY.oB());else{let n=a.currentTarget.getBoundingClientRect();t(sY.j7({type:cc,data:{extensionId:e.plugin_id,localFileId:(0,eG.ZQ)(e)?e.localFileId:null,targetRect:n}}))}},[t,n,e]);return r.createElement("div",{className:et.cx.flex.pl8.$},r.createElement(s9.S.div,{role:"button",tabIndex:0,onClick:e=>{e.stopPropagation(),a(e)},onPointerUp:e=>{e.stopPropagation()},className:et.cx.bgTransparent.h24.$,"data-testid":"extension-options-button"},r.createElement("div",null,r.createElement(s7.J,null))))}function cp(e){let{augmentedExtension:t}=e,{extension:n,publishedExtension:a,localPublishedExtension:o}=t,s=(0,lW.Um)(),c=(0,eG.ZQ)(n)?n:o,d=(0,sX.NV)(c,a),u=(0,sX.OX)(a),m=(0,sX.x2)(n,a),p=(0,sX.qu)(c),_=function(e){let t=(0,i.wA)(),n=(0,ci.U_)(),a=(0,i.d4)(e=>(0,cn.T9)({authedProfilesById:e.authedProfilesById,userId:e.user?.id}));return(0,r.useCallback)(()=>{let{extension:r,types:i}=e;if(i.has(N.Ag.LOCAL)&&(0,eG.ZQ)(r)){t(sq.qR(r.localFileId));return}if(i.has(N.Ag.RECENT)){if(!n)return;t(((0,eG.k0)(r)?ct.Kq:ct.lD)({storeInRecentsKey:n,resourceId:r.plugin_id}))}if(i.has(N.Ag.USER_SAVED)){let e=(0,eG.k0)(r)?sJ.vt.WIDGET:sJ.vt.PLUGIN;t((0,ce.s1)({id:r.plugin_id,resourceType:e,communityProfile:a||void 0,source:ce.uR.INSERTS_MODAL}))}},[t,n,e,a])}(t),g=!!((0,eG.ZQ)(n)&&a),f=(0,sX.qi)(g,_),h=(0,cs.rH)(t),E=(0,sX.xZ)(t),y=(0,tX.TA)(),b=!!a&&!!y&&((0,ca.Ro)(a,y)||(0,cr.Dd)(a,y)),v=cd(n),C=(0,co.O)({extension:t,preloadImage:v});if(!v)return null;let w=[],T=[],S=!!a;!(0,eG.ZQ)(n)&&(S?(d&&b&&w.push(d),w.push({displayText:(0,en.t)("qa.extensions.view_details"),callback:C}),m&&b&&w.push(m),p&&b&&w.push(p),E&&b&&w.push(E),cu(t)&&!(0,X.kc)().qa_extension_saves?T.push(f):h&&(0,X.kc)().qa_extension_saves&&T.push(h),u&&b&&T.push(u)):(0,ew.$D)(l.FigmaTeam.AI_FOR_PRODUCTION,Error("[Quick Actions] Published extension is missing publishedExtension from Redux state"),{extra:{extensionId:n.plugin_id,isWidget:(0,eG.k0)(n),types:Array.from(t.types).toString()}})),(0,eG.ZQ)(n)&&(d&&w.unshift(d),S&&m&&w.push(m),!n.error&&p&&w.push(p),cu(t)&&!(0,X.kc)().qa_extension_saves?T.push(f):h&&(0,X.kc)().qa_extension_saves&&T.push(h),u&&T.push(u));let x=w.some(Boolean)&&T.some(Boolean)?{displayText:"",separator:!0}:null;return r.createElement(cl.ms,{parentRect:s?.data.targetRect,lean:"left",minWidth:64,items:[...w,x,...T].filter(e=>!!e)})}function c_({augmentedExtension:e,active:t,submenuRef:n}){let{extension:a}=e,i=(0,eG.k0)(a)?r.createElement(e5.E,{color:"tertiary",fontSize:11},(0,en.tx)("qa.extensions.widget")):r.createElement(e5.E,{color:"tertiary",fontSize:11},(0,en.tx)("qa.extensions.plugin")),l=sw(e);return r.createElement("div",{className:et.cx.flex.itemsCenter.justifyBetween.wFull.$},r.createElement("div",{className:et.cx.flex.itemsCenter.$},r.createElement(s4,{augmentedExtension:e}),r.createElement("div",{className:et.cx.px8.$,style:ek.sx.add({maxWidth:l?"205px":"300px"}).$},r.createElement(sy.G,{text:a.name})),r.createElement(s1.lM,{augmentedExtension:e,submenuRef:n}),l&&r.createElement("div",{style:ek.sx.add({maxWidth:"110px"}).$},r.createElement(sT,{text:l.text,variant:l.variant}))),r.createElement("div",null,t?r.createElement(cm,{extension:a}):i))}function cg({manifestError:e}){return r.createElement("div",{className:et.cx.alignLeft.font11.lh16.pl32.$},r.createElement(e5.E,{color:"danger"},e.displayText))}function cf({extension:e}){return r.createElement(s$.R,{className:et.cx.font11.alignLeft.colorTextSecondary.lh16.pl32.$,text:e.localFilePath.replace("/manifest.json","")})}function ch({augmentedExtension:e,submenuRef:t}){let{extension:n}=e,a=(0,i.wA)(),[l,o]=r.useState(!1),s=cd(n),c=(0,sX.Pt)(n.error?.type,n),{onAction:d,actionText:u}=function({manifestError:e,augmentedExtension:t,submenuRef:n}){let{close:a}=(0,A.cq)(),{extension:i}=t,l=(0,s1.q8)(i),o=(0,s1.U4)(i),s=(0,s1.S3)({submenuIsShown:o,extension:i}),c=(0,s2.t)(i,l),d=sQ.dR(i.plugin_id,"quick-actions"),u=(0,sE.Kp)(t),m=r.useCallback(()=>{(0,eG.k0)(i)?nz.l7.user("insert-widget",()=>s5(i)):l&&n?s(n.current):d(),l||u(),c()&&a()},[i,l,n,s,d,u,c,a]);return e?{onAction:()=>e.action(),actionText:e.displayText}:{onAction:m,actionText:(0,en.t)("qa.extensions.run")}}({manifestError:c,augmentedExtension:e,submenuRef:t}),m=r.useCallback(()=>{if(s){a(sY.oB());return}d()},[s,d,a]),p=N.H5.LOCAL,_=(0,s6.D)({source:p,text:u,onAction:m,augmentedExtension:e});return r.createElement(s6.p,{primaryAction:_,setActive:o},r.createElement("div",{className:et.cx.flex.flexColumn.wFull.$},r.createElement(c_,{augmentedExtension:e,active:l,submenuRef:t}),!c&&r.createElement(cf,{extension:n}),c&&r.createElement(cg,{manifestError:c})),r.createElement(s1.Xq,{augmentedExtension:e}),r.createElement(cp,{augmentedExtension:e}))}function cE({augmentedExtension:e,submenuRef:t}){let{extension:n,canRun:a,canRequest:l}=e,o=(0,i.wA)(),[s,c]=r.useState(!1),d=cd(n),{onAction:u,actionText:m}=(0,s3.m)({augmentedExtension:e,submenuRef:t}),p=N.H5.PUBLISHED,_=(0,s6.D)({source:p,text:m,onAction:()=>{if(d){o(sY.oB());return}u()},augmentedExtension:e});return a||l?r.createElement(s6.p,{primaryAction:_,setActive:c},r.createElement(c_,{augmentedExtension:e,active:s,submenuRef:t}),r.createElement(s1.Xq,{augmentedExtension:e}),r.createElement(cp,{augmentedExtension:e})):null}function cy(e,t){return[{itemKey:"newPlugin",text:(0,en.t)("whiteboard.inserts.plugin_development_options_new_plugin"),svg:eE.e,onAction:()=>{e(tY.Lo()),a$.Y5.dispatch((0,tY.to)({type:sZ.h,data:{resourceType:sJ.bD.PLUGIN}}))}},t?{itemKey:"newWidget",text:(0,en.t)("whiteboard.inserts.widget_development_options_new_widget"),svg:eE.e,onAction:()=>{e(tY.Lo()),a$.Y5.dispatch((0,tY.to)({type:sZ.h,data:{resourceType:sJ.bD.WIDGET}}))}}:null,{itemKey:"importFromManifest",text:(0,en.t)("whiteboard.inserts.development_options_import"),svg:eh.R,onAction:()=>e((0,sq.JZ)({resourceType:"unknown"}))}].filter(sj.isNotNullish)}function cb({itemKey:e,text:t,svg:n,onAction:a}){let i=(0,s8.OX)(),l=N.H5.ACTION,o=(0,s6.D)({source:l,onAction:t=>{let{target:n}=t;(0,e$.PV)({action:e,isAi:!1,module:em.Jc.EXTENSIONS,qaVersion:O.$L,rankingAlgorithm:(0,D.eg)(em.Jc.EXTENSIONS),searchPosition:n?.index??0,isPlugin:!1,numSearchResults:i.numResults,searchQuery:i.searchQuery,moduleFilters:i.moduleFilters}),a()},augmentedExtension:null});return r.createElement(s6.p,{primaryAction:o},r.createElement("div",{className:et.cx.flex.itemsCenter.alignLeft.wFull.justifyBetween.$},r.createElement("div",{className:et.cx.flex.$},r.createElement(n,null),r.createElement("div",{className:et.cx.ml8.$},t))))}var cv=n(67294);let cC="button_with_faux_focus--button--4UzJZ utilities--bodyMedium--7-YGK",cw="button_with_faux_focus--icon--3ofHG",cT="button_with_faux_focus--buttonText--eXi6z",cS="button_with_faux_focus--buttonContent--QYGhy",cx="button_with_faux_focus--shortcut--XSTpu",ck="button_with_faux_focus--regularSize--PRZRN",cN="button_with_faux_focus--largeSize--KbVb-",cI="button_with_faux_focus--wideSize--vAeP3",cA="button_with_faux_focus--largeWideSize--7umaZ",cO="button_with_faux_focus--outlineStyle--HbkS5",cL="button_with_faux_focus--fauxFocus--ydUPp",cD="button_with_faux_focus--solidStyle--JXrgr",cR="button_with_faux_focus--primary--z-mFg button_with_faux_focus--solidStyle--JXrgr",cM="button_with_faux_focus--secondary--nFRZl button_with_faux_focus--outlineStyle--HbkS5",cP="button_with_faux_focus--destructive--mKBEK button_with_faux_focus--solidStyle--JXrgr",cF="button_with_faux_focus--destructiveSecondary--Wtsn1 button_with_faux_focus--outlineStyle--HbkS5",cB="button_with_faux_focus--signup--CPfrM button_with_faux_focus--solidStyle--JXrgr",cU="button_with_faux_focus--link--qW4X-",cG="button_with_faux_focus--destructiveLink--xx-J5 button_with_faux_focus--link--qW4X-",cK=r.forwardRef(({active:e,children:t,size:n="regularSize",variant:i,...l},o)=>r.createElement(lh.E,{className:P()({[cC]:!0,[a[i??"primary"]]:!0,[a[n]]:!0,[cL]:e}),...l,ref:o},r.createElement("span",{className:cT},r.createElement("span",{className:cS},t))));var cV=n(103567);function cH({action:e,children:t,dataTestId:n,variant:a}){let i=(0,r.useRef)(null),{active:l,target:o}=(0,lT.H)({ref:i,itemsPerRow:2}),s=(0,r.useMemo)(()=>({shortcuts:[{key:J.Uz.ENTER}],onAction:e}),[e]),{onClickCallback:c}=(0,lk.k)({primaryAction:s,active:l,actionLabel:!1,target:o});return r.createElement(cK,{ref:i,onClick:e=>{e.stopPropagation(),c()},htmlAttributes:{"data-testid":n},variant:a,active:l},t)}function cz({extension:e}){let t=(0,cV.R_)(e),n=(0,cV.JB)(e);return r.createElement("div",{className:et.cx.mx8.mb8.p8.bRadius8.flex.justifyBetween.gap4.colorBgInfo.$,"data-testid":"extension-invite-row"},r.createElement("div",{className:et.cx.flex.gap8.itemsCenter.font11.lh16.$},r.createElement(cv.H8,{user:e.creator,size:cv.Pf.MEDIUM}),r.createElement(cV.e2,{resource:e})),r.createElement("div",{className:et.cx.flex.gap4.$},r.createElement(cH,{action:n,dataTestId:"decline-invite-button",variant:"secondary"},r.createElement(e5.E,{fontSize:11},(0,en.tx)("community.detail_view.decline"))),r.createElement(cH,{action:t,dataTestId:"accept-invite-button"},r.createElement(e5.E,{fontSize:11},(0,en.tx)("community.detail_view.accept")))))}function cW({invitedPlugins:e,invitedWidgets:t,selectedFilter:n}){let a=function({invitedPlugins:e,invitedWidgets:t,selectedFilter:n}){switch(n){case em.BY.PLUGINS:return e;case em.BY.WIDGETS:return t;case em.BY.ALL:case em.BY.DEVELOPMENT:return[...e,...t];case em.BY.FROM_ORG:return[];default:(0,Y.assertNever)(n)}}({invitedPlugins:e,invitedWidgets:t,selectedFilter:n});return 0===a.length?null:r.createElement("div",{"data-testid":"extension-invite-section",className:et.cx.flex.flexColumn.$},r.createElement(aw.B.Section,{header:(0,en.t)("community.detail_view.invitations")},a.map(e=>r.createElement(cz,{key:e.id,extension:e}))))}var cj=n(563042),c$=n(947131),cq=n(958473),cY=n(794412),cX=n(110354);function cJ({augmentedExtension:e}){let{extension:t,publishedExtension:n}=e,a=(0,eG.k0)(t)?(0,en.tx)("qa.extensions.widget"):(0,en.tx)("qa.extensions.plugin"),i=n?.unique_run_count??0,l=n?.like_count??0,o=n?r.createElement(cq.o,{publishedExtension:n,showTooltip:!1}):null,s=(0,cq.g)(n);return r.createElement("div",{className:et.cx.flex.flexColumn.colorTextSecondary.textBodyMedium.$},r.createElement("div",{className:et.cx.flex.flexRow.$},a,r.createElement(cZ,null),r.createElement(ex.B,{svg:cY.A,className:et.cx.mx2.colorIconSecondary.$}),r.createElement("div",{className:et.cx.ml2.$},(0,en.t)("qa.extensions.num_users",{numUsers:i,numUsersStr:(0,iy.$M)(i)})),r.createElement(cZ,null),r.createElement(ex.B,{svg:cX.A,className:et.cx.colorIconSecondary.$,style:ek.sx.add({margin:"3px"}).$}),r.createElement("div",{className:et.cx.ml2.$},(0,iy.$M)(l)),s&&r.createElement(cZ,null),o))}function cZ(){return r.createElement("div",{className:et.cx.w1.hFull.mx6.$,style:ek.sx.add({backgroundColor:"var(--color-border-fs)"}).$,"data-testid":"divider"})}function cQ({augmentedExtension:e}){let{extension:t,canRun:n,canRequest:a}=e,[i,l]=r.useState(!1),o=(0,co.O)({extension:e,preloadImage:i}),s=N.H5.PUBLISHED_WITH_DETAILS,c=(0,s6.D)({source:s,text:(0,en.t)("qa.extensions.view_details"),onAction:o,augmentedExtension:e});if(!n&&!a)return null;let d=(0,sb.G8)(t,cj.$J);return r.createElement(s6.p,{primaryAction:c,setActive:l},r.createElement("div",{className:et.cx.flex.flexColumn.alignLeft.wFull.$},r.createElement("div",{className:et.cx.flex.itemsCenter.overflowHidden.$},r.createElement(s4,{augmentedExtension:e}),r.createElement(c0,{augmentedExtension:e})),r.createElement("div",{className:et.cx.flex.flexColumn.overflowHidden.ml32.$},r.createElement(sy.G,{text:d,className:et.cx.mb4.colorTextSecondary.textBodyMedium.$,showTooltip:c$.i.NEVER}),r.createElement(cJ,{augmentedExtension:e}))))}function c0({augmentedExtension:e}){let{extension:t}=e,n=sw(e);return r.createElement("div",{className:et.cx.flex.itemsCenter.ml8.$},r.createElement("div",{className:et.cx.pr8.colorText.textBodyLarge.$,style:ek.sx.add({maxWidth:n?"205px":"300px"}).$},r.createElement(sy.G,{text:t.name})),n&&r.createElement("div",{style:ek.sx.add({maxWidth:"110px"}).$},r.createElement(sT,{text:n.text,variant:n.variant})))}function c1({augmentedExtensions:e,header:t,showExtensionDetails:n=!1,dataTestId:a}){let i=e.map(e=>{let t=r.createRef(),{key:a}=e;return(0,I.JT)(e)?r.createElement(ch,{augmentedExtension:e,key:a,submenuRef:t}):n?r.createElement(cQ,{augmentedExtension:e,key:a}):r.createElement(cE,{augmentedExtension:e,key:a,submenuRef:t})});return r.createElement("div",{"data-testid":a,className:et.cx.flex.flexColumn.$},t&&r.createElement(aw.B.Section,{header:t},i),!t&&i)}function c2({actions:e}){let t=(0,s8.OX)(),n=t.moduleFilters===em.BY.DEVELOPMENT,a=t.moduleFilters===em.BY.ALL;return sP.y3()&&(n||a)?r.createElement("div",{"data-testid":"extension-actions-section",className:et.cx.flex.flexColumn.$},e.map(({itemKey:e,...t})=>r.createElement(cb,{key:e,itemKey:e,...t}))):null}function c5({extensions:e}){let t=(0,r.useMemo)(()=>[...e].sort(I.bL),[e]);return 0===t.length?null:r.createElement(c1,{augmentedExtensions:t,dataTestId:"my-extensions-section"})}function c3(){return r.createElement("div",{className:et.cx.flex.wFull.mt16.justifyCenter.alignCenter.colorTextSecondary.$,"data-testid":"no-extensions-found"},(0,en.tx)("qa.no_plugins_widgets_found"))}function c4({availableExtensions:e,selectedFilter:t}){let n=(0,D.Ev)(),a=(0,s.md)(k.Lk),l=(0,s.md)(k.dd),o=(0,s.md)(k.Rt),c=(0,i.d4)(eU.l),d=(0,i.wA)(),u=(0,S.f6)(),m=(0,S.wW)(),{loaded:p,extensions:_}=function(e){let t=(0,I.Oy)(),{loaded:n,extensions:a}=function(){let e=(0,i.wA)(),[t,n]=(0,r.useState)(!1),[a,l]=(0,r.useState)([]);return(0,r.useEffect)(()=>{let t={sort_by:sW.eg.POPULAR,editor_type:sV.k.Editors.FIGMA};Promise.all([(0,sK.nC)().filter(t).browse(sH.L.BrowseResourceTypes.PLUGINS),(0,sK.nC)().filter(t).browse(sH.L.BrowseResourceTypes.WIDGETS)]).then(([t,a])=>{let r=t.data.meta.resources,i=a.data.meta.resources,o=(0,eX.shuffle)([...r.slice(0,10),...i.slice(0,5)]);e(sz.Qi({publishedPlugins:o,src:"Quick Actions V2 suggested extensions"}));let s=o.map(e=>(0,eF.Ar)(e)).filter(e=>null!==e);n(!0),l(s)}).catch(()=>{n(!1),l([])})},[e]),{loaded:t,extensions:a}}(),l=a.map(e=>t(e,N.Ag.COMMUNITY));return{loaded:n,extensions:(0,I.ZM)([...e,...l])}}(e),{myExtensions:g,suggestedExtensions:f,otherExtensionsFromOrg:h}=function(e,t){let n=(0,I.vA)(t),a=[],r=[],i=[];return e.filter(e=>e.canRun||e.canRequest).filter(e=>n(e)).forEach(e=>{(0,I.wj)(e)?a.push(e):t===em.BY.FROM_ORG&&(0,I.jb)(e)||t!==em.BY.FROM_ORG&&(0,I.Nf)(e)?r.push(e):t===em.BY.FROM_ORG&&i.push(e)}),{myExtensions:a,suggestedExtensions:r,otherExtensionsFromOrg:i}}(_,t),E=(0,S.sR)(),y=t===em.BY.DEVELOPMENT||t===em.BY.ALL?cy(d,E):[],b=g.length+f.length+h.length+y.length,v=t===em.BY.DEVELOPMENT,C=t===em.BY.FROM_ORG,w=p||C||v,T=function({myExtensions:e,suggestedExtensions:t,otherExtensionsFromOrg:n,extensionActions:a}){let r=(0,D.HD)("My Extensions",e),i=(0,D.HD)("Suggested",t),l=(0,D.HD)("Other Extensions from Org",n),o=(0,D.NH)(a);return(0,D.i6)([r,i,l,o])}({myExtensions:g,suggestedExtensions:f,otherExtensionsFromOrg:h,extensionActions:y});return((0,r.useEffect)(()=>{a===em.Jc.EXTENSIONS&&l&&w&&n({quickActionsSessionId:l,quickActionsQueryId:o,searchQuery:"",numSearchResults:b,currentSelection:c,module:a,moduleFilters:t,qaVersion:O.$L,searchQueryResults:T})},[n,a,l,w,o,b,c,t,T]),0===b)?r.createElement(c3,null):r.createElement(s8.M6,{numResults:b,moduleFilters:t},r.createElement(aw.B,{primary:!0,resultCount:b},r.createElement(cW,{invitedPlugins:u,invitedWidgets:m,selectedFilter:t}),r.createElement(c5,{extensions:g}),r.createElement(c2,{actions:y}),r.createElement(c6,{extensions:f,hasLoaded:w}),C&&r.createElement(c8,{extensions:h})))}function c6({extensions:e,hasLoaded:t}){return t?0===e.length?null:r.createElement(c1,{augmentedExtensions:e,header:(0,en.t)("qa.suggested"),showExtensionDetails:!0}):r.createElement("div",{className:et.cx.p8.$},r.createElement(sG.R,null))}function c8({extensions:e}){let t=(0,eM.sZ)();return t&&0!==e.length?r.createElement(c1,{augmentedExtensions:e,header:(0,en.t)("qa.other_extensions_from_org",{org_name:t.name}),showExtensionDetails:!0}):null}var c7=n(35645),c9=n.n(c7),de=n(395096),dt=n(752553),dn=n(463592),da=n(508567);let dr=im.M4.Query({fetch:async e=>(await da.$W.getExtensions(e)).data.meta,enabled:e=>e.query.length>0,output:({data:e})=>e.results});function di({availableExtensions:e,selectedFilter:t}){let n=(0,D.Ev)(),a=(0,s.md)(k.Lk),o=(0,s.md)(k.dd),c=(0,s.md)(k.Q8),[d]=(0,de.A)(c,300),u=(0,s.md)(k.Rt),m=(0,i.d4)(eU.l),p=(0,i.wA)(),{loading:_,publicExtensions:g,privateExtensions:f,localExtensions:h}=function(e){let{status:t,results:n,errors:a}=function(e){let t=function(e){switch(e){case to.nT.Design:return sV.k.Editors.FIGMA;case to.nT.Whiteboard:return sV.k.Editors.FIGJAM;case to.nT.DevHandoff:return sV.k.Editors.DEV_MODE;default:return sV.k.Editors.ALL}}((0,e3.my)()),n=(0,su.U5)(),a=(0,eM.dq)()??void 0,r=(0,X.kc)().ext_plugin_limit_search_results?20:void 0,[{status:i,data:l,errors:o}]=(0,dt.IT)(dr({query:e,editorType:t,orgSearch:n,currentOrgId:a,maxNumResults:r}));return{status:i,results:l||{public:[],private:[]},errors:o}}(e),i=function(e){let t=(0,S.$1)(),n=(0,r.useMemo)(()=>Object.values(t),[t]),a=(0,r.useMemo)(()=>new dn.Ef(n,cn.Ih),[n]);return(0,r.useMemo)(()=>a.search(e),[a,e])}(e);return(0,r.useMemo)(()=>{switch(t){case"loading":return{loading:!0,privateExtensions:[],publicExtensions:[],localExtensions:[]};case"loaded":let e=n?.public??[],r=n?.private??[];return{loading:!1,publicExtensions:e.map(e=>e.model),privateExtensions:r.map(e=>e.model),localExtensions:i};case"disabled":case"errors":return(0,ew.$D)(l.FigmaTeam.EXTENSIBILITY,Error("[useSearchExtensions] Unable to fetch search results"),{tags:{status:t},extra:{errors:a}}),{loading:!1,privateExtensions:[],publicExtensions:[],localExtensions:[]};default:(0,Y.assertNever)(t)}},[n?.private,n?.public,i,t,a])}(d),E=function(e){let t=(0,i.wA)(),n=(0,S.sR)(),a=(0,r.useMemo)(()=>cy(t,n),[t,n]),l=(0,r.useMemo)(()=>new dn.Ef(a,cn.zd),[a]);return(0,r.useMemo)(()=>l.search(e),[l,e])}(d);(0,r.useEffect)(()=>{let e=[...g,...f];0!==e.length&&p(sz.Qi({publishedPlugins:e,src:"Quick actions"}))},[p,f,g]);let{myExtensions:y,fromOrgExtensions:b,communityExtensions:v}=dc(function({publicExtensions:e,privateExtensions:t,localExtensions:n}){let a=(0,I.Oy)();return(0,r.useMemo)(()=>{let r=(e,t)=>e.map(e=>(0,eF.Ar)(e)).filter(e=>!!e).map(e=>a(e,t)),i=r(e,N.Ag.COMMUNITY),l=r(t,N.Ag.ORG_PRIVATE);return[...n.map(e=>a(e,N.Ag.LOCAL)),...l,...i]},[a,n,t,e])}({publicExtensions:g,privateExtensions:f,localExtensions:h}),e,t),C=y.length+b.length+v.length+E.length,w=function({myExtensions:e,actionItems:t,fromOrgExtensions:n,communityExtensions:a}){let r=(0,D.HD)("My Extensions",e),i=(0,D.NH)(t),l=(0,D.HD)("From Org",n),o=(0,D.HD)("From Community",a);return(0,D.i6)([r,i,l,o])}({myExtensions:y,actionItems:E,fromOrgExtensions:b,communityExtensions:v});return((0,r.useEffect)(()=>{a===em.Jc.EXTENSIONS&&o&&!_&&n({quickActionsSessionId:o,quickActionsQueryId:u,searchQuery:d,numSearchResults:C,currentSelection:m,module:a,moduleFilters:t,qaVersion:O.$L,searchQueryResults:w})},[m,n,a,C,o,u,t,_,w,d]),_)?r.createElement(sG.R,null):0===C?r.createElement(c3,null):r.createElement(s8.M6,{numResults:C,moduleFilters:t},r.createElement(aw.B,{primary:!0,resultCount:C},r.createElement(c5,{extensions:y}),r.createElement(c2,{actions:E}),r.createElement(dl,{extensions:b}),r.createElement(ds,{extensions:v})))}function dl({extensions:e}){let t=(0,eM.sZ)();if(!t||0===e.length)return null;let[n,a]=c9()(e,e=>e.types.has(N.Ag.ORG_SAVED)),i=[...n,...a];return r.createElement(c1,{augmentedExtensions:i,header:(0,en.t)("qa.from_org_name",{org_name:t.name}),showExtensionDetails:!0,dataTestId:"from-org-extensions-section"})}function ds({extensions:e}){return 0===e.length?null:r.createElement(c1,{augmentedExtensions:e,header:(0,en.t)("qa.from_community"),showExtensionDetails:!0,dataTestId:"community-extensions-section"})}let dc=(e,t,n)=>{let a=(0,I.vA)(n),i=(0,r.useMemo)(()=>new Set(e.map(e=>e.key)),[e]),l=(0,r.useMemo)(()=>{let n=[...e,...t];return(0,I.ZM)(n)},[t,e]),o=[],s=[],c=[];return l.filter(e=>e.canRun||e.canRequest).filter(e=>a(e)).filter(e=>i.has(e.key)).forEach(e=>{(0,I.wj)(e)?o.push(e):(0,I.C5)(e)?s.push(e):(0,I.Nf)(e)&&c.push(e)}),{myExtensions:o,fromOrgExtensions:s,communityExtensions:c}};function dd({hasLoadedExtensions:e,extensions:t,selectedFilter:n}){let a=(0,s.md)(k.Q8),i=(0,k.JB)(),l=(0,sU.AY)(sM.t);return((0,y.h)(()=>()=>{i(),l()}),e)?a?r.createElement(di,{availableExtensions:t,selectedFilter:n}):r.createElement(c4,{availableExtensions:t,selectedFilter:n}):r.createElement(sG.R,null)}var du=n(891682);function dm(){!function(){let e=(0,s.md)(k.IH),{autoClose:t}=(0,A.cq)(),n=(0,r.useCallback)(()=>{let e=ed.D.getState();e.modalShown||e.dropdownShown||e.pickerShown||t()},[t]);!function({ref:e,handler:t,eventType:n="mousedown",eventOptions:a,recordingKey:i,enabled:l}){let o=(0,r.useCallback)(n=>{if(!(n.target instanceof Node))return;let a=n.target;a&&a.isConnected&&e&&(Array.isArray(e)?e.filter(e=>!!e.current).every(e=>e.current&&!e.current.contains(a)):e.current&&!e.current.contains(a))&&t(n)},[e,t]),s=(0,Q.rf)(i,n,o);(0,r.useEffect)(()=>{if(e&&l)return window.addEventListener(n,s,a),()=>{window.removeEventListener(n,s,a)}},[e,n,o,s,a,l])}({ref:e,handler:()=>setTimeout(n,0),eventType:"mousedown",eventOptions:!0,recordingKey:"click-to-dismiss",enabled:!0})}();let{defaultViewModuleHeight:e,defaultViewTabsAvailable:t,defaultViewAssetsTabVisible:n}=(0,r.useContext)(_),[a,l]=(0,s.fp)(k.Q8),o=(0,v.Xr)(k.Rt),[c,d]=(0,s.fp)(sM.t),[u,m]=(0,s.fp)(k.Lk),{loaded:p,extensions:g}=(0,s.md)(k.P_),f=(0,i.wA)();r.useEffect(()=>f(er.aq()),[f]);let h=(0,ei.q5)(),E=!!(t&&h?.canEdit),y=(0,tP.s)(),b=(0,na.V)(),C=(0,ec.Xk)();(0,es.b)({disabled:!E});let w=u===em.Jc.ASSETS,{debouncedAssetSearch:T,clearAssetSearchAndCancelDebounce:x}=(0,eu.TC)({debounceWait:300}),{debouncedFragmentTextSearch:N,clearFragmentSearchAndCancelDebounce:I}=(0,du.S)({debounceWait:300,entryPoint:ea.G4.ACTIONS_ASSETS_TAB}),{debouncedFragmentTextSearch:O,clearFragmentSearchAndCancelDebounce:L}=(0,du.S)({debounceWait:300,entryPoint:ea.G4.ACTIONS_ASSETS_TAB,isCommunity:!0}),R=r.useCallback(e=>{l(e),o((0,ee.g)()),(0,D.lw)(),E&&(w||0===e.length)&&(T(e,{type:eo.I.ALL}),b&&N(e),C&&O(e))},[l,o,T,N,E,w,b,C,O]),M=r.useCallback(()=>{l(""),E&&(x(),b&&I(),C&&L())},[l,E,x,I,b,C,L]),P=r.useCallback(e=>{m(e),(0,D.lw)()},[m]),F=r.useCallback(()=>{(0,tM.mX)(a,()=>P(em.Jc.ASSETS),b,C,y,ea.G4.ACTIONS_ASSETS_TAB)},[a,P,b,C,y]),B=r.useRef(null),U=(0,sD.U)(b),G=(0,i.d4)(el.GP),K=(0,S.sR)();r.useEffect(()=>{K||c!==em.BY.ALL&&c!==em.BY.WIDGETS||d(em.BY.PLUGINS)},[K,c,d]);let V=r.createElement(ef.fu,{value:u,onChange:Z.lQ,numItems:G?3:2},r.createElement(ef.oz,{tabId:em.Jc.ALL,onAction:()=>P(em.Jc.ALL),navigatingShortcut:{key:J.Uz.KEY_1,modifier:[J.xH.ALT]}},(0,en.tx)("qa.all")),n&&r.createElement(ef.oz,{tabId:em.Jc.ASSETS,onAction:F,navigatingShortcut:{key:J.Uz.KEY_2,modifier:[J.xH.ALT]}},(0,en.tx)("qa.assets")),G&&r.createElement(ef.oz,{tabId:em.Jc.EXTENSIONS,onAction:()=>P(em.Jc.EXTENSIONS),navigatingShortcut:{key:J.Uz.KEY_3,modifier:[J.xH.ALT]}},K?(0,en.tx)("qa.plugins_widgets"):(0,en.tx)("qa.plugins"))),H=b?r.createElement("div",{className:et.cx.flex.$},r.createElement(sR.h,{recordingKey:(0,Q.Pt)("defaultView","visualSearchIconButton")})):void 0,z=u===em.Jc.EXTENSIONS;return r.createElement(e_.n,{height:e,recordingKey:"defaultView"},r.createElement(eg.v,{searchQuery:a,onSearchChange:R,onClear:M,endEnhancer:H,ref:B,placeholder:w?U:void 0}),(E||z)&&r.createElement(r.Fragment,null,r.createElement("div",{className:et.cx.px8.pb8.$},r.createElement(ep.b,{primary:!1,gap:8,fullWidth:!0,justify:"space-between"},E&&V,z&&r.createElement(sF,{extensionFilter:c,setExtensionFilter:d,canRunWidgets:K}))),(0,X.kc)().qa_tab_border&&r.createElement("div",{className:et.cx.bt1.bSolid.colorBorder.$})),r.createElement(e_.n.Body,null,function(){switch(u){case em.Jc.ALL:return r.createElement(sL,{setActiveTab:P});case em.Jc.ASSETS:return r.createElement(tM.tF,{searchHandle:B});case em.Jc.EXTENSIONS:return r.createElement(dd,{extensions:g,hasLoadedExtensions:p,selectedFilter:c});default:return(0,Y.assertNever)(u)}}()))}function dp(){let{current:e}=(0,A.cq)(),t=(0,k.jh)();return((0,y.h)(()=>()=>{t()}),e)?r.createElement(r.Fragment,null,e.module):r.createElement(dm,null)}let d_=(e,t)=>{let n=(0,L.x)();(0,D.F$)(n)&&(0,D.Mq)({...t,qaVersion:O.$L,quickActionsSessionId:e,timeToShowModal:E.sn.tryStop(O.mP)||0,module:n})};function dg(){!function(){let e=(0,v.Xr)(k.P_),t=(0,S.FG)(),n=(0,S.AR)(),{loaded:a,userPlugins:i,userWidgets:l,orgPlugins:o,orgWidgets:s}=(0,S.q3)(),c=(0,S.ll)(),d=(0,S.U6)(),u=(0,x.h)("plugin"),m=(0,x.h)("widget"),p=(0,S.$1)(),_=(0,I.Oy)(),g=(0,r.useMemo)(()=>[{extensions:t,extensionType:N.Ag.RECENT},{extensions:n,extensionType:N.Ag.RECENT},{extensions:Object.values(i),extensionType:N.Ag.USER_SAVED},{extensions:Object.values(l),extensionType:N.Ag.USER_SAVED},{extensions:Object.values(o),extensionType:N.Ag.ORG_SAVED},{extensions:Object.values(s),extensionType:N.Ag.ORG_SAVED},{extensions:Object.values(c),extensionType:N.Ag.ALLOWLIST},{extensions:Object.values(d),extensionType:N.Ag.ALLOWLIST},{extensions:u,extensionType:N.Ag.ORG_PRIVATE},{extensions:m,extensionType:N.Ag.ORG_PRIVATE},{extensions:Object.values(p),extensionType:N.Ag.LOCAL}],[t,n,i,l,o,s,c,d,u,m,p]),f=(0,r.useMemo)(()=>{let e=a?g.map(({extensions:e,extensionType:t})=>e.map(e=>_(e,t))).flat():[];return(0,I.ZM)(e)},[g,_,a]);(0,r.useEffect)(()=>{a&&f&&e({loaded:a,extensions:f})},[a,f,e])}();let e=(0,v.Xr)(k.Bu),t=(0,s.md)(k.rE),n=(0,s.md)(k.dd);(0,y.h)(()=>(e(!0),n&&d_(n,t||void 0),()=>{e(!1)}));let a=(0,s.md)(C.Kh),[i,l]=r.useState(!1),o=(0,w.o3)(w.nt.ui3),c=(0,b.ZC)(o),{close:d}=(0,A.cq)();return(0,r.useEffect)(()=>{df(a)&&l(!0),c&&!o?d():i&&!df(a)&&d()},[o,c,d,a,i]),r.createElement(T.s,null,r.createElement(R.s3,{name:"quickActions",recordingKey:"quickActions"},r.createElement($,null,r.createElement(dp,null))))}function df(e){return e===h.NLJ.SELECT}var dh=n(988022);function dE(e){let t=(0,eC.A)(f.KY,e.timeoutMs),[n,a]=r.useState(!1),i=r.useRef(null);return r.useEffect(()=>(n?t.cancel():t(),()=>{t.cancel()}),[t,n]),r.createElement("div",{ref:i,onPointerEnter:()=>{a(!0)},onPointerLeave:()=>{a(!1)}},e.children)}function dy(){let e=ed.D.getState(),t=(0,eU.l)(e),n=e.openFile?.key??"",a=(0,dh.v5)(e.selectedView,null),i=(0,nk.u)(),l=[...se(),...i],o=eY(),c=nx(o,l),d=(0,f.el)(),u=d?c.list(o).find(e=>e.action===d.action):null,m=u?.action,p=u?(0,ej.ah)(u):null,_=(0,ej.J8)(u?.action),g=(0,r.useCallback)(()=>{m&&(a$.Y5.triggerAction(m,d?.payload),(0,f.KY)())},[m,d?.payload]),h=(0,s.md)(k.dd),E=(0,D.vI)(),b=(0,no.PE)(),v={action:m,source:"toast",quickActionsSessionId:h,currentSelection:t,qaVersion:O.$L,fileKey:n,productType:a,role:E,hasAiFeatureAccess:b};if((0,y.h)(()=>{m&&(0,as.sx)(O.Sq,v,{forwardToDatadog:!0})}),!u)return console.warn("No menu item found for suggested action."),null;let C=u.action,w="magic-link"===C;return r.createElement(R.s3,{name:"quickActions",recordingKey:"quickActions"},r.createElement($,null,r.createElement(e_.n,null,r.createElement(dE,{timeoutMs:1e4},r.createElement(ak.y,{onDismiss:()=>(0,f.KY)(w?C:void 0),recordingKey:"SuggestionToast"},r.createElement(ep.B,{justify:"space-between",align:"center",fullWidth:!0},r.createElement(ep.B,{gap:4,align:"center"},r.createElement("span",{style:{"--color-icon":"var(--color-icon-brand)"}},r.createElement(eJ.V,null)),r.createElement(ep.B,{align:"center"},r.createElement("span",{className:et.cx.textBodyMediumStrong.$},r.createElement(e5.E,{color:"brand"},_)),u.tags?.includes(eI.$.AI)&&r.createElement(oO.W,null))),r.createElement(tQ.r,{variant:"secondary",shortcuts:[{key:J.Uz.ENTER,modifier:[J.xH.META]}],onAction:()=>{g(),m&&(0,D.mi)({...v,isAi:!0})},recordingKey:"SuggestionToast"},p)))))))}function db(e){let t=(0,i.wA)();return(0,u.I)()?r.createElement(c.tH,{boundaryKey:"QuickActionsV2",onError:()=>{t(d.F.enqueue({message:"Unable to open quick actions",type:"react-error"}))},team:l.FigmaTeam.AI_FOR_PRODUCTION,fallback:c.H4.NONE_I_KNOW_WHAT_IM_DOING},r.createElement(o.i,null,r.createElement(g,{value:p(e)},r.createElement(dv,null)))):null}function dv(){let e=(0,s.md)(k.Bu),t=(0,f.el)();return e?r.createElement(dg,null):t?r.createElement(dy,null):null}},670652:(e,t,n)=>{n.d(t,{w:()=>R});var a=n(411855),r=n(634832),i=n(52339),l=n(374626),o=n(939863),s=n(574724),c=n(677074),d=n(222478),u=n(188507),m=n(279145),p=(e=>(e[e.NEEDS_INITIAL_SELECTION=0]="NEEDS_INITIAL_SELECTION",e[e.SELECTION_LOST=1]="SELECTION_LOST",e[e.SELECTION_OK=2]="SELECTION_OK",e))(p||{}),_=n(709731),g=n(562432),f=n(438773),h=n(320063);function E(e){let t=Math.random()*e.reduce((e,{weight:t=1})=>e+t,0),n=0;for(let a of e)if((n+=a.weight??1)>=t)return a.content;return e[0].content}var y=n(232309),b=n(686589),v=n(883216),C=n(726710),w=n(219292),T=n(118567),S=n(263086),x=n(326186),k=n(504440),N=n(966712),I=n(384775);function A(){let e=(0,u.wA)(),t=(0,l.md)(x.Tm),n=(0,a.useCallback)(()=>{t||(0,x.mD)(e,{source:"rewrite_action"}),(0,I.jD)(e,null,{forceClose:!1})},[e,t]);return a.createElement(k.$n,{variant:"secondary",onClick:n},(0,o.tx)("ai_text_tools.rewrite.tone.label"))}var O=n(573591);let L="rewrite-view",D=(0,l.E3)("rewrite_this_prompt_history",[]);function R(){let e=function(e){let[t,n]=(0,a.useState)(E(e));return(0,h.h)(()=>{n(E(e))}),t}([{content:(0,o.t)("ai_text_tools.rewrite.placeholder.marketing")},{content:(0,o.t)("ai_text_tools.rewrite.placeholder.shorter")},{content:(0,o.t)("ai_text_tools.rewrite.placeholder.bullet_points")},{content:(0,o.t)("ai_text_tools.rewrite.placeholder.email_boss")},{content:(0,o.t)("ai_text_tools.rewrite.placeholder.sing_songy")},{content:(0,o.t)("ai_text_tools.rewrite.placeholder.softer_tone")},{content:(0,o.t)("ai_text_tools.rewrite.placeholder.pop_song"),weight:.001}]),[t,n]=a.useState(""),l=d.JT.REWRITE_TEXT,{promptHistory:k,addPromptToHistory:I}=(0,f.a)(D,e=>e),{shiftAllNodesOutOfSlideMargins:R,resetShiftedNodes:M,resetNodePositionMap:P}=(0,S.eX)(L),{slidesTextResizeCallback:F}=(0,S.DX)(d.JT.REWRITE_TEXT,L),{saveOriginalNodeInfos:B,resetOriginalNodeInfos:U,resetAllNodesToOriginalTextStyles:G}=(0,x.cR)(L),K=(0,a.useCallback)(e=>{let{eventType:t,node:n}=e;switch(t){case"BEFORE_STREAM_START":R();return;case"AFTER_STREAM_CHUNK":F(n);return}},[F,R]),{longRunningAction:V,onRun:H,cancel:z,restoreSelection:W,resetText:j,lastRun:$}=(0,O.Hd)({makeCortexRequest:({texts:e,parameters:t,targetMap:n,authInfo:a})=>(B(n.values()),s.Ay.shared.adjustText({texts:e,action:{type:"REWRITE_TEXT",prompt:t.prompt},jsonMode:e.length>1},a)),featureType:l,allowEmptyTextNodes:!0,onNodeStreamEvent:K}),{state:q,aiTrackingContext:Y,tasks:X}=V,{close:J}=(0,g.cq)(),Z=function(){let e=(0,N.kc)().figjam_ai_piper_action_transitions;return(0,x.Ne)()&&e}(),Q=function(e){let t=(0,u.d4)(t=>(0,m.Yh)(t.mirror.appModel,e)),[n,r]=a.useState(t),i=0;return t&&n?i=2:n&&!t&&(i=1),(0,a.useMemo)(()=>({state:i,confirmInitialSelection:()=>r(!0)}),[i])}(d.JT.REWRITE_TEXT),ee=X.length,et=X.filter(e=>e.state===_.z8.FAILED).length;switch(q){case _.qy.RUNNING:return a.createElement(T.F,{onCancel:()=>{z(),J()},aiTrackingContext:Y},(0,o.tx)("ai.rewriting"));case _.qy.INITIAL:switch(Q.state){case p.NEEDS_INITIAL_SELECTION:case p.SELECTION_LOST:return a.createElement(v.A,{action:d.JT.REWRITE_TEXT,actionLabel:(0,o.tx)("fullscreen_actions.quick_actions.rewrite-this"),actionIcon:a.createElement(i.T,null),onPerform:Q.confirmInitialSelection,aiTrackingContext:Y,getCustomDisabledTextFromSelectedNodes:e=>(0,O.bu)(e,{allowEmptyText:!0}),instructionAction:{type:"learn_more",url:d.fN}},(0,o.tx)("ai_text_tools.selection_instruction"));case p.SELECTION_OK:return a.createElement(w.A,{prompt:t,onChangePrompt:n,onRun:()=>{P(),I(t),H({prompt:t})},suggestion:e,submitLabel:(0,o.tx)("ai.rewrite"),extraFooter:Z&&a.createElement(A,null),promptHistory:k,recordingKey:"rewriteText.prompt",suggestionPills:[{label:(0,o.t)("ai_text_tools.rewrite.shorter.label"),prompt:(0,o.t)("ai_text_tools.rewrite.shorter.prompt")},{label:(0,o.t)("ai_text_tools.rewrite.casual.label"),prompt:(0,o.t)("ai_text_tools.rewrite.casual.prompt")},{label:(0,o.t)("ai_text_tools.rewrite.replace.label"),prompt:(0,o.t)("ai_text_tools.rewrite.replace.prompt")}],aiTrackingContext:Y,featureNameForInstrumentation:"rewrite_text"});default:(0,r.assertNever)(Q.state)}case _.qy.ERROR:let en;let{error:ea}=V,er=null,ei=[{type:b.f.TRY_AGAIN,callback:()=>{H({prompt:t})}}];return ea instanceof O.Vz&&(en=(0,o.tx)("ai_text_tools.content_length_exceeded"),ei=[]),ea instanceof O.Jd&&(en=(0,o.tx)("ai_text_tools.missing_fonts"),ei=[]),ee>0&&et>0&&et<ee&&(er=(0,o.tx)("ai_text_tools.rewrite.couldnt_count",{failed:et,total:ee})),(0,c.sZ)(ea)===c.BQ.CONTENT_LENGTH_LIMIT&&(en=(0,o.tx)("ai_text_tools.content_length_exceeded")),a.createElement(b.E,{error:V.error,buttons:ei,aiTrackingContext:Y,customMessage:en,secondaryMessage:er});case _.qy.DONE:return a.createElement(C.O,{iterateOptions:[{type:C.i.UNDO,callback:()=>{j(),G(),M(),(0,_.B3)(d.JT.REWRITE_TEXT),U()}},{type:C.i.MAKE_CHANGES,callback:()=>{W(),P(),(0,_.B3)(d.JT.REWRITE_TEXT),U(),n("")}}],aiTrackingContext:{...Y,iteration_view_type:y.$J.SUCCESS_WITH_ITERATION},recordingKey:"rewriteText",targets:$?$.targets.map(e=>e.node.guid):void 0});case _.qy.CANCELLED:return null;default:(0,r.assertNever)(q)}}},573591:(e,t,n)=>{n.d(t,{Hd:()=>A,Jd:()=>N,Vz:()=>x,ay:()=>S,bu:()=>O,n4:()=>k,y_:()=>L});var a=n(411855),r=n(341092),i=n(675678),l=n(587670),o=n(86625),s=n(707458),c=n(38329),d=n(966712),u=n(374626),m=n(395900),p=n(776621),_=n(901536),g=n(939863),f=n(550273),h=n(988022),E=n(574724),y=n(677074),b=n(356390),v=n(222478),C=n(709731),w=n(719624),T=n(695426);class S extends Error{constructor(e){super(),this.message=e}}class x extends Error{constructor(){super(),this.reportToSentry=!1,this.name="TooManyTextLayersError",this.message="Too many text layers"}}class k extends Error{constructor(){super(),this.reportToSentry=!1,this.name="NoTextCharactersFoundError",this.type="no_text_characters_found"}}class N extends Error{constructor(){super(),this.reportToSentry=!1,this.name="MissingFontsError",this.message="Missing Fonts"}}let I=async({params:e,abortController:t,onTasksUpdate:n})=>{let a=new m.M4;a.start();let{state:u,makeCortexRequest:_,clientLifecycleId:g,featureType:f,excludeDigitsAndSpecialChar:w,onNodeStreamEvent:T,onError:I,onSuccess:A,editScopeLabel:O}=e,{targets:D,parameters:R}=u,M=c.D.getState(),P=M.openFile?.key,F={numLayers:D.length,numLayersAdjusted:0,numDeltasHallucinated:0,featureType:f};R&&"prompt"in R&&R.prompt&&"string"==typeof R.prompt&&(F.promptLength=R.prompt.length),R&&"language"in R&&R.language&&"string"==typeof R.language&&(F.language=R.language),(0,h.ds)("ai_text_tools_started",P,M,F);let B=e=>(I?.(e),e);if(D.length>100)throw B(new x);if(w&&0===D.length)throw B(new k);let U=[],G=new Map,K=[];for(let e of D){let t=(G.size+1).toString(),{node:n,effectiveText:a}=e;n.hasMissingFont?U.push({nodeGuid:e.node.guid,state:C.z8.FAILED,error:new N}):(K.push({id:t,text:a}),G.set(t,e),U.push({nodeGuid:e.node.guid,state:C.z8.INCOMPLETE}))}if(n&&n(U),0!==U.length&&U.every(e=>e.state===C.z8.FAILED&&e.error instanceof N))throw B(new N);let V=null;try{let e={...(0,y.Ay)(),clientLifecycleId:g};if(V=await _({texts:K,parameters:R,authInfo:e,jsonMode:!0,targetMap:G}),t.signal.aborted||!s.q.instance.getCurrentPage())return;let r=new E.c6(V),i=new Map,c=!0,u=(0,d.kc)().aip_text_undo_midstream_fix;for await(let{delta:e,id:d}of r){let r;if(t.signal.aborted)return;if(1===G.size)r=G.values().next().value;else{if(!d)throw B(new S("Missing ID in response from Cortex"));r=G.get(d)}if(F.timeToFirstToken=a.getElapsedTime(),!r){F.numDeltasHallucinated++;continue}if(!r.node.isAlive())continue;U=U.map(e=>e.nodeGuid===r.node.guid?{...e,state:C.z8.SUCCEEDED}:e),n&&n(U);let m=r.selectionRange?.start??0,p=r.selectionRange?.end??r.node.characters.length,_=r.node;i.has(r)||(o.l7.ai(O,()=>{_.spliceCharacters(m,p,"","BEFORE"),T?.({eventType:"BEFORE_STREAM_START",node:_})}),i.set(r,m));let g=i.get(r);o.l7.ai(O,()=>{if(e&&_){if(u&&function(e,t,n){return e.characters===t.effectiveText&&e.characters.length!==n}(_,r,g)){t.abort();return}_.spliceCharacters(g,g,e,"BEFORE"),i.set(r,g+e.length),F.numLayersAdjusted=i.size,T?.({eventType:"AFTER_STREAM_CHUNK",node:_}),r.selectionRange?s.q.instance.getCurrentPage()?.setSelectedTextRange(r.node.guid,r.selectionRange.start,g+e.length):1===D.length&&L(_.guid),u&&(c?(l.glU?.requestNextCommitMergeWithPrevious(l.zvt.AI_TEXT_MANIPULATION_START),c=!1):l.glU?.requestNextCommitMergeWithPrevious(l.zvt.AI_TEXT_MANIPULATION_DELTA),l.glU?.triggerActionEnum(l.rcl.COMMIT,{}))}})}u||b.Y5.triggerAction("commit");let m=U.filter(e=>e.state===C.z8.FAILED);if(m.length>0&&m[0].state===C.z8.FAILED)throw B(m[0].error);(0,h.ds)("ai_text_tools_complete",P,M,F),A?.(R)}catch(t){U=U.map(e=>e.state!==C.z8.SUCCEEDED?{...e,state:C.z8.FAILED,error:t}:e),n&&n(U);let e=t;throw f===v.JT.SLIDES_REWRITE_TEXT&&t instanceof r.G1&&(e=(0,y.Gx)(t)),"reportToSentry"in e&&!e.reportToSentry||((0,p.kF)("text_feature_type",F.featureType),(0,p.$D)(i.FigmaTeam.AI_PRODUCTIVITY,e,{extra:{...F,numberOfNodes:D.length}})),(0,h.ds)("ai_text_tools_failed",P,M,{...F,error:e}),B(e)}finally{F.timeToCompletion=a.getElapsedTime(),a.stop(),t.signal.aborted&&(0,h.ds)("ai_text_tools_cancelled",P,M,F),V?.cancel()}};function A({makeCortexRequest:e,featureType:t,allowEmptyTextNodes:n=!1,excludeDigitsAndSpecialChar:r=!1,onNodeStreamEvent:i,onError:l,onSuccess:c,editScopeLabel:d="adjust-text"}){let m=(0,C.RL)(t,I),{start:p,stop:_}=m,[g,h]=(0,a.useState)(null),[E,y]=(0,a.useState)(null),[,b]=(0,u.fp)(w.Q8);function v(){o.l7.ai(d,()=>{if(g){let e=s.q.instance.getCurrentPage();for(let{node:t,nodeText:n,selectionRange:a}of g.targets)if(t.isAlive()&&(t.spliceCharacters(0,t.characters.length,n,"BEFORE"),a)){let{start:n,end:r}=a;e?.setSelectedTextRange(t.guid,n,r)}e&&g.selection.length>1&&(e.directlySelectedNodes=g.selection)}})}return{resetText:v,restoreSelection:function(){let e=s.q.instance.getCurrentPage();e&&g&&g.selection.length>1&&(e.directlySelectedNodes=g.selection)},lastParameters:E,onRun:async function(a){let o={targets:(0,f.Ey)({allowEmpty:n,excludeDigitsAndSpecialChar:r}),parameters:a,selection:s.q.instance.getCurrentPage()?.directlySelectedNodes??[]};y(a),h(o),b(""),await p({state:o,makeCortexRequest:e,featureType:t,excludeDigitsAndSpecialChar:r,onNodeStreamEvent:i,onError:l,onSuccess:c,editScopeLabel:d})},cancel:function(){_(),v()},longRunningAction:m,lastRun:g}}function O(e,t){let{onlyAllowSingular:n,allowEmptyText:r}=t,i=t.instruction??(0,g.tx)("ai_text_tools.selection_instruction");if(n&&e&&(0===e.length||e.length>1||"TEXT"!==e[0].type))return i;let l=(0,f.Gc)(e,{allowEmpty:!0});if(0===l.length)return i;let o=l.reduce((e,t)=>e+t.characters.length,0);return(0!==o||r)&&o>4e4?a.createElement(T.B,{gap:8},a.createElement("span",{className:_.cx.textBodyMediumStrong.$},(0,g.tx)("ai_text_tools.select_fewer_characters")),a.createElement("span",{className:_.cx.textBodyMedium.colorTextSecondary.$},(0,g.tx)("ai_text_tools.selected_character_count",{currentCharacters:o.toLocaleString(),maxCharacters:4e4.toLocaleString()}))):i}function L(e){let t=s.q.instance.getCurrentPage(),n=t?.directlySelectedNodes[0]?.guid;t&&n===e&&t.setSelectionToSingleNode(e)}},547583:(e,t,n)=>{n.d(t,{p:()=>_,z:()=>f});var a=n(411855),r=n(188507),i=n(504440),l=n(572206),o=n(901536),s=n(939863),c=n(662275),d=n(237870),u=n(746806);function m({url:e}){return a.createElement("img",{src:e,className:o.cx.maxW100.$,alt:"debug"})}function p(e){let{obj:t,depth:n=0}=e;if(null===t)return a.createElement("span",{className:o.cx.colorTextTertiary.$},(0,s.t)("assistant.debug.null"));if("object"!=typeof t){if("string"==typeof t){if(t.startsWith("{")&&t.endsWith("}"))try{let e=JSON.parse(t);return a.createElement(p,{obj:e,depth:n})}catch(e){}return t.startsWith("data:image")?a.createElement(m,{url:t}):t.length>300&&t.match(/^([A-Za-z0-9+/]{4})*([A-Za-z0-9+/]{3}=|[A-Za-z0-9+/]{2}==)?$/)?a.createElement(m,{url:`data:image/jpeg;base64,${t}`}):a.createElement("span",{className:o.cx.colorTextSuccess.$},'"',t,'"')}return"number"==typeof t?a.createElement("span",{className:o.cx.colorTextSelected.$},t):"boolean"==typeof t?a.createElement("span",{className:o.cx.colorTextComponent.$},t.toString()):a.createElement("span",null,t)}let r=Array.isArray(t),i=r?["[","]"]:["{","}"],l=Object.entries(t);return a.createElement("div",{style:{marginLeft:`${8*n}px`}},i[0],l.length>0&&a.createElement("div",null,l.map(([e,t],i)=>a.createElement("div",{key:e},!r&&a.createElement("span",{className:o.cx.colorTextDanger.$},`"${e}:" `),a.createElement(p,{obj:t,depth:n+1}),i<l.length-1&&","))),i[1])}function _(e){let{data:t}=e;return a.createElement("pre",{contentEditable:!0,className:"font-mono text-sm select-all text-wrap"},a.createElement(p,{obj:t}))}function g({messages:e}){return a.createElement("div",null,a.createElement("div",{className:o.cx.px2.py2.$},a.createElement(_,{data:e})))}let f=(0,d.Ju)(function({messages:e}){let t=(0,r.wA)();return a.createElement(u.vx,{onClose:()=>{t(c.AS())},initialPosition:new l.Mi(0,0),initialWidth:400,allowResizeWidth:!0,autoflowHeight:!0,title:(0,s.t)("assistant.debug.title"),dragHeaderOnly:!0},a.createElement("div",{className:o.cx.px2.py2.$,style:{height:600,overflowX:"scroll",overflowY:"scroll"}},a.createElement(i.$n,{onClick:()=>{navigator.clipboard.writeText(JSON.stringify(e,void 0,2))}},(0,s.t)("assistant.debug.copy_all")),a.createElement(g,{messages:e})))},"AssistantDebugModal",d.ZU.YES)},294454:(e,t,n)=>{n.d(t,{A:()=>o});var a=n(879466),r=n(860601),i=n(939863),l=n(392592);function o(e,t,n){let o={text:(0,i.t)("first_draft.share_trace"),action:()=>{(0,a.j)(JSON.stringify(t,null,2),"trace.json")}},s=n?{primary:o,secondary:{text:(0,i.t)("first_draft.edit_prompt_fd"),action:()=>{n()}}}:o;e(l.F.enqueue({type:"FIRST_DRAFT_SHOW_TRACE",message:(0,i.t)("first_draft.share_trace_nudge_in_modal",{weirdOutput:(0,i.t)("first_draft.share_trace_nudge_weird_output")}),button:s,onDismiss:r.lQ}))}},113316:(e,t,n)=>{n.d(t,{h:()=>I});var a=n(411855),r=n(188507),i=n(520411),l=n(504440),o=n(343887),s=n(397863),c=n(139689),d=n(921211),u=n(939683),m=n(966712),p=n(915440),_=n(711525),g=n(99380),f=n(564577),h=n(493323),E=n(939863),y=n(67294),b=n(391119),v=n(738269),C=n(973149),w=n(177505),T=n(335682),S=n(611978),x=n(279453),k=n(335650);let N="recordings_entrypoint_window--secondaryText--nAp30";function I(e){let t=a.useContext(g.q5),n=(0,T.q5)(),r=n?.key,d=(0,i.U1)(),u=a.useMemo(()=>({fileKey:r??""}),[r]),f=(0,p.Rs)(x.bCq,u,{enabled:(0,m.kc)().async_spotlight}),{onClose:y}=e;a.useEffect(()=>{(0,m.kc)().async_spotlight&&n&&(0,k.Q3)(n,k.ZP.RECORDINGS_WINDOW_OPENED,k.uT.SIDEBAR)},[n]);let b=a.useCallback(()=>{(0,k.Q3)(n,k.ZP.NEW_RECORDING_BUTTON_CLICKED,k.uT.SIDEBAR),t.initializeRecordingMedia(),y()},[y,t,n]),v=a.useMemo(()=>{if("loaded"!==f.status||f.data.walkthroughMediaByFileKey.status!==_.tT.Loaded)return[];let e=f.data.walkthroughMediaByFileKey.data;return e?e.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()):[]},[f]);return(0,m.kc)().async_spotlight&&r?a.createElement("div",{className:"recordings_entrypoint_window--windowContainer--dPDES",ref:d},a.createElement("div",{className:"recordings_entrypoint_window--windowHeader--r4wNv"},a.createElement("div",{className:"recordings_entrypoint_window--windowTitle--eDl4P"},(0,E.tx)("recordings.recordings")),a.createElement("div",{className:"recordings_entrypoint_window--windowHeaderRight--QHvmv"},a.createElement("button",{onClick:b,className:"recordings_entrypoint_window--actionStrip--xnHRK"},a.createElement(s.x,null),(0,E.tx)("recordings.new_recording")),a.createElement(o.K,{onClick:e.onClose,"aria-label":(0,E.t)("general.close")},a.createElement(c.A,null)))),"loaded"!==f.status||f.data.walkthroughMediaByFileKey.status!==_.tT.Loaded?a.createElement("div",{className:"recordings_entrypoint_window--loadingSpinnerContainer--r2n7-"},a.createElement(h.kt,null)):0===v.length?a.createElement("div",{className:"recordings_entrypoint_window--emptyStateContainer--QYgG-"},a.createElement("div",{className:"recordings_entrypoint_window--emptyStateTextSection--fpTRu"},a.createElement("div",{className:"recordings_entrypoint_window--boldText---2EPl"},(0,E.tx)("recordings.no_recordings_yet")),a.createElement("div",{className:N},(0,E.tx)("recordings.make_context_setting_easier"))),a.createElement(l.$n,{onClick:b},(0,E.tx)("recordings.new_recording"))):a.createElement("div",{className:"recordings_entrypoint_window--recordingsContainer--5-i0S"},v.map(t=>a.createElement(A,{recording:t,onClose:e.onClose,key:t.id})))):null}function A(e){let t=(0,S._6)(),n=(0,r.wA)(),i=(0,T.q5)(),l=(0,w.dh)(),o=(0,r.d4)(e=>e.versionHistory),s=(0,u.U)(),c=a.useMemo(()=>new C.f0(Number.POSITIVE_INFINITY,!1,!1),[]),[m,p]=a.useState(!1),g=async()=>{if("fullscreen"===t.view){(0,k.J1)(i.key,i.editorType,k.NA.SIDEBAR,e.recording.id),l!==e.recording.meta.pageId&&await (0,w.$P)(e.recording.meta.pageId,l,o,n,!1,s);let a={...t,walkthroughRecordingId:e.recording.id};n((0,v.$T)(a)),e.onClose()}},h=e.recording.meta.lengthMs.status===_.tT.Loaded?e.recording.meta.lengthMs.data:null,x=h?c.format(h/1e3):null;return a.createElement("div",{className:"recordings_entrypoint_window--recordingRow--tEVbx",key:e.recording.id,onClick:g,tabIndex:0,role:"button",onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)},a.createElement("div",{className:"recordings_entrypoint_window--profileImg--ssJ-s"},m?a.createElement(d.K,{className:"recordings_entrypoint_window--hoverPlayIcon--UZ5-8"}):a.createElement(b.H,{user:e.recording.creator,size:y.Pf.LARGE})),a.createElement("div",{className:"recordings_entrypoint_window--recordingInfo--mvIzC"},a.createElement("div",{className:"recordings_entrypoint_window--recordingInfoTopRow--8eH08"},a.createElement("div",{className:"recordings_entrypoint_window--recordingTitle--GdNUG"},(0,E.tx)("recordings.month_day",{monthStr:e.recording.createdAt.toLocaleString("default",{month:"short"}),dayNumber:e.recording.createdAt.getDate()})," - ",e.recording.meta.title),a.createElement("div",{className:N},a.createElement(f.h1,{date:e.recording.createdAt,style:"short"}))),a.createElement("div",{className:N},x," \xb7 ",e.recording.creator.handle)))}},229831:(e,t,n)=>{n.d(t,{J:()=>eE});var a,r=n(411855),i=n(188507),l=n(587670),o=n(629019),s=n.n(o),c=n(939683),d=n(192437),u=n(493323),m=n(939863),p=n(74505),_=n(457630);function g(e){let t=e.mirror.sceneGraph,n=e.mirror.sceneGraphSelection;if(1!==Object.keys(n).length)return null;let a=t.get(Object.keys(n)[0]);return a&&"MEDIA"===a.type?a:null}var f=n(434192),h=n(77909);function E(e,t){let n={};return n.useValue=function(a){if(t&&n[a]&&t(a,n[a])&&delete n[a],!n[a]){let t=(0,h.v)();e(a).then(e=>t.resolve(e)).catch(e=>t.reject(e)),n[a]={deferred:t,created:Date.now()}}let{deferred:r}=n[a];switch(r.status){case"pending":throw r.promise;case"rejected":throw r.error;case"resolved":return r.result}},n}var y=n(356390),b=n(15859);let v=E(C);async function C(e){let t=await (0,f.doWithRetry)(()=>w(e),10,1e3);return await new Promise((n,a)=>{let r=new Image;r.crossOrigin="anonymous",r.addEventListener("load",n),r.addEventListener("error",t=>{a(t.type+" loading the image with hash "+e)}),r.src=t}),t}async function w(e){let t=(await (0,b.Mj)([e],await y.Y5.openFilePromise())).s3_urls[e];if(!t)throw Error("Couldn't resolve image URL from server");return t}var T=n(346124),S=n(75395),x=n(941670),k=n(538649),N=n(978488),I=n(43604),A=n(511617),O=n(157663),L=n(988652),D=n(374626),R=n(563706),M=n(913016),P=n(30090),F=n(46481),B=n(259927),U=n(335682),G=n(498606),K=n(794272),V=n(754168);let H=E(z,(a=(e,t)=>Date.now()-t.created>6e4,(e,t)=>!t.deferred.result&&a(e,t)));async function z(e){return await (0,f.doWithRetry)(()=>W(e),20,1e3)}async function W(e){let t=await j(e);if(!t)throw Error("Couldn't resolve video URL from server");return t}async function j(e){let t=await y.Y5.openFilePromise();if("figFile"!==t.type)throw Error("Unsupported file");try{let n=await V.S.getVideosDownload({fileKey:t.fileKey,hexHash:e});if(200!==n.status||n.data.error)throw Error("api error while resolving video");return n.data.meta.signed_url}catch(t){throw console.warn(`Couldn't download video with hash ${e}`),t}}let $=1/15;var q=n(70337);let Y="rich_media_overlay--loadingFallback---qUKd",X="rich_media_overlay--videoControlButton--syGqZ",J="rich_media_overlay--videoButtonIcon--13t7r",Z="rich_media_overlay--videoButtonMaximizedScale--8Hkj5",Q="rich_media_overlay--croppedClipPath--BeUH-";var ee=n(68710),et=n(10448),en=n(114843),ea=n(552601);let er={BUTTON_SHAPE_FILL:"#FFFFFF",BUTTON_BG_FILL:"#000000",BUTTON_STROKE_OPACITY:.2,BUTTON_BG_FILL_OPACITY:.7,BUTTON_BG_FILL_HOVER_OPACITY:.9};function ei(e){if(null==e||Number.isNaN(e))return"";let{seconds:t,minutes:n}=(0,M._d)(e);return`${n}:${String(t).padStart(2,"0")}`}function el(e,t){e&&(t?(e.play(),R.Ay.safari&&(e.currentTime=.1)):es(e)?e.pause():(R.Ay.safari&&e.currentTime>.1&&(e.currentTime-=.1),e.play()))}let eo=(0,r.memo)(({mediaHash:e,isMaximized:t,setIsMaximized:n})=>{let a=H.useValue(e),i=(0,c.am)(),l=(0,r.useRef)(null),[o,d,u,m]=function(){let[e,t]=r.useState(!1),n=r.useRef(null),a=()=>t(!0),i=()=>t(!1);return r.useEffect(()=>{let e=n.current;if(e)return e.addEventListener("mousemove",a),e.addEventListener("mouseleave",i),()=>{e.removeEventListener("mousemove",a),e.removeEventListener("mouseleave",i)}},[n.current]),[r.useCallback(e=>{if(null!==n.current){let e=n.current;e&&(e.removeEventListener("mousemove",a),e.removeEventListener("mouseleave",i))}if(n.current=e,null!==n.current){let e=n.current;e&&(e.addEventListener("mousemove",a),e.addEventListener("mouseleave",i))}},[]),n,e,t]}(),p=r.useRef(null),_=r.useRef(!1),g=(0,U.tS)()||"",f=(0,D.md)(q.v),[h,E]=(0,r.useState)(!1);return r.useEffect(()=>{f&&i("figjam_video_started_playing",{mediaHash:e})},[i,e,f]),r.useEffect(()=>{_.current||(_.current=!0,async function(){window.VIDEOJS_NO_DYNAMIC_STYLE=!0;let t=await (0,P.Fe)();if(p.current)return;let n=d.current;null!==n&&(n.style.height="100%",n.style.width="100%",n.style.display="flex",n.style.justifyContent="center",n.style.alignItems="center",p.current=t.videoJs(n,{muted:!1,controls:!1,controlBar:!1,bigPlayButton:!1,loadingSpinner:!1,errorDisplay:!1,textTrackSettings:!1,textTrackDisplay:!1,nativeTextTracks:!1},async()=>{try{let t=`/api/files/${g}/videos/${e}/manifest`;await (0,P.uz)(t,!0,p.current)}catch{p.current&&(O.k.warn("Reverting to fallback video source"),p.current.src({type:"video/mp4",src:a}))}}))}())},[g,e,d,a]),(0,r.useEffect)(()=>{i("figjam_video_selected",{mediaHash:e})},[i,e]),r.createElement("div",{className:"rich_media_overlay--videoContainer--oC3oc",ref:l},r.createElement("div",{className:s()("rich_media_overlay--clippedVideo--JljnC",t?"rich_media_overlay--noClipPath--ZooJK":Q)},r.createElement("video",{ref:o,crossOrigin:"anonymous",autoPlay:f&&!R.Ay.safari,className:s()("rich_media_overlay--video--O6uP2",t&&B.s4,t&&"rich_media_overlay--maximizedVideoBg--FUhbn"),onMouseUp:function(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()},controls:R.Ay.isIpad&&t,onClick:function(){t&&el(d.current,h)}})),r.createElement(ec,{videoRef:d,videoContainerRef:l,isMaximized:t,setIsMaximized:n,isVideoHovered:u,setIsVideoHovered:m,didAutoplayOnSelection:f,mediaHash:e,hasEnded:h,setHasEnded:E}))});function es(e){return!!e&&!e.ended&&!e.paused&&e.currentTime>0&&e.readyState>2}function ec({videoRef:e,isMaximized:t,setIsMaximized:n,isVideoHovered:a,videoContainerRef:i,setIsVideoHovered:l,didAutoplayOnSelection:o,mediaHash:d,hasEnded:m,setHasEnded:p}){let[f,h]=(0,r.useState)(0),E=(0,r.useRef)(!1),y=(0,r.useRef)(o),[b,v]=(0,r.useState)(null),[C,w]=(0,r.useState)(!1),[T,S]=(0,r.useState)(!1),x=(0,c.am)(),[k,N]=(0,L.M)(),[I,O]=(0,L.M)(),M=function(){let[e,t]=(0,r.useState)(!0),n=(0,K.R)(g),a=(0,_.qc)((0,_._X)({subscribeToUpdates_expensive:!1}));return(0,r.useEffect)(()=>{let e=0,r=n?.size;r&&(e=r.x*r.y),t(e/(a.height*a.width)<$)},[n?.size,a.height,a.width]),e}(),P=function(){let[e,t]=(0,r.useState)(!0),n=(0,K.R)(g),a=(0,_._X)({subscribeToUpdates_expensive:!1}),i=n?.size;return(0,r.useEffect)(()=>{i&&t(i.x*a.zoomScale<96||i.y*a.zoomScale<96)},[i,a.zoomScale]),e}(),F=(0,r.useRef)(!1),[U,G]=(0,D.fp)(q.H),{isVideoNodeHovered:V,pointerDownOnVideo:H}=U,z=(0,r.useRef)(!1),W=t&&(a||O),j=b||e.current?.currentTime,X=e.current?.duration,J=es(e.current),Z=(0,r.useRef)(void 0),ee=(0,r.useRef)(void 0);(0,r.useEffect)(()=>{let e=(R.Ay.isIpad?H:V)||N||W||!J||m||F.current;S(e),clearTimeout(Z?.current),e&&(Z.current=setTimeout(()=>{m||!J||N||F.current||(S(!1),l(!1),G({isVideoNodeHovered:!1,pointerDownOnVideo:!1}))},3e3))},[m,W,J,V,N,l,G,H]);let et=(0,r.useCallback)(()=>{h(e=>e+1)},[]);(0,r.useEffect)(()=>{if(!e.current||!i.current)return;function a(){et()}function r(){F.current=!1}function l(){F.current=!1,p(!1)}function o(){p(!1),et()}function s(){F.current=!0}function c(){n(!t)}function d(){C||p(!0),et()}let u=e.current,m=i.current;return u.addEventListener("playing",o),u.addEventListener("canplay",a),u.addEventListener("ended",d),u.addEventListener("timeupdate",a),u.addEventListener("seeking",s),u.addEventListener("seeked",l),u.addEventListener("stalled",r),m.addEventListener(A.R7.fullscreenChangeEventName,c),()=>{u?.removeEventListener("playing",o),u?.removeEventListener("canplay",a),u?.removeEventListener("ended",d),u?.removeEventListener("timeupdate",a),u?.removeEventListener("seeking",s),u?.removeEventListener("seeked",l),u?.removeEventListener("stalled",r),m?.removeEventListener(A.R7.fullscreenChangeEventName,c)}},[t,C,et,p,n,i,e]);let en=(0,r.useCallback)(()=>{e.current&&(!1===y.current&&(y.current=!0,x("figjam_video_started_playing",{mediaHash:d})),el(e.current,m),et())},[m,d,et,x,e]),ea=(0,r.useCallback)(()=>{e.current&&(E.current=es(e.current)||m,e.current.pause())},[m,e]),er=(0,r.useCallback)(()=>{e.current&&(E.current&&e.current.play(),ee.current&&(e.current.currentTime=ee.current),v(null),ee.current=void 0)},[e]),eo=(0,r.useCallback)(t=>{if(e.current){if(F.current){ee.current=t;return}e.current.currentTime=t}},[e]),ec=r.createElement(e_,{togglePlay:en,hasEnded:m,isPlaying:J,shouldShowVideoControls:T,isMaximized:t});return(!e.current||2>(e.current?.readyState||0))&&!z.current?r.createElement("div",{className:s()(Y,Q,"rich_media_overlay--videoLoadingState--bxjOn")},r.createElement(u.kt,{size:"large"})):(z.current=!0,R.Ay.isIpad&&t)?null:M?T&&!P?ec:null:r.createElement(r.Fragment,null,b?null:ec,r.createElement("div",{className:s()(B.Uu,"rich_media_overlay--videoControls--Zyzyj",!T&&"rich_media_overlay--videoControlsHidden--BM1Cp"),ref:I},r.createElement("div",{className:"rich_media_overlay--videoTime--nsc6o"},ei(j)," / ",ei(X)),r.createElement(ep,{currentTime:j||0,totalTime:X||0,onScrubStart:ea,onScrub:v,onScrubEnd:er,onVideoPositionUpdated:eo,hasEnded:m,isScrubbing:C,setIsScrubbing:w}),r.createElement("div",{className:"rich_media_overlay--videoRightControls--N0YPD"},r.createElement(ed,{isMaximized:t,toggleFullscreen:function(){if(t||document.fullscreenElement)A.R7.exitFullscreenFunc();else if(R.Ay.isIpad){let t=e.current;t&&t.webkitEnterFullscreen&&t.webkitEnterFullscreen()}else{let e=i.current;e&&A.R7.requestFullscreenFunc.call(e)}}}),r.createElement(eu,{rerender:et,videoRef:e,volumeHoverRef:k}))))}function ed({isMaximized:e,toggleFullscreen:t}){let n=e?r.createElement(x.p,{className:J}):r.createElement(k.O,{className:J});return r.createElement("div",null,r.createElement(S.E,{onClick:t,className:X,htmlAttributes:{"data-tooltip":e?(0,m.t)("whiteboard.video.minimize_tooltip"):(0,m.t)("whiteboard.video.fullscreen_tooltip"),"data-tooltip-type":G.Ib.TEXT}},r.createElement("span",{"aria-hidden":!0},r.createElement(F.U,{svg:e?ea.A:en.A},n))))}function eu({rerender:e,videoRef:t,volumeHoverRef:n}){let[a,i]=(0,r.useState)(!1),l=(0,r.useRef)(1),[o,c]=(0,r.useState)(t.current?.volume||1),d=0===o,u=a&&!R.Ay.isIpad,p=(0,r.useCallback)(()=>{t.current&&(t.current.muted?(t.current.muted=!1,t.current.volume=l.current,c(l.current)):(t.current.volume>0&&(l.current=t.current.volume),t.current.muted=!0,c(0)),e())},[e,t]),_=d?r.createElement(N.P,{className:J}):r.createElement(I.L,{className:J});return r.createElement("div",{ref:n},r.createElement(S.E,{onClick:p,className:s()(X,"rich_media_overlay--lastVideoControl--pU-xF",u&&"rich_media_overlay--selectedVolumeControlButton--IR-FO"),htmlAttributes:{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),"data-tooltip":d?(0,m.t)("whiteboard.video.unmute_tooltip"):(0,m.t)("whiteboard.video.mute_tooltip"),"data-tooltip-type":G.Ib.TEXT}},r.createElement("span",{"aria-hidden":!0},r.createElement(F.U,{svg:d?et.A:ee.A},_))),u?r.createElement(em,{volume:o,handleChange:e=>{let n=e.target.valueAsNumber;t.current&&(t.current.volume=n,t.current.muted=0===n),c(n)},setIsHovered:i}):null)}function em({handleChange:e,setIsHovered:t,volume:n}){let a=100*n,i=(0,r.useRef)(null);return r.createElement("div",{onMouseEnter:()=>t(!0),onMouseLeave:()=>t(!1),className:"rich_media_overlay--volumeContainer--Wb1Hq"},r.createElement("div",{className:"rich_media_overlay--volumeBox--qpdbu"},r.createElement("input",{className:s()("rich_media_overlay--volumeSliderInput--W1-jD",B.Dm,B.Uu),style:{background:`linear-gradient(to right,var(--active-slider-color) 0%,var(--active-slider-color) ${a}%,var(--inactive-slider-color) ${a}%,var(--inactive-slider-color) 100%)`},type:"range",min:0,max:1,step:.02,value:n,onChange:e,onKeyDown:function(e){e?.key==="Escape"&&t(!1)},onMouseUp:function(){i.current instanceof HTMLInputElement&&i.current.blur()},ref:i})))}function ep({currentTime:e,totalTime:t,hasEnded:n,onVideoPositionUpdated:a,onScrubStart:i,onScrub:l,onScrubEnd:o,isScrubbing:s,setIsScrubbing:c}){let[d,u]=(0,r.useState)(!1),m=(0,r.useRef)(null),p=(0,r.useRef)(null);(0,r.useEffect)(()=>{if(s&&p.current)return document.addEventListener("pointermove",e),document.addEventListener("pointerup",n),()=>{document.removeEventListener("pointermove",e),document.removeEventListener("pointerup",n)};function e(e){if(!p.current)return;let n=e.clientX,{minX:r,maxX:i}=p.current,o=(0,T.clamp)(0,(n-r)/(i-r)*t,t);p.current.newTime=o,l(o),a(p.current.newTime)}function n(){p.current&&(a(p.current.newTime),c(!1),o(),p.current=null,document.activeElement instanceof HTMLElement&&document.activeElement.blur())}},[s,l,o,a,c,t]);let _=Math.min(e/t*100,100),g=_>0?8:0;return R.Ay.safari&&n&&(_=100),r.createElement("div",{className:"rich_media_overlay--videoTimeScrubberContainer--PnJdg",onPointerEnter:()=>u(!0),onPointerLeave:()=>u(!1)},r.createElement("div",{role:"progressbar",tabIndex:0,className:"rich_media_overlay--videoTimeScrubber--9PES-",onPointerDown:e=>{if(!m.current)return;e.stopPropagation(),c(!0),i();let n=m.current.getBoundingClientRect(),r=n.x,l=n.x+n.width,o=e.clientX,s=(0,T.clamp)(0,(o-r)/(l-r)*t,t);a(s),p.current={minX:r,maxX:l,originX:e.clientX,newTime:s}}},r.createElement("div",{className:"rich_media_overlay--videoTimeScrubberBackground--6Aulh",ref:m}),r.createElement("div",{className:"rich_media_overlay--videoTimeScrubberProgress--73GkN",style:{width:`${_}%`}}),(d||s)&&r.createElement("div",{className:"rich_media_overlay--videoTimeScrubberNub--9iFdo",style:{left:`calc(${_}% - ${g}px)`},onPointerDown:t=>{if(!m.current)return;t.stopPropagation(),c(!0),i();let n=m.current.getBoundingClientRect();p.current={minX:n.x,maxX:n.x+n.width,originX:t.clientX,newTime:e}},role:"button",tabIndex:0})))}function e_({shouldShowVideoControls:e,togglePlay:t,hasEnded:n,isPlaying:a,isMaximized:i}){let[l,o]=(0,L.M)(),c=o?er.BUTTON_BG_FILL_HOVER_OPACITY:er.BUTTON_BG_FILL_OPACITY;return r.createElement("button",{ref:l,className:s()(B.Uu,"rich_media_overlay--videoButton--WB1tD",!e&&"rich_media_overlay--videoButtonHidden--7x6yl"),onPointerDown:function(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),t()}},r.createElement(n?eg:a?eh:ef,{fillOpacityForBackground:c,isMaximized:i}))}function eg({fillOpacityForBackground:e,isMaximized:t}){return r.createElement("svg",{className:s()(t&&Z),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("path",{d:"M48 24C48 37.2548 37.2548 48 24 48C10.7452 48 0 37.2548 0 24C0 10.7452 10.7452 0 24 0C37.2548 0 48 10.7452 48 24Z",fill:er.BUTTON_BG_FILL,fillOpacity:e}),r.createElement("path",{d:"M34 24C34 18.4772 29.7175 14 24.4348 14C20.5763 14 17.2515 16.3884 15.7391 19.8282V14H14V22.1818H21.8261V20.3636H17.4222C18.7028 17.6696 21.362 15.8182 24.4348 15.8182C28.757 15.8182 32.2609 19.4813 32.2609 24C32.2609 28.5187 28.757 32.1818 24.4348 32.1818C21.362 32.1818 18.7028 30.3304 17.4222 27.6364H15.5216C16.9131 31.3612 20.3792 34 24.4348 34C29.7175 34 34 29.5228 34 24Z",fill:er.BUTTON_SHAPE_FILL}),r.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:er.BUTTON_BG_FILL,strokeOpacity:er.BUTTON_STROKE_OPACITY}))}function ef({fillOpacityForBackground:e,isMaximized:t}){return r.createElement("svg",{className:s()(t&&Z),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{clipPath:"url(#clip0_403_4259)"},r.createElement("rect",{width:"48",height:"48",rx:"24",fill:er.BUTTON_BG_FILL,fillOpacity:e}),r.createElement("path",{d:"M19 34V14L35 24L19 34Z",fill:er.BUTTON_SHAPE_FILL})),r.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:er.BUTTON_BG_FILL,strokeOpacity:er.BUTTON_STROKE_OPACITY}),r.createElement("defs",null,r.createElement("clipPath",{id:"clip0_403_4259"},r.createElement("rect",{width:"48",height:"48",rx:"24",fill:er.BUTTON_BG_FILL}))))}function eh({fillOpacityForBackground:e,isMaximized:t}){return r.createElement("svg",{className:s()(t&&Z),width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{clipPath:"url(#clip0_1_16)"},r.createElement("rect",{width:"48",height:"48",rx:"24",fill:er.BUTTON_BG_FILL,fillOpacity:e}),r.createElement("path",{d:"M15 15H21V33H15V15Z",fill:er.BUTTON_SHAPE_FILL}),r.createElement("path",{d:"M27 15H33V33H27V15Z",fill:er.BUTTON_SHAPE_FILL})),r.createElement("rect",{x:"0.5",y:"0.5",width:"47",height:"47",rx:"23.5",stroke:er.BUTTON_BG_FILL,strokeOpacity:er.BUTTON_STROKE_OPACITY}),r.createElement("defs",null,r.createElement("clipPath",{id:"clip0_1_16"},r.createElement("rect",{width:"48",height:"48",rx:"24",fill:er.BUTTON_BG_FILL}))))}let eE=r.memo(function(){let e=(0,i.d4)(g);return e&&e.richMediaInfo&&r.createElement(ey,{key:e.richMediaInfo.mediaHash,nodeGuid:e.guid,mediaHash:e.richMediaInfo.mediaHash,mediaType:e.richMediaInfo.richMediaType})}),ey=r.memo(function(e){let{nodeGuid:t,mediaHash:n,mediaType:a}=e,i=r.useRef(null),l=r.useRef(null),o=(0,_._X)({subscribeToUpdates_expensive:!0}),[c,u]=r.useState(!1);return r.useEffect(()=>{let e=(0,p.EE)("rich-media",[t],e=>{l.current=e.position,ew(i,o,l,c)});return l.current=e.currentNodePosition[t]?.position||null,ew(i,o,l,c),()=>{(0,p.lB)("rich-media")}},[t,o,c]),r.createElement(r.Fragment,null,r.createElement("div",{ref:i,className:s()("rich_media_overlay--richMediaOverlay--G9rnR",{"rich_media_overlay--maximizedMediaPositioner--vewL5":c})},r.createElement(d.tH,{fallback:r.createElement(ev,{mediaType:a,mediaHash:n}),boundaryKey:"Video"},r.createElement(r.Suspense,{fallback:r.createElement(eb,null)},"ANIMATED_IMAGE"===a&&r.createElement(eC,{mediaHash:n}),"VIDEO"===a&&r.createElement(eo,{mediaHash:n,setIsMaximized:u,isMaximized:c})))))});function eb(){return r.createElement("div",{className:s()(Y,Q)},r.createElement(u.kt,{size:"large"}))}function ev({mediaHash:e,mediaType:t}){let n=(0,m.tx)("whiteboard.gif.failed_to_load");return"VIDEO"===t&&(n=(0,m.tx)("whiteboard.video.failed_to_load"),l.tHB.isVideoBeingUploaded(e)&&(n=(0,m.tx)("whiteboard.video.still_uploading"))),r.createElement("div",{className:s()(Y,Q)},r.createElement("div",{className:"rich_media_overlay--errorText--upGwm text--fontNeg16--JtecD text--_fontBase--QdLsd text--_negText--j9g-L"},n))}function eC({mediaHash:e}){let t=v.useValue(e),n=(0,c.am)();return r.useEffect(()=>{n("figjam_gif_started_playing")},[n]),r.createElement("img",{crossOrigin:"anonymous",style:{height:"100%",backgroundColor:"white",width:"100%"},src:t,alt:"",className:Q})}function ew(e,t,n,a){if(!e.current||!t||!n.current)return;let r=e.current;if(a)r.style.position="fixed",r.style.height="auto",r.style.width="auto",r.style.transform="none",r.style.pointerEvents="all";else{let e=n.current,a=(0,_.Yb)(t,e);r.style.height=`${a.height}px`,r.style.width=`${a.width}px`,r.style.transform=`translate(${a.x+t.x}px, ${a.y+t.y}px) rotate(${e.angle}deg)`,r.style.transformOrigin="top left"}}},206315:(e,t,n)=>{n.d(t,{j:()=>w});var a=n(411855),r=n(188507),i=n(39108),l=n(629019),o=n.n(l),s=n(153234),c=n(939863),d=n(103907),u=n(226055),m=n(728325),p=n(356390),_=n(779709),g=n(335682),f=n(498606),h=n(279145),E=n(233890),y=n(368702),b=n(507786),v=n(334290),C=n(157147);function w(){let e=(0,u.GS)(),t=s.Pt("toolbarView",C.ec.recordingKey);return e?a.createElement(T,{recordingKey:t}):a.createElement(v.jX,{recordingKey:t})}function T({recordingKey:e}){let t=(0,a.useRef)(null),n=(0,g.q5)(),l=(0,r.d4)(e=>(0,h.Yh)(e.mirror.appModel,C.ec.action)&&n),s=(0,r.d4)(e=>e.mirror.appModel.currentTool===C.ec.tool),u=(0,d.n6)(),v=_.z4.getIsExtension();(0,a.useEffect)(()=>{!s&&t.current&&t.current===document.activeElement&&E.F2.focusCustomCanvasFocusElement()},[s,t]),(0,a.useEffect)(()=>{if(l&&s){let e=!0;return(0,y.W)("right",()=>{e&&p.Y5.triggerAction("set-tool-default")}),()=>{e=!1}}},[l,s]);let w=!v&&u>0;return a.createElement(b.Z,{tooltip:{type:f.Ib.LOOKUP,key:C.ec.action,ariaLabel:(0,c.t)(w?"fullscreen.accessibility.view_comments_with_unreads":"fullscreen.accessibility.view_comments")},isActive:s,onClick:function(e){if(!l)return;let n=e.nativeEvent instanceof KeyboardEvent;s?(p.Y5.triggerAction("set-tool-default"),n&&t.current?.focus()):m.VU.get(C.ec.action,"toolbar")(e)},recordingKey:e,onboardingKey:C.ec.onboardingKey,disabled:!l,dataTestId:C.ec.action,ref:t},a.createElement("div",{className:o()("figjam_comments_toolbar_item--iconContainer--4S5T1",{"figjam_comments_toolbar_item--withUnreadIndicator--JLSN4":w})},a.createElement("div",{className:"figjam_comments_toolbar_item--iconMask--a0fae"},a.createElement(i.f,null))))}},363926:(e,t,n)=>{n.d(t,{P:()=>p});var a=n(411855),r=n(629019),i=n.n(r),l=n(522739),o=n(163023),s=n(672517),c=n(516398),d=n(498606),u=n(136297);let m=(0,a.memo)(function(e){let{tooltipText:t,isActive:n,onClick:r,recordingKey:s,addLeftMargin:m,dataElementTarget:p,onboardingKey:_,disabled:g,dataTestId:f}=e,h="text"in e&&!!e.text,E=i()((0,u.M)(!g,n),{"figjam_toolbar_item_ui2--toolButtonWithText--MYCBd":h,"figjam_toolbar_item_ui2--toolButtonContainer--oJdfs":!0,"figjam_toolbar_item_ui2--toolButtonContainerWithMargin--EaCDo":m});return a.createElement(l.GG,{className:i()(E,"figjam_toolbar_item_ui2--iconButton--v3qiH toolbar_view--iconButton--1MUm6"),"data-tooltip-type":d.Ib.TEXT,"data-testid":f,"data-tooltip":t,"data-element-target":p,onKeyDown:e=>(0,c.hx)({e,onClickHandler:r}),onClick:r,recordingKey:s,tabIndex:0,"aria-label":t,"aria-pressed":n,"data-fullscreen-intercept":!0,"data-onboarding-key":_,disabled:g},"icon"in e&&a.createElement(o.B,{svg:e.icon}),h&&a.createElement("div",null,e.text),"children"in e&&a.createElement(a.Fragment,null,e.children))}),p=(0,s.tf)(m)},549166:(e,t,n)=>{n.d(t,{Cv:()=>eh,Lx:()=>ef,cU:()=>ex,v7:()=>ew});var a=n(411855),r=n(188507),i=n(782683),l=n(139689),o=n(587670),s=n(629019),c=n.n(s),d=n(126049),u=n(91408),m=n(517333),p=n(737947),_=n(939683),g=n(358145),f=n(966712),h=n(374626),E=n(498750),y=n(438741),b=n(489604),v=n(554322),C=n(768137),w=n(946689),T=n(452441),S=n(355819),x=n(46481),k=n(901536),N=n(939863),I=n(50663),A=n(738269),O=n(507877),L=n(293017),D=n(931828),R=n(138369),M=n(617524),P=n(798099),F=n(809831),B=n(198371),U=n(226055),G=n(516398),K=n(369870),V=n(85098),H=n(335682),z=n(754209),W=n(396462),j=n(94500),$=n(416822),q=n(571232),Y=n(338400),X=n(239671),J=n(498606),Z=n(70699),Q=n(896528),ee=n(855466),et=n(298543),en=n(371746),ea=n(662570),er=n(637820),ei=n(104295),el=n(766939),eo=n(648044),es=n(27947),ec=n(837746),ed=n(42296),eu=n(639685),em=n(630834);let ep="multiplayer-nickname-dropdown",e_=(0,K.ck)(),eg=(0,u.jz)(ec.rJv);function ef(e,t,n,a,r,i,l){if(!r)return;let s=e.sessionID,c=s===t,d=i&&i.sessionID===t;if(c&&d)l();else if(a){let t=r.observingSessionID===s||r.sessionID===s?-1:e.sessionID,a=-1!==r.observingSessionID,i=r.observingSessionID!==s&&r.sessionID!==s;a&&n((0,j._P)({name:"Prototype Observation Ended",params:{multiplayerObservingSessionID:r.observingSessionID,multiplayerSessionID:r.sessionID}})),i&&(n((0,j._P)({name:"Prototype Observation Started",params:{multiplayerObservingSessionID:s,multiplayerSessionID:r.sessionID}})),n(D.b({aware_of_observation_mode:!0}))),n(L.J4({...r,observingSessionID:t}))}else o.h3O.observeUser(s),r.observingSessionID!==s&&r.sessionID!==s&&n(D.b({aware_of_observation_mode:!0}))}function eh(e){let t=(0,H.q5)(),{user:n,multiplayer:i,dropdownShown:l}=e,o=(0,r.wA)(),s=(0,r.d4)(e=>"prototype"===e.selectedView.view),c=(0,z.dR)(),d=(0,z.Ww)(),u=(0,y.B4)(),m=a.useCallback(e=>{ef(e,d?.sessionID,o,s,i,c,u)},[d?.sessionID,o,s,i,c,u]),p=s?null:t;return n?a.createElement(a.Fragment,null,!e_&&p&&n&&a.createElement(er.k,{fileKey:p.key}),a.createElement(eE,{dropdownShown:l,multiplayer:i,user:n,editingFile:p,onUserClick:m})):a.createElement(a.Fragment,null,!e_&&p&&n&&a.createElement(er.k,{fileKey:p.key}),a.createElement(eT,{dropdownShown:l,multiplayer:i,user:n,editingFile:p,onUserClick:m}))}function eE(e){let{multiplayer:t,user:n,onUserClick:r,dropdownShown:i,editingFile:l}=e,o=(0,a.useMemo)(()=>t.allUsers.find(e=>e.sessionID===t.sessionID)||null,[t.allUsers,t.sessionID]);(0,a.useEffect)(()=>{},[t,n]);let s=(0,B.DG)(l?.key||"").enabled;return a.createElement("div",{className:ed.Wh},a.createElement(es.sK,null),o&&a.createElement(ew,{dropdownShown:i,multiplayer:t,currentUser:o,onUserClick:r}),l&&a.createElement(en.w,{user:n,editingFile:l,isFileInWorkshop:s}))}function ey(e){let{query:t,usersToSearch:n}=e,[r,i]=a.useState(n),l=a.useRef(!1),o=(0,_.am)(),s=a.useRef(!1),c=s.current,u=a.useCallback(async e=>{if(""===e)i(n);else{l.current=!1;let t=await (0,eo.n)(e,n);l.current||(i(t.map(e=>e.item)),c||(o("Multiplayer Tools User Search",{otherUserSessionsCount:n.length}),s.current=!0))}},[c,o,n]),m=(0,d.A)(u,200);return a.useEffect(()=>(m(t),()=>{m.cancel(),l.current=!0}),[m,t,n]),{searchResults:r}}let eb=(0,a.forwardRef)(function(e,t){let{query:n,setQuery:r}=e,o=(0,g.ZC)(n),s=a.useRef(null),[d,u]=a.useState(!1),m=(0,U.GS)();return(a.useEffect(()=>{s.current&&n!==o&&(s.current.scrollWidth>s.current.clientWidth?u(!0):u(!1))},[o,n]),m)?a.createElement("div",{ref:t,className:ed.MT},a.createElement("div",{className:ed.qc},a.createElement(x.U,{svg:eu.A,"aria-label":(0,N.t)("fullscreen.accessibility.search_icon")},a.createElement(i.h,null))),a.createElement(T.L,{ref:s,placeholder:(0,N.t)("collaboration.spotlight.menu.search.placeholder"),className:c()({[ed.Rt]:!0,[ed.ro]:d}),value:n,onClick:P.dG,onChange:e=>{r(e.target.value),(0,P.dG)(e)},onKeyDown:e=>{"Escape"===e.key&&(r(""),(0,P.dG)(e))},spellCheck:!1}),(0,f.kc)().file_view_history?a.createElement("div",{className:ed.WY},!!n&&a.createElement("button",{className:ed.Vw,onClick:e=>{e.stopPropagation(),r("")},"aria-label":(0,N.t)("search.sidebar_search_clear")},a.createElement("div",{className:ed.i3},a.createElement(x.U,{svg:em.default},a.createElement(l.A,null))))):!!n&&a.createElement("button",{className:ed.hC,onClick:e=>{e.stopPropagation(),r("")},"aria-label":(0,N.t)("search.sidebar_search_clear")},a.createElement("div",{className:ed.i3},a.createElement(x.U,{svg:em.default},a.createElement(l.A,null))))):null});function ev(e){let{targetRect:t,arrowOffsetFromRectLeft:n,currentUser:i,peopleList:l,previousViewerList:o,previousViewerListRenderer:s,userListRenderer:d,onUserClick:u,onKeyDown:m}=e,p=(0,U.GS)(),_=(0,a.useRef)(null),g=(0,a.useRef)(null),[E,T]=(0,h.fp)(b.ah),[x,O]=(0,h.fp)(b.Dv),[L,D]=a.useState(p?310:220),R=(0,a.useRef)(null),M=(0,r.wA)(),P=(0,v.Av)(),F=Math.min(window.innerHeight-P-22,p?465:450);a.useLayoutEffect(()=>{_.current&&g.current&&D(F-_.current.offsetHeight-g.current.offsetHeight)},[p,F]);let B=(0,a.useCallback)(()=>{T(!0)},[T]),{start:G,cancel:K}=(0,W.Z)(B),V=(0,a.useCallback)(()=>{K(),T(!1)},[K,T]),H=(0,y.Vi)(),j=(0,a.useCallback)(()=>{H(),V(),O(!0),M(A.oB())},[V,M,O,H]),$=(0,y.B4)(),q=(0,a.useCallback)(()=>{$(),M(A.oB())},[M,$]),Y=(0,z.dR)(),X=Y&&e.currentUser.sessionID===Y.sessionID?a.createElement(C.pz,{onClick:q,className:ed.BK},(0,N.tx)("collaboration.spotlight.button.stop")):a.createElement(w.$$,{onClick:j,className:ed.BK,onMouseOver:()=>{G(300)},onMouseLeave:V},(0,N.tx)("collaboration.spotlight.tooltip.spotlight_me")),J=(0,f.kc)().file_view_history&&s&&o&&o.length>0,Q=p&&l.length+(J?o.length:0)>10,[ee,en]=a.useState(""),{searchResults:ea}=ey({query:ee,usersToSearch:l}),{searchResults:ei}=ey({query:ee,usersToSearch:(0,a.useMemo)(()=>(0,f.kc)().file_view_history&&o?o:[],[o])}),el=a.createElement(a.Fragment,null,a.createElement("div",{ref:_,className:ed.az},a.createElement(Z.Q,{user:i,isOverflow:!0,isCurrentUserHeaderRow:p}),a.createElement("div",{className:ed.Vr},X,a.createElement(er.L,null))),l.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:ed.me}),a.createElement("div",{className:ed.dn,ref:p?g:void 0},a.createElement(eb,{ref:p?void 0:g,query:ee,setQuery:en})),a.createElement(S.P,{width:eg-16,maxHeight:L,scrollBarAlways:!0},a.createElement(I.W,{autofocus:!0,label:(0,N.t)("fullscreen.toolbar.multiplayer.all_users"),renderer:d,onSelect:e=>{e.length&&(u(e[0]),M(A.oB()))},initiallyNotSelected:!0,customClassName:ed.cu},ea)))),eo=ea.length>0&&ei.length>0,es=ea.length>0||ei.length>0,ec=0===ea.length&&0===ei.length,eu=a.createElement(a.Fragment,null,a.createElement("div",{ref:_,className:ed.az},a.createElement(Z.Q,{user:i,isOverflow:!0,isCurrentUserHeaderRow:p}),a.createElement("div",{className:ed.Vr},X,a.createElement(er.L,null))),Q&&a.createElement(a.Fragment,null,a.createElement("div",{className:ed.me}),a.createElement("div",{className:(0,f.kc)().file_view_history?ed.zK:ed.dn,ref:p?g:void 0},a.createElement(eb,{ref:p?void 0:g,query:ee,setQuery:en}))),""!==ee&&ec&&a.createElement(a.Fragment,null,a.createElement("div",{className:ed.me}),a.createElement("div",{className:`${ed.hg} ${k.cx.mb8.$}`},(0,N.tx)("fullscreen.toolbar.multiplayer.no_user_found"))),es&&a.createElement(a.Fragment,null,a.createElement("div",{className:ed.me}),a.createElement(S.P,{width:eg-16,maxHeight:L,scrollBarAlways:!0,ref:R},eo&&a.createElement("div",{className:`${ed.hg}`},(0,N.tx)("fullscreen.toolbar.multiplayer.currently_viewing")),ea.length>0&&a.createElement(a.Fragment,null,a.createElement(I.W,{label:(0,N.t)("fullscreen.toolbar.multiplayer.currently_viewing_users"),renderer:d,onSelect:e=>{e.length&&(u(e[0]),M(A.oB()))},initiallyNotSelected:!0,customClassName:ed.aK},ea)),s&&ei.length>0&&a.createElement(a.Fragment,null,a.createElement("div",{className:ed.hg},(0,N.tx)("fullscreen.toolbar.multiplayer.previously_viewed")),a.createElement(I.W,{label:(0,N.t)("fullscreen.toolbar.multiplayer.previously_viewed_users"),renderer:s,initiallyNotSelected:!0,customClassName:ed.aK},ei)),p&&a.createElement("div",{className:k.cx.pt12.$}))));return a.createElement(et.Cf,{className:c()(ed.qN,{[ed.QD]:(0,f.kc)().file_view_history}),removeUI3BorderPadding:p,targetRect:t,maxHeight:F,maxWidth:eg,lean:"center",arrowOffsetFromRectLeft:n,onKeyDown:m,showPoint:!p,disableDropdownScrollContainer:!0,propagateCloseClick:!0},(0,f.kc)().file_view_history?eu:el)}let eC="multiplayer-tools-dropdown";function ew(e){let{multiplayer:t,dropdownShown:n,currentUser:i,onUserClick:l}=e,s=(0,a.useRef)(null),d=(0,a.useRef)(null),u=(0,a.useRef)(null),g=(0,a.useRef)(null),v=(0,a.useRef)(null),C=(0,U.GS)(),w=(0,V.wF)(),T=(0,F.my)()===X.nT.Design,S=(0,R.Kf)({isDesign:T,isUnauth:!i.userID}),x=(0,M.EO)(),k=(0,r.wA)(),[I,L]=a.useState(!1),D=n?.type===eC,B=(0,a.useMemo)(()=>t.allUsers.filter(e=>e.sessionID!==i?.sessionID),[t.allUsers,i]),[K,H]=(0,h.fp)(b.ah);K&&!D&&H(!1);let W=s.current&&d.current?s.current.clientWidth-d.current.clientWidth:void 0,j=(0,V.Wq)(W),{users:q,overflowUsers:Y}=(0,V.uC)(B,null,!1,j),Q=(0,a.useMemo)(()=>{let e=[...q,...Y];return(0,f.kc)().file_view_history?Array.from(new Set(e.map(e=>e.userID))).map(t=>e.find(e=>e.userID===t)).filter(e=>e&&e.userID!==i.userID):e},[Y,q,i]),et=(0,a.useMemo)(()=>w?.filter(e=>!Q.some(t=>e.userID===t.userID)&&e.userID!==i.userID),[Q,w,i]),en=(0,_.am)(),ea=(0,a.useCallback)(e=>{if((0,P.dG)(e),!d.current)return;u.current=d.current.getBoundingClientRect();let t=n?.type===eC;k(O.gR({type:eC})),t||en("Multiplayer Tools Opened",{currentUserSessionID:i.sessionID,otherUserSessionsCount:Q.length})},[i.sessionID,k,n?.type,Q.length,en]),er=(0,z.dR)(),el=er&&er.sessionID!==i.sessionID?er:null,eo=(0,$.q)(),es=(0,y.tu)(),ec=(0,y.oJ)(),eu=a.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:n}){let r=(0,E.Gc)(()=>{let t=`/files${eo}/user/${e.userID}`;p.Ay.redirect(t,m.eD?void 0:"_blank")}),i=[],l=t.sessionNominatedByCurrentUser===e.sessionID;return t.presenterSessionID!==e.sessionID&&(l?i.push({text:(0,N.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,V.AD)(e)&&ec(e.sessionID,t)},key:"cancel-ask-to-spotlight"}):i.push({text:(0,N.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,V.AD)(e)&&es(e.sessionID,t)},key:"ask-to-spotlight"})),i.push({text:(0,N.tx)("avatar.tooltip.view_profile"),onClick:e=>{r(e)},key:"view-profile"}),a.createElement(Z.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:n,secondaryActions:i})}}),[t,eo,es,ec]),em=(0,f.kc)().file_view_history?{label:e=>e.name,id:e=>String(e.userID),renderDisplay(e,{hasCursor:t}){let n=(0,E.Gc)(()=>{let t=`/files${eo}/user/${e.userID}`;p.Ay.redirect(t,m.eD?void 0:"_blank")}),r=[{text:(0,N.tx)("avatar.tooltip.view_profile"),onClick:e=>{n(e)},key:"view-profile"}];return a.createElement(Z.Q,{key:e.userID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:t,secondaryActions:r})}}:void 0,ep=D||I,e_=Q.length+1,eg=a.createElement(ei.s,{featured:el,quickAccess:q,maxVisibleUsers:(C?V.A8:V.Q2)-1,onUserClick:l,totalUserCount:e_}),ef=a.createElement("button",{id:"multiplayer-toolbar-container","aria-label":(0,N.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"aria-expanded":null!=u.current&&n?.type===eC,"data-tooltip-type":J.Ib.TEXT,"data-tooltip":(0,N.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"data-tooltip-offset-x":d.current&&v.current?d.current.offsetWidth/2-v.current.offsetWidth/2-1.5:0,"data-tooltip-offset-y":d.current&&s.current?s.current.clientHeight/2-d.current.clientHeight/2:0,className:c()({[ed.XE]:!0,[ed.yx]:C&&Y.length>0,[ed.Ge]:C&&0===Y.length,[ed.wH]:D,[ed.yo]:!D&&I}),ref:d,onMouseOverCapture:e=>{L(!0),(0,P.dG)(e)},onMouseDownCapture:e=>{S()?x(o.rcl.FOLLOW_PRESENTER):ea(e)},onMouseLeave:()=>{L(!1)},onKeyDown:e=>{(0,G.hx)({e,onClickHandler:e=>{S()?x(o.rcl.FOLLOW_PRESENTER):ea(e)},onEscapeHandler:()=>{d?.current?.blur()}})},onClick:P.dG},a.createElement("span",{key:i.sessionID,ref:g,className:ed.r9},a.createElement(Z.Q,{user:i,key:i.sessionID,isOverflow:!1})),a.createElement("span",{"data-onboarding-key":"multiplayer-spotlight-nux-key",className:ed.rR},Y.length>0&&a.createElement("span",{className:c()({[ed.zk]:!0,[ed.r9]:!0,[ed.wH]:D,[ed.yo]:!D&&I}),style:{minWidth:e_<10?8:e_<100?15:22}},`${e_}`),a.createElement(ee.o,{divRef:v,disableHoverAnimation:C,className:c()({[ed.ai]:!0,[ed.r9]:!0,[ed.wH]:D,[ed.yo]:!D&&I}),showingDropdown:ep})));return a.createElement("span",{className:ed.EI,ref:s,"data-onboarding-key":"multiplayer-users-container"},C?a.createElement(a.Fragment,null,ef,eg):a.createElement(a.Fragment,null,eg,ef),n?.type===eC&&v.current&&a.createElement(ev,{targetRect:v.current.getBoundingClientRect(),arrowOffsetFromRectLeft:v.current?v.current.offsetWidth/2+1:0,currentUser:i,onUserClick:l,userListRenderer:eu,peopleList:Q,previousViewerList:et,previousViewerListRenderer:em,onKeyDown:e=>{"Tab"===e.key&&k(A.oB())}}))}function eT(e){let{multiplayer:t,user:n,onUserClick:r,dropdownShown:i,editingFile:l}=e,o=(0,a.useMemo)(()=>t.allUsers.find(e=>e.sessionID===t.sessionID)||null,[t.allUsers,t.sessionID]);(0,a.useEffect)(()=>{},[t,n]);let s=(0,B.DG)(l?.key||"").enabled;return a.createElement("div",{className:ed.Wh},a.createElement(es.sK,null),a.createElement(ex,{dropdownShown:i,multiplayer:t,currentUser:o,onUserClick:r,editingFile:l}),l&&a.createElement(en.w,{user:n,editingFile:l,isFileInWorkshop:s}))}let eS="multiplayer-users-dropdown";function ex(e){let{editingFile:t,multiplayer:n,dropdownShown:i,currentUser:l,onUserClick:o}=e,s=(0,a.useRef)(null),c=(0,a.useRef)(null),d=(0,a.useRef)(null),u=(0,r.wA)(),_=(0,a.useCallback)(e=>{(0,P.dG)(e),s.current&&(c.current=s.current.getBoundingClientRect(),u(O.gR({type:eS})))},[u]),g=i?.type,f=(0,a.useMemo)(()=>g===ep&&d.current?d.current.getBoundingClientRect():null,[g]),h=(0,ea.C$)(),b=(0,$.q)(),v=(0,Y.Lk)(),C=t?.key??null,{usersNotInCall:w}=(0,q.W5)(C,!0),T=n.allUsers,S=(0,V.D4)(),x=(0,r.d4)(e=>C&&e.voice.activeCall[C])||!1,{users:k,overflowUsers:L}=(0,V.uC)(v?w:T,l,x,S),D=a.useCallback(e=>0===e?"multiplayer-spotlight-nux-key":1===e?"multiplayer-observation-nux-key":"",[]),R=(0,y.tu)(),M=(0,y.oJ)(),F=a.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:t}){let r=(0,E.Gc)(()=>{let t=`/files${b}/user/${e.userID}`;p.Ay.redirect(t,m.eD?void 0:"_blank")}),i=[],l=n.sessionNominatedByCurrentUser===e.sessionID;return n.presenterSessionID!==e.sessionID&&(l?i.push({text:(0,N.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,V.AD)(e)&&M(e.sessionID,n)},key:"cancel-ask-to-spotlight"}):i.push({text:(0,N.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,V.AD)(e)&&R(e.sessionID,n)},key:"ask-to-spotlight"})),i.push({text:(0,N.tx)("avatar.tooltip.view_profile"),onClick:e=>{r(e)},key:"view-profile"}),a.createElement(Z.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:t,secondaryActions:i})}}),[n,b,R,M]);return a.createElement("span",{className:ed.VV,"data-onboarding-key":"multiplayer-avatars"},k.map((e,t)=>{let n=a.createElement(Z.Q,{user:e,onboardingKey:D(t),key:e.sessionID,isOverflow:!1,onUserClick:o});return e.sessionID===l?.sessionID?a.createElement("span",{key:e.sessionID,ref:d},n):n}),L.length>0&&a.createElement(a.Fragment,null,a.createElement("button",{id:"multiplayer-overflow-container","aria-label":(0,N.t)("fullscreen.toolbar.multiplayer.more_users"),"aria-expanded":null!=c.current&&i?.type===eS,className:ed.O5,ref:s,onMouseDown:_,onKeyDown:e=>{(0,G.hx)({e,onClickHandler:e=>{_(e)},onEscapeHandler:()=>{s?.current?.blur()}})},onClick:P.dG},a.createElement(Q.f,{className:ed.zb,text:`${L.length}`})),i?.type===eS&&s.current&&a.createElement(ea.WM,{targetRect:s.current.getBoundingClientRect(),onKeyDown:e=>{"Tab"===e.key&&u(A.oB())}},a.createElement(I.W,{autofocus:!0,label:"More multiplayer users",renderer:F,onSelect:e=>{e.length&&(o(e[0]),u(A.oB()))},customClassName:ed.cu},L))),i?.type===ep&&f&&a.createElement(et.Cf,{targetRect:f,maxHeight:h,className:ed.a1,propagateCloseClick:!0},a.createElement(el.M,null)))}},325621:(e,t,n)=>{n.d(t,{K:()=>p,m:()=>m});var a=n(411855),r=n(188507),i=n(126049),l=n(966712),o=n(860601),s=n(939863),c=n(279145),d=n(663237);function u({children:e}){let[t,n]=(0,a.useState)(null),r=(0,i.A)(()=>n(!0),500),l=t?o.lQ:r;return(0,a.useEffect)(l),t&&a.createElement("div",{className:d.Q,role:"status"},e)}function m(){let e=(0,r.d4)(e=>e.mirror.appModel.keyboardShortcuts),t=(0,c.c1)(e,"present-as-prototype");return(0,r.d4)(e=>e.screenreader.enabled)&&(0,l.kc)().a11y_design_dom_mirror?null:a.createElement(u,null,(0,s.tx)("fullscreen.toolbar.screenreader_notice",{shortcut:t}))}function p(){let e=(0,r.d4)(e=>e.mirror.appModel.keyboardShortcuts);if((0,r.d4)(e=>e.screenreader.enabled))return null;let t=(0,c.c1)(e,"open-shortcuts").replace("?",(0,s.t)("general.question_mark")),n=(0,c.c1)(e,"toggle-menu");return a.createElement(u,null,(0,s.tx)("fullscreen.toolbar.screenreader_notice_figjam",{shortcut:t,quickActionsShortcut:n}))}},882643:(e,t,n)=>{n.d(t,{IS:()=>T,MR:()=>w,$0:()=>S});var a=n(411855),r=n(187134),i=n(75395),l=n(921211),o=n(587670),s=n(629019),c=n.n(s),d=n(318812),u=n(498606),m=n(924430),p=n(188507),_=n(504440),g=n(897379),f=n(966712),h=n(901536),E=n(939863),y=n(392592),b=n(335682),v=n(157147),C=n(187409);let w="slides-presentation-flyout",T={type:v.ZU.FLYOUT,name:w,editModes:v.LB.concat([o.m1T.SLIDE_LAYOUT,o.m1T.PREVIEW]),nonEditorsAllowed:!0,loggedOutAllowed:!0,recordingKey:"slidesPresentationFlyout",onboardingKey:m.J5,flyoutDoNotStyleActiveItem:!0,largeDisplayMode:!0,children:[{action:"present-slides-audience-view",actionOnFlyoutItemClick:"set-slides-audience-view",recordingKey:"audienceViewPresent",featureFlags:["piper"],description:"present-slides-description",isActive:()=>!0},{action:"present-slides-presenter-view",actionOnFlyoutItemClick:"set-slides-presenter-view",recordingKey:"presenterViewPresent",featureFlags:["piper"],description:"present-slides-presenter-view-description"}],footer:a.createElement("div",{className:"slides_toolbar_items--copyPresentationLinkWrapper--wpxRz","data-onboarding-key":m.FM},a.createElement(function(){let e=(0,b.tS)(),t=(0,p.wA)(),n=a.useCallback(()=>{let n=`${(0,f.tl)().figma_url}/deck/${e}`;navigator.clipboard.writeText(n),t(y.F.enqueue({type:"copy-presentation-link-success",message:(0,E.t)("fullscreen_actions.copy-presentation-link-success")}))},[e,t]);return a.createElement(_.IK,{variant:"secondary",onClick:n},a.createElement("div",{className:h.cx.flex.flexRow.itemsCenter.justifyCenter.$},a.createElement(g.r,null),(0,E.tx)("fullscreen_actions.copy-presentation-link")))},null))};function S({item:e,defaultItem:t,dropdownKey:n,tooltipText:o,additionalDispatchData:s,recordingKey:m,disabled:p}){let{toggle:_,showing:g}=(0,d.BK)(n),f=a.useRef(null);return a.createElement("div",{ref:f,className:c()(C.fullHeightSidebarFlyout,{"slides_toolbar_items--flyoutDropdownShown--xV4l7":g,[C.disabledFullHeightSidebarFlyout]:p}),"data-tooltip-type":u.Ib.LOOKUP,"data-tooltip":t.action,"data-onboarding-key":e.onboardingKey,"data-testid":t.action},a.createElement(r.o,{eventListeners:["onClick"]},a.createElement(i.E,{actionOnPointerDown:!0,htmlAttributes:{"data-tooltip-type":u.Ib.TEXT,"data-tooltip":o,"data-testid":`${e.name}-button`},className:c()(C.fullHeightSidebarFlyoutButton,"slides_toolbar_items--flyoutButton--iXCH9",{"slides_toolbar_items--disabledFlyoutButton--o5Iom":p}),"aria-label":o,recordingKey:m,onClick:p?void 0:()=>{let e=f.current;_({data:{...s,targetRect:e.getBoundingClientRect()}})}},a.createElement(l.K,null))))}},334290:(e,t,n)=>{n.d(t,{rA:()=>ex,jX:()=>ek,kL:()=>eR,kF:()=>eD,n8:()=>eO,bu:()=>eN,QW:()=>eT,T0:()=>eM,xG:()=>eF,tO:()=>eU,w8:()=>eG,Es:()=>eP,U4:()=>eS,Kd:()=>eI});var a=n(411855),r=n(109388),i=n(188507),l=n(842700);function o(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m16.988 9.17.055.758.747.15A4.002 4.002 0 0 1 17 18H8a5 5 0 0 1-.34-9.989l.567-.038.257-.507a4.5 4.5 0 0 1 8.504 1.703M2 13a6 6 0 0 1 5.593-5.986 5.5 5.5 0 0 1 10.393 2.083A5.002 5.002 0 0 1 17 19H8a6 6 0 0 1-6-6m8.354-2.854a.5.5 0 0 0-.708.708l1.647 1.646-1.647 1.646a.5.5 0 0 0 .708.708L12 13.207l1.646 1.647a.5.5 0 0 0 .708-.708L12.707 12.5l1.647-1.646a.5.5 0 0 0-.708-.708L12 11.793z",clipRule:"evenodd"}))}var s=n(434228);function c(e){return(0,s.O)()?a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m17.043 9.928-.055-.759a4.5 4.5 0 0 0-8.504-1.703l-.257.507-.567.038A5 5 0 0 0 8 18h2a.5.5 0 1 1 0 1H8a6 6 0 0 1-.407-11.986 5.5 5.5 0 0 1 10.393 2.083A5.002 5.002 0 0 1 17 19h-3a.5.5 0 0 1 0-1h3a4 4 0 0 0 .79-7.922zm-4.69 1.219a.5.5 0 0 0-.707 0l-2.5 2.5a.5.5 0 1 0 .708.707l1.646-1.647V19a.5.5 0 1 0 1 0v-6.293l1.646 1.647a.5.5 0 0 0 .708-.707z",clipRule:"evenodd"})):a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m17.043 9.928-.055-.759a4.5 4.5 0 0 0-8.504-1.703l-.257.507-.567.038A5 5 0 0 0 8 18h1.5a.5.5 0 0 1 0 1H8a6 6 0 0 1-.407-11.986 5.5 5.5 0 0 1 10.393 2.083A5.002 5.002 0 0 1 17 19h-3.5a.5.5 0 0 1 0-1H17a4 4 0 0 0 .79-7.922zm-5.19 1.218a.5.5 0 0 0-.707 0l-3 3a.5.5 0 0 0 .708.708L11 12.707V19.5a.5.5 0 0 0 1 0v-6.793l2.146 2.147a.5.5 0 0 0 .708-.708z",clipRule:"evenodd"}))}var d=n(963757),u=n(587670),m=n(629019),p=n.n(m),_=n(776250),g=n(737947),f=n(939683),h=n(794272),E=n(915440),y=n(179940),b=n(153234),v=n(30637),C=n(743282),w=n(761870),T=n(195847),S=n(163023),x=n(46481),k=n(348425),N=n(715981),I=n(47506),A=n(939863),O=n(738269),L=n(662275),D=n(103907),R=n(483990),M=n(672517),P=n(138369),F=n(617524),B=n(809831),U=n(198371),G=n(226055),K=n(516398),V=n(728325),H=n(356390),z=n(949632),W=n(369870),j=n(779709),$=n(855418),q=n(318812),Y=n(335682),X=n(321487),J=n(100197),Z=n(239671),Q=n(498606),ee=n(279145),et=n(793670),en=n(887326),ea=n(233890),er=n(707458),ei=n(728587);function el(e){let t=(0,i.d4)(e=>e.mirror.appModel.pagesList),n=(0,i.d4)(e=>e.mirror.appModel.currentPage),r=(0,i.wA)();if(!t)return null;let l=async e=>{await er.q.instance.setCurrentPageFromNodeAsync(e.nodeId)},o=t.map(e=>({displayText:e.name,disabled:!1,isChecked:n===e.nodeId,nodeId:e.nodeId}));return a.createElement(ei.j,{dispatch:r,items:o,showPoint:!0,parentRect:e.dropdown.data.targetRect,onSelectItem:l,recordingKey:"pagesPicker"})}var eo=n(227795),es=n(27928),ec=n(601538),ed=n(368702),eu=n(157147),em=n(136297),ep=n(16112),e_=n(761070),eg=n(67029),ef=n(238472),eh=n(432616),eE=n(593701),ey=n(974397),eb=n(874804);let ev=[es.PH.type];function eC(e){return e.iconOverride?{svg:e.iconOverride,ui3Icon:a.createElement(l.V,null)}:e.type===eu.ZU.TOOL?(0,$.LW)(e.tool):e.type===eu.ZU.ACTION||e.type===eu.ZU.TEXT_BUTTON?(0,$.bs)(e.action):(console.error(`Couldn't find icon for item ${e}`),null)}function ew(e){return e.type===eu.ZU.ACTION?(0,$.GG)(e.action):null}class eT extends b.o6{constructor(){super(...arguments),this.onClick=b.cZ(this,"click",V.VU.get(this.props.action,"toolbar"))}render(){let{action:e,text:t}=this.props;return a.createElement("div",{className:ep.dM},a.createElement("div",{key:`toolbar-action-button-${e}`,className:`${ep.uX} ${this.props.className?this.props.className:""}`,onClick:this.props.onClick||this.onClick,"data-tooltip-type":Q.Ib.LOOKUP,"data-tooltip":e},t))}}function eS(e,t){return{ui2ClassName:p()(ep.gb,(0,em.M)(e,t),{[ep.YT]:t}),tooltipProps:{"data-tooltip-type":Q.Ib.TEXT,"data-tooltip":t?(0,A.t)("fullscreen.focus_mode.toggle_variants.exit"):(0,A.t)("fullscreen.focus_mode.toggle_variants.enter"),"data-tooltip-submenu-open":!1,"data-tooltip-shortcut-key":"focus-mode-component-set-toggle"}}}function ex(e){let{item:t,isEnabled:n,isActive:r,showBadge:i,recordingKey:l}=e,o=(0,G.GS)(),s=e=>{V.VU.get(t.action,"toolbar")(),o&&(e.stopPropagation(),e.preventDefault())};if(!n)return null;let c=eC(t),d=c?.svg,u=ew(t),m=c?.ui3Icon,_=`toolbar-action-${t.action}`,g=t.getDisplayAction?.(),f={"data-tooltip-type":Q.Ib.LOOKUP,"data-tooltip":g??t.action,"data-onboarding-key":t.onboardingKey,"data-tooltip-submenu-open":r},h="focus-mode-component-set-toggle"===t.action?eS(n,r):null,E=h?.tooltipProps,y=h?.ui2ClassName;return c?a.createElement("span",{className:ep.WT},o?a.createElement(eo.YW,{recordingKey:l,onMouseDown:n?s:void 0,"aria-label":(0,R.A)(t.action),selected:r,showTooltipWhenSelectedIsTrue:!0,dataTestId:_,...f,...E},m):d?a.createElement(k.t,{id:_,key:_,dataTestId:_,svg:d,fallbackSvg:u||void 0,recordingKey:l,className:y??p()(ep.gb,(0,em.M)(n,r)),onMouseDown:n?s:void 0,...f,...E}):a.createElement(a.Fragment,null),i&&a.createElement("div",{className:ep.q3},a.createElement(S.B,{svg:eh.A}))):a.createElement(a.Fragment,null)}eT.displayName="TextButton";let ek=a.memo(function({recordingKey:e}){let t=(0,q.Um)(),n=(0,Y.q5)(),r=(0,i.d4)(e=>(0,ee.Yh)(e.mirror.appModel,eu.ec.action)&&!!n),l=(0,i.d4)(e=>e.mirror.appModel.currentTool===eu.ec.tool),o=(0,D.n6)(),s=(0,i.d4)(e=>e.mirror.appModel.topLevelMode);return a.useEffect(()=>{if(r&&l){let e=!0;return(0,ed.W)("right",()=>{e&&H.Y5.triggerAction("set-tool-default")}),()=>{e=!1}}},[r,l]),a.createElement(eM,{key:`tool-button-${eu.ec.tool}`,dropdownShown:t,isEnabled:r,isActive:l,item:eu.ec,numUnreadComments:o,recordingKey:e,topLevelMode:s})});function eN(){return(0,J.J2)((0,z.d)().showTimeSlicingEditRenderingDot)?a.createElement("div",{className:ep.e1,"data-tooltip-type":Q.Ib.TEXT,"data-tooltip":(0,A.t)("time_sliced_edit_rendering.active"),"data-onboarding-key":"tsmer-status"},a.createElement(S.B,{className:ep.by,svg:ef.A})):null}function eI(){let[e,t]=a.useState(!1),[n,r]=a.useState(void 0),l=(0,i.d4)(e=>e.saveStatus?.hasUnsavedChanges),o=(0,i.d4)(e=>e.autosave.onboardingTooltipVisible),s=(0,E.Ym)()===E.Dj.CONNECTED||(0,v.PN)(),c=!!(0,Y.q5)();return a.useEffect(()=>(l||o||!s?void 0!==n||e||r(setTimeout(()=>{t(!0),r(void 0)},c?3e3:1e4)):(t(!1),clearTimeout(n),r(void 0)),()=>{clearTimeout(n)}),[l,o,e,n,s,c]),e}let eA=e=>{switch(e){case u.E63.SUPPRESS_UNSAVED_CHANGES_UI:case u.E63.NONE:return"";case u.E63.DISCONNECTED_AUTOSAVE_DISABLED:return(0,A.t)("unsaved_changes.disconnected.autosave_disabled");case u.E63.DISCONNECTED_SERVER_ISSUES:return(0,A.t)("unsaved_changes.disconnected.server_issues");case u.E63.DISCONNECTED_OTHER:return(0,A.t)("unsaved_changes.disconnected.other");case u.E63.SYNCING_AUTOSAVE_DISABLED:return(0,A.t)("unsaved_changes.syncing.autosave_disabled");case u.E63.SYNCING_SERVER_ISSUES:return(0,A.t)("unsaved_changes.syncing.server_issues");case u.E63.SYNCING_OTHER:return(0,A.t)("unsaved_changes.syncing.other");default:throw Error(`Unhandled tab close text enum value ${e}`)}},eO=a.memo(function(){let e=(0,i.d4)(e=>e.mirror.appModel.multiplayerSessionState===u.kul.JOINED),t=(0,i.d4)(e=>e.saveStatus?.tabCloseText),n=(0,E.Ym)()===E.Dj.CONNECTED||(0,v.PN)(),r=eI(),l=t?eA(t):"",s=e_.A,d=a.createElement(o,null);return e&&(n?(s=eg.A,d=a.createElement(c,null)):(l=(0,A.t)("unsaved_changes.disconnected.live_updates"),s=e_.A)),!function(e,t,n,r,l){let o=(0,i.d4)(e=>e.saveStatus?.hasUnsavedChanges),[s,c]=a.useState(!1);a.useEffect(()=>{if(t&&!s){let t=n===e_.A?"offline":"unsaved";(0,_.sx)("Show Save Status Icon",{tooltipText:e,iconName:t,multiplayerJoined:r,livegraphConnected:l,hasUnsavedChanges:o},{forwardToDatadog:!0}),c(!0)}},[s,c,e,t,n,o,r,l])}(l,r,s,e,n),r?a.createElement("div",{className:ep.e1,"data-tooltip-type":Q.Ib.TEXT,"data-tooltip":l,"data-onboarding-key":"multiplayer-save-status"},a.createElement(x.U,{svg:s},d)):null}),eL=e=>e===eu.ec?(0,A.t)("fullscreen.accessibility.view_comments"):(0,R.A)(e.action),eD="fullscreen_menu_visible",eR="fullscreen_menu_hidden";function eM(e){let{isEnabled:t,isActive:n,item:r,numUnreadComments:i,recordingKey:l,isWide:o}=e,s=a.useRef(null),c=eC(r)?.svg||null,d=ew(r),m=j.z4.getIsExtension(),_=a.useRef(null);if(!n&&_.current&&_.current===document.activeElement&&ea.F2.focusCustomCanvasFocusElement(),!c)return null;function g(e){return a=>{t&&(n&&r.tool===u.NLJ.COMMENTS?(H.Y5.triggerAction("set-tool-default"),e&&_.current?.focus()):V.VU.get(r.action,"toolbar")(a))}}return a.createElement("div",{key:r.action,"data-testid":r.action,className:ep.yT,ref:s},a.createElement(k.t,{svg:c,fallbackSvg:d||void 0,recordingKey:l,className:p()(ep.gb,(0,em.M)(t,n),o?ep.U:null),onMouseDown:g(!1),"data-tooltip-type":Q.Ib.LOOKUP,"data-tooltip":r.action,"data-onboarding-key":r.onboardingKey,role:"button",tabIndex:0,onKeyDown:e=>(0,K.hx)({e,onClickHandler:g(!0)}),ariaLabel:eL(r),"aria-pressed":n,"data-fullscreen-intercept":!0,innerSpanRef:_}),!m&&i>0&&r.tool===u.NLJ.COMMENTS&&a.createElement("div",{className:n?ep.TE:ep.Zm}))}function eP(){return"main-menu"}let eF=a.memo(function(e){let t=a.createRef(),n=(0,i.wA)(),l=(0,C.g)(),{dropdownShown:o,modalShown:s,user:c,selectedView:u}=(0,h.R)(e=>({dropdownShown:e.dropdownShown,modalShown:e.modalShown,user:e.user,selectedView:e.selectedView})),m=(0,U.$D)(),p=(0,G.GS)(),_=(0,B.my)()===Z.nT.Design,f=(0,P.Kf)({isDesign:_,isUnauth:!c}),E=(0,F.EO)();a.useEffect(()=>{(0,ee.TY)(o)?(0,I.YQ)({id:eD}):(0,I.YQ)({id:eR})},[o]);let y=a.useRef(null);return(0,W.eM)()?p?a.createElement("div",{className:ep.Ex},a.createElement(d.m,null)):null:a.createElement(N.i,{key:"toggle-menu-button",id:"toggle-menu-button",ref:t,className:`${ep.AQ} ${e.hideToolsClassName}`,recordingKey:"toggleMenuTopbarButton",selected:(0,ee.TY)(o),svg:ey.A,fallbackSvg:eb.A,showChevron:!0,chevronRef:y,positionOnChevron:!0,"data-tooltip-type":Q.Ib.LOOKUP,"data-tooltip":eP(),onClick:()=>{let e=t.current,a=r.findDOMNode(e);if(!c||c.appData&&c.appData.loggedOut){if(a){if("fullscreen"===u.view&&u.editorType===Z.nT.Whiteboard)n(w.Ts({origin:"logged_out_main_menu_toolbar",redirectUrl:g.Ay.location.pathname,signedUpFromOpenSession:m})),n(L.to({type:et.x,data:{headerText:(0,A.t)("fullscreen.toolbar.create_an_account_to_do_more_with_fig_jam")}}));else{if(f()){E("LEFT_PANEL_FIGMA_LOGO");return}n(O.j7({type:ee.G,data:{targetRect:a.getBoundingClientRect()}}))}}return}if(s?.type&&ev.includes(s?.type)&&n(L.ES({type:s.type})),(0,ee.TY)(o))n(O.oB());else if(a){let e={type:ee.pi,data:{targetRect:a.getBoundingClientRect()},hasOwnEscKeyHandler:!0};n(O.j7(e))}},ariaLabel:(0,A.t)("fullscreen_actions.main_menu"),"aria-haspopup":"menu","aria-expanded":(0,ee.TY)(o),"aria-controls":l,onboardingKey:ec.tO,isUI3:p,ui3Icon:a.createElement(d.m,null)},(0,ee.TY)(o)&&a.createElement(en.e,{id:l,key:"fullscreen-menu","aria-labelledby":"toggle-menu-button",controlledByID:"toggle-menu-button",dropdown:o,recordingKey:"mainMenu",chevronRef:y,positionOnChevron:!0}),(0,ee.IS)(o)&&a.createElement(el,{dropdown:o}))}),eB=(0,M.tf)(eT),eU=a.memo(function(){let e=(0,Y.q5)(),{selectedView:t}=(0,h.R)(e=>({selectedView:e.selectedView})),n=(0,U.$D)(),r=(0,i.wA)();return a.createElement(eB,{text:(0,A.t)("fullscreen.toolbar.log_in"),isEnabled:!0,action:"",onClick:()=>{let a="";"fullscreen"===t.view&&"DUPLICATE"===t.landingState?a=e?(0,A.t)("fullscreen.toolbar.log_in_or_create_an_account_to_get_a_copy_of",{file:e.name}):(0,A.t)("fullscreen.toolbar.log_in_or_create_an_account"):n&&(a=(0,A.t)("fullscreen.toolbar.log_in_to_do_more_with_figjam"));let i=(0,y.qg)(g.Ay.location.search)["node-id"];r(w.Ts({origin:"logged_out_footer",formState:T.qB.SIGN_IN,redirectUrl:i?`${g.Ay.location.pathname}?node-id=${encodeURIComponent((0,X.E)(i))}`:g.Ay.location.pathname})),r(L.to({type:et.x,data:{headerText:a}}))},className:ep.eh,innerText:(0,A.t)("fullscreen.toolbar.log_in")})}),eG=a.memo(function(e){let t=(0,f.U)();return a.createElement(N.L,{ariaLabel:(0,A.t)("fullscreen.toolbar.missing_fonts"),key:"missing-fonts-button",svg:eE.A,className:ep.Er,onClick:()=>{t("missing_fonts_button_clicked"),u.glU.findMissingFontsAndShowPopover()},recordingKey:b.Pt(e,"missingFontsButton"),"data-tooltip-type":Q.Ib.TEXT,"data-tooltip":(0,A.t)("fullscreen.toolbar.missing_fonts")})})},136297:(e,t,n)=>{n.d(t,{I:()=>a,M:()=>r});let a=n(187409);function r(e,t,n=!0){let i=a.enabledButton;return e?t&&n&&(i=a.activeButton):i=a.disabledButton,i}},460528:(e,t,n)=>{n.d(t,{K:()=>u,W:()=>d});var a=n(411855),r=n(320063),i=n(939863),l=n(862442),o=n(970332),s=n(788256),c=n(746806);let d="design-panel-container";function u(e){let[t,n]=a.useState(!1),u=(0,l.Z)();return((0,r.h)(()=>{queueMicrotask(async function(){let t=e.getNodeForViewportFocus?.(),a=e.getNodeToSelect();a&&"FRAME"===a.type?(await (0,s.zU)({navigate:u,guidToFocus:t?.guid,guidToSelect:a.guid}),n(!0)):e.flowDirection===s.en.FORWARD?e.onNext():e.onPrevious()})}),t)?a.createElement(o.VF,{dismissModal:e.onClose,disableHighlight:!0,targetKey:d,title:(0,i.tx)("tooltips_plus_onboarding.design_panel.title"),trackingContextName:"Tooltips+ Design Panel Step",lowerLeftText:a.createElement(o.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps}),onSecondaryCtaClick:e.onPrevious,onPrimaryCtaClick:e.onNext,arrowPosition:c.F_.RIGHT_BODY,shouldCenterArrow:c.EL.FALLBACK,pointsTo:"designPanel"},(0,i.tx)("tooltips_plus_onboarding.design_panel.description")):null}},457261:(e,t,n)=>{n.d(t,{J:()=>c});var a=n(411855),r=n(966712),i=n(939863),l=n(101505),o=n(226055),s=n(970332);function c(e){let t=(0,o.GS)(),n=!!(0,r.kc)().ui3_onboarding_mitigations,c=t&&n,d=c?(0,i.tx)("tooltips_plus_onboarding.outro.title_ui3"):(0,i.tx)("tooltips_plus_onboarding.outro.title"),u=c?(0,i.tx)("tooltips_plus_onboarding.outro.description_ui3"):(0,i.tx)("tooltips_plus_onboarding.outro.description");return a.createElement(s.A2,null,a.createElement(s.xI,{dismissModal:e.onClose,title:d,trackingContextName:"Tooltips+ Outro Step",onSecondaryCtaClick:e.onSecondaryCtaClick,onPrimaryCtaClick:e.onPrimaryCtaClick,secondaryCtaProps:{ctaText:(0,i.tx)("tooltips_plus_onboarding.outro.practice_more_btn"),ctaTrackingDescriptor:l.c.PRACTICE_MORE_HERE},primaryCtaProps:{ctaText:(0,i.tx)("tooltips_plus_onboarding.outro.start_new_file_btn"),ctaTrackingDescriptor:l.c.START_A_NEW_FILE}},u))}},261503:(e,t,n)=>{n.d(t,{e:()=>m});var a=n(411855),r=n(188507),i=n(587670),l=n(707458),o=n(320063),s=n(939863),c=n(970332),d=n(260833),u=n(788256);function m(e){(0,o.h)(()=>{let t=(0,u.eN)(l.q.instance,"FRAME");if(e.hasUiKits&&null!=t){e.skip&&e.skip();return}});let t=(0,r.d4)(e=>e.isFullscreenDocumentLoaded);a.useEffect(()=>{t&&i.glU.triggerAction("set-tool-frame",null)},[t]);let n=e.fromCursorBot?d.b:c.VF;return a.createElement("div",{"data-testid":"tooltips-plus-frames-step"},a.createElement(n,{dismissModal:e.onClose,disableHighlight:!0,hideCloseButton:e.hideCloseButton,targetKey:"frame",title:e.hasUiKits?(0,s.tx)("tooltips_plus_onboarding.presets_frame_step.title"):(0,s.tx)("tooltips_plus_onboarding.no_nav_frames_get_started_with_a_frame"),trackingContextName:e.fromCursorBot?"Cursor Bot Create Frame Step":"Tooltips+ Frame Step",lowerLeftText:a.createElement(c.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumStep,useLoadingBar:e.useLoadingBar}),onPrimaryCtaClick:e.onPrimaryCtaClick,primaryCtaProps:e.primaryCtaProps,onSecondaryCtaClick:e.onSecondaryCtaClick?()=>{i.glU.triggerAction("set-tool-default",null),e.onSecondaryCtaClick&&e.onSecondaryCtaClick()}:void 0,secondaryCtaProps:e.secondaryCtaProps,pointsTo:"toolbar"},e.bodyText||(0,s.tx)("tooltips_plus_onboarding.no_nav_frames_description")))}},493168:(e,t,n)=>{n.d(t,{Z:()=>h});var a=n(411855),r=n(188507),i=n(587670),l=n(707458),o=n(320063),s=n(939863),c=n(931828),d=n(862442),u=n(970332),m=n(260833),p=n(32067),_=n(788256),g=n(493364),f=n(460528);function h({onPrimaryCtaClick:e,onSecondaryCtaClick:t,primaryCtaProps:n,secondaryCtaProps:h,onClose:E,skip:y,currentStepNum:b,totalNumSteps:v,lowerLeftText:C,title:w,bodyText:T,frameNodeMatcher:S,fromCursorBot:x,isFollowUp:k}){let N=(0,r.wA)(),I=(0,p.VW)(),A=S?.(l.q.instance)||(0,_.eN)(l.q.instance,"FRAME",I),O=(0,d.Z)(),[L,D]=a.useState(!1);if((0,o.h)(()=>{queueMicrotask(async function(){if(null==A){y();return}(I?.type!=="FRAME"||x)&&await (0,_.zU)({navigate:O,guidToSelect:A.guid}),D(!0),N(c.b({design_panel_step_shown:!0})),i.glU.triggerAction("set-tool-default",null)})}),!L)return null;let R=x?m.b:u.VF,M=x?void 0:a.createElement(u.uY,{currentStepNum:b||2,totalNumSteps:v||4,useLoadingBar:!0}),P={dismissModal:E,disableHighlight:!0,targetKey:f.W,title:w||(0,s.tx)("tooltips_plus_onboarding.change_properties_in_the_design_panel"),trackingContextName:"Tooltips+ Design Panel Step (No Figma Basics)",lowerLeftText:C||M,onSecondaryCtaClick:t,onPrimaryCtaClick:e,primaryCtaProps:n,secondaryCtaProps:h,arrowPosition:g.F_.RIGHT_BODY,shouldCenterArrow:g.EL.FALLBACK,pointsTo:"designPanel"},F={...P,collapseToTopRight:x,trackingContextName:"Cursor Bot Design Panel Step"+(k?" (Reactive Follow Up)":"")};return a.createElement(R,{...x?F:P},T||(0,s.tx)("tooltips_plus_onboarding.next_take_some_time_to_adjust_your_frames_size"))}},222720:(e,t,n)=>{n.d(t,{iF:()=>A});var a=n(411855),r=n(188507),i=n(629019),l=n.n(i),o=n(799569),s=n(946689),c=n(939863),d=n(931828),u=n(672517),m=n(226055),p=n(168039),_=n(617453),g=n(373119),f=n(126911),h=n(457630),E=n(309798),y=n(100197),b=n(173101),v=n(600907),C=n(788256),w=n(70964);let T="no_figma_basics_panning_and_zooming_step--selectedHeaderTitle--8-xpb",S="no_figma_basics_panning_and_zooming_step--unselectedHeaderTitle--y0NFC",x="no_figma_basics_panning_and_zooming_step--instructionRow--BP4W4",k="no_figma_basics_panning_and_zooming_step--icon--mtHJ3",N="no_figma_basics_panning_and_zooming_step--heavyFontWeight--Fma8P",I="no_figma_basics_panning_and_zooming_step--keyboardKeyHighlight--jN1Bq";function A({markComplete:e}){let t=(0,E.f)("has_panned_in_design_file"),n=(0,E.f)("has_zoomed_in_design_file"),i=(0,E.f)("dismissed_no_figma_basics_panning_and_zooming_tooltip"),[l,o]=a.useState(()=>t||n),s=!l&&!i,c=(0,m.GS)(),[d,u]=a.useState(!c);(0,v.g)("no_figma_basics_panning_and_zooming_overlay"),(0,b.U)("no_figma_basics_panning_and_zooming_overlay");let p=!!(0,E.f)("no_figma_basics_panning_and_zooming_overlay");a.useEffect(()=>{p&&d&&setTimeout(()=>{u(!1)},1300)},[p,u,d]);let _=(0,g.q)(),f=(0,r.d4)(e=>e.mirror.sceneGraph),h=_&&(0,C.Qf)(f),y=!!h&&h.childrenGuids.length>0;if(a.useEffect(()=>{_&&null!=f&&(y&&(d||s)||e())},[y,_,d,e,f,s]),!y)return null;let w={};return p&&(w={opacity:"0",transition:"opacity",transitionDelay:"1000ms",transitionDuration:"300ms"}),a.createElement(a.Fragment,null,s&&a.createElement(D,null),d&&a.createElement("div",{style:w},a.createElement(O,null)))}function O(){let e=(0,h.QU)({subscribeToUpdates_expensive:!0});return a.createElement(u.fu,{name:"Panning and Zooming Glow Overlay"},a.createElement("div",{className:"no_figma_basics_panning_and_zooming_step--readyToDesignMoreContainer--nu9cG"},a.createElement("div",{className:"no_figma_basics_panning_and_zooming_step--readyToDesignMoreBoldText--H6Q1p"},(0,c.tx)("tooltips_plus_onboarding.ready_to_design_more")),(0,c.tx)("tooltips_plus_onboarding.go_to_a_blank_spot_in_your_canvas"),a.createElement(s.Kz,{multiple:3}),a.createElement("div",{style:{width:e+"px",borderRadius:e+"px"},className:"no_figma_basics_panning_and_zooming_step--blueGlow--zcqFY"})))}var L=(e=>(e.MOUSE="mouse",e.TRACKPAD="trackpad",e))(L||{});function D(){let e=(0,r.wA)(),[t,n]=a.useState("mouse");return a.createElement(u.fu,{name:"Panning and Zooming Instructions Modal"},a.createElement(w.wz,null,a.createElement("div",{"data-testid":"panning-and-zooming-hint",className:"no_figma_basics_panning_and_zooming_step--container--8Vwa-"},a.createElement("div",{className:"no_figma_basics_panning_and_zooming_step--header--OrjJu"},a.createElement("div",{className:"no_figma_basics_panning_and_zooming_step--headerTabs--D9Er-"},a.createElement("button",{className:l()({[T]:"mouse"===t,[S]:"mouse"!==t}),onClick:()=>n("mouse")},(0,c.tx)("tooltips_plus_onboarding.mouse")),a.createElement("button",{className:l()({[T]:"trackpad"===t,[S]:"trackpad"!==t}),onClick:()=>n("trackpad")},(0,c.tx)("tooltips_plus_onboarding.trackpad"))),a.createElement(o.Jn,{className:"no_figma_basics_panning_and_zooming_step--closeButton--UAV5m",onClick:()=>{e(d.b({dismissed_no_figma_basics_panning_and_zooming_tooltip:!0}))},dataTestId:"close-button"})),a.createElement("div",{className:"no_figma_basics_panning_and_zooming_step--body--QKpb-"},a.createElement(s.Kz,{multiple:1.5}),a.createElement(U,{peripheral:t}),a.createElement(s.Kz,{multiple:2}),a.createElement(G,{peripheral:t})))))}let R=e=>"dark"===e?"https://static.figma.com/uploads/d2eefebde737b9d5fba2b35193dcd51e26ed0164":"https://static.figma.com/uploads/99d648a7ac711ba9d19976515105d6395eeb2d4c",M=e=>"dark"===e?"https://static.figma.com/uploads/e27a5d39945685c389cd50e9f08144678edefeab":"https://static.figma.com/uploads/2357b697bfe85711b1de702dc63611ef8bb75859",P=e=>"dark"===e?"https://static.figma.com/uploads/f49911183f0d3a2b6ee5044b42e0a14fe549999a":"https://static.figma.com/uploads/2a0c8ae88f72d6155bd818a0c51c8ced71fcecfa",F=e=>"dark"===e?"https://static.figma.com/uploads/045c7e1324e953b8ee9ec91ac4e944995662e11e":"https://static.figma.com/uploads/c764bcd0a726bf2d31f70f16808785efeae4de56",B=e=>"dark"===e?"https://static.figma.com/uploads/7a24deb2e05c4542dbd8b6bd1f009e26ba761b48":"https://static.figma.com/uploads/32f4843d9b24a4b95129bacd47f6b81fe439228f";function U({peripheral:e}){let t=(0,p.DP)(),n="mouse"===e?F(t):R(t),r=`${e} icon`,i=(0,y.J2)((0,_.UK)().scrollWheelZoom);return a.createElement("div",{className:x},a.createElement("img",{src:n,className:k,alt:r}),a.createElement("div",null,a.createElement("span",{className:N},(0,c.tx)("tooltips_plus_onboarding.to_zoom")),"\xa0","mouse"!==e?(0,c.tx)("tooltips_plus_onboarding.pinch_your_trackpad"):i?(0,c.tx)("tooltips_plus_onboarding.scroll_your_mouse"):(0,c.tx)("tooltips_plus_onboarding.hold_key_and_scroll",{keyboardKey:a.createElement("span",{className:I},(0,c.tx)(f.y.isMac()?"tooltips_plus_onboarding.command_key":"tooltips_plus_onboarding.control_key"))})))}function G({peripheral:e}){let t=(0,p.DP)(),n=(0,y.J2)((0,_.UK)().rightClickPan),r=`${e} icon`;return a.createElement("div",{className:x},a.createElement("img",{src:"mouse"!==e?M(t):n?B(t):P(t),className:k,alt:r}),a.createElement("div",null,a.createElement("span",{className:N},(0,c.tx)("tooltips_plus_onboarding.to_move")),"\xa0","mouse"!==e?(0,c.tx)("tooltips_plus_onboarding.swipe_your_trackpad_with_two_fingers"):n?(0,c.tx)("tooltips_plus_onboarding.hold_right_click_while_moving_mouse"):(0,c.tx)("tooltips_plus_onboarding.hold_space_and_left_click_while_moving_your_mouse",{spaceKey:a.createElement("span",{className:I},(0,c.tx)("tooltips_plus_onboarding.space_key"))})))}},52354:(e,t,n)=>{n.d(t,{v:()=>j,e:()=>$});var a=n(411855),r=n(188507),i=n(931828),l=n(251960),o=n(456104),s=n(335682),c=n(860178),d=n(309798),u=n(833629),m=n(397065),p=n(463546),_=n(939863),g=n(119198),f=n(349410),h=n(101505),E=n(226055),y=n(974105),b=n(696673),v=n(29680),C=n(99506),w=n(945020),T=n(970332),S=n(460528),x=n(457261),k=n(261503),N=n(258525),I=n(587670);function A(e){return a.useEffect(()=>{I.glU.triggerAction("set-tool-type",null)},[]),a.createElement(T.VF,{dismissModal:e.onClose,disableHighlight:!0,targetKey:"tool-type-onboarding",title:(0,_.tx)("tooltips_plus_onboarding.text_step.title"),trackingContextName:"Tooltips+ Text Step",lowerLeftText:a.createElement(T.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps,useLoadingBar:e.useLoadingBar}),onPrimaryCtaClick:()=>{I.glU.triggerActionInUserEditScope("set-tool-default",null),e.onNext()},onSecondaryCtaClick:e.onPrevious,pointsTo:"toolbar"},(0,_.tx)("tooltips_plus_onboarding.text_step.description"))}var O=n(293017),L=n(843495),D=n(998109),R=n(493364);function M(e){let t=(0,r.wA)(),n=(0,_.tx)("tooltips_plus_onboarding.ui_kits_ending_step.title"),i=(0,_.tx)("tooltips_plus_onboarding.ui_kits_ending_step.description"),l="UI Kits";return(0,b.oe)()&&(n=(0,_.tx)("tooltips_plus_onboarding.assets_ending_step.title"),i=(0,_.tx)("tooltips_plus_onboarding.assets_ending_step.description",{strongAssets:a.createElement("strong",{style:{display:"contents"}},(0,_.tx)("design_systems.assets_panel.assets"))}),l="Assets"),a.useEffect(()=>{(0,L.wr)(),t(O.FP({tab:I.xae.ASSETS}))},[t]),a.createElement(T.VF,{dismissModal:e.onClose,disableHighlight:!0,targetKey:D.RJ,title:n,trackingContextName:`Tooltips+ ${l} Ending Step`,lowerLeftText:a.createElement(T.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps,useLoadingBar:e.useLoadingBar}),onPrimaryCtaClick:e.onPrimaryCtaClick,onSecondaryCtaClick:()=>{t(O.FP({tab:I.xae.LAYERS})),e.onSecondaryCtaClick()},primaryCtaProps:e.primaryCtaProps,arrowPosition:R.F_.LEFT_TITLE,pointsTo:"leftPanel"},i)}var P=n(788256);let F={NAV:"figma_basics_tooltips_nav_step",FRAME:"figma_basics_tooltips_frame_step",TEXT:"figma_basics_tooltips_text_step",FORMAT_TEXT:"figma_basics_tooltips_format_text_step",DESIGN_PANEL:"figma_basics_tooltips_design_panel_step",PRESETS_ENDING:"figma_basics_tooltips_presets_ending_step",UI_KITS_ENDING:"figma_basics_tooltips_ui_kits_ending_step"};function B({completeOverlay:e}){let t=(0,r.wA)(),n=(0,r.Pj)(),l=(0,d.f)("figma_basics_tooltips_onboarding"),o=(0,d.f)(F.FRAME),s=(0,d.f)(F.TEXT),c=(0,d.f)(F.FORMAT_TEXT),u=(0,d.f)(F.DESIGN_PANEL),m=(0,d.f)(F.UI_KITS_ENDING),p=!!(0,d.f)("has_tooltips_plus_simplified_basics_file"),I=!!(0,d.f)("started_figma_basics_onboarding"),O=(0,v.aV)(),[L,D]=(0,a.useState)(P.en.FORWARD),R=(0,r.d4)(e=>e.mirror.sceneGraph),{hasAnyUiKit:B}=(0,b.I7)(),U=B&&!m,G=[U].reduce((e,t)=>t?e+1:e,4),K=(0,E.GS)(),V=(0,f.DK)(),H=(e,n=P.en.FORWARD)=>{D(n),t(i.b({[e]:!0}))},z=(e,n=P.en.BACKWARD)=>{D(n),t(i.b({[e]:!1}))},W=()=>{e(),t(i.b({figma_basics_tooltips_onboarding:!0}))};if(a.useEffect(()=>{l||O||I||t(i.b({started_figma_basics_onboarding:!0}))},[O,l,t,I]),l||O)return null;if(o){if(!s)return a.createElement(A,{onNext:()=>H(F.TEXT),onPrevious:()=>z(F.FRAME),onClose:W,currentStepNum:2,totalNumSteps:G});if(!c)return a.createElement(N.P,{onPrimaryCtaClick:()=>H(F.FORMAT_TEXT),onSecondaryCtaClick:()=>z(F.TEXT),onClose:W,lowerLeftText:a.createElement(T.uY,{currentStepNum:3,totalNumSteps:G}),skip:()=>{L===P.en.FORWARD?H(F.FORMAT_TEXT):z(F.TEXT)},getNodeToSelect:()=>(0,P.wy)(R,p),getNodeForViewportFocus:p?()=>(0,P.u4)(R,(0,P.wy)(R,p)):void 0});if(!u)return a.createElement(S.K,{onNext:()=>H(F.DESIGN_PANEL),onPrevious:()=>z(F.FORMAT_TEXT),onClose:W,currentStepNum:4,totalNumSteps:G,getNodeToSelect:()=>(0,P.aD)(R,p),flowDirection:L,getNodeForViewportFocus:p?()=>(0,P.u4)(R,(0,P.aD)(R,p)):void 0});else if(U)return a.createElement(M,{onPrimaryCtaClick:()=>H(B?F.UI_KITS_ENDING:F.PRESETS_ENDING),onSecondaryCtaClick:()=>z(F.DESIGN_PANEL),onClose:W,currentStepNum:5,totalNumSteps:G,primaryCtaProps:{ctaText:(0,_.tx)("tooltips_plus_onboarding.done"),ctaTrackingDescriptor:h.c.DONE}})}else{let e=!K||V();return a.createElement(k.e,{onPrimaryCtaClick:()=>H(F.FRAME),onClose:W,currentStepNum:1,hideCloseButton:!!e,totalNumStep:G})}return a.createElement(x.J,{onPrimaryCtaClick:()=>{let e=(0,y.xA)(n.getState(),w.ai.NEW_TAB,"drafts",{from:w.f6.DESIGN_TOOLTIPS_PLUS_OUTRO_MODAL,selectedView:n.getState().selectedView},C._Y.DESIGN,void 0);t(g.uM(e)),W()},onSecondaryCtaClick:W,onClose:W})}var U=n(707458),G=n(32067),K=n(493168),V=n(222720);function H(e){let t=(0,r.wA)(),n=(0,_.tx)("tooltips_plus_onboarding.ui_kits_step.title"),i=(0,_.tx)("tooltips_plus_onboarding.ui_kits_step.description"),l="UI Kits";return(0,b.oe)()&&(n=(0,_.tx)("tooltips_plus_onboarding.assets_step.title"),i=(0,_.tx)("tooltips_plus_onboarding.assets_step.description"),l="Assets"),a.useEffect(()=>{t(O.FP({tab:I.xae.ASSETS}))},[t]),a.createElement(T.VF,{dismissModal:e.onClose,disableHighlight:!0,targetKey:D.RJ,title:n,trackingContextName:`Tooltips+ ${l} Step`,lowerLeftText:a.createElement(T.uY,{currentStepNum:e.currentStepNum,totalNumSteps:e.totalNumSteps,useLoadingBar:e.useLoadingBar}),onPrimaryCtaClick:()=>{t(O.FP({tab:I.xae.LAYERS})),e.onNext()},arrowPosition:R.F_.LEFT_TITLE,pointsTo:"leftPanel"},i)}let z={FRAME:"no_figma_basics_tooltips_frame_step",TEXT:"no_figma_basics_tooltips_text_step",FORMAT_TEXT:"no_figma_basics_tooltips_format_text_step",DESIGN_PANEL:"no_figma_basics_tooltips_design_panel_step",PRESETS:"no_figma_basics_tooltips_presets_step",PRESETS_ENDING:"no_figma_basics_tooltips_presets_ending_step",UI_KITS:"no_figma_basics_tooltips_ui_kits_step",UI_KITS_ENDING:"no_figma_basics_tooltips_ui_kits_ending_step",PANNING_AND_ZOOMING_GLOW_OVERLAY:"no_figma_basics_panning_and_zooming_overlay",PANNING_AND_ZOOMING_TOOLTIP:"dismissed_no_figma_basics_panning_and_zooming_tooltip"};function W({completeOverlay:e}){let t=(0,r.wA)(),n=(0,d.f)("no_figma_basics_tooltips_onboarding"),l=(0,v.aV)(),[o,s]=a.useState(P.en.FORWARD),c=(0,d.f)(z.FRAME),u=(0,d.f)(z.TEXT),m=(0,d.f)(z.FORMAT_TEXT),p=(0,d.f)(z.DESIGN_PANEL),g=(0,d.f)(z.UI_KITS),f=(0,d.f)(z.UI_KITS_ENDING),{hasAnyUiKit:E,status:y}=(0,b.I7)(),C=E&&!g,w=E&&!f,S=[E].reduce((e,t)=>t?e+1:e,4),x=(0,G.VW)(),I=()=>(0,P.eN)(U.q.instance,"TEXT",x),O=(e,n=P.en.FORWARD)=>{s(n),t(i.b({[e]:!0}))},L=(e,n=P.en.BACKWARD)=>{s(n),t(i.b({[e]:!1}))},D=(e,t)=>{o===P.en.FORWARD?O(t):L(e)},R=a.useCallback(()=>{e(),t(i.b({no_figma_basics_tooltips_onboarding:!0}))},[e,t]);return n||l||"loading"===y?null:a.createElement("div",{"data-testid":"no-figma-basics-step"},(()=>{if(C)return a.createElement(H,{onNext:()=>O(E?z.UI_KITS:z.PRESETS),onClose:R,currentStepNum:1,totalNumSteps:S,useLoadingBar:!0});if(c){if(!p)return a.createElement(K.Z,{onPrimaryCtaClick:()=>O(z.DESIGN_PANEL),onSecondaryCtaClick:()=>L(z.FRAME),onClose:R,skip:()=>D(z.FRAME,z.DESIGN_PANEL)});if(!u)return a.createElement(A,{onNext:()=>O(z.TEXT),onPrevious:()=>L(z.DESIGN_PANEL),onClose:R,currentStepNum:3,totalNumSteps:S,useLoadingBar:!0});if(!m)return a.createElement(N.P,{onPrimaryCtaClick:()=>O(z.FORMAT_TEXT),onSecondaryCtaClick:()=>L(z.TEXT),onClose:R,lowerLeftText:a.createElement(T.uY,{currentStepNum:4,totalNumSteps:S,useLoadingBar:!0}),skip:()=>{o===P.en.FORWARD?O(z.FORMAT_TEXT):L(z.TEXT)},getNodeToSelect:I});else if(w)return a.createElement(M,{onPrimaryCtaClick:()=>O(E?z.UI_KITS_ENDING:z.PRESETS_ENDING),onSecondaryCtaClick:()=>L(z.FORMAT_TEXT),onClose:R,currentStepNum:5,totalNumSteps:S,useLoadingBar:!0,primaryCtaProps:{ctaText:(0,_.tx)("tooltips_plus_onboarding.done"),ctaTrackingDescriptor:h.c.DONE}});else return a.createElement(V.iF,{markComplete:R})}{let e=E?()=>L(z.UI_KITS):void 0;return a.createElement(k.e,{currentStepNum:1,totalNumStep:S,onPrimaryCtaClick:()=>O(z.FRAME),onSecondaryCtaClick:e,onClose:R,skip:()=>{D(z.PRESETS,z.FRAME)},useLoadingBar:!0,hasUiKits:E})}})())}let j="tooltips_plus_onboarding_reset_onboarding";function $(){let e=(0,r.wA)(),t=(0,c.iZ)(),n=s.q5()?.canEditCanvas,{isShowing:_,complete:g,show:f,uniqueId:h}=(0,o.e)({overlay:p.WD4,priority:m.N.OVERRIDING_MODAL}),E=!!(0,d.f)("editor_onboarded"),y=!!(0,d.f)("figma_basics_tooltips_onboarding"),b=!!(0,d.f)("no_figma_basics_tooltips_onboarding"),v=!!(0,d.f)("has_tooltips_plus_onboarding_file_no_nav"),C=!!(0,d.f)("has_tooltips_plus_onboarding_file_with_nav"),w=!!(0,d.f)("has_tooltips_plus_no_basics_file"),T=!!(0,d.f)("started_figma_basics_onboarding"),S=v||C||w,x=(0,s.Cq)({useSinatraType:!0}),k=(0,u.WO)(t?.id,x,[P.d4]),[N,I]=a.useState(!1);(0,l.E)(h,["Reset Onboarding",j],()=>{if(!t||!x)return;let n=k?{has_tooltips_plus_onboarding_file_no_nav:!0,figma_basics_tooltips_onboarding:!1,[F.NAV]:!1,[F.FRAME]:!1,[F.TEXT]:!1,[F.FORMAT_TEXT]:!1,[F.DESIGN_PANEL]:!1,[F.PRESETS_ENDING]:!1,[F.UI_KITS_ENDING]:!1}:{has_tooltips_plus_onboarding_file_no_nav:!0,no_figma_basics_tooltips_onboarding:!1,[z.FRAME]:!1,[z.TEXT]:!1,[z.FORMAT_TEXT]:!1,[z.DESIGN_PANEL]:!1,[z.PRESETS]:!1,[z.PRESETS_ENDING]:!1,[z.UI_KITS]:!1,[z.UI_KITS_ENDING]:!1,[z.PANNING_AND_ZOOMING_GLOW_OVERLAY]:!1,[z.PANNING_AND_ZOOMING_TOOLTIP]:!1,design_panel_step_shown:!1,format_text_step_shown:!1,started_figma_basics_onboarding:!1};e(i.b(n))}),(0,l.E)(h,"starting_points_template_inserted",()=>{I(!0)});let A=a.useCallback(()=>{t&&x&&n&&!y&&S&&(k||!T&&!b&&!E)&&(_||f())},[t,x,n,y,E,S,k,_,f,T,b]);return(a.useEffect(()=>{A()},[A]),_)?k||N?a.createElement("div",{"data-testid":"figma-basics-tooltips-onboarding"},a.createElement(B,{completeOverlay:g})):a.createElement("div",{"data-testid":"no-basics-file-tooltips-onboarding"},a.createElement(W,{completeOverlay:g})):null}},983092:(e,t,n)=>{n.d(t,{$p:()=>W,C_:()=>V,Fr:()=>z,IU:()=>K,J7:()=>$,Ty:()=>q,hG:()=>Y,iG:()=>G,oN:()=>j});var a=n(411855),r=n(188507),i=n(634832),l=n(752795),o=n(504440),s=n(587670),c=n(86625),d=n(89865),u=n.n(d),m=n(91408),p=n(320063),_=n(153234),g=n(776621),f=n(286640),h=n(946689),E=n(452441),y=n(939863),b=n(175290),v=n(632430),C=n(877953),w=n(869156),T=n(318812),S=n(173454),x=n(498606),k=n(7959),N=n(538697),I=n(761334),A=n(746806),O=n(243008),L=n(282263),D=n(564092),R=n(15270),M=n(720531),P=n(837746),F=n(476066),B=n(424148);let U=2*(0,m.jz)(P.dGl),G=304;function K({initialPosition:e,initialValue:t,resolvedType:n,onCreateVariable:r,onClose:i}){(0,I.NF)({resolvedType:n});let{onCreateVariableSubmit:l}=V({onCreateVariable:r,onClose:i});return a.createElement(H,{initialPosition:e,initialValue:t,resolvedType:n,onCreateVariableSubmit:l,onClose:i,recordingKey:"createVariableModal"})}function V({onCreateVariable:e,onClose:t}){return{onCreateVariableSubmit:function({varSetID:n,varName:a,varValue:r}){if(!s.CWU.isValidVariableName(a,n)){(0,g.x1)("variables","Attempted to submit variable name that is invalid",{varName:a,_varSetID:n});return}c.l7.user("create-variable",()=>{let t=n??s.CWU.createVariableSet((0,y.t)("variables.variable_collection"),s.G6k.AUTOMATIC_FIRST_COLLECTION),l=s.CWU.createVariable(a,t,r,s.HS4.VARIABLE_PICKER),o=s.CWU.getLocalVariableInfo(l);(0,i.assertNotNullish)(o,`variable with id ${l} not found`),e((0,S.kz)(o))}),t()}}}function H({initialPosition:e,initialValue:t,resolvedType:n,recordingKey:r,onCreateVariableSubmit:i,onClose:l}){return a.createElement(A.vx,{title:a.createElement("div",{className:F.h$},(0,y.tx)("variables.create_modal.title")),initialPosition:e,initialWidth:G,onClose:l},a.createElement(q,{resolvedType:n,initialValue:t,recordingKey:_.Pt(r,"createVariableForm"),onSubmit:i}))}function z(e){let t=(0,w.BQ)(e.type===s.Z_n.ALIAS?e.value:void 0);return(0,l.isNotNullish)(t)&&"MIXED"!==t?t:null}function W({label:e,input:t}){return a.createElement(b.Y,{spacing:0,horizontalAlignItems:"space-between",height:"hug-contents",padding:{horizontal:U}},a.createElement(k.JU,null,e),t)}function j(e){(0,a.useEffect)(()=>{let t=e.current;if(!t)return;let n=e=>e.preventDefault();return t.addEventListener("contextmenu",n),()=>{t.removeEventListener("contextmenu",n)}},[e])}function $(e,t,n){let i=(0,r.wA)();return(0,a.useCallback)(async a=>{if(a){let e=await i((0,v.Oe)(a));n((0,D.y$)(t,e))}else e.type===s.Z_n.ALIAS&&n((0,R.WI)(t))},[i,e,t,n])}function q({resolvedType:e,initialValue:t,recordingKey:n,onSubmit:r}){let i=(0,a.useRef)(null);j(i);let l=(0,C.C)("fpl_variables_button_migration"),[c,d]=(0,a.useState)({varName:"",varValue:t??(0,R.WI)(e),varSetID:null}),u=a.useMemo(()=>s.CWU.isValidVariableName(c.varName??"",c.varSetID??null),[c]),p=_.of(n,"submit",()=>{u&&r({varName:c.varName,varValue:c.varValue,varSetID:c.varSetID??null})});return a.createElement("form",{onSubmit:p,autoComplete:"no"},a.createElement(b.Y,{direction:"vertical",spacing:0,height:"hug-contents",ref:i},a.createElement(b.Y,{direction:"vertical",spacing:`${(0,m.jz)(P.dGl)}px`,padding:{top:U},height:"hug-contents"},a.createElement(Y,{recordingKey:n??"",initialVarValue:t,resolvedType:e,setVariableFormSubmitData:d,variableFormSubmitData:c}))),a.createElement(b.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16},l?a.createElement(o.$n,{type:"submit",disabled:!u,recordingKey:_.Pt(n,"createButton"),htmlAttributes:{"data-tooltip":(0,y.t)("variables.create_modal.invalid_variable_name"),"data-tooltip-type":u?void 0:x.Ib.TEXT}},(0,y.tx)("variables.create_modal.create_button")):a.createElement(h.$$,{style:{justifySelf:"right"},tabIndex:0,type:"submit",disabled:!u,recordingKey:_.Pt(n,"createButton"),"data-tooltip-type":u?void 0:x.Ib.TEXT,"data-tooltip":(0,y.t)("variables.create_modal.invalid_variable_name")},a.createElement("span",null,(0,y.tx)("variables.create_modal.create_button")))))}function Y({recordingKey:e,initialVarValue:t,resolvedType:n,setVariableFormSubmitData:r,variableFormSubmitData:i}){let l=(0,w.yp)();n===s.rXF.TEXT_DATA&&(n=s.rXF.STRING);let[o,c]=(0,f.Vc)("last-used-variable-set-bottoms-up",l.length>0?l[0].node_id:null),d=(0,a.useMemo)(()=>{let e=l.find(e=>e.node_id===o);return!e&&l.length>0?l[0]:e},[l,o]),u=(0,w.rW)(d?.node_id??null),m=(0,a.useRef)(null);function g(e,t,n){r({varName:e,varValue:t,varSetID:n})}function h(e){g(i.varName,e,i.varSetID)}(0,p.h)(()=>{m.current?.select(),g((0,R.Wc)(u,n),t??(0,R.WI)(n),d?.node_id??null)});let b=z(i.varValue),v=$(i.varValue,n,h);return a.createElement(a.Fragment,null,l.length>0&&!!d&&a.createElement(W,{label:(0,y.tx)("variables.create_modal.collection_label"),input:a.createElement("div",{className:F.hF},a.createElement(X,{selectedVariableSetID:d.node_id,variableSets:l,onChange:e=>{c(e),g(i.varName,i.varValue,e)}}))}),a.createElement(W,{label:(0,y.tx)("variables.create_modal.name_label"),input:a.createElement(E.L,{className:F._Z,name:"variableName",value:i.varName,onChange:e=>{g(e.target.value,i.varValue,i.varSetID)},ref:m,recordingKey:_.Pt(e,"variableNameInput"),delay:50,"data-1p-ignore":!0,autoFocus:!0})}),a.createElement(W,{label:(0,y.tx)("variables.create_modal.value_label"),input:a.createElement("div",{className:F.hF},a.createElement(L.Cr,{resolvedType:n,variableValue:i.varValue,onVariableValueChange:e=>h(e),onVariableSelected:v},a.createElement(M.gJ,{variableValue:i.varValue,contextType:O.$.FORM,onChange:e=>h(e),recordingKey:_.Pt(e,"variableValueInput")}),b&&a.createElement(k.K0,{svg:B.A,type:"button","data-tooltip-type":x.Ib.TEXT,"data-tooltip":(0,y.t)("variables.authoring_modal.table.detach_alias"),onClick:()=>h(b),recordingKey:_.Pt(e,"detachVariableButton")})))}))}function X({selectedVariableSetID:e,variableSets:t,onChange:n}){let i=(0,r.wA)(),l=(0,T.Um)(),o=(0,a.useMemo)(()=>u()(t,e=>e.node_id),[t]);return a.createElement(N.l6,{id:"variable-create-modal-variable-set-select",property:o[e],formatter:{format:e=>e?.name??""},dispatch:i,chevronClassName:F.mL,inputClassName:F.NI,dropdownShown:l,onChange:e=>n(e.node_id)},t.map(function(e){return a.createElement(N.c$,{key:e.node_id,value:e})}))}},389211:(e,t,n)=>{n.d(t,{I5:()=>r,_N:()=>s,ol:()=>c,qY:()=>o,xb:()=>i,xf:()=>l});var a=n(411855);function r(){return a.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{d:"M12 15L6 20L12 25",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2",strokeLinecap:"square"}),a.createElement("path",{d:"M28 15L34 20L28 25",stroke:"black",strokeOpacity:"0.9",strokeWidth:"2",strokeLinecap:"square"}),a.createElement("rect",{x:"22.2002",y:"10",width:"2",height:"20",transform:"rotate(18 22.2002 10)",fill:"black",fillOpacity:"0.9"}))}function i(){return a.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25 8H15V6H25V8ZM31 22C31 28.0751 26.0751 33 20 33C13.9249 33 9 28.0751 9 22C9 15.9249 13.9249 11 20 11C26.0751 11 31 15.9249 31 22ZM33 22C33 29.1797 27.1797 35 20 35C12.8203 35 7 29.1797 7 22C7 14.8203 12.8203 9 20 9C23.0804 9 25.9105 10.0714 28.1382 11.8618L31 9L34.5355 12.5355L31.3731 15.698C32.4097 17.5647 33 19.7134 33 22ZM21 22V14H19V22C19 22.5523 19.4477 23 20 23C20.5523 23 21 22.5523 21 22Z",fill:"black",fillOpacity:"0.9"}),a.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function l(){return a.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 10C6 7.79086 7.79086 6 10 6H30C32.2091 6 34 7.79086 34 10V21.1632V30C34 32.2091 32.2091 34 30 34H14.3864H10C7.79086 34 6 32.2091 6 30V10ZM10 8C8.89543 8 8 8.89543 8 10V23.1195L13.7151 15.8804L14.4948 14.8927L15.2809 15.8753L20.7081 22.6594L25.9453 19.1679L26.6001 18.7314L27.1783 19.2652L32 23.716V21.1632V10C32 8.89543 31.1046 8 30 8H10ZM8 30V26.3472L14.5052 18.1073L19.7191 24.6247L20.2919 25.3406L21.0547 24.8321L26.3999 21.2686L32 26.4378V30C32 31.1046 31.1046 32 30 32H14.3864H10C8.89543 32 8 31.1046 8 30ZM24 17C25.6569 17 27 15.6569 27 14C27 12.3431 25.6569 11 24 11C22.3431 11 21 12.3431 21 14C21 15.6569 22.3431 17 24 17Z",fill:"black",fillOpacity:"0.9"}),a.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function o(){return a.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 6C7.79086 6 6 7.79086 6 10V30C6 32.2091 7.79086 34 10 34H14.3864H30C32.2091 34 34 32.2091 34 30V21.1632V10C34 7.79086 32.2091 6 30 6H10ZM8 10C8 8.89543 8.89543 8 10 8H30C31.1046 8 32 8.89543 32 10V14H8V10ZM8 16V30C8 31.1046 8.89543 32 10 32H14.3864H30C31.1046 32 32 31.1046 32 30V21.1632V16H8ZM13 11C13 12.1046 12.1046 13 11 13C9.89543 13 9 12.1046 9 11C9 9.89543 9.89543 9 11 9C12.1046 9 13 9.89543 13 11ZM17 19.9207V27.0793C17 27.4911 17.4435 27.7505 17.8024 27.5486L24.1657 23.9693C24.5316 23.7635 24.5316 23.2365 24.1657 23.0307L17.8024 19.4514C17.4435 19.2495 17 19.5088 17 19.9207Z",fill:"black",fillOpacity:"0.9"}),a.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function s(){return a.createElement("svg",{width:40,height:40,fill:"none"},a.createElement("rect",{width:40,height:40,rx:8,fill:"#fff"}),a.createElement("rect",{x:.5,y:.5,width:39,height:39,rx:7.5,stroke:"#000",strokeOpacity:.2}),a.createElement("circle",{cx:16.5,cy:16.5,r:1.5,fill:"#000"}),a.createElement("circle",{cx:23.5,cy:16.5,r:1.5,fill:"#000"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.549 20H14.074C13.5 20 13 20.424 13 21a7.002 7.002 0 005.97 6.925c.218-.667.484-1.312.796-1.93A5.002 5.002 0 0115.1 22h7.674a14.038 14.038 0 012.775-2z",fill:"#000"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.28 19.28c-7.18 0-13 5.82-13 13 0 .241.006.481.019.72L33 19.299a13.15 13.15 0 00-.72-.02z",fill:"#000"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.34 30.92c-.439.052-.886.08-1.34.08-6.075 0-11-4.925-11-11S13.925 9 20 9s11 4.925 11 11c0 .454-.027.901-.08 1.34l2.06-2.06C32.606 12.434 26.938 7 20 7 12.82 7 7 12.82 7 20c0 6.938 5.435 12.606 12.28 12.98l2.06-2.06z",fill:"#000"}))}function c(){return a.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),a.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),a.createElement("rect",{x:"5",y:"17",width:"10",height:"6",rx:"2",stroke:"black",strokeWidth:"2"}),a.createElement("rect",{x:"24",y:"9",width:"10",height:"6",rx:"2",stroke:"black",strokeWidth:"2"}),a.createElement("rect",{x:"24",y:"25",width:"10",height:"6",rx:"2",stroke:"black",strokeWidth:"2"}),a.createElement("path",{d:"M15 20H15.5C17.7091 20 19.5 18.2091 19.5 16V16C19.5 13.7909 21.2909 12 23.5 12H24",stroke:"black",strokeWidth:"2"}),a.createElement("path",{d:"M15 20H15.5C17.7091 20 19.5 21.7909 19.5 24V24C19.5 26.2091 21.2909 28 23.5 28H24",stroke:"black",strokeWidth:"2"}))}},379928:(e,t,n)=>{n.d(t,{I:()=>w,Q:()=>T});var a=n(411855),r=n(109388),i=n(188507),l=n(587670),o=n(629019),s=n.n(o),c=n(522739),d=n(572206),u=n(986270),m=n(356390),p=n(312167),_=n(860178),g=n(809073),f=n(498606),h=n(80332),E=n(634951),y=n(16774),b=n(28752),v=n(763933);function C({children:e,mini:t,user:n}){return t?a.createElement("div",{className:s()(v.HG,v.ET)},e):a.createElement("div",{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":n.name||n.handle||"","data-tooltip-timeout-delay":"500","data-tooltip-show-below":!0,"data-tooltip-offset-y":"-20",className:s()(v.HG)},e)}function w({user:e,hideName:t,mini:n,searchQuery:r,triggeredFrom:o}){let s=e.hi_res_img_url||e.img_url,c=`${s}?c=1`,f=(0,h.$L)(e.id,h.us),b=(0,E.LL)(c,e.name||e.handle||"",f),w=(0,_.TA)(),N=(0,y.b)(),I=(0,i.wA)(),A=a.useCallback(()=>{I(u.F9({currentUserId:w??void 0,storeInRecentsKey:g.$A.FigJam,item:{id:e.id,user:e,type:g.vt.FaceStamp}}))},[w,I,e]),{dragState:O,onInsertableResourcePointerDown:L}=(0,p.Z)({icon:a.createElement("img",{src:b,className:v.iE,alt:`profile stamp for ${e.name}`}),insertAction:t=>{let{dropPosition:n,isClick:a,type:r}=t;if(a||"click"===r){let t=m.Y5.getViewportInfo();(0,E.xG)(b,t.offsetX,t.offsetY,e.id,"click",l.zkO.USER),A()}else{let a=t.pointerPercentageOffset?t.pointerPercentageOffset.x:0,r=t.pointerPercentageOffset?t.pointerPercentageOffset.y:0,i=new d.Mi(50,50),o=n.subtract(new d.Mi(a*i.x,r*i.y)).subtract(new d.Mi(5,5));(0,E.xG)(b,o.x,o.y,e.id,"drag",l.zkO.USER),A()}},clickToInsert:!n,afterSuccessfulInsert:N,resource:{id:e.id,name:e.name||"",img:b},triggeredFrom:o,searchQuery:r,mini:n});return n&&!b?null:a.createElement(C,{mini:n,user:e},b?a.createElement(a.Fragment,null,a.createElement(x,{stampImageUrl:b,username:e.name||"",onPointerDown:L,dragging:null!==O,mini:n}),a.createElement(k,{dragState:O,imageUrl:b}),!t&&a.createElement(S,{username:e.name||e.handle||""})):a.createElement(a.Fragment,null,a.createElement(T,{mini:n}),!t&&a.createElement(S,{username:""})))}function T({mini:e}={}){return a.createElement("div",{className:s()(v.HG,{[v.ET]:e,[v.M4]:!e})},a.createElement("div",{className:s()(v.eP,v.iE)}),!e&&a.createElement("div",{className:s()(v.t$,v.OP)}))}function S({username:e}){return a.createElement("div",{title:e,className:v.OP},e)}function x(e){return a.createElement(c.GG,{recordingKey:"facestamp",dataTestId:`facestamp-${e.username}${e.mini?"-mini":""}`,onPointerDown:e.onPointerDown},a.createElement("img",{draggable:!1,src:e.stampImageUrl,className:s()(v.iE,{[v.Jy]:e.dragging,[v.dG]:e.mini}),alt:`profile stamp for ${e.username}`}))}function k(e){if(!e.dragState?.dragPosition||!e.dragState.grabbedPointerPercentageOffset)return null;let t=function(){let{zoomScale:e}=m.Y5.getViewportInfo();return new d.Mi(50,50).scale(e)}(),n=e.dragState.dragPosition.subtract(new d.Mi(e.dragState.grabbedPointerPercentageOffset.x*t.x,e.dragState.grabbedPointerPercentageOffset.y*t.y));return(0,r.createPortal)(a.createElement("img",{alt:"",className:s()(b.$J,{[b.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:n.x,top:n.y,width:t.x,height:t.y},src:e.imageUrl}),document.getElementById("fullscreen-root"))}},465448:(e,t,n)=>{n.d(t,{U5:()=>d,d0:()=>c,d2:()=>m,qK:()=>p});var a=n(411855),r=n(188507),i=n(720289),l=n(335682),o=n(707465),s=n(809073);function c(){let e=!!l.q5()?.org,t=(0,r.d4)(e=>(0,o.zg)(e.selectedView)&&!e.user);return!!(e&&!t)}function d(e,t=20){let n=m(e),i=(0,r.d4)(e=>e.faceStamps);return a.useMemo(()=>{let e=new Map;return n.forEach(t=>{e.set(t.id,t)}),i.forEach(t=>{e.set(t.id,t)}),Array.from(e.values()).slice(0,t)},[t,n,i])}let u=(e,t)=>(e.name||"").toLowerCase().includes(t.toLowerCase())||(e.handle||"").toLowerCase().includes(t.toLowerCase())||(e.email||"").toLowerCase().split("@")[0].includes(t.toLowerCase());function m(e){let t=(0,r.d4)(e=>e.recentlyUsed.faceStamps[s.$A.FigJam]);return a.useMemo(()=>t.map(e=>e.user).filter(t=>!e||u(t,e)),[t,e])}function p(){let e=(0,r.d4)(e=>e.recentlyUsed.faceStamps),t=c(),n=(0,i.o)();return a.useMemo(()=>n&&t?e.figjam.map(e=>e.user):[],[n,e,t])}},313148:(e,t,n)=>{n.d(t,{t:()=>i});var a=n(411855),r=n(522739);function i({text:e,description:t,onClick:n,onPointerDown:i,iconComponent:l,recordingKey:o,rightCaret:s}){return a.createElement(r.GG,{recordingKey:o,dataTestId:o,onClick:n,onPointerDown:i,className:"native_figjam_action_block--optionContainer--PAZPH"},a.createElement("div",{className:"native_figjam_action_block--actionBlockLeftSide--lGAtd native_figjam_action_block--actionBlockRightSide--lUQRE"},a.createElement("div",{className:"native_figjam_action_block--iconComponent--nQLDP"},l)),a.createElement("div",{className:"native_figjam_action_block--actionBlockRightSide--lUQRE"},a.createElement("div",{className:"native_figjam_action_block--textRow--yGuij"},a.createElement("div",{className:"native_figjam_action_block--text--S9XDd text--fontPos13--xW8hS text--_fontBase--QdLsd"},e)),a.createElement("div",{className:"native_figjam_action_block--description--FdkF2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},t)),s&&a.createElement("svg",{className:"native_figjam_action_block--rightCaret--mk9xP",width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.46967 2.46967L0.96967 6.96967L2.03033 8.03033L6 4.06066L9.96967 8.03033L11.0303 6.96967L6.53033 2.46967L6 1.93934L5.46967 2.46967Z",fill:"black"})))}},416333:(e,t,n)=>{n.d(t,{j6:()=>es,v7:()=>el,G0:()=>eu,fQ:()=>em,l7:()=>ec,Sn:()=>eo,Ox:()=>ei,vh:()=>ea,ue:()=>er,m_:()=>ed,qX:()=>en});var a=n(411855),r=n(188507),i=n(587670),l=n(86625),o=n(153234),s=n(939863),c=n(738274),d=n(662275),u=n(986270),m=n(737499),p=n(109388),_=n(629019),g=n.n(_),f=n(28752);function h(e){if(!e.dragState?.dragPosition||!e.dragState?.dragOffset)return null;let t=e.dragState.dragPosition.subtract(e.dragState.dragOffset);return(0,p.createPortal)(a.createElement("div",{className:g()(f.Az,{[f.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:t.x,top:t.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y}},e.icon),document.getElementById("fullscreen-root"))}var E=n(596256),y=n(964937),b=n(809831),v=n(894571),C=n(57150),w=n(867795),T=n(161405);function S(e){let t="whiteboard"===(0,b.lg)(),n=(0,T.F5)(),a=async a=>(e.insertAction(a),t&&(0,T.oM)({type:w.p.MORE,id:e.resource,source:e.triggeredFrom,options:{...n,query:e.searchQuery}}),await Promise.resolve());return(0,v.t)(e,{insertAction:a,dragPreviewPointerPosition:C.N.CENTERED,getDragPreviewSrc:()=>"data:image/svg+xml;utf8,"+(0,y.F)(e.icon),recordingKey:o.Pt("more",e.resource.toLowerCase())})}var x=n(831236),k=n(288300),N=n(809073),I=n(389211),A=n(491815),O=n(313148),L=n(16774),D=n(501972),R=n(813648),M=n(237870),P=n(746806),F=n(620597),B=n(746958);let U="delightful-toolbar-media-button",G="InsertMediaModal",K=(0,M.Ju)(function(){let e=(0,r.wA)(),t=(0,r.d4)(e=>!!e.modalShown?.data?.shouldMountCenter),n=a.useRef(null),l=t?{kind:"mountCenter"}:{kind:"buttonTarget",buttonTarget:U},{initialModalPosition:o,modalPosition:c,setModalPosition:u}=(0,R.ts)(l,157,320),m=a.useCallback(()=>{i.glU.triggerAction("set-tool-default",null),e(d.ES({type:G}))},[e]),_=a.useCallback(e=>{u(e)},[u]),g=!c||!!o?.equals(c);return(a.useEffect(()=>{let e=e=>{let t=p.findDOMNode(n.current?.getEl()),a=(0,D.Tc)(U);if(!t||!a)return;let r=t.contains(e.target),i=a.contains(e.target);!g||r||i||m()};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[m,g]),o)?a.createElement(P.vx,{ref:n,initialPosition:o,initialWidth:320,title:(0,s.t)("whiteboard.embeds.insert_embed_modal.title"),onClose:m,onDragStart:()=>i.glU.triggerActionInUserEditScope("set-tool-default",null),onDragEnd:_,dragHeaderOnly:!0,arrowRelativeX:t?void 0:160,arrowPosition:P.F_.BOTTOM,smallArrow:!0,containerClassName:B.jT,headerClassName:B.N1,isFigJam:!0},a.createElement("div",{className:B.hQ,"data-testid":"insert-media-modal"},a.createElement(F.q,{onSuccess:m}))):null},G);var V=n(511080),H=n(972283),z=n(487392);let W="figjam_universal_inserts",j=V.PW(),$=V.Ch(),q=V.oV(),Y=V.aO(),X=I.I5(),J=I.xb(),Z=I.xf(),Q=I.qY(),ee=I.ol(),et=V.Rz();function en(e){let t=function(e){switch(e){case"Table":return i.NLJ.TABLE;case"CodeBlock":return i.NLJ.CODE_BLOCK;case"MindMap":return i.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS;case"Text":return i.NLJ.TYPE;case"Section":return i.NLJ.SECTION;default:throw Error(`Unknown tool: ${e}`)}}(e);return e=>{let{dropPosition:n,isClick:a}=e;a?l.l7.user("click-insert-tool",()=>i.glU.createNodeAtViewportCenterFromTool(t)):l.l7.user("drag-insert-tool",()=>i.glU.createNodeFromTool(t,n.x,n.y))}}function ea(){let e=(0,L.b)(),t=(0,r.wA)(),n=(0,r.d4)(e=>e.user?.id),{currentTab:i,searchQuery:l}=(0,A.cX)(),c=()=>{t(u.ay({currentUserId:n,storeInRecentsKey:N.$A.FigJam,item:{id:"Table",type:N.vt.WhiteboardTool}})),e()},{dragState:d,onInsertableResourcePointerDown:m}=(0,x.fo)({resource:"Table",insertAction:e=>{en("Table")(e),c()},clickToInsert:!0,afterSuccessfulInsert:c,triggeredFrom:(0,k.Vq)(i),searchQuery:l});return a.createElement(a.Fragment,null,a.createElement(O.t,{text:(0,s.t)("whiteboard.inserts.table_title"),description:(0,s.t)("whiteboard.inserts.table_description"),onPointerDown:m,iconComponent:j,recordingKey:o.Pt("inserts","more","table")}),a.createElement(E.I,{dragState:d}))}function er(){let e=(0,L.b)(),{currentTab:t,searchQuery:n}=(0,A.cX)(),r=()=>{e()},{dragState:i,onInsertableResourcePointerDown:l}=(0,x.fo)({resource:"Text",insertAction:e=>{en("Text")(e),r()},clickToInsert:!0,afterSuccessfulInsert:r,triggeredFrom:(0,k.Vq)(t),searchQuery:n,icon:$});return a.createElement(a.Fragment,null,a.createElement(O.t,{text:(0,s.t)("whiteboard.inserts.text_title"),description:(0,s.t)("whiteboard.inserts.text_description"),onPointerDown:l,iconComponent:$,recordingKey:o.Pt("inserts","more","text")}),a.createElement(E.I,{dragState:i,icon:$}))}function ei(){let e=(0,L.b)();return a.createElement(a.Fragment,null,a.createElement(O.t,{text:(0,s.t)("whiteboard.inserts.stamp_title"),description:(0,s.t)("whiteboard.inserts.stamp_description"),onPointerDown:()=>{(0,H.AH)({source:W}),e()},iconComponent:q,recordingKey:o.Pt("inserts","more","stamp")}))}function el(){let e=(0,L.b)();return a.createElement(a.Fragment,null,a.createElement(O.t,{text:(0,s.t)("whiteboard.inserts.comments_title"),description:(0,s.t)("whiteboard.inserts.comments_description"),onPointerDown:()=>{e(),i.glU.triggerActionInUserEditScope("set-tool-comments",{source:W})},iconComponent:et,recordingKey:o.Pt("inserts","more","comments")}))}function eo(){let e=(0,L.b)(),{currentTab:t,searchQuery:n}=(0,A.cX)(),r=()=>{e()},{dragState:i,onInsertableResourcePointerDown:l}=(0,x.fo)({resource:"Section",insertAction:e=>{en("Section")(e),r()},clickToInsert:!0,afterSuccessfulInsert:r,triggeredFrom:(0,k.Vq)(t),searchQuery:n,icon:Y});return a.createElement(a.Fragment,null,a.createElement(O.t,{text:(0,s.t)("whiteboard.inserts.section_title"),description:(0,s.t)("whiteboard.inserts.section_description"),onPointerDown:l,iconComponent:Y,recordingKey:o.Pt("inserts","more","section")}),a.createElement(E.I,{dragState:i,icon:Y}))}function es(){let e=(0,L.b)(),t=(0,r.wA)(),n=(0,r.d4)(e=>e.user?.id),{currentTab:i,searchQuery:l}=(0,A.cX)(),c=()=>{t(u.ay({currentUserId:n,storeInRecentsKey:N.$A.FigJam,item:{id:"CodeBlock",type:N.vt.WhiteboardTool}})),e()},{dragState:d,onInsertableResourcePointerDown:m}=(0,x.fo)({resource:"CodeBlock",insertAction:e=>{en("CodeBlock")(e),c()},clickToInsert:!0,afterSuccessfulInsert:c,triggeredFrom:(0,k.Vq)(i),searchQuery:l});return a.createElement(a.Fragment,null,a.createElement(O.t,{text:(0,s.t)("whiteboard.inserts.code_block_title"),description:(0,s.t)("whiteboard.inserts.code_block_description"),onPointerDown:m,iconComponent:X,recordingKey:o.Pt("inserts","more","codeBlock")}),a.createElement(E.I,{dragState:d}))}function ec(){let e=(0,L.b)(),t=(0,r.wA)(),n=(0,r.d4)(e=>e.user?.id),{currentTab:i,searchQuery:c}=(0,A.cX)(),d=()=>{t(u.ay({currentUserId:n,storeInRecentsKey:N.$A.FigJam,item:{id:"MindMap",type:N.vt.WhiteboardTool}})),e()},m=l.nc.user("insert-mindmap",e=>{en("MindMap")(e),d()}),{dragState:p,onInsertableResourcePointerDown:_}=(0,x.fo)({resource:"MindMap",insertAction:m,clickToInsert:!0,afterSuccessfulInsert:d,triggeredFrom:(0,k.Vq)(i),searchQuery:c});return a.createElement(a.Fragment,null,a.createElement(O.t,{text:(0,s.t)("whiteboard.inserts.mind_map_title"),description:(0,s.t)("whiteboard.inserts.mind_map_description"),onPointerDown:_,iconComponent:ee,recordingKey:o.Pt("inserts","more","mindMap")}),a.createElement(E.I,{dragState:p}))}function ed(){let e=(0,L.b)(),{currentTab:t,searchQuery:n}=(0,A.cX)(),r=(0,z.MR)(),{dragState:i,onInsertableResourcePointerDown:l}=S({resource:"Timer",icon:J,insertAction:()=>{r({source:z.OO.INSERTS_MENU}),e()},clickToInsert:!0,afterSuccessfulInsert:e,triggeredFrom:(0,k.Vq)(t),searchQuery:n});return a.createElement(a.Fragment,null,a.createElement(O.t,{text:(0,s.t)("whiteboard.inserts.timer_title"),description:(0,s.t)("whiteboard.inserts.timer_description"),onPointerDown:l,iconComponent:J,recordingKey:o.Pt("inserts","more","timer")}),a.createElement(h,{icon:J,dragState:i}))}function eu(){let e=(0,r.wA)(),t=(0,L.b)(),{currentTab:n,searchQuery:l}=(0,A.cX)(),d=()=>{i.glU.triggerAction("set-tool-default",null),i.glU.triggerAction("place",{source:"MEDIA_MODAL"}),e(c.qC({open:!0})),t()},{dragState:u,onInsertableResourcePointerDown:p}=S({resource:"Image",icon:Z,insertAction:d,clickToInsert:!0,afterSuccessfulInsert:t,triggeredFrom:(0,k.Vq)(n),searchQuery:l}),_=!m.BI()?.shouldOptimizeForIpadApp;return a.createElement(a.Fragment,null,a.createElement(O.t,{text:(0,s.t)("whiteboard.inserts.media_title"),description:(0,s.t)("whiteboard.inserts.media_description"),onPointerDown:_?p:void 0,onClick:_?void 0:d,iconComponent:Z,recordingKey:o.Pt("inserts","more","images")}),a.createElement(h,{icon:Z,dragState:u}))}function em(){let e=(0,r.wA)(),t=(0,L.b)(),{currentTab:n,searchQuery:l}=(0,A.cX)(),{dragState:c,onInsertableResourcePointerDown:u}=S({resource:"Link",icon:Q,insertAction:()=>{i.glU.triggerAction("set-tool-default",null),e(d.$O({type:K.type,data:{shouldMountCenter:!0}})),t()},clickToInsert:!0,afterSuccessfulInsert:t,triggeredFrom:(0,k.Vq)(n),searchQuery:l});return a.createElement(a.Fragment,null,a.createElement(O.t,{text:(0,s.t)("whiteboard.inserts.links_title"),description:(0,s.t)("whiteboard.inserts.links_description"),onPointerDown:u,iconComponent:Q,recordingKey:o.Pt("inserts","more","links")}),a.createElement(h,{icon:Q,dragState:c}))}},818198:(e,t,n)=>{n.d(t,{C:()=>u});var a=n(411855),r=n(188507),i=n(297666),l=n(358145),o=n(902139),s=n(728325),c=n(813648),d=n(231472);function u(e,t,n,u,m,p){let[_,g]=a.useState(e()),[f,h]=a.useState(!1),[E,y]=a.useState(!1);a.useLayoutEffect(()=>{let t=(0,i.s)(()=>{n===d.t.PINNED_AND_DOCKED_LEFT&&y(!0),g(e())},100);return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e,n]);let b=(0,r.wA)(),v=a.useCallback(()=>{b(o.jy({initialX:u.x,initialY:u.y,pinned:d.t.PINNED_AND_DOCKED_LEFT})),y(!0),t(u),s.VU.get("set-tool-default","toolbar")()},[b,u,t,y]);a.useEffect(()=>{n===d.t.NOT_PINNED&&m&&p&&(b(o.jy({initialX:m.x,initialY:m.y,pinned:d.t.NOT_PINNED})),y(!0),t(m))},[b,t,n,m,p]);let C=(0,r.d4)(e=>e.mirror?.appModel.showUi),w=(0,l.ZC)(C),T=(0,c.LR)();return a.useEffect(()=>{w&&!C?T():!w&&C&&n===d.t.PINNED_AND_DOCKED_LEFT&&v()},[T,n,w,v,C]),a.useEffect(()=>{E&&y(!1)},[E]),{bounds:_,showLeftPinBound:f,setShowLeftPinBound:h,shouldSnapToPosition:E,setPinned:v}}},766926:(e,t,n)=>{n.d(t,{G:()=>b,y:()=>v});var a=n(411855),r=n(188507),i=n(775419),l=n(587670),o=n(782112),s=n(939863),c=n(662275),d=n(101505),u=n(226055),m=n(457025),p=n(820642),_=n(498606),g=n(363926),f=n(27928),h=n(435898),E=n(507786),y=n(663364);let b="templates_toolbar";function v(){let e=(0,u.GS)(),t=(0,r.wA)(),n=(0,r.d4)(e=>e.modalShown?.type===f.PH.type),v=!(0,o.q8)()&&(0,h.Uy)(),C=(0,s.t)("whiteboard.inserts.templates"),w={isActive:n,onClick:()=>{n?t(c.Ce()):(m.oW.trigger("action",l.KWd.CLEAR),(0,f.KF)(t,{triggeredFrom:"toolbar",templateInsertionLocation:p.RD.CURRENT_FILE}))},trackingProperties:{trackingDescriptor:d.c.TEMPLATES_TOOLBAR_ITEM_CLICKED},onboardingKey:b};return e?a.createElement(E.Z,{tooltip:{type:_.Ib.TEXT,text:C},...w},a.createElement(i.Q,null)):a.createElement(g.P,{icon:y.A,addLeftMargin:!v,tooltipText:C,...w})}},66154:(e,t,n)=>{n.d(t,{BI:()=>S,Ec:()=>I,Lz:()=>A,Mi:()=>x,Nm:()=>k,_G:()=>N,jA:()=>C,lj:()=>T,rQ:()=>O,yG:()=>w});var a=n(411855),r=n(188507),i=n(587670),l=n(281381),o=n(163023),s=n(901536),c=n(939863),d=n(293017),u=n(99506),m=n(243987),p=n(397065),_=n(279145),g=n(746806),f=n(697338),h=n(601538),E=n(704728),y=n(400232),b=n(951864);function v(){return a.createElement(l.Ex,{color:l.zE.DEFAULT,text:(0,c.t)("pro_onboarding.professional"),className:s.cx.colorTextBrand.colorBgSelectedSecondary.font11.$})}function C({dismissModal:e}){let t="team-view-new-project-cta";return a.createElement(f.Pp,{dismissModal:e,pointerTargetKey:t,calloutTargetKey:t,arrowPosition:g.F_.TOP,title:(0,c.t)("pro_onboarding.hello_organized_files"),subtitle:(0,c.t)("pro_onboarding.now_that_you_re_on_a_professional_team_move_your_files_into_project"),width:320,shouldCenterArrow:g.EL.FALLBACK,badge:a.createElement(v,null)})}function w({dismissModal:e,canCreateFigjamBoard:t}){let n="folder-page-view-new-file-cta";return a.createElement(f.Pp,{dismissModal:e,pointerTargetKey:n,calloutTargetKey:n,arrowPosition:g.F_.TOP,title:t?(0,c.t)("pro_onboaridng.so_many_files_and_boards"):(0,c.t)("pro_onboaridng.so_many_files"),subtitle:t?(0,c.t)("pro_onboaridng.you_now_get_unlimited_design_files_pages_and_figjam_boards"):(0,c.t)("pro_onboaridng.you_now_get_unlimited_design_files"),width:320,shouldCenterArrow:g.EL.FALLBACK,badge:a.createElement(v,null)})}function T({dismissModal:e}){let t="meeting-panel-button";return a.createElement(f.Pp,{dismissModal:e,pointerTargetKey:t,calloutTargetKey:t,arrowPosition:g.F_.TOP,title:(0,c.t)("pro_onboarding.start_a_voting_session"),subtitle:(0,c.t)("pro_onboarding.if_you_want_to_reach_a_decision_keep_things_simple_with_a_figjam_vote"),width:320,badge:a.createElement(v,null)})}function S({dismissModal:e}){return a.createElement(f.Pp,{dismissModal:e,pointerTargetKey:"pages-panel-toggle",calloutTargetKey:"pages-panel-toggle",arrowPosition:g.F_.LEFT_TITLE,title:(0,c.t)("rcs.pro_trials_onboarding.unlimited_pages_title"),subtitle:(0,c.tx)("rcs.pro_trials_onboarding.unlimited_pages_subtitle",{maxFreePages:m.LF[u._Y.DESIGN]}),width:320,badge:a.createElement(v,null)})}function x({dismissModal:e}){let t=(0,r.d4)(e=>e.multiplayer.allUsers.length>1),n=t?"audio-nux-key":h.v4,i=t?(0,c.t)("pro_onboarding.if_other_people_are_in_your_file_select_the_headphones"):(0,c.t)("rcs.pro_trials_onboarding.audio_subtitle_without_multiple_users");return a.createElement(f.Pp,{dismissModal:e,pointerTargetKey:n,calloutTargetKey:n,arrowPosition:g.F_.TOP,title:(0,c.t)("rcs.pro_trials_onboarding.audio_title"),subtitle:i,width:320,badge:a.createElement(v,null)})}function k({dismissModal:e}){return a.createElement(f.Pp,{dismissModal:e,pointerTargetKey:"file-workshop-row",calloutTargetKey:"file-workshop-button",arrowPosition:g.F_.RIGHT_TITLE,title:(0,c.t)("rcs.pro_trials_onboarding.open_sessions_title"),subtitle:(0,c.t)("rcs.pro_trials_onboarding.open_sessions_subtitle"),width:300,badge:a.createElement(v,null)})}function N({dismissModal:e}){let t=[(0,c.t)("rcs.pro_trials_onboarding.password_protection_first_instruction",{linkAccessOptionText:(0,c.t)("file_access_row.anyone_with_the_link_and_password")}),(0,c.t)("rcs.pro_trials_onboarding.password_protection_second_instruction")];return a.createElement(f.Pp,{dismissModal:e,pointerTargetKey:"file-access-row",calloutTargetKey:"'file-share-audience-select-key'",arrowPosition:g.F_.RIGHT_TITLE,title:(0,c.t)("rcs.pro_trials_onboarding.password_protection_title"),width:320,instructions:t,disableClickOutsideToHide:!0,badge:a.createElement(v,null)})}function I({dismissModal:e}){let t=(0,r.wA)(),n=(0,r.d4)(e=>Object.keys(e.library.local.components).length>0),l=(0,r.d4)(e=>e.mirror.appModel.keyboardShortcuts),s=(0,_.c1)(l,"create-symbol");a.useEffect(()=>{t(d.FP({tab:i.xae.ASSETS}))},[]);let u=a.createElement(o.B,{svg:b.A,title:(0,c.t)("rcs.pro_trials_onboarding.component_publishing_team_library_icon"),role:"img",ariaLabel:(0,c.t)("rcs.pro_trials_onboarding.component_publishing_team_library_icon"),autosize:!0}),m=a.createElement(o.B,{svg:y.A,title:(0,c.t)("rcs.pro_trials_onboarding.component_publishing_create_component_icon"),role:"img",ariaLabel:(0,c.t)("rcs.pro_trials_onboarding.component_publishing_create_component_icon"),autosize:!0}),h=[a.createElement(a.Fragment,null,(0,c.tx)("rcs.pro_trials_onboarding.component_publishing_second_instruction_with_components",{teamLibraryIcon:u})),(0,c.t)("rcs.pro_trials_onboarding.component_publishing_third_instruction_with_components",{publishButtonText:(0,c.t)("design_systems.libraries_modal.publish")})],E=[(0,c.t)("rcs.pro_trials_onboarding.component_publishing_first_instruction_without_components"),a.createElement(a.Fragment,null,(0,c.tx)("rcs.pro_trials_onboarding.component_publishing_second_instruction_without_components",{createComponentIcon:m,createComponentShortcut:s}))],C=n?(0,c.t)("rcs.pro_trials_onboarding.component_publishing_title_with_components"):(0,c.t)("rcs.pro_trials_onboarding.component_publishing_title_without_components"),w=n?void 0:(0,c.t)("rcs.pro_trials_onboarding.component_publishing_subtitle_without_components");return a.createElement(f.Pp,{dismissModal:e,pointerTargetKey:p.D,calloutTargetKey:p.D,arrowPosition:g.F_.LEFT_TITLE,title:C,subtitle:w,width:320,instructions:n?h:E,badge:a.createElement(v,null)})}function A({dismissModal:e}){let t=a.createElement(o.B,{svg:E.A,title:(0,c.t)("rcs.pro_trials_onboarding.video_icon"),role:"img",ariaLabel:(0,c.t)("rcs.pro_trials_onboarding.video_icon"),autosize:!0}),n=(0,c.tx)("rcs.pro_trials_onboarding.video_subtitle",{imageOrVideoIcon:t});return a.createElement(f.Pp,{dismissModal:e,pointerTargetKey:"tool-place-image",calloutTargetKey:"tool-place-image",arrowPosition:g.F_.LEFT_TITLE,title:(0,c.t)("rcs.pro_trials_onboarding.video_title"),subtitle:n,width:320,badge:a.createElement(v,null)})}function O({dismissModal:e}){let t="local-variables-panel-title";return a.createElement(f.Pp,{dismissModal:e,pointerTargetKey:t,calloutTargetKey:t,arrowPosition:g.F_.LEFT_TITLE,title:(0,c.t)("pro_onboarding.variables_save_you_time"),subtitle:(0,c.tx)("pro_onboarding.use_variables_in_components_and_prototypes"),width:320,badge:a.createElement(v,null)})}},974898:(e,t,n)=>{n.d(t,{e:()=>i});var a=n(237870),r=n(648022);let i="WORKSHOP_ONBOARDING";(0,a.Ju)(r.mG,i)},648022:(e,t,n)=>{n.d(t,{mG:()=>U,v6:()=>K,kO:()=>G});var a=n(411855),r=n(188507),i=n(69814),l=n(629019),o=n.n(l),s=n(38329),c=n(737947),d=n(563706),u=n(286640),m=n(761870),p=n(195847),_=n(346709),g=n(946689),f=n(950964),h=n(939863),E=n(838e3),y=n(662275),b=n(650769),v=n(672517),C=n(198371),w=n(988022),T=n(737499),S=n(335682),x=n(860178),k=n(227338),N=n(793670),I=n(160018),A=n(309325),O=n(488578),L=n(479296);let D="workshop_modals--textContainer--Fn3Oc",R="workshop_modals--disclaimer--wFoqk text--fontPos14Whyte--pEiDq text--_fontBaseWhyte--efAjI",M="workshop_modals--figjamTryDisclaimer--g4iHA text--fontPos12--YsUAh text--_fontBase--QdLsd";function P({user:e,file:t}){let n=(0,r.wA)(),i=(0,a.useMemo)(()=>d.Ay.isMeetDevice?(0,h.t)("figjam_try.google_meet_user_name"):localStorage.getItem((0,k.H)())||"",[]),[l,o]=(0,a.useState)(i),[s,u]=(0,a.useState)(!1),_=(0,C.nF)(),g=_.enabled?_.id:null,f=!e,v=!!t?.isTryFile;return{openLoginModal:()=>{n(m.Ts({origin:"logged_out_footer",formState:p.qB.SIGN_IN,redirectUrl:c.Ay.location.pathname})),n(y.to({type:N.x,data:{headerText:"Log In",disableClickOutsideToHide:!0}}))},name:l,onNameChanged:e=>{o(e.target.value)},isNameError:s,onSubmit:a=>{if(a.preventDefault(),a.stopPropagation(),f&&(null==l||0===l.trim().length)){u(!0);return}f?(n(b.cq({name:l})),v&&t?.name===(0,h.t)("fullscreen.fullscreen_view_selector.untitled")&&n(E.S({userName:l,file_key:t.key}))):G(g,e.email),(0,w.Cu)({name:"Jam Session access file button",isAnonymous:f,isFigjamTry:v,userID:e?.id??null,userName:f?l:null,fileKey:t?.key}),n(y.Ce())},onClose:e=>{e.preventDefault(),e.stopPropagation(),n(b.cq({name:(0,h.t)("figjam_try.google_meet_user_name")})),v&&t?.name===(0,h.t)("fullscreen.fullscreen_view_selector.untitled")&&n(E.S({userName:l,file_key:t.key})),n(y.Ce())}}}function F({file:e}){let{openLoginModal:t,name:n,onNameChanged:r,isNameError:i,onSubmit:l,onClose:s}=P({file:e}),c=(0,T.BI)(),u=!c?.shouldOptimizeForIpadApp;return a.createElement(a.Fragment,null,a.createElement("img",{src:"https://static.figma.com/uploads/ff519560b46a66403ec0c45887a8f336270b7033",alt:"",className:"workshop_modals--figjamTryImage--pnbwF"}),a.createElement("div",{className:D},a.createElement("h1",{className:"workshop_modals--figjamTryHeader--5gdQ2 text--fontPos20--Bcz97 text--_fontBase--QdLsd"},(0,h.tx)("figjam_try.onboarding_title"))),a.createElement(f.k0,{multiple:1}),a.createElement("div",{className:D},a.createElement("div",{className:"workshop_modals--figjamTrySubtitle--XIYgl text--fontPos13--xW8hS text--_fontBase--QdLsd"},(0,h.tx)("figjam_try.onboarding_subtext"))),a.createElement(f.k0,{multiple:3}),d.Ay.isMeetDevice?a.createElement(g.nD,{type:"close",fullWidth:!0,onClick:s},(0,h.tx)("figjam_try.onboarding_submit")):a.createElement("form",{onSubmit:l},a.createElement(g.il,{autoFocus:!0,className:o()("workshop_modals--figjamTryInput--vCslR",i&&"workshop_modals--figjamTryInputError--wUBqP"),placeholder:(0,h.t)("figjam_try.name_input_placeholder"),onChange:r,value:n}),i&&a.createElement("div",{className:"workshop_modals--figjamTryError--tCLy- text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,h.tx)("figjam_try.onboarding_name_validation_error")),a.createElement(f.k0,{multiple:2}),a.createElement(g.nD,{type:"submit",fullWidth:!0},(0,h.tx)("figjam_try.onboarding_submit"))),a.createElement(f.k0,{multiple:3}),a.createElement("div",{className:M},(0,h.tx)("figjam_try.onboarding_disclaimer",{tos:a.createElement(A.V,{url:d.Ay.isMeetDevice?I.A:I.Uw,title:(0,h.t)("figjam_try.onboarding_disclaimer_tos")}),privacy_policy:a.createElement(A.V,{url:d.Ay.isMeetDevice?I.bO:I.JD,title:(0,h.t)("figjam_try.onboarding_disclaimer_privacy_policy")})})),a.createElement(f.k0,{multiple:1}),u&&!d.Ay.isMeetDevice&&a.createElement("div",{className:M},(0,h.tx)("figjam_try.already_have_an_account",{log_in:a.createElement(g.Us,{className:"workshop_modals--figjamTryInlineLink--R8U28",onClick:t,trusted:!0},(0,h.tx)("figjam_try.already_have_an_account_log_in"))})))}function B({user:e,file:t}){let{openLoginModal:n,name:r,onNameChanged:i,isNameError:l,onSubmit:o}=P({user:e,file:t}),s=!e;return a.createElement(a.Fragment,null,a.createElement("div",{className:D},a.createElement("h1",{className:"workshop_modals--header--1TwZ- text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI"},(0,h.tx)("whiteboard.open_sessions.onboarding_title")),a.createElement("h1",{className:"workshop_modals--headerFilename--Z60l0 workshop_modals--header--1TwZ- text--fontPos24Whyte--gYiFz text--_fontBaseWhyte--efAjI"},t?.name)),a.createElement(f.k0,{multiple:2}),a.createElement("div",{className:D},a.createElement("div",{className:"workshop_modals--subtitle---dQsr text--fontPos16Whyte--OfwSP text--_fontBaseWhyte--efAjI"},(0,h.tx)("whiteboard.open_sessions.onboarding_subtext"))),a.createElement(f.k0,{multiple:2}),a.createElement("form",{onSubmit:o},s&&!d.Ay.isMeetDevice&&a.createElement(a.Fragment,null,a.createElement(_.F0,{autoFocus:!0,placeholder:(0,h.t)("whiteboard.open_sessions.onboarding_name_input_placeholder"),onChange:i,value:r}),l&&a.createElement("div",{className:"workshop_modals--brandError--wMV-m text--fontPos16Whyte--OfwSP text--_fontBaseWhyte--efAjI"},(0,h.tx)("whiteboard.open_sessions.onboarding_name_validation_error")),a.createElement(f.k0,{multiple:2})),a.createElement(f.Wd,{type:"submit"},s?(0,h.t)("whiteboard.open_sessions.onboarding_anonymous_submit"):(0,h.t)("whiteboard.open_sessions.onboarding_viewer_submit",{email:e.email}))),s&&a.createElement(a.Fragment,null,a.createElement(f.k0,{multiple:2}),a.createElement("div",{className:D},a.createElement("div",{className:R},(0,h.tx)("whiteboard.open_sessions.onboarding_disclaimer",{button_text:s?(0,h.t)("whiteboard.open_sessions.onboarding_disclaimer_access_file"):(0,h.t)("whiteboard.open_sessions.onboarding_disclaimer_continue"),tos:a.createElement(A.V,{url:I.Uw,title:(0,h.t)("whiteboard.open_sessions.onboarding_disclaimer_tos")}),privacy_policy:a.createElement(A.V,{url:I.JD,title:(0,h.t)("whiteboard.open_sessions.onboarding_disclaimer_privacy_policy")})})),!d.Ay.isMeetDevice&&a.createElement(a.Fragment,null,a.createElement(f.k0,{multiple:1}),a.createElement("div",{className:R},(0,h.tx)("whiteboard.open_sessions.already_have_an_account",{log_in:a.createElement(g.Us,{className:"workshop_modals--inlineLink--knuU8",onClick:n,trusted:!0},(0,h.tx)("whiteboard.open_sessions.already_have_an_account_log_in"))}))))))}function U(){let e=(0,x.iZ)(),t=(0,S.q5)(),n=!!t?.isTryFile,r=s.D.getState().selectedView;return(r?.view==="fullscreen"?r.claim:null)?null:a.createElement(O.aF,{disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,className:"workshop_modals--workshopOnboardModal---pZ-B"},a.createElement(v.fu,{name:"Jam Session Onboarding Modal",properties:{isAnonymous:!e,isFigjamTry:n,userID:e?.id??null,fileKey:t?.key}},a.createElement(i.i,null,n?a.createElement(F,{file:t}):a.createElement(B,{user:e,file:t}))))}let G=(0,L.D)((e,t)=>{let n=(0,u.DN)();try{let a=n.get(K(e));if(!a){n.set(K(e),[t]);return}let r=JSON.parse(a);r.includes(t)||(r.push(t),n.set(K(e),r))}catch(a){n.set(K(e),[t])}});function K(e){return`workshop_logged_in_accpeted_${e}`}},705940:(e,t,n)=>{n.d(t,{H:()=>_,_:()=>g});var a=n(411855),r=n(634832),i=n(587670),l=n(707458),o=n(629019),s=n.n(o),c=n(694111),d=n(992271),u=n(223556),m=n(802161),p=n(242979);function _({children:e,initialViewerSize:t,isDeviceFrameShown:n}){let r;return n&&(r=l.q.instance.getCurrentPage()?.prototypeDevice),a.createElement(g,{initialViewerSize:t,isDeviceFrameShown:n,prototypeDevice:r,isInlinePreview:!0},e)}function g({children:e,initialViewerSize:t,isDeviceFrameShown:n,prototypeDevice:l,isInlinePreview:o}){let _="data:,",g="",f={},h=!1,E=1,y=!1;if(n){(0,r.assertNotNullish)(l,"prototypeDevice should be set when device frame is shown");let{presetIdentifier:e,rotation:n}=l,a=d.hY[e];if(o){let e=a?.inlinePreviewInfo;(0,r.assertNotNullish)(e,"inlinePreviewDeviceData should exist since device is supported for inline preview")}_=a.url,h=(0,c.W)(e),y=n===i.xOL.CCW_90;let s=a.getI18nDeviceName(),m=a.getI18nStyleName();g=`${s} (${m})`;let{idealDeviceSize:p,framePresetSize:b,offset:v}=(0,u.is)(e,n),C=(0,u.Ho)(t,b,p);E=C.x/C.y;let w=(0,u.Ho)(t,b,v),T={x:t.x/C.x*100,y:t.y/C.y*100},S={x:w.x/C.x*100,y:w.y/C.y*100};f={position:"absolute",width:`${T.x}%`,height:`${T.y}%`,left:`${S.x}%`,top:`${S.y}%`}}let b=n?p.qW:m.Wc,v=s()({[m.Wc]:!0,[p.Cb]:n,[p.Q$]:h});return a.createElement("div",{className:b},n&&(y?(()=>{let e=1/E;return a.createElement("div",{style:{aspectRatio:E}},a.createElement("img",{src:_,className:s()(p.Q0,p.mT,p.M4),style:{width:`${100*e}%`},alt:g,"data-testid":"inline-preview-device-image"}))})():a.createElement("img",{src:_,className:p.M4,alt:g,"data-testid":"inline-preview-device-image"})),a.createElement("div",{style:f,className:v},e))}},927990:(e,t,n)=>{n.d(t,{u:()=>u});var a=n(411855),r=n(215122),i=n(587670),l=n(86625),o=n(534611),s=n(118615),c=n(776250),d=n(356390);function u({inheritStyleKeyField:e,initialStyleCreationPaint:t,isCreatingFromSelection:n,trackingOptions:u,shouldUseEyedropperStyleCreationFlow:m}){let[p,_]=a.useState(null),g=a.useRef(!1),f=l.nc.user("create-style",()=>{if(g.current=!0,p){let{key:e,version:t}=p,n=i.Pt4.getSoftDeletedStyleNodeId(e,t);return d.Y5.restoreStyle(n),(0,c.sx)("Style Created",{styleType:u.styleType,styleKey:p.key,styleVersion:p.version}),n}});return a.useEffect(()=>{let a=l.l7.system("create-soft-deleted-style",()=>(function({initialStyleCreationPaint:e,isCreatingFromSelection:t,inheritStyleKeyField:n,shouldUseEyedropperStyleCreationFlow:a}){if(a)return i.OmW.createSoftDeletedStyleForEyedropper();if(!e)return i.glU.createSoftDeletedStyle(n,"","",t);{let t=(0,s.GP)(e);return i.Osy.createSoftDeletedStyleFromPaintData(t,"")}})({initialStyleCreationPaint:t,inheritStyleKeyField:e,isCreatingFromSelection:n,shouldUseEyedropperStyleCreationFlow:m}));if(!a){_(null);return}return _(a),()=>{i.glU.selectStyle(r.n3.INVALID,r.IA.INVALID),l.l7.system("style-creation-cleanup",()=>{if(a&&!g.current){let t=i.Pt4.getSoftDeletedStyleNodeId(a.key,a.version);i.glU.applyStyleToSelection(e,o.AD,!0),i.glU.hardDeleteSoftDeletedNode(t)}})}},[t,e,n,m]),{styleRef:p,createStyle:f}}},468829:(e,t,n)=>{n.d(t,{w:()=>u});var a=n(411855),r=n(629019),i=n.n(r),l=n(966712),o=n(901536),s=n(939863),c=n(422237),d=n(854194);let u=(0,c.ex)("ai_features_tooltip",function(){return(0,l.kc)().figjam_synthesize_handbrake?a.createElement("div",{className:o.cx.flex.flexColumn.justifyCenter.$},a.createElement("p",{className:i()(d.Qq)},(0,s.t)("whiteboard.inline_menu.ai_quick_actions_disabled_header")),a.createElement("p",{className:i()(d.Qq)},(0,s.t)("whiteboard.inline_menu.ai_quick_actions_disabled_try_again_later"))):a.createElement("span",null,(0,s.t)("whiteboard.inline_menu.ai_quick_actions_button_text"))})},625693:(e,t,n)=>{n.d(t,{s:()=>tE});var a=n(411855),r=n(188507),i=n(891093),l=n(226055),o=n(335682),s=n(860178),c=n(902938),d=n(327017),u=n(571232),m=n(636751),p=n(629019),_=n.n(p),g=n(563706),f=n(939863),h=n(29680),E=n(866564),y=n(590695),b=n(498606),v=n(7959),C=n(976930),w=n(842439),T=n(588930);let S="voice_widget--modal--xsQ2A",x="voice_widget--show--O6ORx voice_widget--modal--xsQ2A",k="voice_widget--icon--wW-wb",N="voice_widget--iconContainer--CuKNM",I="voice_widget--muteButtonPosition--J282V",A="voice_widget--topRow--O1wj-",O="voice_widget--voiceModalPanel--KD-J1";function L(e){let{fileKey:t}=e;var{userIdsInCall:n}=(0,u.W5)(t);let r=n.size,i=(0,h.aV)(),l=(0,s.iZ)();a.useEffect(()=>{!g.XN&&l?.id&&!n.has(l.id)&&(0,E.w$)(r)},[r,l?.id,n]);let o=!i&&!g.XN;return((0,y.N)({isVisible:o}),o)?a.createElement("div",{className:_()(S,{[x]:!0})},a.createElement(v.Id,{className:O},a.createElement("div",{className:A},a.createElement("div",{className:"voice_widget--joinModalCountGroup--zxI6Q"},a.createElement(C.A.HeadphonesIcon,{className:T.QH,size:24}),n.size),a.createElement(w.K,{fileKey:e.fileKey,"data-tooltip-type":b.Ib.TEXT,"data-tooltip":(0,f.t)("collaboration.voice.join_conversation"),isJoinWidget:!0,"data-onboarding-key":"audio-nux-key"},(0,f.tx)("collaboration.voice.join"))))):a.createElement(a.Fragment,null)}var D=n(520411),R=n(139689),M=n(182550),P=n(36381),F=n(27087),B=n(46481),U=n(738269),G=n(662275),K=n(988022),V=n(373205),H=n(338400),z=n(325538),W=n(928491),j=n(752019),$=n(281381),q=n(163023),Y=n(507877),X=n(318812),J=n(728587),Z=n(227795);let Q="captions_dialog--showGradient--ZAHRk";var ee=n(727507),et=n(554653);let en="DROPDOWN_TYPE_CAPTIONS_DIALOG_TYPE_SIZE";function ea({caption:e,user:t}){let n=e.userId+"_"+e.timestamp;return a.createElement("div",{className:"captions_dialog--captionRow--pgS-N",key:n},a.createElement("div",null,a.createElement(W.Ro,{className:"captions_dialog--avatar--ISexR",entity:{...t,id:e.userId},size:24}),a.createElement("div",{className:"captions_dialog--name--SmWv6"},t?t.name:e.userId)),e.text.map((e,t)=>a.createElement("div",{className:"captions_dialog--paragraph--SjDQd",key:n+"_"+t},e.map((e,r)=>a.createElement("div",{className:"captions_dialog--sentence--SJkHn",key:n+"_"+t+"_"+r},`${e} `)))))}let er=()=>({small:{style:"captions_dialog--smallText--aUeBx",label:(0,f.t)("collaboration.voice.small")},medium:{style:"captions_dialog--mediumText--ODxEN",label:(0,f.t)("collaboration.voice.medium")},large:{style:"captions_dialog--largeText---t1d2",label:(0,f.t)("collaboration.voice.large")},x_large:{style:"captions_dialog--xlargeText--C60DA",label:(0,f.t)("collaboration.voice.x_large")}}),ei=Date.now();function el({call:e}){let t=er(),[n,i]=a.useState([]),[l,s]=a.useState(t.small.style),[c,d]=a.useState(!1),[m,p]=a.useState(!1),[_,g]=a.useState(!1),h=(0,o.q5)();if(!h)throw Error("Open file required");let E=(0,r.d4)(e=>e.voice.activeCall[h.key]),y=(0,r.wA)(),[v,C]=a.useState(null),w=(0,X.Um)(),T=a.useRef(null),S=!!(w&&w.type===en),x=n.reduce((e,t)=>e.add(t.userId),new Set),k=(0,u.bF)(x,h.key).reduce((e,t)=>(e[t.userID]=t,e),{});a.useEffect(()=>{let t=e=>{e&&i(e)};return e.audioCaptionStream.subscribe(t),()=>e.audioCaptionStream.unsubscribe(t)}),a.useEffect(()=>{v&&v.scrollHeight-v.scrollTop-v.clientHeight<150&&ei<Date.now()-150&&v.scrollTo({top:v.scrollHeight-v.clientHeight,behavior:"smooth"})}),a.useEffect(()=>{v&&!_&&(v.scrollTop=v.scrollHeight-v.clientHeight)},[v,_]);let N=!_&&E;return a.createElement("div",{className:["captions_dialog--captionsDialog--gOIvh",l].join(" ")},a.createElement("div",{className:["captions_dialog--topDivider--BlM0x captions_dialog--_divider--m8Skg",c?Q:""].join(" ")}),N&&a.createElement("div",{className:"captions_dialog--scrollContainer--WuVOJ",ref:e=>C(e),onScroll:e=>{v&&(p(0!=v.scrollHeight-v.scrollTop-v.clientHeight),d(0!==v.scrollTop))},onWheel:e=>{e.deltaY<0&&(ei=Date.now())}},a.createElement("div",{className:"captions_dialog--scrollContainerInner--db2cV"},n.map(e=>a.createElement(ea,{key:e.timestamp,caption:e,user:k[e.userId]})))),N&&a.createElement("div",{className:["captions_dialog--bottomDivider--WBbo5 captions_dialog--_divider--m8Skg",m?Q:""].join(" ")}),N&&a.createElement("button",{onClick:()=>v.scrollTo({top:v.scrollHeight-v.clientHeight,behavior:"smooth"}),className:`captions_dialog--scrollToBottomButton--SeU-4 ${m?"captions_dialog--show--LLYog":""}`},(0,f.tx)("collaboration.voice.new_transcripts")),a.createElement("div",{className:"captions_dialog--header--SA3Wv",onClick:()=>g(!_)},a.createElement(q.B,{className:N?"captions_dialog--closedCaptionsIconMaximized--N-lwT":"captions_dialog--closedCaptionsIconMinimized--Ou0WE",svg:ee.A}),a.createElement("span",{className:"captions_dialog--label---1DXk"},(0,f.tx)("collaboration.voice.closed_captions")),a.createElement($.Ex,{text:(0,f.t)("collaboration.voice.beta"),className:"captions_dialog--betaTag--qFyxq",color:$.zE.BRAND}),a.createElement(Z.K0,{svg:et.A,ref:T,className:"captions_dialog--typeSizeIcon--Xhxj-",onClick:e=>{e.stopPropagation(),y(Y.gR({type:en}))},"data-tooltip-type":b.Ib.TEXT,"data-tooltip":(0,f.t)("collaboration.voice.text_size")}),T.current&&S&&a.createElement(J.j,{dispatch:y,items:Object.keys(t).map(e=>({name:e,displayText:t[e].label,className:[t[e].style,"captions_dialog--dropdownTextOptions--ma0Ue"].join(" "),isChecked:t[e].style===l})),showPoint:!0,parentRect:T.current?.getBoundingClientRect(),onSelectItem:e=>{e.name&&s(t[e.name].style)},minWidth:96}),a.createElement("div",{style:{clear:"both"}})))}var eo=n(325655),es=n(118786),ec=n(517333),ed=n(966712),eu=n(951158),em=n(247866);let ep=[m.$E.WARNING_RECV_AUDIO_DECODE_FAILED,m.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW,m.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW,m.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW];function e_(e){let t;if((0,eu.Im)(e.activeWarnings))return null;for(let n of ep)if(e.activeWarnings[n]){t=e.activeWarnings[n];break}return t?a.createElement("div",{className:e.className,"data-tooltip-type":b.Ib.TEXT,"data-tooltip":t,"data-tooltip-show-below":!0,"data-tooltip-timeout-delay":50},a.createElement(q.B,{className:k,svg:em.A})):null}function eg(e){if((0,ed.kc)().voice_localization_june_24)switch(e){case m.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:return(0,f.t)("collaboration.voice.audio_input_too_low_warning");case m.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:return(0,f.t)("collaboration.voice.speaker_volume_too_low_warning");case m.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case m.$E.WARNING_RECV_AUDIO_DECODE_FAILED:return(0,f.t)("collaboration.voice.poor_connection_warning");default:return null}switch(e){case m.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:return"Mic volume low. Consider switching devices.";case m.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:return"Speaker or headphone volume low. Consider switching devices.";case m.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case m.$E.WARNING_RECV_AUDIO_DECODE_FAILED:return"Connection is poor. Check your internet or leave and rejoin the conversation.";default:return null}}function ef(e){let{callEvent:t,onClick:n,notificationUserId:i}=e.notification,[o,s]=a.useState(null),[d,u]=a.useState(!1),p=a.useRef(),_=a.useRef(t),[g,h]=a.useState(),E=(0,r.d4)(e=>e.multiplayer.allUsers),y=(0,r.d4)(e=>e.voice.voiceUsersById),b=(0,l.GS)(),C=a.useMemo(()=>{if(i){if(i in y)return y[i].name;let e=E.find(e=>e.userID===i);if(e)return e.name}return"User"},[i,y,E]),w=g?.href,T=a.useMemo(()=>w?"a":"div",[w]);if(a.useEffect(()=>()=>{p?.current&&clearTimeout(p.current)},[]),a.useEffect(()=>{let e=()=>{u(!1),s(null)};g?(u(!0),s(null),g.persist||s(setTimeout(()=>{e()},2e3))):e()},[g]),a.useEffect(()=>()=>{o&&clearTimeout(o)},[o]),a.useEffect(()=>{switch(_.current=t,t){case m.$E.CONNECTED:h({msg:(0,f.t)("collaboration.voice.connected"),type:m.w.SUCCESS,icon:b?a.createElement(es.g,null):void 0});break;case m.$E.CONNECTED_WITH_MIC_DISABLED:h({msg:(0,f.t)("collaboration.voice.connected_check_your_microphone_permissions_to_start_chatting"),allowMultiLine:!0,type:m.w.SUCCESS});break;case m.$E.CONNECTING:h({msg:(0,f.t)("collaboration.voice.connecting"),type:m.w.PENDING,persist:!0});break;case m.$E.ERROR:h({msg:(0,f.t)("collaboration.voice.something_went_wrong_try_again"),type:m.w.ERROR,persist:!0});break;case m.$E.CALL_INACTIVE:h({msg:(0,f.t)("collaboration.voice.things_got_quiet_for_awhile_so_we_ended_the_conversation"),type:m.w.PENDING,persist:!1,allowMultiLine:!0});break;case m.$E.TOKEN_WILL_EXPIRE:h({msg:(0,f.t)("collaboration.voice.it_s_been_quiet_for_a_while_so_we_ll_end_the_conversation_in_20_seconds_n_click_to_stay_on"),type:m.w.MESSAGE,persist:!0,onClick:n,allowMultiLine:!0});break;case m.$E.TOKEN_EXPIRED:h({msg:(0,f.t)("collaboration.voice.audio_has_timed_out_click_to_rejoin"),type:m.w.ERROR,persist:!0,onClick:n});break;case m.$E.USER_JOINED:h({truncatedPrefix:C,msg:(0,f.t)("collaboration.voice.joined"),type:m.w.MESSAGE});break;case m.$E.USER_LEFT:h({truncatedPrefix:C,msg:(0,f.t)("collaboration.voice.left"),type:m.w.MESSAGE});break;case m.$E.ERROR_MICROPHONE_PERMISSIONS_DENIED:let e=(0,f.t)("collaboration.voice.enable_mic_access_in_your_browser_to_join");ec.eD&&(e=(0,f.t)("collaboration.voice.enable_mic_access_for_the_figma_app_to_join")),h({msg:e,type:m.w.ERROR,href:c.AM.TROUBLESHOOT});break;case m.$E.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED:h({msg:(0,f.t)("collaboration.voice.want_to_unmute_click_the_mic"),type:m.w.PENDING});break;case m.$E.ERROR_ON_LEAVE:h({msg:(0,f.t)("collaboration.voice.couldn_t_leave_please_try_again"),type:m.w.ERROR});break;case m.$E.SYSTEM_INCOMPATIBLE:h({msg:(0,f.t)("collaboration.voice.figma_audio_won_t_work_on_your_device_learn_why"),type:m.w.ERROR,persist:!0,allowMultiLine:!0,href:c.AM.TROUBLESHOOT});break;case m.$E.DISCONNECTING:case m.$E.RECONNECTING:p.current=setTimeout(()=>{_.current===m.$E.RECONNECTING&&(h({msg:(0,f.t)("collaboration.voice.attempting_to_reconnect"),type:m.w.PENDING,persist:!0}),p.current=void 0)},1500);break;case m.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:case m.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:case m.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case m.$E.WARNING_RECV_AUDIO_DECODE_FAILED:let r=eg(t);if(!r)break;h({msg:r,type:m.w.WARNING,allowMultiLine:!0})}},[t]),void 0===t)return a.createElement(a.Fragment,null);let S=["expanded"===e.widgetState?"voice_flash_notifications--flashExpandedList--NkNnw voice_flash_notifications--flash--8i3SH":"voice_flash_notifications--flash--8i3SH",d?function(){switch(g?.type){case m.w.ERROR:return"voice_flash_notifications--flashError--6fLPW";case m.w.WARNING:return"voice_flash_notifications--flashWarning--tdCit";case m.w.MESSAGE:return"voice_flash_notifications--flashMessage--lt-k-";case m.w.SUCCESS:return"voice_flash_notifications--flashSuccess--hmpUM";case m.w.PENDING:default:return"voice_flash_notifications--flashPending--Hzt7W"}}():"voice_flash_notifications--flashHidden--uYI96"];return a.createElement(v.Id,{onClick:g?.onClick,className:S.join(" ")},a.createElement(T,{className:g?.allowMultiLine||b?"voice_flash_notifications--flashNotificationMessageWrap--eXghM voice_flash_notifications--flashNotificationMessageBase--wxFPN":"voice_flash_notifications--flashNotificationMessageEllipsis--eBEYX voice_flash_notifications--flashNotificationMessageBase--wxFPN ellipsis--ellipsis--Tjyfa",target:"_blank",rel:"noopener",href:g?.href},g?.truncatedPrefix&&a.createElement("span",{className:"voice_flash_notifications--truncatedPrefix---gMQI ellipsis--ellipsis--Tjyfa"},g?.truncatedPrefix),g?.icon,g?.msg))}var eh=n(96328),eE=n(355819),ey=n(70699),eb=n(27947),ev=n(749283);let eC="active_speakers_row--name--LtwVz ellipsis--ellipsis--Tjyfa",ew="active_speakers_row--pos1--88uza active_speakers_row--pos--D59NJ",eT="active_speakers_row--fadeOut--2tZhG",eS="active_speakers_row--willFadeIn--fFCX6",ex="active_speakers_row--activeSpeakerRowAvatar--zKOXb",ek=(e,t)=>e.userID===t.userID,eN=(e,t)=>{let n=e.sort((e,t)=>e.userID>t.userID?-1:1).map(e=>e.userID),a=t.sort((e,t)=>e.userID>t.userID?-1:1).map(e=>e.userID);if(n.length!==a.length)return!0;for(let e=0;e<n.length;e++)if(n[e]!==a[e])return!0;return!1},eI=(e,t)=>{let n=t.filter(t=>!e.find(e=>ek(e,t))),a=e.filter(e=>!t.find(t=>ek(e,t))),r=e.map(e=>a.indexOf(e)>-1?e:void 0),i=e.map(e=>-1===a.indexOf(e)?e:n.shift()).filter(e=>!!e);return n.length>0&&i.push(...n),t.length>1&&1===e.length&&(r[1]=e[0]),{fadeOut:r,active:i}},eA=(0,r.Ng)((e,t)=>({...t,observingSessionID:e.multiplayer.observingSessionID,presenterSessionID:e.multiplayer.presenterSessionID??null}))(function({user:e,classNames:t,observingSessionID:n,presenterSessionID:r,call:i}){let l;let o=(Array.isArray(t)?[...t,ex]:[t,ex]).join(" "),s=(0,c.eo)(),d=a.createElement(W.Ro,{entity:{...e,id:e.userID},className:"active_speakers_row--activeSpeakerRowAvatarWithoutMultiplayer--W-S0A",size:24,key:e.userID}),u=e=>{e.stopPropagation()};return"sessionID"in e&&(l=`active-speaker-row-voice-avatar-session-${e.sessionID}`,d=a.createElement(eb.vQ,{sessionID:e?.sessionID,observingSessionID:n,presenterSessionID:r??null,nominatedSessionID:null,user:e,showColorIndicators:!0,tooltipProxyId:l}),u=t=>{t.stopPropagation(),t.preventDefault(),s(e)}),a.createElement("div",{className:o},a.createElement("div",{className:"active_speakers_row--avatarObserveClickTarget--T1JH- voice_toolbar--avatarObserveClickTarget--QALFw",onClick:u,"data-tooltip-proxy-element-id":l}),d,a.createElement(ev.i,{userId:e.userID,microphoneStyle:m.bU.FULL,call:i,volumeIconMutedState:ev.S.MINI,className:"active_speakers_row--voiceIndicatorPositioning--YqGFz"}))});function eO({user:e,classNames:t}){return a.createElement("div",{className:eC+" "+(Array.isArray(t)?t.join(" "):t)},e.name)}let eL=["active_speakers_row--pos0--Dc1bB active_speakers_row--pos--D59NJ",ew,"active_speakers_row--pos2--b5pkb active_speakers_row--pos--D59NJ","active_speakers_row--pos3--EAAkN active_speakers_row--pos--D59NJ","active_speakers_row--pos4--R5-5y active_speakers_row--pos--D59NJ","active_speakers_row--pos5--FYPvT active_speakers_row--pos--D59NJ","active_speakers_row--pos6--PTsn8 active_speakers_row--pos--D59NJ","active_speakers_row--pos7--DjtPj active_speakers_row--pos--D59NJ"];class eD extends a.Component{constructor(e){super(e),this.displayString="ActiveSpeakersRow",this.node=null,this.state={active:[],fadeOut:[]}}componentWillMount(){this.setState(eI(this.state.active,this.props.users))}shouldComponentUpdate(e,t){return e===this.props||(eN(this.props.users,e.users)&&this.setState(eI(this.state.active,e.users)),!1)}render(){let e=(e,t)=>`${e.name}-${t}`,t=[],n=d.h.getInstance();if(!n)return null;if(1===this.state.fadeOut.length&&this.state.fadeOut[0]){let r=this.state.fadeOut[0];t.push(a.createElement(eA,{call:n,key:e(r,"avatar"),user:r,classNames:[eL[0],eT]}),a.createElement(eO,{key:e(r,"name"),user:r,classNames:[ew,eT,eC]}))}else if(2===this.state.fadeOut.length&&!this.state.fadeOut[0]&&this.state.fadeOut[1]){let n=this.state.fadeOut[1];t.push(a.createElement(eO,{key:e(n,"name"),user:n,classNames:[ew,eT,eC]}))}else t.push.apply(t,this.state.fadeOut.map((t,r)=>t&&a.createElement(eA,{call:n,key:e(t,"avatar"),user:t,classNames:[eL[r],eT]})));if(1===this.state.active.length){let r=this.state.active[0];t.push(a.createElement(eA,{call:n,key:e(r,"avatar"),user:r,classNames:[eL[0],eS]}),a.createElement(eO,{key:e(r,"name"),user:r,classNames:[ew,eS,eC]}))}else t.push.apply(t,this.state.active.map((t,r)=>a.createElement(eA,{call:n,key:e(t,"avatar"),user:t,classNames:[eL[r],eS]})));return t.sort((e,t)=>null===e.key||null===t.key?0:e.key>t.key?-1:1),setTimeout(()=>{this.node?.querySelectorAll("."+eS).forEach(e=>e.classList.remove(eS))},10),a.createElement("div",{ref:e=>this.node=e,className:"active_speakers_row--activeSpeakerRow--l5ylB"},t)}}function eR(e){let{call:t,usersInCall:n}=e,r=(0,s.iZ)(),i=(0,z.mt)(t),l=a.useMemo(()=>i?.filter(e=>e!==r?.id)?.slice(0,6).reduce((e,t)=>{let a=n.find(({userID:e})=>e===t);return a?e.concat([a]):e},[])||[],[i,n,r]);return a.createElement(eD,{users:l})}var eM=n(783423),eP=n(560560);function eF(e){let{children:t,headerText:n,collapsedContent:r,theme:i,onToggle:l,collapseStateOverride:o}=e,[s,c]=a.useState(!1),d=o||s;return a.createElement("span",{"data-editor-theme":i},a.createElement(v.fI,{className:d?"voice_collapsible_dropdown--isCollapsed--SwBvz":""},a.createElement("span",{className:"voice_collapsible_dropdown--dropdownSectionTitle--lpt22",onClick:t=>{t.preventDefault(),t.stopPropagation(),l&&!0!==e.hideToggleOption&&l(!d),c(!d)}},d?r:n,!e.hideToggleOption&&a.createElement(q.B,{svg:d?eM.A:eP.A,className:"voice_collapsible_dropdown--voiceDropdownChevronIcon--JgQxE"}))),!d&&t&&a.createElement(a.Fragment,null,t))}var eB=n(847768);let eU=(0,r.Ng)(e=>({showWidgetParticipantList:e.voice.showWidgetParticipantList}))(function(e){let{showWidgetParticipantList:t}=e,n=(0,s.iZ)(),l=(0,r.wA)(),{userIdsInCall:o}=(0,u.W5)(e.fileKey),d=(0,u.bF)(o,e.fileKey),p=(0,c.eo)(),{usersInCall:_,callMetadata:g}=a.useMemo(()=>({usersInCall:d.filter(e=>e.userID!==n?.id),callMetadata:{microphoneStyle:m.bU.FULL,call:e.call}}),[d,n,e.call]);return a.createElement(a.Fragment,null,a.createElement(eb.sK,null),_.length>0&&a.createElement("div",{className:eB.ev},a.createElement(eF,{headerText:`${e.currentUserInCall?"You and ":""}`+(0,eh.td)(_.length,"person","people")+" in conversation",collapseStateOverride:!t,collapsedContent:a.createElement(eR,{usersInCall:_,call:e.call}),hideToggleOption:_.length<2,onToggle:e=>l(i.yF(!e))},a.createElement(eE.P,{className:eB.YM},_.map(e=>a.createElement(ey.Q,{key:"sessionID"in e?e.sessionID:e.userID,callMetadata:g,user:e,isOverflow:!0,onUserClick:p}))))))});var eG=n(256296),eK=n(879078),eV=n(173919),eH=n(43604);function ez(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7 7h10a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V8a1 1 0 0 1 1-1M5 8a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2zm4.5 7a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1zm4.5-1.5a.5.5 0 0 1 .5-.5h2a.5.5 0 0 1 0 1h-2a.5.5 0 0 1-.5-.5m-3.5-.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1zm2.5 2.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 0 1h-1a.5.5 0 0 1-.5-.5M7.5 13a.5.5 0 0 0 0 1h1a.5.5 0 0 0 0-1z",clipRule:"evenodd"}))}var eW=n(776250),ej=n(91408),e$=n(44948),eq=n(799569),eY=n(493323),eX=n(392592),eJ=n(672517),eZ=n(298543),eQ=n(538697),e0=n(837746);let e1="device_controls--pointingDropdown--hSJ1h",e2="device_controls--containerWithPadding--IlJeH",e5="device_controls--deviceControlRow--kSC19",e3="device_controls--controlLabel--Yp1lV",e4="device_controls--iconContainer--TuXUt",e6="device_controls--dropdownContainer--DfMXW",e8="device_controls--dropdownInput--w72f-",e7="device_controls--dropdownChevron--UBe58",e9="device_controls--divider--Z8rM-";var te=n(909345);let tt="MICROPHONE_CONTROL_DROPDOWN",tn="PLAYBACK_DEVICE_CONTROL_DROPDOWN",ta=(0,ej.jz)(e0.aHA);function tr(e,t,n,i,l,o,s){let c=(0,r.wA)(),[d,u]=(0,a.useState)(null),[m,p]=(0,a.useState)([]),_=(0,r.d4)(e=>e.dropdownShown?.type===i),h=(0,e$.wm)(()=>m.map(e=>e.deviceId),[m]),E=(0,a.useCallback)(async()=>{try{let e=await t(),n=new Set(h);(h.length!==e.length||e.some(e=>!(e.deviceId in n)))&&p(e)}catch{s||c(eX.F.enqueue({message:(0,f.t)("collaboration.voice.error_fetching_devices"),error:!0,type:"voice-device-error"}))}},[h,c,t,s]),y=(0,a.useCallback)(async()=>{try{if(o&&!g.Ay.chrome)return;let t=await e();t.deviceId!==d?.deviceId&&u(t)}catch{}},[o,e,d]),b=(0,a.useCallback)(async e=>{e.deviceId!==d?.deviceId&&u(e);try{await n(e)}catch{c(eX.F.enqueue({message:(0,f.t)("collaboration.voice.error_selecting_device"),error:!0,type:"voice-device-error"})),await y()}},[y,n,c,d]);return(0,a.useEffect)(()=>{(l||_)&&E()},[l,_,E]),(0,a.useEffect)(()=>{y(),E()},[]),[d,m,b]}function ti(e){let[t,n,r]=tr(e.call.currentMicrophone,e.call.getMicrophones,e.call.setMicrophone,tt,e.isOpen,!1,e.microphonePermissionDenied),[i,l,o]=tr(e.call.currentPlaybackDevice,e.call.getPlaybackDevices,e.call.setPlaybackDevice,tt,e.isOpen,!0,e.microphonePermissionDenied),s=e.targetRef.current?.getBoundingClientRect();return e.isOpen?a.createElement(tl,{targetRect:s,currentMicrophone:t,microphoneDevices:n,setMicrophone:r,currentPlaybackDevice:i,playbackDevices:l,setPlaybackDevice:o}):null}function tl(e){let{targetRect:t,currentMicrophone:n,microphoneDevices:i,setMicrophone:o,currentPlaybackDevice:s,playbackDevices:c,setPlaybackDevice:d}=e,u=(0,r.wA)(),m=(0,l.GS)(),[p,_]=(0,a.useState)({type:""}),h=()=>{_({type:""})},E={format:e=>e?.label||"",isEqual:(e,t)=>e.deviceId===t.deviceId},y=m?a.createElement(B.U,{svg:te.A},a.createElement(eV.P,null)):void 0,b=m?a.createElement(B.U,{svg:te.A},a.createElement(eH.L,null)):void 0,w=a.createElement(eQ.l6,{className:e6,inputClassName:e8,chevronClassName:e7,id:tt,icon:y,property:n||{deviceId:"not_found",label:(0,f.t)("collaboration.voice.microphone_not_found"),groupId:"not_found",kind:"audioinput",toJSON:()=>null},dispatch:u,dropdownShown:p,onChange:e=>{o(e)},formatter:E,neverConstrain:!0,onHideDropdownOverride:h,onShowDropdownOverride:()=>_({type:tt})},i.map(e=>a.createElement(eQ.c$,{key:e.deviceId,value:e},e.label))),T=a.createElement(eQ.l6,{className:e6,inputClassName:e8,chevronClassName:e7,id:tn,property:s||{deviceId:"not_found",label:(0,f.t)("collaboration.voice.playback_device_not_found"),groupId:"not_found",kind:"audiooutput",toJSON:()=>null},icon:b,dispatch:u,dropdownShown:p,onChange:e=>{d(e)},formatter:E,neverConstrain:!0,onHideDropdownOverride:h,onShowDropdownOverride:()=>_({type:tn})},c.map(e=>a.createElement(eQ.c$,{key:e.deviceId,value:e},e.label))),S=a.createElement(a.Fragment,null,a.createElement("div",{className:e9}),!(0,H.WO)()&&a.createElement(ts,null),(0,H.WO)()&&a.createElement(to,null));return m?a.createElement(eZ.Cf,{className:e1,targetRect:t,minWidth:ta,propagateCloseClick:!0,lean:"left",leanPadding:52},a.createElement("div",{onClick:e=>e.stopPropagation()},a.createElement("div",{className:"device_controls--header---h3P-"},(0,f.t)("collaboration.voice.audio_settings"),a.createElement(eq.Jn,{onClick:()=>u(U.oB())})),a.createElement("div",{className:"device_controls--container--VR8KK"},a.createElement(v.fI,{className:e5},a.createElement("span",{className:e3},(0,f.tx)("collaboration.voice.microphone")),w),g.Ay.chrome&&a.createElement(v.fI,{className:e5},a.createElement("span",{className:e3},(0,f.tx)("collaboration.voice.speakers")),T))),(0,H.X0)()&&S):a.createElement(eZ.Cf,{showPoint:!!t,targetRect:t,className:e1,minWidth:280,propagateCloseClick:!0},a.createElement("div",{onClick:e=>e.stopPropagation()},a.createElement("div",{className:e2},a.createElement(v.fI,{className:e5},a.createElement("span",{className:e4},a.createElement(C.A.Unmuted,{size:24})),a.createElement("span",{className:e3},(0,f.tx)("collaboration.voice.microphone"))),a.createElement(v.fI,{className:e5},w)),g.Ay.chrome&&a.createElement(a.Fragment,null,a.createElement("div",{className:e9}),a.createElement("div",{className:e2},a.createElement(v.fI,{className:e5},a.createElement("span",{className:e4},a.createElement(q.B,{svg:te.A})),a.createElement("span",{className:e3},(0,f.tx)("collaboration.voice.speakers"))),a.createElement(v.fI,{className:e5},T))),(0,H.X0)()&&S))}function to(){let e=(0,r.d4)(e=>e.voice.captionsInstallProgress),t=(0,r.d4)(e=>e.voice.showCaptions),n=(0,r.wA)(),i=a.useId(),l=a.createElement(B.U,{className:e4,svg:ee.A},a.createElement(ez,null)),o=(0,f.tx)("collaboration.voice.closed_captioning"),s=a.createElement($.Ex,{text:(0,f.t)("collaboration.voice.beta"),className:"device_controls--betaTag---VTFI",color:$.zE.BRAND});return t&&(0,H.Mw)(e)&&(o=(0,f.tx)("collaboration.voice.setting_up_closed_captions_install_progress",{installProgress:e}),l=a.createElement(eY.kt,{className:"device_controls--captionsLoadingSpinner--ivdGQ"}),s=a.createElement(a.Fragment,null)),a.createElement(eG.J,{className:"device_controls--closedCaptionRow--OdIHt raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm device_controls--deviceControlRowWithHover--KUbHL device_controls--deviceControlRow--kSC19",htmlFor:i},l,a.createElement("span",{className:"device_controls--captionToggleLabel--MjCYn device_controls--controlLabelFullOpacity--1nEqI device_controls--controlLabel--Yp1lV"},o,s),a.createElement(eK.v,{id:i,checked:t,onChange:(e,{event:t})=>{t.stopPropagation(),(0,eW.sx)("voice_captions_toggle",{value:e,source:"voice_widget"}),(0,H.HJ)(n,e)}}))}function ts(){let e=c.AM.ACCESSIBILITY;return a.createElement(eJ.L0,{target:"_blank",rel:"noopener",href:e,trackingEventName:"Learn more about captioning"},a.createElement(v.fI,{className:"device_controls--deviceControlRowWithHover--KUbHL device_controls--deviceControlRow--kSC19"},a.createElement(q.B,{className:e4,svg:ee.A}),a.createElement("span",{className:"device_controls--controlLabelFullOpacity--1nEqI device_controls--controlLabel--Yp1lV"},(0,f.tx)("collaboration.voice.learn_how_to_turn_on_closed_captioning"))))}var tc=n(654703),td=n(776836);let tu="DEVICE_CONTROL_DROPDOWN",tm=null,tp=null,t_=null;function tg(e){let{call:t,fileKey:n,user:o,callEvent:s,notificationUserId:c,callEventCallback:d}=e,p=(0,r.Pj)(),[g,h]=(0,a.useState)(null),[E,C]=(0,a.useState)(),[w,T]=(0,a.useState)(!1),[L,z]=(0,a.useState)(!1),[W,$]=(0,a.useState)(!1),[q,Y]=(0,a.useState)(!1),X=(0,r.d4)(e=>e.voice.snapWidget),[J,Z]=(0,a.useState)(!1),[Q,ee]=(0,a.useState)(!1),[et,en]=(0,a.useState)({}),{userIdsInCall:ea}=(0,u.W5)(n);(0,V.W)();let er=(0,r.d4)(e=>e.voice.showCaptions),ei=(0,r.d4)(e=>e.voice.captionsInstallProgress),es=(0,r.d4)(e=>e.dropdownShown?.type===tu),ec=(0,r.d4)(e=>e.voice.activeCall[n]||!1),ed=(0,r.d4)(e=>e.voice.showWidgetParticipantList),eu=(0,a.useRef)(null),em=(0,l.GS)(),ep=(0,r.wA)(),eh={in:()=>{$(!0)},out:()=>($(!1),new Promise(e=>setTimeout(e,300)))};a.useEffect(()=>{let e=t.getSystemCompatibility();if(h(e),!e){d(m.$E.SYSTEM_INCOMPATIBLE);return}return tm||tp||(tp=new Audio("https://static.figma.com/uploads/94721b53827c353075273e54a45ea41850ee0284"),(tm=new Audio("https://static.figma.com/uploads/d917bf9964749c47b46d367572a5dd28a559bd2f")).load(),tp.load(),[tp,tm].forEach(e=>e.volume=.5)),()=>{ep(i.Pp(!1))}},[]),a.useEffect(()=>{!ec&&g&&eb(),window.requestAnimationFrame(()=>eh.in())},[g]),a.useEffect(()=>{let e;switch(s){case m.$E.DISCONNECTED:Q&&(tp?.play(),ee(!1)),ep(i.oI({fileKey:n}));break;case m.$E.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT:(function e(n){if(Date.now()>=n){d(m.$E.TOKEN_WILL_EXPIRE);return}if(t.isLocalUserSpeaking()){eC(!1);return}setTimeout(()=>{e(n)},500)})(Date.now()+1e4);break;case m.$E.CONNECTED:case m.$E.CONNECTED_WITH_MIC_DISABLED:J&&(setTimeout(()=>tm?.play(),400),Z(!1)),ep(i.rO({fileKey:n}));break;case m.$E.CALL_INACTIVE:t.leave();break;case m.$E.TOKEN_WILL_EXPIRE:e=()=>eC(!0);break;case m.$E.TOKEN_EXPIRED:e=eb;break;case m.$E.USER_JOINED:case m.$E.USER_LEFT:if(t_)return;break;case m.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW:case m.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW:case m.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW:case m.$E.WARNING_RECV_AUDIO_DECODE_FAILED:let a=eg(s);if(!a)break;en({...et,[s]:a});break;case m.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER:case m.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER:case m.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER:case m.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER:let r=function(e){switch(e){case m.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER:return m.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW;case m.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER:return m.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW;case m.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER:return m.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW;case m.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER:return m.$E.WARNING_RECV_AUDIO_DECODE_FAILED;default:return null}}(s);if(!r)break;delete et[r],en(et)}void 0!==s&&C({callEvent:s,onClick:e,notificationUserId:c})},[s]),a.useEffect(()=>{Y(!0)},[X]),a.useEffect(()=>{q&&Y(!1)},[q]);let[eE,ey]=(0,a.useState)(!0),eb=async()=>{if(ey(!0),!t.getSystemCompatibility()){ey(!1),d(m.$E.SYSTEM_INCOMPATIBLE);return}T(!0),Z(!0),t_=setTimeout(()=>{t_=null},5e3);try{let{data:e}=await F.Ay.post(`/api/voice/${n}/auth`),a=await (0,P.JL)(e.meta.user_encryption_key),r=await (0,P.We)(a,e.meta.call_user_id);if(r!=r)throw Error(`User ID does not match local user ID.
local: ${r}
remote: ${r}`);await t.join({appId:e.meta.app_id,callId:e.meta.call_id,token:e.meta.auth_token,callUserId:e.meta.call_user_id,userId:r,encryptionKey:e.meta.call_encryption_key,userEncryptionKey:a,setParticipantIdsCallback:ev,callEventCallback:d,store:p,fileKey:n})}catch(e){ey(!1),d(m.$E.ERROR)}T(!1),ey(!1)};function ev(e){ep(i.cb(e))}(0,y.N)({isVisible:W});let eC=async e=>{let{data:a}=await F.Ay.post(`/api/voice/${n}/auth`,{call_user_id:t.uid});await t.renewToken(a.meta.auth_token),e?d(m.$E.CONNECTED):d(m.$E.TOKEN_SILENTLY_RENEWED)},ew=async()=>{T(!0),ee(!0);try{await Promise.all([eh.out(),t.leave()]),ep(i.oI({fileKey:n})),tp?.play(),es&&ep(U.oB()),ep(i.Pp(!1))}catch{eh.in(),d(m.$E.ERROR_ON_LEAVE)}T(!1)},eT=async e=>{(0,K.ds)("voice_user_mute_toggle",n,p.getState(),{source:"voice_widget",muted:!e}),e?await t.unmute():await t.mute()},eS=E?E&&ea.size>1&&ed?"expanded":"collapsed":null;er&&(0,H.nN)(ei)&&((0,K.ds)("voice_caption_download_error",n,p.getState(),{error_code:ei,source:"voice_widget"}),(0,H.HJ)(ep,!1),ep((0,G.to)({type:j.L,data:{dispatch:ep,installProgress:ei}})));let ex=a.createElement("span",{onClick:()=>{(0,K.ds)("voice_widget_minimized_toggle",n,p.getState(),{minimized:!1}),ep(i.Pp(!1))},className:["voice_widget--dismissButtonPosition--eEXoz",N].join(" "),"data-tooltip-type":b.Ib.TEXT,"data-tooltip":(0,f.t)("collaboration.voice.minimize")},a.createElement(B.U,{className:k,svg:tc.A,fallbackSvg:tc.A},a.createElement(R.A,null))),ek=(0,D.U1)();return a.createElement("div",{className:_()("voice_widget--hybridModalWrapper--x9-GE"),ref:ek},a.createElement("div",{className:_()(S,{[x]:W})},a.createElement(v.Id,{className:O},a.createElement("div",{className:A},a.createElement("span",{className:ec||L?"voice_widget--currentUser--L7Z6l":"voice_widget--inactiveCurrentUser--yVaZY voice_widget--currentUser--L7Z6l"},a.createElement(tf,{user:o,call:e.call})),a.createElement(e_,{className:"voice_widget--warningIcon--WJPdH",activeWarnings:et}),a.createElement(eo.Y,{userId:o.id,onMuteButtonClickCallback:eT,disabled:t.microphonePermissionDenied,className:[I,N].join(" "),disabledClassName:[I,"voice_widget--muteButtonDisabled--fJzUI"].join(" ")}),a.createElement("span",{className:["voice_widget--controlsButtonPosition--TTGIU",es?"voice_widget--controlsButtonActive--vE2c-":N].join(" "),onMouseDown:()=>{es?ep(U.oB()):((0,K.ds)("voice_widget_open_settings",n,p.getState()),ep(U.j7({type:tu})))},onClick:e=>e.stopPropagation(),ref:eu,"data-tooltip-type":b.Ib.TEXT,"data-tooltip":(0,f.t)("collaboration.voice.settings")},a.createElement(B.U,{className:k,svg:td.A,fallbackSvg:td.A},a.createElement(M.I,null))),a.createElement("button",{className:ec?"voice_widget--leaveButton--UUdxH basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd":"voice_widget--joinButton--WvZPr basic_form--btn--FSrmp ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",onClick:ec?ew:eb,disabled:!g||w,onMouseEnter:()=>z(!0),onMouseLeave:()=>z(!1)},ec||eE?(0,f.tx)("collaboration.voice.leave"):(0,f.tx)("collaboration.voice.join")),!em&&ex),ec&&a.createElement(eU,{fileKey:n,currentUserInCall:ec,call:t}),(0,H.WO)()&&er&&a.createElement(el,{call:t})),!em&&E&&a.createElement(ef,{notification:E,widgetState:eS})),em&&E&&a.createElement(ef,{notification:E,widgetState:eS}),a.createElement(ti,{isOpen:es,call:t,targetRef:eu,microphonePermissionDenied:t.microphonePermissionDenied}))}function tf({user:e,call:t}){return a.createElement(a.Fragment,null,a.createElement(th,{user:e,call:t}),a.createElement(W.Ro,{entity:e,size:24,className:"voice_widget--undraggableImage--muN9g"}))}function th({user:e,call:t}){let n=(0,z.Wl)(e.id,t);return!n||n.isMuted?null:a.createElement(ev.i,{userId:e.id,microphoneStyle:m.bU.FULL,className:"voice_widget--avatarVoiceIndicator--zfWwx",volumeIconMutedState:ev.S.NONE,call:t})}function tE(){let e=(0,r.d4)(e=>e.mirror.appModel.showUi),t=(0,o.tS)(),n=(0,s.iZ)(),p=(0,r.d4)(e=>e.voice.showWidget),_=(0,r.d4)(e=>t&&t in e.voice.activeCall),g=(0,r.d4)(e=>t&&!!e.voice.activeCall[t]),{userIdsInCall:f}=(0,u.W5)(t,!0),h=(0,u.bF)(f,t).length,E=(0,c.qr)(),y=(0,r.wA)(),[b,v]=(0,a.useState)(),[C,w]=(0,a.useState)(),T=(0,l.GS)(),S=a.useCallback((e,t)=>{m.GA.has(e)&&y(i.Pp(!0)),t&&w(t),v(e)},[y]),x=(0,r.d4)(e=>e.voice.captionsInstallProgress),k=(0,r.d4)(e=>e.voice.showCaptions);return(a.useEffect(()=>{E&&(E.captionsToggleEnabled=k,E.streamAudioForCaptions(k&&100===x))},[k,x,E]),a.useEffect(()=>{p||(w(void 0),v(void 0))},[p]),a.useEffect(()=>{t&&!_&&h>0?y(i.Zq({fileKey:t})):t&&_&&!g&&0===h&&y(i.a6({fileKey:t}))},[h,t,_,g,y]),a.useEffect(()=>()=>{d.h.leave(),t&&y(i.a6({fileKey:t}))},[y,t]),e&&t&&n)?T&&_&&!p?a.createElement(L,{fileKey:t}):E&&p?a.createElement(tg,{fileKey:t,user:n,call:E,notificationUserId:C,callEvent:b,callEventCallback:S}):a.createElement(a.Fragment,null):a.createElement(a.Fragment,null)}},656839:(e,t,n)=>{n.d(t,{z:()=>a});let a=(0,n(38580).eU)(null)},37112:(e,t,n)=>{n.d(t,{Bn:()=>D,E_:()=>y,Gl:()=>L,HX:()=>k,Ji:()=>T,Xe:()=>O,_3:()=>I,ad:()=>M,bE:()=>A,id:()=>w,kN:()=>S,mr:()=>N,ph:()=>R});var a=n(675678),r=n(534611),i=n(593779),l=n(966712),o=n(374626),s=n(752553),c=n(776621),d=n(696673),u=n(848661),m=n(335682),p=n(416095),_=n(279453);n(921199);var g=n(875387),f=n(705129),h=n(656839);let E=/(#[0-9]+:[0-9]+)/g;function y(e){let t=(0,o.md)(g.q);return!!(0,l.kc)().dse_preset_libraries&&!!(0,l.kc)().dt_code_connect_preset_libraries&&(0,d.wJ)(e??"")&&t.has((0,i.l)(e??""))}function b(e){if("string"==typeof e){let t=e.toLowerCase();if("true"===t||"yes"===t||"on"===t)return!0;if("false"===t||"no"===t||"off"===t)return!1}return e}function v(e){return e.replace(/\s+/g," ")}function C(e){return e.replace(E,"").replace(/\s+/g," ").trim()}function w(e,t,n){if(!(0,l.kc)().dt_code_connect_preloading||!e||!t)return!1;let a=o.zl.get(h.z);if(!a||!a.docsById||!a.docsById[`key-${e},${t}`])return!1;for(let e of n)if(!a.docsById[`key-${e}`])return!1;return!0}function T(e){try{if("INSTANCE"===e.type)return Object.entries(e.componentProperties()).reduce((e,[t,n])=>({...e,[C(t)]:n}),{});if("SYMBOL"===e.type){if(e.isState)return function(e){if(!e.parentNode)return{};let t=Object.entries(e.variantProperties()??{}).reduce((e,[t,n])=>({...e,[t]:{value:n,type:"VARIANT"}}),{});return Object.entries(e.parentNode.componentPropertyDefinitions()).reduce((e,[t,n])=>"VARIANT"===n.type?e:{...e,[C(t)]:{value:n.defaultValue,type:n.type}},{...t})}(e);return Object.entries(e.componentPropertyDefinitions()).reduce((e,[t,n])=>({...e,[C(t)]:{value:n.defaultValue,type:n.type}}),{})}}catch(e){"Component set for node has existing errors"!==e.message&&(0,c.$D)(a.FigmaTeam.DEVELOPER_TOOLS,e)}return{}}function S(e,t){let n=0,a=null,r=T(t);for(let t of e){let e=0;Object.entries(t.variant??{}).every(([t,n])=>{let a=v(t),i=Object.entries(r).reduce((e,[t,n])=>({...e,[v(t)]:{type:n.type,value:b(n.value)}}),{})[a];return i?.value===b(n)?(e++,!0):void 0===i})&&(!a||e>n)&&(a=t,n=e)}return a}function x(e){return(e?.publishID&&e?.publishID!==r.AD?e?.publishID:e?.guid)??null}function k(e,t,n,a){let r=t.get(e);if(!r)return{backingFileKey:null,backingNodeId:null};let{backingSymbolGUID:i,backingStateGroupGUID:l}=(0,f.nD)(new Set([(r?.type==="INSTANCE"?r?.symbolId:r?.guid)??""]),t),o=null,s=null;if((0,u.gl)(i)||null===i||(o=t.get(i)),(0,u.gl)(l)||null===l||(s=t.get(l)),"INSTANCE"===r.type&&r.symbolId){let e=t.get(r.symbolId);if(e?.isState){let e=(0,p.yW)(s),t=s?.sourceLibraryKey;return{backingFileKey:e&&e!==n?e:n,backingNodeId:x(s),backingComponentKey:o?.componentKey??void 0,backingStateGroupKey:s?.stateGroupKey??void 0,backingLibraryKey:t&&t!==a?t:a}}{let e=(0,p.yW)(o),t=o?.sourceLibraryKey;return{backingFileKey:e&&e!==n?e:n,backingNodeId:x(o),backingComponentKey:o?.componentKey??void 0,backingLibraryKey:t&&t!==a?t:a}}}return"SYMBOL"===r.type?r.isState?{backingFileKey:(0,p.yW)(r.parentNode)??n,backingNodeId:x(r.parentNode),backingLibraryKey:r.parentNode?.sourceLibraryKey&&r.parentNode?.sourceLibraryKey!==""?r.parentNode?.sourceLibraryKey:a}:{backingFileKey:(0,p.yW)(r)??n,backingNodeId:x(r),backingLibraryKey:""!==r.sourceLibraryKey?r.sourceLibraryKey:a}:{backingFileKey:null,backingNodeId:null}}function N(e,t){let n=t.get(e),a=(0,m.tS)(),r=(0,o.md)(m._S),[i]=(0,s.IT)((0,_.J_J)({key:a??""})),{backingFileKey:c,backingNodeId:u,backingLibraryKey:p}=k(e,t,a,r),g=y(c),f=o.zl.get(h.z),E=i.data?.file?.status==="loaded"&&!i.data.file?.data?.hasPermission&&!g,[b]=(0,s.IT)((0,_.yUR)({libraryKey:p??"",nodeId:u??"",instances:[],openFileKey:a??"",isCommunityLibrary:(0,d.wJ)(c??"")}),{enabled:!!(0,l.kc)().dt_figmadoc&&!E&&!!(0,l.kc)().dt_code_connect_lk_migration}),[v]=(0,s.IT)((0,_.nbK)({fileKeyorHubFileId:c??"",nodeId:u??"",instances:[],openFileKey:a??"",isCommunityLibrary:(0,d.wJ)(c??"")}),{enabled:!!(0,l.kc)().dt_figmadoc&&!E&&!(0,l.kc)().dt_code_connect_lk_migration}),C=(0,l.kc)().dt_code_connect_lk_migration?b:v;if(E||!n||!(0,l.kc)().dt_figmadoc)return!1;let w=C.data?.file;return(0,l.kc)().dt_code_connect_preloading&&f?.nodesWithCodeConnect&&w?.status!=="loaded"?f?.nodesWithCodeConnect.has(`${l.kc().dt_code_connect_lk_migration?p:c},${u}`):!!(w&&"loaded"===w.status&&w.data&&("code_connect_for_node"in w.data&&w.data?.code_connect_for_node&&w.data?.code_connect_for_node.length>0||"code_connect_for_node_lk"in w.data&&w.data?.code_connect_for_node_lk&&w.data?.code_connect_for_node_lk.length>0))}function I(e,t,n,r){let i;let u=t.get(e),p=(0,m.tS)(),g=(0,o.md)(m._S),[f]=(0,s.IT)((0,_.J_J)({key:p??""})),E=o.zl.get(h.z),{backingFileKey:b,backingNodeId:v,backingLibraryKey:C}=k(e,t,p,g),T=y(b),x=!!b&&(0,d.wJ)(b),N=M(e,t,p,!!r,g),I=w(b,v,N),A=null,L=f.data?.file?.status==="loaded"&&!f.data.file?.data?.hasPermission&&!T,[D]=(0,s.IT)((0,_.yUR)({libraryKey:C??"",nodeId:v??"",instances:N,openFileKey:p??"",isCommunityLibrary:(0,d.wJ)(b??"")}),{enabled:!!(0,l.kc)().dt_figmadoc&&!L&&!!(0,l.kc)().dt_code_connect_lk_migration}),[R]=(0,s.IT)((0,_.nbK)({fileKeyorHubFileId:b??"",nodeId:v??"",instances:N,openFileKey:p??"",isCommunityLibrary:(0,d.wJ)(b??"")}),{enabled:!!(0,l.kc)().dt_figmadoc&&!L&&!(0,l.kc)().dt_code_connect_lk_migration}),P=(0,l.kc)().dt_code_connect_lk_migration?D:R;if(L&&!I||!b||!v)return{id:null,updatedAt:null,doc:null,loaded:!0,availableLabels:[],instanceFigmadocs:{},disabled:!0,isCommunityKey:x};if(I&&E?.docsById)try{A=JSON.parse(E?.docsById[`key-${b},${v}`])}catch{A=null}if(!u||!(0,l.kc)().dt_figmadoc)return{id:null,updatedAt:null,doc:null,loaded:!0,availableLabels:[],instanceFigmadocs:{},disabled:!0,isCommunityKey:x};let F=P.data?.file;if(F&&"loaded"===F.status&&F.data&&("code_connect_for_node"in F.data&&F.data?.code_connect_for_node&&F.data?.code_connect_for_node.length>0||"code_connect_for_node_lk"in F.data&&F.data?.code_connect_for_node_lk&&F.data?.code_connect_for_node_lk.length>0))i="code_connect_for_node"in F.data?F.data?.code_connect_for_node:F.data?.code_connect_for_node_lk;else{if(!A||F?.status==="loaded")return{id:null,updatedAt:null,doc:null,loaded:"loading"!==P.status,availableLabels:[],instanceFigmadocs:{},willHaveCodeConnect:("loading"===P.status&&E?.nodesWithCodeConnect.has(`${l.kc().dt_code_connect_lk_migration?C:b},${v}`))??!1,disabled:F?.status!=="loaded",isCommunityKey:x};i=A}let B=i.map(e=>e.label).filter(Boolean).sort((e,t)=>e.localeCompare(t))??[],U=O(i,n);if(!U)return{id:null,updatedAt:null,doc:null,loaded:!0,availableLabels:B,instanceFigmadocs:{},disabled:!1,isCommunityKey:x};let G=[],K={};try{if(A&&E?.docsById)for(let e of N){let t=O(JSON.parse(E?.docsById[`key-${e}`]),n);K[`key-${e}`]=JSON.parse(t.figmadoc)}else U.instanceFigmadocs&&(K=Object.fromEntries(Object.entries(U.instanceFigmadocs).map(([e,t])=>[e,JSON.parse(t)])))}catch{}try{G=JSON.parse(U.figmadoc)}catch(e){return(0,c.$D)(a.FigmaTeam.DEVELOPER_TOOLS,e,{extra:{figmadoc:U.figmadoc}}),{id:null,updatedAt:null,doc:null,loaded:!0,availableLabels:B,instanceFigmadocs:{},disabled:!0,isCommunityKey:x}}let{id:V,updatedAt:H}=U;return(Array.isArray(G)||(G=[G]),"type"in G[0]&&"snippet"===G[0].type)?{id:V,updatedAt:H,doc:G[0],loaded:!0,availableLabels:B,instanceFigmadocs:K,disabled:!1,isCommunityKey:x}:"template"in G[0]?{id:V,updatedAt:H,doc:S(G,r??u),instanceFigmadocs:K,loaded:!0,availableLabels:B,disabled:!1,isCommunityKey:x}:{id:V,updatedAt:H,doc:null,loaded:!0,availableLabels:B,instanceFigmadocs:K,disabled:!0,isCommunityKey:x}}function A(e){return e.source?`${e.source}#L${e.sourceLocation.line}`:void 0}function O(e,t){let n=[e=>"figmadoc"===e.type&&"React"===e.label,e=>"figmadoc"===e.type&&"Storybook"===e.label,e=>"figmadoc"===e.type&&"SwiftUI"===e.label,e=>"snippet"===e.type];for(let a of(t&&n.unshift(e=>e.label===t),n)){let t=e.find(a);if(t)return t}return e[0]}function L(e,t,n,a){if("INSTANCE"!==e.type)return null;let r=e.symbolId;if(!r)return null;let i=function(e,t,n,a){let{backingSymbolGUID:r,backingStateGroupGUID:i}=(0,f.nD)(new Set([e]),n);if((0,u.gl)(r)||null===r)return null;let l=n.get(r),o=(0,u.gl)(i)||null===i?null:n.get(i);if(o){let e=(0,p.yW)(o),n=!!e&&e!==t,r=x(o),i=n?o.sourceLibraryKey:a;return{backingFileKey:n?e:t,backingNodeId:r,backingLibraryKey:i}}if(l){let e=(0,p.yW)(l),n=!!e&&e!==t,r=x(l),i=n?l.sourceLibraryKey:a;return{backingFileKey:n?e:t,backingNodeId:r,backingLibraryKey:i}}return null}(r,n,t,a);if(!i)return null;let{backingFileKey:o,backingNodeId:s,backingLibraryKey:c}=i;return(0,l.kc)().dt_code_connect_lk_migration?c+","+s:o+","+s}var D=(e=>(e[e.Continue=0]="Continue",e[e.SkipChildren=1]="SkipChildren",e[e.Stop=2]="Stop",e))(D||{});function R(e,t,n,a){let r=[e];for(;r.length>0;){let e=r.pop();if(e){let i=n(e);if(2===i)return;if(1===i)continue;for(let n of a?e.visibleChildren:e.childrenGuids){let e=t.get(n);e&&r.push(e)}}}}function M(e,t,n,a,r){if(!n)return[];let i=new Set,l=t.get(e);return l?(R(l,t,e=>{if("INSTANCE"===e.type){let a=L(e,t,n,r);a&&i.add(a)}},!a),Array.from(i.values())):[]}},593400:(e,t,n)=>{n.d(t,{QU:()=>E,bf:()=>y,uj:()=>h});var a=n(411855),r=n(188507),i=n(966712),l=n(374626),o=n(915440),s=n(29680),c=n(335682),d=n(279453),u=n(284321),m=n(234945),p=n(388094),_=n(656839),g=n(37112);function f(e,t,n,a){if(!e)return new Set;let r=new Set;for(let l of e.childrenNodes){if("SYMBOL"===l.type||l.isStateGroup||"INSTANCE"===l.type){let{backingFileKey:e,backingNodeId:o,backingLibraryKey:s}=(0,g.HX)(l.guid,t,n,a);if((0,i.kc)().dt_code_connect_lk_migration){s&&o&&r.add(`${s},${o}`);continue}e&&o&&r.add(`${e},${o}`)}l.childrenNodes.length>0&&f(l,t,n,a).forEach(e=>r.add(e))}return r}function h(){let e=(0,r.d4)(e=>e.mirror.appModel.currentPage),t=(0,c.tS)(),n=function(e){let t=(0,l.md)(c._S),n=(0,s.eY)(),o=(0,r.d4)(p.aD),d=(0,r.d4)(m.BA),_=function(e){let t=(0,r.d4)(u.MH),n=(0,r.d4)(e=>e.mirror.appModel.currentPage),o=(0,l.md)(c._S);return(0,a.useMemo)(()=>{let a=new Set;if(!(0,i.kc)().dt_code_connect_preloading||!e)return a;for(let[r,l]of Object.entries(t))l.containing_frame?.pageId===n&&(l.containing_frame?.containingStateGroup?.nodeId?a.add(`${(0,i.kc)().dt_code_connect_lk_migration?o:e},${l.containing_frame?.containingStateGroup.nodeId}`):a.add(`${(0,i.kc)().dt_code_connect_lk_migration?o:e},${r}`));return a},[n,t])}(e);return(0,a.useMemo)(()=>{if(!(0,i.kc)().dt_code_connect_preloading||o.length+d.size>((0,i.kc)().dt_preload_code_connect_increase_limit?100:50))return new Set;let a=new Set;for(let r of o){let l=f(n.get(r.nodeId),n,e,t),{backingFileKey:o,backingNodeId:s,backingLibraryKey:c}=(0,g.HX)(r.nodeId,n,e,t);if((0,i.kc)().dt_code_connect_lk_migration){if(c&&s)for(let e of(a.add(`${c},${s}`),l))a.add(e);continue}if(o&&s)for(let e of(a.add(`${o},${s}`),l))a.add(e)}let r=new Set;for(let l of d){let o=n.get(l),s=l;if(o?.containingStateGroupId&&(s=o.containingStateGroupId),r.has(s))continue;let c=f(o,n,e,t);if((0,i.kc)().dt_code_connect_lk_migration){if(t&&s)for(let e of(a.add(`${t},${s}`),r.add(s),c))a.add(e);continue}if(e&&s)for(let t of(a.add(`${e},${s}`),r.add(s),c))a.add(t)}for(let e of _)a.add(e);return a},[_,d,o])}(t);(0,a.useEffect)(()=>{l.zl.set(_.z,null)},[e]);let h=(0,o.Rs)(d.Opb,{nodes:Array.from(n),openFileKey:t??""},{enabled:!!(0,i.kc)().dt_code_connect_preloading&&!!(0,i.kc)().dt_code_connect_lk_migration&&((0,i.kc)().dt_preload_code_connect_increase_limit?n.size<100:n.size<50)}),E=(0,o.Rs)(d.p9d,{nodes:Array.from(n),openFileKey:t??""},{enabled:!!(0,i.kc)().dt_code_connect_preloading&&!(0,i.kc)().dt_code_connect_lk_migration&&((0,i.kc)().dt_preload_code_connect_increase_limit?n.size<100:n.size<50)}),y=(0,i.kc)().dt_code_connect_lk_migration?h:E;(0,a.useEffect)(()=>{if("loaded"===y.status&&"loaded"===y.data.file.status&&y.data.file.data&&("preload_code_connect"in y.data.file.data&&y.data.file.data?.preload_code_connect||"preload_code_connect_lk"in y.data.file.data&&y.data.file.data?.preload_code_connect_lk)){let e="preload_code_connect"in y.data.file.data?y.data.file.data?.preload_code_connect:y.data.file.data?.preload_code_connect_lk;l.zl.set(_.z,{...e,nodesWithCodeConnect:new Set(e.nodesWithCodeConnect)})}return()=>l.zl.set(_.z,null)},[e,y.status])}function E(e){let t=(0,c.tS)(),n=(0,o.Rs)(d.Opb,{nodes:e,openFileKey:t??""},{enabled:!!(0,i.kc)().dt_code_connect_preloading&&!!(0,i.kc)().dt_code_connect_lk_migration&&e.length<20}),a=(0,o.Rs)(d.p9d,{nodes:e,openFileKey:t??""},{enabled:!!(0,i.kc)().dt_code_connect_preloading&&!(0,i.kc)().dt_code_connect_lk_migration&&e.length<20}),r=(0,i.kc)().dt_code_connect_lk_migration?n:a;return"loaded"===r.status&&"loaded"===r.data.file.status&&r.data.file.data&&("preload_code_connect"in r.data.file.data&&r.data.file.data?.preload_code_connect||"preload_code_connect_lk"in r.data.file.data&&r.data.file.data?.preload_code_connect_lk)?{status:"loaded",nodesWithCodeConnect:new Set(("preload_code_connect"in r.data.file.data?r.data.file.data?.preload_code_connect:r.data.file.data?.preload_code_connect_lk).nodesWithCodeConnect)}:{status:"loaded"===r.status?r.data.file.status:r.status,nodesWithCodeConnect:new Set}}function y(){return l.zl.get(_.z)?.nodesWithCodeConnect}},99380:(e,t,n)=>{n.d(t,{kS:()=>T,q5:()=>k,Sl:()=>x});var a=n(411855),r=n(188507),i=n(407436),l=n.n(i),o=n(881388),s=n(939863),c=n(738269),d=n(662275),u=n(356390),m=n(457630),p=n(335682),_=n(611978),g=n(973131),f=n(694517),h=n(493536),E=n(335650),y=n(36657);let b=(0,n(237870).Ju)(function(e){return a.createElement(y.R,{title:(0,s.tx)("recordings.restart_modal_title"),confirmText:(0,s.tx)("general.restart"),onConfirm:e.onConfirm,open:e.open,onClose:e.onClose},(0,s.tx)("recordings.restart_modal_confirmation"))},"RECORDING_CONFIRM_RESTART_MODAL");var v=n(38329),C=n(966712),w=n(860601);let T="none-device",S={initializeRecordingMedia:w.Xv,abortRecording:w.lQ,startWalkthroughRecording:w.lQ,stopWalkthroughRecording:w.Xv,restartWalkthroughRecording:w.lQ,togglePauseRecording:w.lQ,isRecording:!1,isPaused:!1,mediaStream:void 0,getRecordingDataForSinatraCreate:w.pp,getRecordingLengthMs:w.dD};function x(){let[e,t]=a.useState(!1),[n,i]=a.useState(void 0),[y,w]=a.useState(!1),x=a.useRef(null),k=a.useRef(null),[N,I]=a.useState(null),A=(0,p.tS)(),O=(0,p.q5)(),L=(0,r.wA)(),D=(0,_._6)(),R=(0,r.d4)(e=>e.mirror.appModel.currentPage),M=function(){let e=(0,r.wA)(),t=(0,p.tS)(),n=a.useRef(!1),i=a.useRef(!1);return{initializeRecording:a.useCallback(async()=>{n.current=v.D.getState().mirror.appModel.showUi,i.current=!v.D.getState().mirror.appModel.hideMultiplayerCursors;let a=await (0,g.J)(t,"","",e);return e((0,f._b)({type:f.wk.Recording})),e((0,f.Nb)({id:a.id,versions:[a]})),n.current&&u.Y5.triggerAction("toggle-ui"),i.current&&u.Y5.triggerAction("toggle-multiplayer-cursors"),a},[t,e]),stopRecording:a.useCallback(()=>{e((0,f.Eg)()),n.current&&u.Y5.triggerAction("toggle-ui"),i.current&&u.Y5.triggerAction("toggle-multiplayer-cursors"),n.current=!1,i.current=!1},[e])}}(),P=function(e,t){let n=(0,r.wA)(),i=a.useRef(),c=a.useRef([]),d=a.useRef(0),u=a.useRef(0),m=a.useCallback(async()=>!!await navigator.permissions.query({name:"microphone"}).then(async e=>"denied"===e.state?(n(o.s.error((0,s.t)("recordings.browser_audio_permissions_error"))),!1):("prompt"===e.state&&await navigator.mediaDevices.getUserMedia({audio:!0}).then(e=>{e.getTracks().forEach(e=>e.stop())}).catch(e=>("NotAllowedError"===e.name?n(o.s.error((0,s.t)("recordings.browser_audio_permissions_error"))):"NotFoundError"===e.name?n(o.s.error((0,s.t)("recordings.browser_audio_not_available_error"))):n(o.s.error((0,s.t)("recordings.browser_device_general_error"))),!1)),!0))&&(await navigator.permissions.query({name:"camera"}).then(async e=>{"prompt"===e.state&&await navigator.mediaDevices.getUserMedia({video:!0}).then(e=>{e.getTracks().forEach(e=>e.stop())}).catch(()=>{})}),!0),[n]),p=a.useCallback(async(a,r)=>{let i;if(c.current=[],!a&&!r&&!await m())return!1;if(r===T)i=!1;else if(r)i={deviceId:{exact:r}};else{let e=await navigator.permissions.query({name:"camera"}).then(e=>"granted"===e.state),t=(await navigator.mediaDevices.enumerateDevices()).some(e=>"videoinput"===e.kind&&e.deviceId);i=!!e&&!!t}let l=await window.navigator.mediaDevices.getUserMedia({audio:!a||{deviceId:{exact:a}},video:i}).catch(()=>{n(o.s.error((0,s.t)("recordings.browser_device_general_error")))});return l?(t(l),e&&e.getTracks().forEach(e=>e.stop()),!0):(n(o.s.error((0,s.t)("recordings.browser_device_general_error"))),!1)},[n,t,e,m]),_=a.useCallback(()=>{if(!e){console.error("Expected there to be a valid mediaStream here");return}i.current=new MediaRecorder(e,{mimeType:"video/webm"}),i.current.onerror=e=>{console.error("Recorder error:",e)},i.current.ondataavailable=e=>{e.data.size>0&&c.current.push(e.data)},i.current.start(),d.current=new Date().getTime(),u.current=0},[e]),g=a.useCallback(()=>u.current+(d.current>0?new Date().getTime()-d.current:0),[]),f=a.useCallback(async t=>{if(!e||!i.current)return null;let n=new Promise((e,n)=>{let a=setTimeout(()=>{n(Error("Recording stop event timed out"))},3e3);if(!i.current){n(Error("Some error the recorder onStop function"));return}i.current.onstop=()=>{clearTimeout(a),t?e(new Blob(c.current,{type:"video/webm"})):e(null)}});i.current.stop();let a=g(),r=await n;return(c.current=[],i.current=void 0,d.current=0,u.current=0,t)?{userRecordedMediaBlob:await l()(r,a,{logger:!1}),videoLengthMs:a}:null},[e,g]),h=a.useCallback(async()=>{let n=await f(!0);return e?.getTracks()?.forEach(e=>e.stop()),t(void 0),n},[e,t,f]),E=a.useCallback(t=>{if(!e){console.error("some error with the video recording");return}t?(i.current?.pause(),u.current+=new Date().getTime()-d.current,d.current=0):(i.current?.resume(),d.current=new Date().getTime())},[e]),y=a.useCallback(async()=>{await f(!1)},[f]);return a.useMemo(()=>({initializeRecordingMedia:p,startRecording:_,generateUserRecording:h,abortRecording:y,setIsPaused:E,getRecordingLengthMs:g}),[p,_,h,E,y,g])}(n,i),F=function(){let e=a.useRef(void 0),t=a.useRef(void 0),n=a.useRef([]),[r,i]=a.useState(!1),l=a.useRef(0),o=a.useRef(0),s=a.useRef(!1),c=a.useCallback(e=>{let t=n.current.length,a=t>0?n.current[t-1].msSinceRecordingStart:void 0;a&&Math.floor(a/h.c6)===Math.floor(e.msSinceRecordingStart/h.c6)?n.current[t-1]=e:n.current.push(e)},[n]),d=a.useCallback(n=>{if(s.current)return;let a=o.current+(new Date().getTime()-l.current);t.current=n;let r=e.current?e.current:{x:0,y:0};c({viewportPath:{offsetX:Math.round(n.offsetX),offsetY:Math.round(n.offsetY),zoomScale:n.zoomScale},mousePositionPath:r,msSinceRecordingStart:a})},[c]),p=a.useCallback(n=>{if(s.current)return;let a=o.current+(new Date().getTime()-l.current),r=t.current;if(!r){console.error("Skipping mouseMove event because we don't have a viewportPosition");return}let i={x:n.clientX,y:n.clientY},d=(0,m.$$)(r,i);e.current=d,c({viewportPath:{offsetX:Math.round(r.offsetX),offsetY:Math.round(r.offsetY),zoomScale:r.zoomScale},mousePositionPath:{x:Math.round(d.x),y:Math.round(d.y)},msSinceRecordingStart:a})},[c]);(0,m.D6)({subscribeToUpdates_expensive:r},d);let _=a.useCallback(()=>{l.current=new Date().getTime(),o.current=0,s.current=!1,i(!0),n.current=[],e.current=void 0,t.current=u.Y5.getViewportInfo(),document.addEventListener("mousemove",p)},[p]),g=a.useCallback(()=>{let a=n.current;return n.current=[],e.current=void 0,t.current=void 0,l.current=0,o.current=0,s.current=!1,document.removeEventListener("mousemove",p),i(!1),a},[p]),f=a.useCallback(e=>{s.current=e,e?(o.current+=new Date().getTime()-l.current,l.current=0):l.current=new Date().getTime()},[]);return a.useMemo(()=>({startRecording:_,stopRecording:g,setIsPaused:f}),[_,g,f])}(),B=a.useCallback(()=>{t(!1),w(!1),M.stopRecording(),P.abortRecording(),x.current=null,k.current=null,n&&(n.getTracks().forEach(e=>e.stop()),i(void 0)),I(null)},[n,P,M]),U=a.useCallback(async(e,t)=>{let n=P.initializeRecordingMedia(e,t),a=!x.current;if(a&&(x.current=await M.initializeRecording()),await n)a&&(0,E.Q3)(O,E.ZP.RECORDING_INITIALIZED);else{(0,E.Q3)(O,E.ZP.RECORDING_DEVICE_UNAVAILABLE),B();return}},[P,M,B,O]),G=a.useCallback(()=>{P.startRecording(),F.startRecording(),t(!0),w(!1)},[P,F]),K=a.useCallback(async()=>{t(!1),w(!1);let e=0===n.getVideoTracks().length,a=await P.generateUserRecording();if(!a){L(o.s.error((0,s.t)("recordings.saving_general_error"))),B();return}let r=F.stopRecording(),i=new Blob([JSON.stringify(r)],{type:"application/json"}),l={x:r[0].viewportPath.offsetX,y:r[0].viewportPath.offsetY};I({fileKey:A,recordedPositions:i,userMediaRecording:a.userRecordedMediaBlob,currentPage:R,isAudioOnly:e,fileVersionId:x.current.id,lengthMs:a.videoLengthMs,firstPosition:l});let d={...D,walkthroughRecordingId:h.xP};L((0,c.$T)(d))},[L,A,P,F,R,n,B,D]),V=a.useCallback(()=>w(e=>(P.setIsPaused(!e),F.setIsPaused(!e),!e)),[F,P]),H=a.useCallback(()=>{y||V(),L((0,d.to)({type:b,data:{onConfirm:async()=>{await P.abortRecording(),F.stopRecording(),t(!1),w(!1)}}}))},[y,V,F,P,L]),z=a.useCallback(()=>N,[N]);return a.useMemo(()=>(0,C.kc)().async_spotlight||!A?{initializeRecordingMedia:U,abortRecording:B,startWalkthroughRecording:G,stopWalkthroughRecording:K,restartWalkthroughRecording:H,togglePauseRecording:V,isRecording:e,isPaused:y,mediaStream:n,getRecordingDataForSinatraCreate:z,getRecordingLengthMs:P.getRecordingLengthMs}:S,[U,B,G,K,V,H,e,A,n,y,z,P])}let k=a.createContext(S)},255376:(e,t,n)=>{n.d(t,{S:()=>d});var a=n(411855),r=n(629019),i=n.n(r),l=n(163023),o=n(516398),s=n(949207),c=n(432023);function d({children:e,isInitiallyOpen:t,title:n,titleClassName:r}){let[d,u]=a.useState(t),m=()=>u(e=>!e);return a.createElement("div",null,a.createElement("div",{className:i()("collapse--collapseTitle---N1bR",r),onClick:m,onKeyDown:e=>(0,o.hx)({e,onClickHandler:m}),role:"button",tabIndex:0},a.createElement(l.B,{className:"collapse--expandCaret--FzvQ9 library_section_header--expandCaret--20Tzs object_row--expandCaret--f1MjE object_row--indent--uZlad",svg:d?s.A:c.A}),n),d&&e)}},425411:(e,t,n)=>{n.d(t,{n:()=>d});var a=n(411855),r=n(629019),i=n.n(r),l=n(153234),o=n(163023),s=n(498606);let c="file_upload_icon_input--disabledIcon--JLhI1";function d(e){let{svg:t,svgAltText:n,isDisabled:r,acceptedFileTypes:d,inputRef:u,onFileInputChange:m,singleFile:p,recordingKey:_}=e,g=(0,l.AF)(_,"change",e=>{m(u)()});return a.createElement("label",{htmlFor:e.inputId,className:i()("file_upload_icon_input--fileUploadIconLabel--GkBse",{[c]:r}),"data-tooltip-type":s.Ib.TEXT,"data-tooltip-show-immediately":!0,"data-tooltip":r?null:e["data-tooltip"]},a.createElement("input",{type:"file",name:e.inputId,id:e.inputId,accept:d,ref:u,onChange:g,multiple:!p,className:"file_upload_icon_input--fileInput--qwRav",disabled:r}),e.children||t&&a.createElement("div",{className:"file_upload_icon_input--svg--qwaj3"},a.createElement(o.B,{title:n,ariaLabel:n,svg:t,autosize:!0,className:i()({[c]:r})})))}},20484:(e,t,n)=>{n.d(t,{ED:()=>i,OT:()=>a,ts:()=>r});let a=function(){return""},r=function(){return null},i=function(){return null}},404621:(e,t,n)=>{n.d(t,{M:()=>r,S:()=>a});let a=function(){return null},r=function(){throw Error("HTML Serializer not available")}},982323:(e,t,n)=>{n.d(t,{Gd:()=>b,g2:()=>S,M0:()=>v,Hn:()=>C,Wb:()=>T,v0:()=>w});var a=n(411855),r=n(188507),i=n(587670),l=n(534611),o=n(374626),s=n(335682),c=n(222478),d=n(709731),u=n(55069),m=n(92566),p=n(953289),_=n(491679),g=n(629019),f=n.n(g),h=n(168039);function E(){let e="dark"===(0,h.DP)();return a.createElement("div",{className:f()("slides_ai_shimmer_overlay--shimmer--R2Ru3",e?"slides_ai_shimmer_overlay--shimmerDark--hd6lU":"slides_ai_shimmer_overlay--shimmerLight--PGzix")})}var y=n(983499);function b(e){if(e)return e.pageGuids;let t=o.zl.get(p.V6);return(()=>{switch(t.type){case p.i6.ALL:return t.allPages;case p.i6.SINGLE:return[t.page];default:return[]}})().map(e=>e.guid)}function v(e){let t=(0,r.d4)(e=>e.fileVersion),n=(0,o.md)(p.bY).figjamEntryPointData,i=n?.figjamFileKey||e,l=n?.selectedGuids;return(0,a.useCallback)(()=>{if(!(!i||!t))return(0,y.R)({fileKey:i,fileVersion:t,selectedGuids:l})},[i,t,l])}function C(e){let t=(0,_.yt)(),n=(0,a.useRef)(!1);return(0,a.useCallback)(()=>{if(!o.zl.get(s.ze))return;let a=o.zl.get(m.xB);!n.current&&a?.flat()?.length===0&&e.length>0&&(n.current=!0,t(e[0],{row:0,col:0},i.zkO.USER,"figjam-board-to-deck-default-slide",_.Ji.BOARD_TO_DECK))},[t,e])}function w(){let e=function(){let e=(0,o.md)(p.ux),t=(0,_.WS)(),n=t.data||[],a="loaded"===t.status&&n.length>0,r=(0,_.S7)();return e||(a?n[0].library_key:r)}(),t=(0,_.NG)(e),n="loaded"===t.status;return{areSlidePresetsLoaded:n,slidePresetModules:n?t.data:[]}}function T(){let e=(0,a.useRef)(null),t=(0,a.useRef)(new Set);return{showPlaceholderOverlay:(0,a.useCallback)(n=>{if(n&&n!==l.AD&&e.current!==n){for(let e of t.current)(0,u.ks)(e);e.current=n,t.current.add(n),(0,u.Vm)(n,a.createElement(E,null))}},[]),removeAllPlaceholderOverlays:(0,a.useCallback)(()=>{for(let e of t.current)(0,u.ks)(e);t.current.clear(),e.current=null},[])}}function S(){(0,a.useEffect)(()=>()=>{let{state:e}=(0,d.pP)(c.JT.BOARD_TO_DECK);e===d.qy.RUNNING&&(0,d.cT)(c.JT.BOARD_TO_DECK)},[])}},447636:(e,t,n)=>{n.d(t,{Pm:()=>a,aF:()=>i});var a=(e=>(e.Light="LIGHT",e.Dark="DARK",e.Translucent="TRANSLUCENT",e))(a||{}),r=(e=>(e.Light="light",e.Dark="dark",e))(r||{});function i(e){let t,n;switch(e.theme){case void 0:case"LIGHT":t="LIGHT";break;case"DARK":case"TRANSLUCENT":t="DARK"}n="LIGHT"===t?"light":"dark";let a="true"===e.hideBackground;return a&&(n=function(e){switch(e){case"light":return"dark";case"dark":return"light"}}(n)),{theme:t,preferredTokenTheme:n,transparentMode:a}}},934576:(e,t,n)=>{n.d(t,{DR:()=>A,E$:()=>O,Wd:()=>B,gD:()=>U,lu:()=>D,wL:()=>R});var a=n(411855),r=n(188507),i=n(675678),l=n(75395),o=n(601976),s=n(587670),c=n(86625),d=n(707458),u=n(629019),m=n.n(u),p=n(776621),_=n(153808),g=n(901536),f=n(939863),h=n(392592),E=n(934533),y=n(992271),b=n(969468),v=n(611978),C=n(860178),w=n(100197),T=n(705940),S=n(250118),x=n(667005),k=n(89465),N=n(276625),I=n(79770);function A(e){let{nodeId:t,setConfigData:n,isReadOnly:i}=e,{shouldBeMounted:l,loadEmbed:o}=(0,x._)(t),u=!i,m=(0,r.wA)(),p=(0,w.J2)(s.Ez5.flappData().embeddablePrototypeIdPendingInsertion),[_,g]=(0,a.useState)(),b=(0,a.useMemo)(()=>{let t=U(e.configData);if(!t)return;let n=y.hY[t.presetIdentifier],a=t.rotation===s.xOL.CCW_90;return(a?n.imageSize.y:n.imageSize.x)/(a?n.imageSize.x:n.imageSize.y)},[e.configData]);(0,a.useEffect)(()=>{if(!u)return;let e=d.q.instance.get(t),n=b??_;e&&n&&c.l7.system("resizing-embed",()=>{let t=e.size.x>0?e.size.x:400,a=Math.floor(t/n);0===e.size.x&&(e.x-=t/2,e.y-=a/2),e.resizeWithConstraints(t,a),e.proportionsConstrained=!0})},[t,b,_,u]),(0,a.useEffect)(()=>{t===p&&(m(h.F.enqueue({type:"slides-embedded-prototype",message:(0,f.t)("slides.inserting_embed.visual_bell"),icon:E.zX.SPINNER,timeoutOverride:1/0})),o(),setTimeout(()=>{t===s.Ez5.flappData().embeddablePrototypeIdPendingInsertion.getCopy()&&s.oHM.embeddablePrototypeLoadFailed()},3e4))},[t,p,m,o]),(0,a.useEffect)(()=>{let e=e=>{if(e.origin===location.origin&&(!e.source||!("frameElement"in e.source)||null==e.source.frameElement||e.source.frameElement.id===S.xu+t)){if("EMBED_PROTO_ASPECT_RATIO"===e.data.type&&e.data.data.aspectRatio&&(g(e.data.data.aspectRatio),t===p&&s.oHM.embeddablePrototypeLoadSucceeded()),"EMBED_PROTO_DEVICE"===e.data.type){let t=e.data.data;u&&t&&t.device?c.l7.system("embed-deviceframe",()=>{n("deviceFrameShown",""!==t.device.presetIdentifier&&"PRESET"===t.device.type?"true":"false"),n("deviceFramePreset",t.device.presetIdentifier),n("deviceFrameRotation",t.device.rotation)}):u&&c.l7.system("embed-deviceframe",()=>{n("deviceFrameShown","false"),n("deviceFramePreset",""),n("deviceFrameRotation","NONE")})}if("EMBED_PROTO_FILE_METADATA"===e.data.type){let t=e.data.data;u&&t&&c.l7.system("embed-file-metatada",()=>{n("fileName",t.fileName),n("pageName",t.pageName),t.activeStartingPointNodeId&&n("activeStartingPointNodeId",t.activeStartingPointNodeId),t.startingPointsData&&n("startingPointsData",JSON.stringify(t.startingPointsData))})}}};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[t,n,m,p,u]);let v=(0,x.s)(t)||!l;return a.createElement(L,{...e,isActivated:l,setActivate:o,disablePointerEvents:!v})}function O(e){let t=(0,v._6)(),n=(0,_.hk)(),r=e.nodeId,[l,o]=(0,a.useState)(n?.getActiveSlidesEmbeddedPrototype()===r);(0,_.O5)(n,"activeSlidesPrototypeEmbedChange",e=>{o(e===r)});let s=(0,a.useCallback)(e=>{t.isAudienceViewPopout?(0,k.o)({type:"LOAD_EMBEDDED_PROTOTYPE",nodeId:e}):n?.setActiveSlidesEmbeddedPrototype(e)},[n,t]);return"prototype"!==t.view?((0,p.x1)(i.FigmaTeam.SLIDES,"Failed to load embedded prototype in non-prototype selected view",{nodeId:r}),null):a.createElement(L,{...e,isActivated:l,setActivate:s})}function L({configData:e,nodeId:t,setConfigData:n,isViewer:r,isActivated:i,setActivate:l,disablePointerEvents:o}){let s=(0,_.hk)(),c=U(e),d=a.useCallback(e=>{if(t!==e.nodeId)return;let n=P(t);n&&!s?.isPresenterSession()&&n.contentWindow?.postMessage({type:"SET_OBSERVING_SESSION_ID",data:{sessionId:null!=e.presenterSessionId?e.presenterSessionId:-1}},"*")},[t,s]);(0,_.O5)(s,"embeddedPrototypeChange",d);let u=a.useCallback(e=>{let n=P(t);n?.contentWindow?.postMessage({type:"PROTOTYPE_EMBED_SELECT_FLOW",data:{flowId:e}},"*")},[t]);return(0,a.useEffect)(()=>{e.activeStartingPointNodeId&&u(e.activeStartingPointNodeId)},[e.activeStartingPointNodeId,u]),(0,a.useEffect)(()=>{let e=e=>{e.origin!==location.origin||e.source&&"frameElement"in e.source&&null!=e.source.frameElement&&e.source.frameElement.id!==S.xu+t||!s||"PRESENTER_SESSION_ID"!==e.data.type||s.handleEmbeddedPrototypeChange(t,e.data.data.sessionId)};return window.addEventListener("message",e),()=>{window.removeEventListener("message",e)}},[s,t,n,r]),(0,a.useEffect)(()=>()=>{s?.handleEmbeddedPrototypeChange(t,-1)},[s,t]),a.createElement(R,{deviceFrame:c},a.createElement("div",{className:g.cx.hFull.wFull.$,style:{pointerEvents:o?"none":"auto"}},i&&e.url?a.createElement(M,{baseUrl:e.url,nodeId:t,activeStartingNodeId:e.activeStartingPointNodeId}):null,!i&&l?a.createElement(D,{isViewer:r,onClick:()=>l(t)}):null))}function D({isViewer:e,onClick:t}){return e?a.createElement(l.E,{className:m()(I.kg,g.cx.cursorPointer.$),onClick:t},a.createElement(o.l,{className:I.uZ})):a.createElement("div",{className:I.kg},a.createElement(o.l,{className:m()(I.uZ,g.cx.cursorPointer.$),onClick:t}))}function R({deviceFrame:e,children:t}){let n=e?.rotation===s.xOL.CCW_90?{x:e?.size.y??K.size.y,y:e?.size.x??K.size.x}:{x:e?.size.x??K.size.x,y:e?.size.y??K.size.y};return a.createElement("div",{className:m()(I.kL)},a.createElement(T._,{initialViewerSize:n,isDeviceFrameShown:null!=e&&e.type===s.XQq.PRESET&&""!==e.presetIdentifier,prototypeDevice:e,isInlinePreview:!1},t))}function M({baseUrl:e,nodeId:t,activeStartingNodeId:n}){let[r,i]=(0,a.useState)(n),l=function(e,t,n){let a;if(!e)return null;try{a=new URL(e)}catch(e){return null}let r=a.searchParams;return(0,N.e)(r,"bare-ui","1"),(0,N.e)(r,"scaling","fit-width"),(0,N.e)(r,"content-scaling","fixed"),(0,N.e)(r,"needsAlpha","1"),(0,N.e)(r,"inline-viewer","1"),(0,N.e)(r,"disable-default-keyboard-nav","1"),t&&(0,N.e)(r,"fuid",t),n&&(0,N.e)(r,"starting-point-node-id",n),a}(e,(0,C.TA)(),r);return a.createElement("div",{className:I.pU},a.createElement("iframe",{id:`${S.xu}${t}`,className:I.pU,loading:"eager",src:l?.toString(),title:(0,f.t)("slides.flapp.embed.title"),allow:"autoplay; encrypted-media; picture-in-picture; fullscreen;",sandbox:"allow-scripts allow-same-origin allow-popups allow-top-navigation-by-user-activation"}))}function P(e){return document.getElementById(S.xu+e)}let F=e=>{switch(e){case"NONE":default:return s.xOL.NONE;case"CCW_90":return s.xOL.CCW_90}};function B(e){return!!e.deviceFramePreset&&(void 0===e.deviceFrameShownOverride?"true"===e.deviceFrameShown:"true"===e.deviceFrameShownOverride)}function U(e){return B(e)?function(e){let t=y.hY[e.deviceFramePreset??""];return t?{type:s.XQq.PRESET,size:t.framePresetSize,presetIdentifier:t.presetIdentifier,rotation:F(e.deviceFrameRotation)}:null}(e):null}let G=b.eo[0],K={type:s.XQq.PRESET,size:G.framePresetSize,presetIdentifier:G.presetIdentifier,rotation:s.xOL.NONE}},82963:(e,t,n)=>{n.d(t,{u:()=>w});var a=n(411855),r=n(109388),i=n(587670),l=n(86625),o=n(707458),s=n(505525),c=n.n(s),d=n(395096),u=n(776250),m=n(44948),p=n(15859),_=n(74505),g=n(457630),f=n(29680),h=n(335682),E=n(100197),y=n(222478),b=n(709731),v=n(868268),C=n(969245);function w(){let e=(0,g._X)({subscribeToUpdates_expensive:!0}),t=(0,f.p8)("isReadOnly"),n=(0,m.k9)(()=>e,[e]),i=document.getElementById("fullscreen-root");if(!i)return null;let l=i.querySelectorAll(".view.container-view");if(0===l.length)return null;let o=l[l.length-1];return o?(0,r.createPortal)(a.createElement(N,{viewportInfo:n,isReadOnly:t}),o):null}function T(e){return null!=e&&e.y-e.absoluteBounds.y===e.height&&e.height===e.absoluteBounds.height}function S(e){return null!=e&&e.x-e.absoluteBounds.x===e.width&&e.width===e.absoluteBounds.width}function x(e){return{...e,x:e.x-e.width,angle:0}}function k(e){return{...e,y:e.y-e.height,angle:0}}function N({viewportInfo:e,shouldRenderMobileFlapps:t,isReadOnly:n}){let l=(0,E.J2)(i.Ez5.flappData().nodeIds),[s,c]=(0,a.useState)({}),d=(0,E.J2)(i.Ez5.singleSlideView().focusedSlideId);(0,a.useEffect)(()=>{if(!l.length)return;let{currentNodePosition:e}=(0,_.EE)("Flapps",l,e=>{(0,r.flushSync)(()=>c(t=>{let n=o.q.instance.get(e.nodeId),a=n?.findContainingSlideOrSelf();if(!n||!e.position||!a)return t;let r=e.position;return S(e.position)&&(r=x(r)),T(e.position)&&(r=k(r)),{...t,[e.nodeId]:{guid:e.nodeId,slideId:a,position:r,type:n.interactiveSlideElementType}}}))}),t=Object.entries(e).reduce((e,[t,n])=>{let a=o.q.instance.get(t),r=a?.findContainingSlideOrSelf();if(a&&n?.position&&r){let i=n?.position;S(n.position)&&(i=x(i)),T(n.position)&&(i=k(i)),e[t]={guid:t,slideId:r,position:i,type:a.interactiveSlideElementType}}return e},{});return(0,r.flushSync)(()=>c(t)),()=>(0,_.lB)("Flapps")},[l]);let u=i.Ez5.singleSlideView().isSingleSlideViewFocused(),p=(0,m.k9)(()=>Object.values(s).filter(e=>!u||u&&e.slideId===d),[s,u,d]);return(0,b.wj)(y.JT.BOARD_TO_DECK).state===b.qy.RUNNING?null:a.createElement(a.Fragment,null,p.map(r=>a.createElement(I,{key:r.guid,element:r,viewportInfo:e,shouldRenderMobileFlapp:t,isReadOnly:n})))}let I=a.memo(({element:e,viewportInfo:t,shouldRenderMobileFlapp:n,isReadOnly:r})=>{let l=(0,E.J2)(i.Ez5.flappData().nodeThumbnailEditCount).get(e.guid)??0,[s,c]=(0,a.useState)(null);if(!e||!e.position||!t)return a.createElement(a.Fragment,null);let d=o.q.instance.get(e.guid);if(!d)return null;let u=(0,g.Yb)(t,e.position);return a.createElement("div",{title:d.name,style:{position:"fixed",width:e.position.width,height:e.position.height,top:t.y,left:t.x,transform:`translate(${u.x}px, ${u.y}px) rotate(${e.position.angle}deg) scale(${t.zoomScale})`,transformOrigin:"top left",pointerEvents:r?"none":"auto"}},a.createElement("div",{className:C.U,ref:c},a.createElement(A,{element:e,shouldRenderMobileFlapp:n,isReadOnly:r})),s&&e.type!==i.a9h.YOUTUBE&&a.createElement(O,{nodeId:e.guid,editCount:l,flappDomElement:s,isReadOnly:r}))});function A({element:e,shouldRenderMobileFlapp:t,isReadOnly:n}){if(null===e.type)return null;let{EditorFlapp:r}=t?(0,v.v)(e.type):(0,v.Z)(e.type);return a.createElement(r,{nodeId:e.guid,isReadOnly:n})}function O({nodeId:e,editCount:t,flappDomElement:n,isReadOnly:r}){let[i]=(0,d.A)(t,500),s=(0,h.tS)();return a.useEffect(()=>{if(r)return;let t=o.q.instance.get(e);if(t&&"INTERACTIVE_SLIDE_ELEMENT"===t.type){var a;a=()=>{(function(e,t,n){let a=t.interactiveSlideElementType,r=t.guid;c().toBlob(e,{bgcolor:"transparent"}).then(e=>e?.arrayBuffer()).then(e=>{if(!e||0===e.byteLength)throw Error("Cannot decode empty buffer");return(0,p.UD)(new Uint8Array(e),"image/png",`${r}thumbnail`)}).then(e=>{t.isAlive()&&l.l7.system("generate-slide-thumbnail",()=>{0===t.fills.length?t.insertImageInFillPaint(e):t.setImageInFillPaint(e)})}).catch(e=>{(0,u.sx)("Failed to generate thumbnail in editor for slide",{error:e,nodeId:r,flappType:a,fileKey:n},{forwardToDatadog:!0})})})(n,t,s||"")},requestAnimationFrame(()=>requestAnimationFrame(a))}},[r,e,i,n,s]),a.createElement(a.Fragment,null)}},947899:(e,t,n)=>{n.d(t,{GV:()=>ei,FN:()=>eo});var a=n(411855),r=n(75395),i=n(96796),l=n(927457),o=n(587670),s=n(86625),c=n(707458),d=n(629019),u=n.n(d),m=n(729074),p=n(646240),_=n(374626),g=n(153234),f=n(192437),h=n(901536),E=n(939863),y=n(259927),b=n(617453),v=n(318812),C=n(29680),w=n(575288),T=n(100197),S=n(498606),x=n(492554),k=n(92566),N=n(924430),I=n(953289),A=n(491679),O=n(675678),L=n(689980),D=n(776621);let R=e=>{try{return Array.from(e.componentControls).find(e=>e.isDragging)}catch(e){(0,D.$D)(O.FigmaTeam.SLIDES,e);return}},M=e=>{try{return e.panSession.history[0]}catch(e){(0,D.$D)(O.FigmaTeam.SLIDES,e);return}};var P=n(366501),F=n(434228);function B(e){return(0,F.O)()?a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M18 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0m1 0a4 4 0 1 1-8 0 4 4 0 0 1 8 0M7.5 8.5a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm-2 2a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1zm2 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1z",clipRule:"evenodd"})):a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 8a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm-2 2a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1zm0 2a.5.5 0 0 0 0 1h4a.5.5 0 0 0 0-1zm2 2a.5.5 0 0 0 0 1h3a.5.5 0 0 0 0-1zm9.5-2.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0m1 0a3.5 3.5 0 1 1-7 0 3.5 3.5 0 0 1 7 0",clipRule:"evenodd"}))}var U=n(859905),G=n(77763),K=n(255942),V=n(522739),H=n(864089),z=n(501114),W=n(168039),j=n(792675),$=n(188507),q=n(163023),Y=n(356390),X=n(372252),J=n(525040),Z=n(464560);function Q(e){let{carouselSlide:t}=e,n=(0,_.md)(X.Z7),r=n.get(t.guid),i=(0,$.d4)(e=>e.mirror.appModel.showComments),l=(0,J.Vi)(),o=a.useCallback(()=>{i||Y.Y5.triggerAction("toggle-show-comments",{source:"comments_sidebar_setting"}),l||Y.Y5.triggerAction("set-tool-comments",{source:"comments_sidebar_setting"})},[i,l]);if(!r&&!t.isCollapsed)return null;let s=r?.commentCount||0,c=r?.hasUnread||!1;if(t.isCollapsed){let e=t.children;for(let t=0;t<e.length;t++){let a=e[t],r=n.get(a.guid);a.children&&e.concat(a.children),r&&(s+=r.commentCount,c=c||r.hasUnread)}}return s?a.createElement("div",{className:c?"carousel_comment--carouselComment--X2WAd":"carousel_comment--carouselCommentRead--ecFSn carousel_comment--carouselComment--X2WAd"},a.createElement("div",{className:"carousel_comment--commentCount--8Fpe6"},s),a.createElement(q.B,{className:"carousel_comment--carouselCommentPin--yBJwH",svg:Z.A,onClick:o})):null}var ee=n(195601);let et="carousel--addSlideButton--KLSOp",en=(0,a.forwardRef)(function({carouselSlide:e,isDraggingSlides:t,isHovered:n,isCarouselFocused:r,isSelected:i,firstOfSelection:l,lastOfSelection:s,indentAmount:c,selectedSlideCount:d,guidToDisplayForDebugging:p,onMouseDown:_,onMouseUp:f,onClickCaret:y,onScrollToSlide:b,disabled:v,recordingKey:C,dragControls:w,onDrag:T,onDragStart:x,onDragEnd:k,reorderScrollerRef:N},I){let{guid:A,number:O,isCollapsed:L,children:D}=e,R=(0,a.useRef)(null),M=(0,j.x)(N);(0,a.useEffect)(()=>{requestAnimationFrame(()=>{R.current&&M&&i&&b(R.current)})},[i,M,b,N,d]);let F=t&&n,G=t&&i&&!n,H=i&&!F,W=i?r?"var(--color-text-design)":"var(--color-text)":"var(--color-text-secondary)",$=0;t&&i&&d>=2?$=d>=3?2:1:L&&D.length>=1&&($=D.length>1?2:1);let q=D.length&&!F?L?"COLLAPSED":"EXPANDED":void 0,Y=o.Ez5.singleSlideView().singleSlideThumbnailNumberWidth(),X=o.Ez5.slideAnimationBindings().getSlideTransition(A),J=X.type!==o.v$l.NONE||X.trigger.type===o.tbx.AFTER_DELAY,[Z,ee]=(0,P.go)(e);return a.createElement(a.Fragment,null,F?a.createElement("div",{className:h.cx.colorBgDesign.h0.p1.bRadius3.mr8.$,style:{width:`calc(100% - 24px - ${c}px - ${Y}px)`}}):null,a.createElement(m._.Item,{ref:(0,K.A)(I,R),value:A,className:h.cx.wFull.relative.$,style:z.sx.add({scrollMargin:"8px"}).$,transition:{type:"spring",duration:.25,bounce:0},dragConstraints:{left:-50,right:50},dragElastic:.1,drag:!v,"data-testid":"ssv-slide",dragControls:w,onDrag:T,onDragStart:x,onDragEnd:k,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":D.length>0&&L?(0,E.t)("slides.carousel.slide_stack_tooltip",{min:Z,max:ee}):void 0},a.createElement(V.GG,{className:h.cx.eventsAuto.bgTransparent.relative.wFull.zIndex0.opacity1.if(F,h.cx.zIndex1).if(G,h.cx.opacity0).$,style:z.sx.relative.if(H,{backgroundColor:r?"var(--color-border-design)":"var(--color-bg-tertiary)"}).if(l,{borderTopLeftRadius:"5px",borderTopRightRadius:"5px"}).if(s,{borderBottomLeftRadius:"5px",borderBottomRightRadius:"5px"}).$,onMouseDown:_,onMouseUp:f,"data-fullscreen-intercept":!0,recordingKey:C},a.createElement("div",{className:h.cx.inlineFlex.bgTransparent.p8.bRadius5.wFull.borderBox.$,style:{paddingBottom:`${8+7.5*$}px`}},a.createElement("div",{className:h.cx.flex.flexColumn.itemsStart.gap16.$,style:{...z.sx.add({width:`${Y}px`,marginRight:`${o.Ez5.singleSlideView().singleSlideThumbnailNumberMargin()}px`,marginLeft:`${c}px`}).$}},a.createElement("span",{className:h.cx.alignLeft.font13.if(F,h.cx.opacity0).$,style:{...z.sx.add({color:W}).if(O&&O>99,{marginLeft:"5px",width:`${Y}px`,direction:"rtl"}).$}},O||"-")),a.createElement("div",{className:h.cx.eventsNone.wFull.flex.relative.$},p?a.createElement("div",{className:h.cx.absolute.top0.left0.$},p):null,a.createElement(ea,{guid:A}),a.createElement(er,{layersActive:$}),J?a.createElement("div",{className:u()(h.cx.absolute.colorBg.b1.bRadius2.$,"carousel--transitionIndicator--JsSwP")},a.createElement("span",null,a.createElement(B,null))):null),a.createElement(Q,{carouselSlide:e}))),q?a.createElement(V.GG,{onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),y()},className:h.cx.bgTransparent.absolute.$,style:{justifySelf:"center",transition:"transform 0.25s",transform:"EXPANDED"===q?`rotate(0deg) translateX(${O&&O>9?"2px":"0"})`:"rotate(-90deg) translateX(0)",top:"28px",left:"0"},recordingKey:g.Pt(C,"caret")},a.createElement(U.k,{style:{"--color-icon":W}})):null))});function ea({guid:e}){let t=(0,ee.p)(e),n=c.q.instance.get(e),r=n?.isSkippedSlide;return a.createElement(a.Fragment,null,r?a.createElement("div",{className:u()(h.cx.wFull.hFull.flex.bRadius5.justifyCenter.itemsCenter.absolute.zIndex1.colorBg.$,"carousel--skippedSlideContainer--jww0f")},a.createElement("div",{className:"carousel--skippedSlideIcon--12vh-"},a.createElement(G.j,null))):null,a.createElement(H.oW,{src:t,alt:"",className:h.cx.wFull.hAuto.bRadius5.$,style:{background:"var(--color-fsCanvasDefaultFill)",outline:"1px solid var(--color-bordertranslucent)",aspectRatio:"16 / 9"}}))}function er({layersActive:e}){let t="dark"===(0,W.DP)(),n=["translate(0, 7px) scale(0.91, 0.83)","translate(0, 15px) scale(0.84, 0.79)"],r=1===e?["var(--elevation-100-canvas)"]:["var(--elevation-200-canvas)","var(--elevation-100-canvas)"],i=t?"#5C5C5C":"var(--color-bg, var(--fallback-color-bg))",l=[`linear-gradient(rgba(0,0,0,0) 0%, rgba(0,0,0,0.12) 89%, rgba(0,0,0,0) 98%) ${i}`,i];return a.createElement(a.Fragment,null,[2,1].map(t=>a.createElement("div",{key:"outlineui"+t,className:h.cx.bRadius3.eventsNone.absolute.zIndexMinus1.elevation100.borderBox.top0.wFull.$,style:z.sx.add({transitionProperty:"transform, opacity",transitionDuration:"0.1s, 0.001s",transitionDelay:"0s, 0.2s",aspectRatio:"16 / 9",transform:"translate(0, 0) scale(0)",transformOrigin:"center bottom",opacity:0}).if(e>=t,{transform:n[t-1],opacity:1,transitionDelay:"0s, 0s",boxShadow:r[t-1],background:l[t-1]}).$})))}let ei="carousel-add-slide-button";function el({recordingKey:e}){let t=(0,T.J2)(o.Ez5.slideDeck().slideGrid),n=(0,C.p8)("isReadOnly"),[r,i]=(0,a.useState)(""),l=(0,T.J2)((0,b.UK)().showGuids),{carouselSlidesBySlideId:s,slideGuids:c,toggleCollapsed:d,expandParent:_}=(0,P.WW)(t),{selectedSlideIds:f,onMouseDownSlide:E,onMouseUpSlide:S}=(0,P.A8)(c,s,d);(0,a.useLayoutEffect)(()=>{f.forEach(e=>_(e))},[f,_]);let{scrollerRef:N,onScroll:I,dragControls:A,onDrag:O,onDragStart:D,onDragEnd:F}=function(){let e=(0,L.m)(),t=(0,a.useRef)(null),n=(0,a.useRef)(),r=(0,a.useRef)(),i=(0,a.useRef)(),l=(0,a.useRef)(),o=(0,a.useRef)(!1),s=(0,a.useCallback)(e=>{if(o.current||!l.current)return;let t=M(l.current),a=e.target;if(!t||!a||void 0===n.current||void 0===i.current)return;let r=a.scrollTop-n.current;t.y=i.current-r},[]),c=(0,a.useCallback)((e,n)=>{if(o.current)return;let a=t.current;if(!a)return;let i=a.getBoundingClientRect(),l=n.point.y,s=e.target;if(!(s instanceof Element))return;let c=s.closest("[draggable]"),d=c?.parentElement;l<i.top+50&&(c!==d?.firstElementChild||a.scrollTop>0)?a.scrollTop-=5:l>i.bottom-50&&c!==d?.lastElementChild&&a.scrollTop+a.clientHeight<(r.current??a.scrollHeight)&&(a.scrollTop+=5)},[]),d=(0,a.useCallback)(()=>{let a=t.current,s=R(e);if(!a||!s){o.current=!0;return}l.current=s,n.current=a.scrollTop,r.current=a.scrollHeight;let c=M(s);if(!c){o.current=!0;return}i.current=c.y,o.current=!1},[e]);return{scrollerRef:t,onScroll:s,dragControls:e,onDrag:c,onDragStart:d,onDragEnd:(0,a.useCallback)(()=>{n.current=void 0,r.current=void 0,i.current=void 0,l.current=void 0},[])}}(),{onMouseDown:B,onMouseMove:U,onSlideReorder:G,isDraggingSlides:K,isClickingSlides:V,detachedSlideGuids:H,indentSelectionBy:z}=(0,P.EL)(f,c,r,s,t,n),W=(0,T.J2)(o.Ez5.singleSlideView().isCarouselFocused),j=(0,v.BK)(y.U3),$=e=>{let{clientX:t,clientY:n}=e;j.show({data:{clientX:t,clientY:n}})},q=e=>{let t=s[e]?.indent||0;return(e===r&&K?z+t:t)<=0?0:1},Y=o.Ez5.singleSlideView().singleSlideThumbnailPadding(),X=(0,p.Xr)(k.uY),J=(0,a.useCallback)((e,t)=>{e.isIntersecting?X(e=>e.includes(t)?e:[...e,t]):X(e=>e.filter(e=>e!==t))},[X]),Z=(0,x.B)(c,J,{threshold:.5}),Q=(K?H:c).filter(e=>!!s[e]&&!!Z.get(e)),[ee,et,ea]=(0,w.J)(!1),er=(0,a.useRef)(W);er.current=W;let ei=(0,a.useCallback)(e=>{if(N.current){if(ee.current&&er.current)e.scrollIntoView({block:"nearest",inline:"nearest"});else{let t=e.getBoundingClientRect(),n=N.current.getBoundingClientRect();(t.top<n.top||t.bottom>n.bottom)&&(N.current.scrollTop=Math.max(e.offsetTop-1.5*t.height,0)),ea(!0)}}},[ee,ea,N]);return a.createElement(a.Fragment,null,n?null:a.createElement("div",{className:h.cx.wFull.flex.gap8.py8.bb1.colorBorder.bSolid.borderBox.$,style:{paddingLeft:`${Y}px`,paddingRight:`${Y}px`}},a.createElement(ec,{recordingKey:e})),a.createElement(m._.Group,{className:u()(h.cx.overflowYScroll.flexGrow1.flex.flexColumn.justifyStart.itemsEnd.pr2.py8.borderBox.wFull.$,"carousel--hideScrollbar--Y-9SW"),style:{paddingLeft:`${Y}px`,paddingRight:`${Y}px`,overflowAnchor:"none",scrollBehavior:et&&!K?"smooth":void 0},values:K?H:c,onContextMenu:e=>{e.stopPropagation(),e.preventDefault(),$(e)},onMouseUp:e=>{e.ctrlKey&&$(e)},"data-testid":"slides-carousel",onMouseMove:U,onReorder:G,ref:N,onScroll:I,layoutScroll:!0,axis:"y"},Q.map((t,c)=>s[t]&&a.createElement(en,{key:t,ref:Z.get(t),reorderScrollerRef:N,carouselSlide:s[t],isDraggingSlides:K,isHovered:t===r,isCarouselFocused:W,isSelected:f.includes(t),firstOfSelection:!f.includes(Q[c-1]),lastOfSelection:!f.includes(Q[c+1]),indentAmount:20*q(t),selectedSlideCount:f.length,guidToDisplayForDebugging:l?t:null,onMouseDown:e=>{i(t),E(e,t),B(e)},onMouseUp:e=>S(e,K,V,t),onClickCaret:()=>{o.Ez5.singleSlideView().isCarouselFocused.set(!0),d(t)},onScrollToSlide:ei,disabled:n,recordingKey:g.Pt(e,"slide",c),dragControls:A,onDrag:O,onDragStart:D,onDragEnd:F}))))}function eo({retryCount:e=0,recordingKey:t}){return a.createElement(f.tH,{boundaryKey:"SlidesSSVCarousel",fallback:e<3?a.createElement(eo,{retryCount:e+1,recordingKey:t}):a.createElement(es,null)},a.createElement(el,{recordingKey:t}))}function es(){return a.createElement("div",{className:h.cx.p16.$},a.createElement("div",{className:h.cx.textBodyMedium.$},(0,E.tx)("slides.carousel.error")),a.createElement("div",{className:h.cx.mt4.$},(0,E.tx)("slides.carousel.error_solution")))}let ec=a.forwardRef(function({recordingKey:e},t){let{toggleTemplatePicker:n,closeTemplatePicker:o}=(0,A.uu)(),d=(0,_.md)(I.Ei),m=s.nc.user("ssv-carousel",()=>{o();let e=c.q.instance;(0,P.oY)(e,"carousel_add_slide_button")});return a.createElement("div",{"data-element-target":ei,className:h.cx.wFull.h24.flex.justifyCenter.$},a.createElement(r.E,{ref:t,className:u()(h.cx.if(d,h.cx.colorBgHover,h.cx.colorBg).flex.justifyCenter.itemsCenter.flexGrow1.borderBox.hFull.eventsAll.colorBorder.b1.pl24.$,et),style:{borderRadius:"6px 0 0 6px",borderRightWidth:"0"},onClick:n,htmlAttributes:{"data-fullscreen-intercept":!0,"data-tooltip":(0,E.t)("slides.carousel.add-slide-from-template"),"data-tooltip-type":S.Ib.TEXT,"data-onboarding-key":N.MB},"aria-label":(0,E.t)("slides.carousel.add-slide-from-template")},a.createElement("p",{className:h.cx.noWrap.$},(0,E.t)("slides.carousel.new_slide")),a.createElement(i.O,null)),a.createElement(r.E,{className:u()(h.cx.colorBorder.b1.flex.itemsCenter.$,et),style:{borderRadius:"0 6px 6px 0"},onClick:m,recordingKey:(0,g.Pt)(e,"addSlideButton"),htmlAttributes:{"data-fullscreen-intercept":!0,"data-tooltip":(0,E.t)("slides.carousel.add-blank-slide"),"data-tooltip-type":S.Ib.TEXT,"data-tooltip-shortcut-key":"create-slide","data-testid":"addSlideButton"},"aria-label":(0,E.t)("slides.carousel.add-blank-slide")},a.createElement(l.e,null)))})},69324:(e,t,n)=>{n.d(t,{_:()=>B,i:()=>U});var a=n(411855),r=n(188507),i=n(587670),l=n(38329),o=n(320063),s=n(966712),c=n(646240),d=n(374626),u=n(782112),m=n(281381),p=n(946689),_=n(939863),g=n(738269),f=n(931828),h=n(101505),E=n(456104),y=n(594524),b=n(723239),v=n(960884),C=n(356390),w=n(100197),T=n(984968),S=n(397065),x=n(143678),k=n(916108),N=n(394828),I=n(700886),A=n(340514),O=n(493364),L=n(463546),D=n(144119),R=n(545195),M=n(953289),P=n(342753),F=n(924430);function B(){let e=(0,c.Xr)(M.VZ),t=(0,D.jY)(),n=(0,P.A)(),{show:r,isShowing:i,complete:l}=(0,E.e)({overlay:L.Yqi,priority:S.N.DEFAULT_MODAL}),s=(0,a.useMemo)(()=>n?[U,G,K,V,H,z]:[U,G,K,V,z],[n]),{currentStep:d,next:u}=(0,y.A)({numSteps:s.length,onComplete:l}),m=a.useMemo(()=>{let r=()=>{u(),e(!0)},o=s.map((e,o)=>a.createElement(e,{onClickPrimaryCta:t||0!==o?u:r,onClickSecondaryCta:l,isShowing:i,totalSteps:n?5:4,isOnboarding:!0}));return t||o.splice(1,0,a.createElement(R.g,null)),o},[s,t,u,e,l,i,n]);return((0,o.h)(()=>{r()}),i&&m)?a.createElement(k.U,{currentStep:d,isShowing:i,children:m}):null}function U({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,isOnboarding:i}){let o=(0,c.Xr)(M.VZ),E=(0,d.md)(b.d2),y=(0,r.wA)(),C=E.data===x.qo.ORG,w=d.zl.get(v.Z),S=d.zl.get(T.Me),k=l.D.getState().openFile,N=!k||!k.canEdit,A=(0,u.lt)({currentOrg:w,currentTeam:S,isViewer:N}),O="/sub-processors/",L="/ssa/",D="ja"===(0,s.mm)()[0]?(0,_.tx)("slides.onboarding.welcome.title.jp"):(0,_.tx)("slides.onboarding.welcome.title"),R=C?A?(0,_.tx)("slides.onboarding.welcome.org.footer.no_ai",{services_agreement:a.createElement(p.CY,{href:L,target:"_blank",trusted:!0},(0,_.tx)("slides.onboarding.services_agreement"))}):(0,_.tx)("slides.onboarding.welcome.org.footer.ai",{subprocessors:a.createElement(p.CY,{href:O,target:"_blank",trusted:!0},(0,_.tx)("slides.onboarding.subprocessors")),services_agreement:a.createElement(p.CY,{href:L,target:"_blank",trusted:!0},(0,_.tx)("slides.onboarding.services_agreement"))}):A?void 0:(0,_.tx)("slides.onboarding.welcome.starter.footer",{subprocessors:a.createElement(p.CY,{href:O,target:"_blank",trusted:!0},(0,_.tx)("slides.onboarding.subprocessors"))});(0,a.useEffect)(()=>{i&&y?.(f.b({seen_slides_onboarding:!1}))});let P=()=>{y?.(g.$T({view:"recentFiles"})),t()};return N?null:a.createElement(I._l,{isShowing:n,title:a.createElement("div",null,D,a.createElement(m.Ex,{text:"Beta",color:m.zE.BRAND,className:"onboard_slides--betaBadge--TpHbJ",subtle:!0})),description:a.createElement("span",{style:{whiteSpace:"pre-line"}},(0,_.tx)("slides.onboarding.welcome.description",{learn_more:a.createElement(p.CY,{href:"https://help.figma.com/hc/articles/4406787442711-What-Figma-features-are-in-beta",target:"_blank",trusted:!0},(0,_.tx)("slides.onboarding.learn_more"))})),primaryCta:{type:"button",label:(0,_.tx)("slides.onboarding.welcome.primary_cta"),onClick:()=>{e(),y?.(f.b({seen_slides_onboarding:!0,agreed_to_slides_ai_terms:!0})),i&&o(!0)},ctaTrackingDescriptor:h.c.NEXT},secondaryCta:{type:"button",label:(0,_.tx)("slides.onboarding.welcome.secondary_cta"),onClick:P,ctaTrackingDescriptor:h.c.CLOSE},media:a.createElement("img",{src:"https://static.figma.com/uploads/b5ff672e289f44685a5e04d3de9f17f154fb2455",alt:"Figma Slides carousel",width:332}),onClose:P,clickOutsideToHide:!1,trackingContextName:"Slides Onboarding > Welcome",disclaimerFooter:R,hideCloseButton:!0})}function G({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:r}){let l=(0,w.J2)(i.Ez5.singleSlideView().isInSingleSlideView);return a.createElement(A.rq,{isShowing:n,targetKey:F.MB,trackingContextName:"Slides Onboarding > New Slide",onClose:t,arrowPosition:O.F_.BOTTOM,title:(0,_.tx)("slides.onboarding.new_slide.title"),description:(0,_.tx)("slides.onboarding.new_slide.description"),media:a.createElement(N.y,{src:"https://static.figma.com/uploads/2811dcf7f07f10fbc8543106336765058bc83266",alt:"slides template picker",aspectRatio:240/135}),stepCounter:{stepNum:1,totalNumSteps:r},primaryCta:{type:"button",label:(0,_.tx)("slides.onboarding.callout.next"),onClick:()=>{e(),l&&i.Ez5.singleSlideView().exitSingleSlideView()},ctaTrackingDescriptor:h.c.NEXT},secondaryCta:{type:"button",label:(0,_.tx)("slides.onboarding.callout.close"),onClick:t,ctaTrackingDescriptor:h.c.CLOSE},shouldDisableAnimation:!0})}function K({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:r}){return a.createElement(A.rq,{isShowing:n,trackingContextName:"Slides Onboarding > Views",onClose:t,targetKey:F.b_,title:(0,_.tx)("slides.onboarding.views.title"),description:(0,_.tx)("slides.onboarding.views.description"),media:a.createElement(N.y,{src:"https://static.figma.com/uploads/8ad8b13cac28f9fb6eaaed9cad7c621684fadd6b",alt:"Grid view in Slides",aspectRatio:240/135}),stepCounter:{stepNum:2,totalNumSteps:r},primaryCta:{type:"button",label:(0,_.tx)("slides.onboarding.callout.next"),onClick:()=>{C.Y5.triggerAction("enter-single-slide-view"),e()},ctaTrackingDescriptor:h.c.NEXT},secondaryCta:{type:"button",label:(0,_.tx)("slides.onboarding.callout.close"),onClick:t,ctaTrackingDescriptor:h.c.CLOSE},shouldDisableAnimation:!0})}function V({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:r}){let l=(0,P.A)(),o=(0,P.E)(i.EMA.SLIDES);return a.createElement(A.rq,{isShowing:n,trackingContextName:"Slides Onboarding > Tools",onClose:t,targetKey:F.hx,shouldHideArrow:!0,shouldCenterArrow:O.EL.BEST_EFFORT,title:(0,_.tx)("slides.onboarding.nondesigner.tools.title"),description:(0,_.tx)("slides.onboarding.nondesigner.tools.description"),media:a.createElement(N.y,{src:"https://static.figma.com/uploads/aca6af2d36ffc1a4f65a12247f598a7598a530b7",alt:"Apps in Slides",aspectRatio:240/135}),stepCounter:{stepNum:3,totalNumSteps:r},primaryCta:{type:"button",label:(0,_.tx)("slides.onboarding.callout.next"),onClick:()=>{e(),l&&o()},ctaTrackingDescriptor:h.c.NEXT},secondaryCta:{type:"button",label:(0,_.tx)("slides.onboarding.callout.close"),onClick:()=>{t()},ctaTrackingDescriptor:h.c.CLOSE},shouldDisableAnimation:!0})}function H({onClickPrimaryCta:e,onClickSecondaryCta:t,isShowing:n,totalSteps:r}){let l=(0,P.E)(i.EMA.DESIGN);return a.createElement(A.rq,{isShowing:n,trackingContextName:"Slides Onboarding > Design Mode",onClose:t,targetKey:F.uy,shouldHideArrow:!0,shouldCenterArrow:O.EL.BEST_EFFORT,title:(0,_.tx)("slides.onboarding.designer.tools.title"),description:(0,_.tx)("slides.onboarding.designer.tools.description"),media:a.createElement(N.y,{src:"https://static.figma.com/uploads/5064800f3f60febf8b2ad2ad8ba4efdd6167eeaa",alt:"Design tool toggle",aspectRatio:240/135}),stepCounter:{stepNum:4,totalNumSteps:r},primaryCta:{type:"button",label:(0,_.tx)("slides.onboarding.callout.next"),onClick:()=>{e(),l()},ctaTrackingDescriptor:h.c.NEXT},secondaryCta:{type:"button",label:(0,_.tx)("slides.onboarding.callout.close"),onClick:()=>{t()},ctaTrackingDescriptor:h.c.CLOSE},shouldDisableAnimation:!0})}function z({onClickSecondaryCta:e,isShowing:t,totalSteps:n}){return a.createElement(A.rq,{isShowing:t,trackingContextName:"Slides Onboarding > Present",onClose:e,targetKey:F.J5,title:(0,_.tx)("slides.onboarding.share.title"),description:(0,_.tx)("slides.onboarding.share.description"),media:a.createElement(N.y,{src:"https://static.figma.com/uploads/a3ed241305c3e13d9ec5cab6e9a88db7572695c5",alt:"presenter mode in Slides",aspectRatio:240/135}),stepCounter:{stepNum:n,totalNumSteps:n},primaryCta:{type:"button",label:(0,_.tx)("slides.onboarding.callout.done"),onClick:e,ctaTrackingDescriptor:h.c.DONE},shouldDisableAnimation:!0,onTargetLost:e})}},978258:(e,t,n)=>{n.d(t,{Zz:()=>r,fG:()=>l,o2:()=>i});var a=n(939863);let r=2/3,i="slides-rewrite-text",l={executive:{localizedText:(0,a.tx)("slides.properties_panel.rewrite_text.tone_executive"),position:[-r,r],trackingText:"Executive"},technical:{localizedText:(0,a.tx)("slides.properties_panel.rewrite_text.tone_technical"),position:[r,r],trackingText:"Technical"},basic:{localizedText:(0,a.tx)("slides.properties_panel.rewrite_text.tone_basic"),position:[-r,-r],trackingText:"Basic"},educational:{localizedText:(0,a.tx)("slides.properties_panel.rewrite_text.tone_educational"),position:[r,-r],trackingText:"Educational"}}},60656:(e,t,n)=>{n.d(t,{u:()=>l});var a=n(411855),r=n(860601);let i={tonePosition:[0,0],setTonePosition:r.lQ,setPositionAndRun:r.lQ},l=(0,a.createContext)(i)},156182:(e,t,n)=>{n.d(t,{G:()=>r});var a=n(776250);function r(e){(0,a.sx)("slides_rewrite_event",e)}},263086:(e,t,n)=>{n.d(t,{DX:()=>h,FT:()=>f,eX:()=>E});var a=n(411855),r=n(675678),i=n(215122),l=n(587670),o=n(86625),s=n(534611),c=n(707458),d=n(776621),u=n(550273),m=n(32067),p=n(709731),_=n(108239),g=n(978258);function f(e,t,n){let r=(0,a.useCallback)(n=>{e(n),t()},[e,t]),i=(0,a.useCallback)(e=>{n(e)},[n]);return(0,a.useCallback)(e=>{let{eventType:t,node:n}=e;switch(t){case"BEFORE_STREAM_START":r(n);return;case"AFTER_STREAM_CHUNK":i(n);return}},[r,i])}function h(e,t){let n=(0,a.useRef)(new Map),u=(0,p.wj)(e).state;return(0,a.useEffect)(()=>{u!==p.qy.RUNNING&&n.current.size>0&&(n.current=new Map)},[u]),{slidesTextResizeCallback:(0,a.useCallback)(e=>{if(!e.isInSlide())return;let a=n.current,u=a.get(e.guid);u&&cancelAnimationFrame(u);let m=requestAnimationFrame(()=>{o.l7.ai(t,()=>{(function(e){let t=e.findContainingSlideOrSelf(),n=c.q.instance.get(t);if(!n||"WIDTH_AND_HEIGHT"!==e.textAutoResize)return;let a=n.size.x,r=n.absoluteTransform.m02,i=r+a,l=e.absoluteTransform.m02,o=e.size.x;if(l<=r+16){if(e.parentGuid===t)(0,_.HH)(e,16,e.relativeTransform.m12);else{let n=e;for(;n.parentGuid!==t&&n.parentNode;)n=n.parentNode;(0,_.HH)(n,16,n.relativeTransform.m12)}let n=r+16-l;e.resizeWithConstraints(o-n,e.size.y),l=e.absoluteTransform.m02,o-=n}l+o>=i-16&&e.resizeWithConstraints(i-16-l,e.size.y)})(e),function(e){let t=e.findContainingSlideOrSelf(),n=c.q.instance.get(t);if(!n||"HEIGHT"!==e.textAutoResize&&"WIDTH_AND_HEIGHT"!==e.textAutoResize)return;let a=n.absoluteTransform.m12,o=n.absoluteTransform.m12+n.size.y,u=e.size.y,m=e.absoluteTransform.m12;if(m<a+16||m+u>o-16){let t;e.inheritedTextStyle&&(l.glU.applyStyleToSelection("inheritTextStyleKey",s.AD,!1),l.glU.selectStyle(i.n3.INVALID,i.IA.INVALID));let n=Math.max(0,a+16-m),c=Math.max(0,m+u-(o-16)),p=e.lineHeightOrMixed;"mixed"===p&&(p=e.getRangeLineHeight(0,1)),"mixed"===p?(t=1,(0,d.$D)(r.FigmaTeam.AI_PRODUCTIVITY,Error("Unexpected mixed line height while resizing text node for slide bounds"))):"PIXELS"===p.units?(t=p.value/e.fontSize,e.lineHeight={units:"RAW",value:t}):t=p.value;let _=u/(e.fontSize*t),g=Math.floor((e.fontSize*t-(n+c)/_)/t);e.fontSize=Math.max(g,8)}}(e)})});a.set(e.guid,m)},[t])}}function E(e){let t=(0,m.O1)(),n=(0,u.Gc)(t,{allowEmpty:!1}),r=(0,a.useRef)(new Map),i=(0,a.useCallback)(()=>{r.current.clear()},[]),l=(0,a.useCallback)(()=>{o.l7.ai(e,()=>{for(let[e,t]of r.current){let n=c.q.instance.get(e);n&&(0,_.HH)(n,t.x,t.y)}r.current.clear()})},[e]),s=(0,a.useCallback)(e=>{r.current.has(e.guid)||r.current.set(e.guid,{x:e.relativeTransform.m02,y:e.relativeTransform.m12})},[]);return{shiftAllNodesOutOfSlideMargins:(0,a.useCallback)(()=>{n.forEach(e=>{o.l7.ai(g.o2,()=>{let t=e.findContainingSlideOrSelf(),n=c.q.instance.get(t);if(!n)return;let a=e.absoluteTransform.m12,r=e.size.y,i=n.absoluteTransform.m12,l=i+n.size.y,o=(0,_.F7)(e);if(a<i+16)s(o),(0,_.HH)(o,o.relativeTransform.m02,16);else if(a+r>l-16){let e=Math.max(o.relativeTransform.m12-(a+r-(l-16)),16);s(o),(0,_.HH)(o,o.relativeTransform.m02,e)}})})},[n,s]),resetShiftedNodes:l,resetNodePositionMap:i}}},326186:(e,t,n)=>{n.d(t,{fm:()=>z,o$:()=>Y,JU:()=>es,p$:()=>eo,Tm:()=>j,fp:()=>er,mD:()=>q,Cw:()=>en,cx:()=>el,Os:()=>Z,wi:()=>ec,xf:()=>ee,PF:()=>Q,Ne:()=>$,h$:()=>X,cR:()=>J,Jp:()=>et,uG:()=>ea,Ib:()=>ed});var a=n(411855),r=n(188507),i=n(409990),l=n(557295),o=n(341092),s=n(675678),c=n(587670),d=n(86625),u=n(707458),m=n(841563),p=n.n(m),_=n(622422),g=n(358145),f=n(966712),h=n(374626),E=n(776621),y=n(966981),b=n(30637),v=n(877723),C=n(939863),w=n(392592),T=n(934533),S=n(239349),x=n(293017),k=n(259927),N=n(550273),I=n(809831),A=n(574724),O=n(499777),L=n(601607),D=n(420186),R=n(32067),M=n(914905),P=n(222478),F=n(709731),B=n(999140),U=n(573591),G=n(144119),K=n(978258),V=n(60656),H=n(156182);let z=1/3,W="tone-dial-visual-bell",j=(0,O.TJ)(k.vu);function $(){let e=(0,R.O1)(),t=(0,v.BE)(),n=(0,G.sO)(),a=(0,I.Em)();return(n||!!(0,f.kc)().aip_tone_dial_fd&&a)&&t&&!!(0,f.kc)().figjam_ai_piper_text_manipulation&&(0,N.Gc)(e,{allowEmpty:!1}).length>0}function q(e,t){let{source:n,toggle:a}=t,r=h.zl.get(M.h);if(!r?.current)return;if(h.zl.set(B.zF,n),h.zl.get(j)){a&&Y(e);return}let i=(0,b.Lg)()?{x:0,y:0}:(0,D.cn)(r.current,D.qo);e(x.u1({id:k.vu,initialX:i.x,initialY:i.y})),(0,H.G)({eventName:"modal_opened",source:n})}function Y(e){e(x.XE()),(0,H.G)({eventName:"modal_closed"})}function X(e,t,n,r){let l=(0,I.Em)(),o=!!(0,f.kc)().aip_tone_dial_fd&&l,s=(0,a.useCallback)(({texts:t,parameters:n,targetMap:a,authInfo:r})=>{let l=e(a.values()),s=t.map(({id:e,text:t})=>{let n=a.get(e),r=n&&l.get(n.node.guid);return{id:e,text:r?.effectiveText??t}});return A.Ay.slides.rewriteText({texts:s,tones:n.tones,productType:o?i.ch.DESIGN:i.ch.SLIDES},r)},[o,e]),{onRun:c,lastParameters:d,longRunningAction:u,cancel:m}=(0,U.Hd)({makeCortexRequest:s,featureType:P.JT.SLIDES_REWRITE_TEXT,excludeDigitsAndSpecialChar:!!(0,f.kc)().ai_prod_tone_dial_block_digits,onNodeStreamEvent:t,onError:n,onSuccess:r,editScopeLabel:K.o2}),{enqueueRun:p}=function(e){let t=(0,a.useRef)(),n=(0,a.useRef)(),r=(0,a.useCallback)(()=>{t.current=void 0,n.current&&(t.current=n.current().then(r),n.current=void 0)},[]);return{enqueueRun:(0,a.useCallback)(a=>{if(t.current){n.current=()=>e(a);return}t.current=e(a).then(r)},[r,e])}}(c);return{enqueueRun:p,lastParameters:d,longRunningAction:u,cancel:m}}function J(e){let{originalNodeInfos:t,setOriginalNodeInfos:n}=function(e){let[t,n]=(0,a.useState)(()=>new Map),r=(0,L.wA)(e=>e.getCurrentPage()?.originalNodeInfos??[]),i=(0,a.useMemo)(()=>new Map(r.map(e=>[e.nodeId,e])),[r]),l=(0,a.useCallback)(e=>{u.q.instance.getCurrentPage()?.setOriginalNodeInfos([...e.values()])},[]);return(0,f.kc)().slides_tone_dial_undo&&e===K.o2?{originalNodeInfos:i,setOriginalNodeInfos:l}:{originalNodeInfos:t,setOriginalNodeInfos:n}}(e),r=(0,a.useCallback)(e=>{if(t.size)return t;let a=new Map;for(let t of e){let e=t.node,n=t.selectionRange?.start??0,r=e.getRangeFontSize(n,n+1),i=e.getRangeLineHeight(n,n+1),l=e.inheritedTextStyle;("mixed"===r||"mixed"===i)&&(0,E.$D)(s.FigmaTeam.AI_PRODUCTIVITY,Error("Unexpected mixed font size or line height while saving initial font size and line height")),a.set(e.guid,{nodeId:e.guid,nodeText:t.nodeText,effectiveText:t.effectiveText,selectionRange:t.selectionRange??null,fontSize:"mixed"!==r?r:null,lineHeight:"mixed"!==i?function(e){switch(e.units){case"RAW":return{value:e.value,units:c.cus.RAW};case"PERCENT":return{value:e.value,units:c.cus.PERCENT};case"PIXELS":return{value:e.value,units:c.cus.PIXELS}}}(i):null,textStyle:l})}return n(a),a},[t,n]),i=(0,a.useCallback)(()=>{n(new Map)},[n]),l=(0,a.useCallback)(n=>{let a=t.get(n.guid);if(!a)return;let r=a.fontSize,i=a.lineHeight,l=a.textStyle,o=a.selectionRange?.start??0,s=a.selectionRange?.end??n.characters.length;d.l7.ai(e,()=>{r&&n.fontSize!==r&&n.setRangeFontSize(o,s,r),i&&!p()(n.lineHeightOrMixed,i)&&n.setRangeLineHeight(o,s,function(e){switch(e.units){case c.cus.RAW:return{value:e.value,units:"RAW"};case c.cus.PERCENT:return{value:e.value,units:"PERCENT"};case c.cus.PIXELS:return{value:e.value,units:"PIXELS"}}}(i)),l&&(n.inheritedTextStyle=l)})},[t,e]),o=(0,a.useCallback)(()=>{for(let e of t.values()){let t=u.q.instance.get(e.nodeId);t&&l(t)}},[t,l]);return{originalNodeInfos:t,saveOriginalNodeInfos:r,resetOriginalNodeInfos:i,revertNodeToOriginalNodeInfo:l,resetAllNodesToOriginalTextStyles:o}}function Z(e){let t=(0,F.pP)(P.JT.SLIDES_REWRITE_TEXT),n=t.state,i=(0,g.ZC)(n)!==n,s=(0,r.wA)();(0,a.useEffect)(()=>()=>{s(w.F.dequeue({matchType:W})),(0,F.cT)(P.JT.SLIDES_REWRITE_TEXT)},[s]),(0,a.useEffect)(()=>{if(i){if(n===F.qy.RUNNING)s(w.F.enqueue({message:(0,C.t)("slides.properties_panel.rewrite_text.action_rewriting"),icon:T.zX.SPINNER,type:W,timeoutOverride:1/0,button:{text:(0,C.t)("slides.properties_panel.rewrite_text.action_stop"),action:()=>(0,F.cT)(P.JT.SLIDES_REWRITE_TEXT)}}));else if(n===F.qy.CANCELLED)s(w.F.dequeue({matchType:W}));else if(n===F.qy.DONE)s(w.F.enqueue({icon:T.zX.CHECK,message:(0,C.t)("slides.properties_panel.rewrite_text.action_done"),type:W,timeoutOverride:8e3,button:{text:(0,C.t)("slides.properties_panel.rewrite_text.action_rewrite_again"),action:()=>e()},onDismiss:()=>{}}));else if(n===F.qy.ERROR){let n=t.error,a=function(e){if(e instanceof U.n4)return(0,C.t)("slides.properties_panel.rewrite_text.error.no_text_characters_found");if(!(e instanceof o.G1||e instanceof l.CortexErrorV2))return(0,C.t)("slides.properties_panel.rewrite_text.error.default");let t={offline:(0,C.t)("slides.properties_panel.rewrite_text.error.connection"),meter_exceeded:(0,C.t)("slides.properties_panel.rewrite_text.error.rate_limit"),rate_limit_exceeded:(0,C.t)("slides.properties_panel.rewrite_text.error.rate_limit"),content_length_limit_exceeded:(0,C.t)("slides.properties_panel.rewrite_text.error.token_limit"),text_tool_no_text:(0,C.t)("slides.properties_panel.rewrite_text.error.empty_text"),unsafe_or_harmful_content:(0,C.t)("slides.properties_panel.rewrite_text.error.inappropriate_input"),service_issue:(0,C.t)("slides.properties_panel.rewrite_text.error.openai_down"),ai_opt_out_error:(0,C.t)("slides.properties_panel.rewrite_text.error.opt_out"),unauthorized:(0,C.t)("slides.properties_panel.rewrite_text.error.default"),generic:(0,C.t)("slides.properties_panel.rewrite_text.error.default")},n="generic";if(e instanceof l.CortexErrorV2)l.ClientContentLengthLimitExceededError.isInstance(e)||l.ProviderContentLengthLimitExceededError.isInstance(e)?n="content_length_limit_exceeded":l.MeterExceededError.isInstance(e)?n="meter_exceeded":l.ProviderRateLimitExceededError.isInstance(e)||l.CortexRateLimitExceededError.isInstance(e)?n="rate_limit_exceeded":l.ClientNoTextSelectedError.isInstance(e)?n="text_tool_no_text":l.ProviderServiceIssueError.isInstance(e)||l.ProviderServiceBusyError.isInstance(e)?n="service_issue":l.OfflineError.isInstance(e)?n="offline":l.UnsafeOrHarmfulPromptError.isInstance(e)||l.ProviderUnsafeOrHarmfulContentError.isInstance(e)?n="unsafe_or_harmful_content":l.UnauthorizedError.isInstance(e)?n="unauthorized":e?.statusCode===404?n="service_issue":e?.statusCode===429?n="rate_limit_exceeded":e?.statusCode===403&&(n="ai_opt_out_error");else if(e instanceof o.G1)switch(e.type){case"content_length_limit_exceeded":case"meter_exceeded":case"rate_limit_exceeded":case"text_tool_no_text":case"service_issue":case"offline":case"unsafe_or_harmful_content":case"ai_opt_out_error":case"unauthorized":n=e.type;break;case"generic":switch(e.data?.status){case 404:n="service_issue";break;case 429:n="rate_limit_exceeded";break;case 403:n="ai_opt_out_error"}}return t[n]}(n),r=function(e){switch(e.type){case"text_tool_no_text":case"unsafe_or_harmful_content":case"content_length_limit_exceeded":case"no_text_characters_found":return!1;default:return!0}}(n);s(w.F.enqueue({icon:T.zX.CLOSE_FILLED,message:a,type:W,button:r?{text:(0,C.t)("slides.properties_panel.rewrite_text.action_rewrite_again"),action:()=>e()}:void 0,onDismiss:()=>{}}))}}},[s,n,i,e,t])}function Q(e,t){let n=(0,_.$)((0,S.Tv)().join(",")),i=(0,_.$)((0,r.d4)(e=>e.mirror.appModel.activeUserAction===c.QOV.SELECTING_TEXT)),l=n||i,o=(0,_.$)((0,r.d4)(()=>N.nl()?.characters)),s=e===F.qy.RUNNING,d=(0,g.ZC)(s)&&!s,u=s||d;(0,a.useEffect)(()=>{if(!(0,f.kc)().slides_tone_dial_undo){if(l){t();return}o&&!u&&t()}},[t,l,o,u])}function ee(e,t){let n=(0,g.ZC)(e),r=n&&!p()(n,e),i=p()(e,[0,0]),l=r&&i;(0,a.useEffect)(()=>{(0,f.kc)().slides_tone_dial_undo&&l&&t()},[t,l])}function et(e){let{Sprig:t}=(0,y.A)(),n=(0,g.ZC)(e);(0,a.useEffect)(()=>{e===F.qy.DONE&&n===F.qy.RUNNING&&t("track","slides_rewrite_text")},[t,e,n])}function en(e,t){if(1!==e.size){for(let{nodeId:n,nodeText:a}of e.values()){let e=u.q.instance.get(n);e?.isAlive()&&d.l7.ai(K.o2,()=>{e.spliceCharacters(0,e.characters.length,a,"BEFORE"),t(e)})}return}let[n]=e.values(),a=(0,N.fN)();if(!a||!n||!a.node.isAlive())return;let r=a.node,i=a.selectionRange?.start??0,l=a.selectionRange?.end??r.characters.length,o=n.effectiveText;d.l7.ai(K.o2,()=>{r.spliceCharacters(i,l,o,"BEFORE"),t(r)});let s=u.q.instance.getCurrentPage();n.selectionRange?s?.setSelectedTextRange(r.guid,i,i+o.length):(0,U.y_)(r.guid)}function ea(e){let[t,n]=(0,a.useState)(!1),{tonePosition:r,setTonePosition:i,setPositionAndRun:l}=(0,a.useContext)(V.u),o=(0,a.useCallback)(e=>{n(!0),e.stopPropagation()},[]),s=(0,a.useCallback)(()=>{t&&(n(!1),l(r,{source:"dial_drag"}))},[t,l,r]),c=(0,a.useCallback)(n=>{if(!t||!e.current)return;let{clientX:a,clientY:r}=n;i(er(a,r,e.current.getBoundingClientRect()))},[e,t,i]);return(0,a.useEffect)(()=>(document.addEventListener("mouseup",s),document.addEventListener("mousemove",c),()=>{document.removeEventListener("mouseup",s),document.removeEventListener("mousemove",c)}),[c,s]),{onMouseDown:o,isDragging:t}}function er(e,t,n){return[(e-n.left)/n.width,(n.bottom-t)/n.height].map(e=>Math.max(.045,Math.min(.955,e))).map(e=>(e-.5)*2).map(ei)}function ei(e){return Math.round(100*e)/100}function el([e,t]){return[ei(e),ei(t)]}function eo([e,t]){let n=[],a=e=>Math.abs(e);return e<-z?n.push({tone:i.DE.CONCISE,weight:a(e)}):e>z&&n.push({tone:i.DE.EXPANDED,weight:a(e)}),t<-z?n.push({tone:i.DE.CASUAL,weight:a(t)}):t>z&&n.push({tone:i.DE.PROFESSIONAL,weight:a(t)}),n}function es(e){return[(()=>{let t=e.find(({tone:e})=>e===i.DE.EXPANDED)?.weight;if(t)return t;let n=e.find(({tone:e})=>e===i.DE.CONCISE)?.weight;if(n)return-n})()??0,(()=>{let t=e.find(({tone:e})=>e===i.DE.PROFESSIONAL)?.weight;if(t)return t;let n=e.find(({tone:e})=>e===i.DE.CASUAL)?.weight;if(n)return-n})()??0]}function ec(e,t){return(0,a.useEffect)(()=>{let n=e.current?.getEl();if(!n)return;let a=e=>{"Escape"===e.key&&t()};return n.addEventListener("keydown",a),()=>n.removeEventListener("keydown",a)},[e,t]),e}function ed(){let[e,t]=(0,a.useState)(()=>[0,0]),n=(0,L.wA)(e=>{let t=e.getCurrentPage()?.tonePosition;return t?[ei(t.x),ei(t.y)]:[0,0]}),r=(0,a.useCallback)(e=>{u.q.instance.getCurrentPage()?.setTonePosition({x:e[0],y:e[1]})},[]);return(0,f.kc)().slides_tone_dial_undo?{tonePosition:n,setTonePosition:r}:{tonePosition:e,setTonePosition:t}}},706512:(e,t,n)=>{n.d(t,{Ay:()=>w,dD:()=>C,dk:()=>b,k0:()=>v,sO:()=>h,uO:()=>T,xE:()=>f});var a=n(557295),r=n(341092),i=n(86625),l=n(707458),o=n(38329),s=n(374626),c=n(939863),d=n(392592),u=n(934533),m=n(222478),p=n(709731),_=n(92566),g=n(336427);class f extends Error{constructor(){super(),this.reportToSentry=!1,this.name="SwitchedSlideError",this.type="switched_slide"}}class h extends Error{constructor(){super(),this.reportToSentry=!1,this.name="SwitchedToGridViewError",this.type="switched_to_grid_view"}}class E extends Error{constructor(){super(),this.reportToSentry=!1,this.name="NotEnoughContentError",this.type="not_enough_content"}}class y extends Error{constructor(){super(),this.reportToSentry=!1,this.name="UnmodifiedSlideError",this.type="unmodified_slide"}}let b=[f,E,y,r.G1,a.CortexErrorV2];function v(e,t){let n=function(e){if(e instanceof f)return(0,c.t)("slides.speaker_notes.error.switched-slides");if(e instanceof h)return(0,c.t)("slides.speaker_notes.error.switched-to-grid-view");if(e instanceof E)return(0,c.t)("slides.speaker_notes.error.add-more-content");if(e instanceof y)return(0,c.t)("slides.speaker_notes.error.unmodified_slide");if(!(e instanceof r.G1||e instanceof a.CortexErrorV2))return(0,c.t)("slides.speaker_notes.error.default");let t={offline:(0,c.t)("slides.speaker_notes.error.connection"),meter_exceeded:(0,c.t)("slides.speaker_notes.error.rate_limit"),rate_limit_exceeded:(0,c.t)("slides.speaker_notes.error.rate_limit"),text_tool_no_text:(0,c.t)("slides.speaker_notes.error.add-more-content"),content_length_limit_exceeded:(0,c.t)("slides.speaker_notes.error.token_limit"),unsafe_or_harmful_content:(0,c.t)("slides.speaker_notes.error.inappropriate_input"),service_issue:(0,c.t)("slides.speaker_notes.error.openai_down"),ai_opt_out_error:(0,c.t)("slides.speaker_notes.error.opt_out"),unauthorized:(0,c.t)("slides.speaker_notes.error.default"),generic:(0,c.t)("slides.speaker_notes.error.default")},n="generic";if(e instanceof a.CortexErrorV2)n=a.ClientContentLengthLimitExceededError.isInstance(e)||a.ProviderContentLengthLimitExceededError.isInstance(e)?"content_length_limit_exceeded":a.MeterExceededError.isInstance(e)?"meter_exceeded":a.ProviderRateLimitExceededError.isInstance(e)||a.CortexRateLimitExceededError.isInstance(e)?"rate_limit_exceeded":a.ClientNoTextSelectedError.isInstance(e)?"text_tool_no_text":a.ProviderServiceIssueError.isInstance(e)||a.ProviderServiceBusyError.isInstance(e)?"service_issue":a.OfflineError.isInstance(e)?"offline":a.UnsafeOrHarmfulPromptError.isInstance(e)||a.ProviderUnsafeOrHarmfulContentError.isInstance(e)?"unsafe_or_harmful_content":a.UnauthorizedError.isInstance(e)?"unauthorized":e?.statusCode===404?"service_issue":e?.statusCode===429?"rate_limit_exceeded":e?.statusCode===403?"ai_opt_out_error":"generic";else if(e instanceof r.G1)switch(e.type){case"content_length_limit_exceeded":case"meter_exceeded":case"rate_limit_exceeded":case"text_tool_no_text":case"service_issue":case"offline":case"unsafe_or_harmful_content":case"ai_opt_out_error":case"unauthorized":n=e.type;break;case"generic":switch(e.data?.status){case 404:n="service_issue";break;case 429:n="rate_limit_exceeded";break;case 403:n="ai_opt_out_error"}}return t[n]}(e),i=function(e){switch(e.type){case"content_length_limit_exceeded":case"service_issue":case"ai_opt_out_error":case"unsafe_or_harmful_content":case"switched_slide":case"switched_to_grid_view":case"not_enough_content":case"unmodified_slide":return!1;default:return!0}}(e);o.D.dispatch(d.F.enqueue({icon:u.zX.CLOSE_FILLED,message:n,type:"speaker-notes-visual-bell",button:i&&t?{text:(0,c.t)("slides.speaker_notes.draft_again"),action:()=>t()}:void 0,onDismiss:()=>{}}))}function C(e){let t=l.q.instance.get(e);if(t&&t.editInfo&&t?.editInfo?.createdAt===t?.editInfo?.lastEditedAt)throw new y}function w(e){if(0===e.length)throw new E}function T(e,t){(0,p.cT)(m.JT.SLIDES_GENERATE_SPEAKER_NOTES),v(e);let n=s.zl.get(_.TD);if(t&&n){let e=JSON.stringify(n.toJSON());i.l7.ai("generate-slide-speaker-notes",()=>{(0,g.lq)(t,e)})}}},166689:(e,t,n)=>{n.d(t,{O:()=>C});var a=n(675678),r=n(587670),i=n(707458),l=n(38329),o=n(966712),s=n(374626),c=n(776621),d=n(550273),u=n(574724),m=n(677074),p=n(356390),_=n(222478),g=n(709731),f=n(999140),h=n(92566),E=n(706512),y=n(293871),b=n(336427);let v=e=>{let t=(0,d.mz)(),n=(0,o.kc)().figjam_ai_piper_speaker_notes_filtering,a=i.q.instance.get(e);if(!n||!a)return t;let r=a.absoluteTransform.m12,l=a.absoluteBoundingBox.h,s=.1*l,c=r+s,u=r+l-s;return t.filter(e=>(0,b.O)(e,24,c,u))},C=async({params:e,abortController:t,clientLifecycleId:n})=>{let{source:i}=e,o=l.D.getState().openFile?.key,d=s.zl.get(h.jI),w=s.zl.get(h.hD);if(!w){(0,c.$D)(a.FigmaTeam.AI_PRODUCTIVITY,Error("Editor is null when trying to generate speaker notes"));return}let T=w.getEditorState();s.zl.set(h.TD,T);let S=0===r.Ez5.editorPreferences().speakerNotesHeight.getCopy();(0,y.x)({eventName:"started",fileKey:o,slideId:d,source:i});try{(0,E.dD)(d),r.Ez5.singleSlideView()&&S&&(0,b.ud)(r.Ez5.singleSlideView().initialSpeakerNotesHeightInViewport()),w.setEditorState(w.getEditorState());let e={...(0,m.Ay)(),clientLifecycleId:n},a=v(d);(0,E.Ay)(a),(0,b.gH)();let i=a.map(e=>({text:e.characters,x:e.absoluteTransform.m02,y:e.absoluteTransform.m12})),l=await (0,b.Yu)(d),s=await u.Ay.slides.speakerNotes({texts:i,image:l},e),c=new u.c6(s);if(t.signal.aborted){(0,y.x)({eventName:"stopped",fileKey:o,slideId:d});return}let _="";for await(let e of c){if(t.signal.aborted){(0,y.x)({eventName:"stopped",fileKey:o,slideId:d});return}_+=e.delta,(_=_.replace(/(.) -/g,"$1\n -")).length>0&&(0,b.hp)(_,"history-merge")}p.Y5.commit(),(0,y.x)({eventName:"finished",fileKey:o,slideId:d});return}catch(e){w.setEditorState(T),(0,E.k0)(e,()=>{(function(){let e=y.f.TRY_AGAIN;s.zl.set(f.zF,e),(0,g.B3)(_.JT.SLIDES_GENERATE_SPEAKER_NOTES),(0,g.Ag)(_.JT.SLIDES_GENERATE_SPEAKER_NOTES,C,{source:e})})()}),(0,y.x)({eventName:"failed",fileKey:o,slideId:d}),(0,g.cT)(_.JT.SLIDES_GENERATE_SPEAKER_NOTES),E.dk.some(t=>e instanceof t)||(0,c.$D)(a.FigmaTeam.AI_PRODUCTIVITY,Error(`Unexpected error encountered while generating speaker notes: ${e.message}`));return}}},293871:(e,t,n)=>{n.d(t,{f:()=>r,x:()=>i});var a=n(776250),r=(e=>(e.QUICK_ACTIONS="quick_actions",e.EDITOR_PLACEHOLDER="editor_placeholder",e.TRY_AGAIN="try_again",e))(r||{});function i(e){(0,a.sx)("slides_generate_speaker_notes_event",e)}},336427:(e,t,n)=>{n.d(t,{B_:()=>v,Hk:()=>w,O:()=>S,Yu:()=>x,ap:()=>b,gH:()=>y,hp:()=>h,k8:()=>C,lq:()=>E,ud:()=>T});var a=n(411855),r=n(675678),i=n(587670),l=n(707458),o=n(919911),s=n(413887),c=n(922070),d=n(374626),u=n(646240),m=n(776621),p=n(602546),_=n(222478),g=n(709731),f=n(92566);function h(e,t="history-push"){let n=d.zl.get(f.hD);n&&n.update(()=>{(0,o.Wn)(e,[o.mK,o.NB])},{tag:t})}function E(e,t){let n=l.q.instance.get(e);if(n)try{n.slideSpeakerNotes=t}catch(e){(0,m.x1)(r.FigmaTeam.SLIDES,"Failed to set slide speaker notes",{error:e})}}function y(){let e=d.zl.get(f.hD);e&&e.dispatchCommand(c.SK,void 0)}function b(){let[e]=(0,s.DF)(),t=(0,u.Xr)(f.hD);return(0,a.useEffect)(()=>{t(e)},[e,t]),null}function v(){let[e]=(0,s.DF)(),t=C();return(0,a.useEffect)(()=>{t?e.setEditable(!1):e.setEditable(!0)},[e,t]),null}function C(){return(0,g.wj)(_.JT.SLIDES_GENERATE_SPEAKER_NOTES).state===g.qy.RUNNING}function w(){i.Ez5.editorPreferences().speakerNotesHeight.set(0)}function T(e){i.Ez5.editorPreferences().speakerNotesHeight.set(e)}function S(e,t,n,a){let r=e.absoluteTransform.m12>n&&e.absoluteTransform.m12+e.absoluteBoundingBox.h<a,i=e.fontSize>t;return e.visible&&(i||r)}async function x(e){let t=l.q.instance.get(e);if(t)return await (0,p.t)(t)}},545195:(e,t,n)=>{n.d(t,{g:()=>nM,h:()=>nR});var a,r=n(411855),i=n(188507),l=n(587670),o=n(629019),s=n.n(o),c=n(91408),d=n(966712),u=n(374626),m=n(384162),p=n(259927),_=n(672517),g=n(818),f=n(385326),h=n(582947),E=n(501972),y=n(617453),b=n(29680),v=n(335682),C=n(694687),w=n(100197),T=n(555328),S=n(809073),x=n(369394),k=n(407844),N=n(187882),I=n(222478),A=n(709731),O=n(92566),L=n(144119),D=n(947899),R=n(924430),M=n(982629),P=n(676938),F=n(646240),B=n(965480),U=n(953289),G=n(355819),K=n(901536),V=n(939863),H=n(976999),z=n(491679),W=n(154483),j=n(75395),$=n(927457),q=n(86625),Y=n(593779),X=n(860601),J=n(572206),Z=n(864089),Q=n(493323),ee=n(798099),et=n(988022),en=n(128765),ea=n(141123),er=n(232205),ei=n(990989),el=n(573666);let eo="slides_template_ui--searchBar--jlYPZ",es="slides_template_ui--separator--ptcuN",ec="slides_template_ui--startFromScratchIcon--bKGMJ",ed="slides_template_ui--dashedBorder--a60sO",eu="slides_template_ui--footer--4g8kc",em="slides_template_ui--grid--FCSGf",ep=(0,W.fv)();function e_({module:e}){let t=(0,z.r$)(),n=(0,F.Xr)(U.VZ),a=(0,F.Xr)(U.Ei),o=(0,u.md)(O.v2),c=(0,v.tS)(),d=(0,i.wA)(),m="insert-slide-module",p=q.nc.user(m,(n,a,r)=>{(0,z.CH)({module:e,viewType:t,getGridCoord:l.Ez5.getInsertGridCoord,dispatch:d})(n,a,r)}),{onInsertableResourcePointerDown:_,dragState:g}=(0,er.j)({resource:e,isList:!1,sourceForTracking:"slides-templates-panel",clickToInsert:!0,insertAsChildOfCanvas:!0,afterModuleInsertion:p,afterSuccessfulInsert:()=>{a(!1),n(!1)},selectAfterInsert:!1}),f=q.nc.user(m,_),h=r.useMemo(()=>o?new J.Mi(l.Ez5.singleSlideView().singleSlideThumbnailWidth(),l.Ez5.singleSlideView().singleSlideThumbnailHeight()):void 0,[o]);return r.createElement("div",{className:s()(K.cx.flex.alignCenter.justifyCenter.gap8.$,{"slides_template_tile--moduleCoverCardPicker--IvByg slides_template_tile--_moduleCoverCard--6hqG0 slides_template_tile--moduleCoverCardPickerSize--AAEPk":t===z.Ji.PICKER,"slides_template_tile--moduleCoverCardModal--llMPw slides_template_tile--_moduleCoverCard--6hqG0 slides_template_tile--moduleCoverCardModalSize--1-jSe":t===z.Ji.OVERLAY_MODAL},{"slides_template_tile--gridViewHover--dEaa-":!o})},r.createElement(ea.q,{dragState:t===z.Ji.PICKER?g:null,isList:!1,overrideDragPreviewSize:h}),r.createElement(eg,{key:e.node_id,thumbnailUrl:e.thumbnail_url,onPointerDown:t=>{f(t),(0,et.Cu)({moduleId:e.id,moduleFileKey:ep(e),fileKey:c,name:"slide_template_tile",productType:"slides"})}}))}function eg({name:e,thumbnailUrl:t,thumbnailWidth:n,thumbnailHeight:a,onPointerDown:i,showLoadingSpinner:l=!1,disabled:o=!1,removeBorder:c=!1}){return r.createElement(j.E,{className:K.cx.flex.flexColumn.itemsStart.hFull.wFull.$,onClick:o?void 0:i,actionOnPointerDown:!0,htmlAttributes:{"data-testid":"insertableSlideTile"}},r.createElement("div",{className:s()(K.cx.relative.overflowHidden.flex.justifyCenter.itemsCenter.$,{[K.cx.borderBox.b1.bRadius5.colorBorder.$]:!c}),style:{width:n??"100%",height:a??"100%"}},l&&r.createElement(Q.kt,{className:"slides_template_tile--loadingSpinner--i0gem"}),r.createElement(Z.oW,{onDragStart:ee.wo,className:"slides_template_tile--tileImage--xQ9Rj",src:t,alt:e,loading:"lazy"})),e&&r.createElement("div",{className:K.cx.font11.fontInter.colorTextSecondary.$},e))}function ef({text:e,dataTestId:t,onPointerDown:n,imageContainerContent:a,additionalClassname:i,showSelectedState:l=!1}){let o=(0,z.r$)(),c=(0,u.md)(U.bY);return r.createElement("div",{"data-testid":t,className:s()(K.cx.p8.$,i)},r.createElement(ei.sU,{image:r.createElement("div",{role:"presentation",onPointerDown:n},r.createElement(ei.WM,{className:s()({"slides_template_tile--templateCoverCardLarge--aUi8S slides_template_tile--_templateCoverCard--owOUm slides_template_tile--templateCoverCardLargeSize--lWeyZ":o===z.Ji.PICKER,"slides_template_tile--templateCoverCardMedium--D1xOJ slides_template_tile--_templateCoverCard--owOUm slides_template_tile--templateCoverCardMediumSize--dZ4FH":o===z.Ji.OVERLAY_MODAL,"slides_template_tile--templateCoverCardExtraLarge--9llOJ slides_template_tile--_templateCoverCard--owOUm slides_template_tile--templateCoverCardExtraLargeSize---WVL9":c.type===U.Vf.TEMPLATE_PICKER,"slides_template_tile--selectedTemplateTile---grt1":l}),removeBorder:!0,backgroundColor:"none"},a)),bottomRow:r.createElement(ei.dY.MetadataContainer,{onClick:n},r.createElement(ei.dY.TextMetadataLayout,{primaryText:r.createElement("div",{className:K.cx.font11.colorText.ellipsis.overflowHidden.$},e)})),bottomRowClassName:s()({"slides_template_tile--templateCoverBottomRowLarge--jYVZ6":o===z.Ji.PICKER,"slides_template_tile--templateCoverBottomRowMedium--jnOVs":o===z.Ji.OVERLAY_MODAL})}))}function eh({template:e}){return(0,u.md)(U.bY).type===U.Vf.TEMPLATE_PICKER?r.createElement(eE,{template:e}):r.createElement(ey,{template:e})}function eE({template:e}){let{name:t,imageUrl:n,libraryKey:a}=(0,en.fG)()(e),[i,l]=(0,u.fp)(U.ux);if(!a)return null;let o=()=>l((0,Y.l)(a));return r.createElement(ef,{text:t,dataTestId:"slidesTemplateCoverTile",onPointerDown:o,imageContainerContent:r.createElement(eg,{key:t,thumbnailUrl:n,onPointerDown:o,removeBorder:i===(0,Y.l)(a)}),additionalClassname:"slides_template_tile--hoverableTemplateTile--meERX",showSelectedState:i===(0,Y.l)(a)})}function ey({template:e}){let{name:t,imageUrl:n,libraryKey:a}=(0,en.fG)()(e),i=(0,F.Xr)(U.bY),l=(0,u.md)(U.bY);if(!a)return null;let o=e=>{e.stopPropagation(),a&&((0,et.Cu)({fileKey:a,name:"template_cover_tile",productType:"slides"}),i({type:U.Vf.TEMPLATE,libraryKey:a,parentView:l}))};return r.createElement(ef,{text:t,dataTestId:"slidesTemplateCoverTile",onPointerDown:o,imageContainerContent:r.createElement(r.Fragment,null,r.createElement(ei.Wh.Cover,null,r.createElement("div",{className:"slides_template_tile--hoverOverlay--m7upM"})),r.createElement(ei.Wh.Center,null,r.createElement(el.i,{insertTemplate:X.lQ,isInsertingTemplate:!1,shouldUseOpaqueBackground:!0},(0,V.tx)("slides.templates.view_template"))),r.createElement(eg,{key:t,thumbnailUrl:n,onPointerDown:o}))})}function eb({title:e,testId:t,onPointerDown:n}){return r.createElement(ef,{text:e,dataTestId:t,onPointerDown:n,imageContainerContent:r.createElement("div",{className:s()(K.cx.flex.itemsCenter.justifyCenter.wFull.hFull.borderBox.bRadius5.$,ed)},r.createElement("span",{className:ec},r.createElement($.e,null)))})}let ev=(0,W.fv)();function eC({modules:e}){let{onShowSeparatorScroll:t}=(0,z.gH)();if(!e.length)return null;let n=(0,d.kc)().ds_use_lib_keys?e[0].library_key:ev(e[0]);return r.createElement(G.P,{className:K.cx.px16.hFull.$,onScroll:t},r.createElement(eS,{key:n},e.map(e=>r.createElement(e_,{key:e.id,module:e}))))}function ew({children:e}){return r.createElement("div",{className:K.cx.flex.flexWrap.pb8.gap0.$},e)}function eT({title:e,children:t,rightHeaderCta:n}){let a=e||!!n;return r.createElement(r.Fragment,null,r.createElement("div",{className:s()({[K.cx.flex.justifyBetween.alignLeft.itemsCenter.pt16.pb8.px8.$]:a})},e&&r.createElement("div",{className:K.cx.font13.colorText.fontSemiBold.fontInter.noWrap.overflowHidden.ellipsis.pr4.$},e),n),r.createElement(ew,null,t))}function eS({children:e}){return r.createElement("div",{className:K.cx.flex.flexWrap.pb16.gap8.$},e)}let ex="loading_state--container--ouiBF";function ek(){let e=(0,z.r$)(),t=(0,u.md)(U.bY),n=s()({"slides_template_tile--templateCoverCardMediumSize--dZ4FH":e===z.Ji.OVERLAY_MODAL,"slides_template_tile--templateCoverCardLargeSize--lWeyZ":e===z.Ji.PICKER,"slides_template_tile--templateCoverCardExtraLargeSize---WVL9":t.type===U.Vf.TEMPLATE_PICKER},K.cx.m8.$);return r.createElement(H.Qp,{className:n,animationType:H.JR.LIGHT_SHIMMER})}function eN(){let e=(0,z.r$)(),t=s()({"slides_template_tile--moduleCoverCardPickerSize--AAEPk":e===z.Ji.PICKER,"slides_template_tile--moduleCoverCardModalSize--1-jSe":e===z.Ji.OVERLAY_MODAL});return r.createElement(H.Qp,{className:t,animationType:H.JR.LIGHT_SHIMMER})}function eI(){return r.createElement(H.Qp,{className:s()("loading_state--title--YIpQO",K.cx.m8.$),animationType:H.JR.LIGHT_SHIMMER})}function eA(){let e=(0,u.md)(U.bY).type===U.Vf.TEMPLATE_PICKER?3:4;return r.createElement("div",{className:"loading_state--loadingStateContainer--dcv3D"},r.createElement(eI,null),r.createElement(ew,null,Array.from({length:e}).map((e,t)=>r.createElement(ek,{key:t}))),r.createElement(eI,null),r.createElement(ew,null,Array.from({length:e}).map((e,t)=>r.createElement(ek,{key:t}))),r.createElement(eI,null),r.createElement(ew,null,Array.from({length:e}).map((e,t)=>r.createElement(ek,{key:t}))))}function eO(){return r.createElement("div",{className:ex},r.createElement(ew,null,Array.from({length:14}).map((e,t)=>r.createElement(ek,{key:t}))))}function eL(){return r.createElement("div",{className:ex},r.createElement(eS,null,Array.from({length:16}).map((e,t)=>r.createElement(eN,{key:t}))))}function eD(){return r.createElement("div",{className:s()(em,K.cx.px16.pb16.pt8.gap16.overflowHidden.hFull.$)},r.createElement(eR,null),r.createElement(eR,null),r.createElement(eR,null),r.createElement(eR,null),r.createElement(eR,null),r.createElement(eR,null),r.createElement(eR,null),r.createElement(eR,null),r.createElement(eR,null),r.createElement(eR,null),r.createElement(eR,null))}function eR(){return r.createElement("div",{className:K.cx.flex.flexColumn.gap4.$},r.createElement(H.Qp,{className:"loading_state--file--g4dxg",animationType:H.JR.LIGHT_SHIMMER}),r.createElement(H.Wi,{className:"loading_state--fileTitle--ATrhd",animationType:H.JR.LIGHT_SHIMMER}),r.createElement(H.Wi,{className:"loading_state--fileSubtitle--9Lkb7",animationType:H.JR.LIGHT_SHIMMER}))}function eM({children:e,dataTestId:t}){return r.createElement("div",{className:K.cx.flex.flexColumn.hFull.$,"data-testid":t},e)}var eP=n(32863),eF=n(343887),eB=n(13583);function eU({onClick:e}){return r.createElement(eF.K,{"aria-label":(0,V.t)("common.close"),onClick:e},r.createElement(eB.L,null))}function eG({searchQuery:e,setSearchQuery:t,showCloseButton:n,placeholder:a}){let{canDismiss:i,maybeUseLightTemplateOnDismiss:l}=(0,z.vN)();return r.createElement("div",{className:K.cx.flex.flexRow.itemsCenter.pl8.pr12.py8.gap12.$},r.createElement(eP.IW,{className:s()(eo,K.cx.wFull.borderBox.bRadius6.colorBgSecondary.$),query:e,clearSearch:()=>t(""),onChange:t,placeholder:a,focusOnMount:!0,withSmallXIcon:!0}),n&&i&&r.createElement(eU,{onClick:l}))}function eK({searchQuery:e,setSearchQuery:t,onBack:n,showCloseButton:a,placeholder:i}){let{canDismiss:l,maybeUseLightTemplateOnDismiss:o}=(0,z.vN)();return r.createElement("div",{className:s()(K.cx.flex.flexRow.itemsCenter.pl8.pr12.py8.gap12.$)},r.createElement(eP.RE,{className:s()(eo,K.cx.wFull.borderBox.bRadius6.colorBgSecondary.$),query:e,clearSearch:()=>t(""),onChange:t,onBack:n,placeholder:i,focusOnMount:!0,withSmallXIcon:!0}),a&&l&&r.createElement(eU,{onClick:o}))}function eV({icon:e,title:t,subtitle:n}){return r.createElement(r.Fragment,null,r.createElement("div",{className:K.cx.flex.flexRow.gap6.lh24.itemsCenter.$},e,r.createElement("h1",{className:K.cx.colorText.fontInter.font14.fontNormal.fontSemiBold.spacingCompact.$},t)),r.createElement("h2",{className:K.cx.colorTextSecondary.textBodyMedium.$},n))}function eH({closePicker:e}){let t=t=>{q.l7.user("create-new-slide-with-default-theme",()=>{l.Ez5.slideThemeLibBindings().insertDefaultLocalTheme(t,null)}),e()};return r.createElement(eT,{title:(0,V.t)("slides.templates.dev_environment_only")},r.createElement(eg,{key:"light",thumbnailWidth:"184px",thumbnailHeight:"101px",name:(0,V.t)("slides.templates.light"),thumbnailUrl:"https://static.figma.com/uploads/4a01804a5d4ad3a2d38ea604c0d8d63520e9b97b",onPointerDown:()=>t(l.zMY.LIGHT)}),r.createElement(eg,{key:"dark",thumbnailWidth:"184px",thumbnailHeight:"101px",name:(0,V.t)("slides.templates.dark"),thumbnailUrl:"https://static.figma.com/uploads/01a1fc814ce18d9da3ba738aef79acc82c752ab7",onPointerDown:()=>t(l.zMY.DARK)}))}var ez=n(274176),eW=n(775419),ej=n(391993);function e$({onStartFromOutline:e}){let{isCreateSlidesOutlineEnabled:t}=(0,ej.mp)(),{canDismiss:n,maybeUseLightTemplateOnDismiss:a}=(0,z.vN)(),i=(0,r.useMemo)(()=>{let i=[];return n&&i.push({id:"start_from_scratch",onClick:a,icon:r.createElement($.e,null),title:(0,V.t)("slides.templates.start_from.scratch.title"),subtitle:(0,V.t)("slides.templates.start_from.scratch.subtitle"),buttonStyle:ed,iconStyle:ec,dataTestId:"start-from-scratch"}),t&&i.push({id:"start_from_outline",onClick:e,icon:r.createElement(ez.m,null),title:(0,V.t)("slides.templates.start_from.outline.title"),subtitle:(0,V.t)("slides.templates.start_from.outline.subtitle"),iconStyle:"slides_template_ui--startFromOutlineIcon--6u3ms",dataTestId:"start-from-outline"}),(0,d.kc)().piper_theme_creation_wizard&&i.push({id:"start_from_theme_creation_wizard",onClick:()=>{},icon:r.createElement(eW.Q,null),title:(0,V.t)("slides.templates.wizard.entry_point.title"),subtitle:(0,V.t)("slides.templates.wizard.entry_point.subtitle"),iconStyle:"slides_template_ui--startFromCreationWizard--o0lvO",dataTestId:"start-from-theme-creation-wizard"}),i},[t,n,a,e]);return r.createElement(eq,{startFromRowData:i})}function eq({startFromRowData:e}){let t=s()("slides_template_ui--startFromRowWrapper--4UjYr",e.length>=3?"slides_template_ui--flexButtonWidth--EFD0C":"slides_template_ui--fixedButtonWidth--K2lSD");return r.createElement("div",{className:t},e.map(e=>r.createElement(eY,{onClick:e.onClick,title:e.title,subtitle:e.subtitle,icon:e.icon,buttonStyle:e.buttonStyle,iconStyle:e.iconStyle,key:e.id,dataTestId:e.dataTestId})))}function eY({onClick:e,title:t,subtitle:n,icon:a,buttonStyle:i,iconStyle:l,dataTestId:o}){return r.createElement("button",{className:s()("slides_template_ui--startFromRowButton--v3qHJ",i),onClick:e,"data-testid":o},r.createElement("span",{className:l},a),r.createElement("div",{className:K.cx.flex.flexColumn.itemsStart.$},r.createElement("p",{className:K.cx.colorText.textBodyMediumStrong.$},t),r.createElement("p",{className:K.cx.colorTextSecondary.textBodyMedium.$},n)))}var eX=n(504440),eJ=n(930860),eZ=n(752553),eQ=n(777078),e0=n(99506),e1=n(106112),e2=n(828736),e5=n(677967);let e3="slides_template_grid--seeAllButton--sShht";function e4({currentTeam:e}){let t=(0,z.fK)(),n=(0,F.Xr)(U.bY),{templatesByTeam:a}=(0,B.li)({teamId:e.id,editorType:e0._Y.SLIDES,pageSize:t,revalidateOnMount:!1});if(!a||0===a.templates.length)return null;let i=a.templates.map(e=>({type:0,template:{type:e1.n.TeamTemplateLg,template:e}})),l=a.totalTemplatesByTeam>t;return r.createElement(tt,{title:(0,V.tx)("slides.templates.template_picker.header_with_name",{orgOrTeamName:e.name}),previewData:i,onSeeAllClick:l?()=>n({type:U.Vf.TEAM,teamId:e.id,displayName:e.name}):void 0})}function e6({currentOrg:e}){var t,n;let a=(0,z.fK)(),[{data:i}]=(0,eZ.IT)((0,e5.LK)(e.id)),l=(0,F.Xr)(U.bY),{previewData:o,hasOverflowTemplates:s}=(t=i??[],n=X.lQ,(0,r.useMemo)(()=>{let e=t.slice(0,a).map(e=>({type:0,template:{type:e1.n.TeamTemplate,template:e}}));return(0,d.kc)().piper_theme_creation_wizard?(e.length===a&&(e=e.slice(0,a-1)),{previewData:[...e,{type:1,startFromScratchProps:{title:(0,V.t)("slides.templates.wizard.entry_point.title"),testId:e8,onPointerDown:n}}],hasOverflowTemplates:t.length>=a}):{previewData:e,hasOverflowTemplates:t.length>=a}},[t,a,n]));if(!i||!i.length||!a)return(0,d.kc)().piper_theme_creation_wizard?r.createElement(e7,{orgName:e.name,onClick:X.lQ}):null;let c=s?()=>l({type:U.Vf.ORG}):void 0;return r.createElement(tt,{title:(0,V.tx)("slides.templates.theme_picker.org_template_header",{orgName:e.name}),previewData:o,onSeeAllClick:c})}let e8="orgTemplateCreation";function e7({orgName:e,onClick:t}){return r.createElement(eT,{title:(0,V.tx)("slides.templates.theme_picker.org_template_header",{orgName:e})},r.createElement(eb,{title:(0,V.t)("slides.templates.theme_picker.org_new_template_placeholder_name",{orgName:e}),testId:e8,onPointerDown:t}),r.createElement("div",{className:"browse_preview_templates_view--orgNewTemplateCtaBlock--QL8MW"},r.createElement("div",{className:"browse_preview_templates_view--iconAndCtaWrapper--cqH1E"},r.createElement(eJ.D,{className:"browse_preview_templates_view--ctaIcon--kaDRM"}),r.createElement("div",null,r.createElement("p",{className:K.cx.textBodyMediumStrong.colorText.$},(0,V.t)("slides.templates.theme_picker.org_new_template_placeholder_primary_cta")),r.createElement("p",{className:K.cx.textBodyMedium.colorTextSecondary.$},(0,V.t)("slides.templates.theme_picker.org_new_template_placeholder_secondary_cta",{orgName:e})))),r.createElement("div",{className:"browse_preview_templates_view--spacerPlaceholder--pRKlv"})))}function e9(){let[{data:e}]=(0,eZ.IT)((0,e5._4)()),t=(0,F.Xr)(U.bY),n=(0,z.fK)();return e&&0!==e.length?r.createElement(r.Fragment,null,e.map(e=>{let a=e.shelf_content.map(t=>({type:0,template:{type:e1.n.HubFile,template:t,category:e.id}})),i=a.slice(0,n);return 0===i.length?null:r.createElement(tt,{key:e.id,title:e.title,previewData:i,onSeeAllClick:a.length>n?()=>t({type:U.Vf.HUB_FILE,shelfId:e.id}):void 0})})):null}function te(){let{isCreateSlidesOutlineEnabled:e}=(0,ej.mp)(),t=(0,z.r$)(),n=(0,eQ.eE)(S.$A.Slides),a=(0,z.fK)(),{maybeUseLightTemplateOnDismiss:o}=(0,z.vN)(),s=(0,i.wA)(),c=(0,v.q5)(),u=(0,B.J3)(),m=(0,B.JU)(u),p=u===B.kN.FILE_IN_DRAFTS,_=(0,w.J2)(l.Ez5.slideDeck()?.slideGrid),g=!_||0===_.length,f=(0,r.useMemo)(()=>({type:1,startFromScratchProps:{title:(0,V.t)("slides.templates.start_from.scratch.title"),testId:"startFromScratchCoverTile",onPointerDown:o}}),[o]),h=(0,r.useMemo)(()=>n.map(e=>({type:0,template:e})),[n]),E=(0,r.useMemo)(()=>(e||t===z.Ji.PICKER?h:[f,...h]).slice(0,a),[e,t,h,f,a]);return h.length&&c?r.createElement(tt,{title:(0,V.t)("slides.templates.recents"),previewData:E,onPublishTemplateClick:m&&!g&&(0,d.kc)().piper_templates_new_publish_entry_points?()=>{(0,e2.ZW)({dispatch:s,file:{key:c.key,name:c.name,folder_id:c.folderId,team_id:c.teamId,editor_type:c.editorType,parent_org_id:c.parentOrgId},source:"template-picker",fileNeedsMovingBeforePublish:p}),(0,et.Cu)({name:"publish-template-template-modal",fileKey:c.key})}:void 0}):null}function tt({title:e,previewData:t,onSeeAllClick:n,onPublishTemplateClick:a}){let i=n?r.createElement("button",{className:s()(e3,K.cx.font11.fontMedium.fontInter.flexShrink0.$),onClick:n},(0,V.tx)("slides.templates.view_type.see_all")):a?r.createElement(eX.$n,{onClick:a,recordingKey:"template-picker-publish-template",variant:"secondary"},(0,V.tx)("slides.templates.button.publish_template")):void 0;return r.createElement(eT,{title:e,rightHeaderCta:i},t.map((e,t)=>{let n=`template_tile_${t}`;return 1===e.type?r.createElement(eb,{title:e.startFromScratchProps.title,testId:e.startFromScratchProps.testId,onPointerDown:e.startFromScratchProps.onPointerDown,key:n}):r.createElement(eh,{template:e.template,key:n})}))}var tn=(e=>(e[e.ANY_TEMPLATE=0]="ANY_TEMPLATE",e[e.TEMPLATE_FROM_SCRATCH=1]="TEMPLATE_FROM_SCRATCH",e))(tn||{}),ta=n(428322),tr=n(163023),ti=n(236705);function tl({isSearchQueryLoading:e,trimmedSearchQuery:t,searchQueryResult:n,requestLoadMore:a}){let{onShowSeparatorScroll:i}=(0,z.gH)();return e&&0===n.length?r.createElement("div",{className:K.cx.p8.$},r.createElement(eO,null)):0===n.length?r.createElement("div",{className:K.cx.p10.flex.flex1.flexColumn.itemsCenter.alignCenter.textBodyMedium.colorTextDisabled.$},r.createElement(tr.B,{className:K.cx.h200.$,svg:ti.A,useOriginalSrcFills_DEPRECATED:!0}),r.createElement("div",null,(0,V.tx)("slides.templates.search.empty",{searchTerm:r.createElement("span",{className:K.cx.fontBold.$},t)})),r.createElement("div",null,(0,V.tx)("slides.templates.search.empty.tip"))):r.createElement(G.P,{className:K.cx.px8.hFull.$,onScroll:i},r.createElement("div",{className:K.cx.pt8.$},r.createElement(ew,null,n.map(e=>r.createElement(eh,{key:(0,en.NH)(e),template:e}))),r.createElement(ta.a,{onIntersectionChange:({isIntersecting:e})=>{e&&a()}})))}function to({closePicker:e}){let{loading:t,isCreateSlidesOutlineEnabled:n}=(0,ej.mp)(),a=(0,z.r$)(),i=(0,z.dy)(),{scrollPosition:l,scrollRef:o,onScroll:s,resetScrollTop:c}=(0,z.d$)(U.Vf.ALL),{onShowSeparatorScroll:m}=(0,z.gH)(),p=(0,u.md)(U.q7),_=(0,v.tS)(),g=(0,B.Gi)(),f=(0,F.Xr)(U.bY);return((0,r.useEffect)(()=>()=>c([U.Vf.ALL]),[c]),i||t||p&&!_)?r.createElement("div",{className:K.cx.px8.$},r.createElement(eA,null)):r.createElement(G.P,{className:K.cx.px8.hFull.$,scrollContainerRef:o,initialScrollTop:l,onScroll:(e,t)=>{s(e,t),m(e,t)}},(n||(0,d.kc)().piper_theme_creation_wizard)&&a===z.Ji.OVERLAY_MODAL&&r.createElement(e$,{onStartFromOutline:function(){f({type:U.Vf.FILE_PICKER,parentType:U.Vf.ALL})}}),r.createElement(te,null),g?.type==="org"&&r.createElement(e6,{currentOrg:g.entity}),g?.type==="team"&&r.createElement(e4,{currentTeam:g.entity}),r.createElement(e9,null),(0,d.IX)()&&r.createElement(eH,{closePicker:e}))}function ts({closePicker:e,showCloseButton:t}){let{trimmedSearchQuery:n,searchQuery:a,setSearchQuery:i,isSearchQueryLoading:l,searchQueryResult:o,requestLoadMore:c}=(0,z.$N)(),{showSeparator:d}=(0,z.gH)();return r.createElement(eM,null,r.createElement("div",{className:s()({[es]:d})},r.createElement(eG,{searchQuery:a,setSearchQuery:i,showCloseButton:!!t,placeholder:(0,V.t)("slides.templates.search_templates")})),n?r.createElement(tl,{isSearchQueryLoading:l,trimmedSearchQuery:n,searchQueryResult:o,requestLoadMore:c}):r.createElement(to,{closePicker:e}))}var tc=n(540019),td=n(755020);function tu({title:e,onClick:t,children:n,isLoading:i,publisherName:l,showSeparator:o=!0}){return r.createElement("div",{className:s()(K.cx.borderBox.flex.flexRow.itemsCenter.p8.minH48.$,{[es]:o})},r.createElement(eF.K,{"aria-label":(0,V.t)("slides.templates.back"),onClick:t},r.createElement(td.C,{"data-not-draggable":!0,"data-does-not-dismiss-modal":!0})),r.createElement("div",{className:"slides_template_ui--titleTextContainer--cH2zw"},i?r.createElement(eI,null):r.createElement(r.Fragment,null,r.createElement(a.TemplateTitle,{title:e}),l&&r.createElement(a.MetadataPublisher,{publisherName:l})),n))}function tm({shelfId:e}){let[{data:t,status:n}]=(0,tc.IT)((0,e5.Qp)(e)),a=(0,F.Xr)(U.bY),{scrollPosition:i,scrollRef:l,onScroll:o}=(0,z.d$)(U.Vf.HUB_FILE),s=()=>a({type:U.Vf.ALL});return"loading"===n?r.createElement(eM,null,r.createElement(tu,{isLoading:!0,title:"",onClick:s}),r.createElement("div",{className:K.cx.px8.$},r.createElement(eA,null))):t?r.createElement(eM,null,r.createElement(tu,{title:(0,V.Yd)(t.i18n_meta.title,t.title),onClick:s}),r.createElement(G.P,{className:K.cx.px8.pt16.hFull.$,scrollContainerRef:l,initialScrollTop:i,onScroll:o},r.createElement(ew,null,t.shelf_content.map(t=>r.createElement(eh,{key:t.id,template:{type:e1.n.HubFile,category:e,template:t}}))))):null}(e=>{e.TemplateTitle=function({title:e}){return r.createElement("div",{className:"slides_template_ui--templateTitleText--lcuqy text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},(0,V.tx)("slides.templates.templates_modal.templates_title"),r.createElement("span",{className:"slides_template_ui--headerSeparator--Q3-mT"}," / "),e)},e.MetadataPublisher=function({publisherName:e}){return r.createElement("div",{className:"slides_template_ui--publisherTitleText--9DQpU text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa"},(0,V.tx)("slides.templates.templates_modal.published_by",{publisherName:e}))}})(a||(a={}));var tp=n(675678),t_=n(534611),tg=n(776621),tf=n(392592),th=n(934533),tE=n(410424),ty=n(632430),tb=n(356390),tv=n(108239),tC=n(434228);function tw(e){return(0,tC.O)()?r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17 7H7a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V8a1 1 0 0 0-1-1M7 16h1.68l-.661 2.365a.5.5 0 0 0 .962.27L9.72 16h4.562l.737 2.635a.5.5 0 0 0 .963-.27L15.32 16H17a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2m1.515-6.56-.215.86-.86.215c-.505.126-.505.844 0 .97l.86.215.215.86c.126.505.844.505.97 0l.215-.86.86-.215c.505-.126.505-.844 0-.97L9.7 10.3l-.215-.86c-.126-.505-.844-.505-.97 0M12 9.498A.5.5 0 0 1 12.502 9l3 .014a.5.5 0 1 1-.004 1l-3-.014A.5.5 0 0 1 12 9.498M12.5 12a.5.5 0 0 0 0 1H15a.5.5 0 0 0 0-1z",clipRule:"evenodd"})):r.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},r.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7 8h9a1 1 0 0 1 1 1v5a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V9a1 1 0 0 1 1-1M5 9a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-1.409l.39 1.363a.5.5 0 0 1-.962.274L13.551 16H9.45l-.468 1.637a.5.5 0 0 1-.962-.274L8.41 16H7a2 2 0 0 1-2-2zm6 1.498a.5.5 0 0 1 .502-.498l3 .014a.5.5 0 1 1-.004 1l-3-.014a.5.5 0 0 1-.498-.502m-3.1.402.115-.46c.126-.505.844-.505.97 0l.115.46.46.115c.505.126.505.844 0 .97l-.46.115-.115.46c-.126.505-.844.505-.97 0L7.9 12.1l-.46-.115c-.505-.126-.505-.844 0-.97zm3.6 1.114a.5.5 0 1 0 0 1h2a.5.5 0 0 0 0-1z",clipRule:"evenodd"}))}var tT=n(328849),tS=n(606432),tx=n(157663),tk=n(944682),tN=n(999140),tI=n(982323),tA=n(362369),tO=n(595991),tL=n(825871),tD=n(574724),tR=n(378260),tM=n(106757),tP=n(477047),tF=n(983499),tB=n(479296),tU=n(557295),tG=n(341092),tK=n(38329);let tV="slides-ai-generation-started",tH="slides-ai-generation-completed";function tz(e,t,n){tK.D.dispatch(tf.F.dequeue({matchType:tV})),tK.D.dispatch(tf.F.enqueue({message:e,type:n,icon:t,timeoutOverride:3e3}))}function tW(){tz((0,V.t)("slides.present_summary.visual_bells.canceled_indirectly"),th.zX.EXCLAMATION,"slides-ai-generation-canceled")}function tj(e){tz(e,th.zX.EXCLAMATION,"slides-ai-generation-error")}async function t$({slidePresetModules:e,abortController:t,batchSize:n=2,dispatch:a}){let r=[],i=[];l.Zdr.createHiddenFrameForPresets();for(let o=0;o<e.length;o+=n){if(t.signal.aborted)return i;for(let t of e.slice(o,o+n))try{let e=new Promise(e=>{(0,z.Zx)({module:t,editScopeType:l.zkO.USER,editScopeLabel:"use-slides-ai-preset-selection",callback:t=>{i.push(t),e()},dispatch:a})});r.push(e)}catch(e){tx.k.error("Failed to insert preset",e)}Promise.allSettled(r).then(()=>{t.signal.aborted&&t0(i)}),await tQ(Promise.allSettled(r),t.signal)}return t.signal.aborted||l.Zdr.selectPresetsFromTemplate(),i}async function tq({figjamFileKey:e,fileVersion:t,selectedGuids:n=[],pageGuids:a=[],abortController:r}){let i=await tQ((0,tF.R)({fileKey:e,fileVersion:t,selectedGuids:n.slice(0,tA.S)}),r.signal);return r.signal.aborted?[]:JSON.parse(l.Zdr.getCanvasDataJsonFromBuffer(i,a))}class tY{constructor(e,t,n){this.currentItem=void 0,this.hasRenamedFile=!1,this.lastSlideGuid="",this.abortController=e,this.showPlaceholderOverlay=t,this.getNextItem=n,this.intervalId=this.start()}start(){return setInterval(()=>this.update(),100)}isActive(){return 0!==this.intervalId}update(){if(this.abortController.signal.aborted||!u.zl.get(v.ze)){this.cancel();return}if(this.currentItem||(this.currentItem=this.getNextItem(),!this.currentItem))return;let e=l.Zdr.generateSlides(this.currentItem.slideItem);if(!this.abortController.signal.aborted){if(this.showPlaceholderOverlay(l.Zdr.getPlaceholderNodeId()),e?.length>0){e.unshift(this.lastSlideGuid);for(let t=0;t<e.length-1;++t)tZ(tJ(e[t]));this.lastSlideGuid=e[e.length-1]}this.currentItem.resolve(),this.currentItem=void 0}}cancel(){this.isActive()&&(this.cleanUp(),tW())}completeSuccessfully(){this.cleanUp(),tK.D.dispatch(tf.F.dequeue({matchType:tV})),tK.D.dispatch(tf.F.enqueue({type:tH,messageComponentKey:th.Rw.BOARD_TO_DECK_FEEDBACK,icon:th.zX.GREEN_CHECK,onDismiss:()=>{tK.D.dispatch(tf.F.dequeue({matchType:tH}))},timeoutOverride:6e4}))}processError(e){this.cleanUp(),function(e){tx.k.error(e);let t={content_length_limit_exceeded:(0,V.t)("slides.present_summary.visual_bells.error_content_limit_exceeded"),rate_limit_exceeded:(0,V.t)("slides.present_summary.visual_bells.error_rate_limited"),service_issue:(0,V.t)("slides.present_summary.visual_bells.error_vendor"),offline:(0,V.t)("slides.present_summary.visual_bells.error_offline"),unsafe_or_harmful_content:(0,V.t)("slides.present_summary.visual_bells.content_moderation"),unauthorized:(0,V.t)("slides.present_summary.visual_bells.error_unknown"),generic:(0,V.t)("slides.present_summary.visual_bells.error_unknown"),ai_opt_out_error:(0,V.t)("slides.present_summary.visual_bells.error_opt_out"),meter_exceeded:(0,V.t)("slides.present_summary.visual_bells.error_meter_exceeded"),create_slides_out_of_date:(0,V.t)("slides.present_summary.visual_bells.error_out_of_date")},n="generic";if(e instanceof tU.CortexErrorV2)tU.ClientContentLengthLimitExceededError.isInstance(e)||tU.ProviderContentLengthLimitExceededError.isInstance(e)?n="content_length_limit_exceeded":tU.ProviderRateLimitExceededError.isInstance(e)||tU.CortexRateLimitExceededError.isInstance(e)?n="rate_limit_exceeded":tU.ProviderServiceIssueError.isInstance(e)||tU.ProviderServiceBusyError.isInstance(e)?n="service_issue":tU.OutOfDateFeatureVersionError.isInstance(e)?"create_slides"===e.featureName&&(n="create_slides_out_of_date"):tU.MeterExceededError.isInstance(e)?n="meter_exceeded":tU.OfflineError.isInstance(e)?n="offline":tU.UnsafeOrHarmfulPromptError.isInstance(e)||tU.ProviderUnsafeOrHarmfulContentError.isInstance(e)?n="unsafe_or_harmful_content":tU.UnauthorizedError.isInstance(e)?n="unauthorized":e?.statusCode===404?n="service_issue":e?.statusCode===429?n="rate_limit_exceeded":e?.statusCode===403&&(n="ai_opt_out_error");else if(e instanceof tG.G1)switch(e.type){case"content_length_limit_exceeded":case"rate_limit_exceeded":case"service_issue":case"create_slides_out_of_date":case"meter_exceeded":case"offline":case"unsafe_or_harmful_content":case"unauthorized":n=e.type;break;default:switch(e.data?.status){case 404:n="service_issue";break;case 429:n="rate_limit_exceeded";break;case 403:n="ai_opt_out_error"}}tj(t[n])}(e)}cleanUp(){this.isActive()&&(clearInterval(this.intervalId),this.intervalId=0)}}async function tX({canvasData:e,processTitle:t,showPlaceholderOverlay:n,abortController:a}){let r=[],i=new tY(a,n,()=>r.shift());try{let n=await tD.Ay.slides.createSlides({version:"1.1",data:e},{orgId:u.zl.get(tR._s),teamId:u.zl.get(v.As)||null,fileKey:u.zl.get(v.ze)||null,userId:u.zl.get(tM.kS)||null,trackingSessionId:(0,tL.f)()});if(a.signal.aborted||!u.zl.get(v.ze)){n.cancel();return}let l=[],o=!1;for await(let e of new tD.c6(n)){if(!i.isActive())return;let n=e;o||"TITLE"!==n.slideType||(o=!0,t(n.content.find(e=>"h1"===e.type)?.content||"")),l.push(new Promise(e=>{r.push({slideItem:n,resolve:e})}))}if(await tQ(Promise.allSettled(l),a.signal),a.signal.aborted)return;i.completeSuccessfully()}catch(e){i.processError(e)}}let tJ=(0,tB.n)(e=>{if(!e)return[];let t=tO.z.instance.get(e);if(!t)return[];let n=[];return t.childrenNodes.forEach(e=>{(function e(t,n){t&&("TEXT"===t.type?n.push(t):t.childrenNodes.forEach(t=>e(t,n)))})(e,n)}),n}),tZ=(0,tB.n)(e=>{q.l7.user("figjam-to-slide-deck-text-opacity",()=>{e.forEach(e=>{e.opacity>0||e.setOpacityWithAnimation(1,tP._E.forLinear(.5),"slides-ai-animate-slide-text")})}),e.length=0});async function tQ(e,t){if(!t)return e;if(t.aborted)throw Error("Aborted");let n=new Promise((e,n)=>{let a=()=>{n(Error("Aborted"))};t.addEventListener("abort",a),t.addEventListener("abort",()=>{t.removeEventListener("abort",a)})});return await Promise.race([e,n])}function t0(e){e&&q.l7.user("remove-hidden-preset-nodes",()=>{for(let t of e){let e=tO.z.instance.get(t);if(e)try{e.removeSelfAndChildren()}catch(e){console.warn("Failed to remove preset",e)}}})}function t1(){let e=(0,u.md)(U.oQ)??void 0,t=(0,i.d4)(e=>e.fileVersion),n=(0,u.md)(U.bY),a=n?.figjamEntryPointData,l=a?.figjamFileKey??e,{areSlidePresetsLoaded:o,slidePresetModules:s}=(0,tI.v0)(),c=(0,tI.Hn)(s),{showPlaceholderOverlay:d,removeAllPlaceholderOverlays:m}=(0,tI.Wb)(),p=(0,i.wA)(),_=(0,u.md)(v.ze),g=n?.source??tA.E.SLIDES_TEMPLATE;(0,F.Xr)(tN.zF)(g);let f=(0,r.useMemo)(()=>({figjamFileKey:l,fileVersion:t,figjamEntryPointData:a,areSlidePresetsLoaded:o,slidePresetModules:s,addFirstPresetToEmptyDeck:c,showPlaceholderOverlay:d,removeAllPlaceholderOverlays:m,dispatch:p,openFileKey:_}),[l,t,a,o,s,c,d,m,p,_]),h=(0,A.RL)(I.JT.BOARD_TO_DECK,t2,{figjamFileKey:l});return{startAction:(0,r.useCallback)(()=>{(0,A.B3)(I.JT.BOARD_TO_DECK),h.start(f)},[f,h]),figjamFileKey:l}}let t2=async({abortController:e,params:t})=>{let{figjamFileKey:n,fileVersion:a,figjamEntryPointData:r,areSlidePresetsLoaded:i,slidePresetModules:o,addFirstPresetToEmptyDeck:s,showPlaceholderOverlay:c,removeAllPlaceholderOverlays:d,dispatch:m,openFileKey:p}=t,_=(0,tI.Gd)(r),g=r?.selectedGuids,f=!n||!a;if(e.signal.aborted||f||!i||!p)return;o?.length||tx.k.warn("No slide preset modules found...");let h=[];try{if(l.Ez5&&l.Ez5.uiState().leftPanelCollapsedUI3.set(!0),tK.D.dispatch(tf.F.enqueue({message:(0,V.t)("slides.present_summary.visual_bells.loading"),type:tV,icon:th.zX.SPINNER,button:{text:(0,V.t)("slides.present_summary.visual_bells.stop"),action:()=>{tK.D.dispatch(tf.F.dequeue({matchType:tV})),(0,A.cT)(I.JT.BOARD_TO_DECK)}},timeoutOverride:3e5})),!l.Zdr)return;l.Zdr.showLoadingState();let t=l.Zdr.getPlaceholderNodeId();c(t);let[r,i]=await tQ(Promise.allSettled([tq({figjamFileKey:n,fileVersion:a,selectedGuids:g,pageGuids:_,abortController:e}),t$({slidePresetModules:o,abortController:e,dispatch:m})]),e.signal);if("rejected"===i.status){tx.k.error("Failed to ingest templates",i.reason),tj((0,V.t)("slides.present_summary.visual_bells.error_unknown"));return}if(h=i.value,"rejected"===r.status){tx.k.error("Failed to fetch canvas data from file",r.reason),tj((0,V.t)("slides.present_summary.visual_bells.error_unknown"));return}await tX({canvasData:r.value,processTitle:e=>{e&&m(tk.Nw({file:{key:p},name:`${e} ${(0,V.t)("slides.templates.presentation")}`}))},showPlaceholderOverlay:c,abortController:e})}catch(t){if(e.signal.aborted){tW();return}tj((0,V.t)("slides.present_summary.visual_bells.error_unknown")),tx.k.error("Failed to generate slides",t)}finally{d(),p!==u.zl.get(v.ze)||s(),l.Zdr.finishDeckGeneration(),t0(h)}};var t5=n(30637),t3=n(318812),t4=n(538697);function t6(){let e=(0,i.wA)(),t=(0,t3.Um)(),n=(0,u.md)(U.oQ),[a,o]=r.useState([]),[s,c]=(0,u.fp)(U.V6),d=(0,tI.M0)(n);return(r.useEffect(()=>{!(0,t5.nl)()&&n&&(c({type:U.i6.NONE}),(async()=>{let e=await d();if(!e)return;let t=await l.Zdr.getPagesFromBuffer(e);if(!t.length)return;o(t.map(e=>({guid:e.guid,name:e.name})));let n=t[0];c({type:U.i6.SINGLE,page:{guid:n.guid,name:n.name}})})())},[n,c,d]),n)?s.type===U.i6.NONE?r.createElement(t8,null):r.createElement("div",{"data-testid":"page-selector"},r.createElement(t4.l6,{id:"slides-ai-file-picker-page-select",property:s,formatter:{format:e=>{switch(e.type){case U.i6.SINGLE:return e.page.name;case U.i6.ALL:return(0,V.t)("slides.templates.file_picker.page_selector.all_pages");default:return""}},isEqual:(e,t)=>e.type===t.type&&(e.type!==U.i6.SINGLE||t.type!==U.i6.SINGLE||e.page.guid===t.page.guid&&e.page.name===t.page.name)},onChange:e=>{c(e)},dispatch:e,className:"slides_template_page_selector--pageSelector--PuTJR",inputClassName:K.cx.fontMedium.colorText.ellipsis.alignTop.maxW150.$,dropdownShown:t,dropdownWidth:208},r.createElement(t4.c$,{value:{type:U.i6.NONE},disabled:!0,ignoreCheck:!0},(0,V.t)("slides.templates.file_picker.page_selector.label")),a.map(e=>r.createElement(t4.c$,{value:{type:U.i6.SINGLE,page:e},key:e.guid},e.name)),r.createElement(t4.sK,null),r.createElement(t4.c$,{value:{type:U.i6.ALL,allPages:a},key:-1},(0,V.t)("slides.templates.file_picker.page_selector.all_pages")))):null}function t8(){return r.createElement("div",{className:"slides_template_page_selector--pageSelectorLoadingState--oaDQH"},r.createElement("div",{className:K.cx.fontMedium.overflowHidden.colorTextSecondary.$},(0,V.t)("slides.templates.file_picker.page_selector.loading")),r.createElement(Q.kt,null))}function t7({templateSelected:e}){let{startAction:t,figjamFileKey:n}=t1();return r.createElement(na,null,r.createElement(eX.$n,{iconPrefix:r.createElement(tw,null),variant:"primary",onClick:t,disabled:!n},(0,V.tx)(e?"slides.templates.template_picker.submit.button.with_template":"slides.templates.template_picker.submit.button.without_template")))}function t9({createOutline:e,addAllSlides:t,disabled:n}){let{isCreateSlidesOutlineEnabled:a}=(0,ej.mp)();return r.createElement("div",{className:s()(K.cx.flex.itemsCenter.justifyEnd.py8.pr16.gap8.$,eu)},a&&r.createElement(eX.$n,{iconPrefix:r.createElement(tT.V,null),variant:"secondary",onClick:e,disabled:n},(0,V.tx)("slides.templates.outline_with_template.button")),r.createElement(eX.$n,{variant:"secondary",onClick:t,disabled:n},(0,V.tx)("slides.templates.add_all_slides")))}function ne({children:e}){return r.createElement(na,null,r.createElement("div",{className:K.cx.flex.gap8.itemsCenter.$},r.createElement(t6,null),e))}function nt(){let e=(0,u.md)(U.V6),{startAction:t,figjamFileKey:n}=t1();return r.createElement(ne,null,r.createElement(eX.$n,{iconPrefix:r.createElement(tw,null),variant:"primary",onClick:t,disabled:!n||e.type===U.i6.NONE},(0,V.tx)("slides.templates.file_picker.submit_button.generate")))}function nn(){let e=(0,u.md)(U.V6),t=(0,F.Xr)(U.bY),n=(0,u.md)(U.oQ);return r.createElement(ne,null,r.createElement(eX.$n,{variant:"primary",onClick:()=>{t({type:U.Vf.TEMPLATE_PICKER})},disabled:!n||e.type===U.i6.NONE},(0,V.tx)("slides.templates.file_picker.submit_button.pick_template")))}function na({children:e}){return r.createElement("div",{className:s()(K.cx.flex.itemsCenter.justifyBetween.pl12.pr8.py8.$,eu)},r.createElement("div",{className:K.cx.flex.itemsCenter.justifyStart.gap8.$},r.createElement(tS.W,{href:"https://help.figma.com/hc/en-us/articles/25968453273495"})),e)}var nr=n(565831);function ni({libraryKey:e}){let t=(0,z.NG)(e),[n,a]=(0,u.fp)(U.bY),i=null===(0,v.tS)(),l=(0,z.r$)(),o=(0,z.S7)(),s=(0,F.Xr)(U.ux),c=(0,F.Xr)(U.oQ);return((0,r.useEffect)(()=>{i||["loading","loaded"].includes(t.status)||(0,tg.Lo)(tp.FigmaTeam.SLIDES,`Query result status has unexpected value: ${t.status}`)},[i,t.status]),"loading"===t.status||i)?r.createElement(eM,null,r.createElement(tu,{title:"",isLoading:!0,onClick:()=>{a(n.type===U.Vf.TEMPLATE?n.parentView:{type:U.Vf.ALL}),s(null),c(null)},showSeparator:!1}),r.createElement("div",{className:K.cx.px16.overflowHidden.$},r.createElement(eL,null)),l===z.Ji.OVERLAY_MODAL&&!o&&r.createElement(t9,{createOutline:X.lQ,addAllSlides:X.lQ,disabled:!0})):r.createElement(nl,{libraryKey:e,modules:t.data||[]})}function nl({libraryKey:e,modules:t}){let n=(0,z.r$)(),[a,o]=(0,u.fp)(U.bY),s=(0,F.Xr)(U.ux),c=(0,F.Xr)(U.oQ),{showSeparator:d}=(0,z.gH)(),m=(0,i.wA)(),p=(0,z.m4)(),_=(0,z.yt)(),g=t&&t.length>0,f=(0,nr.FF)(),h=a.type===U.Vf.TEMPLATE&&a.shouldRemoveSourceLibraryKeyOnFail,E=(0,z.BX)(f);if((0,r.useEffect)(()=>{if(!g&&a.type===U.Vf.TEMPLATE){if(h){E(),o({type:U.Vf.ALL});return}e?((0,tg.x1)(tp.FigmaTeam.SLIDES,"Expected to find at least one module in slides template",{libraryKey:e},{reportAsSentryError:!0}),m(tf.F.enqueue({type:"slides-template",message:(0,V.t)("slides.templates.toast.no_longer_available"),error:!0,icon:th.zX.EXCLAMATION}))):(0,tg.x1)(tp.FigmaTeam.SLIDES,"No library key found for slides template",{},{reportAsSentryError:!0}),o({type:U.Vf.ALL})}},[m,g,e,t,E,o,h,a.type]),!g)return null;let y=t[0],b=()=>{let e=l.Ez5.getInsertGridCoord({x:-1/0,y:-1/0});if(f&&f!==t_.AD){let t=l.Ez5.slideDeck().coordForSlide(f);e={row:t.row,col:t.col+1}}else e=0===l.Ez5.slideDeck().slideGrid.getCopy().length?{row:0,col:0}:{row:l.Ez5.slideDeck().getLastSlideCoord().row+1,col:0};p(),m((0,ty.yy)({modules:t,canvasPosition:new J.Mi,percentageOffset:new J.Mi,insertAsChildOfCanvas:!0,afterSlideModulesInsertion:(t,a)=>{q.l7.user("add-all-slides",()=>{t.forEach((t,r)=>{(0,z.M)({module:t,insertedItems:a[r],viewType:n,getGridCoord:()=>({row:e.row,col:e.col+r})})}),(0,tv.fL)(a[0][0]),tb.Y5.commit()})}})),q.l7.user("add-all-slides",()=>{l.Ez5.slideThemeLibBindings().setDocumentTemplateLibraryKey(t[0].library_key)}),y.isHubFile&&m((0,tE.k8)({hubFileId:(0,W.fv)()(y)})),(0,z.qm)(m,y)},v=y.file_name||"",C=y.publisher_name;return r.createElement(eM,null,r.createElement(tu,{title:v,publisherName:C,onClick:()=>{o(a.type===U.Vf.TEMPLATE?a.parentView:{type:U.Vf.ALL}),s(null),c(null)},showSeparator:d},r.createElement(no,{useTemplate:()=>{_(y,{row:0,col:0},l.zkO.USER,"use-slides-template",n)},addAllSlides:b})),r.createElement(eC,{modules:t}),n===z.Ji.OVERLAY_MODAL&&r.createElement(t9,{createOutline:()=>{s(y.library_key),o({type:U.Vf.FILE_PICKER,parentType:U.Vf.TEMPLATE})},addAllSlides:b}))}function no({useTemplate:e,addAllSlides:t}){switch((0,z.r$)()){case z.Ji.PICKER:return r.createElement(ns,null,r.createElement(eX.$n,{variant:"secondary",onClick:t},(0,V.tx)("slides.templates.add_all_slides")));case z.Ji.OVERLAY_MODAL:return r.createElement(ns,null,r.createElement(eX.$n,{variant:"primary",onClick:e},(0,V.tx)("slides.templates.use_template")));default:return null}}function ns({children:e}){return r.createElement("div",{className:K.cx.mr8.mlAuto.$},e)}function nc({title:e,templates:t,onRequestMore:n,onSeeAllClick:a}){let i=r.createElement("button",{className:s()(e3,K.cx.font11.fontMedium.fontInter.flexShrink0.$),onClick:a},(0,V.tx)("slides.templates.view_type.see_all"));return r.createElement(eT,{title:e,rightHeaderCta:i},t.map(e=>r.createElement(eh,{key:e.id,template:{type:e1.n.TeamTemplate,template:e}})),r.createElement(ta.a,{onIntersectionChange:n}))}function nd({currentOrg:e}){let{isLoadingTeamTemplates:t,templatesByTeam:n,requestLoadMore:a,requestLoadMoreForTeam:i}=(0,B.GR)(e,e0._Y.SLIDES),l=(0,d.kc)().pro_templates_lg;l&&n.forEach(e=>{e.templates.length>6&&(e.templates=e.templates.slice(0,6))});let o=(0,F.Xr)(U.bY),s=(0,r.useRef)(null),{scrollPosition:c,scrollRef:u,onScroll:m}=(0,z.d$)(U.Vf.ORG),p=()=>o({type:U.Vf.ALL});return t?r.createElement(eM,null,r.createElement(tu,{isLoading:!0,title:"",onClick:p}),r.createElement("div",{className:K.cx.px8.$},r.createElement(eA,null))):r.createElement(eM,null,r.createElement(tu,{title:e.name,onClick:p}),r.createElement(G.P,{className:K.cx.px8.hFull.$,scrollContainerRef:u,initialScrollTop:c,onScroll:m},n.map(t=>r.createElement(nc,{key:t.team_id,title:t.team_name??e.name,templates:t.templates,onRequestMore:()=>{l||i(t.team_id)},onSeeAllClick:l&&t.total>6?()=>o({type:U.Vf.TEAM,teamId:t.team_id,displayName:t.team_name??e.name}):void 0})),(0,d.kc)().piper_theme_creation_wizard&&r.createElement(eb,{title:(0,V.t)("slides.templates.wizard.entry_point.title"),testId:e8,onPointerDown:X.lQ})),r.createElement(ta.a,{rootRef:s,onIntersectionChange:a}))}function nu({templates:e,onRequestMore:t}){return r.createElement(eT,null,e.map(e=>r.createElement(eh,{key:e.id,template:{type:e1.n.TeamTemplateLg,template:e}})),r.createElement(ta.a,{onIntersectionChange:({isIntersecting:e})=>{e&&t()}}))}function nm({teamId:e,displayName:t}){let{requestLoadMoreForTeam:n,templatesByTeam:a}=(0,B.li)({teamId:e,editorType:e0._Y.SLIDES}),i=(0,F.Xr)(U.bY),{scrollPosition:l,scrollRef:o,onScroll:s}=(0,z.d$)(U.Vf.TEAM),c=(0,C.dq)();return r.createElement(eM,null,r.createElement(tu,{title:t,onClick:()=>{c?i({type:U.Vf.ORG}):i({type:U.Vf.ALL})}}),a?r.createElement(G.P,{className:K.cx.p8.hFull.$,scrollContainerRef:o,initialScrollTop:l,onScroll:s},r.createElement(nu,{templates:a.templates,onRequestMore:n})):r.createElement("div",{className:K.cx.p8.$},r.createElement(eO,null)))}var np=n(915440),n_=n(62342),ng=n(860178),nf=n(279453),nh=n(707612);function nE({showCloseButton:e}){let[t,n]=(0,u.fp)(U.bY),{files:a,searchQuery:i,debouncedSearchQuery:l,setSearchQuery:o,status:c}=(0,z._8)(e0._Y.WHITEBOARD),[d,m]=(0,u.fp)(U.ux),p=(0,F.Xr)(U.oQ),{showSeparator:_}=(0,z.gH)();return t.type!==U.Vf.FILE_PICKER?null:r.createElement(eM,{dataTestId:"file-picker-view"},r.createElement(eK,{searchQuery:i,setSearchQuery:o,onBack:function(){t.type===U.Vf.FILE_PICKER&&(d&&t.parentType===U.Vf.TEMPLATE?n({type:U.Vf.TEMPLATE,libraryKey:d,parentView:{type:U.Vf.ALL}}):(n({type:U.Vf.ALL}),m(null),p(null)))},showCloseButton:!!e,placeholder:(0,V.t)("slides.templates.file_picker.search_files")}),r.createElement("div",{className:s()(K.cx.pt16.pb24.px16.flex.flexColumn.gap2.$,{[es]:_})},r.createElement(eV,{icon:r.createElement(n_.oS,{type:n_.y1.WHITEBOARD,size:n_.LE.SMALL}),title:(0,V.t)("slides.templates.file_picker.title"),subtitle:(0,V.t)("slides.templates.file_picker.subtitle")})),r.createElement(ny,{status:c,debouncedSearchQuery:l,files:a}),t.parentType===U.Vf.TEMPLATE?r.createElement(nt,null):r.createElement(nn,null))}function ny({status:e,debouncedSearchQuery:t,files:n}){let{scrollPosition:a,scrollRef:o,onScroll:c}=(0,z.d$)(U.Vf.FILE_PICKER),{onShowSeparatorScroll:d}=(0,z.gH)(),u=(0,i.d4)(e=>e.mirror.appModel.multiplayerSessionState===l.kul.JOINED),m=null===(0,v.tS)();return e===z.J_.LOADING||!u||m?r.createElement(eD,null):e!==z.J_.SUCCESS?r.createElement("div",{className:K.cx.flex.itemsCenter.justifyCenter.hFull.wFull.colorText.textBodyLarge.pre.$},r.createElement(nv,{debouncedSearchQuery:t,status:e})):r.createElement(G.P,{className:s()(K.cx.px8.hFull.$),onScroll:(e,t)=>{c(e,t),d(e,t)},scrollContainerRef:o,initialScrollTop:a},r.createElement("div",{className:s()(em,K.cx.pb12.$)},n.map(e=>r.createElement(nb,{file:e,key:e.key}))))}function nb({file:e}){let t=(0,ng.iZ)(),[n,a]=(0,u.fp)(U.oQ),{disabled:i,tooltipText:l}=function(e){let t=(0,np.Rs)(nf.bgg,{fileKey:e});return"loaded"!==t.status?{disabled:!0,tooltipText:void 0}:t.data.file?.viewerExportRestricted&&t.data.file?.canEdit===!1?{disabled:!0,tooltipText:(0,V.t)("slides.template.file_picker.viewer_export_restricted_disabled")}:t.data.file?.org?.k12GoogleOrg||t.data.file?.org?.aiFeaturesDisabledAt?{disabled:!0,tooltipText:(0,V.t)("slides.template.file_picker.ai_disabled.org")}:t.data.file?.team?.aiFeaturesDisabledAt?{disabled:!0,tooltipText:(0,V.t)("slides.template.file_picker.ai_disabled.team")}:{disabled:!1,tooltipText:void 0}}(e.key);return r.createElement("div",{className:s()(K.cx.pt8.px8.$,"slides_template_ui--fileTile--6wu1g")},r.createElement(nh.GQ,{onClick:t=>{t.stopPropagation(),i||a(e.key)},overrideOnClick:!0,file:e,subtitle:r.createElement(nh.lJ,{file:e}),activeFileUsers:[],currentUser:t,isSelected:!i&&n===e.key,disabled:i,tooltipText:l,disableIconOverlays:!0,titleFontSize:11}))}function nv({debouncedSearchQuery:e,status:t}){return t===z.J_.NO_QUERY_RESULTS?(0,V.tx)("slides.templates.file_picker.no_files_match",{searchQuery:r.createElement("p",{className:K.cx.colorText.textBodyLargeStrong.$},e)}):t===z.J_.NO_RECENT_FILES?r.createElement("h1",{className:K.cx.colorText.textBodyLarge.$},(0,V.tx)("slides.templates.file_picker.no_recent_files")):null}function nC({showCloseButton:e}){let{searchQuery:t,setSearchQuery:n}=(0,z.$N)(),[a,o]=(0,u.fp)(U.bY),s=a.type===U.Vf.TEMPLATE_PICKER&&a.figjamEntryPointData,c=(0,i.d4)(e=>e.mirror.appModel.multiplayerSessionState===l.kul.JOINED)||(0,t5.nl)();return r.createElement(eM,{dataTestId:"template-picker-view"},s?r.createElement(eG,{searchQuery:t,setSearchQuery:n,showCloseButton:!0,placeholder:(0,V.t)("slides.templates.search_templates")}):r.createElement(eK,{searchQuery:t,setSearchQuery:n,onBack:function(){o({type:U.Vf.FILE_PICKER,parentType:U.Vf.TEMPLATE_PICKER})},showCloseButton:!!e,placeholder:(0,V.t)("slides.templates.template_picker.search_templates")}),c?r.createElement(nw,null):r.createElement("div",{className:K.cx.px8.$},r.createElement(eA,null)))}function nw(){let{trimmedSearchQuery:e,isSearchQueryLoading:t,searchQueryResult:n,requestLoadMore:a}=(0,z.$N)(),i=(0,u.md)(U.ux),{showSeparator:l}=(0,z.gH)();return r.createElement(r.Fragment,null,r.createElement("div",{className:s()(K.cx.p16.flex.flexColumn.gap2.$,{[es]:e&&l})},r.createElement(eV,{icon:r.createElement("div",{style:{"--color-icon":"var(--color-icon-menu-onselected)"},className:K.cx.colorBgBrand.h14.w14.bRadius2.flex.alignCenter.itemsCenter.$},r.createElement(eW.Q,null)),title:(0,V.t)("slides.templates.template_picker.title"),subtitle:(0,V.t)("slides.templates.template_picker.subtitle")})),e?r.createElement(tl,{isSearchQueryLoading:t,trimmedSearchQuery:e,searchQueryResult:n,requestLoadMore:a}):r.createElement(nT,null),r.createElement(t7,{templateSelected:!!i}))}function nT(){let e=(0,C.sZ)(),[t,n]=r.useState([]),[a,i]=r.useState(null),{scrollPosition:l,scrollRef:o,onScroll:c}=(0,z.d$)(U.Vf.TEMPLATE_PICKER),{showSeparator:d,onShowSeparatorScroll:u}=(0,z.gH)(),[{data:m}]=(0,eZ.IT)((0,e5._4)()),p=(0,eQ.eE)(S.$A.Slides);(0,r.useEffect)(()=>{let t=[];if(p.length>0&&t.push({id:"recents",label:(0,V.t)("slides.templates.recents"),view:r.createElement(nx,null)}),m)for(let e of m)t.push({id:`hub-${e.id}`,label:e.title,view:r.createElement(nI,{shelf:e})});e&&t.push({id:"org",label:(0,V.t)("slides.templates.org_templates"),view:r.createElement(nN,{currentOrg:e})}),n(t),t.length>0&&i(t[0].id)},[p,e,m]);let _=e=>()=>{i(e)};return r.createElement(r.Fragment,null,r.createElement("div",{className:s()(K.cx.flex.flexRow.gap6.alignCenter.itemsCenter.px16.pb16.$,{[es]:d})},t.map(e=>r.createElement("button",{key:e.id,className:s()(K.cx.textBodyMedium.colorText.spacingWide.alignCenter.px8.h24.$,{"slides_template_ui--tabButton--R1hl1":a===e.id,[K.cx.textBodyMediumStrong.$]:a===e.id,[K.cx.colorTextSecondary.$]:a!==e.id}),onClick:_(e.id)},e.label))),r.createElement(G.P,{className:K.cx.px8.hFull.$,scrollContainerRef:o,initialScrollTop:l,onScroll:(e,t)=>{c(e,t),u(e,t)}},r.createElement(nS,{selectedTabId:a,tabs:t})))}function nS({selectedTabId:e,tabs:t}){let n=t.find(t=>t.id===e);return n?n.view:null}function nx(){let e=(0,eQ.eE)(S.$A.Slides);return 0===e.length?null:r.createElement(ew,null,e.map(e=>r.createElement(eh,{key:(0,en.NH)(e),template:e})))}function nk({teamId:e,displayName:t,onBackClick:n}){let{requestLoadMoreForTeam:a,templatesByTeam:i}=(0,B.li)({teamId:e,editorType:e0._Y.SLIDES});return r.createElement(r.Fragment,null,r.createElement(tu,{title:t,onClick:n,showSeparator:!1}),i?r.createElement(nu,{templates:i.templates,onRequestMore:a}):r.createElement(eO,null))}function nN({currentOrg:e}){let{isLoadingTeamTemplates:t,templatesByTeam:n,requestLoadMoreForTeam:a}=(0,B.GR)(e,e0._Y.SLIDES),[i,l]=r.useState(null),o=(0,d.kc)().pro_templates_lg;return(o&&n.forEach(e=>{e.templates.length>8&&(e.templates=e.templates.slice(0,8))}),i)?r.createElement(nk,{teamId:i,displayName:e.name,onBackClick:()=>l(null)}):t?r.createElement(eA,null):r.createElement(r.Fragment,null,n.map(t=>r.createElement(nc,{key:t.team_id,title:t.team_name??e.name,templates:t.templates,onRequestMore:()=>{o||a(t.team_id)},onSeeAllClick:o&&t.total>8?()=>{l(t.team_id)}:void 0})))}function nI({shelf:e}){let[{status:t}]=(0,eZ.IT)((0,e5._4)());if("loading"===t)return r.createElement(eA,null);let n=e.id;return r.createElement(ew,null,e.shelf_content.map(e=>{let t={type:e1.n.HubFile,category:n,template:e};return r.createElement(eh,{key:e.id,template:t})}))}function nA({showCloseButton:e}){let t=(0,u.md)(U.bY),n=(0,F.Xr)(U.VZ),a=(0,F.Xr)(U.Ei),i=(0,F.Xr)(U.OR),l=(0,F.Xr)(U.xw),o=(0,B.Gi)();switch((0,r.useEffect)(()=>()=>{i(""),l()},[l,i]),t.type){case U.Vf.ALL:return r.createElement(ts,{showCloseButton:e,closePicker:()=>{a(!1),n(!1)}});case U.Vf.ORG:if(o?.type!=="org")throw Error("User is not allowed to browse org templates");return r.createElement(nd,{currentOrg:o.entity});case U.Vf.TEAM:if(o?.type!=="team")throw Error("User is not allowed to browse team templates");return r.createElement(nm,{teamId:t.teamId,displayName:t.displayName});case U.Vf.TEMPLATE:return r.createElement(ni,{libraryKey:t.libraryKey});case U.Vf.HUB_FILE:return r.createElement(tm,{shelfId:t.shelfId});case U.Vf.FILE_PICKER:return r.createElement(nE,{showCloseButton:e});case U.Vf.TEMPLATE_PICKER:return r.createElement(nC,{showCloseButton:e});default:return null}}var nO=n(488578),nL=n(837746);function nD({children:e}){let{canDismiss:t,maybeUseLightTemplateOnDismiss:n}=(0,z.vN)();return r.createElement(nO.aF,{className:"slides_template_modal--templateModal--GmDGm",size:(0,c.hG)(nL.uRR),onHide:n,tintedModalBackground:!0,disableClickOutsideToHide:!t,enableEscapeToClose:t,"data-testid":"slides-template-modal"},r.createElement("div",{className:K.cx.overflowHidden.$,style:{height:"600px"}},e))}function nR(){let[e,t]=(0,u.fp)(U.Ei),n=(0,y.dP)(),a=(0,k._)(),l=(0,N.Ye)(),o=(0,i.wA)(),d=(0,C.sZ)(),f=r.useRef(null);(0,P.Y)(()=>t(!1),{closeOnEsc:!0,ignore:[f,(0,E.Tc)("slides-template-button"),(0,E.Tc)(D.GV),(0,E.Tc)(M.l)]}),(0,r.useEffect)(()=>{o(x.cd.fetchTemplatesMetadata({key:S.$A.Slides,orgId:d?.id})),o(m.sz({shelfType:T.cS.PIPER_TEMPLATE_MODAL}))},[d?.id,o]);let h=(0,g.b)();if(!e)return null;let b=l?70+a:(0,c.jz)(nL.M$q)+a;return r.createElement(_.fu,{name:"Slides Template Picker"},r.createElement("div",{className:s()("slides_template_ui--pickerContainer--a3RMS",p.Dm),style:{top:b,left:l?12:n+(h?0:12)+12,width:408,height:window.innerHeight-b-72},ref:f,"data-testid":"slides-template-picker"},r.createElement(z.Jn.Provider,{value:z.Ji.PICKER},r.createElement(nA,null))))}function nM(){let e=(0,b.p8)("isReadOnly"),t=(0,L.jY)(),n=!!(0,z.S7)(),a=(0,w.ut)(l.Ez5?.slideDeck().slideGrid,[]).flat().length>0,i=(0,u.md)(U.q7),o=(0,L.EI)(),s=(0,u.md)(f.D),c=(0,u.md)((0,h.r1)(R.Kt)).data,m=(0,u.md)(U.VZ),p=(0,u.md)(O.Ai),{state:g}=(0,A.wj)(I.JT.BOARD_TO_DECK),E=(0,v.tS)();return(0,d.kc)().piper_create_with_data_on_load&&(i||p.fileKey&&!i)||e||!c||!o||t||n||a||s&&!m||g===A.qy.RUNNING?null:r.createElement(_.fu,{name:"Slides Template Overlay Modal",properties:{productType:"slides",fileKey:E}},r.createElement(z.Jn.Provider,{value:z.Ji.OVERLAY_MODAL},r.createElement(nD,null,r.createElement(nA,{showCloseButton:!0}))))}},982629:(e,t,n)=>{n.d(t,{R:()=>p,l:()=>m});var a=n(411855),r=n(504440),i=n(927457),l=n(374626),o=n(939863),s=n(498606),c=n(92566),d=n(924430),u=n(491679);let m="toolbar-add-slide-button";function p(){let e=(0,l.md)(c.o6),{toggleTemplatePicker:t}=(0,u.uu)();return e?null:a.createElement(r.$n,{onClick:t,iconPrefix:a.createElement(i.e,null),variant:"secondary",recordingKey:"toolbar.addSlideButton",htmlAttributes:{"data-testid":"addSlideButton","data-element-target":m,"data-onboarding-key":d.MB,"data-tooltip":(0,o.t)("slides.carousel.add-slide-from-template"),"data-tooltip-type":s.Ib.TEXT,"data-fullscreen-intercept":!0}},(0,o.tx)("slides.carousel.new_slide"))}},342753:(e,t,n)=>{n.d(t,{A:()=>S,E:()=>T});var a=n(188507),r=n(587670),i=n(75274),l=n(966712),o=n(646240),s=n(374626),c=n(915440),d=n(30637),u=n(635897),m=n(321961),p=n(738269),_=n(293017),g=n(843495),f=n(335682),h=n(594901),E=n(99506),y=n(279453),b=n(984968),v=n(36816),C=n(259140),w=n(954049);function T(e){let t=function(){let e=(0,a.wA)(),t=(0,o.Xr)(C.Xw),n=(0,o.Xr)(w.Pk);return()=>{e(p.oB()),e(_.XE()),e(_.Uv()),t(!1),n(!1)}}(),n=S(),i=e===r.EMA.DESIGN?r.EMA.SLIDES:r.EMA.DESIGN;return()=>{(n||i!==r.EMA.DESIGN)&&(t(),function(e){let t=s.zl.get(u.Kh);e===r.EMA.DESIGN&&((0,g.NT)(r.FAf.DESIGN),t===r.NLJ.COMMENTS&&r.glU.triggerAction("set-tool-default",null))}(i),i===r.EMA.DESIGN?r.glU.triggerAction("enter-slides-design-mode",null):r.glU.triggerAction("enter-slides-mode",null))}}function S(){let e=(0,a.d4)(e=>e.currentUserOrgId),t=(0,a.d4)(f.vu),n=(0,m.q)(),r=(0,b.ol)(),o=(0,c.Rs)(y.L1I,{fileKey:t?.key??"",teamId:t?.team_id??null,repoId:t?.file_repo_id??null,projectId:t?.folder_id??null,currentOrgId:e??null}),s=(0,h.rd)(t?.key??null),u=!!t&&!!t.team_id&&!t.parent_org_id,p=o.data?.file?.org?.currentBaseOrgUser,_=!1;if(n)_=!1;else if(u&&r?.student_team)_=!0;else if(p)_=p.designPaidStatus===E.El.FULL;else{let e=o.data?.file?.roles[0]?.user?.teamUser;_=!!e&&e.designPaidStatus===v.Zf.FULL}return(0,i.u)({oldValue:_,newValueQueryResult:s,label:"slides_toggle",callSite:"useCheckDesignStatus",args:{fileKey:t?.key??""},oldValueQueryResultStatus:o.status}),!!(0,d.PN)()||((0,l.kc)().slides_toggle_to_pv2?s.unwrapOr(!1):_)}},535688:(e,t,n)=>{n.d(t,{V:()=>b});var a=n(411855),r=n(188507),i=n(293775),l=n(587670),o=n(966712),s=n(374626),c=n(646240),d=n(939863),u=n(101505),m=n(226055),p=n(498606),_=n(56207),g=n(363926),f=n(368702),h=n(507786),E=n(583765),y=n(125233);function b(){let e=(0,m.GS)(),t=(0,s.md)(E.zS),n=(0,c.Xr)(E.bJ),b=(0,c.Xr)(E.tz),v=e?"right":"left",C=(0,o.kc)().figjam_generate_handbrake,w=C?(0,d.t)("whiteboard.ai_modal.generate_handbrake"):(0,d.t)("whiteboard.ai_modal.generate"),T=(0,r.d4)(e=>e.mirror.appModel.topLevelMode===l.lyf.LAYOUT);(0,a.useEffect)(()=>{T||b()},[T,b]);let S={isActive:t===E.Wl.TOP_BAR,onClick:e=>{e.preventDefault(),t===E.Wl.TOP_BAR?b():((0,f.W)(v,b),n())},trackingProperties:{trackingDescriptor:u.c.FIGJAM_AI_TOOLBAR_ITEM},onboardingKey:_.bX,innerText:"AI Toolbar Entrypoint",disabled:C,dataTestId:"figjam-ai-toolbar-item",recordingKey:"figjam-ai-toolbar-item"};return e?a.createElement(h.Z,{tooltip:{type:p.Ib.TEXT,text:w},...S},a.createElement(i.C,null)):a.createElement(g.P,{icon:y.A,addLeftMargin:!0,tooltipText:w,...S})}},632084:(e,t,n)=>{n.d(t,{zi:()=>f,Gq:()=>h,MS:()=>E,bM:()=>y,ON:()=>C,ep:()=>w,b7:()=>g,SU:()=>d});var a=n(587670),r=n(534611),i=n(707458),l=n(939863),o=(e=>(e.HEART="heart",e.STAR="star",e.PLUS_ONE="+1",e.THUMBS_UP="thumbs up",e.THUMBS_DOWN="thumbs down",e.QUESTION="question",e.PROFILE="profile",e.DOT="dot",e.OTHER="other",e))(o||{});let s={heart:{type:"heart",nodeNameOnCanvas:"Heart"},star:{type:"star",nodeNameOnCanvas:"Star"},"+1":{type:"+1",nodeNameOnCanvas:"+1"},"thumbs up":{type:"thumbs up",nodeNameOnCanvas:"Thumbs up"},"thumbs down":{type:"thumbs down",nodeNameOnCanvas:"Thumbs down"},question:{type:"question",nodeNameOnCanvas:"Question"},profile:{type:"profile",nodeNameOnCanvas:"Profile"},dot:{type:"dot",nodeNameOnCanvas:"Dot"},other:{type:"other",nodeNameOnCanvas:"Other"}},c=[a.Z6A.STICKY,a.Z6A.TEXT,a.Z6A.SHAPE_WITH_TEXT];function d(e){return e?e.textSublayer?e.textSublayer.textContent:e.textContent?e.textContent:null:null}let u=(e,t)=>e?d(e)||(e.name?e.name:null):null,m=e=>!!["STICKY","TEXT","SHAPE_WITH_TEXT"].includes(e.type),p=(e,t,n)=>{if(!m(e))return null;let a=n[e.guid],r=u(e,t);if(!r)return null;let i={t:r,bounds:e.absoluteRenderBounds,id:e.guid,type:e.type};return a&&(i.stamps=a),i},_=e=>{let t=a.DV9.getStampsOnNodes(e),n=Object.fromEntries(t),r={};for(let[e,a]of t)r[e]=Object.fromEntries(n[e]);return r};function g(e){let t=function(e){let t=a.glU.searchForNodesInSelection(c),n=[];for(let a of t){let t=e.get(a);t&&n.push(t)}return n.filter(e=>m(e))}(e),n=_(t.map(e=>e.guid)),r=[];for(let a of t){let t=p(a,e,n);t&&r.push(t)}return{v:1,data:r}}function f(e){let t=function(e){let t=a.glU.getStickyThreadsFromSelection(),n=[];for(let a of t){let t=!1,r={id:"",text:""};for(let n of a){let a=e.get(n);if(a&&"STICKY"===a.type){let e=a.textSublayer&&a.textSublayer.textContent||"";if(t)r.id=r.id?`${r.id}|${n}`:n,e&&(r.text=r.text?`${r.text}|${e}`:e);else{if(t=!0,!e)continue;r.id=a.guid,r.text=e;continue}}}r.text&&n.push(r)}return n}(e),n=JSON.stringify(t).length;return{v:1,data:t,characterCount:n}}function h(){let e=a.glU.searchForNodesInSelection([a.Z6A.STICKY]),t=a.DV9.getStickyClustersByAuthor(e),n=[];for(let e of t)n.push({clusterName:e[0],messages:e[1]});return n}function E(){let e=a.glU.searchForNodesInSelection([a.Z6A.STICKY]),t=a.DV9.getStickyClusterByColor(e),n=[];for(let e of t)n.push({clusterName:"",messages:e[1]});return n}function y(){let e=a.glU.searchForNodesInSelection([a.Z6A.STICKY]),t=a.DV9.getStickyClusterByStampCount(e),n=[];for(let e of t)n.push({clusterName:e[0],messages:e[1]});return n.sort((e,t)=>parseInt(t.clusterName)-parseInt(e.clusterName)),n}let b=e=>{let t=a.DV9.getStickyClusterByStampType(e),n=[];return t.forEach((e,t)=>{let a="No stamps"===t?null:function(e){let t=Object.values(s).find(t=>t.nodeNameOnCanvas===e);return t?t.type:"other"}(t),r=n.find(e=>e.stampType===a);r||(r={stampType:a,stickyThreadGuids:[]},n.push(r)),r.stickyThreadGuids.push(...e)}),n},v=(e,t,n)=>{let a=[],r=e.get(t);if(!r)return a;for(let t of r.stuckNodes){let r=e.get(t);r&&r.name===s[n].nodeNameOnCanvas&&a.push(t)}return a};function C(){let e=b(a.glU.searchForNodesInSelection([a.Z6A.STICKY])),t=new i.q,n=[];for(let a of e){let e=a.stickyThreadGuids.flatMap(e=>e.split("|")),r=[];if(a.stampType)for(let n of e)r.push(...v(t,n,a.stampType));n.push({clusterName:function(e){switch(e){case o.HEART:return(0,l.t)("whiteboard.clustering.heart_stamp_cluster");case o.DOT:return(0,l.t)("whiteboard.clustering.dot_stamp_cluster");case o.PLUS_ONE:return(0,l.t)("whiteboard.clustering.plus_one_stamp_cluster");case o.PROFILE:return(0,l.t)("whiteboard.clustering.face_stamp_cluster");case o.QUESTION:return(0,l.t)("whiteboard.clustering.question_mark_stamp_cluster");case o.STAR:return(0,l.t)("whiteboard.clustering.star_stamp_cluster");case o.THUMBS_DOWN:return(0,l.t)("whiteboard.clustering.thumbs_down_stamp_cluster");case o.THUMBS_UP:return(0,l.t)("whiteboard.clustering.thumbs_up_stamp_cluster");case o.OTHER:default:return(0,l.t)("whiteboard.clustering.other_stamp_cluster");case null:return(0,l.t)("whiteboard.clustering.no_stamps_cluster")}}(a.stampType),messages:a.stickyThreadGuids,allowedStampsToCopyGuids:r})}return n}function w(e,t){let n=e.get(t);if(!n||!n.isDiagramNode)return null;let a=d(n);if(!a)return null;let i=[],l=n.diagramParentId;for(;l&&l!==r.AD;){let t=e.get(l);if(!t)break;let n=d(t);n&&i.push(n),l=t.diagramParentId}i.reverse();let o=[];for(let t of n.diagramChildIds){let n=d(e.get(t));n&&o.push(n)}return{selectedNode:a,parentHierarchy:i,children:[],excludedSuggestions:o}}},47750:(e,t,n)=>{n.d(t,{J:()=>A,f:()=>I});var a=n(411855),r=n(188507),i=n(587670),l=n(86625),o=n(707458),s=n(939683),c=n(966712),d=n(374626),u=n(395900),m=n(966981),p=n(825871),_=n(939863),g=n(574724),f=n(378260),h=n(106757),E=n(862442),y=n(843495),b=n(457630),v=n(335682),C=n(247014),w=n(951840),T=n(435898),S=n(342824),x=n(88596),k=n(632084);let N=e=>({...e,width:e.w,height:e.h});function I(){let e=a.useRef((0,_.t)("whiteboard.ai_cluster.loading_section_base")),t=a.useMemo(()=>new o.q,[]),{Sprig:n}=(0,m.A)(),[I,A]=a.useState(!1),O=(0,s.am)(),L=a.useRef(),D=(0,E.Z)("figjam_summary_navigate"),R=(0,S.um)(),M=(0,d.md)(f._s),P=(0,d.md)(v.As),F=(0,d.md)(h.kS),B=(0,d.md)(v.yM),U=(0,d.md)(v.ze),G=(0,r.d4)(e=>e.multiplayer.allUsers.length),K={orgId:M,teamId:P||null,fileKey:U,userId:F||null,trackingSessionId:(0,p.f)()},V=a.useCallback(e=>{let n=t.get(e);n?.isAlive()&&l.l7.system("remove-cluster-placeholder",()=>i.Hur.removePlaceholder(e)),L.current&&(clearInterval(L.current),L.current=void 0)},[L,t]);return{clusterCanvasSelection:()=>{let a=new u.jk(x.Ux.TIME_TAKEN_TO_COMPLETE,{});a.start(),A(e=>!e);let r=i.glU.getSelectionBounds(),{v:o,data:s,characterCount:d}=(0,k.zi)(t),m=e.current+".",p=l.l7.system("create-cluster-placeholder",()=>{let e=i.Hur.createPlaceholder(r);return y.i(e,m),e});D((0,b.QZ)({nodeId:p,alwaysPan:!1})),L.current=setInterval(()=>{m.length===e.current.length+3?m=e.current+".":m+=".",l.l7.system("update-cluster-placeholder-text",()=>y.i(p,m))},1e3),g.Ay.figjam.cluster({v:o,data:s,tokenCount:d/4},K).then(e=>{let o=t.get(p),u=o?.containingCanvas;if(!o?.isAlive()||!u)return;let m=o?.absoluteRenderBounds,_=m?N(m):r;V(p);let[g,f]=l.l7.user("create-and-place-clusters",()=>i.Hur.createAndPlaceClusters(e.clusters,_,u,!1));n("track",T.l0),A(!1);let h=a.stop();h&&O(x.Ux.TIME_TAKEN_TO_COMPLETE,{elapsed_ms:h},{forwardToDatadog:!0}),O("ai_sticky_clusters_created",{request_id:e.requestUuid,nodes_clustered:s.map(e=>e.id.split("|")).flat(),num_characters_input:d,success:!0,output_section_node_ids:f,output_sticky_node_ids:g,failure_reason:""}),(0,c.kc)().workspace_activity_write&&U&&B&&w.i.recordActivity({activityUnitType:C.qj.FILE_COLLABORATION,fileKey:U,collaborationType:C.Uz.AI_CLUSTER,numPeopleInFile:G})}).catch(e=>{V(p);let t=(0,S.E$)(e,S.ez.CLUSTER);O("ai_sticky_clusters_created",{nodes_clustered:s.map(e=>e.id.split("|")).flat(),num_characters_input:d,success:!1,failure_reason:t.message}),R(t.message,S.ez.CLUSTER)})},requestIsPending:I}}function A(e,t=!1){let n=a.useMemo(()=>new o.q,[]),[r,s]=a.useState(!1),c=a.useRef(),d=(0,E.Z)("figjam_local_cluster_navigate"),u=a.useCallback(e=>{let t=n.get(e);t?.isAlive()&&l.l7.system("remove-cluster-placeholder",()=>i.Hur.removePlaceholder(e)),c.current&&(clearInterval(c.current),c.current=void 0)},[c,n]);return{cluster:()=>{s(e=>!e);let a=i.glU.getSelectionBounds(),r=e(),o=l.l7.system("create-cluster-placeholder",()=>i.Hur.createPlaceholder(a));d((0,b.QZ)({nodeId:o,alwaysPan:!1}));let c=n.get(o),m=c?.containingCanvas;if(!c?.isAlive()||!m)return;let p=c?.absoluteRenderBounds,_=p?N(p):a;u(o),l.l7.system("create-and-place-clusters",()=>i.Hur.createAndPlaceClusters(r,_,m,t)),s(!1)},requestIsPending:r}}},477173:(e,t,n)=>{n.d(t,{ss:()=>M});var a=n(411855),r=n(188507),i=n(587670),l=n(86625),o=n(707458),s=n(776250),c=n(939683),d=n(966712),u=n(374626),m=n(395900),p=n(966981),_=n(825871),g=n(743282),f=n(931828),h=n(574724),E=n(378260),y=n(106757),b=n(736916),v=n(769977),C=n(862442),w=n(457630),T=n(335682),S=n(247014),x=n(951840),k=n(479296),N=n(435898),I=n(342824),A=n(88596),O=n(632084);class L{static generateLocalRequestId(){return(0,g.g)()}}let D=(0,k.D)((e,t,n)=>{let a=l.l7.user("insert-ai-summary-node",()=>i.glU.insertAISummaryInCanvas(t,n)),r=e.get(a);return r&&(l.l7.user("set-ai-summary-timestamp",()=>{(0,v.Gw)(r,new Date)}),i.glU.triggerAction("commit",{})),r});async function R({v:e,canvasData:t,nodePosition:n,loadingNodeGuid:a,showErrorBell:r,trackSummaryRequested:o,trackSummaryCreated:c,scene:d,operationTimer:m,source:p}){let g,C;let w={orgId:u.zl.get(E._s),teamId:u.zl.get(T.As)||null,fileKey:u.zl.get(T.ze)||null,userId:u.zl.get(y.kS)||null,trackingSessionId:(0,_.f)()},S=e=>{let t;throw"figjam_summarize_out_of_date"===e.type&&(t={type:I.tE.Reload}),"content_length_limit_exceeded"===e.type&&"DISCOVERY_NUDGE"===p&&(0,s.sx)("ai_summarize_from_nudge_exceeded_token_length_limit",{},{forwardToDatadog:!0}),r(e.message,I.ez.SUMMARIZE,t),Error(I.xQ[I.ez.SUMMARIZE]+e.message)},x=t.map(e=>e.id),k=L.generateLocalRequestId();o(x,t,k);let N=null,O=!1;try{g=(await h.Ay.figjam.streamSummarize({v:e,data:t},w)).pipeThrough((0,h.nU)())}catch(e){S((0,I.E$)(e,I.ez.SUMMARIZE));return}let R=()=>{if(!O){let e=d.get(a);e&&e.isAlive()&&l.l7.system("remove-ai-summary-loading-state",()=>{i.glU.deleteNode(a),O=!0})}},M=()=>{let e=D(d,n,a);return e&&setTimeout(()=>{R()},200),e},P=0;try{for await(let e of new h.c6(g)){C=e;let t=P%5==0;N||(N=await M()),t&&l.l7.system("stream-ai-summary",()=>{N&&(0,v.WN)(N,C)}),P++}}catch(e){S((0,I.E$)(e,I.ez.SUMMARIZE));return}if(l.l7.system("stream-ai-summary",()=>{C&&N&&(0,v.WN)(N,C)}),C){let e=m.stop();e&&(0,s.sx)(A.mr.TIME_TAKEN_TO_COMPLETE,{elapsed_ms:e},{forwardToDatadog:!0}),N&&(f.b({[b.zp]:!0}),c(N.guid,C,k))}C&&N&&i.glU.triggerAction("commit",{})}function M(e,t=!0,n){let[s]=a.useState(new o.q),[u,_]=a.useState(!1),g=(0,C.Z)("figjam_summary_navigate"),f=(0,I.um)(),{Sprig:h}=(0,p.A)(),E=function(){let e=(0,c.am)();return a.useCallback((t,n,a)=>{let r=(0,A.sh)(n);e(A.mr.REQUEST,{local_summary_id:a,num_characters_input:r,nodes_summarized:t})},[e])}(),y=function(){let e=(0,c.am)(),t=(0,T.q5)(),n=(0,r.d4)(e=>e.multiplayer.allUsers.length),i=a.useRef(n);return i.current=n,a.useCallback((n,a,r)=>{let l={local_summary_id:r,summary_node_id:n,num_characters_output:a.map(e=>"content"in e?e.content.length:0).reduce((e,t)=>e+t,0),num_themes_output:a.filter(e=>"h2"===e.type).length,num_supporting_points_output:a.filter(e=>"li"===e.type).length};e(A.mr.CREATE,l),(0,d.kc)().workspace_activity_write&&t?.team?.workspaceId&&x.i.recordActivity({activityUnitType:S.qj.FILE_COLLABORATION,fileKey:t.key,collaborationType:S.Uz.AI_SUMMARY,numPeopleInFile:i.current})},[e,t,i])}();return{summarizeCanvasSelection:async()=>{let a=new m.jk(A.mr.TIME_TAKEN_TO_COMPLETE,{});a.start();let{v:r,data:c}=(0,O.b7)(new o.q),d=l.l7.user("insert-ai-summary-loading-node",()=>i.glU.insertLoadingSummaryInCanvas(e===i.cfv.BELOW,t)),u=s.get(d);if(!u)return;l.l7.user("insert-ai-summary-loading-node",()=>{u.setWidgetSyncedState("syncedState:loading","true")}),g((0,w.QZ)({nodeId:d,alwaysPan:!1}));let p={x:u.absoluteBoundingBox.x,y:u.absoluteBoundingBox.y};if(c){_(!0);try{await R({v:r,canvasData:c,nodePosition:p,loadingNodeGuid:d,showErrorBell:f,trackSummaryRequested:E,trackSummaryCreated:y,scene:s,operationTimer:a,source:n})}catch(e){s.get(d)&&i.glU.deleteNode(d)}finally{h("track",N.AM),_(!1)}}},requestIsPending:u}}},577023:(e,t,n)=>{n.d(t,{Cw:()=>C,Su:()=>b,v:()=>y});var a=n(411855),r=n(38580),i=n(374626),l=n(860601),o=n(939863),s=n(672517),c=n(456104),d=n(457630),u=n(397065),m=n(143678),p=n(147829),_=n(615297),g=n(493364),f=n(63666),h=n(463546),E=n(161735);let y=(0,r.eU)(!1),b="organize";function v({onClose:e}){let t=(0,E.Cb)(),n=(0,d.LE)({subscribeToUpdates_expensive:t});return a.useEffect(()=>{t||e()},[t,e]),a.createElement("div",{style:{opacity:n?0:1,transition:"ease-in-out 0.1s all"}},a.createElement(f.Dv,{targetType:"dom",targetKey:b,topPadding:-6,isBold:!0,fixedWidth:316,arrowPosition:g.F_.BOTTOM,onTargetLost:l.lQ},a.createElement(_.mI,{bodyText:a.createElement("span",{style:{maxWidth:184}},(0,o.tx)("whiteboard.organize_menu.onboarding_text_base",{boldText:a.createElement("b",null,(0,o.tx)("whiteboard.organize_menu.onboarding_text_bold_text"))})),buttonText:(0,o.tx)("whiteboard.organize_menu.onboarding_dismiss_button_text"),onButtonClick:()=>{e()}})))}function C(){let[e,t]=(0,i.fp)(y),{show:n,isShowing:r,complete:l}=(0,c.e)({overlay:h.YiU,priority:u.N.SECONDARY_MODAL});return a.useEffect(()=>{n({canShow:()=>e})},[e,n]),a.createElement(p.M,{isShowing:r,testId:"FigJamAISummarizationEntrpointPointerOverlay"},a.createElement(s.fu,{name:m.e0.AI_INLINE_MENU_ORGANIZE_SUMMARY_TOOLTIP},a.createElement(v,{onClose:()=>{t(!1),l()}})))}},359964:(e,t,n)=>{n.d(t,{s:()=>U});var a=n(411855),r=n(188507),i=n(629019),l=n.n(i),o=n(752553),s=n(153234),c=n(939863),d=n(801161),u=n(335682),m=n(279453),p=n(984968),_=n(498606),g=n(677859),f=n(244307),h=n(684690),E=n(374626),y=n(355819),b=n(662275),v=n(672517),C=n(428654),w=n(775664),T=n(140047),S=n(694241),x=n(143678),k=n(227795),N=n(42173),I=n(948529),A=n(225719),O=n(677062),L=n(598893);let D="color_palette_picker--header__iconButton--rFfgT";var R=n(162502),M=n(98285);function P({customColorPalettes:e,closeColorPalettePicker:t,defaultColorPaletteLength:n}){let i=(0,p.cD)(),o=(0,r.d4)(e=>(0,T._)(i,e)),[s,d]=(0,E.fp)(A.Ze),[u,m]=a.useState(!1),_=(0,h.Z9)(),g=a.useRef(null),f={uuid:S.fJ,name:(0,c.t)("whiteboard.color_palettes.figjam_colors"),baseColors:(0,N.TS)("base").map(e=>w.z5.format(e))};if(!e)return a.createElement("div",null);let b=[f].concat(e).map((e,r)=>a.createElement(F,{index:r,key:e.uuid,palette:e,isSelected:_.uuid===e.uuid,containerRef:g,defaultColorPaletteLength:n,closeColorPalettePicker:t}));return a.createElement(v.fu,{name:x.e0.COLOR_PALETTE_PICKER},a.createElement("div",{className:l()({"color_palette_picker--wrapper--DVGTu":!0,"color_palette_picker--wrapper_onClose--zERit":s})},a.createElement("div",{ref:g,className:l()({"color_palette_picker--container--2HK33 modal--modalShadowFigJam--lkEJ2":!0,"color_palette_picker--container_onClose--NlCEf":s}),onAnimationEnd:()=>{s&&(d(!1),t())}},a.createElement(B,{teamName:o?.name||"",showBottomBorder:u}),a.createElement("div",{className:"color_palette_picker--paletteList--jdLIl"},a.createElement(y.P,{maxHeight:290,innerClassName:"color_palette_picker--scrollContainer__inner--GF0-Z",onScroll:e=>{e>0?m(!0):m(!1)}},b)))))}function F({palette:e,isSelected:t,index:n,containerRef:r,defaultColorPaletteLength:i,closeColorPalettePicker:o}){let s=(0,h.$v)(e.baseColors),c=(0,h.Bw)(),d=a.useRef(0===n?0:2*Math.random()*(n%2?1:-1)),u=r?.current?.offsetHeight||0,m={"--rowRotation":`rotate(${t?0:d.current}deg)`,"--translatePaletteRow":`${Math.max(u-80-32*n,0)}px`};return a.createElement("button",{className:l()({"color_palette_picker--paletteRow--9Pdbd":!0,"color_palette_picker--paletteRow_selected--um2Cd":t}),style:m,onClick:()=>{if(!t){let t=e.uuid===S.fJ?i:e.baseColors.length;c(e.uuid,t)}o(!0)},type:"button","data-tooltip-type":_.Ib.TEXT,"data-tooltip":e.name,"data-tooltip-max-width":200,"data-tooltip-show-above":!0,"data-testid":`color-palette-row-${e.uuid}`},s.map((t,n)=>a.createElement(I.cd,{key:e.uuid+C.F.format(t)+"-"+n,size:"medium",value:t,paletteType:"base",background:"light"})))}function B(e){let t=(0,r.wA)(),n=(0,h.X8)();return a.createElement("div",{className:l()({"color_palette_picker--header--m9FBq":!0,"color_palette_picker--header_bottomBorder--PRGsS":e.showBottomBorder})},e.teamName?(0,c.tx)("whiteboard.color_palettes.color_palette_picker.team_palettes",{teamName:e.teamName}):(0,c.t)("whiteboard.color_palettes.color_palette_picker.team_palettes_no_name"),n&&a.createElement("div",{className:"color_palette_picker--header__rightHand--z-7ux"},a.createElement(k.K0,{className:D,onClick:()=>{t(b.$O({type:O.dV.type}))},svg:M.A,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":(0,c.t)("whiteboard.color_palettes.dropdown.new_palette"),"data-tooltip-show-above":!0,dataTestId:"create-color-palette-button"}),a.createElement(k.K0,{className:D,onClick:()=>{t(b.$O({type:L.j.type,data:{entryPoint:"whiteboard"}}))},svg:R.A,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":(0,c.t)("whiteboard.color_palettes.dropdown.manage_palettes"),"data-tooltip-show-above":!0,dataTestId:"manage-color-palettes-button"})))}function U(e){let t=(0,p.cD)(),n=(0,r.d4)(e=>!!e.user),i=(0,h.WR)(),l=(0,h.VR)(),[s]=(0,o.IT)((0,m.iP2)({teamId:t}),{enabled:!!t}),c=i?s.data?.colorPalettesForTeam||[]:l?[l]:[],d=(0,u.q5)(),_=(0,r.d4)(e=>!!(d&&!t&&d.canManage&&e.currentUserOrgId)),g=n&&(_||i||t&&!!l),E=e.isInDltSubmenu?2:16,{closeColorPalettePicker:y,isColorPalettePickerOpen:b}=e.colorPalettePickerState;return g?a.createElement(f.A,{isOpen:b,onClose:y,positionY:(e,t)=>e.y-E-t.height,target:a.createElement(G,{shouldShowMoveToTeamTooltip:_,colorPalettePickerState:e.colorPalettePickerState,disabled:e.disabled,recordingKey:e.recordingKey,isInDltSubmenu:e.isInDltSubmenu}),renderPopoverContents:()=>a.createElement(P,{customColorPalettes:c,closeColorPalettePicker:y,defaultColorPaletteLength:e.defaultColorPaletteLength})}):null}function G({recordingKey:e,colorPalettePickerState:t,shouldShowMoveToTeamTooltip:n,disabled:i,isInDltSubmenu:o}){let u=(0,r.wA)();return a.createElement("div",{key:"caret",className:l()("color_palettes_submenu_picker--submenuPickerContainer--GTTBT",{"color_palettes_submenu_picker--submenuPickerContainerNested--wuRz-":!o,"color_palettes_submenu_picker--disabled--scEBs":i})},a.createElement(g.$n,{buttonStyle:{height:"100%",backgroundColor:"inherit"},caret:"up",animateCaret:o,isNewSubmenu:o,tabIndex:-1,active:"NONE",onClick:n?e=>{let t=e.target.closest("button");t&&u(d.eB({target:{kind:_.Ui.TEXT,text:(0,c.t)("whiteboard.color_palettes.tooltip.move_to_team")},targetRect:t.getBoundingClientRect(),position:_.Zj.ABOVE}))}:()=>{if(!t)return;let{openColorPalettePicker:e,closeColorPalettePicker:n,isColorPalettePickerOpen:a}=t;a?n(!0):e()},testId:"color-palettes-picker-caret",recordingKey:(0,s.Pt)(e,"colorPalettesPickerCaret"),tooltip:n?(0,c.t)("whiteboard.color_palettes.tooltip.move_to_team"):void 0}))}},772275:(e,t,n)=>{n.d(t,{s_:()=>ei,nG:()=>Q,Ay:()=>ee,Bl:()=>et,dA:()=>er});var a=n(411855),r=n(188507),i=n(86625),l=n(629019),o=n.n(l),s=n(737947),c=n(966712),d=n(374626),u=n(860601),m=n(743282),p=n(712366),_=n(281381),g=n(268537),f=n(210954),h=n(163023),E=n(939863),y=n(931828),b=n(672517),v=n(582947),C=n(498606),w=n(538697),T=n(468829),S=n(67048),x=n(211041),k=n(47750),N=n(230646),I=n(587670),A=n(707458),O=n(939683),L=n(395900),D=n(825871),R=n(392592),M=n(934533),P=n(574724),F=n(378260),B=n(106757),U=n(335682),G=n(342824),K=n(632084);let V="ai_expand_mindmap";var H=(e=>(e.LOADING="ai-expand-mindmap-loading",e.SUCCESS="ai-expand-mindmap-success",e))(H||{}),z=n(477173),W=n(425187),j=n(677859),$=n(437771),q=n(662599),Y=n(266066),X=n(58772),J=n(449802),Z=n(62573);let Q="https://help.figma.com/hc/articles/16822138920343-Use-AI-tools-in-Figma";var ee=(e=>(e.SUMMARIZE="summarize",e.CLUSTER="cluster",e.GENERATE_IDEAS="generate_ideas",e))(ee||{});let et=(0,v.r1)("used_figjam_ai_quick_actions"),en="used_figjam_ai_mindmaps_inline_menu",ea=(0,v.r1)(en);function er(){let e=(0,d.md)(W.f).positionRelativeToSelection,{summarizeCanvasSelection:t}=(0,z.ss)(e,void 0,"INLINE_TOOLBAR"),{clusterCanvasSelection:n}=(0,k.f)(),{expandSelectedMindmapNode:l}=function(){let e=(0,d.md)(F._s),t=(0,d.md)(U.As),n=(0,d.md)(U.ze),l=(0,d.md)(B.kS),o=(0,G.um)(),s=(0,O.am)(),c=(0,r.wA)(),u={orgId:e,teamId:t||null,fileKey:n,userId:l||null,trackingSessionId:(0,D.f)()},m=a.useCallback(()=>c(R.F.enqueue({message:(0,E.t)("whiteboard.ai_expand_mindmap.generic_error")})),[c]),p=e=>{for(let t of e)i.l7.user("expand-figjam-ai-mindmap",()=>{I.glU.deleteNode(t)})},_=(e,t,n)=>{let a=(0,K.ep)(new A.q,e);if(!a){m(),s(V,{success:!1,failure_reason:"Failed to get input data"});return}c(R.F.dequeue({matchType:"ai-expand-mindmap-success"})),c(R.F.enqueue({message:(0,E.t)("whiteboard.ai_modal.streaming"),icon:M.zX.SPINNER,type:"ai-expand-mindmap-loading",timeoutOverride:1/0})),P.Ay.figjam.updateVisual({inputData:a,updateType:{visualType:"mindmap",updateMode:"generate_ideas"}},u).then(a=>{n&&p(n);let r=i.l7.user("expand-figjam-ai-mindmap",()=>I.$mk.expandWithFigjamAiMindmapNodes(a,e)),l=t.stop();r.length?(c(R.F.enqueue({message:(0,E.t)("whiteboard.ai_expand_mindmap.generation_success"),type:"ai-expand-mindmap-success",button:{text:(0,E.t)("whiteboard.ai_expand_mindmap.retry"),action:()=>{let t=new L.jk(V,{});return t.start(),_(e,t,r),!1}}})),s(V,{request_id:a.requestId,success:!0,failure_reason:"",num_nodes_generated:r.length,elapsed_ms:l})):(m(),s(V,{request_id:a.requestId,success:!1,failure_reason:"No nodes generated",elapsed_ms:l}))}).catch(e=>{let n=t.stop(),a=(0,G.E$)(e,G.ez.GENERATE);o(a.message,G.ez.GENERATE),s(V,{success:!1,failure_reason:a.message,elapsed_ms:n})}).finally(()=>{c(R.F.dequeue({matchType:"ai-expand-mindmap-loading"}))})};return{expandSelectedMindmapNode:()=>{let e=new L.jk(V,{});e.start();let t=I.wzW.getSingleSelectedDiagramNodeId(),n=function(e,t){let n=e.get(t);if(n){if((0,K.SU)(n))return t;{if(!n.diagramParentId)return;let t=e.get(n.diagramParentId);return(0,K.SU)(t)?n.diagramParentId:void 0}}}(new A.q,t);if(!n){m(),s(V,{success:!1,failure_reason:"Failed to get selected node"});return}_(n,e)}}}();return e=>{let a=u.lQ,r="";if(e){switch(e.type){case"summarize":a=t,r="ai-quick-action-summarize";break;case"cluster":a=n,r="ai-quick-action-cluster";break;case"generate_ideas":a=l,r="ai-quick-action-generate-ideas"}i.l7.user(r,a)}}}function ei(){var e;let t=(0,m.g)(),n=er(),r=(0,c.kc)().figjam_synthesize_handbrake,[i,l]=a.useState(!1),o=[...function(){let e=(0,N.QP)(),t=[];return e&&t.push({type:"generate_ideas",enabled:e}),t}()];return a.createElement($.Fn,{value:void 0,overrideMenuOpenState:{isOpenOverride:i,setIsOpenOverride:l},onChange:n,renderButton:({onClick:e,onKeyDown:n,ref:i})=>a.createElement(el,{onClick:e,onKeyDown:n,buttonRef:i,ariaWrapperId:t,disabled:!!r,trackingProperties:{text:"figjam ai"},dropdownMenuOptions:o}),options:o,renderOption:es,OptionWrapper:(e=(0,E.t)("whiteboard.inline_menu.ai_quick_actions_dropdown_options_aria_label"),function({children:n}){return a.createElement("div",{className:"ai_quick_actions_control--flexColumn--kgAdX","aria-label":e,id:t,role:"listbox",tabIndex:-1,"data-fullscreen-intercept":!0},n)}),responsivePositionY:{aboveTargetPositionY:(e,t,n)=>(0,q.T1)(e,t,n+-48),belowTargetPositionY:(e,t,n)=>(0,q.DH)(e,t,n+-48)},positionX:e=>e.x,popoverClassName:"ai_quick_actions_control--popover--BNsqs",additionalContentsTop:function({closeMenu:e}){return a.createElement("div",{className:"ai_quick_actions_control--dropdownHeaderContainer--ifOPr",onClick:e,role:"button",tabIndex:0},a.createElement("div",{className:"ai_quick_actions_control--dropdownHeaderTitle--Cqg8n"},(0,E.tx)("whiteboard.inline_menu.ai_quick_actions_header_text")),a.createElement("div",{className:"ai_quick_actions_control--badgeContainer--kBpYM"},a.createElement(S.G,{location:"INLINE_TOOLBAR",overrideText:(0,E.t)("whiteboard.inline_menu.ai_quick_actions_beta_badge_text")})))}({closeMenu:()=>l(!1)}),additionalOptions:eo,additionalOptionOnChange:()=>{(0,p.Lf)(Q)||s.Ay.unsafeRedirect(Q,"_blank")}})}let el=(0,b.tf)(function({onClick:e,onKeyDown:t,buttonRef:n,ariaWrapperId:i,disabled:l,dropdownMenuOptions:s}){let[c,m]=a.useState(0),{shouldShowBadge:p,setUserFlagsCallback:g}=function(e){var t;let n=(0,r.wA)(),i=(t=["generate_ideas"],!!e.find(e=>e&&t.includes(e.type)));return{shouldShowBadge:function(e){let t=(0,x.tG)(),n=(0,d.md)(ea).data;return!!(t&&!n&&e)}(i),setUserFlagsCallback:a.useCallback(()=>{i&&n(y.b({[en]:!0}))},[i,n])}}(s);return a.createElement(j.$n,{tooltip:T.w,tooltipType:C.Ib.SPECIAL,onClick:l?u.lQ:()=>{e(),g()},disabled:l,onKeyDown:t,ariaControls:i,ref:n,recordingKey:"toolbarAIQuickActionsDropdownButton",testId:"toolbarAIQuickActionsDropdownButton",caret:"down",role:"combobox",ariaLabel:(0,E.t)("whiteboard.inline_menu.ai_quick_actions_button_aria_label"),buttonStyle:{width:p?48+c+8:48},buttonChildrenStyle:{justifyContent:"initial",width:"initial"}},a.createElement("div",{className:o()({"ai_quick_actions_control--withBadge--z88DK":p})},a.createElement("div",{className:"ai_quick_actions_control--buttonIconContainer--pBGdR"},a.createElement(h.B,{svg:Y.A,className:o()("ai_quick_actions_control--svgIcon--XDs5m",{"ai_quick_actions_control--svgIconDisabled--u4WwB":l})})),p&&a.createElement(b.fu,{name:"ai_quick_actions_onboarding_badge"},a.createElement("div",{ref:e=>{m(e?.offsetWidth||c)}},a.createElement(_.Ex,{text:(0,E.t)("whiteboard.inline_menu.ai_quick_actions_onboarding_badge_2"),color:_.zE.FIGJAM,size:_.vj.SMALL,className:"ai_quick_actions_control--onboardingBadge---sKJz"})))))});function eo(e){return a.createElement(a.Fragment,null,a.createElement(g.wv,{key:"menu-separator-token"}),a.createElement("div",{className:"ai_quick_actions_control--dropdownFooterContainer--1d8mD"},a.createElement("span",null,a.createElement("span",{className:"ai_quick_actions_control--dropdownFooterDisclaimer--UVXvJ"},`${(0,E.t)("whiteboard.inline_menu.ai_quick_actions_dropdown_disclaimer")} `),a.createElement(f.N,{className:o()("ai_quick_actions_control--dropdownFooterCta--hi6Ik",{"ai_quick_actions_control--dropdownFooterCtaIsFocused--2OdM8":e}),href:Q,target:"_blank",trusted:!0},(0,E.tx)("whiteboard.inline_menu.ai_quick_actions_dropdown_disclaimer_cta")))))}let es=e=>{let{value:t,onClick:n,id:r,isFocused:i}=e;if(!t)return null;let{type:l,enabled:o}=t,{displayText:s,svgSrc:c,disabledTooltipText:d}=function(e){switch(e){case"summarize":return{displayText:(0,E.t)("whiteboard.inline_menu.ai_quick_actions_summarize_button"),svgSrc:Z.A,disabledTooltipText:(0,E.t)("whiteboard.inline_menu.ai_quick_actions_summarize_disabled_tooltip",{minSelectedStickies:2})};case"cluster":return{displayText:(0,E.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_button"),svgSrc:J.A,disabledTooltipText:(0,E.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_disabled_tooltip",{minSelectedStickies:2})};case"generate_ideas":return{displayText:(0,E.t)("whiteboard.inline_menu.ai_quick_actions_generate_ideas_button"),svgSrc:X.A,disabledTooltipText:(0,E.t)("whiteboard.inline_menu.ai_quick_actions_generate_ideas_disabled_tooltip")}}}(l),u="generate_ideas"===l?"generate ideas":"other ai action";return a.createElement(ec,{key:`${l}-menu-option`,id:r,type:l,displayText:s,svgSrc:c,disabledTooltipText:d,disabled:!o,onClick:n,isFocused:i,trackingProperties:{text:u}})},ec=(0,b.tf)(function({id:e,type:t,displayText:n,svgSrc:r,disabledTooltipText:i,disabled:l,onClick:s,isFocused:c}){return a.createElement("div",{id:e,className:o()("ai_quick_actions_control--optionContainer--pbhnv",{"ai_quick_actions_control--optionContainerDisabled--Sxua-":l,"ai_quick_actions_control--optionContainerIsFocused--AD1hq":c}),"aria-label":n,"aria-selected":"false",role:"option",tabIndex:-1,"data-tooltip-type":C.Ib.TEXT,"data-tooltip":l?i:"","data-tooltip-tip-align-left":!0,"data-tooltip-show-right":!0,"data-tooltip-offset-x":6},a.createElement(w.c$,{disabled:l,recordingKey:`aiQuickActionsOption-${t}`,"data-testid":`aiQuickActionsOption-${t}`,dataTestId:`aiQuickActionsOption-${t}`,key:`option-${t}`,value:t,height:32,fullWidth:!0,svg:r,formattedValue:n,additionalStylesClassName:void 0,selected:!1,onMouseUp:l?u.lQ:s,style:{marginLeft:8},ignoreCheck:!0}))})},519048:(e,t,n)=>{n.d(t,{S:()=>h,o:()=>f});var a=n(411855),r=n(587670),i=n(86625),l=n(646240),o=n(374626),s=n(939863),c=n(450225),d=n(848661),u=n(555074),m=n(4051),p=n(32067),_=n(677859),g=n(861713);function f(e){let t=(0,p.uQ)()||"",n=(0,u.kl)("embedData"),o=decodeURIComponent(d.E7(n)?.originalText||""),s=(0,c.tq)(n),_=(0,l.Xr)(m.n);return a.useCallback(()=>{o&&(s(c.yc.CONVERT_TO_TEXT),_({type:"MINIMIZE"}),(0,i.l7)(e,"convert-embed-to-text",()=>r.glU.replaceNodeWithText(t,o)))},[o,s,_,t,e])}function h(e){let t=(0,o.md)(m.n),n=(0,p.uQ)()||"",i=(0,u.kl)("embedData"),l=decodeURIComponent(d.E7(i)?.originalText||""),c=f(r.zkO.USER);return i&&n&&l&&(!t||e.inModal)?a.createElement(_.K0,{svg:g.A,active:"NONE",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.change_back_to_text"),onClick:c,recordingKey:"embedConvertToTextControl"}):null}},929021:(e,t,n)=>{n.d(t,{e:()=>f,f:()=>g});var a=n(411855),r=n(188507),i=n(374626),l=n(939863),o=n(677664),s=n(450225),c=n(848661),d=n(555074),u=n(4051),m=n(677859),p=n(650602);let _=()=>{let e=(0,d.kl)("embedData");return decodeURIComponent(c.E7(e)?.url||c.E7(e)?.srcUrl||"")};function g(){let e=(0,r.wA)(),t=_(),n=(0,d.kl)("embedData"),i=(0,s.tq)(n);return a.useCallback(()=>{t&&(i(s.yc.OPEN_PREVIEW),e((0,o.RK)({rawInput:t})))},[t,e,i])}function f(e){let t=(0,i.md)(u.n),n=_(),r=g();return n&&(e.inModal||!t)?a.createElement(m.K0,{svg:p.A,active:"NONE",tooltip:(0,l.t)("whiteboard.embeds.inline_menu.open_link"),onClick:r,recordingKey:"embedOpenExternalControl"}):null}},904443:(e,t,n)=>{n.d(t,{nG:()=>D,tT:()=>F});var a=n(411855),r=n(188507),i=n(629019),l=n.n(i),o=n(737947),s=n(966712),c=n(374626),d=n(860601),u=n(743282),m=n(712366),p=n(281381),_=n(163023),g=n(901536),f=n(939863),h=n(809840),E=n(931828),y=n(672517),b=n(582947),v=n(498606),C=n(538697),w=n(468829),T=n(67048),S=n(230646),x=n(577023),k=n(161735),N=n(677859),I=n(437771),A=n(322027),O=n(420584),L=n(555282);let D="https://help.figma.com/hc/articles/16822138920343-Use-AI-tools-in-Figma",R="used_figjam_ai_quick_actions",M=(0,b.r1)(R);function P(e){switch(e){case k.Uj.SUMMARIZE:return"summarize";case k.Uj.CLUSTER:return"sort stickies";case k.Uj.CREATE_FIGMA_SLIDES_OUTLINE:return"copy to slides";case k.Uj.CLUSTER_BY_AUTHOR:return"sort by author";case k.Uj.CLUSTER_BY_COLOR:return"sort by color";case k.Uj.CLUSTER_BY_STAMP_COUNT:return"sort by stamp count";case k.Uj.CLUSTER_BY_STAMP_TYPE:return"sort by stamp type";case k.Uj.OPEN_CLUSTER_BY_MORE_MENU:return"sort by more dropdown button";case k.Uj.TIDY_UP:return"tidy up";case k.Uj.WRAP_IN_SECTION:return"wrap in section";default:return"other organize action"}}function F(){let e=(0,k.Yh)(),t=e.filter(e=>!e?.disabled&&!e?.isInClusterSubmenu),n=e.filter(e=>e?.disabled&&!e?.isInClusterSubmenu),r=(0,u.g)(),i=(0,k.PX)(),[l,o]=(0,c.fp)(k.Y),s=(0,k.Wb)(),d=(0,k.Pn)();a.useEffect(()=>s,[s]),a.useEffect(()=>{l||d()},[l,d]);let m=(0,k.z1)(),p=function(){let e=(0,k.Yh)(),t=(0,k.QL)(),n=(0,k.E0)(),a=[...e];for(let e of(n&&(a=[...a,...t]),a))if(e&&k.IW[e.type])return!0;return!1}(),_=(0,f.t)("whiteboard.inline_menu.organize_dropdown_options_aria_label"),h=[...t,...n];return a.createElement(y.fu,{name:"organize_menu_dropdown"},a.createElement(I.Fn,{value:void 0,overrideMenuOpenState:{isOpenOverride:l,setIsOpenOverride:o},onChange:(e,t)=>{t.preventDefault(),t.stopPropagation(),i(e)},renderButton:({onClick:e,onKeyDown:t,ref:n})=>a.createElement(B,{disabled:!1,onClick:e,onKeyDown:e=>m(e,t),buttonRef:n,ariaWrapperId:r,trackingProperties:{text:"organize dropdown button"},dropdownContainsAiOption:p}),options:h,renderOption:G,OptionWrapper:function({children:e}){return a.createElement("div",{className:"organize_actions_control--flexColumn--p-Sra","aria-label":_,id:r,role:"listbox",tabIndex:-1,"data-fullscreen-intercept":!0},e)},positionX:e=>e.x,popoverClassName:"organize_actions_control--popover--l143N",additionalContentsTop:a.createElement("div",{className:g.cx.mt4.$}),additionalContentsBottom:a.createElement("div",{className:g.cx.mt4.$})}))}let B=(0,y.tf)(function({onClick:e,onKeyDown:t,buttonRef:n,ariaWrapperId:i,disabled:o,dropdownContainsAiOption:s}){let u=(0,r.wA)(),m=(0,c.md)(M).data,g=(0,S.CI)(),[h,b]=a.useState(0),C=(0,f.t)("whiteboard.inline_menu.organize_dropdown_button_aria_label");return a.createElement(N.$n,{tooltip:o?w.w:void 0,tooltipType:o?v.Ib.SPECIAL:void 0,onClick:o?d.lQ:()=>{e(),s&&u(E.b({[R]:!0}))},disabled:o,onKeyDown:t,ariaControls:i,ref:n,recordingKey:"inline_menu_organize_dropdown_button",testId:"inline_menu_organize_dropdown_button",caret:"down",role:"combobox",onboardingKey:x.Su,ariaLabel:C,buttonStyle:{width:"auto",paddingRight:24},buttonChildrenStyle:{justifyContent:"initial",width:"initial"}},a.createElement("div",{className:l()("organize_actions_control--withBadge--2qE6m")},a.createElement("div",{className:"organize_actions_control--buttonIconContainer--7BE5y"},a.createElement(_.B,{svg:L.A,className:l()("organize_actions_control--svgIcon--Y27OU",{"organize_actions_control--svgIconDisabled--siNy6":o})})),(0,f.tx)("whiteboard.inline_menu.organize_button_text"),!m&&g&&a.createElement(y.fu,{name:"organize_actions_onboarding_badge"},a.createElement("div",{style:{paddingLeft:8},ref:e=>{b(e?.offsetWidth||h)}},a.createElement(p.Ex,{text:(0,f.t)("whiteboard.inline_menu.ai_quick_actions_onboarding_badge_2"),color:p.zE.FIGJAM,size:p.vj.SMALL,className:"organize_actions_control--onboardingBadge--NG7o-",dataTestId:"figjam_ai_quick_actions_onboarding_badge"})))))});function U({isFocused:e}){let t=(0,S.v1)(),n=(0,k.PX)(),r=(0,k.QL)(),i=(0,c.md)(k.u3),[l,o]=(0,c.fp)(k.UI),[s,u]=(0,c.fp)(k.kw),[m,p]=a.useState(!1);return(a.useEffect(()=>{let e=setTimeout(()=>{p(!0)},200);return()=>{clearTimeout(e)}},[p]),a.useEffect(()=>{e?u(!0):u(!1)},[e,u]),t)?a.createElement("div",{onMouseEnter:()=>{m&&o(!0)},onMouseLeave:()=>{o(!1)},"data-testid":"whiteboard_organize_sort_sub_menu_wrapper"},a.createElement(V,{key:`${k.Uj.OPEN_CLUSTER_BY_MORE_MENU}-menu-option`,id:`${k.Uj.OPEN_CLUSTER_BY_MORE_MENU}-menu-option`,type:k.Uj.OPEN_CLUSTER_BY_MORE_MENU,displayText:(0,f.t)("whiteboard.inline_menu.sort_by_dropdown_button_text_2"),svgSrc:A.A,isAiOption:!1,disabled:!1,onKeyDown:()=>{o(!l)},onClick:()=>{l||o(!l)},isFocused:e,trackingProperties:{text:P(k.Uj.OPEN_CLUSTER_BY_MORE_MENU)},isSubMenu:!0,ariaLabel:(0,f.t)("whiteboard.inline_menu.arrange_stickies_dropdown_button_aria_label")}),l&&a.createElement(y.fu,{name:"figjam_organize_sort_stickies_sub_menu"},a.createElement("div",{className:"organize_actions_control--submenuPopover--3lKOZ"},a.createElement("div",{className:"organize_actions_control--submenuContainer--TmBn7"},a.createElement(N.W1,null,a.createElement("div",{className:g.cx.flex.flexColumn.py6.w200.$,"aria-label":(0,f.t)("whiteboard.inline_menu.arrange_stickies_dropdown_button_aria_label"),role:"listbox",tabIndex:-1,"data-fullscreen-intercept":!0},r.map((e,t)=>G({value:e,onClick:()=>n(e),onKeyDown:d.lQ,isSelected:!1,isFocused:i===t})))))))):null}let G=e=>{let{value:t,onClick:n,id:r,isFocused:i,onKeyDown:l}=e;if(!t)return null;let o=(0,k.Ef)(t),{type:c,disabled:d,displayText:u,svgSrc:m,disabledTooltipText:p,tooltipOverrides:_}=t,g=P(c);return c===k.Uj.OPEN_CLUSTER_BY_MORE_MENU?(0,s.kc)().figjam_cluster_by_more?a.createElement(U,{key:k.Uj.OPEN_CLUSTER_BY_MORE_MENU,isFocused:i}):null:a.createElement(V,{key:`${c}-menu-option`,id:r,type:c,displayText:u,svgSrc:m,disabledTooltipText:p,tooltipOverrides:_,isAiOption:o,disabled:d,onClick:n,onKeyDown:l,isFocused:i,trackingProperties:{text:g}})};function K(e){return`inline_menu_organize_option-${e}`}let V=(0,y.tf)(function({id:e,type:t,displayText:n,svgSrc:r,disabledTooltipText:i,disabled:s,onClick:c,onKeyDown:u,isFocused:p,tooltipOverrides:E,isAiOption:y,isSubMenu:b,ariaLabel:w}){let S=E?.tooltip||(s&&i?i:""),x=E?.tooltipType||v.Ib.TEXT;return a.createElement(a.Fragment,null,a.createElement("div",{id:e,className:l()("organize_actions_control--optionContainer--RtoCw",{"organize_actions_control--optionContainerDisabled--mB76I":s,"organize_actions_control--optionContainerIsFocused--8x27n":p}),"aria-label":w??n,"aria-selected":"false",role:"option",tabIndex:-1,"data-tooltip":S,"data-tooltip-type":x,"data-tooltip-tip-align-left":!0,"data-tooltip-text-left":!0,"data-tooltip-show-right":!0,"data-tooltip-offset-x":6},a.createElement(C.c$,{disabled:s,recordingKey:K(t),"data-testid":K(t),dataTestId:K(t),key:`option-${t}`,value:t,height:32,fullWidth:!0,svg:r,style:{width:"95%",marginBottom:0},children:a.createElement("div",{className:g.cx.flex.justifyBetween.itemsCenter.gap8.$},a.createElement(h.E,{truncate:!0},n),y&&a.createElement(T.G,{location:"INLINE_TOOLBAR",overrideText:(0,f.t)("whiteboard.inline_menu.organize_quick_actions_button_beta_badge_text"),hoverStyleClassName:l()({"organize_actions_control--aiBetaBadge--F1z9L":!s}),onMouseUp:e=>{e.stopPropagation()},onPointerUp:()=>{(0,m.Lf)(D)||o.Ay.unsafeRedirect(D,"_blank")}}),b&&a.createElement("span",{className:g.cx.pl4.mr0.$},a.createElement(_.B,{svg:O.A}))),additionalStylesClassName:void 0,selected:!1,onMouseUp:s?d.lQ:c,onKeyDown:s?d.lQ:u,ignoreCheck:!0})))})},425187:(e,t,n)=>{n.d(t,{f:()=>o});var a=n(587670),r=n(534611),i=n(288706);let l={positionRelativeToSelection:a.cfv.ABOVE,currentlySelectedNode:{nodeId:r.AD,ariaLabel:null}},o=(0,i.um)(l,(e,t)=>{switch(t.type){case"SET_POS_RELATIVE_TO_SELECTION":return{...e,positionRelativeToSelection:t.payload};case"SET_CURRENTLY_SELECTED_NODE":return{...e,currentlySelectedNode:t.payload};default:return e}})},667867:(e,t,n)=>{n.d(t,{I:()=>r,p:()=>a});class a{constructor(){this.lastCursorLocations={},this.CANVAS_SPACE_SPEED_THRESHOLD=2,this.cursorHandsOnRight=new Set}getHandsOnRight(){return this.cursorHandsOnRight}updateSingleCursor(e,t,n){let a=this.lastCursorLocations[n];a&&(t.x>a.x+this.CANVAS_SPACE_SPEED_THRESHOLD&&this.cursorHandsOnRight.add(n),t.x<a.x-this.CANVAS_SPACE_SPEED_THRESHOLD&&this.cursorHandsOnRight.delete(n)),e[n]=t}updateCursors(e,t,n,a){let r={};for(let n of e)t.toString()!==n.sessionId&&this.updateSingleCursor(r,n.mouse.canvasSpacePosition,n.sessionId);for(let e of(n&&this.updateSingleCursor(r,{x:a.x,y:a.y},t.toString()),this.lastCursorLocations=r,this.cursorHandsOnRight.keys()))r[e]||this.cursorHandsOnRight.delete(e)}}function r(e,t){return e.has(t)}},767686:(e,t,n)=>{n.d(t,{p:()=>c});var a=n(411855),r=n(629019),i=n.n(r),l=n(799569),o=n(163023),s=n(672517);let c=(0,a.memo)(function(e){let{leftContent:t,content:n,rightContent:r,trackingContext:i="DLT Banner",onClose:o,isFloatingBanner:c}=e;return a.createElement(s.fu,{name:i},a.createElement("div",{className:c?"dlt_banner--floatingBanner--Gv-Xd":"dlt_banner--banner--nGI-J"},a.createElement(d,{leftContent:t}),a.createElement(u,{content:n}),r,o?a.createElement(l.Jn,{className:"dlt_banner--closeButton--aDZdN",onClick:o,trackingEventName:"dlt_banner_closed",recordingKey:"dltBanner",dataTestId:"dltBannerCloseButton"}):null))}),d=(0,a.memo)(function(e){let{icon:t,text:n}=e.leftContent??{},r=t&&a.createElement("div",{className:"dlt_banner--icon--gtxyL"},a.createElement(o.B,{svg:t})),l=n&&a.createElement("b",null,n);return a.createElement("div",{className:i()("dlt_banner--leftContent--5Yk4A text--fontPos12--YsUAh text--_fontBase--QdLsd",n&&t?"dlt_banner--leftContentIconAndText--QjRmB":n?"dlt_banner--leftContentOnlyText--4VC-I":t?"dlt_banner--leftContentOnlyIcon--Nb45Y":"dlt_banner--leftContentEmpty--dXeoN")},r,l)}),u=(0,a.memo)(function(e){let{content:t}=e;return a.createElement("div",{className:"dlt_banner--mainContent--eTkSu text--fontPos12--YsUAh text--_fontBase--QdLsd"},t)})},421769:(e,t,n)=>{n.d(t,{X:()=>Y,O:()=>et});var a=n(411855),r=n(188507),i=n(587670),l=n(629019),o=n.n(l),s=n(320063),c=n(966712),d=n(374626),u=n(860601),m=n(563706),p=n(939863),_=n(931828),g=n(456104),f=n(594524),h=n(723239),E=n(582947),y=n(356390),b=n(617453),v=n(29680),C=n(397065),w=n(916108),T=n(538918),S=n(888699),x=n(554905),k=n(794272),N=n(738269);n(251960);var I=n(373119),A=n(318812),O=n(279145),L=n(340514),D=n(746806),R=n(601538);n(15839),n(653734);var M=n(463546);function P({dismissModal:e,targetKey:t=R.oi.ZOOM}){let n=(0,r.wA)(),l=(0,k.R)(({mirror:{appModel:e}})=>e.showUi),o=(0,A.Um)(),s=(0,a.useRef)(!1),c=(0,I.q)(),d=(0,a.useCallback)(()=>{e(),n(N.oB())},[e,n]);return(0,a.useEffect)(()=>{s.current&&!(0,O.TY)(o)&&e()},[e,o]),(0,a.useEffect)(()=>{if(c&&!s.current){if((0,O.TY)(o))n(N.ho({type:O.pi,data:{selectionToUpdate:i.m7W.PREFERENCES}}));else{let e=l?42:0;n(N.j7({type:O.pi,data:{targetRect:{top:0,right:e,bottom:e,left:0,width:e,height:e},togglePreferences:!0},hasOwnEscKeyHandler:!0}))}s.current=!0}},[n,o,c,l]),a.createElement(L.rq,{isShowing:!0,trackingContextName:"new_user_pan_zoom_pref_tooltip",onClose:d,targetKey:t,emphasized:!0,title:(0,p.tx)("mouse_controls_modal.new_user.title"),description:(0,p.tx)("mouse_controls_modal.new_user.description"),arrowPosition:D.F_.LEFT_TITLE})}var F=n(767686);function B(){return a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.80079 15.0786V10.2857H5.80079V15.0786L6.94724 13.9322L7.65434 14.6393L5.30079 16.9928L2.94724 14.6393L3.65434 13.9322L4.80079 15.0786Z",fill:"#8638E5"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.80077 20.2071V25H4.80077V20.2071L3.65433 21.3536L2.94722 20.6464L5.30077 18.2929L7.65433 20.6464L6.94722 21.3536L5.80077 20.2071Z",fill:"#8638E5"}),a.createElement("path",{d:"M8.22183 11.7644C7.44078 10.9834 7.44078 9.71705 8.22183 8.93601C9.00288 8.15496 10.2692 8.15496 11.0503 8.93601L18.8284 16.7142L16 19.5426L8.22183 11.7644Z",fill:"white"}),a.createElement("path",{d:"M8.57538 11.4109C7.9896 10.8251 7.9896 9.87535 8.57538 9.28956C9.16117 8.70377 10.1109 8.70377 10.6967 9.28956L18.1213 16.7142L16 18.8355L8.57538 11.4109Z",stroke:"black",strokeOpacity:"0.9"}),a.createElement("path",{d:"M13.171 12.4716C12.39 11.6905 12.39 10.4242 13.171 9.64316C13.9521 8.86211 15.2184 8.86211 15.9995 9.64316L20.9492 14.5929L18.1208 17.4213L13.171 12.4716Z",fill:"white"}),a.createElement("path",{d:"M13.5246 12.118C12.9388 11.5322 12.9388 10.5825 13.5246 9.99671C14.1104 9.41093 15.0601 9.41093 15.6459 9.99671L20.2421 14.5929L18.1208 16.7142L13.5246 12.118Z",stroke:"black",strokeOpacity:"0.9"}),a.createElement("path",{d:"M15.9992 11.0574C15.2181 10.2764 15.2181 9.01002 15.9992 8.22897C16.7802 7.44793 18.0466 7.44793 18.8276 8.22897L23.0702 12.4716L20.2418 15.3L15.9992 11.0574Z",fill:"white"}),a.createElement("path",{d:"M16.3527 10.7038C15.7669 10.1181 15.7669 9.16831 16.3527 8.58253C16.9385 7.99674 17.8883 7.99674 18.474 8.58253L22.3631 12.4716L20.2418 14.5929L16.3527 10.7038Z",stroke:"black",strokeOpacity:"0.9"}),a.createElement("path",{d:"M19.5353 10.3502C18.7543 9.5692 18.7543 8.30287 19.5353 7.52182C20.3164 6.74077 21.5827 6.74077 22.3637 7.52182L25.1922 10.3502L22.3637 13.1787L19.5353 10.3502Z",fill:"white"}),a.createElement("path",{d:"M19.8889 9.9967C19.3031 9.41091 19.3031 8.46116 19.8889 7.87538C20.4746 7.28959 21.4244 7.28959 22.0102 7.87538L24.4851 10.3502L22.3637 12.4716L19.8889 9.9967Z",stroke:"black",strokeOpacity:"0.9"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.9665 21.544C9.78861 21.9888 10.0272 22.4908 10.4843 22.6337L16.5493 24.5303C19.3396 25.4028 22.3727 25.0002 24.8389 23.43L25.2536 23.0152L25.256 23.0144L25.8992 22.3711C29.0234 19.2469 29.0234 14.1816 25.8992 11.0574L25.1921 10.3502L16 19.5423L16.3172 19.8596C16.4619 20.0043 16.3217 20.2472 16.124 20.1942L13.8709 19.5897C12.2623 19.1581 10.585 19.9977 9.9665 21.544Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.9665 21.544C9.78861 21.9888 10.0272 22.4908 10.4843 22.6337L16.5493 24.5303C19.3396 25.4028 22.3727 25.0002 24.8389 23.43L25.2536 23.0152L25.256 23.0143L28.0205 20.2498C29.9732 18.2972 29.9732 15.1313 28.0205 13.1787L25.1921 10.3502L16 19.5423L16.3172 19.8596C16.4619 20.0043 16.3217 20.2472 16.124 20.1942L13.8709 19.5897C12.2623 19.1581 10.585 19.9977 9.9665 21.544Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.8709 19.5897C12.2623 19.1581 10.585 19.9977 9.9665 21.544C9.78861 21.9888 10.0272 22.4908 10.4843 22.6337L16.5493 24.5303C19.3396 25.4028 22.3727 25.0002 24.8389 23.43L25.2536 23.0152L25.256 23.0143L28.0205 20.2498C29.9732 18.2972 29.9732 15.1313 28.0205 13.1787L25.1921 10.3502L16 19.5423L16.3172 19.8596C16.462 20.0043 16.3217 20.2472 16.124 20.1942L13.8709 19.5897ZM17.3246 19.6318L25.1921 11.7644L27.3134 13.8858C28.8755 15.4479 28.8755 17.9806 27.3134 19.5427L24.7125 22.1436L24.7101 22.1445L24.2113 22.6433C22.0103 24.008 19.3228 24.3498 16.8477 23.5758L10.9742 21.7391C11.4561 20.7767 12.5552 20.2721 13.6117 20.5555L15.8649 21.16C16.8504 21.4244 17.5982 20.4627 17.3246 19.6318Z",fill:"black",fillOpacity:"0.9"}),a.createElement("rect",{x:"15.292",y:"17.4214",width:"2",height:"4",transform:"rotate(-45 15.292 17.4214)",fill:"white"}),a.createElement("path",{d:"M16.2617 18.3853C16.7382 18.8834 17.3334 19.5012 17.3555 19.7388L17.7643 19.562L16.2617 18.3853Z",fill:"white"}),a.createElement("rect",{x:"17.4141",y:"15.3",width:"2",height:"4",transform:"rotate(-45 17.4141 15.3)",fill:"white"}),a.createElement("rect",{x:"19.5352",y:"13.1787",width:"2",height:"4",transform:"rotate(-45 19.5352 13.1787)",fill:"white"}),a.createElement("rect",{x:"23.0703",y:"13.8859",width:"2",height:"4",transform:"rotate(-45 23.0703 13.8859)",fill:"white"}),a.createElement("rect",{x:"21.6562",y:"11.0574",width:"2",height:"4",transform:"rotate(-45 21.6562 11.0574)",fill:"white"}),a.createElement("path",{d:"M20.9492 20.2498L28.0203 13.1787V13.1787C29.9729 15.1313 29.9729 18.2971 28.0203 20.2498L25 23.27L24.5 23.5L20.9492 20.2498Z",fill:"white"}),a.createElement("path",{d:"M27.3137 13.8858C27.509 14.0811 27.8256 14.0811 28.0208 13.8858C28.2161 13.6906 28.2161 13.374 28.0208 13.1787L27.3137 13.8858ZM24.4853 11.0574L27.3137 13.8858L28.0208 13.1787L25.1924 10.3503L24.4853 11.0574Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.8514 23.4906L24.0517 23.882L23.6121 22.9839L24.4118 22.5924L24.8514 23.4906Z",fill:"white"}),a.createElement("path",{d:"M24.8516 23.4907C25.0996 23.3693 25.2022 23.0698 25.0808 22.8218C24.9594 22.5738 24.6599 22.4711 24.4119 22.5926L24.8516 23.4907ZM24.0519 23.8822L24.8516 23.4907L24.4119 22.5926L23.6122 22.984L24.0519 23.8822Z",fill:"black",fillOpacity:"0.9"}))}function U(){return a.createElement("svg",{width:"17",height:"24",viewBox:"0 0 17 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"16.8",height:"24",rx:"8.4",fill:"white"}),a.createElement("rect",{x:"0.5",y:"0.5",width:"15.8",height:"23",rx:"7.9",stroke:"black",strokeOpacity:"0.9"}),a.createElement("rect",{x:"6",y:"4.80005",width:"4.8",height:"8.4",rx:"2.4",fill:"#9747FF"}),a.createElement("rect",{x:"6.5",y:"5.30005",width:"3.8",height:"7.4",rx:"1.9",stroke:"black",strokeOpacity:"0.9"}))}function G(){return a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("rect",{width:"16.8007",height:"24",rx:"8.40036",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 25.2197 6.58252)",fill:"white"}),a.createElement("rect",{x:"-0.61236",y:"0.353557",width:"15.8007",height:"23",rx:"7.90036",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 24.1074 6.43607)",stroke:"black",strokeOpacity:"0.9"}),a.createElement("path",{d:"M14.0391 15.7617L21.5291 17.7686L23.2014 14.0238L22.377 9.61005L19.7149 6.10149L16.8341 5.32959L14.0391 15.7617Z",fill:"#9747FF"}),a.createElement("rect",{x:"-0.61236",y:"0.353557",width:"15.8007",height:"23",rx:"7.90036",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 24.1074 6.43607)",stroke:"black",strokeOpacity:"0.9"}),a.createElement("rect",{width:"4.8002",height:"8.4",rx:"2.4001",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 18.1826 9.66602)",fill:"white"}),a.createElement("rect",{x:"-0.61236",y:"0.353557",width:"3.8002",height:"7.4",rx:"1.9001",transform:"matrix(-0.965926 -0.258819 -0.258795 0.965932 17.0703 9.51957)",stroke:"black",strokeOpacity:"0.9"}))}function K(){return a.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.3535 6.50001H19V7.50001H21.3535L20.2071 8.64645L20.9142 9.35356L23.2677 7.00001L20.9142 4.64645L20.2071 5.35356L21.3535 6.50001Z",fill:"#8638E5"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.64649 6.50001H10V7.50001H7.64649L8.79293 8.64645L8.08583 9.35356L5.73227 7.00001L8.08583 4.64645L8.79293 5.35356L7.64649 6.50001Z",fill:"#8638E5"}),a.createElement("path",{d:"M11 8C11 6.89543 11.8954 6 13 6V6C14.1046 6 15 6.89543 15 8V19H11V8Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14 18V8C14 7.44772 13.5523 7 13 7C12.4477 7 12 7.44772 12 8V18H14ZM13 6C11.8954 6 11 6.89543 11 8V19H15V8C15 6.89543 14.1046 6 13 6Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{d:"M8 13.8C8 13.3582 8.35817 13 8.8 13C10.5673 13 12 14.4327 12 16.2V27H10L8.71523 23.7881C8.24275 22.6069 8 21.3464 8 20.0742V13.8Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11 26V16.2C11 15.0524 10.1213 14.11 9 14.009V20.0742C9 21.2192 9.21848 22.3536 9.64371 23.4167L10.677 26H11ZM10 27L8.71523 23.7881C8.24275 22.6069 8 21.3464 8 20.0742V13.8C8 13.3582 8.35817 13 8.8 13C10.5673 13 12 14.4327 12 16.2V27H10Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{d:"M14 6C14 4.89543 14.8954 4 16 4V4C17.1046 4 18 4.89543 18 6V19H14V6Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17 18V6C17 5.44772 16.5523 5 16 5C15.4477 5 15 5.44772 15 6V18H17ZM16 4C14.8954 4 14 4.89543 14 6V19H18V6C18 4.89543 17.1046 4 16 4Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{d:"M17 13C17 11.8954 17.8954 11 19 11V11C20.1046 11 21 11.8954 21 13V19H17V13Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20 18V13C20 12.4477 19.5523 12 19 12C18.4477 12 18 12.4477 18 13V18H20ZM19 11C17.8954 11 17 11.8954 17 13V19H21V13C21 11.8954 20.1046 11 19 11Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{d:"M20 15C20 13.8954 20.8954 13 22 13V13C23.1046 13 24 13.8954 24 15V19H20V15Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 18V15C23 14.4477 22.5523 14 22 14C21.4477 14 21 14.4477 21 15V18H23ZM22 13C20.8954 13 20 13.8954 20 15V19H24V15C24 13.8954 23.1046 13 22 13Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{d:"M11 19H24V21.7689C24 22.5866 23.8997 23.4011 23.7014 24.1943L23 27H11V19Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23 20H12V26H22.2192L22.7313 23.9518C22.9098 23.2379 23 22.5048 23 21.7689V20ZM23 27H11V19H24V21.7689C24 22.5866 23.8997 23.4011 23.7014 24.1943L23 27Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{d:"M11 19H22V27H11V19Z",fill:"white"}),a.createElement("path",{d:"M15 17C15 17.2761 14.7761 17.5 14.5 17.5C14.2239 17.5 14 17.2761 14 17C14 16.7239 14.2239 16.5 14.5 16.5C14.7761 16.5 15 16.7239 15 17Z",fill:"white"}),a.createElement("path",{d:"M12 19C12 19.2761 11.7761 19.5 11.5 19.5C11.2239 19.5 11 19.2761 11 19C11 18.7239 11.2239 18.5 11.5 18.5C11.7761 18.5 12 18.7239 12 19Z",fill:"white"}),a.createElement("path",{d:"M18 17C18 17.2761 17.7761 17.5 17.5 17.5C17.2239 17.5 17 17.2761 17 17C17 16.7239 17.2239 16.5 17.5 16.5C17.7761 16.5 18 16.7239 18 17Z",fill:"white"}),a.createElement("path",{d:"M21 18C21 18.2761 20.7761 18.5 20.5 18.5C20.2239 18.5 20 18.2761 20 18C20 17.7239 20.2239 17.5 20.5 17.5C20.7761 17.5 21 17.7239 21 18Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M14.5 17.5C14.7761 17.5 15 17.2761 15 17C15 16.7239 14.7761 16.5 14.5 16.5C14.2239 16.5 14 16.7239 14 17C14 17.2761 14.2239 17.5 14.5 17.5Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.5 19.5C11.7761 19.5 12 19.2761 12 19C12 18.7239 11.7761 18.5 11.5 18.5C11.2239 18.5 11 18.7239 11 19C11 19.2761 11.2239 19.5 11.5 19.5Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.5 17.5C17.7761 17.5 18 17.2761 18 17C18 16.7239 17.7761 16.5 17.5 16.5C17.2239 16.5 17 16.7239 17 17C17 17.2761 17.2239 17.5 17.5 17.5Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.5 18.5C20.7761 18.5 21 18.2761 21 18C21 17.7239 20.7761 17.5 20.5 17.5C20.2239 17.5 20 17.7239 20 18C20 18.2761 20.2239 18.5 20.5 18.5Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{d:"M10 26H23V26.6C23 26.8209 22.8209 27 22.6 27H10.4C10.1791 27 10 26.8209 10 26.6V26Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.6941 24.8912C9.95025 24.788 10.2415 24.9121 10.3447 25.1682L10.84 26.3984C10.9431 26.6545 10.8191 26.9458 10.5629 27.049C10.3068 27.1521 10.0155 27.0281 9.91238 26.7719L9.41704 25.5417C9.3139 25.2856 9.43794 24.9943 9.6941 24.8912Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.0231 24.8459C22.7554 24.7781 22.4835 24.9402 22.4157 25.2079L22.0949 26.4752C22.0271 26.7429 22.1892 27.0148 22.4569 27.0826C22.7246 27.1503 22.9965 26.9883 23.0643 26.7206L23.3851 25.4533C23.4529 25.1856 23.2908 24.9136 23.0231 24.8459Z",fill:"white"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.6941 24.8912C9.95025 24.788 10.2415 24.9121 10.3447 25.1682L10.84 26.3984C10.9431 26.6545 10.8191 26.9458 10.5629 27.049C10.3068 27.1521 10.0155 27.0281 9.91238 26.7719L9.41704 25.5417C9.3139 25.2856 9.43794 24.9943 9.6941 24.8912Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M23.0231 24.8459C22.7554 24.7781 22.4835 24.9402 22.4157 25.2079L22.0949 26.4752C22.0271 26.7429 22.1892 27.0148 22.4569 27.0826C22.7246 27.1503 22.9965 26.9883 23.0643 26.7206L23.3851 25.4533C23.4529 25.1856 23.2908 24.9136 23.0231 24.8459Z",fill:"black",fillOpacity:"0.9"}),a.createElement("path",{d:"M20 18H23V21H20V18Z",fill:"white"}),a.createElement("path",{d:"M12 17H15V21H12V17Z",fill:"white"}),a.createElement("path",{d:"M16 17H19V21H16V17Z",fill:"white"}),a.createElement("path",{d:"M21 16H23V21H21V16Z",fill:"white"}),a.createElement("path",{d:"M18 16H20V26H18V16Z",fill:"white"}),a.createElement("path",{d:"M15 16H17V26H15V16Z",fill:"white"}),a.createElement("path",{d:"M12 16H14V26H12V16Z",fill:"white"}))}let V="figjam_pan_zoom_onboarding--icon--TaGJG",H="figjam_pan_zoom_onboarding--bannerContainer--CsV0q",z={NEW_USER_PAN:"figjam_seen_new_user_dlt_pan",NEW_USER_ZOOM:"figjam_seen_new_user_dlt_zoom"};function W({children:e}){return a.createElement("span",{className:"figjam_pan_zoom_onboarding--boldedBannerText--Zx-EN"},e)}function j(e){let{onNext:t,onManualDismiss:n}=e,l=(0,r.wA)(),s=(0,a.useCallback)(()=>{l(_.b({[z.NEW_USER_ZOOM]:!0}))},[l]),c=(0,a.useCallback)(()=>{s(),n()},[s,n]),d=(0,a.useCallback)(()=>{s(),t()},[s,t]);return(0,a.useEffect)(()=>(i.glU.setUsedZoomAction(!1),y.Y5.fromFullscreen.on("zoomActionMessageForOnboarding",d),()=>{y.Y5.fromFullscreen.removeListener("zoomActionMessageForOnboarding",d)}),[l,d]),a.createElement(F.p,{trackingContext:"FigJam New User Zoom Banner",content:a.createElement("div",{className:H},(0,p.tx)("rcs.figjam_zoom.to_zoom_pinch_your_trackpad_or_hold_and_scroll",{boldTextPinch:a.createElement(a.Fragment,null,a.createElement("span",{className:o()("figjam_pan_zoom_onboarding--zoomIcon--efDh8",V)},a.createElement(B,null)),a.createElement(W,null,(0,p.tx)("rcs.figjam_zoom.to_zoom_pinch_your_trackpad_or_hold_and_scroll_bold_text_pinch"))),boldTextScroll:a.createElement(a.Fragment,null,a.createElement("span",{className:V},a.createElement(U,null)),a.createElement(W,null,(0,p.tx)("rcs.figjam_zoom.to_zoom_pinch_your_trackpad_or_hold_and_scroll_bold_text_scroll")))})),rightContent:a.createElement(q,{onChangePreferences:e.onChangePreferences}),onClose:c})}function $(e){let{onManualDismiss:t}=e,[n,l]=(0,a.useState)(!1),o=(0,r.wA)();(0,s.h)(()=>{setTimeout(()=>{l(!0)},1e3)});let c=(0,a.useCallback)(()=>{o(_.b({[z.NEW_USER_PAN]:!0}))},[o]),d=(0,a.useCallback)(()=>{c(),t()},[c,t]);return((0,a.useEffect)(()=>{if(n)return i.glU.setUsedPanAction(!1),y.Y5.fromFullscreen.on("panActionMessageForOnboarding",d),()=>{y.Y5.fromFullscreen.removeListener("panActionMessageForOnboarding",d)}},[o,n,d]),n)?a.createElement(F.p,{trackingContext:"FigJam New User Pan Banner",content:a.createElement("div",{className:H},(0,p.tx)("rcs.figjam_pan.move_instructions",{boldTextSwipe:a.createElement(a.Fragment,null,a.createElement("span",{className:V},a.createElement(K,null)),a.createElement(W,null,(0,p.tx)("rcs.figjam_pan.move_instructions_bold_text_swipe"))),boldTextRightClick:a.createElement(a.Fragment,null,a.createElement("span",{className:V},a.createElement(G,null)),a.createElement(W,null,(0,p.tx)("rcs.figjam_pan.hold_right_click")))})),rightContent:a.createElement(q,{onChangePreferences:e.onChangePreferences}),onClose:d}):null}function q({onChangePreferences:e}){return a.createElement("button",{onClick:e,className:"figjam_pan_zoom_onboarding--changePreferencesButton--0z5Xs text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,p.tx)("rcs.figjam_pan_zoom_change_prefs"))}function Y(){let e=(0,v.aV)(),t=(0,x.Td)(),n=(0,r.d4)(e=>e.isMakeSomethingV2Active);return t||e||n?null:a.createElement(ee,null)}let X=(0,E.r1)(z.NEW_USER_PAN),J=(0,E.r1)(z.NEW_USER_ZOOM),Z=(0,E.Fu)("figjam_editor_onboarded"),Q=[function(e){let{isOverlayShowing:t,next:n,complete:r,onChangePreferences:i}=e;return t?a.createElement(j,{onNext:n,onManualDismiss:r,onChangePreferences:i}):null},function(e){let{isOverlayShowing:t,complete:n,onChangePreferences:r}=e;return t?a.createElement($,{onNext:n,onManualDismiss:n,onChangePreferences:r}):null}];function ee(){let e=(0,d.md)(X),t=(0,d.md)(J),n=(0,d.md)(Z),r=(0,d.md)(h.Fy),i=(0,d.md)(h.g5),l=(0,d.md)(h.NT),o=(0,d.md)(S.w),[s,c]=(0,a.useState)(!1),p=(0,f.A)({numSteps:Q.length,onComplete:u.lQ}),{show:_,complete:E,isShowing:y}=(0,g.e)({overlay:M.eD$,priority:C.N.DEFAULT_MODAL},[e,t,n,r,i,l]);(0,a.useEffect)(()=>{let e=[S.tX.NOT_STARTED,S.tX.COMPLETED].includes(o),t=p.currentStep===Q.length-1;y||!e||t||_({canShow:(e,t,n,a,r,i)=>{let l=!m.Xb&&!m.aR,s=(0,T.d2)({emailValidatedAt:r,jobTitle:i});return![S.tX.USE_CASE_STEPS,S.tX.MODAL_SHOWING].includes(o)&&(!!n||s)&&!a&&!e&&!t&&l}})},[y,o,_,p.currentStep]);let b=(0,a.useCallback)(()=>{c(!0)},[c]),v=(0,a.useCallback)(()=>{c(!1)},[c]);return y?a.createElement(a.Fragment,null,a.createElement(w.U,{currentStep:p.currentStep,children:Q.map((e,t)=>a.createElement(e,{isOverlayShowing:p.currentStep===t,next:p.next,complete:E,onChangePreferences:b})),isShowing:!0}),s?a.createElement(P,{dismissModal:v,targetKey:1===p.currentStep?R.oi.PAN:R.oi.ZOOM}):null):null}function et(){return(0,c.kc)().figjam_nav_new_user_onboarding&&(0,b.UK)().scrollWheelZoom.getCopy()&&(0,b.UK)().rightClickPan.getCopy()}},48009:(e,t,n)=>{n.d(t,{b:()=>F,q:()=>W,xX:()=>V});var a=n(411855),r=n(188507),i=n(587670),l=n(629019),o=n.n(l),s=n(374626),c=n(192437),d=n(901536),u=n(47506),m=n(753643),p=n(801161),_=n(902139),g=n(988022),f=n(128765),h=n(369870),E=n(460289),y=n(694687),b=n(860178),v=n(336599),C=n(809073),w=n(498606),T=n(369394),S=n(867795),x=n(511080),k=n(123975),N=n(202232),I=n(297483),A=n(178911),O=n(931397),L=n(212981),D=n(333343),R=n(383847),M=n(509742),P=n(524639);let F="delightful-toolbar-universal-insert-button-icon",B=[{src:"https://static.figma.com/uploads/9cd2eb2ff31cb221dce81ca1e67aa51e12b24166",zIndex:0,width:50,height:50,translateStart:{x:42,y:36},rotateStart:-15,translateEnd:{x:42,y:36},rotateEnd:-15},{src:"https://static.figma.com/uploads/276fdbb8f6edbcb958f84235ebfc58b63eab0fc2",zIndex:1,width:50,height:50,translateStart:{x:95,y:36},rotateStart:15,translateEnd:{x:95,y:36},rotateEnd:15},{src:"https://static.figma.com/uploads/94db9cf93e2a26f927d5f1a7f066f8b045985011",zIndex:2,width:50,height:50,translateStart:{x:42,y:66},rotateStart:-10,translateEnd:{x:42,y:66},rotateEnd:-10},{src:"https://static.figma.com/uploads/004b50b1460d47029608e9aaa66c09c1c94c6741",zIndex:3,width:50,height:50,translateStart:{x:95,y:66},rotateStart:10,translateEnd:{x:95,y:66},rotateEnd:10}];function U({recentItems:e,toolbarIconScale:t,isModalOpen:n}){let r=(0,I.ws)(e);return a.createElement("div",{className:o()(M.z6,M.ac,P.JY),style:{width:112*t}},B.map((e,i)=>{var l,o;let s=r[i];return a.createElement(K,{key:s?.id||e.src,zIndex:5+e.zIndex,width:e.width*t,height:e.height*t,isModalOpen:n,transform:(l={x:e.translateStart.x*t,y:e.translateStart.y*t},o=e.rotateStart,`translate(calc(-50% + ${l.x}px), calc(-50% + ${l.y}px)) rotate(${o}deg)`)},s?a.createElement(O.E,{item:s,width:e.width*t,height:e.height*t,disableTooltips:!0}):a.createElement("img",{src:e.src,alt:"",className:P.VF}))}))}function G({onClick:e,isSelected:t,isHovered:n}){return a.createElement("div",{className:d.cx.flex.itemsCenter.justifyCenter.mx20.h40.w40.$},a.createElement(R.IB,{toolType:"universal-insert-collage",recordingKey:(0,N.hx)("universal-insert-plus"),isSelected:t,hasOpenSubmenu:!1,onClick:e,"data-tooltip-type":w.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt","data-tooltip-offset-y":-2},a.createElement(L.gd,{toolType:"universal-insert-collage",inactiveIcon:a.createElement(x.nX,null),hoveredIcon:a.createElement(x.ZH,null),activeIcon:a.createElement(x.cs,null),isSelected:t,isHovered:n})))}function K({zIndex:e,width:t,height:n,transform:r,isModalOpen:i,children:l}){return a.createElement("div",{className:o()(P.s,{[P.r3]:i}),style:{zIndex:e,width:t,height:n,transform:r}},a.createElement("div",{className:P.f_},l))}function V(e,t){let[n,r]=(0,a.useState)(!1),i=(0,a.useRef)(!1),l=(0,a.useRef)([]);return l.current=t,(0,a.useEffect)(()=>{e||i.current||(i.current=!0,async function(){let e=[];for(let t of l.current)t&&e.push(new Promise(e=>{let n=new Image;n.src=t,n.addEventListener("load",()=>e()),n.addEventListener("error",()=>e())}));await Promise.all(e),r(!0)}())},[e]),n}function H({toolbarIconScale:e}){let t=(0,b.TA)(),[n,l]=(0,a.useState)(!1),o=(0,r.wA)(),c=(0,I.NT)(),d=(0,s.md)(k.c),w=(0,E.XM)(),x=(0,y.sZ)(),L=(0,r.d4)(e=>e.universalInsertModal.showing),B=(0,f.fG)(),K=function(e,t){let n=(0,r.wA)();return(0,a.useCallback)(()=>{(0,u.YQ)({id:"figjam-saves"}),e?(n(_.KE()),i.glU.triggerActionInUserEditScope("set-tool-default",{source:N.fK})):(i.glU.triggerActionInUserEditScope("clear-tool",{source:N.fK}),n(p.jD()),n(_.En({initialX:0,initialY:0,initialTab:t?.stage!=="FULL"?S.p.MORE:void 0})),(0,g.Cu)({source:N.fK},"action_open_universal_insert_collage_modal"))},[e,t,n])}(L,d);(0,a.useEffect)(()=>{o(T.cd.fetchTemplatesMetadata({key:C.$A.FigJam,orgId:x?.id})),o(T.cd.fetchWidgetsMetadata({key:C.$A.FigJam})),l(!0)},[o,x?.id]);let H=(0,v.oh)(m.fC),z=(0,v.oh)(T.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:C.$A.FigJam})),W=(0,v.oh)(T.cd.fetchWidgetsMetadata.loadingKeyForPayload({key:C.$A.FigJam})),j=V(!n||H||z||W,c.map(e=>(0,O.h)(e,B,t??void 0)))?c.map(e=>e.id||"").sort((e,t)=>e.localeCompare(t)).join(""):"loading",$=w&&d?.stage==="MINIMIZED_ZERO"||d?.stage==="MINIMIZED"||d?.stage==="CUT_OFF";return a.createElement(D.XN,{alignment:"CENTER"},a.createElement(R.IB,{toolType:"universal-insert-collage",recordingKey:(0,N.hx)("universal-insert-collage"),isSelected:L,className:h.pb.isGoogleClassroomIntegration()?M.vy:M.qs,onClick:K,ariaLabel:"browse-all-resources-dlt",onboardingKey:A.yl,"data-does-not-dismiss-modal":!0,hasOpenSubmenu:L},t=>a.createElement(D.ti,{isSelected:t,noScaleAnimation:!0,isRightEdge:!0},a.createElement("div",{className:P.Ge,"data-onboarding-key":"figjam-saves","data-element-target":F,"data-cancel-insertable-resource-drag-and-drop":!0},!$&&a.createElement(U,{key:j,recentItems:c,toolbarIconScale:e,isModalOpen:L}),a.createElement(G,{onClick:K,isSelected:L,isHovered:t})))))}function z(){return a.createElement(D.XN,{alignment:"CENTER"},a.createElement("div",{"data-element-target":F,className:P.V6},a.createElement(A.Hm,null)))}let W=(0,a.memo)(function({toolbarIconScale:e}){return a.createElement(c.tH,{fallback:a.createElement(z,null),boundaryKey:"UniversalInsertCollage"},a.createElement(H,{toolbarIconScale:e}))})},963677:(e,t,n)=>{n.d(t,{s:()=>S});var a=n(411855),r=n(188507),i=n(634832),l=n(587670),o=n(629019),s=n.n(o),c=n(709103),d=n(323434),u=n(134288),m=n(966712),p=n(153234),_=n(522739),g=n(801161),f=n(428654),h=n(356390),E=n(774191),y=n(457025),b=n(457630),v=n(202232),C=n(219001),w=n(520325),T=n(509742);let S=a.memo(function({toolType:e,color:t,isSelected:n,onTap:o,onDragEnd:S,onDragStart:x,Icon:k,IconNoRef:N,toolbarIconScale:I,canvasToSvgScale:A,isDrawingSubmenuTool:O,isDragReversing:L,stickyAnimationState:D,isHovered:R,hoverOffsetAmount:M="DEFAULT",shapeStrokeStyleType:P}){let{state:F,dispatch:B}=a.useContext(C.nS),U=(0,r.wA)(),G=F.draggedTool===e,K=F.draggedToolCanCancel,[V,H]=a.useState(!1),[z,W]=a.useState(!1),[j,$]=a.useState(0),q=a.useRef(!1);a.useEffect(()=>{let e=e=>{"Escape"===e.key&&G&&(B({type:"end drag"}),q.current=!0,H(!1),$(j+1))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[j,G,e,B]),a.useEffect(()=>{let e=()=>{H(!1)};return document.addEventListener("pointerup",e),()=>{document.removeEventListener("pointerup",e)}},[H]),a.useEffect(()=>(G?document.body.classList.add(T.bz):document.body.classList.remove(T.bz),()=>{document.body.classList.remove(T.bz)}),[G]);let Y=a.useRef(null),X=(0,b.Pl)({subscribeToUpdates_expensive:G}),J=function(e){switch(e){case"NONE":return 0;case"STICKY":return -20;case"DRAWING":return -22;case"DRAWING_SUBMENU":case"DEFAULT":return -24}}(M),Z=a.useRef(null),Q=(0,c.d)(.5),ee=(0,c.d)(.5),[et,en]=a.useState(),ea=G?K?"whileDragShouldCancel":"whileDrag":"pencil"===e&&n?"hiddenPencil":V?"whileTap":O&&n?"selectedSubmenuTool":R?"whileHovering":"initial";if("connector"===e&&!G){let e=(0,E.oB)(f.F.parse(t));e.l>.9&&(t=f.F.formatHSLA({h:e.h,s:e.s,l:.9,a:e.a}))}return a.createElement(_.D8,{recordingKey:(0,v.hx)(`${e}.animatedIcon`),className:s()(T.ke,{[T.zO]:n,[T.bj]:R}),onPointerDown:()=>{if(H(!0),!w.T.RECORD_DETAILED_EVENTS)return p.aH},onPointerUp:()=>{if(H(!1),!w.T.RECORD_DETAILED_EVENTS)return p.aH},onTouchStart:e=>{e.preventDefault()},onTouchEnd:e=>{e.preventDefault(),!z&&F.shouldFinishClick&&o(),W(!1)},onContextMenu:e=>{e.preventDefault()}},a.createElement(d.N,{key:String(j)},a.createElement(u.P.div,{"data-testid":w.T.getMotionDivId(e),"data-test-animate-state":ea,style:{originX:Q,originY:ee},variants:{initial:{scale:1,y:0},selectedSubmenuTool:{y:J},whileTap:{y:J,scale:.93},whileDragShouldCancel:{y:J,scale:.93},whileDrag:{y:J,scale:X*(A||1)},whileHovering:{y:J},hiddenPencil:{y:72}},animate:ea,transition:{duration:.1,ease:[.12,.23,.5,1]},transformTemplate:(e,t)=>"translate3d(0px, 0px, 0) scale(1, 1)"===t?"none":t,drag:!!S,dragConstraints:{top:0,bottom:0,right:0,left:0},ref:Z,onDragStart:(t,n)=>{B({type:"start drag",tool:e}),q.current=!1,l.glU.triggerActionInUserEditScope("set-tool-default",{source:v.fK}),y.oW.trigger("action",l.KWd.CLEAR),U(g.jD());let a=Z.current;if(a){let e=a.getBoundingClientRect();Q.set((n.point.x-e.x)/e.width),ee.set((n.point.y-e.y)/e.height)}let r=Y.current;if(r){let e=r.closest("."+T.kl);(0,i.assertDev)(!!e,"Delightful tool can't find containing toolbar!"),en(e.getBoundingClientRect()),x&&x()}},onDrag:(e,t)=>{var n;et&&((n=t.point).x>=et.x&&n.x<=et.x+et.width&&n.y>=et.y||n.y>et.y+et.height)!==K&&B({type:"toggle drag cancellable"})},onDragEnd:(e,t)=>{if(W(!0),Q.set(.5),ee.set(.5),K){B({type:"cancel drag"}),H(!1);return}let n=Y.current;if(n){if(q.current)return;let t=n.getBoundingClientRect(),a=h.Y5.getViewportInfo(),r={x:t.left-a.x,y:t.top-a.y},i=(0,b.$$)(a,r),l=(0,b.$$)(a,{x:e.x-a.x,y:e.y-a.y});S&&S(i,l),B({type:"end drag"}),H(!1),$(j+1)}else(0,i.assertDev)(!1,"Delightful tool is missing the toolref!")},dragElastic:1},k?a.createElement(k,{color:t,toolbarIconScale:I,ref:Y,shouldAnimate:G,isReversing:L,stickyAnimationState:D,shapeStrokeProps:{isDragging:G,styleType:(0,m.kc)().figjam_dlt_shape_border&&void 0!==P?P:l.xbm.NONE,svgToCanvasScale:A&&I?1/(A*I):1}}):N)))})},178498:(e,t,n)=>{n.d(t,{s:()=>L,i:()=>D});var a=n(411855),r=n(587670),i=n(86625),l=n(629019),o=n.n(l),s=n(374626),c=n(456363),d=n(428654),u=n(29680),m=n(498606),p=n(511080),_=n(202232),g=n(219001),f=n(751025),h=n(963677),E=n(333343),y=n(383847),b=n(525040),v=n(42173),C=n(153234),w=n(694241),T=n(684690),S=n(225719),x=n(359964),k=n(948529),N=n(429898),I=n(509742);function A({recordingKey:e,isOpen:t}){let[n,i]=(0,s.fp)(c.qL),[l,o]=a.useState(!1),{openColorPalettePicker:u,closeColorPalettePicker:m}=(0,T.$J)(o),p=d.F.format(n);a.useEffect(()=>{m()},[t,m]);let g=e=>{i(e),r.glU.triggerActionInUserEditScope("set-tool-sticky",{source:_.fK})},f=e=>{g(e),O()},h=(0,T.Z9)(),y=h.type===w.Yv.CUSTOM,b=(0,v.TS)("sticky"),I=y?h.variations.sticky:b,A=(0,s.md)(S.Qv),L=!!A;return a.createElement(a.Fragment,null,a.createElement(E.br,{paddingRight:8,paddingLeft:8},a.createElement(N.V,{loadingPaletteCircleCount:A}),!L&&I.map((t,n)=>{let r=d.F.format(t),i=y?(0,v.AF)(n,"sticky"):(0,v.V_)(t,"sticky");return a.createElement(k.cd,{key:d.F.format(t)+"-"+n,size:"medium",value:t,selectionState:r===p?"selected":"unselected",paletteType:"sticky",background:"light",onClick:()=>f(t),tooltip:i,recordingKey:C.Pt(e,i)})}),a.createElement(x.s,{colorPalettePickerState:{openColorPalettePicker:u,closeColorPalettePicker:m,isColorPalettePickerOpen:l},defaultColorPaletteLength:b.length,recordingKey:C.Pt(e||"color-palettes","sticky")||"sticky",disabled:L,isInDltSubmenu:!0})))}let O=()=>{let e={duration:800,easing:"ease-out"},t={transform:"rotate(0) translate(0, 0)"},n=[t,{transform:"translate(32px, 32px) rotate(5deg) translate(0, -8px) translate(-32px, -32px)",offset:.1},{transform:"translate(32px, 32px) rotate(5deg) translate(0, -10px) translate(-32px, -32px)",offset:.35},t,{transform:"translate(-32px, 32px) rotate(-3deg) translate(32px, -32px) "},t,{transform:"translate(32px, 32px) rotate(1deg) translate(-32px, -32px) "},t];[I.eB,I.gz,I.Sk].forEach((t,a)=>{document.getElementsByClassName(t)[0].parentElement?.animate(n,{...e,...{delay:70*a}})})},L="sticky";function D({toolbarIconScale:e}){let t=(0,b.bu)(),n=(0,b.sT)(),l=(0,s.md)(c.qL),C=(0,u.aV)(),[w,T]=(0,a.useState)(!1),[S,x]=(0,a.useState)(!1),[k,N]=(0,a.useState)(p.kk.DEFAULT),O=240/p.rX,D=(0,v.zS)(l,"sticky"),R=d.F.format(l),M=C||!D?"rgba(230, 230, 230, 1)":(0,v.MV)(D,R),{state:P,dispatch:F}=(0,a.useContext)(g.nS),B=(0,a.useCallback)(()=>{n?r.glU.triggerActionInUserEditScope("set-tool-default",{source:_.fK}):(r.glU.triggerActionInUserEditScope("set-tool-sticky",{source:_.fK}),F({type:"open submenu",submenu:"sticky"}))},[n,F]),U=n||t||"shape"===P.submenu.tool,{isHovered:G,onMouseEnter:K,onMouseMove:V,onMouseLeave:H,onTouchStart:z,onTouchEnd:W}=(0,f.W)(B,U,!1),j=(0,a.useCallback)((e,t)=>{i.l7.user("drop-sticky-on-canvas",()=>r.glU.delightfulToolbarDropItemOntoCanvas(r.NLJ.STICKY,Math.round(e.x),Math.round(e.y),Math.round(t.x),Math.round(t.y))),T(!1),x(!1),N(p.kk.DEFAULT)},[]),$=(0,a.useCallback)(()=>{T(!0),k===p.kk.DEFAULT&&N(p.kk.INITIAL_DRAG_ON_DLT)},[]);(0,a.useEffect)(()=>{if("sticky"===P.draggedTool){let e=!P.draggedToolCanCancel;k===p.kk.INITIAL_DRAG_ON_DLT?e&&N(p.kk.DRAG_ON_CANVAS):k===p.kk.DRAG_ON_CANVAS?e||N(p.kk.DRAG_RETURN_TO_DLT):k===p.kk.DRAG_RETURN_TO_DLT&&e&&N(p.kk.DRAG_ON_CANVAS)}else P.draggedTool||N(p.kk.DEFAULT)},[P,w,N,k]);let q=p.UJ,Y=(0,a.useRef)(null);return a.createElement(E.XN,{alignment:"CENTER",innerRef:Y},a.createElement(E.ti,{isSelected:G||n,noScaleAnimation:!0},a.createElement(y.J7,{toolType:"sticky",recordingKey:(0,_.hx)("sticky"),isSelected:n,className:I.qf,onClick:B,"data-tooltip-type":m.Ib.LOOKUP,"data-tooltip":"set-tool-sticky",tooltipOffset:{offsetY:-26,offsetX:10},onboardingKey:L,isHovered:G,onMouseEnter:K,onMouseMove:V,onMouseLeave:H,onTouchStart:z,onTouchEnd:W,hasOpenSubmenu:n},a.createElement("div",{className:o()(I.z6,I.ac)},a.createElement(h.s,{toolType:"sticky",color:M,isSelected:n,onTap:B,onDragStart:$,onDragEnd:j,Icon:q,toolbarIconScale:e,canvasToSvgScale:O,isDragReversing:S,isHovered:G,stickyAnimationState:k,hoverOffsetAmount:"STICKY"}),a.createElement(q,{toolOrder:2,color:M,toolbarIconScale:e,shouldAnimate:w,isReversing:S,stickyAnimationState:k}),a.createElement(q,{toolOrder:3,color:M,toolbarIconScale:e,shouldAnimate:w,isReversing:S,stickyAnimationState:k}),a.createElement(q,{toolOrder:4,color:M,toolbarIconScale:e,shouldAnimate:w,isReversing:S,stickyAnimationState:k})))),a.createElement(E.Qw,{isOpen:n,fadedOut:G},a.createElement(A,{isOpen:n,recordingKey:(0,_.hx)("stickySubmenu")})))}},429898:(e,t,n)=>{n.d(t,{V:()=>o});var a=n(411855),r=n(629019),i=n.n(r),l=n(358145);let o=a.memo(function({loadingPaletteCircleCount:e}){let t=(0,l.ZC)(e),n=t&&!e,r=n?t:e;return a.createElement("div",{className:i()("dlt_submenu_palette_skeleton--skeletonCircleContainer--zJP5v",{"dlt_submenu_palette_skeleton--isFadingOut--X7mcE":n})},[...Array(r)].map((e,t)=>a.createElement("div",{className:"dlt_submenu_palette_skeleton--skeletonCircleWrapper--jqySu",key:"skeleton-palette-"+t},a.createElement("div",{className:i()("dlt_submenu_palette_skeleton--skeletonCircle--S16JP",{"dlt_submenu_palette_skeleton--loading--NXGYD":!n}),style:{animationDelay:`${.1*t}s`}}))))})},333343:(e,t,n)=>{n.d(t,{Qu:()=>b,Qw:()=>f,XN:()=>g,XI:()=>E,br:()=>h,ti:()=>y});var a=n(411855),r=n(629019),i=n.n(r),l=n(374626);n(522739);var o=n(47506),s=n(939863),c=n(385326),d=n(116723),u=n(684690);n(511080),n(712546);var m=n(557558),p=n(677859),_=n(948529);function g({alignment:e,children:t,onMouseEnter:n,onMouseLeave:r,innerRef:l}){return a.createElement("div",{className:i()("dlt_submenu--submenuContainer--M4ufs delightful_toolbar--passthruLayout--gz5r2",{"dlt_submenu--submenuLeftAligned--ADsMj":"LEFT"===e,"dlt_submenu--submenuCenterAligned--ryltJ":"CENTER"===e,"dlt_submenu--submenuRightAligned--kUi5D":"RIGHT"===e}),onMouseEnter:n,onMouseLeave:r,ref:l},t)}function f({isOpen:e,children:t,fadedOut:n,id:r,testId:s,optimizeForCompactSize:u,overflowChildren:p}){let _=(0,l.md)(c.D);a.useEffect(()=>{e&&_&&!m.l.has(_)&&(0,o.YQ)({id:d.X,properties:{requester:d.Y.FigjamDLTSubmenuOpen}})},[e,_]);let g=a.createElement("div",{className:"dlt_submenu--submenuItems--FJHkH"},t);return a.createElement("div",{className:i()("dlt_submenu--submenu--EmU1-",{"dlt_submenu--compactSize--yJCzh":!!u,"dlt_submenu--isOpen--sH4-4":e,"dlt_submenu--fadedOut--rHzEu":n}),"data-testid":s,"aria-hidden":!0,id:r},p?g:a.createElement("div",{className:"dlt_submenu--submenuCornerClipping--rhbch"},g))}function h({children:e,disabled:t,paddingLeft:n,paddingRight:r,height:l,shouldVerticallyCenter:o,shouldClipAndRoundTopRightCorner:s}){return a.createElement("div",{className:i()("dlt_submenu--submenuGroup--KSxIU",{"dlt_submenu--submenuGroupDisabled--BPix8":t,"dlt_submenu--submenuGroupVerticallyCentered---T24I":o,"dlt_submenu--submenuRightCornerClipping--ccFVw":s}),style:{paddingLeft:n,paddingRight:r,height:l}},e)}function E(){return a.createElement("div",{className:"dlt_submenu--submenuDivider--IwlsI"})}function y({isSelected:e,children:t,explicitWidth:n,shouldCenterContent:r,noScaleAnimation:l,isRightEdge:o}){return a.createElement("div",{style:{width:n},className:i()("dlt_submenu--toolBackground--St0Y2 delightful_toolbar--passthruLayout--gz5r2",{"dlt_submenu--toolBackgroundScalingHighlight--LTx6Y":!l,"dlt_submenu--toolBackgroundHighlighted--aUWM5":e,"dlt_submenu--toolBackgroundCenterContent--p466V":r,"dlt_submenu--toolBackgroundRightEdgeHighlight--hqdJJ":!!o})},t)}function b({currentColor:e,paletteType:t,showPopover:n,setShowPopover:r,alwaysUseCurrentColorInSwatch:i,recordingKey:l}){let o=(0,u.iN)(e,t),c=e&&(o||n||i);return a.createElement(p.$n,{onClick:()=>{r(!n)},active:n?"LOUD":"NONE",recordingKey:l,buttonStyle:{"--menu-padding-right":"4px",marginLeft:"4px",padding:"4px 4px 4px 0px"},isNewSubmenu:!0,tabIndex:-1},c?a.createElement(_.cd,{key:"custom-color",size:"medium",value:e,selectionState:n?"unselected":"selected_custom",background:"light",paletteType:"base",tooltip:(0,s.t)("whiteboard.colors.custom")}):a.createElement(_.ZI,{swatchStyle:{boxShadow:"0px 0px 0px 1px rgba(0, 0, 0, 0.2) inset"}}))}},557558:(e,t,n)=>{n.d(t,{l:()=>r});var a=n(463546);let r=new Set([a.lLk.id,a.kp0.id,a.Njd.id,a.MJs.id,a.zoI.id,a.wRI.id,a.Kze.id])},161735:(e,t,n)=>{n.d(t,{Cb:()=>K,E0:()=>B,Ef:()=>F,IW:()=>A,PX:()=>V,Pn:()=>P,QL:()=>G,UI:()=>O,Uj:()=>I,Wb:()=>M,Y:()=>R,Yh:()=>U,kw:()=>D,u3:()=>L,z1:()=>H});var a=n(411855),r=n(86625),i=n(966712),l=n(38580),o=n(374626),s=n(646240),c=n(498750),d=n(860601),u=n(782112),m=n(939863),p=n(483990),_=n(356390),g=n(227944),f=n(498606),h=n(468829),E=n(391993),y=n(632084),b=n(47750),v=n(230646),C=n(477173),w=n(425187),T=n(322027),S=n(62573),x=n(607492),k=n(939206),N=n(754556),I=(e=>(e.SUMMARIZE="summarize",e.CLUSTER="cluster_by_topic",e.TIDY_UP="tidy_up",e.WRAP_IN_SECTION="wrap_in_section",e.CLUSTER_BY_AUTHOR="cluster_by_author",e.CLUSTER_BY_COLOR="cluster_by_color",e.CLUSTER_BY_STAMP_COUNT="cluster_by_stamp_count",e.CLUSTER_BY_STAMP_TYPE="cluster_by_stamp_type",e.OPEN_CLUSTER_BY_MORE_MENU="open_cluster_by_more_menu",e.CREATE_FIGMA_SLIDES_OUTLINE="create_figma_slides_outline",e))(I||{});let A={summarize:!0,cluster_by_topic:!0,create_figma_slides_outline:!0,tidy_up:!1,wrap_in_section:!1,cluster_by_author:!1,cluster_by_color:!1,cluster_by_stamp_count:!1,cluster_by_stamp_type:!1,open_cluster_by_more_menu:!1},O=(0,l.eU)(!1),L=(0,l.eU)(null),D=(0,l.eU)(!1),R=(0,l.eU)(!1);function M(){let e=P(),[t,n]=(0,o.fp)(R),r=(0,s.Xr)(D);return a.useCallback(()=>{e(),n(!1),r(!1)},[e,n,r])}function P(){let[e,t]=(0,o.fp)(L),[n,r]=(0,o.fp)(O);return a.useCallback(()=>{t(null),r(!1)},[t,r])}function F(e){return!!e&&(A[e.type]||!1)}function B(){let e=(0,v.v1)();return!!(0,i.kc)().figjam_cluster_by_more&&e}function U(){let e=(0,u.q8)(),t=(0,i.kc)().figjam_synthesize_handbrake||!1,n=[],a=(0,v.V)()&&!e,r=(0,v.cF)(),l=(0,E.IR)(),o=(0,v.v1)(),s=B(),c=(0,g.Zr)("create-section-from-selection"),d=(0,g.Zr)("tidy-up"),_=(0,g.Zr)("align-top"),y=(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_disabled_tooltip",{minSelectedStickies:2}),b={tooltip:h.w,tooltipType:f.Ib.SPECIAL},C=!!(0,i.kc)().figjam_cluster_by_more;return s&&n.push({type:"open_cluster_by_more_menu",disabled:!1,isInClusterSubmenu:!1,displayText:"",disabledTooltipText:""}),a&&(C||n.push({type:"cluster_by_topic",disabled:!o||t,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_button"),svgSrc:T.A,disabledTooltipText:y,tooltipOverrides:t?b:void 0,isInClusterSubmenu:!1}),n.push({type:"summarize",disabled:!r||t,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_summarize_button"),svgSrc:S.A,disabledTooltipText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_summarize_disabled_tooltip",{minSelectedStickies:2}),tooltipOverrides:t?b:void 0,isInClusterSubmenu:!1})),d&&_&&n.push({type:"tidy_up",disabled:!1,displayText:(0,p.A)("tidy-up"),svgSrc:N.A,tooltipOverrides:{tooltip:"tidy-up",tooltipType:f.Ib.LOOKUP}}),c&&n.push({type:"wrap_in_section",disabled:!1,displayText:(0,p.A)("create-section-from-selection"),svgSrc:k.A,tooltipOverrides:{tooltip:"create-section-from-selection",tooltipType:f.Ib.LOOKUP}}),l&&n.push({type:"create_figma_slides_outline",disabled:t,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_create_slides_outline"),svgSrc:x.A,disabledTooltipText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_create_slides_outline_disabled_tooltip",{minSelectedStickies:2}),tooltipOverrides:t?b:void 0,isInClusterSubmenu:!1}),n}function G(){return[...function(){let e=(0,u.q8)(),t=(0,v.v1)();if(e)return[];let n=!!(0,i.kc)().figjam_synthesize_handbrake,a=[],r=(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_disabled_tooltip",{minSelectedStickies:2}),l={tooltip:h.w,tooltipType:f.Ib.SPECIAL};return a.push({type:"cluster_by_topic",disabled:!t||n,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_topic_2"),disabledTooltipText:r,tooltipOverrides:n?l:void 0,isInClusterSubmenu:!0}),a}(),...function(){let e=(0,v.v1)(),t=(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_disabled_tooltip",{minSelectedStickies:2}),n=[];return n.push({type:"cluster_by_color",disabled:!e,isInClusterSubmenu:!0,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_color_2"),disabledTooltipText:t}),n.push({type:"cluster_by_author",disabled:!e,isInClusterSubmenu:!0,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_author_2"),disabledTooltipText:t}),n.push({type:"cluster_by_stamp_count",disabled:!e,isInClusterSubmenu:!0,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_stamp_count_2"),disabledTooltipText:t}),n.push({type:"cluster_by_stamp_type",disabled:!e,isInClusterSubmenu:!0,displayText:(0,m.t)("whiteboard.inline_menu.ai_quick_actions_sort_stickies_by_stamp_type_2"),disabledTooltipText:t}),n}()].filter(e=>e?.isInClusterSubmenu&&"open_cluster_by_more_menu"!==e.type)}function K(){return!!U().find(e=>e?.type==="summarize"||e?.type==="cluster_by_topic"||e?.type==="open_cluster_by_more_menu")}function V(){let e=(0,o.md)(w.f).positionRelativeToSelection,{summarizeCanvasSelection:t}=(0,C.ss)(e,void 0,"INLINE_TOOLBAR"),{clusterCanvasSelection:n}=(0,b.f)(),{cluster:a}=(0,b.J)(y.Gq,!1),{cluster:i}=(0,b.J)(y.MS,!1),{cluster:l}=(0,b.J)(y.bM,!0),{cluster:s}=(0,b.J)(y.ON,!1),c=(0,E.iX)(),u=M();return e=>{let o=d.lQ,m="";if(e){switch(e.type){case"cluster_by_author":o=a,m="inline-menu-organize-cluster-by-author";break;case"cluster_by_color":o=i,m="inline-menu-organize-cluster-by-color";break;case"cluster_by_stamp_count":o=l,m="inline-menu-organize-cluster-by-stamp-count";break;case"cluster_by_stamp_type":o=s,m="inline-menu-organize-cluster-by-stamp-type";break;case"summarize":o=t,m="inline-menu-organize-summarize";break;case"create_figma_slides_outline":o=c,m="inline-menu-organize-create-figma-slides-outline";break;case"cluster_by_topic":o=n,m="inline-menu-organize-cluster";break;case"tidy_up":o=()=>_.Y5.triggerActionInUserEditScope("tidy-up"),m="inline-menu-organize-tidy-up";break;case"wrap_in_section":o=()=>_.Y5.triggerActionInUserEditScope("create-section-from-selection"),m="inline-menu-organize-wrap-in-section"}r.l7.user(m,o),"open_cluster_by_more_menu"!==e.type&&u()}}}function H(){let[e,t]=(0,o.fp)(O),[n,a]=(0,o.fp)(L),[r,i]=(0,o.fp)(D),l=G(),s=V();return(i,o)=>{if(i.shiftKey||i.altKey||i.ctrlKey){o(i);return}if(e)switch(i.keyCode){case c.Uz.ESCAPE:t(!1),a(null);break;case c.Uz.DOWN_ARROW:null===n?a(0):n+1<l.length&&a(n+1);break;case c.Uz.UP_ARROW:null===n?a(l.length-1):n-1>=0&&a(n-1);break;case c.Uz.RIGHT_ARROW:null===n&&a(0);break;case c.Uz.LEFT_ARROW:a(null),t(!1);break;case c.Uz.ENTER:null!==n&&n<l.length&&(i.preventDefault(),i.stopPropagation(),s(l[n]))}else if(r)switch(i.keyCode){case c.Uz.RIGHT_ARROW:t(!0);break;case c.Uz.LEFT_ARROW:t(!1);break;default:o(i)}else o(i)}}},649958:(e,t,n)=>{n.d(t,{XZ:()=>m,fk:()=>_,oc:()=>p,k0:()=>g});var a=n(411855),r=n(188507),i=n(346124),l=n(776621);let o=500,s="audioplayinvoked",c="audioplaysuccess";class d{constructor(e){this.play=({onSuccess:e,onNoInteractionFailure:t})=>{let n=()=>{window.removeEventListener(s,this.audioPlayInvokedHandler),window.removeEventListener(c,this.audioPlaySuccessHandler)};window.dispatchEvent(this.audioPlayInvokedEvent),this.audio.play().then(()=>{if(this.shouldBlockPlay){this.audio.pause(),this.isAttemptingToPlay=!1;return}this.lastPlayedTimestamp=Date.now(),window.dispatchEvent(this.audioPlaySuccessEvent),this.isFadingOut?this.fadeOut({}):(this.internalVolumeMultiplier=0,this.fadeIn({fadeInLength:1e3})),e&&e(),this.isAttemptingToPlay=!1,n()}).catch(e=>{if(this.isAttemptingToPlay=!1,"NotAllowedError"===e.name&&t){t();return}if(e.message.toLowerCase().includes("interrupted by a new load request")){(0,l.ED)("FigJam MusicPlayer","Benign race condition: new track was requested while the promise to play the previous track was resolving (no user impact)");return}throw Error(`Failed to play music in the FigJam timer: ${e}`)})},this.playLoadingAudio=()=>{this.loadingAudio.currentSrc&&this.loadingAudio.play().catch(e=>{if("NotAllowedError"!==e.name)throw Error(`Failed to play loading music in the FigJam timer: ${e}`)})},this.stopLoadingAudio=()=>{this.loadingAudio.currentSrc&&(this.loadingAudio.pause(),this.setTimestamp(0,this.loadingAudio))},this.isPaused=()=>this.audio.paused||this.shouldBlockPlay,this.isPlaying=()=>!this.isPaused(),this.setTimestamp=(e,t)=>{if(t){if(t.seeking||t.readyState<=0){console.warn("Already seeking or audio isn't ready, can't set timestamp.");return}t.fastSeek?t.fastSeek(e):t.currentTime=e}},this.playAtTimestamp=({src:e,timestamp:t,onSuccess:n,onFailure:a})=>{this.isAttemptingToPlay=!1;let r=()=>{this.setTimestamp(t/1e3%this.audio.duration,this.audio),this.play({onSuccess:n,onNoInteractionFailure:a})};window.addEventListener(s,this.audioPlayInvokedHandler),window.addEventListener(c,this.audioPlaySuccessHandler),this.playLoadingAudio(),this.setSource(""),this.shouldBlockPlay=!1,this.audio.oncanplaythrough=()=>{this.audio.oncanplaythrough=null,this.handleVolumeUpdate(),r()},this.setSource(e)},this.playPreview=({src:e,timestampMs:t=0,playLengthMs:n,fadeLengthMs:a=o})=>{let r=this.hasSource();this.playAtTimestamp({src:e,timestamp:t,onSuccess:()=>{this.isPaused()||!r?this.internalVolumeMultiplier=0:this.clearFadeTimeouts(),this.fadeIn({}),this.internalFadeOutTimeoutId=window.setTimeout(()=>{this.internalFadeOutTimeoutId=0,this.fadeOut({fadeOutLength:a,shouldStopWhenFadedOut:!0,targetVolumeMultiplier:0})},n+2*a)}})},this.stopPreview=()=>{this.internalFadeOutTimeoutId&&clearTimeout(this.internalFadeOutTimeoutId),this.internalFadeOutTimeoutId=0,this.stop()},this.clearFadeTimeouts=()=>{this.internalFadeOutTimeoutId&&clearTimeout(this.internalFadeOutTimeoutId),this.internalFadeInTimeoutId&&clearTimeout(this.internalFadeInTimeoutId)},this.resetFades=()=>{this.clearFadeTimeouts(),this.internalVolumeMultiplier=1,this.isFadingOut=!1,this.isFadingIn=!1},this.pause=()=>{this.stopLoadingAudio(),this.audio.paused||this.shouldBlockPlay||this.isAttemptingToPlay||(this.audio.pause(),this.clearFadeTimeouts()),this.shouldBlockPlay=!0},this.stop=()=>{this.stopLoadingAudio(),this.resetFades(),this.shouldBlockPlay=!0,this.audio.pause(),this.audio.removeAttribute("src")},this.hasSource=()=>""!==this.audio.currentSrc,this.setSource=e=>{this.audio.src=e},this.setIsMuted=e=>{this.audio.muted=e,this.loadingAudio.muted=e,this.isMuted=e,this.handleVolumeUpdate()},this.getCurrentVolume=()=>this.isMuted?0:(0,i.clamp)(this.externalVolume*this.internalVolumeMultiplier,0,1),this.handleVolumeUpdate=()=>{this.audio.volume=this.getCurrentVolume()},this.setVolume=e=>{this.externalVolume=e,this.handleVolumeUpdate()},this.fadeOut=({fadeOutLength:e=5e3,shouldStopWhenFadedOut:t=!1,targetVolumeMultiplier:n=0,callbackWhenDoneFading:a,resumeFadingIfInterrupted:r=!0})=>{this.clearFadeTimeouts();let i=1/(e/50),l=()=>{!this.audio.paused&&(this.internalVolumeMultiplier>n?(this.internalVolumeMultiplier-=i,this.handleVolumeUpdate(),this.internalFadeOutTimeoutId=window.setTimeout(l,50)):(this.internalFadeOutTimeoutId=0,t&&this.stop(),this.handleVolumeUpdate(),this.isFadingOut=!1,a&&a()))};r&&(this.isFadingOut=!0),l()},this.fadeIn=({fadeInLength:e=1e3,callbackWhenDoneFading:t})=>{this.clearFadeTimeouts();let n=1/(e/50),a=()=>{!this.audio.paused&&(this.internalVolumeMultiplier<1?(this.internalVolumeMultiplier+=n,this.handleVolumeUpdate(),this.internalFadeInTimeoutId=window.setTimeout(a,50)):(this.internalFadeInTimeoutId=0,this.handleVolumeUpdate(),this.isFadingIn=!1,t&&t()))};this.isFadingIn=!0,a()},this.isAttemptingToPlay=!1,this.audio=new Audio,this.audio.src="",this.audio.loop=!0,this.loadingAudio=new Audio,e&&e.loadingPlaybackUrl&&(this.loadingAudio.src=e.loadingPlaybackUrl),this.loadingAudio.loop=!0,this.audioPlayInvokedEvent=new Event(s),this.audioPlayInvokedHandler=()=>{this.isAttemptingToPlay=!0},this.audioPlaySuccessEvent=new Event(c),this.audioPlaySuccessHandler=()=>{this.loadingAudio.currentSrc&&this.loadingAudio.pause(),this.isAttemptingToPlay=!1},this.externalVolume=.7,this.isMuted=!1,this.isFadingOut=!1,this.isFadingIn=!1,this.shouldBlockPlay=!1,this.internalVolumeMultiplier=1,this.internalFadeOutTimeoutId=0,this.internalFadeInTimeoutId=0,this.lastPlayedTimestamp=null;let t=e?.timeUpdateListener;t&&this.audio.addEventListener("timeupdate",()=>t(this.audio))}}var u=n(318137);let m="unmute-timer-music";function p(e){let[t]=a.useState(()=>e?.previousPlayerInstance||new d(e)),n=(0,r.d4)(t=>"StandaloneMusic"===e.musicSource?t.music.volume:t.timer.volume),i=(0,r.d4)(t=>"StandaloneMusic"===e.musicSource?t.music.isMuted:t.timer.isMuted);return a.useEffect(()=>{t.setVolume(n/100)},[n,t]),a.useEffect(()=>{t.setIsMuted(i)},[i,t]),t}function _(){let e=(0,r.d4)(e=>e.music.music);return!e?.isPaused&&!e?.isStopped}function g(){let e=(0,r.d4)(e=>e.music.music),t=e?.selectedSongID||"",n=(0,u.N)(t),a=_(),i=n&&n.album_art;return!a||!i}},318137:(e,t,n)=>{n.d(t,{N:()=>l});var a=n(188507),r=n(966712),i=n(411189);let l=e=>(0,a.d4)(t=>{let n=((0,r.kc)().figjam_more_tracks_listen?t.music.allSongs:t.music.activeSongs).filter(t=>e===t.song_id);return n.length?n[0]:void 0},i.eB)},973721:(e,t,n)=>{n.d(t,{mS:()=>T,XD:()=>w,Us:()=>v});var a=n(411855),r=n(188507),i=n(629019),l=n.n(i),o=n(864089),s=n(163023),c=n(29680),d=n(318137);function u({useLightShadow:e}){return a.createElement("svg",{width:"96",height:"96",viewBox:"0 0 96 96",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{height:"100%",width:"100%",filter:e?"drop-shadow(0px 0.325px 0.813px rgba(0, 0, 0, 0.15)) drop-shadow(0px 1.625px 2.6px rgba(0, 0, 0, 0.12)) drop-shadow(0px 0px 0.081px rgba(0, 0, 0, 0.12))":"drop-shadow(0px 1.625px 4.062500476837158px rgba(0, 0, 0, 0.15)) drop-shadow(0px 8.125000953674316px 13px rgba(0, 0, 0, 0.12)) drop-shadow(0px 0px 0.40625px rgba(0, 0, 0, 0.12))"}},a.createElement("mask",{id:"mask0_134_226",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"96",height:"96"},a.createElement("circle",{cx:"48",cy:"48",r:"48",fill:"black"}),a.createElement("circle",{cx:"48",cy:"48",r:"48",fill:"url(#paint0_radial_134_226)"}),a.createElement("circle",{cx:"48",cy:"48",r:"47.1875",stroke:"black",strokeOpacity:"0.8",strokeWidth:"1.625"})),a.createElement("g",{mask:"url(#mask0_134_226)"},a.createElement("circle",{cx:"48",cy:"48",r:"48",fill:"black"}),a.createElement("circle",{cx:"48",cy:"48",r:"48",fill:"url(#paint1_radial_134_226)"}),a.createElement("circle",{cx:"48",cy:"48",r:"47.1875",stroke:"black",strokeOpacity:"0.3",strokeWidth:"1.625"}),a.createElement("circle",{cx:"47.9999",cy:"48",r:"48.3438",stroke:"url(#paint2_linear_134_226)",strokeWidth:"0.8125"}),a.createElement("circle",{cx:"47.9999",cy:"48",r:"45.0938",stroke:"url(#paint3_linear_134_226)",strokeWidth:"0.8125"}),a.createElement("circle",{cx:"47.9999",cy:"48",r:"41.8438",stroke:"url(#paint4_linear_134_226)",strokeWidth:"0.8125"}),a.createElement("circle",{cx:"47.9999",cy:"48",r:"38.5938",stroke:"url(#paint5_linear_134_226)",strokeWidth:"0.8125"}),a.createElement("circle",{cx:"47.9999",cy:"48",r:"35.3438",stroke:"url(#paint6_linear_134_226)",strokeWidth:"0.8125"}),a.createElement("circle",{cx:"47.9999",cy:"48",r:"32.0938",stroke:"url(#paint7_linear_134_226)",strokeWidth:"0.8125"}),a.createElement("g",{filter:"url(#filter0_f_134_226)"},a.createElement("path",{d:"M47.6379 42.7921L50.2388 118.707L-34.6776 45.6123L47.6379 42.7921Z",fill:"url(#paint8_linear_134_226)"})),a.createElement("g",{filter:"url(#filter1_f_134_226)"},a.createElement("path",{d:"M56.3805 43.3806L56.3805 -32.5788L138.744 43.3806L56.3805 43.3806Z",fill:"url(#paint9_linear_134_226)"}))),a.createElement("defs",null,a.createElement("filter",{id:"filter0_f_134_226",x:"-42.8026",y:"34.6671",width:"101.166",height:"92.1648",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),a.createElement("feGaussianBlur",{stdDeviation:"4.0625",result:"effect1_foregroundBlur_134_226"})),a.createElement("filter",{id:"filter1_f_134_226",x:"48.2555",y:"-40.7038",width:"98.6138",height:"92.2094",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),a.createElement("feGaussianBlur",{stdDeviation:"4.0625",result:"effect1_foregroundBlur_134_226"})),a.createElement("radialGradient",{id:"paint0_radial_134_226",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(48 48) rotate(135) scale(65.7609 27.1741)"},a.createElement("stop",{stopColor:"white",stopOpacity:"0.63"}),a.createElement("stop",{offset:"0.66129",stopColor:"white",stopOpacity:"0.17"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),a.createElement("radialGradient",{id:"paint1_radial_134_226",cx:"0",cy:"0",r:"1",gradientUnits:"userSpaceOnUse",gradientTransform:"translate(48 48) rotate(135) scale(65.7609 27.1741)"},a.createElement("stop",{stopColor:"white",stopOpacity:"0.63"}),a.createElement("stop",{offset:"0.66129",stopColor:"white",stopOpacity:"0.17"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),a.createElement("linearGradient",{id:"paint2_linear_134_226",x1:"96.7498",y1:"96.75",x2:"-0.750201",y2:"-0.75003",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),a.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),a.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),a.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),a.createElement("linearGradient",{id:"paint3_linear_134_226",x1:"93.4998",y1:"93.5",x2:"2.49981",y2:"2.49997",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),a.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),a.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),a.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),a.createElement("linearGradient",{id:"paint4_linear_134_226",x1:"90.2498",y1:"90.25",x2:"5.74982",y2:"5.74997",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),a.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),a.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),a.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),a.createElement("linearGradient",{id:"paint5_linear_134_226",x1:"86.9998",y1:"87",x2:"8.99983",y2:"8.99997",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),a.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),a.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),a.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),a.createElement("linearGradient",{id:"paint6_linear_134_226",x1:"83.7498",y1:"83.75",x2:"12.2498",y2:"12.25",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),a.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),a.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),a.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),a.createElement("linearGradient",{id:"paint7_linear_134_226",x1:"80.4998",y1:"80.5",x2:"15.4998",y2:"15.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"white",stopOpacity:"0.05"}),a.createElement("stop",{offset:"0.394591",stopColor:"white",stopOpacity:"0.12"}),a.createElement("stop",{offset:"0.498177",stopColor:"white",stopOpacity:"0.2"}),a.createElement("stop",{offset:"0.60488",stopColor:"white",stopOpacity:"0.12"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.05"})),a.createElement("linearGradient",{id:"paint8_linear_134_226",x1:"11.6492",y1:"45.2351",x2:"48.238",y2:"80.972",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"white",stopOpacity:"0"}),a.createElement("stop",{offset:"0.452124",stopColor:"white",stopOpacity:"0.1"}),a.createElement("stop",{offset:"0.539969",stopColor:"white",stopOpacity:"0.48"}),a.createElement("stop",{offset:"0.635517",stopColor:"white",stopOpacity:"0.1"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})),a.createElement("linearGradient",{id:"paint9_linear_134_226",x1:"92.4318",y1:"42.1712",x2:"57.088",y2:"5.20249",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"white",stopOpacity:"0"}),a.createElement("stop",{offset:"0.452124",stopColor:"white",stopOpacity:"0.1"}),a.createElement("stop",{offset:"0.539969",stopColor:"white",stopOpacity:"0.48"}),a.createElement("stop",{offset:"0.635517",stopColor:"white",stopOpacity:"0.1"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"}))))}function m(){return a.createElement("svg",{width:"45",height:"46",viewBox:"0 0 45 46",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("circle",{cx:"13.5002",cy:"8",r:"1.5",fill:"url(#paint0_linear_1414_55682)"}),a.createElement("circle",{cx:"19.5001",cy:"8",r:"1.5",fill:"url(#paint1_linear_1414_55682)"}),a.createElement("circle",{cx:"25.4994",cy:"8",r:"1.5",fill:"url(#paint2_linear_1414_55682)"}),a.createElement("circle",{cx:"31.5001",cy:"8",r:"1.5",fill:"url(#paint3_linear_1414_55682)"}),a.createElement("circle",{cx:"7.50049",cy:"14",r:"1.5",fill:"url(#paint4_linear_1414_55682)"}),a.createElement("circle",{cx:"7.50049",cy:"8",r:"1.5",fill:"url(#paint5_linear_1414_55682)"}),a.createElement("circle",{cx:"1.5",cy:"14",r:"1.5",fill:"url(#paint6_linear_1414_55682)"}),a.createElement("circle",{cx:"43.4999",cy:"14",r:"1.5",fill:"url(#paint7_linear_1414_55682)"}),a.createElement("circle",{cx:"13.5002",cy:"14",r:"1.5",fill:"url(#paint8_linear_1414_55682)"}),a.createElement("circle",{cx:"19.5001",cy:"14",r:"1.5",fill:"url(#paint9_linear_1414_55682)"}),a.createElement("circle",{cx:"25.4994",cy:"14.0002",r:"1.5",fill:"url(#paint10_linear_1414_55682)"}),a.createElement("circle",{cx:"31.5001",cy:"14",r:"1.5",fill:"url(#paint11_linear_1414_55682)"}),a.createElement("circle",{cx:"37.5002",cy:"14",r:"1.5",fill:"url(#paint12_linear_1414_55682)"}),a.createElement("circle",{cx:"37.5002",cy:"8",r:"1.5",fill:"url(#paint13_linear_1414_55682)"}),a.createElement("circle",{cx:"7.50049",cy:"20",r:"1.5",fill:"url(#paint14_linear_1414_55682)"}),a.createElement("circle",{cx:"1.5",cy:"20",r:"1.5",fill:"url(#paint15_linear_1414_55682)"}),a.createElement("circle",{cx:"43.4999",cy:"20",r:"1.5",fill:"url(#paint16_linear_1414_55682)"}),a.createElement("circle",{cx:"13.5002",cy:"20",r:"1.5",fill:"url(#paint17_linear_1414_55682)"}),a.createElement("circle",{cx:"19.5001",cy:"20",r:"1.5",fill:"url(#paint18_linear_1414_55682)"}),a.createElement("circle",{cx:"25.4994",cy:"20",r:"1.5",fill:"url(#paint19_linear_1414_55682)"}),a.createElement("circle",{cx:"31.5001",cy:"20",r:"1.5",fill:"url(#paint20_linear_1414_55682)"}),a.createElement("circle",{cx:"37.5002",cy:"20",r:"1.5",fill:"url(#paint21_linear_1414_55682)"}),a.createElement("circle",{cx:"7.50049",cy:"26",r:"1.5",fill:"url(#paint22_linear_1414_55682)"}),a.createElement("circle",{cx:"1.5",cy:"26",r:"1.5",fill:"url(#paint23_linear_1414_55682)"}),a.createElement("circle",{cx:"43.4999",cy:"26",r:"1.5",fill:"url(#paint24_linear_1414_55682)"}),a.createElement("circle",{cx:"13.5002",cy:"26",r:"1.5",fill:"url(#paint25_linear_1414_55682)"}),a.createElement("circle",{cx:"19.5001",cy:"26",r:"1.5",fill:"url(#paint26_linear_1414_55682)"}),a.createElement("circle",{cx:"25.4994",cy:"25.9998",r:"1.5",fill:"url(#paint27_linear_1414_55682)"}),a.createElement("circle",{cx:"31.5001",cy:"26",r:"1.5",fill:"url(#paint28_linear_1414_55682)"}),a.createElement("circle",{cx:"37.5002",cy:"26",r:"1.5",fill:"url(#paint29_linear_1414_55682)"}),a.createElement("circle",{cx:"7.50049",cy:"32",r:"1.5",fill:"url(#paint30_linear_1414_55682)"}),a.createElement("circle",{cx:"7.50049",cy:"38",r:"1.5",fill:"url(#paint31_linear_1414_55682)"}),a.createElement("circle",{cx:"1.5",cy:"32",r:"1.5",fill:"url(#paint32_linear_1414_55682)"}),a.createElement("circle",{cx:"43.4999",cy:"32",r:"1.5",fill:"url(#paint33_linear_1414_55682)"}),a.createElement("circle",{cx:"13.5002",cy:"32",r:"1.5",fill:"url(#paint34_linear_1414_55682)"}),a.createElement("circle",{cx:"19.5001",cy:"32",r:"1.5",fill:"url(#paint35_linear_1414_55682)"}),a.createElement("circle",{cx:"25.4994",cy:"32",r:"1.5",fill:"url(#paint36_linear_1414_55682)"}),a.createElement("circle",{cx:"31.5001",cy:"32",r:"1.5",fill:"url(#paint37_linear_1414_55682)"}),a.createElement("circle",{cx:"37.5002",cy:"32",r:"1.5",fill:"url(#paint38_linear_1414_55682)"}),a.createElement("circle",{cx:"37.5002",cy:"38",r:"1.5",fill:"url(#paint39_linear_1414_55682)"}),a.createElement("circle",{cx:"13.5002",cy:"38",r:"1.5",fill:"url(#paint40_linear_1414_55682)"}),a.createElement("circle",{cx:"19.5001",cy:"38",r:"1.5",fill:"url(#paint41_linear_1414_55682)"}),a.createElement("circle",{cx:"25.4994",cy:"38",r:"1.5",fill:"url(#paint42_linear_1414_55682)"}),a.createElement("circle",{cx:"31.5001",cy:"38",r:"1.5",fill:"url(#paint43_linear_1414_55682)"}),a.createElement("circle",{cx:"13.5002",cy:"44",r:"1.5",fill:"url(#paint44_linear_1414_55682)"}),a.createElement("circle",{cx:"19.5001",cy:"44",r:"1.5",fill:"url(#paint45_linear_1414_55682)"}),a.createElement("circle",{cx:"25.4994",cy:"44",r:"1.5",fill:"url(#paint46_linear_1414_55682)"}),a.createElement("circle",{cx:"31.5001",cy:"44",r:"1.5",fill:"url(#paint47_linear_1414_55682)"}),a.createElement("circle",{cx:"13.5002",cy:"2",r:"1.5",fill:"url(#paint48_linear_1414_55682)"}),a.createElement("circle",{cx:"19.5001",cy:"2",r:"1.5",fill:"url(#paint49_linear_1414_55682)"}),a.createElement("circle",{cx:"25.4994",cy:"2",r:"1.5",fill:"url(#paint50_linear_1414_55682)"}),a.createElement("circle",{cx:"31.5001",cy:"2",r:"1.5",fill:"url(#paint51_linear_1414_55682)"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"paint0_linear_1414_55682",x1:"13.5002",y1:"6.5",x2:"13.5002",y2:"9.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint1_linear_1414_55682",x1:"19.5001",y1:"6.5",x2:"19.5001",y2:"9.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint2_linear_1414_55682",x1:"25.4994",y1:"6.5",x2:"25.4994",y2:"9.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint3_linear_1414_55682",x1:"31.5001",y1:"6.5",x2:"31.5001",y2:"9.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint4_linear_1414_55682",x1:"7.50049",y1:"12.5",x2:"7.50049",y2:"15.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint5_linear_1414_55682",x1:"7.50049",y1:"6.5",x2:"7.50049",y2:"9.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint6_linear_1414_55682",x1:"1.5",y1:"12.5",x2:"1.5",y2:"15.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint7_linear_1414_55682",x1:"43.4999",y1:"12.5",x2:"43.4999",y2:"15.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint8_linear_1414_55682",x1:"13.5002",y1:"12.5",x2:"13.5002",y2:"15.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint9_linear_1414_55682",x1:"19.5001",y1:"12.5",x2:"19.5001",y2:"15.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint10_linear_1414_55682",x1:"25.4994",y1:"12.5002",x2:"25.4994",y2:"15.5002",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint11_linear_1414_55682",x1:"31.5001",y1:"12.5",x2:"31.5001",y2:"15.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint12_linear_1414_55682",x1:"37.5002",y1:"12.5",x2:"37.5002",y2:"15.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint13_linear_1414_55682",x1:"37.5002",y1:"6.5",x2:"37.5002",y2:"9.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint14_linear_1414_55682",x1:"7.50049",y1:"18.5",x2:"7.50049",y2:"21.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint15_linear_1414_55682",x1:"1.5",y1:"18.5",x2:"1.5",y2:"21.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint16_linear_1414_55682",x1:"43.4999",y1:"18.5",x2:"43.4999",y2:"21.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint17_linear_1414_55682",x1:"13.5002",y1:"18.5",x2:"13.5002",y2:"21.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint18_linear_1414_55682",x1:"19.5001",y1:"18.5",x2:"19.5001",y2:"21.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint19_linear_1414_55682",x1:"25.4994",y1:"18.5",x2:"25.4994",y2:"21.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint20_linear_1414_55682",x1:"31.5001",y1:"18.5",x2:"31.5001",y2:"21.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint21_linear_1414_55682",x1:"37.5002",y1:"18.5",x2:"37.5002",y2:"21.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint22_linear_1414_55682",x1:"7.50049",y1:"24.5",x2:"7.50049",y2:"27.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint23_linear_1414_55682",x1:"1.5",y1:"24.5",x2:"1.5",y2:"27.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint24_linear_1414_55682",x1:"43.4999",y1:"24.5",x2:"43.4999",y2:"27.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint25_linear_1414_55682",x1:"13.5002",y1:"24.5",x2:"13.5002",y2:"27.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint26_linear_1414_55682",x1:"19.5001",y1:"24.5",x2:"19.5001",y2:"27.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint27_linear_1414_55682",x1:"25.4994",y1:"24.4998",x2:"25.4994",y2:"27.4998",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint28_linear_1414_55682",x1:"31.5001",y1:"24.5",x2:"31.5001",y2:"27.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint29_linear_1414_55682",x1:"37.5002",y1:"24.5",x2:"37.5002",y2:"27.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint30_linear_1414_55682",x1:"7.50049",y1:"30.5",x2:"7.50049",y2:"33.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint31_linear_1414_55682",x1:"7.50049",y1:"36.5",x2:"7.50049",y2:"39.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint32_linear_1414_55682",x1:"1.5",y1:"30.5",x2:"1.5",y2:"33.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint33_linear_1414_55682",x1:"43.4999",y1:"30.5",x2:"43.4999",y2:"33.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint34_linear_1414_55682",x1:"13.5002",y1:"30.5",x2:"13.5002",y2:"33.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint35_linear_1414_55682",x1:"19.5001",y1:"30.5",x2:"19.5001",y2:"33.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint36_linear_1414_55682",x1:"25.4994",y1:"30.5",x2:"25.4994",y2:"33.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint37_linear_1414_55682",x1:"31.5001",y1:"30.5",x2:"31.5001",y2:"33.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint38_linear_1414_55682",x1:"37.5002",y1:"30.5",x2:"37.5002",y2:"33.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint39_linear_1414_55682",x1:"37.5002",y1:"36.5",x2:"37.5002",y2:"39.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint40_linear_1414_55682",x1:"13.5002",y1:"36.5",x2:"13.5002",y2:"39.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint41_linear_1414_55682",x1:"19.5001",y1:"36.5",x2:"19.5001",y2:"39.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint42_linear_1414_55682",x1:"25.4994",y1:"36.5",x2:"25.4994",y2:"39.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint43_linear_1414_55682",x1:"31.5001",y1:"36.5",x2:"31.5001",y2:"39.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint44_linear_1414_55682",x1:"13.5002",y1:"42.5",x2:"13.5002",y2:"45.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint45_linear_1414_55682",x1:"19.5001",y1:"42.5",x2:"19.5001",y2:"45.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint46_linear_1414_55682",x1:"25.4994",y1:"42.5",x2:"25.4994",y2:"45.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint47_linear_1414_55682",x1:"31.5001",y1:"42.5",x2:"31.5001",y2:"45.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint48_linear_1414_55682",x1:"13.5002",y1:"0.5",x2:"13.5002",y2:"3.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint49_linear_1414_55682",x1:"19.5001",y1:"0.5",x2:"19.5001",y2:"3.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint50_linear_1414_55682",x1:"25.4994",y1:"0.5",x2:"25.4994",y2:"3.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"})),a.createElement("linearGradient",{id:"paint51_linear_1414_55682",x1:"31.5001",y1:"0.5",x2:"31.5001",y2:"3.5",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#252525"}),a.createElement("stop",{offset:"1",stopColor:"#A4A4A4"}))))}var p=n(346124),_=n(563706),g=n(737499);function f(e){let{onTonearmHeadMouseDown:t}=e;return a.createElement("svg",{width:"27",height:"80",viewBox:"0 0 27 80",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{d:"M18.7042 8.19556C18.7042 8.19556 18.7042 34.7407 18.7042 47.6641C18.7042 60.5876 13.9589 64.9213 13.9589 64.9213",stroke:"black",strokeOpacity:"0.2",strokeWidth:"5.33844",strokeLinecap:"round"}),a.createElement("g",{filter:"url(#filter0_dii_242_919)"},a.createElement("path",{d:"M18.7042 8.19556C18.7042 8.19556 18.7042 34.7407 18.7042 47.6641C18.7042 60.5876 13.9589 64.9213 13.9589 64.9213",stroke:"white",strokeWidth:"4.15212",strokeLinecap:"round"})),a.createElement("g",{filter:"url(#filter1_d_242_919)"},a.createElement("rect",{x:"14",y:"2",width:"9.49057",height:"11.8632",fill:"url(#paint0_linear_242_919)"}),a.createElement("rect",{x:"14.2966",y:"2.29658",width:"8.89741",height:"11.27",stroke:"black",strokeOpacity:"0.2",strokeWidth:"0.59316"})),a.createElement("g",{filter:"url(#filter2_d_242_919)",onMouseDown:t,className:"tonearm-svg--tonearmBottom--3JC--","aria-hidden":"true"},a.createElement("g",{filter:"url(#filter3_iii_242_919)"},a.createElement("path",{d:"M9.30333 62.425C9.93167 61.6761 11.0481 61.5785 11.7969 62.2068L16.3554 66.0318C17.1042 66.6601 17.2019 67.7766 16.5735 68.5254L10.4596 75.8116C9.8313 76.5604 8.71489 76.6581 7.96606 76.0298L7.14087 75.3374L4.23279 72.8972L3.40761 72.2048C2.65878 71.5764 2.56111 70.46 3.18945 69.7112L9.30333 62.425Z",fill:"#E9E9E9"})),a.createElement("path",{d:"M16.546 65.8046L11.9876 61.9796C11.1132 61.246 9.80976 61.36 9.07614 62.2343L2.96225 69.5206C2.22863 70.3949 2.34267 71.6984 3.21697 72.432L4.04216 73.1244L6.95024 75.5646L7.77542 76.257C8.64972 76.9906 9.95321 76.8766 10.6868 76.0023L16.8007 68.716C17.5343 67.8417 17.4203 66.5382 16.546 65.8046Z",stroke:"black",strokeOpacity:"0.25",strokeWidth:"0.59316"})),a.createElement("defs",null,a.createElement("filter",{id:"filter0_dii_242_919",x:"9.51017",y:"3.74674",width:"13.6427",height:"65.6232",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",null),a.createElement("feGaussianBlur",{stdDeviation:"1.18632"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_242_919"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_242_919",result:"shape"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"1.18632"}),a.createElement("feGaussianBlur",{stdDeviation:"0.415212"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.709804 0 0 0 0 0.709804 0 0 0 0 0.709804 0 0 0 0.5 0"}),a.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect2_innerShadow_242_919"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"-1.18632"}),a.createElement("feGaussianBlur",{stdDeviation:"0.415212"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0.708333 0 0 0 0 0.708333 0 0 0 0 0.708333 0 0 0 0.5 0"}),a.createElement("feBlend",{mode:"normal",in2:"effect2_innerShadow_242_919",result:"effect3_innerShadow_242_919"})),a.createElement("filter",{id:"filter1_d_242_919",x:"11.3451",y:"0.672526",width:"14.8005",height:"17.1732",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dy:"1.32747"}),a.createElement("feGaussianBlur",{stdDeviation:"1.32747"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_242_919"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_242_919",result:"shape"})),a.createElement("filter",{id:"filter2_d_242_919",x:"0.412163",y:"60.3145",width:"18.9386",height:"19.3776",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dy:"0.884983"}),a.createElement("feGaussianBlur",{stdDeviation:"0.884983"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_242_919"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_242_919",result:"shape"})),a.createElement("filter",{id:"filter3_iii_242_919",x:"1.29715",y:"60.3145",width:"16.8768",height:"17.3158",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dy:"2.37264"}),a.createElement("feGaussianBlur",{stdDeviation:"0.29658"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.86 0"}),a.createElement("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_242_919"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"1.77948",dy:"1.77948"}),a.createElement("feGaussianBlur",{stdDeviation:"0.29658"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.8 0"}),a.createElement("feBlend",{mode:"normal",in2:"effect1_innerShadow_242_919",result:"effect2_innerShadow_242_919"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dx:"-0.884983",dy:"-0.884983"}),a.createElement("feGaussianBlur",{stdDeviation:"0.884983"}),a.createElement("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.17 0"}),a.createElement("feBlend",{mode:"normal",in2:"effect2_innerShadow_242_919",result:"effect3_innerShadow_242_919"})),a.createElement("linearGradient",{id:"paint0_linear_242_919",x1:"14",y1:"7.9316",x2:"23.4906",y2:"7.9316",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#CACACA"}),a.createElement("stop",{offset:"0.253125",stopColor:"#E2E2E2"}),a.createElement("stop",{offset:"0.384375",stopColor:"#F3F3F3"}),a.createElement("stop",{offset:"0.500704",stopColor:"white"}),a.createElement("stop",{offset:"0.625",stopColor:"#F3F3F3"}),a.createElement("stop",{offset:"0.753125",stopColor:"#E2E2E2"}),a.createElement("stop",{offset:"1",stopColor:"#CACACA"}))))}function h(e){let{onPause:t,onResume:n}=e,[i,o]=a.useState(null),s=a.useRef(0),c=a.useRef(0),d=(0,r.d4)(e=>e.music?.music?.isPaused),u=(0,g.F4)(),m=u?.shouldOptimizeForIpadApp||_.Ay.isIpad,h=a.useCallback(e=>{if(!1===d){let t=e.clientX;o(22-22*((0,p.clamp)(t-s.current,0,21)/21))}else{let t=e.clientX;o(22*((0,p.clamp)(s.current-t,0,21)/21))}},[d,22,21]),E=a.useCallback(e=>{document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",E);let a=!1===d;if(Date.now()-c.current<100)a?t():n();else if(a){let n=e.clientX;(0,p.clamp)(n-s.current,0,21)>10.5&&t()}else{let t=e.clientX;(0,p.clamp)(s.current-t,0,21)>10.5&&n()}s.current=0,o(null)},[h,d,t,n]),y=null!==i?i:!1===d?22:0;return a.createElement("div",{className:l()("tonearm--tonearmStandalone--UOmob",{"tonearm--play--cp3C1":null===i,"tonearm--paused--pe2EE":null!==i}),style:{transform:`rotate(${y}deg)`}},a.createElement(f,{onTonearmHeadMouseDown:m?void 0:e=>{s.current=e.clientX,c.current=Date.now(),document.addEventListener("mousemove",h),document.addEventListener("mouseup",E)}}))}var E=n(649958);let y="turntable--gray--OY0Du";var b=n(258873);function v(e){let{handlePause:t,handleTonearmResume:n}=e;return a.createElement("div",{className:l()("turntable--recordPlayerBase--WG5CH")},a.createElement(C,{handlePause:t,handleTonearmResume:n}),a.createElement("div",{className:"turntable--speakerGrill--DXQjl"},a.createElement(m,null)))}function C(e){let{handlePause:t,handleTonearmResume:n}=e;return a.createElement("div",{className:l()("turntable--recordPlayer--0aMTu")},a.createElement(T,{size:"large"}),a.createElement(h,{onPause:t,onResume:n}))}var w=(e=>(e.XSMALL="xsmall",e.LARGE="large",e))(w||{});function T(e){let{size:t,maskAlbumArtWhenPaused:n,maskRef:r,useGrayMask:i,useLightShadow:o}=e,s=(0,E.k0)()&&!!n;return a.createElement("div",{className:l()("turntable--record--96NxV",{"turntable--xsmall--eqtGp":"xsmall"===t,"turntable--large--oXtu6":"large"===t})},a.createElement(u,{useLightShadow:o}),a.createElement(S,{size:t,showMask:s,maskRef:r,useGrayMask:i}))}function S(e){let t=(0,r.d4)(e=>e.music.music),n=t?.selectedSongID||"",i=(0,d.N)(n),u=(0,E.fk)(),m=i&&i.album_art;return(0,c.p8)("showUi")?a.createElement("div",{className:l()("turntable--spinningAlbum--N7jwa",{"turntable--spinningAlbumXSmall--vzhVj":"xsmall"===e.size,"turntable--spinningAlbumLarge--SWUZ2":"large"===e.size})},m&&a.createElement(o.oW,{className:l()("turntable--spinningAlbumImage--H-qwO",{"turntable--spinningAlbumPlaying--UDk-I":t?.isPaused===!1,[y]:!u}),src:i.album_art,alt:"spinning album art"}),a.createElement("div",{ref:e.maskRef,className:l()("turntable--spinningAlbumImageMask--PZ7Cr turntable--spinningAlbumImage--H-qwO",{"turntable--noOpacity--ZKZnl":!e.showMask,[y]:e.useGrayMask})},a.createElement(s.B,{className:"turntable--maskIcon--mZo9b",svg:b.A}))):null}},125563:(e,t,n)=>{n.d(t,{k$:()=>w,p0:()=>T,qT:()=>C,ZP:()=>y,sD:()=>b});var a=n(411855),r=n(629019),i=n.n(r),l=n(374626),o=n(563706),s=n(913016),c=n(939863),d=n(728406),u=n(68517),m=n(802174);let p="time_display--xsmall--RksCd",_="time_display--medium--bxQbL",g="time_display--large--nQrfq",f="time_display--xlarge--HRGrX",h="time_display--clockStyleWrapper--TN05b",E="time_display--timeDiv--Y0hTB";var y=(e=>(e.XSMALL="xsmall",e.MEDIUM="medium",e.LARGE="large",e.XLARGE="xlarge",e))(y||{}),b=(e=>(e.DEFAULT="DEFAULT",e.SECONDARY="SECONDARY",e.TERTIARY="TERTIARY",e))(b||{});let v=({minutesRef:e,disabled:t})=>{a.useLayoutEffect(()=>{t||(e.current?.focus(),e.current?.select())},[t,e])};function C({timerActions:e,timerState:t,isStopped:n,withoutUnderline:r,withoutClockDisplay:i,isInUI3Toolbar:l,size:s="medium"}){let c=(0,m.M2)(e,t);return v({minutesRef:c.minutesRef,disabled:o.Ay.isMeetDevice}),a.createElement(a.Fragment,null,n?a.createElement(S,{timerState:t,timerEventHandlers:c,withoutUnderline:r,withoutClockDisplay:i,size:s}):a.createElement(w,{withoutUnderline:r,withoutClockDisplay:i,size:s,isInUI3Toolbar:l}))}function w(e){let{withoutUnderline:t,withoutClockDisplay:n,withoutTimeShadow:r,withoutFlashOnPause:i,size:o,isSelected:s,prominence:c,timeDivRef:m,isInUI3Toolbar:p}=e,_=(0,l.md)(u.jo),g=(0,l.md)(u.Ld);return a.createElement(T,{timeInSeconds:g,withoutUnderline:t,withoutClockDisplay:n,withoutTimeShadow:r,flashing:(0,d.CM)(_.time)&&!i,size:o,isSelected:s,prominence:c,timeDivRef:m,isInUI3Toolbar:p})}function T(e){let{timeInSeconds:t,withoutUnderline:n,withoutClockDisplay:r,withoutTimeShadow:l,flashing:o,size:c,isSelected:u,prominence:m,timeDivRef:y,isInUI3Toolbar:b}=e,{seconds:v,minutes:C}=(0,s._d)(t);return a.createElement("div",{className:i()({[h]:!r})},a.createElement("div",{ref:y,className:i()(E,{[p]:"xsmall"===c,[_]:"medium"===c,[g]:"large"===c,[f]:"xlarge"===c,"time_display--selected--Idl4y":u,"time_display--secondary--r44Yf":"SECONDARY"===m,"time_display--tertiary--oyx7n":"TERTIARY"===m,"time_display--inUI3Toolbar--SFjvm":b})},!r&&!l&&a.createElement(x,{size:c,withoutUnderline:n}),a.createElement("div",{className:i()("time_display--timeDisplay--MuaRS",{"time_display--flashing--1Hw1m":o,[p]:"xsmall"===c,[_]:"medium"===c,[g]:"large"===c,[f]:"xlarge"===c})},a.createElement(k,{isMinute:!0,size:c,value:(0,d.YI)(C),displayOnly:!0}),":",a.createElement(k,{size:c,value:(0,d.YI)(v),displayOnly:!0}))))}function S({timerState:e,timerEventHandlers:t,withoutUnderline:n,withoutClockDisplay:r,size:l}){let{handleMinutesChange:o,handleMinutesKeyDown:s,handleMinutesBlur:c,handleMinutesFocus:d,handleSecondsChange:u,handleSecondsKeyDown:m,handleSecondsBlur:p,handleSecondsFocus:y,secondsRef:b,minutesRef:v}=t;return a.createElement(a.Fragment,null,a.createElement("div",{className:i()({[h]:!r})},a.createElement("div",{className:i()(E,{[_]:"medium"===l,[g]:"large"===l,[f]:"xlarge"===l})},a.createElement(x,{size:l,withoutUnderline:n}),a.createElement("div",null,a.createElement(k,{ref:v,onFocus:d,onChange:o,onKeyDown:s,onBlur:c,value:e.minutes,size:l,isMinute:!0}),":",a.createElement(k,{ref:b,onChange:u,onFocus:y,onKeyDown:m,onBlur:p,value:e.seconds,size:l})))))}function x(e){return a.createElement("div",{className:i()("time_display--timeShadow--dyosl",{[p]:"xsmall"===e.size,[_]:"medium"===e.size,[g]:"large"===e.size,[f]:"xlarge"===e.size})},a.createElement(k,{isMinute:!0,size:e.size,value:88,displayOnly:!0}),":",a.createElement(k,{size:e.size,value:88,displayOnly:!0}),!e.withoutUnderline&&a.createElement("div",{className:"time_display--timeInputUnderline--4Gxkr"}))}let k=a.forwardRef((e,t)=>{let{size:n,isMinute:r,onFocus:l,onChange:o,onKeyDown:s,onBlur:d,value:u,displayOnly:m}=e,h=i()("time_display--timeInput--4Evh3",{"time_display--minute--Q8e3H":r,[p]:"xsmall"===n,[_]:"medium"===n,[g]:"large"===n,[f]:"xlarge"===n});return m?a.createElement("span",{className:h,"data-testid":"stopped-time"},u):a.createElement("input",{maxLength:2,type:"text",inputMode:"numeric",ref:t,onFocus:l,onChange:o,onKeyDown:s,onBlur:d,className:h,value:u,"aria-label":r?(0,c.t)("whiteboard.timer.minutes.aria_label"):(0,c.t)("whiteboard.timer.seconds.aria_label")})});k.displayName="TwoDigitTimeInput"},802174:(e,t,n)=>{n.d(t,{Jg:()=>U,M2:()=>P,OI:()=>x,YO:()=>G,ey:()=>K,rJ:()=>S});var a=n(411855),r=n(188507),i=n(179479),l=n(966712),o=n(374626),s=n(286640),c=n(244673),d=n(974105),u=n(857766),m=n(283942),p=n(335682),_=n(860178),g=n(960628),f=n(247014),h=n(951840),E=n(728406),y=n(68517);let b=null,v=null,C=null,w=()=>(0,r.d4)(e=>e.music.playerInstance),T=()=>1e3;function S(){let[e,t]=a.useState({}),n=(0,r.d4)(e=>e.timer);a.useEffect(()=>{if(!n||!n.time||n?.time?.isPaused)return;let e=setTimeout(()=>t({}),T());return()=>{clearTimeout(e)}},[e,n,n.time?.isPaused])}function x(){let e=(0,r.d4)(e=>e.timer),t=(0,r.d4)(e=>(0,d.d1)(e)),n=(0,r.d4)(e=>t?(0,u.L8)(t,e.repos):null),a=Math.ceil((0,E.P$)(e.time)/1e3);a>0?(0,c.rF)(t,n,a):(0,c.rF)(t,n)}let k=()=>{C&&C.pause(),b&&b.pause(),v&&v.pause(),b=new Audio(O),v=new Audio(A),C=new Audio(I)},N=(e,t,n,a,r,i)=>{if(!n.current||!e)return;let l=(0,E.P$)(n.current.time);if("add-minutes"===e.lastAction.type){if(b&&b.pause(),i.current?.resetFades(),i.current?.fadeIn({}),!n.current.time||0===n.current.time.totalTimeMs)return;let a=6e4*e.lastAction.minutes;n.current.time&&l+a<E.y0&&t(c.VV({timer:n.current.time,deltaMs:a}))}"start-timer"===e.lastAction.type&&((0,s.DN)().set("last-timer-set-time",e.lastUsedTime),t(c.Qv({totalTimeMs:1e3*e.lastUsedTime,musicStartTimeMs:n.current.musicStartTimeMs})),C&&a.current&&!r.current&&e.lastUsedTime>5&&(0,E.PF)(C,a.current)),"pause-timer"===e.lastAction.type&&t(c._1(n.current.time)),"resume-timer"===e.lastAction.type&&t(c.ne(n.current.time)),"stop-timer"===e.lastAction.type&&(k(),t(c.Vk()))},I="https://static.figma.com/uploads/304a1a341a619feb4af7d377c75dd325534e1734",A="https://static.figma.com/uploads/f45e11344ee4f618173695e2405a9a988affc910",O="https://static.figma.com/uploads/54a944bea3fce3ca45c91429993683685bec5782",L=()=>{a.useEffect(()=>{null===C&&(C=new Audio(I)),null===v&&(v=new Audio(A)),null===b&&(b=new Audio(O))},[])},D=e=>{let t=(0,i.F)(e),n=(0,r.wA)(),l=(0,r.d4)(e=>e.timer),o=(0,i.F)(l),s=(0,i.F)((0,r.d4)(e=>e.timer.volume)),c=(0,i.F)((0,r.d4)(e=>e.timer.isMuted)),d=(0,i.F)(w());a.useEffect(()=>{N(e,n,o,s,c,d)},[t,n,c,d,o,e,s])},R=()=>{let e=(0,r.wA)(),t=(0,i.F)((0,r.d4)(e=>e.timer.volume)),n=(0,i.F)((0,r.d4)(e=>e.timer.setBy)),l=(0,i.F)((0,_.iZ)()),o=(0,i.F)((0,r.d4)(e=>e.timer.isMuted)),s=(0,i.F)(w()),d=(0,r.d4)(e=>e.music.music);return{callbackToRunAtFiveSecondsLeft:a.useCallback((n,a)=>{n.current&&b?.paused&&!o.current&&(s.current&&s.current.fadeOut({fadeOutLength:5e3,shouldStopWhenFadedOut:!0,targetVolumeMultiplier:0}),(0,E.PF)(b,t.current)),a.current||e(c.lu({state:"open",userInitiated:!1}))},[e,o,s,t]),callbackToRunWhenTimerFinishes:a.useCallback((n,a)=>{b&&b.pause(),n.current&&v&&!o.current&&(0,E.PF)(v,t.current),g.d1.timerChange("timerdone"),a.current||e(c.lu({state:"open",userInitiated:!1}))},[e,o,t]),callbackToRunAfterAnimationFinishes:a.useCallback(t=>{if(d&&e(c.c$(d)),"visible"===document.visibilityState)e(c.Vk()),t({type:"reset-state"}),n.current!==l.current?.name&&e(c.lu({state:"closed",userInitiated:!1}));else{let t=()=>{e(c.lu({state:"open",userInitiated:!1})),window.removeEventListener("focus",t)};window.addEventListener("focus",t)}k(),s.current?.resetFades()},[l,e,d,n,s])}},M=e=>{let t=(0,r.wA)(),n=(0,r.d4)(e=>e.timer.time),l=(0,i.F)((0,r.d4)(e=>e.timer.audioEnabled)),o=(0,i.F)((0,r.d4)(e=>e.timer&&"open"===e.timer.modalState)),s=(0,i.F)((0,r.d4)(e=>e.timer.volume)),c=(0,i.F)(w()),d=(0,r.d4)(e=>e.timer.isMuted),u=!n||n.isPaused,m=(0,r.d4)(e=>e.music.music?.isPaused),{callbackToRunAtFiveSecondsLeft:p,callbackToRunWhenTimerFinishes:_,callbackToRunAfterAnimationFinishes:g}=R();a.useEffect(()=>{if(u){b&&b.pause(),!1===m&&c.current?.fadeIn({fadeInLength:1e3});return}let t=(0,E.P$)(n);t<5e3&&l.current&&b?.paused&&!d&&(0,E.PF)(b,s.current),b&&(b.muted=d),t>5e3&&b&&(b.pause(),c.current?.resetFades(),c.current?.fadeIn({}));let a=[];return t>5e3&&a.push(window.setTimeout(()=>p(l,o),t-5e3)),a.push(window.setTimeout(()=>_(l,o),t)),a.push(window.setTimeout(()=>g(e),t+E.cu)),()=>{a.forEach(clearTimeout)}},[n,u,t,e,_,g,p,o,s,l,c,d,m])};function P(e,t){let{setMinutes:n,setSeconds:i,startTimer:l,setTime:o,addMinutes:s}=e,d=a.useRef(null),u=a.useRef(null),p=(0,r.wA)(),_=a.useCallback(e=>{if(!e.currentTarget.value.match(/^[0-9]?[0-9]?$/)){e.preventDefault();return}n(e.currentTarget.value),e.currentTarget.value.length>1&&u.current?.select()},[u,n]),g=a.useCallback(e=>{if("ArrowUp"===e.key||"ArrowDown"===e.key)isNaN(parseInt(e.currentTarget.value))||(s(("ArrowUp"===e.key?1:-1)*(e.shiftKey?5:1)),setTimeout(()=>d.current?.select(),0),e.preventDefault());else if("ArrowRight"===e.key&&d.current){if(d.current.selectionStart===d.current.value.length&&u.current){u.current.select(),e.preventDefault();return}}else if("Enter"===e.key)l();else if("Escape"===e.key){p(c.lu({state:"closed",userInitiated:!0,source:"keyboard"}));return}else if(":"===e.key){u.current?.select(),e.preventDefault();return}else(0,m.jr)(e)},[s,p,l]),f=a.useCallback(()=>{if(!d.current)return;let e=d.current.value;0===e.length?n("00"):e.length<2?n(`0${e}`):n(e)},[d,n]),h=a.useCallback(()=>{d.current?.select()},[d]),y=a.useCallback(e=>{if(!e.currentTarget.value.match(/^[0-9]?[0-9]?$/)){e.preventDefault();return}let n=parseInt(e.currentTarget.value);n>59&&"99"!==t.minutes?(n-=60,o((0,E.YI)(parseInt(t.minutes)+1),(0,E.YI)(n))):n>59?i((0,E.YI)(59)):(n<60||isNaN(n))&&i(e.currentTarget.value)},[i,o,t.minutes]);return{handleMinutesChange:_,handleMinutesKeyDown:g,handleMinutesBlur:f,handleMinutesFocus:h,handleSecondsChange:y,handleSecondsKeyDown:a.useCallback(e=>{let a;if("ArrowLeft"===e.key&&u.current){if(0===u.current.selectionEnd&&d.current){d.current.select(),e.preventDefault();return}}else if("Enter"===e.key){""!==t.minutes&&""!==t.seconds&&parseInt(t.minutes)+parseInt(t.seconds)!==0&&l();return}else if("Escape"===e.key){p(c.lu({state:"closed",userInitiated:!0,source:"keyboard"}));return}else if(u.current?.value===""&&"Backspace"===e.key&&d.current?.value){n(d.current.value.substring(0,d.current.value.length-1)||"0"),d.current.focus(),e.preventDefault();return}if((0,m.jr)(e)||"ArrowUp"!==e.key&&"ArrowDown"!==e.key)return;let r=parseInt(t.seconds);if(!isNaN(r)){if("ArrowUp"===e.key){if((r+=e.shiftKey?5:1)>59&&"99"===t.minutes)return;r>=60&&(r-=60,a=1)}else if("ArrowDown"===e.key&&(r-=e.shiftKey?5:1)<0){if(0===parseInt(t.minutes))return;a=-1,r+=60}setTimeout(()=>u.current?.select(),0),e.preventDefault(),a?o((0,E.YI)(parseInt(t.minutes)+a),(0,E.YI)(r)):i((0,E.YI)(r))}},[p,d,u,n,i,o,l,t.minutes,t.seconds]),handleSecondsBlur:a.useCallback(()=>{i((0,E.YI)(parseInt(t.seconds||"00")))},[i,t.seconds]),handleSecondsFocus:a.useCallback(()=>{u.current?.select()},[u]),secondsRef:u,minutesRef:d}}let F=(e,t)=>{a.useEffect(()=>{e.length>0&&e.forEach(e=>{e&&(e.volume=t/100)})},[e,t])},B=e=>{let t=(0,p.q5)(),n=(0,r.d4)(e=>e.multiplayer.allUsers.length),i=a.useRef(n);return i.current=n,a.useCallback(()=>{(0,l.kc)().workspace_activity_write&&t&&t.team&&t.team.workspaceId&&h.i.recordActivity({activityUnitType:f.qj.FILE_COLLABORATION,fileKey:t.key,collaborationType:f.Uz.TIMER_STARTED,numPeopleInFile:i.current}),e({type:"start-timer"})},[e,t,i])};function U(){let[e,t]=(0,o.fp)(y.$),n=(0,r.d4)(e=>e.timer.volume),l=(0,i.F)((0,r.d4)(e=>e.timer.volume)),s=(0,i.F)((0,r.d4)(e=>e.timer.isMuted)),c=a.useRef(e.lastUsedTime),d=B(t);return[e,a.useMemo(()=>({setMinutes:e=>t({type:"set-minutes",minutes:e}),setSeconds:e=>t({type:"set-seconds",seconds:e}),setTime:(e,n)=>t({type:"set-time",minutes:e,seconds:n}),addMinutes:e=>t({type:"add-minutes",minutes:e}),startTimer:d,stopTimer:()=>t({type:"stop-timer"}),pauseTimer:()=>t({type:"pause-timer"}),resumeTimer:()=>t({type:"resume-timer"}),playStartChime:()=>{C&&l.current&&!s.current&&c.current>5&&(0,E.PF)(C,n)}}),[l,s,n,t,d])]}function G(){L();let[e,t]=(0,o.fp)(y.$),n=(0,r.d4)(e=>e.timer.volume);M(t),D(e),F([b,C,v],n)}function K(e){let t=(0,r.wA)(),n=(0,r.d4)(e=>e.timer);a.useEffect(()=>{!1!==n.startChimePlayed||(0,E.IQ)(n.time)||(0,E.CM)(n.time)||(0,E.G8)(n.time)||(e(),t(c.k1(!0)))},[t,e,n.startChimePlayed,n.time])}},838266:(e,t,n)=>{n.d(t,{s1:()=>w,aY:()=>T,nh:()=>v,J:()=>y});var a=n(411855),r=n(188507),i=n(629019),l=n.n(i),o=n(602126),s=n(860601),c=n(939863),d=n(244673),u=n(498606),m=n(227795),p=n(728406),_=n(711495),g=n(99351),f=n(466811),h=n(311986),E=n(10448),y=(e=>(e.DEFAULT="default",e.ON_FIGJAM="onFigjam",e.FIGJAM="figjam",e))(y||{});let b=(e,t)=>t||0===e?E.A:e<40?f.A:e<80?h.A:g.A;var v=(e=>(e.DEFAULT="default",e.LARGE="large",e))(v||{});function C(e){let{isMinimized:t,withDarkHoverBg:n,muteButtonRef:i,muteOnTouch:o,iconColor:p,blockTooltip:_,size:g}=e,f=(0,r.d4)(e=>e.music.volume),h=(0,r.d4)(e=>e.music.isMuted),E=(0,r.wA)(),y=a.useCallback(()=>{E(d.tk({isMuted:!h,userInitiated:!0}))},[E,h]),v=a.useCallback(e=>{e.preventDefault(),e.stopPropagation(),y()},[y]);return a.createElement("div",{onTouchEnd:o?v:s.lQ},a.createElement(m.K0,{onClick:y,className:l()("volume_control_button--button--6JyR-",{"volume_control_button--minimized--esj8w":t,"volume_control_button--withDarkHoverBg--p-OS1":n,"volume_control_button--defaultSpeakerColor--ZF9o2":"default"===p,"volume_control_button--figjamSpeakerColor--0W5TO":"figjam"===p,"volume_control_button--onFigjamSpeakerColor--KEcX8":"onFigjam"===p,"volume_control_button--large--BF5Mq":"large"===g}),svg:b(f,h),"data-tooltip-type":u.Ib.TEXT,tooltipForScreenReadersOnly:_,"data-tooltip":h?(0,c.t)("whiteboard.timer.timer_unmute_tooltip"):(0,c.t)("whiteboard.timer.timer_mute_tooltip"),"data-tooltip-show-above":!0,ref:i}))}var w=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.ALWAYS=1]="ALWAYS",e[e.NEVER=2]="NEVER",e))(w||{});function T({volumeJustification:e,sliderVisibilitySetting:t,sliderFullWidth:n,buttonGap:i,isMinimized:l,withDarkHoverBg:s,iconColor:c,blockButtonTooltip:d,muteOnTouch:u,size:m}){let g=a.useRef(-1),[f,h]=a.useState(!1),E=a.useCallback(()=>{g.current&&clearTimeout(g.current),g.current=window.setTimeout(()=>{h(!0)},100)},[h]),y=a.useCallback(()=>{g.current&&clearTimeout(g.current),h(!1)},[h]),b=a.useRef(null),v=a.useCallback(()=>{y()},[y]);(0,o.Xq)(b,"touchend",v);let w=a.useRef(null),T=(0,r.d4)(e=>e.timer),S=(0,p.IQ)(T.time);a.useEffect(()=>{S&&h(!1)},[S]),a.useEffect(()=>{h(!1)},[t]);let x=f;switch(t){case 1:x=!0;break;case 2:x=!1}return a.createElement("div",{ref:b,onTouchEnd:e=>{e.preventDefault(),e.stopPropagation(),f?y():E()},onMouseEnter:E,onMouseLeave:y,className:"volume_control_button--volumeButtonAndSliderContainer--HyG-F",style:{gap:i}},a.createElement(C,{muteButtonRef:w,isMinimized:l,withDarkHoverBg:s,iconColor:c,blockTooltip:d,muteOnTouch:u,size:m}),x&&a.createElement(_.S,{muteButtonRef:w,volumeJustification:e,fullWidth:n,isMinimized:l}))}},711495:(e,t,n)=>{n.d(t,{Z:()=>u,S:()=>m});var a=n(411855),r=n(188507),i=n(629019),l=n.n(i),o=n(244673),s=n(893606);let c="volume_slider--incognito--1BzqQ",d="volume_slider--thick--OwB1Y";var u=(e=>(e.LEFT="LEFT",e.RIGHT="RIGHT",e.CENTER="CENTER",e.INLINE="INLINE",e))(u||{});function m({muteButtonRef:e,volumeJustification:t,fullWidth:n,isMinimized:i}){let u=(0,r.d4)(e=>e.music.isMuted),m=(0,r.d4)(e=>u?0:e.music.volume),p=(0,s.R)(),_=(0,r.wA)(),g=e=>{e.preventDefault(),e.stopPropagation();let t=Number(e.target.value);_(o.pX(t))},f=0,h=0;if("INLINE"!==t){let n=e.current?.getClientRects()[0];if(!n)return a.createElement(a.Fragment,null," ");f=n.x,"CENTER"===t?f+=(n.width-144)/2:"RIGHT"===t&&(f=f+n.width-144),h=(n.y||0)+32+5}let E=m-(m-50)/50*3.8;return a.createElement("div",{className:l()("volume_slider--volumeContainer--jqCRj",{"volume_slider--volumeContainerRelative--2bSYx":"INLINE"===t,[c]:!i,[d]:!i&&p,"volume_slider--fullWidth--jnzDi":n}),style:{left:`${f||0}px`,top:`${h}px`}},a.createElement("input",{className:l()("volume_slider--volumeSliderInput--RHbwq",{"volume_slider--isMuted--cDjt7":u,[c]:!i&&!p,[d]:!i&&p}),style:{background:`linear-gradient(to right,
            var(--active-slider-color) 0%,
            var(--active-slider-color) ${E}%,
            var(--inactive-slider-color) ${E}%,
            var(--inactive-slider-color) 100%
          )`},type:"range",min:0,max:100,step:1,value:m,onChange:g,onMouseUp:e=>{let t=Number(e.target.value);_(o.tk({isMuted:0===t,userInitiated:!0}))},onInput:g,onTouchEnd:e=>{e.preventDefault(),e.stopPropagation()}}),"INLINE"!==t&&a.createElement("div",{className:l()({"volume_slider--additionalHoverDetection--IDArn":!i,"volume_slider--shallowAdditionalHoverDetection---8pNd":i})}))}},631169:(e,t,n)=>{n.d(t,{V3:()=>O,ML:()=>z,w:()=>A,HG:()=>L});var a=n(411855),r=n(188507),i=n(343887),l=n(139689),o=n(587670),s=n(745701),c=n(134288),d=n(323434),u=n(305874),m=n(153234),p=n(355819),_=n(939863),g=n(501114),f=n(625651),h=n(501972),E=n(161325),y=n(601607),b=n(634951),v=n(861802),C=n(266023),w=n(599486),T=n(522322),S=n(74505),x=n(457630);function k({nodePosition:e,isExpanded:t,children:n}){let r=(0,x._X)({subscribeToUpdates_expensive:!0}),i=(0,a.useMemo)(()=>(0,x.Yb)(r,e.absoluteBounds),[e.absoluteBounds,r]),l=(0,a.useMemo)(()=>(0,x.ZT)(i,r),[i,r]),o=(0,a.useMemo)(()=>{if(!i)return{};let e=i.x+r.x,n=i.y+r.y;return{width:i.width,height:i.height,position:"fixed",transform:`translate(${e}px, ${n}px)`,pointerEvents:"none",zIndex:t?1:0}},[r.x,r.y,i,t]);return l?a.createElement("div",{style:o},a.createElement("div",{style:{pointerEvents:"all"}},n({viewportZoom:r.zoomScale}))):null}var N=n(837746),I=n(468951);let A=32,O=7.5,L=256;var D=(e=>(e.DEFAULT="default",e.HOVERED="hovered",e.SELECTED="selected",e.DIMMED="dimmed",e))(D||{}),R=(e=>(e.LARGE="large",e.MEDIUM="medium",e.SMALL="small",e.X_SMALL="xSmall",e))(R||{});function M({clientHeight:e,scrollHeight:t,scrollTop:n}){return 1>Math.abs(t-e-n)}function P({nodeVoteInfo:e,isMostVoted:t,isSelected:n,isHoveredInModal:r,isOtherPinSelected:i,selectPin:l,deselectPin:s,nodePosition:c,currentUserId:d}){let[u,m]=(0,a.useState)(!1),[p,_]=(0,a.useState)(u),[g,f]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(!u){_(!1);return}let e=setTimeout(()=>_(!0),100);return()=>clearTimeout(e)},[u]);let h=(0,a.useCallback)(()=>l(e.guid),[l,e.guid]),E=(0,a.useCallback)(()=>s(e.guid),[s,e.guid]),y=n?"selected":p||r?"hovered":i?"dimmed":"default",b="selected"===y||"hovered"===y;return(0,a.useEffect)(()=>{b&&!g?(o.ofk.setVoteStampsHiddenOnVotedNode(e.guid,!0),f(!0)):!b&&g&&(o.ofk.setVoteStampsHiddenOnVotedNode(e.guid,!1),f(!1))},[b,g,e.guid]),a.createElement(k,{nodePosition:c,isExpanded:["selected","hovered"].includes(y)},({viewportZoom:n})=>a.createElement(F,{recordingKey:`votePin-nodeId${e.guid}`,nodeVoteInfo:e,isMostVoted:t,pinState:y,setIsHovered:m,selectPin:h,deselectPin:E,viewportSize:n>.75?"large":n>.5?"medium":n>.25?"small":"xSmall",currentUserId:d}))}let F=a.memo(function({nodeVoteInfo:e,isMostVoted:t,pinState:n,setIsHovered:r,selectPin:o,deselectPin:u,viewportSize:f,currentUserId:E,recordingKey:y}){let b=(0,a.useRef)(null),v=(0,a.useRef)(null),[C,w]=(0,a.useState)(0),[S,x]=(0,a.useState)(!1),[k,L]=(0,a.useState)(!0),[D,R]=(0,a.useState)(0),[P,F]=(0,a.useState)(!1),K=(0,T.oC)(e),H={large:{paddingTop:"2px",paddingBottom:"2px",paddingLeft:"10px",paddingRight:"10px"},medium:{paddingTop:"1px",paddingBottom:"1px",paddingLeft:"8px",paddingRight:"8px"},small:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"7px",paddingRight:"7px"},xSmall:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"6px",paddingRight:"6px"}}[f],z={large:1,medium:.9,small:.8,xSmall:.7}[f];(0,a.useEffect)(()=>{if("selected"!==n)return;let e=e=>{(0,h.n3)(e.target,b.current)||u()};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[n,u,e.guid]);let W=t?g.sx.colorBgvotingtertiary.$.backgroundColor:g.sx.colorBg.$.backgroundColor,j={default:{transform:`scale(${z})`,backgroundColor:W,borderColor:W,opacity:1,...H},dimmed:{transform:`scale(${z})`,backgroundColor:W,borderColor:W,opacity:.5,...H},hovered:{transform:"scale(1)",backgroundColor:W,borderColor:W,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"},selected:{transform:"scale(1)",backgroundColor:W,...g.sx.colorBorderSelectedStrong.$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"}},$={default:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},dimmed:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},hovered:{width:N.$tX,height:N.$tX,marginLeft:"8px",marginRight:"12px",opacity:0},selected:{width:N.$tX,height:N.$tX,marginLeft:"8px",marginRight:"12px",opacity:1}},q=(0,a.useMemo)(()=>{let t=(0,T.zi)(E);return Object.entries(e.userIdToNodeVotes).sort((e,n)=>t(e[0],n[0]))},[e.userIdToNodeVotes,E]),Y=q.length>3,X=Y?q.slice(0,2):q,J=Y?q.slice(2):[],Z={hovered:{height:`${A}px`},selected:{height:"auto"}},Q=(0,a.useCallback)(e=>{let t=0!==e;t!==S&&x(t);let n=v.current?.getScrollHeight(),a=v.current?.getTrackHeight(),r=void 0===n||void 0===a||M({clientHeight:a,scrollHeight:n,scrollTop:e});r!==k&&L(r)},[S,k]),ee=(0,a.useCallback)(e=>{if(!e||!v.current){x(!1),L(!0);return}let t=v.current.getScrollTop(),n=v.current.getScrollHeight(),a=v.current.getTrackHeight();x(0!==t),L(M({clientHeight:a,scrollHeight:n,scrollTop:t}))},[]);return a.createElement(s.x,{transition:{duration:.1,ease:"easeInOut"}},a.createElement("div",{role:"button",tabIndex:0,className:I.UD,onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),onClick:m.rf(y,"click",o),ref:b,style:{transform:`translateX(${10-C}px)`},id:e.guid},a.createElement(c.P.div,{className:I.yM,initial:!1,animate:n,variants:j},a.createElement("p",{className:I.wx},a.createElement(B,{numTotalVotes:K,isMostVoted:t}),a.createElement(c.P.span,{className:I.cG,initial:!1,animate:n,variants:$},"selected"===n&&a.createElement(i.K,{onClick:e=>{e.stopPropagation(),u(),r(!1)},"aria-label":(0,_.t)("general.close")},a.createElement(l.A,null)))),a.createElement(d.N,null,["selected","hovered"].includes(n)&&a.createElement(a.Fragment,null,a.createElement(c.P.div,{className:I.W0,animate:"selected"===n&&S&&!P?"scrolled":"notScrolled",initial:{marginTop:"0px",opacity:0},variants:{notScrolled:{marginTop:"4px",opacity:0},scrolled:{marginTop:"4px",opacity:1}},exit:{marginTop:"0px",opacity:0}}),a.createElement(c.P.div,{className:I.sI,initial:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/z})`},animate:{width:"240px",height:"auto",opacity:1,transform:"scale(1)"},exit:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/z})`}},a.createElement(p.P,{ref:v,maxHeight:A*O,width:240,allowScrollAndZoomOver:!0,onScroll:Q,onCanScrollChange:ee,forceRerenderCount:D},a.createElement("ul",{className:I.hQ},X.map(([e,t])=>a.createElement(G,{key:e,userId:e,nodeVotes:t})),Y&&a.createElement(c.P.div,{initial:!1,animate:n,variants:Z,onAnimationStart:()=>F(!0),onAnimationComplete:()=>{F(!1),R(e=>e+1)}},"hovered"===n&&a.createElement(V,{overflowCount:q.length-X.length}),"selected"===n&&J.map(([e,t])=>a.createElement(G,{key:e,userId:e,nodeVotes:t})))))),a.createElement(c.P.div,{className:I.W0,animate:"selected"!==n||k||P?"hide":"show",initial:{opacity:0},variants:{show:{opacity:1},hide:{opacity:0}},exit:{opacity:0}}))))),a.createElement(U,{reportWidth:w,numTotalVotes:K,isMostVoted:t,scale:z,padding:H}))});function B({numTotalVotes:e,isMostVoted:t}){return a.createElement("span",{className:I.TK},a.createElement("span",null,(0,_.tx)("voting.pin.votes",{numVotes:e})),t&&a.createElement("img",{src:w.Ys,className:I.C0,alt:(0,_.t)("voting.pin.medal_img_alt")}))}function U({reportWidth:e,numTotalVotes:t,isMostVoted:n,scale:r,padding:i}){let l=a.useRef(null);return a.useLayoutEffect(()=>{let t=l.current;if(t){let{width:n}=t.getBoundingClientRect();window.myEl=t,e(n)}},[l,t,n,r,i.paddingLeft,i.paddingRight,i.paddingTop,i.paddingBottom,e]),a.createElement("div",{className:I.D9,style:{transform:`scale(${r})`},"aria-hidden":!0},a.createElement("span",{style:i,ref:l},a.createElement(B,{numTotalVotes:t,isMostVoted:n})))}function G({userId:e,nodeVotes:t}){let n=t.length>3,r=n?t.slice(0,2):t,i=t.length-2;return a.createElement("li",{key:e,className:I.QE},a.createElement(K,{userId:e}),a.createElement("div",{className:I.WK},r.map(e=>a.createElement(H,{key:e,stampId:e})),n&&a.createElement("span",{className:I._v},i)))}function K({userId:e}){let{user:t,loading:n}=(0,E.wW)(e);return a.createElement(a.Fragment,null,a.createElement(C.v,{userId:e,user:t,loading:n,size:24,loadingClassName:I.SD}),a.createElement(C.m,{userId:e,user:t,loading:n,defaultClassName:I.nT,loadingClassName:I.fK}))}function V({overflowCount:e}){return a.createElement("li",{className:I.Qf},a.createElement("div",{className:I.EA},a.createElement(w.xL,null)),a.createElement("span",{className:I.iG},(0,_.tx)("voting.pin.voter_list_overflow",{numOverflowingVoters:e})))}function H({stampId:e}){let t=(0,u.fU)(),n=(0,y.Fk)((e,t)=>{let n=e.get(t);return n?n.name:null},e),r=(()=>{let e=v.WJ.find(e=>e.label===n);return e&&(0,b.k6)(e,t)||v.tR})(),i=n?(0,_.t)("voting.pin.stamp_preview_alt_with_type",{stampType:n}):(0,_.t)("voting.pin.stamp_preview_alt_without_type");return a.createElement("img",{className:I.O8,src:r,alt:i})}function z({votedNodes:e,votingStage:t,selectedNodeId:n,currentUserId:i}){let l=(0,r.wA)(),s=(0,r.d4)(e=>e.voting.hoveredInModalVotePinId),c=(0,a.useMemo)(()=>(0,T.yn)(e),[e]),d=(0,a.useCallback)(e=>l(f.w9({votePinId:e})),[l]),u=(0,a.useCallback)(e=>l(f.rT({votePinId:e})),[l]),m=function({votedNodes:e}){let[t,n]=(0,a.useState)({}),r=(0,a.useMemo)(()=>e.map(e=>e.guid),[e]);return(0,a.useEffect)(()=>{if(!r.length){n({});return}let e="vote-pins",t=(0,S.EE)(e,r,e=>{n(t=>({...t,[e.nodeId]:e.position}))});return n(Object.entries(t.currentNodePosition).reduce((e,[t,n])=>(n&&(e[t]=n.position),e),{})),()=>{(0,S.lB)(e)}},[r]),t}({votedNodes:e});return a.createElement(a.Fragment,null,e.map(e=>{let r=m[e.guid];if(!r)return null;let l=1===c.size&&c.has(e.guid)&&t===o.W8Y.ENDED;return a.createElement(P,{key:e.guid,nodeVoteInfo:e,isMostVoted:l,isSelected:n===e.guid,isHoveredInModal:s===e.guid,isOtherPinSelected:!!n&&n!==e.guid,selectPin:d,deselectPin:u,nodePosition:r,currentUserId:i})}))}},599486:(e,t,n)=>{n.d(t,{BV:()=>o,CB:()=>k,Cu:()=>O,D5:()=>h,EW:()=>p,G7:()=>r,Gg:()=>A,H$:()=>D,H0:()=>c,HK:()=>M,I5:()=>G,JK:()=>x,Mi:()=>C,N$:()=>s,QD:()=>B,QZ:()=>P,R8:()=>L,Un:()=>S,Vq:()=>F,Yl:()=>f,Ys:()=>i,_K:()=>g,ak:()=>v,c1:()=>I,dA:()=>T,dH:()=>m,h9:()=>_,kj:()=>E,lm:()=>N,pt:()=>b,qn:()=>w,rQ:()=>y,sJ:()=>U,xL:()=>l,xf:()=>u,yc:()=>d,zp:()=>R});var a=n(411855);let r="https://static.figma.com/uploads/054596349bf8a2ae155aa7818cf2a3cbf483a9f4",i="https://static.figma.com/uploads/295306027f272a9b0931ddec9321361f7cd8299b";function l(){return a.createElement("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 3.5C8.5 4.88071 7.38071 6 6 6C4.61929 6 3.5 4.88071 3.5 3.5C3.5 2.11929 4.61929 1 6 1C7.38071 1 8.5 2.11929 8.5 3.5ZM9.5 3.5C9.5 5.433 7.933 7 6 7C4.067 7 2.5 5.433 2.5 3.5C2.5 1.567 4.067 0 6 0C7.933 0 9.5 1.567 9.5 3.5ZM17 5C17 6.10457 16.1046 7 15 7C13.8954 7 13 6.10457 13 5C13 3.89543 13.8954 3 15 3C16.1046 3 17 3.89543 17 5ZM18 5C18 6.65685 16.6569 8 15 8C13.3431 8 12 6.65685 12 5C12 3.34315 13.3431 2 15 2C16.6569 2 18 3.34315 18 5ZM13.2108 10.4215C13.7492 10.1518 14.3569 10 15 10C17.2091 10 19 11.7909 19 14H20C20 11.2386 17.7614 9 15 9C14.1612 9 13.3706 9.20657 12.6763 9.57162C12.8743 9.83933 13.0532 10.1234 13.2108 10.4215ZM12 14H11C11 11.2386 8.76142 9 6 9C3.23858 9 1 11.2386 1 14H0C0 10.6863 2.68629 8 6 8C9.31371 8 12 10.6863 12 14Z"}))}function o({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4137_211384)"},a.createElement("g",{clipPath:"url(#clip1_4137_211384)"},a.createElement("rect",{width:"64",height:"64",transform:"translate(0 16.3726) rotate(-15)",fill:e}),a.createElement("rect",{x:"12.7651",y:"25.3755",width:"44",height:"6",transform:"rotate(-15 12.7651 25.3755)",fill:"black",fillOpacity:"0.15"}),a.createElement("rect",{x:"15.871",y:"36.9666",width:"32",height:"6",transform:"rotate(-15 15.871 36.9666)",fill:"black",fillOpacity:"0.15"}))),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4137_211384"},a.createElement("rect",{width:"40",height:"72",fill:"white"})),a.createElement("clipPath",{id:"clip1_4137_211384"},a.createElement("rect",{width:"64",height:"64",fill:"white",transform:"translate(0 16.3726) rotate(-15)"}))))}function s(){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4119_210884)"},a.createElement("rect",{x:"1.93188",y:"17.8704",width:"40",height:"40",rx:"8",transform:"rotate(-15 1.93188 17.8704)",fill:"white"}),a.createElement("rect",{x:"4.65869",y:"35.7747",width:"4",height:"4",transform:"rotate(-15 4.65869 35.7747)",fill:"black",fillOpacity:"0.8"}),a.createElement("path",{d:"M6.55591 33.1958L4.61477 25.9514C3.47123 21.6836 5.43444 17.4495 9.59547 16.3346L33.1641 10.0194C37.3251 8.90444 41.1423 11.5897 42.2859 15.8574L44.227 23.1019",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{d:"M8.62646 40.9232L10.5676 48.1676C11.7111 52.4354 15.5284 55.1206 19.6894 54.0057L43.258 47.6905C47.419 46.5755 49.3822 42.3414 48.2387 38.0737L46.2976 30.8293",stroke:"black",strokeOpacity:"0.2"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M32.2731 19.058L14.8865 23.7167L15.4041 25.6486L23.1315 23.578L28.3079 42.8965L30.2398 42.3789L25.0634 23.0604L32.7908 20.9898L32.2731 19.058Z",fill:"black",fillOpacity:"0.8"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4119_210884"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function c(){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4119_210979)"},a.createElement("rect",{x:"0.87391",y:"13.0737",width:"10",height:"10",rx:"2",transform:"rotate(-15.0378 0.87391 13.0737)",fill:"white",stroke:"#0D99FF",strokeWidth:"2",strokeLinecap:"square"}),a.createElement("rect",{x:"17.4791",y:"74.8821",width:"10",height:"10",rx:"2",transform:"rotate(-15.0378 17.4791 74.8821)",fill:"white",stroke:"#0D99FF",strokeWidth:"2",strokeLinecap:"square"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M47.6782 27.9006L46.2859 22.7045L48.2177 22.1868L49.5833 27.2831L54.6798 25.9175L55.1974 27.8493L50.0013 29.2416L49.5104 27.4096L47.6782 27.9006ZM32.6806 33.8827L27.4845 35.275L26.9668 33.3431L32.0632 31.9775L30.6977 26.8814L32.6296 26.3637L34.0219 31.5598L34.1216 31.5331L47.5783 27.9274L49.5101 27.4097L50.0278 29.3416L53.6335 42.7982L54.1511 44.7301L52.2193 45.2477L38.7626 48.8534L36.8308 49.3711L36.8308 49.3711L38.6628 48.8802L40.0551 54.0763L38.1232 54.594L36.7577 49.4977L31.6615 50.8632L31.1438 48.9314L36.3399 47.5391L36.3131 47.4392L32.7074 33.9826L32.1898 32.0507L32.1897 32.0508L32.6806 33.8827ZM48.0959 29.8592L34.6393 33.4649L38.245 46.9216L51.7016 43.3159L48.0959 29.8592ZM54.278 44.8033L59.3744 43.4378L58.8568 41.5059L53.6607 42.8982L54.1515 44.73L52.3193 45.221L53.7116 50.4171L55.6435 49.8994L54.278 44.8033Z",fill:"#0D99FF"}),a.createElement("rect",{x:"7",y:"16.6052",width:"64",height:"64",transform:"rotate(-15.0378 7 16.6052)",stroke:"#0D99FF",strokeWidth:"2"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4119_210979"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function d(){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4121_211214)"},a.createElement("rect",{x:"0.87391",y:"13.0737",width:"10",height:"10",rx:"2",transform:"rotate(-15.0378 0.87391 13.0737)",fill:"white",stroke:"#9747FF",strokeWidth:"2",strokeLinecap:"square"}),a.createElement("rect",{x:"17.4789",y:"74.8821",width:"10",height:"10",rx:"2",transform:"rotate(-15.0378 17.4789 74.8821)",fill:"white",stroke:"#9747FF",strokeWidth:"2",strokeLinecap:"square"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M35.8154 33.1697L40.4705 25.1453L48.5141 29.7671L43.859 37.7915L35.8154 33.1697ZM37.1696 49.4156L29.1452 44.7605L33.767 36.7169L41.7914 41.372L37.1696 49.4156ZM53.4151 48.061L48.76 56.0855L40.7164 51.4636L45.3715 43.4392L53.4151 48.061ZM60.0855 36.4702L52.0611 31.8151L47.4393 39.8587L55.4637 44.5138L60.0855 36.4702Z",fill:"#8638E5"}),a.createElement("rect",{x:"7",y:"16.6052",width:"64",height:"64",transform:"rotate(-15.0378 7 16.6052)",stroke:"#9747FF",strokeWidth:"2"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4121_211214"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function u(){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4591_210267)"},a.createElement("rect",{x:"-2",y:"15.4233",width:"48",height:"48",rx:"9.6",transform:"rotate(-15 -2 15.4233)",fill:"white"}),a.createElement("rect",{x:"-1.26515",y:"15.8476",width:"46.8",height:"46.8",rx:"9",transform:"rotate(-15 -1.26515 15.8476)",stroke:"black",strokeOpacity:"0.2",strokeWidth:"1.2"}),a.createElement("circle",{cx:"31.4811",cy:"24.4658",r:"4.2",transform:"rotate(-15 31.4811 24.4658)",stroke:"black",strokeOpacity:"0.8",strokeWidth:"2.4"}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.606 20.7418L36.1064 13.909C37.3868 13.566 38.7028 14.3258 39.0458 15.6061L45.8786 41.1065C46.2217 42.3868 45.4619 43.7028 44.1816 44.0459L42.4018 44.5228L21.5894 30.0419L20.6167 29.3651L19.9277 30.3293L13.2094 39.7307L8.90894 23.6812C8.56588 22.4009 9.32568 21.0849 10.606 20.7418ZM14.0138 42.7329L15.7418 49.1817C16.0848 50.462 17.4008 51.2218 18.6812 50.8787L39.368 45.3357L21.1914 32.6888L14.0138 42.7329ZM6.59072 24.3024C5.9046 21.7418 7.4242 19.1097 9.98483 18.4236L35.4853 11.5908C38.0459 10.9047 40.6779 12.4243 41.364 14.9849L48.1969 40.4854C48.883 43.046 47.3634 45.678 44.8028 46.3641L19.3023 53.197C16.7417 53.8831 14.1097 52.3635 13.4235 49.8028L6.59072 24.3024Z",fill:"black",fillOpacity:"0.8"})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4591_210267"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function m({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4121_211235)"},a.createElement("rect",{y:"16.5644",width:"64",height:"64",rx:"3",transform:"rotate(-15 0 16.5644)",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4121_211235"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function p({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4171_210078)"},a.createElement("rect",{x:"-5.5",y:"14.4346",width:"88.7204",height:"72.0853",rx:"25.2992",transform:"rotate(-15 -5.5 14.4346)",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4171_210078"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function _({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4171_210088)"},a.createElement("path",{d:"M16.5562 8.25247C16.8973 6.92671 18.0926 6 19.4615 6L89.4516 6C91.4118 6 92.8454 7.84915 92.357 9.74752L73.765 82.0085C73.4239 83.3342 72.2286 84.2609 70.8596 84.2609H0.869569C-1.09063 84.2609 -2.52423 82.4118 -2.0358 80.5134L16.5562 8.25247Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4171_210088"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function g({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4173_210152)"},a.createElement("path",{d:"M75.9438 8.25247C75.6027 6.92671 74.4074 6 73.0385 6L3.04841 6C1.08821 6 -0.34539 7.84915 0.143036 9.74752L18.735 82.0085C19.0761 83.3342 20.2714 84.2609 21.6404 84.2609H91.6304C93.5906 84.2609 95.0242 82.4118 94.5358 80.5134L75.9438 8.25247Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4173_210152"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function f({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4119_210848)"},a.createElement("circle",{cx:"40",cy:"46",r:"40",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4119_210848"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function h({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4119_210856)"},a.createElement("g",{clipPath:"url(#clip1_4119_210856)"},a.createElement("path",{d:"M18.693 6.40686C19.2012 4.50766 21.9085 3.78226 23.2982 5.17292L82.5015 64.4167C83.7556 65.6717 82.9788 67.752 81.0647 68.2649L0.211739 89.9294C-1.70237 90.4423 -3.41521 89.029 -2.95662 87.3152L18.693 6.40686Z",fill:e}))),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4119_210856"},a.createElement("rect",{width:"40",height:"72",fill:"white"})),a.createElement("clipPath",{id:"clip1_4119_210856"},a.createElement("rect",{width:"89.0428",height:"77.1705",fill:"white",transform:"translate(-22.3394 16.0794) rotate(-15)"}))))}function E({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4121_211255)"},a.createElement("path",{d:"M51.3523 84.6094C52.5437 86.3294 55.5163 86.0834 56.4088 84.191L94.4305 3.57293C95.2359 1.86524 93.7104 0.0603115 91.6086 0.234234L2.83059 7.58081C0.728861 7.75473 -0.479214 9.78588 0.59593 11.3379L51.3523 84.6094Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4121_211255"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function y({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4119_210865)"},a.createElement("ellipse",{cx:"36.0212",cy:"10.0459",rx:"36.2221",ry:"8.35894",transform:"rotate(-15 36.0212 10.0459)",fill:e}),a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M72.0853 4.68736C67.4361 9.37258 54.7615 15.1933 39.2535 19.3486C21.2873 24.2612 6.9678 24.914 1.84497 22.4498L15.4556 73.2452L15.4564 73.2483L15.4564 73.2483C16.6513 77.7075 33.2845 77.1251 52.6077 71.9474C71.9309 66.7698 86.6269 58.9575 85.4321 54.4984L72.0853 4.68736Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4119_210865"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function b({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4171_210106)"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.30957 14.019C11.2258 17.2597 17.7809 30.6301 22.2705 47.3855C27.6619 67.5064 28.033 84.8893 23.0994 86.2112C22.8341 86.2823 22.5589 86.3055 22.2747 86.2826L22.3557 86.5848L94.06 67.3717L94.072 67.3685L94.0839 67.3652L94.4168 67.276L94.4086 67.2455C98.6089 65.2803 97.911 48.5964 92.7387 29.2931C87.5664 9.98975 79.8288 -4.80791 75.2087 -4.40965L75.2005 -4.44026L6.30957 14.019Z",fill:e}),a.createElement("ellipse",{rx:"37.1231",ry:"8.56687",transform:"matrix(-0.258819 -0.965926 -0.965926 0.258819 12.747 50.7267)",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4171_210106"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function v({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4121_211283)"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M67.808 -0.216748L71.1184 12.1379L84.015 60.2684C84.2789 61.2533 83.6944 62.2656 82.7096 62.5295L14.95 80.6856C13.9636 80.9499 12.9501 80.3633 12.6879 79.3764L0.985107 35.3241L17.2244 30.9728C18.2736 30.6916 18.8962 29.6132 18.6151 28.564L14.2374 12.2262L65.5469 -1.52218C66.5318 -1.78607 67.5441 -1.20161 67.808 -0.216748ZM14.1879 12.2394L12.5651 12.6743L12.5663 12.6788L14.1879 12.2394Z",fill:e}),a.createElement("path",{d:"M0.453613 33.7343L15.3437 29.7445C16.2999 29.4883 16.8674 28.5054 16.6112 27.5492L12.6214 12.6591L0.453613 33.7343Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4121_211283"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function C({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_4121_211302)"},a.createElement("path",{d:"M1.59945 13.1347C1.69191 12.2997 2.28702 11.6068 3.09854 11.3894L33.2368 3.31384C34.0484 3.09639 34.9102 3.39889 35.4078 4.07583L43.442 15.006L0.106658 26.6177L1.59945 13.1347Z",fill:e}),a.createElement("path",{d:"M0.49585 28.071L77.3176 7.48667C78.4055 7.19517 79.5237 7.84077 79.8152 8.92866L93.0608 58.3616C93.3523 59.4495 92.7067 60.5677 91.6188 60.8592L16.7668 80.9157C15.6789 81.2072 14.5607 80.5616 14.2692 79.4737L0.49585 28.071Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_4121_211302"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function w({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1508_10125)"},a.createElement("path",{d:"M114.56 0.523225L5.97986 10.0227C2.09706 10.3624 -0.43629 14.2562 0.826349 17.9436L23.8419 80.1745C24.7355 82.7842 27.2933 84.4483 30.0413 84.2079L103.746 77.7596C106.494 77.5192 108.724 75.4361 109.151 72.7109L121.01 7.42886C121.613 3.57818 118.442 0.183524 114.56 0.523225Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1508_10125"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function T({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1_2)"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.0018 18.1129C2.35849 15.712 3.7829 13.2449 6.18378 12.6015L8.11564 12.0839L28.0447 86.4602L26.1128 86.9778C23.712 87.6211 21.2448 86.1967 20.6015 83.7958L3.0018 18.1129ZM30.9425 85.6837L11.0134 11.3074L67.0371 -3.70406L86.9662 70.6722L30.9425 85.6837ZM89.864 69.8958L69.9349 -4.48052L71.8667 -4.99815C74.2676 -5.64147 76.7348 -4.21705 77.3781 -1.81617L94.9778 63.8668C95.6211 66.2677 94.1967 68.7348 91.7958 69.3781L89.864 69.8958Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1_2"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function S({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1508_9936)"},a.createElement("path",{d:"M1.28373 39.4007L27.401 4.53364C29.0584 2.33788 31.9967 1.55056 34.5299 2.62346L74.5817 19.7606C76.9322 20.7561 78.3955 23.1298 78.2289 25.677L74.5428 65.0534C74.3751 67.6187 72.5917 69.7921 70.1085 70.4574L30.506 81.0689C28.0228 81.7343 25.3917 80.7438 23.9638 78.606L1.08334 46.3481C-0.334505 44.2255 -0.254107 41.4381 1.28373 39.4007Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1508_9936"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function x({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1508_9948)"},a.createElement("path",{d:"M77.1821 12.7227L54.9038 -0.139714C53.5257 -0.935364 51.8879 -1.15098 50.3509 -0.739117L23.3659 6.49148C21.8288 6.90334 20.5183 7.90893 19.7227 9.28704L6.8603 31.5654C6.06465 32.9435 5.84904 34.5812 6.2609 36.1183L13.4915 63.1032C13.9034 64.6403 14.9089 65.9508 16.2871 66.7465L38.5654 79.6089C39.9435 80.4045 41.5812 80.6201 43.1183 80.2083L70.1032 72.9777C71.6403 72.5658 72.9508 71.5602 73.7465 70.1821L86.6089 47.9038C87.4045 46.5257 87.6201 44.888 87.2083 43.3509L79.9777 16.3659C79.5658 14.8288 78.5602 13.5183 77.1821 12.7227Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1508_9948"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function k({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1508_9990)"},a.createElement("path",{d:"M4.38961 47.4437L8.7529 18.3221C9.07419 15.9214 10.8074 13.9494 13.147 13.3225L79.3093 -4.40567C81.6489 -5.03256 84.1359 -4.1913 85.6145 -2.2729L103.954 20.7655C104.931 22.033 105.361 23.6381 105.149 25.2242L100.785 54.3458C100.464 56.7465 98.7309 58.7186 96.3914 59.3454L30.229 77.0736C27.8895 77.7005 25.4024 76.8592 23.9238 74.9408L5.58431 51.9024C4.60744 50.635 4.17733 49.0298 4.38961 47.4437Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1508_9990"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function N({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1508_10069)"},a.createElement("path",{d:"M78.3034 46.7945L75.2573 11.9772C74.9685 8.67607 72.0583 6.23413 68.7572 6.52293L5.97724 12.0155C2.67614 12.3043 0.234196 15.2145 0.523004 18.5156L3.56912 53.3329C3.75676 55.4776 5.07913 57.3574 7.03428 58.2588L40.0733 74.3612C42.003 75.2509 44.2594 75.0535 46.0054 73.8422L75.7463 52.2473C77.5152 51.0201 78.4911 48.9392 78.3034 46.7945Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1508_10069"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function I({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1508_10082)"},a.createElement("path",{d:"M53.8362 -0.906348L28.8877 3.49274C25.6243 4.06816 23.4453 7.18012 24.0207 10.4435L25.9888 21.6046C26.5642 24.868 24.3852 27.98 21.1218 28.5554L9.96064 30.5234C6.69727 31.0988 4.51826 34.2108 5.09368 37.4741L9.49277 62.4226C10.0682 65.686 13.1801 67.865 16.4435 67.2896L27.6047 65.3216C30.868 64.7461 33.98 66.9252 34.5554 70.1885L36.5234 81.3496C37.0988 84.613 40.2108 86.792 43.4741 86.2166L68.4226 81.8175C71.686 81.2421 73.865 78.1301 73.2896 74.8668L71.3216 63.7056C70.7462 60.4423 72.9252 57.3303 76.1885 56.7549L87.3497 54.7869C90.613 54.2115 92.792 51.0995 92.2166 47.8362L87.8175 22.8877C87.2421 19.6243 84.1302 17.4453 80.8668 18.0207L69.7057 19.9887C66.4423 20.5641 63.3304 18.3851 62.7549 15.1218L60.7869 3.96061C60.2115 0.697243 57.0996 -1.48177 53.8362 -0.906348Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1508_10082"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function A({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1508_10095)"},a.createElement("path",{d:"M53.9511 20.3098L42.1525 3.16336C39.1912 0.00572091 33.9624 0.927699 32.2597 4.90774L27.0372 25.0555C26.4488 26.4308 25.3678 27.5367 24.0063 28.1564L3.71302 33.8825C-0.294145 35.7063 -1.03771 41.0813 2.32381 43.9245L20.084 54.7429C21.247 55.7266 21.9924 57.1158 22.1689 58.6287L21.3874 79.2433C21.8923 83.5712 26.6965 85.9346 30.4331 83.6935L46.7061 70.2694C47.9748 69.5084 49.4799 69.243 50.9323 69.5242L70.8153 76.573C75.0931 77.401 78.7991 73.537 77.7934 69.2974L70.0084 50.1933C69.6568 48.7113 69.8821 47.1509 70.6385 45.8288L83.6275 29.5885C85.8139 25.767 83.2768 20.9705 78.8875 20.6272L57.8597 22.1872C56.3683 22.0705 54.9743 21.401 53.9511 20.3098Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1508_10095"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function O({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1508_10138)"},a.createElement("path",{d:"M12.85 78.4563L1.39908 13.5151C0.701528 9.55913 4.01276 6.04841 8.00276 6.51361L106.493 17.9966C109.127 18.3037 111.247 20.3031 111.707 22.9144L118.224 59.876C118.8 63.1393 116.621 66.2513 113.357 66.8267L19.8007 83.3233C16.5373 83.8987 13.4254 81.7197 12.85 78.4563Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1508_10138"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function L({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1508_10170)"},a.createElement("path",{d:"M3.52293 10.7657C3.23413 7.46464 5.67607 4.55445 8.97717 4.26564L88.0582 -2.65305C91.3593 -2.94186 94.2695 -0.499919 94.5583 2.80118L98.93 52.7701C99.3106 57.1197 95.0142 60.5495 90.7364 59.6753C85.6875 58.6434 79.1215 57.7867 72.6631 58.3517C59.3871 59.5132 46.8006 72.394 33.8579 73.5263C25.4977 74.2577 16.8948 72.2143 12.2232 70.8232C10.0275 70.1694 8.54803 68.2028 8.34835 65.9205L3.52293 10.7657Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1508_10170"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function D({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1508_10181)"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.3176 14.6705C1.88439 9.71881 5.54731 5.35352 10.499 4.92031L74.9606 -0.719357C77.7924 -0.967105 80.3366 0.794636 81.185 3.38441L12.8314 9.36458C8.98009 9.70152 6.13115 13.0967 6.4681 16.948L10.3685 61.53L7.72221 60.9899C6.90554 60.8233 6.29563 60.1395 6.22298 59.3092L2.3176 14.6705ZM13.0928 12.3532L15.0852 12.1789L81.6029 6.35932L83.1972 6.21983C86.4983 5.93102 89.4085 8.37296 89.6973 11.6741L93.3699 53.6516C93.7502 57.9988 89.453 61.4325 85.1642 60.627C80.8923 59.8246 75.5894 59.2269 70.3662 59.6838C64.4909 60.1979 58.7686 63.3152 53.0827 66.4127C47.4685 69.4711 41.8899 72.5101 36.2345 73.0049C29.1375 73.6258 21.8422 71.9786 17.6488 70.7666C15.4459 70.1298 13.96 68.1595 13.7601 65.8752L13.4347 62.1558L9.63099 18.679L9.45668 16.6866C9.26414 14.4858 10.8921 12.5457 13.0928 12.3532Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1508_10181"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function R({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_1508_10194)"},a.createElement("path",{d:"M13.5958 79.9017C8.77167 80.3237 5.46072 75.1516 7.86364 70.9473L21.5019 47.0847C22.744 44.9115 22.5064 42.1954 20.9058 40.2709L3.33102 19.1391C0.234531 15.4159 2.59704 9.74744 7.42117 9.32538L90.1645 2.08628C92.2987 1.89955 94.3706 2.86499 95.6004 4.61925L115.109 32.4478C116.341 34.205 116.541 36.4863 115.633 38.4307L101.253 69.2241C100.346 71.1653 98.4734 72.4758 96.3391 72.6626L13.5958 79.9017Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_1508_10194"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function M({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_2094_1753)"},a.createElement("path",{d:"M16.731 20.0212C13.2433 16.3882 7.10166 18.409 6.4527 23.4032L1.37881 62.4502C0.884517 66.2541 4.03759 69.5386 7.85853 69.1999L47.08 65.7235C52.0965 65.2788 54.3663 59.2248 50.8786 55.5917L46.4318 50.9596L85.863 13.1058C88.2534 10.811 88.331 7.01278 86.0361 4.62231L69.0925 -13.0273C66.7977 -15.4178 62.9995 -15.4953 60.609 -13.2005L21.1778 24.6533L16.731 20.0212Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_2094_1753"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function P({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_2094_1725)"},a.createElement("path",{d:"M52.9651 15.8477L35.2998 41.0764L59.9709 58.3513C64.1126 51.7654 65.9172 43.6796 64.4598 35.4144C63.0477 27.4063 58.8158 20.6037 52.9651 15.8477ZM49.7126 13.5191L32.0232 38.7821L6.79163 21.1147C11.5638 14.9703 18.5448 10.5091 26.81 9.05173C35.0608 7.59689 43.133 9.39265 49.7126 13.5191ZM4.53573 24.4182L29.7289 42.0587L12.4783 66.6951C6.35043 61.9235 1.90212 54.9524 0.447277 46.7016C-0.962241 38.7078 0.67945 30.8817 4.53573 24.4182ZM15.779 68.955C22.2492 72.8262 30.089 74.4763 38.0971 73.0642C46.0909 71.6547 52.8835 67.4354 57.6382 61.601L33.0055 44.353L15.779 68.955Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_2094_1725"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function F({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_2094_1739)"},a.createElement("path",{d:"M28.644 8.74898L34.0412 39.3575L64.2193 34.0363C62.5252 26.3602 58.0606 19.2724 51.1138 14.4082C44.3027 9.63898 36.299 7.84315 28.644 8.74898Z",fill:e}),a.createElement("path",{d:"M25.4365 9.29133L30.8376 39.9224L0.206747 45.3234C-0.826765 37.5308 0.944422 29.3435 5.80863 22.3967C10.6728 15.45 17.7605 10.9854 25.4365 9.29133Z",fill:e}),a.createElement("path",{d:"M0.79417 48.523L31.4025 43.126L36.7236 73.3038C28.9311 74.3373 20.7439 72.5661 13.7972 67.7019C6.98606 62.9327 2.56115 56.0261 0.79417 48.523Z",fill:e}),a.createElement("path",{d:"M39.9232 72.7164C47.4263 70.9495 54.3331 66.5246 59.1023 59.7134C63.8715 52.9023 65.6673 44.8987 64.7616 37.2438L34.606 42.5611L39.9232 72.7164Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_2094_1739"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function B({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_2094_1770)"},a.createElement("path",{d:"M16.7681 5.48015C8.61136 6.30146 2.66482 13.5796 3.48613 21.7363L5.92497 45.9576C6.74628 54.1143 14.0244 60.0609 22.1811 59.2396L22.4765 59.2098L23.2086 66.48C23.4012 68.393 25.6685 69.2962 27.1238 68.0396L39.3133 57.5145L68.2606 54.5998C76.4174 53.7785 82.3639 46.5004 81.5426 38.3436L79.1038 14.1224C78.2825 5.96563 71.0043 0.01909 62.8476 0.840394L16.7681 5.48015Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_2094_1770"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function U({color:e="#699BF7"}){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_2094_1787)"},a.createElement("path",{d:"M4.01281 14.3118C3.61202 11.0224 5.95368 8.03096 9.24306 7.63016L9.73939 7.56969L10.5256 14.022L4.07329 14.8081L4.01281 14.3118ZM4.43614 17.7861L12.7213 85.7832C13.122 89.0726 16.1135 91.4143 19.4029 91.0135L19.8992 90.953L10.8884 16.9999L4.43614 17.7861ZM13.8664 16.6371L22.8772 90.5902L106.757 80.3698C110.046 79.969 112.388 76.9776 111.987 73.6882L103.702 5.69107L13.8664 16.6371ZM103.339 2.71309L103.279 2.21676C102.878 -1.07262 99.8864 -3.41428 96.597 -3.01349L12.7174 7.20684L13.5035 13.6591L103.339 2.71309Z",fill:e})),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_2094_1787"},a.createElement("rect",{width:"40",height:"72",fill:"white"}))))}function G(){return a.createElement("svg",{width:"40",height:"72",viewBox:"0 0 40 72",fill:"none",xmlns:"http://www.w3.org/2000/svg"},a.createElement("g",{clipPath:"url(#clip0_5859_244544)"},a.createElement("g",{clipPath:"url(#clip1_5859_244544)"},a.createElement("rect",{x:"-0.191895",y:"16.3726",width:"64",height:"64.7102",rx:"4",transform:"rotate(-15 -0.191895 16.3726)",fill:"#2F2746"}),a.createElement("rect",{x:"12.5732",y:"25.3755",width:"44",height:"6",transform:"rotate(-15 12.5732 25.3755)",fill:"#514670"}),a.createElement("rect",{x:"23.4062",y:"34.8961",width:"32",height:"6",transform:"rotate(-15 23.4062 34.8961)",fill:"#514670"}),a.createElement("rect",{x:"26.5122",y:"46.4872",width:"32",height:"6",transform:"rotate(-15 26.5122 46.4872)",fill:"#514670"}),a.createElement("rect",{x:"21.8906",y:"60.1488",width:"6",height:"6",transform:"rotate(-15 21.8906 60.1488)",fill:"#514670"}))),a.createElement("defs",null,a.createElement("clipPath",{id:"clip0_5859_244544"},a.createElement("rect",{width:"40",height:"72",fill:"white"})),a.createElement("clipPath",{id:"clip1_5859_244544"},a.createElement("rect",{x:"-0.191895",y:"16.3726",width:"64",height:"64.7102",rx:"4",transform:"rotate(-15 -0.191895 16.3726)",fill:"white"}))))}},430823:(e,t,n)=>{n.d(t,{J:()=>M});var a=n(411855),r=n(188507),i=n(629019),l=n.n(i),o=n(374626),s=n(153234),c=n(939863),d=n(226055),u=n(369870),m=n(498606),p=n(624829),_=n(318137),g=n(973721),f=n(125563),h=n(728406),E=n(802174),y=n(838266),b=n(711495),v=n(140871),C=n(522322),w=n(900073),T=n(487392),S=n(931828),x=n(309798);let k=e=>e.multiplayer.allUsers.filter((e,t,n)=>t===n.findIndex(t=>t.userID===e.userID)).length,N="seen_figjam_meetings_panel_gleam";var I=n(358145);let A={duration:1500,fill:"none"};function O(){return a.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"100%",height:"100%"}},a.createElement("g",{filter:"url(#filter0_d_3305_12330)"},a.createElement("path",{d:"M20.2469 10.6915L20.2471 10.6913C21.1037 9.81654 20.693 8.21534 19.3809 8.01578C19.3809 8.01577 19.3808 8.01576 19.3807 8.01575L14.8346 7.32381L12.7941 2.99403C12.2333 1.80375 10.5666 1.79999 10.0055 2.99476C10.0054 2.99498 10.0053 2.99521 10.0052 2.99543L7.96535 7.32381L3.41928 8.01575C3.41921 8.01576 3.41914 8.01577 3.41908 8.01578C2.107 8.21534 1.69633 9.81654 2.55291 10.6913L2.55308 10.6915L5.86693 14.0741L5.08327 18.8605C5.08326 18.8606 5.08325 18.8606 5.08324 18.8607C4.88746 20.0559 6.12574 21.1809 7.34457 20.5087L11.4 18.2756L15.4554 20.5087C15.4556 20.5088 15.4558 20.5088 15.456 20.5089C16.6746 21.1805 17.9125 20.0557 17.7168 18.8607C17.7167 18.8606 17.7167 18.8606 17.7167 18.8605L16.9331 14.0741L20.2469 10.6915Z",fill:"#FFC700",stroke:"white",strokeWidth:"1.8"}),a.createElement("path",{d:"M18.8131 12.5161C18.4636 11.4367 16.9364 11.4367 16.5869 12.5161L15.8361 14.8349L13.7375 15.7224C12.7851 16.1252 12.7851 17.4748 13.7375 17.8776L15.8361 18.7651L16.5869 21.0839C16.9364 22.1634 18.4636 22.1633 18.8131 21.0839L19.5639 18.7651L21.6625 17.8776C22.6149 17.4748 22.6149 16.1252 21.6625 15.7224L19.5639 14.8349L18.8131 12.5161Z",fill:"url(#paint0_linear_3305_12330)"}),a.createElement("path",{d:"M18.8131 12.5161C18.4636 11.4367 16.9364 11.4367 16.5869 12.5161L15.8361 14.8349L13.7375 15.7224C12.7851 16.1252 12.7851 17.4748 13.7375 17.8776L15.8361 18.7651L16.5869 21.0839C16.9364 22.1634 18.4636 22.1633 18.8131 21.0839L19.5639 18.7651L21.6625 17.8776C22.6149 17.4748 22.6149 16.1252 21.6625 15.7224L19.5639 14.8349L18.8131 12.5161Z",fill:"url(#paint1_linear_3305_12330)"}),a.createElement("path",{d:"M18.8131 12.5161C18.4636 11.4367 16.9364 11.4367 16.5869 12.5161L15.8361 14.8349L13.7375 15.7224C12.7851 16.1252 12.7851 17.4748 13.7375 17.8776L15.8361 18.7651L16.5869 21.0839C16.9364 22.1634 18.4636 22.1633 18.8131 21.0839L19.5639 18.7651L21.6625 17.8776C22.6149 17.4748 22.6149 16.1252 21.6625 15.7224L19.5639 14.8349L18.8131 12.5161Z",stroke:"white",strokeWidth:"1.8"})),a.createElement("defs",null,a.createElement("filter",{id:"filter0_d_3305_12330",x:"-1.5",y:"-1",width:"27",height:"27",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},a.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),a.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),a.createElement("feOffset",{dy:"0.5"}),a.createElement("feGaussianBlur",{stdDeviation:"0.75"}),a.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.35 0"}),a.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3305_12330"}),a.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3305_12330",result:"shape"})),a.createElement("linearGradient",{id:"paint0_linear_3305_12330",x1:"13.5",y1:"12",x2:"21.9",y2:"21.6",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"#F7C000"}),a.createElement("stop",{offset:"1",stopColor:"#E8B604"})),a.createElement("linearGradient",{id:"paint1_linear_3305_12330",x1:"21.9",y1:"21.6",x2:"13.5",y2:"12",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"white",stopOpacity:"0"}),a.createElement("stop",{offset:"0.418743",stopColor:"white",stopOpacity:"0.15"}),a.createElement("stop",{offset:"0.504534",stopColor:"white",stopOpacity:"0.63"}),a.createElement("stop",{offset:"0.588015",stopColor:"white",stopOpacity:"0.15"}),a.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0"}))))}let L="meeting_tools_toolbar--withHover--r7Sks",D="meeting_tools_toolbar--selected--Lt0iR",R="meeting_tools_toolbar--hide--t1ZI-";function M(){let e=(0,d.GS)(),t=(0,o.md)(w.Qs),n=(0,T.qU)(),i=(0,T.MR)(),g=(0,T.II)(),[O]=(0,E.Jg)(),{renderGleam:M}=function(e){let[t,n]=a.useState(!1),i=(0,r.d4)(k),l=(0,x.f)(N),o=(0,r.wA)(),s=i>1&&!l;return a.useEffect(()=>{if(!s)return;let t=window.setTimeout(()=>{n(!0),o(S.b({[N]:!0}))},e?.delay_ms||1e4);return()=>clearTimeout(t)},[s,e?.delay_ms,o]),{renderGleam:t}}({delay_ms:2e3}),B=a.useCallback(()=>{t.isOpen?n({source:T.OO.MEETINGS_TOOLBAR}):i({source:T.OO.MEETINGS_TOOLBAR})},[t,n,i]),U=function(){let e=(0,d.GS)(),t=(0,T.II)();if(0===t.length)return"ALL";let n=1===t.length&&t.includes(w.sx.TIMER);return 1===t.length&&t.includes(w.sx.VOTING)||2===t.length&&t.includes(w.sx.VOTING)&&t.includes(w.sx.TIMER)?"VOTE":e&&n?"NONE":"MUSIC"}(),G=function(){let e=(0,T.II)(),t=(0,d.GS)();return 0===e.length?t?f.sD.SECONDARY:f.sD.TERTIARY:e.includes(w.sx.TIMER)&&e.includes(w.sx.VOTING)?f.sD.SECONDARY:f.sD.DEFAULT}(),K=g.includes(w.sx.TIMER)||0===g.length,V=g.includes(w.sx.MUSIC),H=function(){let e=(0,T.II)(),t=(0,v.C3)(),n=(0,r.d4)(e=>e.music.music),a=n?.selectedSongID||"",i=(0,_.N)(a);return e.includes(w.sx.VOTING)&&t?(0,C.DG)(t):e.includes(w.sx.MUSIC)&&1===e.length?i?.title:void 0}(),z=a.useRef(null),W=a.useRef(null),j=a.useRef(null),$=a.useRef(null),q=a.useRef(null);!function(e,t,n,r,i,l,s){let[c,d]=a.useState([]);a.useLayoutEffect(()=>{let a={transform:"scale(1)",boxShadow:"0px 0px 0px 0px var(--color-border)"},l={backgroundColor:"var(--color-bg-figjam)"};s&&(l.borderColor="var(--color-bg-figjam)");let o=new KeyframeEffect(e.current,[{offset:0,...a},{offset:.2,...a},{offset:.4,transform:"scale(1.05)",boxShadow:"0px 2.5px 5px 0px var(--color-border)"},{offset:.5,...a},{offset:.6,transform:"scale(1.025)",boxShadow:"0px 1.25px 2.5px 0px var(--color-border)"},{offset:.8,...a},{offset:1,...a}],A),c=new KeyframeEffect(i.current,[{offset:.4,...l},{offset:.62,...l},{offset:.77,backgroundColor:"var(--color-bg-secondary)"}],A),u=new KeyframeEffect(t.current,[{offset:0,backgroundColor:"#959595"},{offset:.5,backgroundColor:"#959595"},{offset:1,backgroundColor:"var(--color-bg-figjam)"}],A),m=new KeyframeEffect(r.current,[{offset:0,filter:"grayscale(80%)"},{offset:.5,filter:"grayscale(80%)"},{offset:1,filter:"grayscale(0%)"}],A),p=new KeyframeEffect(n.current,s?[{offset:.4,color:"var(--color-text-onfigjam)"},{offset:.62,color:"var(--color-text-onfigjam)"}]:[{offset:.4,color:"var(--color-text-onfigjam-tertiary)"},{offset:.62,color:"var(--color-text-onfigjam-tertiary)"},{offset:.77,color:"var(--color-text-tertiary)"}],A);d([s?void 0:o,u,p,m,c].filter(e=>!!e).map(e=>new Animation(e,document.timeline)))},[e,t,n,r,i,s]),function(e,t,n){let r=(0,I.ZC)(e),i=(0,o.md)(w.Qs),l=(0,T.II)(),s=i.isOpen||l.length>0;a.useEffect(()=>{s||(e&&!r&&t(),!e&&r&&n())},[e,t,n,r,l,s])}(l,a.useCallback(()=>{c.forEach(e=>{e.playbackRate=1,e.play()})},[c]),a.useCallback(()=>{c.forEach(e=>{e.playbackRate=-1,e.play()})},[c]))}(z,j,$,q,W,M,e);let Y=function(e){let t=(0,o.md)(w.Qs),n=(0,T.II)();return!e&&!t.isOpen&&0===n.length}(M),X=(0,p.$)(),J=(0,C.Av)(),Z=e?t.isOpen||g.length>0:t.isOpen;return a.createElement("div",{ref:z,className:l()("meeting_tools_toolbar--toolbarItemContainer--3HgdD",{"meeting_tools_toolbar--meetDeviceToolbarItemContainer--8R79s":(0,u.eM)(),"meeting_tools_toolbar--hasVolumeControl--jaTZr":V})},a.createElement("button",{ref:W,className:l()("meeting_tools_toolbar--toolbarItemButton--VBNmh",{[D]:Z,[L]:!X}),onClick:s.rf("meetingsPanelToolbar","click",B),"data-tooltip-type":m.Ib.TEXT,"data-tooltip":J?(0,c.t)("meetings_panel.toolbar_tooltip"):(0,c.t)("meetings_panel.toolbar_tooltip.no_voting"),"aria-label":J?(0,c.t)("meetings_panel.toolbar.aria_label"):(0,c.t)("meetings_panel.toolbar.aria_label.no_voting"),"aria-pressed":Z,"data-onboarding-key":"meeting-panel-button"},a.createElement(P,{icon:U,maskRef:j,starContainerRef:q,renderAsPreGleam:Y,isUI3:e}),a.createElement("div",{className:l()("meeting_tools_toolbar--textWrapper--eikYA text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",{[D]:Z})},H),a.createElement(F,{width:H&&K?8:0}),a.createElement("div",{className:l()("meeting_tools_toolbar--minimizedTimerWrapper--adc47",{[R]:!K})},g.includes(w.sx.TIMER)?a.createElement(a.Fragment,null,a.createElement(f.k$,{isSelected:Z,prominence:G,size:f.ZP.XSMALL,withoutTimeShadow:!0,withoutFlashOnPause:!0,withoutUnderline:!0,timeDivRef:$,isInUI3Toolbar:e})):a.createElement(a.Fragment,null,a.createElement(f.p0,{isSelected:Z,prominence:G,size:f.ZP.XSMALL,withoutTimeShadow:!0,withoutUnderline:!0,timeDivRef:$,timeInSeconds:(0,h.RE)(O),isInUI3Toolbar:e})))),g.includes(w.sx.MUSIC)&&a.createElement("div",{className:l()("meeting_tools_toolbar--volumeControlContainer--gXf-m",{[D]:Z,[R]:!g.includes(w.sx.MUSIC),[L]:!X})},a.createElement(y.aY,{volumeJustification:b.Z.CENTER,isMinimized:!0,iconColor:Z?e?y.J.FIGJAM:y.J.ON_FIGJAM:y.J.DEFAULT,blockButtonTooltip:!0,sliderVisibilitySetting:t.isOpen||X?y.s1.NEVER:y.s1.DEFAULT,muteOnTouch:X,size:e?y.nh.LARGE:y.nh.DEFAULT})))}function P({icon:e,maskRef:t,starContainerRef:n,renderAsPreGleam:r,isUI3:i}){return"NONE"===e?null:a.createElement("div",{className:l()("meeting_tools_toolbar--iconContainer--n2hs5",{"meeting_tools_toolbar--single--h9cHX":"ALL"!==e})},a.createElement("div",{className:l()("meeting_tools_toolbar--recordIcon--D6vfx meeting_tools_toolbar--icon--EVBBt",{[R]:"MUSIC"!==e&&"ALL"!==e})},a.createElement(g.mS,{size:g.XD.XSMALL,maskAlbumArtWhenPaused:!0,maskRef:t,useGrayMask:r,useLightShadow:i})),a.createElement("div",{className:l()("meeting_tools_toolbar--starIcon--37MdY meeting_tools_toolbar--icon--EVBBt",{"meeting_tools_toolbar--leftAlign--G1Vob":"VOTE"===e,[R]:"VOTE"!==e&&"ALL"!==e})},a.createElement("div",{ref:n,className:l()("meeting_tools_toolbar--starContainer--4lbzy",{"meeting_tools_toolbar--grayedOut--deQf-":r})},a.createElement(O,null))))}function F(e){return a.createElement("div",{style:{width:e.width||0}})}var B=(e=>(e.ALL="ALL",e.MUSIC="MUSIC",e.VOTE="VOTE",e.NONE="NONE",e))(B||{})},655515:(e,t,n)=>{n.d(t,{Cx:()=>s,ET:()=>l,UT:()=>o});var a=n(38580),r=n(368702);let i=(0,a.eU)(!1),l=(0,a.eU)(e=>e(i)),o=(0,a.eU)(null,(e,t)=>{(0,r.W)("left",()=>{t(s)}),t(i,!0)}),s=(0,a.eU)(null,(e,t)=>{t(i,!1)})},507786:(e,t,n)=>{n.d(t,{Z:()=>u});var a=n(411855),r=n(629019),i=n.n(r),l=n(522739),o=n(672517),s=n(516398),c=n(498606);let d=(0,a.memo)((0,a.forwardRef)(function({tooltip:e,isActive:t,onClick:n,recordingKey:r,dataElementTarget:o,onboardingKey:d,disabled:u,dataTestId:m,children:p},_){let g=i()("figjam_right_panel_button--button--Ul-Xf",{"figjam_right_panel_button--active--hWdY1":t});return a.createElement(l.GG,{forwardedRef:_,className:g,"data-tooltip-type":e.type,"data-testid":m,"data-tooltip":e.type===c.Ib.TEXT?e.text:e.key,"data-element-target":o,onKeyDown:e=>(0,s.hx)({e,onClickHandler:n}),onClick:n,recordingKey:r,tabIndex:0,"aria-label":e.type===c.Ib.TEXT?e.text:e.ariaLabel,"aria-pressed":t,"data-fullscreen-intercept":!0,"data-onboarding-key":d,disabled:u},p)})),u=(0,o.tf)(d)},239177:(e,t,n)=>{n.d(t,{g:()=>s});var a=n(411855),r=n(188507),i=n(646240),l=n(335682),o=n(666456);function s(){let e=(0,l.tS)(),t=(0,r.d4)(e=>e.fileVersion),n=(0,i.Xr)(o.ME);return(0,a.useCallback)((a,r)=>n({fileKey:e,fileVersion:t,template:a},r),[e,t,n])}},328288:(e,t,n)=>{n.d(t,{s:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M10.121 7.293a2.5 2.5 0 1 0-3.535-3.535L3.758 6.586a.5.5 0 1 1-.708-.707l2.83-2.828A3.5 3.5 0 1 1 10.829 8L8 10.828a.5.5 0 1 1-.707-.707zM5.88 8.707a2.5 2.5 0 1 0 3.535 3.536l2.829-2.828a.5.5 0 1 1 .707.707L10.12 12.95A3.5 3.5 0 1 1 5.171 8L8 5.172a.5.5 0 1 1 .707.707z",clipRule:"evenodd"}))}},971612:(e,t,n)=>{n.d(t,{M:()=>i});var a=n(411855),r=n(434228);function i(e){return(0,r.O)()?a.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.293 2.293a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1 0 1.414l-1.146 1.147a.5.5 0 1 1-.707-.708L12 7 8 3 4 7l1.146 1.146a.5.5 0 1 1-.707.708L3.293 7.707a1 1 0 0 1 0-1.414l4-4Zm-2.147 8.353a.5.5 0 0 0 .708.708L7.5 9.707V13.5a.5.5 0 0 0 1 0V9.707l1.646 1.647a.5.5 0 0 0 .708-.708l-2.5-2.5a.5.5 0 0 0-.708 0l-2.5 2.5Z",clipRule:"evenodd"})):a.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.854 2.146a.5.5 0 0 0-.708 0l-5 5a.5.5 0 0 0 0 .708l1.5 1.5a.5.5 0 0 0 .708-.707L3.207 7.5 7.5 3.207 11.793 7.5l-1.147 1.147a.5.5 0 0 0 .707.707l1.5-1.5a.5.5 0 0 0 0-.708l-5-5Zm-3.208 8.5a.5.5 0 1 0 .707.708L7 9.707V13.5a.5.5 0 1 0 1 0V9.707l1.646 1.647a.5.5 0 0 0 .707-.707l-2.5-2.5a.5.5 0 0 0-.707 0l-2.5 2.5Z",clipRule:"evenodd"}))}},350730:(e,t,n)=>{n.d(t,{J:()=>i});var a=n(411855),r=n(434228);function i(e){return(0,r.O)()?a.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M8 3a.5.5 0 0 1 .5.5v4h4a.5.5 0 0 1 0 1h-4v4a.5.5 0 0 1-1 0v-4h-4a.5.5 0 0 1 0-1h4v-4A.5.5 0 0 1 8 3",clipRule:"evenodd"})):a.createElement("svg",{width:"16",height:"16",fill:"none",viewBox:"0 0 16 16",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 3a.5.5 0 0 1 .5.5V7h3.5a.5.5 0 0 1 0 1H8v3.5a.5.5 0 0 1-1 0V8H3.5a.5.5 0 0 1 0-1H7V3.5a.5.5 0 0 1 .5-.5",clipRule:"evenodd"}))}},503429:(e,t,n)=>{n.d(t,{s:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m9.36 6.214-.674 2.472-2.473.674c-1.67.456-1.67 2.825 0 3.28l2.473.675.674 2.472c.455 1.67 2.825 1.67 3.28 0l.675-2.472 2.472-.674c1.67-.456 1.67-2.825 0-3.28l-2.472-.675-.675-2.472c-.455-1.67-2.825-1.67-3.28 0m.965.263L9.5 9.5l-3.024.824c-.687.188-.687 1.163 0 1.35L9.5 12.5l.825 3.024c.187.688 1.163.688 1.35 0l.825-3.023 3.024-.825c.688-.188.688-1.163 0-1.35L12.5 9.5l-.825-3.024c-.187-.688-1.163-.688-1.35 0M14.5 14a.5.5 0 0 0-.5.5v1a.5.5 0 0 0 1 0V15h1v3h-.5a.5.5 0 0 0 0 1h2a.5.5 0 0 0 0-1H17v-3h1v.5a.5.5 0 0 0 1 0v-1a.5.5 0 0 0-.5-.5z",clipRule:"evenodd"}))}},328849:(e,t,n)=>{n.d(t,{V:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m6.9 6.9.29-1.159c.08-.323.54-.323.62 0L8.1 6.9l1.158.29c.323.08.323.54 0 .62L8.1 8.1l-.29 1.158c-.08.323-.54.323-.62 0L6.9 8.1l-1.158-.29c-.323-.08-.323-.54 0-.62zm9 9 .29-1.158c.08-.323.54-.323.62 0l.29 1.158 1.158.29c.323.08.323.54 0 .62l-1.158.29-.29 1.159c-.08.323-.54.323-.62 0L15.9 17.1l-1.158-.29c-.323-.08-.323-.54 0-.62zm-5.54-8.687-.674 2.473-2.473.674c-1.67.456-1.67 2.825 0 3.28l2.473.675.674 2.472c.455 1.67 2.825 1.67 3.28 0l.674-2.472 2.473-.675c1.67-.455 1.67-2.824 0-3.28l-2.473-.674-.674-2.473c-.455-1.67-2.825-1.67-3.28 0m.965.263L10.5 10.5l-3.024.825c-.688.187-.688 1.163 0 1.35l3.024.825.825 3.024c.187.688 1.163.688 1.35 0L13.5 13.5l3.024-.825c.688-.187.688-1.163 0-1.35L13.5 10.5l-.825-3.024c-.187-.687-1.163-.687-1.35 0",clipRule:"evenodd"}))}},293775:(e,t,n)=>{n.d(t,{C:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m4.7 4.7.315-1.26c.126-.505.844-.505.97 0L6.3 4.7l1.26.315c.505.126.505.844 0 .97L6.3 6.3l-.315 1.26c-.126.505-.844.505-.97 0L4.7 6.3l-1.26-.315c-.505-.126-.505-.844 0-.97zm4.49 4.491 1.117-3.908c.486-1.702 2.898-1.702 3.384 0L14.81 9.19l3.908 1.117c1.702.486 1.702 2.898 0 3.384L14.81 14.81l-1.117 3.908c-.486 1.702-2.898 1.702-3.384 0L9.19 14.81l-3.908-1.117c-1.702-.486-1.702-2.898 0-3.384zM10 10l1.27-4.442c.21-.735 1.25-.735 1.46 0L14 10l4.442 1.27c.735.21.735 1.25 0 1.46L14 14l-1.27 4.442c-.21.735-1.25.735-1.46 0L10 14l-4.442-1.27c-.735-.21-.735-1.25 0-1.46zm8.015 6.44L17.7 17.7l-1.26.315c-.505.126-.505.844 0 .97l1.26.315.315 1.26c.126.505.844.505.97 0l.315-1.26 1.26-.315c.505-.126.505-.844 0-.97L19.3 17.7l-.315-1.26c-.126-.505-.844-.505-.97 0",clipRule:"evenodd"}))}},292317:(e,t,n)=>{n.d(t,{B:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m18.015 5.441-.315 1.26-1.26.315c-.505.126-.505.844 0 .97l1.26.315.315 1.26c.126.505.844.505.97 0L19.3 8.3l1.26-.315c.505-.126.505-.844 0-.97L19.3 6.7l-.315-1.26c-.126-.505-.844-.505-.97 0M8.5 10.001a.5.5 0 0 0 0 1h7a.5.5 0 1 0 0-1zM8 13.5a.5.5 0 0 1 .5-.5h5a.5.5 0 0 1 0 1h-5a.5.5 0 0 1-.5-.5M14.5 7a.5.5 0 0 1 0 1h-7A1.5 1.5 0 0 0 6 9.5v6A1.5 1.5 0 0 0 7.5 17h9a1.5 1.5 0 0 0 1.5-1.5v-4a.5.5 0 0 1 1 0v4a2.5 2.5 0 0 1-2.5 2.5h-9A2.5 2.5 0 0 1 5 15.5v-6A2.5 2.5 0 0 1 7.5 7z",clipRule:"evenodd"}))}},811027:(e,t,n)=>{n.d(t,{z:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M5 6h14a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1M3 7a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2zm3.618 8.282h1.265l.542-1.614h2.46l.543 1.614h1.265l-2.307-6.545H8.922zm3.947-2.566-.886-2.637h-.05l-.885 2.637zm3.843.559v.083h1.064v-.083q.003-.338.08-.569.08-.232.243-.406.165-.173.425-.332a2.4 2.4 0 0 0 .508-.4q.214-.224.33-.511a1.7 1.7 0 0 0 .117-.652q0-.54-.262-.933a1.7 1.7 0 0 0-.725-.61 2.5 2.5 0 0 0-1.074-.215q-.56 0-1.023.205-.46.204-.741.613-.279.41-.294 1.017h1.138q.016-.3.146-.496a.84.84 0 0 1 .336-.294q.204-.099.432-.099.246 0 .444.102.2.104.32.288.117.186.118.438a.9.9 0 0 1-.09.406q-.09.18-.246.326a2.2 2.2 0 0 1-.348.265q-.284.175-.483.387a1.4 1.4 0 0 0-.307.55q-.105.342-.108.92m.06 1.873a.68.68 0 0 0 .496.204q.192 0 .348-.092a.74.74 0 0 0 .256-.256.66.66 0 0 0 .099-.355.66.66 0 0 0-.211-.492.68.68 0 0 0-.492-.204.68.68 0 0 0-.496.204.67.67 0 0 0-.207.492q0 .294.207.499",clipRule:"evenodd"}))}},339502:(e,t,n)=>{n.d(t,{_:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M15 9a3 3 0 1 1-6 0 3 3 0 0 1 6 0m1 0a4 4 0 1 1-8 0 4 4 0 0 1 8 0m-9.75 8.006a.48.48 0 0 0 .054.612c.233.235.619.167.811-.103A5.99 5.99 0 0 1 12 15c2.014 0 3.797.992 4.885 2.515.192.27.578.338.81.102a.48.48 0 0 0 .054-.611A6.99 6.99 0 0 0 12 14a6.99 6.99 0 0 0-5.75 3.006",clipRule:"evenodd"}))}},52339:(e,t,n)=>{n.d(t,{T:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m6.953 5.91-.315 1.26-1.26.315c-.504.126-.504.844 0 .97l1.26.315.315 1.26c.127.504.844.504.97 0l.315-1.26 1.26-.315c.505-.126.505-.844 0-.97l-1.26-.315-.314-1.26c-.127-.505-.844-.505-.97 0m7.84.09a1 1 0 0 1 1.414 0L18 7.793a1 1 0 0 1 0 1.414l-1.646 1.646L9.5 17.708a1 1 0 0 1-.707.293H7a1 1 0 0 1-1-1v-1.793a1 1 0 0 1 .293-.707l6.853-6.854zm-.586 2L16 9.793 17.293 8.5 15.5 6.707zm1.086 2.5L13.5 8.707l-6.5 6.5V17h1.793zm.546 5.37.28-1.12c.083-.333.556-.333.64 0l.28 1.12 1.119.28c.333.083.333.557 0 .64l-1.12.28-.28 1.12c-.083.332-.556.332-.64 0l-.28-1.12-1.119-.28c-.333-.083-.333-.557 0-.64z",clipRule:"evenodd"}))}},523047:(e,t,n)=>{n.d(t,{W:()=>i});var a=n(411855),r=n(434228);function i(e){return(0,r.O)()?a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.646 5.646a.5.5 0 0 1 .708 0l4.5 4.5a.5.5 0 0 1-.708.708L12.5 7.207V18a.5.5 0 0 1-1 0V7.207l-3.646 3.647a.5.5 0 0 1-.708-.708z",clipRule:"evenodd"})):a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M11.146 5.146a.5.5 0 0 1 .708 0l5 5a.5.5 0 0 1-.708.708L12 6.707V17.5a.5.5 0 0 1-1 0V6.707l-4.146 4.147a.5.5 0 0 1-.708-.708z",clipRule:"evenodd"}))}},978488:(e,t,n)=>{n.d(t,{P:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M15 6v.879l-1 1v-1.88l-1 1-2 2H8.5a.5.5 0 0 0-.5.5v4.38l-.961.96A1.5 1.5 0 0 1 7 14.5v-5A1.5 1.5 0 0 1 8.5 8h2.086l2.707-2.707A1 1 0 0 1 15 6m-1 6.121 1-1V18a1 1 0 0 1-1.707.707L10.586 16h-.464l.939-.939L13 17l1 1v-5.88m3.854-5.267a.5.5 0 0 0-.708-.707l-11 11a.5.5 0 1 0 .708.707z",clipRule:"evenodd"}))}},43604:(e,t,n)=>{n.d(t,{L:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"m9 15 2 2 1 1V6l-1 1-2 2H6.5a.5.5 0 0 0-.5.5v5a.5.5 0 0 0 .5.5zm2.293-9.707L8.586 8H6.5A1.5 1.5 0 0 0 5 9.5v5A1.5 1.5 0 0 0 6.5 16h2.086l2.707 2.707A1 1 0 0 0 13 18V6a1 1 0 0 0-1.707-.707m3.249 12.109c-.289.055-.542-.178-.542-.472v-.01c0-.255.193-.466.442-.519a4.502 4.502 0 0 0 0-8.802.54.54 0 0 1-.442-.52v-.01c0-.293.253-.526.542-.47a5.502 5.502 0 0 1 0 10.802m.02-2.066c-.29.092-.562-.144-.562-.448v-.03c0-.237.17-.437.392-.522a2.5 2.5 0 0 0 0-4.672C14.17 9.579 14 9.379 14 9.14v-.029c0-.304.272-.54.562-.448a3.502 3.502 0 0 1 0 6.672m.026-2.303c-.238.25-.588.02-.588-.325v-1.416c0-.345.35-.575.588-.325a1.5 1.5 0 0 1 0 2.066",clipRule:"evenodd"}))}},775419:(e,t,n)=>{n.d(t,{Q:()=>r});var a=n(411855);function r(e){return a.createElement("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e},a.createElement("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M6 6h12a1 1 0 0 1 1 1v3H5V7a1 1 0 0 1 1-1m-1 5v6a1 1 0 0 0 1 1h3v-7zm5 7h8a1 1 0 0 0 1-1v-6h-9zM4 7a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2z",clipRule:"evenodd"}))}}}]);

//# debugId=2982bae2-3385-51bd-8192-9d3863762680

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/8887574dce1aaeb789ffaa634abd9f947a84d5fd/3143-f4df9cf8880930d7.min.js.map